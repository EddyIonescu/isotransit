!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/isotransit/",t(t.s=259)}([function(e,t,n){"use strict";e.exports=n(269)},function(e,t,n){"use strict";(function(t){function r(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0}function i(e){return t.Buffer&&"function"===typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}function o(e){return Object.prototype.toString.call(e)}function a(e){return!i(e)&&("function"===typeof t.ArrayBuffer&&("function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}function s(e){if(b.isFunction(e)){if(E)return e.name;var t=e.toString(),n=t.match(T);return n&&n[1]}}function u(e,t){return"string"===typeof e?e.length<t?e:e.slice(0,t):e}function l(e){if(E||!b.isFunction(e))return b.inspect(e);var t=s(e);return"[Function"+(t?": "+t:"")+"]"}function c(e){return u(l(e.actual),128)+" "+e.operator+" "+u(l(e.expected),128)}function f(e,t,n,r,i){throw new S.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function p(e,t){e||f(e,!0,t,"==",S.ok)}function h(e,t,n,s){if(e===t)return!0;if(i(e)&&i(t))return 0===r(e,t);if(b.isDate(e)&&b.isDate(t))return e.getTime()===t.getTime();if(b.isRegExp(e)&&b.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"===typeof e||null!==t&&"object"===typeof t){if(a(e)&&a(t)&&o(e)===o(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===r(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(i(e)!==i(t))return!1;s=s||{actual:[],expected:[]};var u=s.actual.indexOf(e);return-1!==u&&u===s.expected.indexOf(t)||(s.actual.push(e),s.expected.push(t),v(e,t,n,s))}return n?e===t:e==t}function d(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function v(e,t,n,r){if(null===e||void 0===e||null===t||void 0===t)return!1;if(b.isPrimitive(e)||b.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=d(e),o=d(t);if(i&&!o||!i&&o)return!1;if(i)return e=w.call(e),t=w.call(t),h(e,t,n);var a,s,u=A(e),l=A(t);if(u.length!==l.length)return!1;for(u.sort(),l.sort(),s=u.length-1;s>=0;s--)if(u[s]!==l[s])return!1;for(s=u.length-1;s>=0;s--)if(a=u[s],!h(e[a],t[a],n,r))return!1;return!0}function m(e,t,n){h(e,t,!0)&&f(e,t,n,"notDeepStrictEqual",m)}function y(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function g(e){var t;try{e()}catch(e){t=e}return t}function _(e,t,n,r){var i;if("function"!==typeof t)throw new TypeError('"block" argument must be a function');"string"===typeof n&&(r=n,n=null),i=g(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&f(i,n,"Missing expected exception"+r);var o="string"===typeof r,a=!e&&b.isError(i),s=!e&&i&&!n;if((a&&o&&y(i,n)||s)&&f(i,n,"Got unwanted exception"+r),e&&i&&n&&!y(i,n)||!e&&i)throw i}var b=n(343),x=Object.prototype.hasOwnProperty,w=Array.prototype.slice,E=function(){return"foo"===function(){}.name}(),S=e.exports=p,T=/\s*function\s+([^\(\s]*)\s*/;S.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=c(this),this.generatedMessage=!0);var t=e.stackStartFunction||f;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,i=s(t),o=r.indexOf("\n"+i);if(o>=0){var a=r.indexOf("\n",o+1);r=r.substring(a+1)}this.stack=r}}},b.inherits(S.AssertionError,Error),S.fail=f,S.ok=p,S.equal=function(e,t,n){e!=t&&f(e,t,n,"==",S.equal)},S.notEqual=function(e,t,n){e==t&&f(e,t,n,"!=",S.notEqual)},S.deepEqual=function(e,t,n){h(e,t,!1)||f(e,t,n,"deepEqual",S.deepEqual)},S.deepStrictEqual=function(e,t,n){h(e,t,!0)||f(e,t,n,"deepStrictEqual",S.deepStrictEqual)},S.notDeepEqual=function(e,t,n){h(e,t,!1)&&f(e,t,n,"notDeepEqual",S.notDeepEqual)},S.notDeepStrictEqual=m,S.strictEqual=function(e,t,n){e!==t&&f(e,t,n,"===",S.strictEqual)},S.notStrictEqual=function(e,t,n){e===t&&f(e,t,n,"!==",S.notStrictEqual)},S.throws=function(e,t,n){_(!0,e,t,n)},S.doesNotThrow=function(e,t,n){_(!1,e,t,n)},S.ifError=function(e){if(e)throw e};var A=Object.keys||function(e){var t=[];for(var n in e)x.call(e,n)&&t.push(n);return t}}).call(t,n(20))},function(e,t,n){e.exports=n(312)()},function(e,t,n){var r,i;!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var i=typeof r;if("string"===i||"number"===i)e.push(r);else if(Array.isArray(r))e.push(n.apply(null,r));else if("object"===i)for(var a in r)o.call(r,a)&&r[a]&&e.push(a)}}return e.join(" ")}var o={}.hasOwnProperty;"undefined"!==typeof e&&e.exports?e.exports=n:(r=[],void 0!==(i=function(){return n}.apply(t,r))&&(e.exports=i))}()},function(e,t,n){"use strict";function r(e){return Boolean(e&&(e instanceof f.d||e.ARRAY_BUFFER===b))}function i(e){return Boolean(e&&(e instanceof f.b||e.TEXTURE_BINDING_3D===x))}function o(e){_()(r(e),w)}function a(e){_()(i(e),S)}function s(){function e(e){if(a)throw new Error(e);return null}var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t=Object.assign({},P,t);var n=t,r=n.canvas,i=n.width,o=n.height,a=n.throwOnError,s=n.manageState,u=n.debug,f=void 0;if(m.c){var v=void 0;v=r?"string"===typeof r?Object(h.c)({id:r}):r:Object(h.a)({id:"lumagl-canvas",width:i,height:o,onError:e}),f=Object(h.b)({canvas:v,opts:t})}else f=c({width:i,height:o,opts:t,onError:e});return f?(s&&Object(p.a)(f,{copyState:!1,log:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return m.f.log.apply(m.f,[1].concat(t))}}),m.c&&u&&(f=Object(d.a)(f,{debug:u}),m.f.priority=Math.max(m.f.priority,1)),l(f),f):null}function u(e){}function l(e){var t=i(e)?"WebGL2":"WebGL1",n=Object(v.b)(e),r=n?"("+n.vendor+","+n.renderer+")":"",o=e.debug?" debug":"";m.f.once(0,""+t+o+" context "+r)}function c(e){var t=e.width,n=e.height,r=e.opts,i=e.onError,o=r.webgl1;if(r.webgl2&&!o)return i("headless-gl does not support WebGL2");if(!f.f)return i(T);if(!y.default.globals.headlessGL)return i(A);var a=y.default.globals.headlessGL(t,n,r);return a||i(O)}n.d(t,"a",function(){return E}),n.d(t,"b",function(){return S}),t.g=r,t.h=i,t.d=o,t.c=a,t.e=s,t.f=u;var f=n(22),p=n(109),h=n(37),d=n(188),v=n(114),m=(n(110),n(5)),y=n(76),g=n(1),_=n.n(g),b=34962,x=32874,w="Invalid WebGLRenderingContext",E=w,S="Requires WebGL2",T="WebGL API is missing. To run luma.gl under Node.js, please \"npm install gl\"\nand import 'luma.gl/headless' before importing 'luma.gl'.",A="Cannot create headless WebGL context, headlessGL not available",O="headlessGL failed to create headless WebGL context",P={webgl2:!0,webgl1:!0,throwOnFailure:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600}},function(e,t,n){"use strict";var r=n(182);n.d(t,"c",function(){return r.a});var i=(n(404),n(405));n.d(t,"h",function(){return i.c}),n.d(t,"e",function(){return i.b}),n.d(t,"d",function(){return i.a});var o=n(184);n.d(t,"f",function(){return o.a}),n.d(t,"b",function(){return o.b});var a=n(108);n.d(t,"a",function(){return a.a}),n.d(t,"g",function(){return a.d})},function(e,t,n){"use strict";var r=n(17);n.d(t,"f",function(){return r.b});var i=(n(37),n(4));n.d(t,"l",function(){return i.e});var o=n(50);n.d(t,"s",function(){return o.b}),n.d(t,"t",function(){return o.c});var a=(n(114),n(77),n(188),n(189),n(48));n.d(t,"b",function(){return a.a});var s=(n(81),n(80),n(49));n.d(t,"e",function(){return s.a});var u=(n(79),n(111));n.d(t,"j",function(){return u.a});var l=(n(194),n(195),n(78)),c=(n(190),n(196),n(192),n(410),n(411),n(191));n.d(t,"k",function(){return c.a});var f=(n(112),n(412),n(82));n.d(t,"h",function(){return f.a});var p=n(201);n.d(t,"a",function(){return p.b});var h=(n(420),n(422),n(423),n(29));n.d(t,"g",function(){return h.a});var d=(n(202),n(203));n.d(t,"c",function(){return d.a});var v=n(204);n.d(t,"d",function(){return v.a});var m=(n(205),n(206),n(207),n(83),n(425),n(426),n(427),n(428),n(429),n(430),n(431),n(432),n(433));n.n(m);n.o(m,"loadTextures")&&n.d(t,"o",function(){return m.loadTextures});var y=n(200);n.d(t,"i",function(){return y.a});var g=(n(199),n(115));n.d(t,"q",function(){return g.b}),n.d(t,"r",function(){return g.d});var _=n(436);n.d(t,"m",function(){return _.a});var b=n(437);n.d(t,"n",function(){return b.a});var x=(n(209),n(441),n(445),n(446));n.d(t,"p",function(){return x.a});n(447),n(9),n(197);n(76);l.b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.message=t.accessor=t.disabled=t.dateFormat=t.numberFormat=void 0;var i=r(n(2)),o=r(n(579));t.elementType=o.default;var a=r(n(253)),s=n(13),u=(0,a.default)(function(){return s.number.propType.apply(s.number,arguments)});t.numberFormat=u;var l=(0,a.default)(function(){return s.date.propType.apply(s.date,arguments)});t.dateFormat=l;var c=(0,a.default)(function(){return i.default.bool.apply(i.default,arguments)});t.disabled=c,c.acceptsArray=i.default.oneOfType([c,i.default.array]);var f=i.default.oneOfType([i.default.string,i.default.func]);t.accessor=f;var p=i.default.oneOfType([i.default.node,i.default.string,i.default.func]);t.message=p},function(e,t,n){"use strict";n.d(t,"d",function(){return j});var r=(n(400),n(181),n(51));n.d(t,"a",function(){return r.a});var i=(n(212),n(213),n(119));n.d(t,"c",function(){return i.a});var o=n(461);n.d(t,"b",function(){return o.a});var a=(n(15),n(122),n(462),n(463),n(84),n(210),n(211),n(30)),s=n(220),u=n(464),l=n(465),c=n(466),f=n(467),p=n(468),h=n(469),d=n(222),v=n(85),m=n(124),y=n(224),g=n(470),_=n(471),b=n(62),x=n(472),w=n(226),E=n(227),S=n(225),T=n(127),A=n(126),O=n(125),P=n(473),C=n(86),k=n(10),R=n(474),M=n(217),I=n(475),L=n(476),D=n(228),N=n(123),F=n(118),j={View:a.a,MapView:s.a,FirstPersonView:u.a,ThirdPersonView:l.a,OrbitView:c.a,PerspectiveView:f.a,OrthographicView:p.a,ViewportControls:m.a,FirstPersonState:h.a,OrbitState:d.a,MapState:v.b,Controller:m.a,MapController:y.a,FirstPersonViewport:g.a,ThirdPersonViewport:_.a,OrbitViewport:b.a,Deck:x.a,MapControllerJS:w.a,OrbitControllerJS:E.a,EffectManager:S.a,Effect:T.a,TRANSITION_EVENTS:A.a,LinearInterpolator:O.a,ViewportFlyToInterpolator:P.a,TransitionManager:A.b,extractViewState:C.a,BinSorter:I.a,linearScale:D.d,getLinearScale:D.b,quantizeScale:D.e,getQuantizeScale:D.c,clamp:D.a,defaultColorRange:L.a,log:k.a,get:R.a,count:M.a,flatten:N.c,countVertices:N.a,flattenVertices:N.d,fillArray:N.b,enable64bitSupport:F.a,fp64ify:F.c,fp64LowPart:F.b}},function(e,t,n){"use strict";n.d(t,"e",function(){return l});var r=n(156);n.d(t,"b",function(){return r.a});var i=n(70);n.d(t,"c",function(){return i.a});var o=(n(162),n(169));n.d(t,"a",function(){return o.a});var a=(n(171),n(18));n.d(t,"d",function(){return a.e});var s=n(373),u=n(374),l={Euler:s.a,SphericalCoordinates:u.a}},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){for(var n=arguments.length,o=Array(n>2?n-2:0),a=2;a<n;a++)o[a-2]=arguments[a];if(y()(Number.isFinite(e),"log priority must be a number"),e<=i.priority)if(o=d.apply(void 0,[t].concat(r(o))),console.debug){var s;(s=console).debug.apply(s,r(o))}else{var u;(u=console).info.apply(u,r(o))}}function o(e,t){for(var n=arguments.length,o=Array(n>2?n-2:0),a=2;a<n;a++)o[a-2]=arguments[a];if(!_[t]&&e<=i.priority){var s;o=v(o),(s=console).error.apply(s,r(d.apply(void 0,[t].concat(r(o))))),_[t]=!0}}function a(e){if(!_[e]){for(var t,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=console).warn.apply(t,["deck.gl: "+e].concat(r)),_[e]=!0}}function s(e){for(var t,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=console).error.apply(t,["deck.gl: "+e].concat(r))}function u(e,t){i.warn("`"+e+"` is deprecated and will be removed in a later version. Use `"+t+"` instead")}function l(e,t){i.error("`"+e+"` is no longer supported. Use `"+t+"` instead, check our upgrade-guide.md for more details")}function c(e,t){y()(Number.isFinite(e),"log priority must be a number"),e<=i.priority&&(console.time?console.time(t):console.info(t))}function f(e,t){y()(Number.isFinite(e),"log priority must be a number"),e<=i.priority&&(console.timeEnd?console.timeEnd(t):console.info(t))}function p(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.collapsed,o=void 0!==r&&r;e<=i.priority&&(o?console.groupCollapsed("luma.gl: "+t):console.group("luma.gl: "+t))}function h(e,t){e<=i.priority&&console.groupEnd("luma.gl: "+t)}function d(e){"function"===typeof e&&(e=e());for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return"string"===typeof e?n.unshift("deck.gl "+e):(n.unshift(e),n.unshift("deck.gl")),n}function v(e){return e&&e.length>0&&"object"===g(e[0])&&null!==e[0]&&"AssertionError"===e[0].name&&(e=Array.prototype.slice.call(e),e.unshift("assert("+e[0].message+")")),e}var m=n(1),y=n.n(m),g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_={};i.priority=0,i.log=i,i.once=o,i.time=c,i.timeEnd=f,i.warn=a,i.error=s,i.deprecated=u,i.removed=l,i.group=p,i.groupEnd=h,t.a=i},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(t.propTypes),r={};return Object.keys(e).forEach(function(t){-1!==n.indexOf(t)&&(r[t]=e[t])}),r}function i(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=o.apply(void 0,[e].concat(n)),u={};return Object.keys(i).forEach(function(e){(-1!==a.indexOf(e)||s.some(function(t){return!!e.match(t)}))&&(u[e]=i[e])}),u}function o(e){for(var t=Object.keys(e.constructor.propTypes),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=r.reduce(function(e,t){return e.concat(Object.keys(t.propTypes))},t),a={};return Object.keys(e.props).forEach(function(t){-1===o.indexOf(t)&&(a[t]=e.props[t])}),a}t.__esModule=!0,t.pick=r,t.pickElementProps=i,t.omitOwn=o;var a=["style","className","role","id","autocomplete","size","tabIndex","maxLength","name"],s=[/^aria-/,/^data-/,/^on[A-Z]\w+/]},function(e,t,n){"use strict";function r(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}r(),e.exports=n(268)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.format,n=e.parse,r=e.formats,i=e.propType,o=void 0===i?l:i,s=e.decimalChar,u=void 0===s?function(){return"."}:s,f=e.precision,h=void 0===f?function(){return null}:f;a(c,r),p={formats:r,precision:h,decimalChar:u,propType:o,format:m(t),parse:function(e,t,r){var i=n.call(this,e,t,r);return null!=i&&"number"!==typeof i&&invariant(!1),i}}}function o(e){var t=e.formats,n=e.format,r=e.parse,i=e.firstOfWeek,o=e.propType,s=void 0===o?l:o;a(f,t),d={formats:t,propType:s,firstOfWeek:i,format:m(n),parse:function(e,t){var n=r.call(this,e,t);return null==n||n instanceof Date&&!isNaN(n.getTime())||invariant(!1),n}}}function a(e,t){}function s(){var e={};return e}t.__esModule=!0,t.setNumber=i,t.setDate=o,t.date=t.number=void 0;var u=(r(n(87)),n(23),r(n(2))),l=u.default.oneOfType([u.default.string,u.default.func]),c=["default"],f=["default","date","time","header","footer","weekday","dayOfMonth","month","year","decade","century"],p=s(),h={propType:function(){var e;return(e=p).propType.apply(e,arguments)},getFormat:function(e,t){return t||p.formats[e]},parse:function(){var e;return(e=p).parse.apply(e,arguments)},format:function(){var e;return(e=p).format.apply(e,arguments)},decimalChar:function(){var e;return(e=p).decimalChar.apply(e,arguments)},precision:function(){var e;return(e=p).precision.apply(e,arguments)}};t.number=h;var d=s(),v={propType:function(){var e;return(e=d).propType.apply(e,arguments)},getFormat:function(e,t){return t||d.formats[e]},parse:function(){var e;return(e=d).parse.apply(e,arguments)},format:function(){var e;return(e=d).format.apply(e,arguments)},firstOfWeek:function(){var e;return(e=d).firstOfWeek.apply(e,arguments)}};t.date=v;var m=function(e){return function(t,n,r){var i="function"===typeof n?n(t,r,this):e.call(this,t,n,r);return null!=i&&"string"!==typeof i&&invariant(!1),i}}},function(e,t,n){"use strict";var r=["Out_of_memory",0],i=["Sys_error",-1],o=["Failure",-2],a=["Invalid_argument",-3],s=["End_of_file",-4],u=["Division_by_zero",-5],l=["Not_found",-6],c=["Match_failure",-7],f=["Stack_overflow",-8],p=["Sys_blocked_io",-9],h=["Assert_failure",-10],d=["Undefined_recursive_module",-11];r.tag=248,i.tag=248,o.tag=248,a.tag=248,s.tag=248,u.tag=248,l.tag=248,c.tag=248,f.tag=248,p.tag=248,h.tag=248,d.tag=248,t.out_of_memory=r,t.sys_error=i,t.failure=o,t.invalid_argument=a,t.end_of_file=s,t.division_by_zero=u,t.not_found=l,t.match_failure=c,t.stack_overflow=f,t.sys_blocked_io=p,t.assert_failure=h,t.undefined_recursive_module=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(10),o=n(121),a=n(9),s=n(57),u=n.n(s),l=n(58),c=n.n(l),f=n(56),p=n.n(f),h=n(104),d=n.n(h),v=n(47),m=n.n(v),y=n(21),g=n(1),_=n.n(g),b=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),x=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),w=[0,0,0],E=Object(o.a)(),S={pixelsPerMeter:[1,1,1],metersPerPixel:[1,1,1],pixelsPerDegree:[1,1,1],degreesPerPixel:[1,1,1]},T=0,A=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e);var n=t.id,i=void 0===n?null:n,o=t.x,s=void 0===o?0:o,u=t.y,l=void 0===u?0:u,c=t.width,f=void 0===c?1:c,p=t.height,h=void 0===p?1:p,d=t.viewMatrix,v=void 0===d?E:d,g=t.projectionMatrix,b=void 0===g?null:g,x=t.fovy,A=void 0===x?75:x,O=t.near,P=void 0===O?.1:O,C=t.far,k=void 0===C?1e3:C,R=t.longitude,M=void 0===R?null:R,I=t.latitude,L=void 0===I?null:I,D=t.zoom,N=void 0===D?null:D,F=t.position,j=void 0===F?null:F,B=t.modelMatrix,z=void 0===B?null:B,U=t.distanceScales,V=void 0===U?null:U;if(this.id=i||this.constructor.displayName||"viewport",this.isGeospatial=Number.isFinite(L)&&Number.isFinite(M),this.x=s,this.y=l,this.width=f||1,this.height=h||1,this.zoom=N,Number.isFinite(this.zoom)||(this.zoom=this.isGeospatial?Object(y.e)({latitude:L}):T),this.scale=Math.pow(2,this.zoom),this.distanceScales=this.isGeospatial?Object(y.d)({latitude:L,longitude:M,scale:this.scale}):V||S,this.focalDistance=t.focalDistance||1,this.distanceScales.metersPerPixel=new a.c(this.distanceScales.metersPerPixel),this.distanceScales.pixelsPerMeter=new a.c(this.distanceScales.pixelsPerMeter),this.position=w,this.meterOffset=w,j&&(this.position=j,this.modelMatrix=z,this.meterOffset=z?z.transformVector(j):j),this.viewMatrixUncentered=v,this.isGeospatial?(this.center=Object(y.h)({longitude:M,latitude:L,scale:this.scale,distanceScales:this.distanceScales,meterOffset:this.meterOffset}),this.viewMatrix=(new a.a).multiplyRight(this.viewMatrixUncentered).scale([1,-1,1]).translate(new a.c(this.center||w).negate())):(this.center=j,this.viewMatrix=v),b)this.projectionMatrix=b;else{_()(Number.isFinite(A));var G=Math.PI/180,W=A*G,H=this.width/this.height;this.projectionMatrix=m()([],W,H,P,k)}this._initMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this),this.getMatrices=this.getMatrices.bind(this)}return x(e,[{key:"equals",value:function(t){return t instanceof e&&(t.width===this.width&&t.height===this.height&&Object(a.d)(t.projectionMatrix,this.projectionMatrix)&&Object(a.d)(t.viewMatrix,this.viewMatrix))}},{key:"project",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.topLeft,r=void 0===n||n,i=b(e,3),o=i[0],a=i[1],s=i[2],u=void 0===s?0:s,l=this.projectFlat([o,a]),c=b(l,2),f=c[0],p=c[1],h=Object(y.m)([f,p,u],this.pixelProjectionMatrix),d=b(h,2),v=d[0],m=d[1],g=r?m:this.height-m;return 2===e.length?[v,g]:[v,g,h[2]]}},{key:"unproject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.topLeft,r=void 0===n||n,i=t.targetZ,o=b(e,3),a=o[0],s=o[1],u=o[2],l=r?s:this.height-s,c=Object(y.k)([a,l,u],this.pixelUnprojectionMatrix,i),f=this.unprojectFlat(c),p=b(f,2),h=p[0],d=p[1];return Number.isFinite(u)?[h,d,c[2]]:Number.isFinite(i)?[h,d,i]:[h,d]}},{key:"projectFlat",value:function(e){var t=b(e,2);t[0],t[1],arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return this._projectFlat.apply(this,arguments)}},{key:"unprojectFlat",value:function(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return this._unprojectFlat.apply(this,arguments)}},{key:"_projectFlat",value:function(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return e}},{key:"_unprojectFlat",value:function(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return e}},{key:"getMercatorParams",value:function(){var e=this._addMetersToLngLat([this.longitude||0,this.latitude||0],this.meterOffset);return{longitude:e[0],latitude:e[1]}}},{key:"isMapSynched",value:function(){return!1}},{key:"getDistanceScales",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e?Object(y.d)({longitude:e[0],latitude:e[1],scale:this.scale,highPrecision:!0}):this.distanceScales}},{key:"getMatrices",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.modelMatrix,n=void 0===t?null:t,r=this.viewProjectionMatrix,i=this.pixelProjectionMatrix,o=this.pixelUnprojectionMatrix;return n&&(r=p()([],this.viewProjectionMatrix,n),i=p()([],this.pixelProjectionMatrix,n),o=d()([],i)),Object.assign({modelViewProjectionMatrix:r,viewProjectionMatrix:this.viewProjectionMatrix,viewMatrix:this.viewMatrix,projectionMatrix:this.projectionMatrix,pixelProjectionMatrix:i,pixelUnprojectionMatrix:o,width:this.width,height:this.height,scale:this.scale})}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"getCameraDirection",value:function(){return this.cameraDirection}},{key:"getCameraUp",value:function(){return this.cameraUp}},{key:"_addMetersToLngLat",value:function(e,t){var n=b(e,3),r=n[0],i=n[1],o=n[2],a=void 0===o?0:o,s=this._metersToLngLatDelta(t),u=b(s,3),l=u[0],c=u[1],f=u[2],p=void 0===f?0:f;return 2===e.length?[r+l,i+c]:[r+l,i+c,a+p]}},{key:"_metersToLngLatDelta",value:function(e){var t=b(e,3),n=t[0],r=t[1],i=t[2],o=void 0===i?0:i;_()(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(o),"Illegal argument to Viewport");var a=this.distanceScales,s=a.pixelsPerMeter,u=a.degreesPerPixel,l=n*s[0]*u[0],c=r*s[1]*u[1];return 2===e.length?[l,c]:[l,c,o]}},{key:"_initMatrices",value:function(){var e=Object(o.a)();p()(e,e,this.projectionMatrix),p()(e,e,this.viewMatrix),this.viewProjectionMatrix=e,this.viewMatrixInverse=d()([],this.viewMatrix)||this.viewMatrix;var t=Object(o.b)({viewMatrix:this.viewMatrix,viewMatrixInverse:this.viewMatrixInverse}),n=t.eye,r=t.direction,a=t.up;this.cameraPosition=n,this.cameraDirection=r,this.cameraUp=a;var s=Object(o.a)();u()(s,s,[this.width/2,-this.height/2,1]),c()(s,s,[1,-1,0]),p()(s,s,this.viewProjectionMatrix),this.pixelProjectionMatrix=s,this.pixelUnprojectionMatrix=d()(Object(o.a)(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||i.a.warn("Pixel project matrix not invertible")}}]),e}();t.a=A,A.displayName="Viewport"},function(e,t,n){"use strict";function r(e){return"[object Array]"===S.call(e)}function i(e){return"[object ArrayBuffer]"===S.call(e)}function o(e){return"undefined"!==typeof FormData&&e instanceof FormData}function a(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function s(e){return"string"===typeof e}function u(e){return"number"===typeof e}function l(e){return"undefined"===typeof e}function c(e){return null!==e&&"object"===typeof e}function f(e){return"[object Date]"===S.call(e)}function p(e){return"[object File]"===S.call(e)}function h(e){return"[object Blob]"===S.call(e)}function d(e){return"[object Function]"===S.call(e)}function v(e){return c(e)&&d(e.pipe)}function m(e){return"undefined"!==typeof URLSearchParams&&e instanceof URLSearchParams}function y(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function g(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)}function _(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),r(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}function b(){function e(e,n){"object"===typeof t[n]&&"object"===typeof e?t[n]=b(t[n],e):t[n]=e}for(var t={},n=0,r=arguments.length;n<r;n++)_(arguments[n],e);return t}function x(e,t,n){return _(t,function(t,r){e[r]=n&&"function"===typeof t?w(t,n):t}),e}var w=n(146),E=n(291),S=Object.prototype.toString;e.exports={isArray:r,isArrayBuffer:i,isBuffer:E,isFormData:o,isArrayBufferView:a,isString:s,isNumber:u,isObject:c,isUndefined:l,isDate:f,isFile:p,isBlob:h,isFunction:d,isStream:v,isURLSearchParams:m,isStandardBrowserEnv:g,forEach:_,merge:b,extend:x,trim:y}},function(e,t,n){"use strict";function r(e){return Object(a.c)(o.a,e)}function i(e){return Object(a.a)(o.a,e)}t.c=r,t.d=i;var o=n(28),a=n(402);n.d(t,"a",function(){return o.a}),t.b=o.a},function(e,t,n){"use strict";function r(e){if(!Number.isFinite(e))throw new Error("Invalid number "+e);return e}function i(e){return Math.round(e/h.EPSILON)*h.EPSILON}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.precision,r=void 0===n?h.precision||4:n;return e=i(e),parseFloat(e.toPrecision(r))}function a(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&void 0!==e.length}function s(e){return e.clone?e.clone():new Array(e)}function u(e,t){if(a(e)){for(var n=s(e),r=0;r<n.length;++r)n[r]=t(n[r],r,n);return n}return t(e)}function l(e){return u(e,function(e){return e/180*Math.PI})}function c(e){return u(e,function(e){return 180*e/Math.PI})}function f(e,t,n){return u(e,function(e){return Math.max(t,Math.min(n,e))})}function p(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e===t)return!0;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!p(e[n],t[n]))return!1;return!0}return Math.abs(e-t)<=h.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))}n.d(t,"c",function(){return h}),t.a=r,t.f=o,t.g=l,t.d=c,t.b=f,t.e=p;var h={};h.EPSILON=1e-12,h.debug=!0,h.precision=4,h.printTypes=!1,h.printDegrees=!1,h.printRowMajor=!0},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(76),o=n(4),a=n(17),s=n(5),u=n(1),l=n.n(u),c=n(37),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p="Resource subclass must define virtual methods",h=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e),Object(o.d)(t);var i=n.id,a=n.userData,u=void 0===a?{}:a;this.gl=t,this.ext=Object(c.g)(t),this.id=i||Object(s.h)(this.constructor.name),this.userData=u,this.opts=n,this._handle=n.handle,void 0===this._handle&&(this._handle=this._createHandle()),this._addStats()}return f(e,[{key:"toString",value:function(){return this.constructor.name+"("+this.id+")"}},{key:"delete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.deleteChildren,n=void 0!==t&&t,r=this._handle&&this._deleteHandle(this._handle);return this._handle=null,r&&n&&r.filter(Boolean).forEach(function(e){e.delete()}),this}},{key:"unbind",value:function(){this.bind(null)}},{key:"getParameter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(a.c)(e),l()(e);var n=this.constructor.PARAMETERS||{},r=n[e];if(r){var i=Object(o.h)(this.gl);if(!((!("webgl2"in r)||i)&&(!("extension"in r)||this.gl.getExtension(r.extension)))){var s=r.webgl1,u="webgl2"in r?r.webgl2:r.webgl1;return i?u:s}}return this._getParameter(e,t)}},{key:"getParameters",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},n=t.parameters,r=t.keys,i=this.constructor.PARAMETERS||{},s=Object(o.h)(this.gl),u={},l=n||Object.keys(i),c=!0,f=!1,p=void 0;try{for(var h,d=l[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var v=h.value,m=i[v];if(m&&(!("webgl2"in m)||s)&&(!("extension"in m)||this.gl.getExtension(m.extension))){var y=r?Object(a.d)(v):v;u[y]=this.getParameter(v,e),r&&"GLenum"===m.type&&(u[y]=Object(a.d)(u[y]))}}}catch(e){f=!0,p=e}finally{try{!c&&d.return&&d.return()}finally{if(f)throw p}}return u}},{key:"setParameter",value:function(e,t){e=Object(a.c)(e),l()(e);var n=this.constructor.PARAMETERS||{},r=n[e];if(r){var i=Object(o.h)(this.gl);if(!((!("webgl2"in r)||i)&&(!("extension"in r)||this.gl.getExtension(r.extension))))throw new Error("Parameter not available on this platform");"GLenum"===r.type&&(t=Object(a.c)(t))}return this._setParameter(e,t),this}},{key:"setParameters",value:function(e){for(var t in e)this.setParameter(t,e[t]);return this}},{key:"initialize",value:function(e){}},{key:"_createHandle",value:function(){throw new Error(p)}},{key:"_deleteHandle",value:function(){throw new Error(p)}},{key:"_getOptsFromHandle",value:function(){throw new Error(p)}},{key:"_getParameter",value:function(e,t){throw new Error(p)}},{key:"_setParameter",value:function(e,t){throw new Error(p)}},{key:"_context",value:function(){return this.gl.luma=this.gl.luma||{},this.gl.luma}},{key:"_addStats",value:function(){var e=this.constructor.name,t=i.default.stats;t.resourceCount=t.resourceCount||0,t.resourceMap=t.resourceMap||{},t.resourceCount++,t.resourceMap[e]=t.resourceMap[e]||{count:0},t.resourceMap[e].count++}},{key:"handle",get:function(){return this._handle}}]),e}();t.a=h},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";var r=n(55);n.d(t,"a",function(){return r.a});var i=n(175);n.d(t,"b",function(){return i.a});var o=n(375);n.d(t,"j",function(){return o.a});var a=n(376);n.d(t,"c",function(){return a.a});var s=n(60);n.d(t,"i",function(){return s.f}),n.d(t,"l",function(){return s.i}),n.d(t,"m",function(){return s.j}),n.d(t,"k",function(){return s.g}),n.d(t,"e",function(){return s.b}),n.d(t,"d",function(){return s.a}),n.d(t,"h",function(){return s.e}),n.d(t,"g",function(){return s.d}),n.d(t,"f",function(){return s.c})},function(e,t,n){"use strict";var r=n(187);n.d(t,"d",function(){return r.h}),n.d(t,"c",function(){return r.d}),n.d(t,"b",function(){return r.b}),n.d(t,"f",function(){return r.m});var i=(n(37),n(28));n.d(t,"a",function(){return i.a}),t.e=i.a},function(e,t,n){"use strict";function r(e,t){if(e===t)return!0;if(e instanceof Date&&t instanceof Date)return+e===+t;if("object"!==typeof e&&"object"!==typeof t)return e===t;if(typeof e!==typeof t)return!1;if(null==e||null==t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!s(t,n[i])||e[n[i]]!==t[n[i]])return!1;return!0}function i(e,t){var n=0,r=e?e.length:0,i=[];for(t=Math.max(+t||1,1);n<r;)i.push(e.slice(n,n+=t));return i}function o(e,t,n){var r="function"===typeof e?e:function(t){return t[e]};return n=n||[],t.reduce(function(e,t){var i=r(t);return s(e,i)?e[i].push(t):(n.push(i),e[i]=[t]),e},{})}t.__esModule=!0,t.isShallowEqual=r,t.chunk=i,t.groupBySortedKeys=o,t.has=t.makeArray=void 0;var a=(function(e){e&&e.__esModule}(n(241)),function(e){return null==e?[]:[].concat(e)});t.makeArray=a;var s=function(e,t){return!!e&&Object.prototype.hasOwnProperty.call(e,t)};t.has=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(29);n.d(t,"Geometry",function(){return r.a});var i=n(202);n.d(t,"ConeGeometry",function(){return i.a});var o=n(203);n.d(t,"CubeGeometry",function(){return o.a});var a=n(204);n.d(t,"CylinderGeometry",function(){return a.a});var s=n(205);n.d(t,"IcoSphereGeometry",function(){return s.a});var u=n(206);n.d(t,"PlaneGeometry",function(){return u.a});var l=n(207);n.d(t,"SphereGeometry",function(){return l.a});var c=n(83);n.d(t,"TruncatedConeGeometry",function(){return c.a})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=r(n(89));t.spyOnComponent=i.default;var o=r(n(563));t.autoFocus=o.default;var a=r(n(567));t.focusManager=a.default;var s=r(n(130));t.mountManager=s.default;var u=r(n(243));t.timeoutManager=u.default;var l=r(n(568));t.mixin=l.default},function(e,t,n){"use strict";function r(e){return""+((null==e?"":e)+ ++s)}function i(e,t){e&&e.apply(null,[].concat(t))}function o(e,t){return void 0===t&&(t=""),e.__id||(e.__id=r("rw_")),(e.props.id||e.__id)+t}function a(e){return e._firstFocus||e.state.focused&&(e._firstFocus=!0)}t.__esModule=!0,t.notify=i,t.instanceId=o,t.isFirstFocusedRender=a;var s=0},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function o(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function a(){v&&h&&(v=!1,h.length?d=h.concat(d):m=-1,d.length&&s())}function s(){if(!v){var e=i(a);v=!0;for(var t=d.length;t;){for(h=d,d=[];++m<t;)h&&h[m].run();m=-1,t=d.length}h=null,v=!1,o(e)}}function u(e,t){this.fun=e,this.array=t}function l(){}var c,f,p=e.exports={};!function(){try{c="function"===typeof setTimeout?setTimeout:n}catch(e){c=n}try{f="function"===typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var h,d=[],v=!1,m=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];d.push(new u(e,t)),1!==d.length||v||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.prependListener=l,p.prependOnceListener=l,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(e,t,n){"use strict";t.a={DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,FUNC_ADD:32774,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,BLEND_COLOR:32773,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,VENDOR:7936,RENDERER:7937,VERSION:7938,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,BROWSER_DEFAULT_WEBGL:37444,STATIC_DRAW:35044,STREAM_DRAW:35040,DYNAMIC_DRAW:35048,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,CULL_FACE:2884,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,BLEND:3042,DEPTH_TEST:2929,DITHER:3024,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,SCISSOR_TEST:3089,STENCIL_TEST:2960,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CONTEXT_LOST_WEBGL:37442,CW:2304,CCW:2305,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,COMPILE_STATUS:35713,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_ATTRIBUTES:35721,ACTIVE_UNIFORMS:35718,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,ALWAYS:519,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,GEQUAL:518,NOTEQUAL:517,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,TEXTURE_WIDTH:4096,TEXTURE_HEIGHT:4097,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,MAX_3D_TEXTURE_SIZE:32883,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,MAX_TEXTURE_LOD_BIAS:34045,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,RASTERIZER_DISCARD:35977,VERTEX_ARRAY_BINDING:34229,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,MAX_ELEMENT_INDEX:36203,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,RGB9_E5:35901,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,RGB10_A2UI:36975,TEXTURE_IMMUTABLE_FORMAT:37167,TEXTURE_IMMUTABLE_LEVELS:33503,UNSIGNED_INT_2_10_10_10_REV:33640,UNSIGNED_INT_10F_11F_11F_REV:35899,UNSIGNED_INT_5_9_9_9_REV:35902,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,UNSIGNED_INT_24_8:34042,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,INT_2_10_10_10_REV:36255,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,MAX_SAMPLES:36183,SAMPLER_BINDING:35097,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,UNSIGNED_NORMALIZED:35863,SIGNED_NORMALIZED:36764,VERTEX_ATTRIB_ARRAY_INTEGER:35069,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,DEPTH24_STENCIL8:35056,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,COLOR:6144,DEPTH:6145,STENCIL:6146,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,INVALID_INDEX:4294967295,TIMEOUT_IGNORED:-1,MAX_CLIENT_WAIT_TIMEOUT_WEBGL:37447,VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,UNMASKED_VENDOR_WEBGL:37445,UNMASKED_RENDERER_WEBGL:37446,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047,TEXTURE_MAX_ANISOTROPY_EXT:34046,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35986,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,UNSIGNED_INT_24_8_WEBGL:34042,HALF_FLOAT_OES:36193,RGBA32F_EXT:34836,RGB32F_EXT:34837,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,UNSIGNED_NORMALIZED_EXT:35863,MIN_EXT:32775,MAX_EXT:32776,SRGB_EXT:35904,SRGB_ALPHA_EXT:35906,SRGB8_ALPHA8_EXT:35907,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT:33296,FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723,COLOR_ATTACHMENT0_WEBGL:36064,COLOR_ATTACHMENT1_WEBGL:36065,COLOR_ATTACHMENT2_WEBGL:36066,COLOR_ATTACHMENT3_WEBGL:36067,COLOR_ATTACHMENT4_WEBGL:36068,COLOR_ATTACHMENT5_WEBGL:36069,COLOR_ATTACHMENT6_WEBGL:36070,COLOR_ATTACHMENT7_WEBGL:36071,COLOR_ATTACHMENT8_WEBGL:36072,COLOR_ATTACHMENT9_WEBGL:36073,COLOR_ATTACHMENT10_WEBGL:36074,COLOR_ATTACHMENT11_WEBGL:36075,COLOR_ATTACHMENT12_WEBGL:36076,COLOR_ATTACHMENT13_WEBGL:36077,COLOR_ATTACHMENT14_WEBGL:36078,COLOR_ATTACHMENT15_WEBGL:36079,DRAW_BUFFER0_WEBGL:34853,DRAW_BUFFER1_WEBGL:34854,DRAW_BUFFER2_WEBGL:34855,DRAW_BUFFER3_WEBGL:34856,DRAW_BUFFER4_WEBGL:34857,DRAW_BUFFER5_WEBGL:34858,DRAW_BUFFER6_WEBGL:34859,DRAW_BUFFER7_WEBGL:34860,DRAW_BUFFER8_WEBGL:34861,DRAW_BUFFER9_WEBGL:34862,DRAW_BUFFER10_WEBGL:34863,DRAW_BUFFER11_WEBGL:34864,DRAW_BUFFER12_WEBGL:34865,DRAW_BUFFER13_WEBGL:34866,DRAW_BUFFER14_WEBGL:34867,DRAW_BUFFER15_WEBGL:34868,MAX_COLOR_ATTACHMENTS_WEBGL:36063,MAX_DRAW_BUFFERS_WEBGL:34852,VERTEX_ARRAY_BINDING_OES:34229,QUERY_COUNTER_BITS_EXT:34916,CURRENT_QUERY_EXT:34917,QUERY_RESULT_EXT:34918,QUERY_RESULT_AVAILABLE_EXT:34919,TIME_ELAPSED_EXT:35007,TIMESTAMP_EXT:36392,GPU_DISJOINT_EXT:36795}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){var t="string"===typeof e?l[e]||l.TRIANGLES:e;return s()(t>=0&&t<=l.TRIANGLE_FAN,"Illegal drawMode"),t}t.b=i;var o=n(5),a=n(1),s=n.n(a),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e);var n=t.id,a=t.drawMode,s=void 0===a?l.TRIANGLES:a,u=t.vertexCount,c=void 0===u?void 0:u,f=t.attributes;this.id=n||Object(o.h)(this.constructor.name),this.drawMode=i(s),this.vertexCount=c,this.attributes={},this.needsRedraw=!0,this.userData={},Object.seal(this),f&&this.setAttributes(f)}return u(e,[{key:"setNeedsRedraw",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=e,this}},{key:"getNeedsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.clearRedrawFlags,n=void 0!==t&&t,r=!1;return r=r||this.needsRedraw,this.needsRedraw=this.needsRedraw&&!n,r}},{key:"setVertexCount",value:function(e){this.vertexCount=e}},{key:"getVertexCount",value:function(){return void 0!==this.vertexCount?this.vertexCount:this.attributes.indices?this.attributes.indices.value.length:this.attributes.vertices?this.attributes.vertices.value.length/3:!!this.attributes.positions&&this.attributes.positions.value.length/3}},{key:"hasAttribute",value:function(e){return Boolean(this.attributes[e])}},{key:"getAttribute",value:function(e){var t=this.attributes[e];return s()(t),t.value}},{key:"getArray",value:function(e){var t=this.attributes[e];return s()(t),t.value}},{key:"getAttributes",value:function(){return this.attributes}},{key:"setAttributes",value:function(e){for(var t in e){var n=e[t];n=ArrayBuffer.isView(n)?{value:n}:n,s()(ArrayBuffer.isView(n.value),this._print(t)+": must be typed array or object with value as typed array"),this._autoDetectAttribute(t,n),this.attributes[t]=Object.assign({},n,{instanced:n.instanced||0})}return this.setNeedsRedraw(),this}},{key:"_autoDetectAttribute",value:function(e,t){var n=void 0;switch(e){case"indices":n=n||"indices";break;case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors"}switch(n){case"vectors":t.size=t.size||3;break;case"uvs":t.size=t.size||2;break;case"indices":t.size=t.size||1,t.isIndexed=t.isIndexed||!0,s()(t.value instanceof Uint16Array||t.value instanceof Uint32Array,'attribute array for "indices" must be of integer type')}s()(t.size,"attribute "+e+" needs size")}},{key:"_print",value:function(e){return"Geometry "+this.id+" attribute "+e}}]),e}();t.a=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(15),o=n(460),a=n(219),s=n(1),u=n.n(s),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e);var n=t.id,o=void 0===n?null:n,a=t.x,s=void 0===a?0:a,l=t.y,c=void 0===l?0:l,f=t.width,p=void 0===f?"100%":f,h=t.height,d=void 0===h?"100%":h,v=t.type,m=void 0===v?i.a:v,y=t.projectionMatrix,g=void 0===y?null:y,_=t.fovy,b=void 0===_?75:_,x=t.near,w=void 0===x?.1:x,E=t.far,S=void 0===E?1e3:E,T=t.modelMatrix,A=void 0===T?null:T,O=t.viewportInstance,P=void 0===O?null:O;u()(!P||P instanceof i.a),this.viewportInstance=P,this.id=o||this.constructor.displayName||"view",this.type=m,this.props=Object.assign({},t,{projectionMatrix:g,fovy:b,near:w,far:S,modelMatrix:A}),this._parseDimensions({x:s,y:c,width:p,height:d}),this.equals=this.equals.bind(this),Object.seal(this)}return l(e,[{key:"equals",value:function(e){return this===e||(this.viewportInstance?e.viewportInstance&&this.viewportInstance.equals(e.viewportInstance):Object(a.a)(this,e))}},{key:"makeViewport",value:function(e){var t=e.width,n=e.height,r=e.viewState;if(this.viewportInstance)return this.viewportInstance;var i=this.getDimensions({width:t,height:n}),o=Object.assign({viewState:r},r,this.props,i);return this._getViewport(o)}},{key:"getDimensions",value:function(e){var t=e.width,n=e.height;return{x:Object(o.a)(this._x,t),y:Object(o.a)(this._y,n),width:Object(o.a)(this._width,t),height:Object(o.a)(this._height,n)}}},{key:"_getViewport",value:function(e){return new(0,this.type)(e)}},{key:"_parseDimensions",value:function(e){var t=e.x,n=e.y,r=e.width,i=e.height;this._x=Object(o.b)(t),this._y=Object(o.b)(n),this._width=Object(o.b)(r),this._height=Object(o.b)(i)}}]),e}();t.a=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=!("undefined"===typeof window||!window.document||!window.document.createElement),e.exports=t.default},function(e,t,n){"use strict";function r(e){void 0===e&&(e={});var t={};return Object.keys(o).forEach(function(n){var r=e[n];null==r&&(r=o[n]),t[n]="function"===typeof r?r:function(){return r}}),t}t.__esModule=!0,t.getMessages=r;var i=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),o={moveBack:"Navigate back",moveForward:"Navigate forward",dateButton:"Select date",timeButton:"Select time",openCombobox:"open combobox",openDropdown:"open dropdown",placeholder:"",filterPlaceholder:"",emptyList:"There are no items in this list",emptyFilter:"The filter returned no results",createOption:function(e){var t=e.searchTerm;return[" Create option",t&&" ",t&&i.default.createElement("strong",{key:"_",__source:{fileName:"src/messages.js",lineNumber:22},__self:this},'"'+t+'"')]},tagsLabel:"Selected items",removeLabel:"Remove selected item",noneSelected:"no selected items",selectedItems:function(e){return"Selected items: "+e.join(", ")},increment:"Increment value",decrement:"Decrement value"}},function(e,t,n){"use strict";function r(e){function t(t){return function(){var n=this.props,r=n.disabled,i=n.readOnly;r=s(this)||1==r||!e&&!0===i;for(var o=arguments.length,a=new Array(o),u=0;u<o;u++)a[u]=arguments[u];if(!r)return t.apply(this,a)}}return function(e,n,r){if(r.initializer){var i=r.initializer;r.initializer=function(){return t(i.call(this)).bind(this)}}else r.value=t(r.value);return r}}t.__esModule=!0,t.disabledManager=t.widgetEditable=t.widgetEnabled=t.isInDisabledFieldset=void 0;var i=n(12),o=function(e){return e&&e.__esModule?e:{default:e}}(n(256)),a=n(25),s=function(e){var t;try{t=(0,i.findDOMNode)(e)}catch(e){}return!!t&&(0,o.default)(t,"fieldset[disabled] *")};t.isInDisabledFieldset=s;var u=r(!0);t.widgetEnabled=u;var l=r(!1);t.widgetEditable=l;var c=function(e){var t=!1,n=!1,r=!1;return(0,a.spyOnComponent)(e,{componentDidMount:function(){t=!0,s(this)&&this.forceUpdate()},componentWillUpdate:function(){n=t&&s(e),r=t},componentDidUpdate:function(){r=!1},componentWillUnmount:function(){e=null}}),function(){return!0===e.props.disabled||(r?n:t&&s(e))||e.props.disabled}};t.disabledManager=c},function(e,t,n){"use strict";function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}t.__esModule=!0,t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n(591)),o=n(13),a=r({},i.default,{monthsInYear:function(e){var t=new Date(e,0,1);return[0,1,2,3,4,5,6,7,8,9,10,11].map(function(e){return a.month(t,e)})},firstVisibleDay:function(e,t){var n=a.startOf(e,"month");return a.startOf(n,"week",o.date.firstOfWeek(t))},lastVisibleDay:function(e,t){var n=a.endOf(e,"month");return a.endOf(n,"week",o.date.firstOfWeek(t))},visibleDays:function(e,t){for(var n=a.firstVisibleDay(e,t),r=a.lastVisibleDay(e,t),i=[];a.lte(n,r,"day");)i.push(n),n=a.add(n,1,"day");return i},merge:function(e,t,n){return null==t&&null==e?null:(null==t&&(t=n||new Date),null==e&&(e=n||new Date),e=a.startOf(e,"day"),e=a.hours(e,a.hours(t)),e=a.minutes(e,a.minutes(t)),e=a.seconds(e,a.seconds(t)),a.milliseconds(e,a.milliseconds(t)))},today:function(){return a.startOf(new Date,"day")},tomorrow:function(){return a.add(a.startOf(new Date,"day"),1,"day")}}),s=a;t.default=s,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){for(;;){var n=t,i=e,o=i.length,a=o||1,s=n.length,u=a-s|0;if(u){if(u<0){t=P.caml_array_sub(n,a,0|-u),e=i.apply(null,P.caml_array_sub(n,0,a));continue}return function(e,t){return function(n){return r(e,t.concat([n]))}}(i,n)}return i.apply(null,n)}}function i(e,t,n){if(n>7||n<0)return r(e,[t]);switch(n){case 0:case 1:return e(t);case 2:return function(n){return e(t,n)};case 3:return function(n,r){return e(t,n,r)};case 4:return function(n,r,i){return e(t,n,r,i)};case 5:return function(n,r,i,o){return e(t,n,r,i,o)};case 6:return function(n,r,i,o,a){return e(t,n,r,i,o,a)};case 7:return function(n,r,i,o,a,s){return e(t,n,r,i,o,a,s)}}}function o(e,t){var n=e.length;return 1===n?e(t):i(e,t,n)}function a(e){return 1===e.length?e:function(t){return o(e,t)}}function s(e,t,n,i){if(i>7||i<0)return r(e,[t,n]);switch(i){case 0:case 1:return r(e(t),[n]);case 2:return e(t,n);case 3:return function(r){return e(t,n,r)};case 4:return function(r,i){return e(t,n,r,i)};case 5:return function(r,i,o){return e(t,n,r,i,o)};case 6:return function(r,i,o,a){return e(t,n,r,i,o,a)};case 7:return function(r,i,o,a,s){return e(t,n,r,i,o,a,s)}}}function u(e,t,n){var r=e.length;return 2===r?e(t,n):s(e,t,n,r)}function l(e){return 2===e.length?e:function(t,n){return u(e,t,n)}}function c(e,t,n,i,o){var a=0;if(o>7||o<0)return r(e,[t,n,i]);switch(o){case 0:case 1:a=1;break;case 2:return r(e(t,n),[i]);case 3:return e(t,n,i);case 4:return function(r){return e(t,n,i,r)};case 5:return function(r,o){return e(t,n,i,r,o)};case 6:return function(r,o,a){return e(t,n,i,r,o,a)};case 7:return function(r,o,a,s){return e(t,n,i,r,o,a,s)}}return 1===a?r(e(t),[n,i]):void 0}function f(e,t,n,r){var i=e.length;return 3===i?e(t,n,r):c(e,t,n,r,i)}function p(e){return 3===e.length?e:function(t,n,r){return f(e,t,n,r)}}function h(e,t,n,i,o,a){var s=0;if(a>7||a<0)return r(e,[t,n,i,o]);switch(a){case 0:case 1:s=1;break;case 2:return r(e(t,n),[i,o]);case 3:return r(e(t,n,i),[o]);case 4:return e(t,n,i,o);case 5:return function(r){return e(t,n,i,o,r)};case 6:return function(r,a){return e(t,n,i,o,r,a)};case 7:return function(r,a,s){return e(t,n,i,o,r,a,s)}}return 1===s?r(e(t),[n,i,o]):void 0}function d(e,t,n,r,i){var o=e.length;return 4===o?e(t,n,r,i):h(e,t,n,r,i,o)}function v(e){return 4===e.length?e:function(t,n,r,i){return d(e,t,n,r,i)}}function m(e,t,n,i,o,a,s){var u=0;if(s>7||s<0)return r(e,[t,n,i,o,a]);switch(s){case 0:case 1:u=1;break;case 2:return r(e(t,n),[i,o,a]);case 3:return r(e(t,n,i),[o,a]);case 4:return r(e(t,n,i,o),[a]);case 5:return e(t,n,i,o,a);case 6:return function(r){return e(t,n,i,o,a,r)};case 7:return function(r,s){return e(t,n,i,o,a,r,s)}}return 1===u?r(e(t),[n,i,o,a]):void 0}function y(e,t,n,r,i,o){var a=e.length;return 5===a?e(t,n,r,i,o):m(e,t,n,r,i,o,a)}function g(e){return 5===e.length?e:function(t,n,r,i,o){return y(e,t,n,r,i,o)}}function _(e,t,n,i,o,a,s,u){var l=0;if(u>7||u<0)return r(e,[t,n,i,o,a,s]);switch(u){case 0:case 1:l=1;break;case 2:return r(e(t,n),[i,o,a,s]);case 3:return r(e(t,n,i),[o,a,s]);case 4:return r(e(t,n,i,o),[a,s]);case 5:return r(e(t,n,i,o,a),[s]);case 6:return e(t,n,i,o,a,s);case 7:return function(r){return e(t,n,i,o,a,s,r)}}return 1===l?r(e(t),[n,i,o,a,s]):void 0}function b(e,t,n,r,i,o,a){var s=e.length;return 6===s?e(t,n,r,i,o,a):_(e,t,n,r,i,o,a,s)}function x(e){return 6===e.length?e:function(t,n,r,i,o,a){return b(e,t,n,r,i,o,a)}}function w(e,t,n,i,o,a,s,u,l){var c=0;if(l>7||l<0)return r(e,[t,n,i,o,a,s,u]);switch(l){case 0:case 1:c=1;break;case 2:return r(e(t,n),[i,o,a,s,u]);case 3:return r(e(t,n,i),[o,a,s,u]);case 4:return r(e(t,n,i,o),[a,s,u]);case 5:return r(e(t,n,i,o,a),[s,u]);case 6:return r(e(t,n,i,o,a,s),[u]);case 7:return e(t,n,i,o,a,s,u)}return 1===c?r(e(t),[n,i,o,a,s,u]):void 0}function E(e,t,n,r,i,o,a,s){var u=e.length;return 7===u?e(t,n,r,i,o,a,s):w(e,t,n,r,i,o,a,s,u)}function S(e){return 7===e.length?e:function(t,n,r,i,o,a,s){return E(e,t,n,r,i,o,a,s)}}function T(e,t,n,i,o,a,s,u,l,c){var f=0;if(c>7||c<0)return r(e,[t,n,i,o,a,s,u,l]);switch(c){case 0:case 1:f=1;break;case 2:return r(e(t,n),[i,o,a,s,u,l]);case 3:return r(e(t,n,i),[o,a,s,u,l]);case 4:return r(e(t,n,i,o),[a,s,u,l]);case 5:return r(e(t,n,i,o,a),[s,u,l]);case 6:return r(e(t,n,i,o,a,s),[u,l]);case 7:return r(e(t,n,i,o,a,s,u),[l])}return 1===f?r(e(t),[n,i,o,a,s,u,l]):void 0}function A(e,t,n,r,i,o,a,s,u){var l=e.length;return 8===l?e(t,n,r,i,o,a,s,u):T(e,t,n,r,i,o,a,s,u,l)}function O(e){return 8===e.length?e:function(t,n,r,i,o,a,s,u){return A(e,t,n,r,i,o,a,s,u)}}var P=n(68);t.app=r,t.curry_1=i,t._1=o,t.__1=a,t.curry_2=s,t._2=u,t.__2=l,t.curry_3=c,t._3=f,t.__3=p,t.curry_4=h,t._4=d,t.__4=v,t.curry_5=m,t._5=y,t.__5=g,t.curry_6=_,t._6=b,t.__6=x,t.curry_7=w,t._7=E,t.__7=S,t.curry_8=T,t._8=A,t.__8=O},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(0),s=(n.n(a),n(2)),u=n.n(s),l=n(21),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f={captureScroll:u.a.bool,captureDrag:u.a.bool,captureClick:u.a.bool,captureDoubleClick:u.a.bool},p={captureScroll:!1,captureDrag:!0,captureClick:!0,captureDoubleClick:!0},h={viewport:u.a.instanceOf(l.a),isDragging:u.a.bool,eventManager:u.a.object},d={captureScroll:"wheel",captureDrag:"panstart",captureClick:"click",captureDoubleClick:"dblclick"},v=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._events=null,n._onContainerLoad=n._onContainerLoad.bind(n),n}return o(t,e),c(t,[{key:"_onContainerLoad",value:function(e){var t=this.context.eventManager,n=this._events;if(n&&(t.off(n),n=null),e){n={};for(var r in d){var i=this.props[r],o=d[r];i&&(n[o]=this._captureEvent)}t.on(n,e)}this._events=n}},{key:"_captureEvent",value:function(e){e.stopPropagation()}},{key:"render",value:function(){return null}}]),t}(a.Component);t.a=v,v.propTypes=f,v.defaultProps=p,v.contextTypes=h},function(e,t,n){"use strict";var r=n(403);n.d(t,"d",function(){return r.c}),n.d(t,"a",function(){return r.a}),n.d(t,"c",function(){return r.b}),n.d(t,"h",function(){return r.d});var i=n(406);n.d(t,"b",function(){return i.a});var o=n(185);n.d(t,"g",function(){return o.a});var a=(n(109),n(409));n.d(t,"f",function(){return a.a});var s=n(193);n.d(t,"e",function(){return s.a});n(28)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){g()(Object(p.g)(e),p.a);var n=x[t];if(!n)return!1;if(void 0===n.gl1&&void 0===n.gl2)return!0;var r=Object(p.h)(e)?n.gl2||n.gl1:n.gl1;return"string"===typeof r?e.getExtension(r):r}function u(e,t){var n=x[t];switch(n&&n.types[0]){case c.b.FLOAT:return e.getExtension("OES_texture_float_linear");case c.b.HALF_FLOAT:return e.getExtension("OES_texture_half_float_linear");default:return!0}}var l,c=n(17),f=n(22),p=n(4),h=n(50),d=n(19),v=n(48),m=n(5),y=n(1),g=n.n(y),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),b=[c.b.LINEAR,c.b.NEAREST],x=(l={},a(l,c.b.RGB,{dataFormat:c.b.RGB,types:[c.b.UNSIGNED_BYTE,c.b.UNSIGNED_SHORT_5_6_5]}),a(l,c.b.RGBA,{dataFormat:c.b.RGBA,types:[c.b.UNSIGNED_BYTE,c.b.UNSIGNED_SHORT_4_4_4_4,c.b.UNSIGNED_SHORT_5_5_5_1]}),a(l,c.b.ALPHA,{dataFormat:c.b.ALPHA,types:[c.b.UNSIGNED_BYTE]}),a(l,c.b.LUMINANCE,{dataFormat:c.b.LUMINANCE,types:[c.b.UNSIGNED_BYTE]}),a(l,c.b.LUMINANCE_ALPHA,{dataFormat:c.b.LUMINANCE_ALPHA,types:[c.b.UNSIGNED_BYTE]}),l),w=function(e){function t(e,n){r(this,t);var o=n.id,a=void 0===o?Object(m.h)("texture"):o,s=n.handle,u=n.target,l=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,{id:a,handle:s}));return l.target=u,l.hasFloatTexture=e.getExtension("OES_texture_float"),l.textureUnit=void 0,l}return o(t,e),_(t,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.format,r=t.linearFiltering;g()(Object(p.g)(e),p.a);var i=!0;return n&&(i=i&&s(e,n),i=i&&(!r||u(e,n))),i}}]),_(t,[{key:"toString",value:function(){return"Texture("+this.id+","+this.width+"x"+this.height+")"}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,n=e.pixels,r=void 0===n?null:n,i=e.format,o=void 0===i?c.b.RGBA:i,s=e.type,u=void 0===s?c.b.UNSIGNED_BYTE:s,l=e.border,f=void 0===l?0:l,p=e.recreate,h=void 0!==p&&p,d=e.parameters,v=void 0===d?{}:d,y=e.pixelStore,g=void 0===y?{}:y,_=e.unpackFlipY,b=void 0===_||_,x=e.mipmaps,w=void 0===x||x;t||(t=r);var E=e.width,S=e.height,T=e.dataFormat,A=this._deduceParameters({format:o,type:u,dataFormat:T,compressed:!1,data:t,width:E,height:S});E=A.width,S=A.height,T=A.dataFormat,this.width=E,this.height=S,this.format=o,this.type=u,this.dataFormat=T,this.border=f,this.mipmaps=w;var O=a({},c.b.UNPACK_FLIP_Y_WEBGL,b),P=Object.assign({},O,g);this._isNPOT()&&(m.f.warn("texture: "+this+" is Non-Power-Of-Two, disabling mipmaping"),w=!1,this._updateForNPOT(v)),this.setImageData({data:t,width:E,height:S,format:o,type:u,dataFormat:T,border:f,mipmaps:w,parameters:P}),w&&this.generateMipmap(),this.setParameters(v),h&&(this.data=t)}},{key:"resize",value:function(e){var t=e.width,n=e.height;return t!==this.width||n!==this.height?this.initialize({width:t,height:n,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:!1}):this}},{key:"generateMipmap",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindTexture(this.target,this.handle),Object(h.c)(this.gl,t,function(){e.gl.generateMipmap(e.target)}),this.gl.bindTexture(this.target,null),this}},{key:"setImageData",value:function(e){var t=this,n=e.target,r=void 0===n?this.target:n,i=e.pixels,o=void 0===i?null:i,a=e.data,s=void 0===a?null:a,u=e.width,l=e.height,f=e.level,d=void 0===f?0:f,v=e.format,m=void 0===v?c.b.RGBA:v,y=e.type,_=e.dataFormat,b=e.offset,x=void 0===b?0:b,w=e.border,E=void 0===w?0:w,S=e.compressed,T=void 0!==S&&S,A=e.parameters,O=void 0===A?{}:A;s||(s=o);var P=this._deduceParameters({format:m,type:y,dataFormat:_,compressed:T,data:s,width:u,height:l});y=P.type,_=P.dataFormat,T=P.compressed,u=P.width,l=P.height;var C=this.gl;C.bindTexture(this.target,this.handle);var k=null,R=this._getDataType({data:s,compressed:T});s=R.data,k=R.dataType,Object(h.c)(this.gl,O,function(){switch(k){case"null":C.texImage2D(r,d,m,u,l,E,_,y,s);break;case"typed-array":C.texImage2D(r,d,m,u,l,E,_,y,s,x);break;case"buffer":g()(Object(p.h)(C),p.b),C.bindBuffer(c.b.PIXEL_UNPACK_BUFFER,s.handle||s),C.texImage2D(r,d,m,u,l,E,m,y,x);break;case"browser-object":C.texImage2D(r,d,m,m,y,s);break;case"compressed":C.compressedTexImage2D(t.target,d,m,u,l,E,s);break;default:g()(!1,"Unknown image data type")}})}},{key:"setSubImageData",value:function(e){var t=this,n=e.target,r=void 0===n?this.target:n,i=e.pixels,o=void 0===i?null:i,a=e.data,s=void 0===a?null:a,u=e.x,l=void 0===u?0:u,d=e.y,m=void 0===d?0:d,y=e.width,_=e.height,b=e.level,x=void 0===b?0:b,w=e.format,E=void 0===w?c.b.RGBA:w,S=e.type,T=e.dataFormat,A=e.compressed,O=void 0!==A&&A,P=e.offset,C=void 0===P?0:P,k=e.border,R=void 0===k?0:k,M=e.parameters,I=void 0===M?{}:M,L=this._deduceParameters({format:E,type:S,dataFormat:T,compressed:O,data:s,width:y,height:_});if(S=L.type,T=L.dataFormat,O=L.compressed,y=L.width,_=L.height,s||(s=o),s&&s.data){var D=s;s=D.data,y=D.shape[0],_=D.shape[1]}s instanceof v.a&&(s=s.handle),this.gl.bindTexture(this.target,this.handle),Object(h.c)(this.gl,I,function(){O?t.gl.compressedTexSubImage2D(r,x,l,m,y,_,E,s):null===s?t.gl.texSubImage2D(r,x,E,y,_,R,T,S,null):ArrayBuffer.isView(s)?t.gl.texSubImage2D(r,x,l,m,y,_,E,S,s,C):s instanceof f.c?(g()(Object(p.h)(t.gl),p.b),t.gl.bindBuffer(c.b.PIXEL_UNPACK_BUFFER,s),t.gl.texSubImage2D(r,x,E,y,_,R,E,S,C),t.gl.bindBuffer(c.b.GL_PIXEL_UNPACK_BUFFER,null)):t.gl.texSubImage2D(r,x,l,m,E,S,s)}),this.gl.bindTexture(this.target,null)}},{key:"copyFramebuffer",value:function(e){var t=e.target,n=(void 0===t&&this.target,e.framebuffer),r=(e.offset,e.x),i=void 0===r?0:r,o=e.y,a=void 0===o?0:o,s=e.width,u=e.height,l=e.level,f=void 0===l?0:l,p=e.internalFormat,h=void 0===p?c.b.RGBA:p,d=e.border,v=void 0===d?0:d;n&&n.bind(),this.bind(),this.gl.copyTexImage2D(this.target,f,h,i,a,s,u,v),this.unbind(),n&&n.unbind()}},{key:"getActiveUnit",value:function(){return this.gl.getParameter(c.b.ACTIVE_TEXTURE)-c.b.TEXTURE0}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;if(void 0===e)throw new Error("Texture.bind: must specify texture unit");return this.textureUnit=e,this.gl.activeTexture(c.b.TEXTURE0+e),this.gl.bindTexture(this.target,this.handle),e}},{key:"unbind",value:function(){if(void 0===this.textureUnit)throw new Error("Texture.unbind: texture unit not specified");return this.gl.activeTexture(c.b.TEXTURE0+this.textureUnit),this.gl.bindTexture(this.target,null),this.textureUnit}},{key:"_getDataType",value:function(e){var t=e.data,n=e.compressed;return void 0!==n&&n?{data:t,dataType:"compressed"}:null===t?{data:t,dataType:"null"}:ArrayBuffer.isView(t)?{data:t,dataType:"typed-array"}:t instanceof v.a?{data:t.handle,dataType:"buffer"}:t instanceof f.c?{data:t,dataType:"buffer"}:{data:t,dataType:"browser-object"}}},{key:"setImage3D",value:function(e){var t=e.level,n=void 0===t?0:t,r=e.internalformat,i=void 0===r?c.b.RGBA:r,o=e.width,a=e.height,s=e.depth,u=void 0===s?1:s,l=e.border,f=void 0===l?0:l,p=e.format,h=e.type,d=void 0===h?c.b.UNSIGNED_BYTE:h,m=e.offset,y=void 0===m?0:m,g=e.pixels;return ArrayBuffer.isView(g)?(this.gl.texImage3D(this.target,n,i,o,a,u,f,p,d,g),this):(g instanceof v.a&&(this.gl.bindBuffer(c.b.PIXEL_UNPACK_BUFFER,g.handle),this.gl.texImage3D(this.target,n,i,o,a,u,f,p,d,y)),this)}},{key:"_deduceParameters",value:function(e){var t=e.format,n=e.data,r=e.width,i=e.height,o=e.dataFormat,a=e.type,s=e.compressed,u=x[t];o=o||u&&u.dataFormat,a=a||u&&u.types[0],s=s||u&&u.compressed;var l=this._deduceImageSize({data:n,width:r,height:i});return r=l.width,i=l.height,{dataFormat:o,type:a,compressed:s,width:r,height:i,format:t,data:n}}},{key:"_deduceImageSize",value:function(e){var t=e.data,n=e.width,r=e.height,i=void 0;return i="undefined"!==typeof ImageData&&t instanceof ImageData?{width:t.width,height:t.height}:"undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement?{width:t.naturalWidth,height:t.naturalHeight}:"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement?{width:t.width,height:t.height}:"undefined"!==typeof HTMLVideoElement&&t instanceof HTMLVideoElement?{width:t.videoWidth,height:t.videoHeight}:t?{width:n,height:r}:{width:n>=0?n:1,height:r>=0?r:1},g()(i,"Could not deduced texture size"),g()(void 0===n||i.width===n,"Deduced texture width does not match supplied width"),g()(void 0===r||i.height===r,"Deduced texture height does not match supplied height"),i}},{key:"_createHandle",value:function(){return this.gl.createTexture()}},{key:"_deleteHandle",value:function(){this.gl.deleteTexture(this.handle)}},{key:"_getParameter",value:function(e){switch(e){case c.b.TEXTURE_WIDTH:return this.width;case c.b.TEXTURE_HEIGHT:return this.height;default:this.gl.bindTexture(this.target,this.handle);var t=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),t}}},{key:"_setParameter",value:function(e,t){switch(this.gl.bindTexture(this.target,this.handle),t=this._getNPOTParam(e,t),e){case c.b.TEXTURE_MIN_LOD:case c.b.TEXTURE_MAX_LOD:this.gl.texParameterf(this.handle,e,t);break;case c.b.TEXTURE_WIDTH:case c.b.TEXTURE_HEIGHT:throw new Error("Cannot set emulated parameter");default:this.gl.texParameteri(this.target,e,t)}return this.gl.bindTexture(this.target,null),this}},{key:"_isNPOT",value:function(){return!Object(p.h)(this.gl)&&(!Object(m.e)(this.width)||!Object(m.e)(this.height))}},{key:"_updateForNPOT",value:function(e){void 0===e[this.gl.TEXTURE_MIN_FILTER]&&(m.f.warn("texture: "+this+" is Non-Power-Of-Two, forcing TEXTURE_MIN_FILTER to LINEAR"),e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===e[this.gl.TEXTURE_WRAP_S]&&(m.f.warn("texture: "+this+" is Non-Power-Of-Two, forcing TEXTURE_WRAP_S to CLAMP_TO_EDGE"),e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===e[this.gl.TEXTURE_WRAP_T]&&(m.f.warn("texture: "+this+" is Non-Power-Of-Two, forcing TEXTURE_WRAP_T to CLAMP_TO_EDGE"),e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}},{key:"_getNPOTParam",value:function(e,t){if(this._isNPOT())switch(e){case c.b.TEXTURE_MIN_FILTER:-1===b.indexOf(t)&&(m.f.warn("texture: "+this+" is Non-Power-Of-Two, forcing TEXTURE_MIN_FILTER to LINEAR"),t=c.b.LINEAR);break;case c.b.TEXTURE_WRAP_S:case c.b.TEXTURE_WRAP_T:t!==c.b.CLAMP_TO_EDGE&&(m.f.warn("texture: "+this+" is Non-Power-Of-Two, "+Object(c.d)(e)+" to CLAMP_TO_EDGE"),t=c.b.CLAMP_TO_EDGE)}return t}}]),t}(d.a);t.a=w},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17);n.d(t,"GL",function(){return r.a}),n.d(t,"default",function(){return r.a});var i=n(187);n.d(t,"Image",function(){return i.a}),n.d(t,"WebGLRenderingContext",function(){return i.h}),n.d(t,"WebGLProgram",function(){return i.f}),n.d(t,"WebGLShader",function(){return i.i}),n.d(t,"WebGLBuffer",function(){return i.d}),n.d(t,"WebGLFramebuffer",function(){return i.e}),n.d(t,"WebGLRenderbuffer",function(){return i.g}),n.d(t,"WebGLTexture",function(){return i.k}),n.d(t,"WebGLUniformLocation",function(){return i.l}),n.d(t,"WebGLActiveInfo",function(){return i.c}),n.d(t,"WebGLShaderPrecisionFormat",function(){return i.j}),n.d(t,"WebGL2RenderingContext",function(){return i.b}),n.d(t,"webGLTypesAvailable",function(){return i.m});var o=n(4);n.d(t,"isWebGL",function(){return o.g}),n.d(t,"isWebGL2",function(){return o.h}),n.d(t,"createGLContext",function(){return o.e}),n.d(t,"deleteGLContext",function(){return o.f});var a=n(50);n.d(t,"withParameters",function(){return a.c}),n.d(t,"resetParameters",function(){return a.a});var s=n(114);n.d(t,"getContextInfo",function(){return s.a});var u=n(48);n.d(t,"Buffer",function(){return u.a});var l=n(81);n.d(t,"Shader",function(){return l.b}),n.d(t,"VertexShader",function(){return l.c}),n.d(t,"FragmentShader",function(){return l.a});var c=n(80);n.d(t,"Program",function(){return c.a});var f=n(49);n.d(t,"Framebuffer",function(){return f.a});var p=n(79);n.d(t,"Renderbuffer",function(){return p.a});var h=n(111);n.d(t,"Texture2D",function(){return h.a});var d=n(194);n.d(t,"TextureCube",function(){return d.a});var v=n(195);n.d(t,"draw",function(){return v.a});var m=n(78);n.d(t,"clear",function(){return m.a});var y=n(197);n.d(t,"readPixels",function(){return y.a});var g=n(113);n.d(t,"parseUniformName",function(){return g.e}),n.d(t,"getUniformSetter",function(){return g.c}),n.d(t,"checkUniformValues",function(){return g.b});var _=n(112);n.d(t,"VertexArray",function(){return _.a})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(201);n.d(t,"AnimationLoop",function(){return r.b}),n.d(t,"requestAnimationFrame",function(){return r.c}),n.d(t,"cancelAnimationFrame",function(){return r.a});var i=n(82);n.d(t,"Model",function(){return i.a})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function a(e,t,n){void 0===n&&(n=[]);var r=e.displayName||e.name||"Component",l=u.isReactComponent(e),c=Object.keys(t),f=c.map(u.defaultKey);!l&&n.length&&invariant(!1);var p=function(n){function r(){for(var e,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=n.call.apply(n,[this].concat(i))||this,e.handlers=Object.create(null),c.forEach(function(n){var r=t[n],i=function(t){if(e.props[r]){var i;e._notifying=!0;for(var o=arguments.length,a=new Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];(i=e.props)[r].apply(i,[t].concat(a)),e._notifying=!1}e._values[n]=t,e.unmounted||e.forceUpdate()};e.handlers[r]=i}),l&&(e.attachRef=function(t){e.inner=t}),e}o(r,n);var a=r.prototype;return a.shouldComponentUpdate=function(){return!this._notifying},a.componentWillMount=function(){var e=this,t=this.props;this._values=Object.create(null),c.forEach(function(n){e._values[n]=t[u.defaultKey(n)]})},a.componentWillReceiveProps=function(e){var t=this,n=this.props;c.forEach(function(r){!u.isProp(e,r)&&u.isProp(n,r)&&(t._values[r]=e[u.defaultKey(r)])})},a.componentWillUnmount=function(){this.unmounted=!0},a.getControlledInstance=function(){return this.inner},a.render=function(){var t=this,n=i({},this.props);f.forEach(function(e){delete n[e]});var r={};return c.forEach(function(e){var n=t.props[e];r[e]=void 0!==n?n:t._values[e]}),s.default.createElement(e,i({},n,r,this.handlers,{ref:this.attachRef}))},r}(s.default.Component);return p.displayName="Uncontrolled("+r+")",p.propTypes=u.uncontrolledPropTypes(t,r),n.forEach(function(e){p.prototype[e]=function(){var t;return(t=this.inner)[e].apply(t,arguments)}}),p.ControlledComponent=e,p.deferControlTo=function(e,n,r){return void 0===n&&(n={}),a(e,i({},t,n),r)},p}t.__esModule=!0,t.default=a;var s=r(n(0)),u=(r(n(87)),function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(569)));e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}t.__esModule=!0,t.default=void 0;var s=r(n(0)),u=r(n(2)),l=r(n(3)),c=function(e){function t(){return e.apply(this,arguments)||this}return a(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.tabIndex,r=e.focused,a=e.open,u=e.dropUp,c=e.disabled,f=e.readOnly,p=o(e,["className","tabIndex","focused","open","dropUp","disabled","readOnly"]),h=!!this.context.isRtl;return n=null!=n?n:"-1",s.default.createElement("div",i({},p,{tabIndex:n,className:(0,l.default)(t,"rw-widget",h&&"rw-rtl",c&&"rw-state-disabled",f&&"rw-state-readonly",r&&"rw-state-focus",a&&"rw-open"+(u?"-up":"")),__source:{fileName:"src/Widget.js",lineNumber:35},__self:this}))},t}(s.default.Component);c.contextTypes={isRtl:u.default.bool},c.propTypes={tabIndex:u.default.node,focused:u.default.bool,disabled:u.default.bool,readOnly:u.default.bool,open:u.default.bool,dropUp:u.default.bool};var f=c;t.default=f,e.exports=t.default},function(e,t,n){"use strict";function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}function i(e,t){var n=t.didHandle;return(0,o.focusManager)(e,r({},t,{onChange:function(t){e.setState({focused:t})},isDisabled:function(){return(0,a.isInDisabledFieldset)(e)||!0===e.props.disabled},didHandle:function(e,t){var r=this.props[e?"onFocus":"onBlur"];r&&r(t),n&&!t.isWidgetDefaultPrevented&&n(e,t)}}))}t.__esModule=!0,t.default=i;var o=n(25),a=n(33);e.exports=t.default},function(e,t,n){"use strict";function r(e,t,n){var r=[e,t].concat(n);return M.createElement.apply(null,r)}function i(){return 0}function o(e,t,n){return R._1(e,n),R._1(t,n)}function a(){return 0}function s(){return 0}function u(){return 0}function l(){return 0}function c(){return 1}function f(e){return e[2]}function p(){return"RenderNotImplemented"}function h(){return 0}function d(e,t){return 0}function v(){return 0}function m(e,t,n){var r=e.reasonProps;if(null==r){if(t)return[R._1(t[0],e)];throw[I.invalid_argument,"A JS component called the Reason component "+n+" which didn't implement the JS->Reason React props conversion."]}return r}function y(e){return L.createClass({displayName:e,subscriptions:null,self:function(e,t){var n=this;return[n.handleMethod,n.reduceMethod,e,t,n.sendMethod]},transitionNextTotalState:function(e,t){if("number"===typeof t)return e;switch(0|t.tag){case 0:return{reasonState:t[0],reasonStateVersion:e.reasonStateVersion+1|0,reasonStateVersionUsedToComputeSubelements:e.reasonStateVersionUsedToComputeSubelements,sideEffects:e.sideEffects};case 1:return{reasonState:t[0],reasonStateVersion:e.reasonStateVersion+1|0,reasonStateVersionUsedToComputeSubelements:e.reasonStateVersionUsedToComputeSubelements+1|0,sideEffects:e.sideEffects};case 2:return{reasonState:e.reasonState,reasonStateVersion:e.reasonStateVersion+1|0,reasonStateVersionUsedToComputeSubelements:e.reasonStateVersionUsedToComputeSubelements+1|0,sideEffects:[t[0],e.sideEffects]};case 3:return{reasonState:t[0],reasonStateVersion:e.reasonStateVersion+1|0,reasonStateVersionUsedToComputeSubelements:e.reasonStateVersionUsedToComputeSubelements,sideEffects:[t[1],e.sideEffects]};case 4:return{reasonState:t[0],reasonStateVersion:e.reasonStateVersion+1|0,reasonStateVersionUsedToComputeSubelements:e.reasonStateVersionUsedToComputeSubelements+1|0,sideEffects:[t[1],e.sideEffects]}}},getInitialState:function(){var t=this,n=m(t.props,t.jsPropsToReason,e);return{reasonState:R._1(n[0][10],0),reasonStateVersion:1,reasonStateVersionUsedToComputeSubelements:1,sideEffects:0}},componentDidMount:function(){var t=this,n=this,r=m(n.props,n.jsPropsToReason,e),i=r[0],o=n.state,s=o.reasonState,u=t.self(s,i[11]);if(i[13]!==v){var l=C.map(function(e){var t=e[1],n=R._1(e[0],0);return function(){return R._1(t,n)}},R._1(i[13],u));t.subscriptions=l}if(i[4]!==a){var c=R._1(i[4],u),f=t.transitionNextTotalState(o,c);return f.reasonStateVersion!==o.reasonStateVersion?n.setState(f):0}return 0},componentDidUpdate:function(t,n){var r=this,i=this,o=i.state,a=o.reasonState,s=i.props,l=m(s,i.jsPropsToReason,e),c=l[0];if(c[5]!==u){var f=+(t===s),p=0!==f?l:m(t,i.jsPropsToReason,e),h=n.reasonState,d=r.self(a,c[11]),v=d[0],y=d[1],g=p[0][11],_=d[4],b=[v,y,h,g,_];return R._1(c[5],[b,d])}return 0},componentWillUnmount:function(){var t=this,n=this,r=m(n.props,n.jsPropsToReason,e),i=r[0],o=n.state,a=o.reasonState;i[6]!==l&&R._1(i[6],t.self(a,i[11]));var s=t.subscriptions;return null==s?0:C.iter(function(e){return R._1(e,0)},C.rev(s))},componentWillUpdate:function(t,n){var r=this,i=this,o=m(t,i.jsPropsToReason,e),a=o[0];if(a[7]!==s){var u=i.props,l=+(t===u),c=0!==l?o:m(u,i.jsPropsToReason,e),f=i.state,p=f.reasonState,h=n.reasonState,d=r.self(h,a[11]),v=d[0],y=d[1],g=c[0][11],_=d[4],b=[v,y,p,g,_];return R._1(a[7],[b,d])}return 0},componentWillReceiveProps:function(t){var n=this,r=this,i=m(t,r.jsPropsToReason,e),o=i[0];if(o[3]!==f){var a=r.props,s=+(t===a),u=0!==s?i:m(a,r.jsPropsToReason,e),l=u[0];return r.setState(function(e,t){var r=e.reasonState,i=e.reasonStateVersion,a=n.self(r,l[11]),s=R._1(o[3],a),u=+(s!==r),c=0!==u?i+1|0:i;return c!==i?{reasonState:s,reasonStateVersion:c,reasonStateVersionUsedToComputeSubelements:e.reasonStateVersionUsedToComputeSubelements,sideEffects:s.sideEffects}:e})}return 0},shouldComponentUpdate:function(t,n,r){var i,o=this,a=this,s=a.props,u=+(t!==s),l=m(a.props,a.jsPropsToReason,e),f=+(t===s),p=0!==f?l:m(t,a.jsPropsToReason,e),h=p[0],d=n.reasonStateVersion,v=n.reasonStateVersionUsedToComputeSubelements,y=+(v!==d),g=u||y,_=n.reasonState,b=o.self(_,h[11]);if(g&&h[8]!==c){var x=a.state,w=x.reasonState,E=b[0],S=b[1],T=l[0][11],A=b[4],O=[E,S,w,T,A];i=R._1(h[8],[O,b])}else i=g;n.reasonStateVersionUsedToComputeSubelements=d;var P=C.rev(n.sideEffects);return 0!==P&&(C.iter(function(e){return R._1(e,b)},P),a.setState(function(e,t){var r=C.length(e.sideEffects)-C.length(n.sideEffects)|0,i=function(e,t,n){for(;;){var r=n,i=t,o=e;if(r){if(i>0){n=r[1],t=i-1|0,e=[r[0],o];continue}return C.rev(o)}return C.rev(o)}}(0,r,e.sideEffects);return{reasonState:e.reasonState,reasonStateVersion:e.reasonStateVersion,reasonStateVersionUsedToComputeSubelements:e.reasonStateVersionUsedToComputeSubelements,sideEffects:i}})),i},handleMethod:function(t){var n=this,r=this;return function(i){var o=r.state,a=o.reasonState,s=m(r.props,r.jsPropsToReason,e);return R._2(t,i,n.self(a,s[0][11]))}},updateMethod:function(t){var n=this,r=this;return function(i){var o=r.state,a=o.reasonState,s=m(r.props,r.jsPropsToReason,e),u=R._2(t,i,n.self(a,s[0][11]));if(u){var l=n.transitionNextTotalState(o,u);return l.reasonStateVersion!==o.reasonStateVersion?r.setState(l):0}return D}},sendMethod:function(t){var n=this,r=this,i=m(r.props,r.jsPropsToReason,e),o=i[0];if(o[12]!==d){var a=R._1(o[12],t);return r.setState(function(e,t){var r=e.reasonState,i=R._1(a,r);if(i){var o=n.transitionNextTotalState(e,i);return o.reasonStateVersion!==e.reasonStateVersion?o:D}return D})}return 0},reduceMethod:function(e,t){return this.sendMethod(R._1(e,t))},render:function(){var t=this,n=this,r=m(n.props,n.jsPropsToReason,e),i=r[0],o=n.state,a=o.reasonState;return R._1(i[9],t.self(a,i[11]))}})}function g(e){return[e,y(e),[0],f,a,u,l,s,c,p,h,0,d,v,0]}function _(e,t,n){var r=e?e[0]:void 0,i=t?t[0]:void 0,o=[n],a=n[14];return a?R._2(a[0],r,i):M.createElement(n[1],{key:r,ref:i,reasonProps:o})}function b(e,t){return e[1].prototype.jsPropsToReason=[t],e[1]}function x(e,t,n){var r=[function(r,i){var o=e,a=t,s=n,u=r,l=i,c=Object.assign(Object.assign({},a),{ref:l,key:u}),f=[o,c].concat(s);return M.createElement.apply(null,f)}],i=U.slice();return i[14]=r,i}function w(){var e="undefined"===typeof window?void 0:window;if(void 0===e)return 0;var t=e.location.pathname;switch(t){case"":case"/":return 0;default:var n=t.slice(1),r=n[n.length-1|0],i="/"===r?n.slice(0,-1):n;return k.to_list(i.split("/"))}}function E(){var e="undefined"===typeof window?void 0:window;if(void 0===e)return"";var t=e.location.hash;switch(t){case"":case"#":return"";default:return t.slice(1)}}function S(){var e="undefined"===typeof window?void 0:window;if(void 0===e)return"";var t=e.location.search;switch(t){case"":case"?":return"";default:return t.slice(1)}}function T(e){var t="undefined"===typeof history?void 0:history,n="undefined"===typeof window?void 0:window;return void 0!==t&&void 0!==n?(t.pushState(null,"",e),n.dispatchEvent(new Event("popstate")),0):0}function A(){return[w(0),E(0),S(0)]}function O(e){var t="undefined"===typeof window?void 0:window;if(void 0!==t){var n=function(){return R._1(e,A(0))};return t.addEventListener("popstate",n),n}return function(){return 0}}function P(e){var t="undefined"===typeof window?void 0:window;return void 0!==t?(t.removeEventListener("popstate",e),0):0}var C=n(140),k=n(145),R=n(35),M=n(0),I=n(14),L=n(286),D=null,N=[i,o],F=g,j=g,B=g,z=g,U=g("interop"),V=[T,O,P,A];t.Callback=N,t.statelessComponent=F,t.statelessComponentWithRetainedProps=j,t.reducerComponent=B,t.reducerComponentWithRetainedProps=z,t.element=_,t.wrapReasonForJs=b,t.createDomElement=r,t.wrapJsForReason=x,t.Router=V},function(e,t,n){"use strict";function r(e){var t=Object.getPrototypeOf(e),n=Object.getOwnPropertyNames(t),r=!0,o=!1,a=void 0;try{for(var s,u=n[Symbol.iterator]();!(r=(s=u.next()).done);r=!0)!function(){var t=s.value;"function"===typeof e[t]&&(i.find(function(e){return t===e})||(e[t]=e[t].bind(e)))}()}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}}t.a=r;var i=["constructor","render","componentWillMount","componentDidMount","componentWillReceiveProps","shouldComponentUpdate","componentWillUpdate","componentDidUpdate","componentWillUnmount"]},function(e,t,n){function r(e,t,n,r){var o,a,s,u,l,c,f,p,h,d,v=t[0],m=t[1],y=t[2],g=r[0],_=r[1],b=r[2],x=n[0],w=n[1],E=n[2];return Math.abs(v-x)<1e-6&&Math.abs(m-w)<1e-6&&Math.abs(y-E)<1e-6?i(e):(f=v-x,p=m-w,h=y-E,d=1/Math.sqrt(f*f+p*p+h*h),f*=d,p*=d,h*=d,o=_*h-b*p,a=b*f-g*h,s=g*p-_*f,d=Math.sqrt(o*o+a*a+s*s),d?(d=1/d,o*=d,a*=d,s*=d):(o=0,a=0,s=0),u=p*s-h*a,l=h*o-f*s,c=f*a-p*o,d=Math.sqrt(u*u+l*l+c*c),d?(d=1/d,u*=d,l*=d,c*=d):(u=0,l=0,c=0),e[0]=o,e[1]=u,e[2]=f,e[3]=0,e[4]=a,e[5]=l,e[6]=p,e[7]=0,e[8]=s,e[9]=c,e[10]=h,e[11]=0,e[12]=-(o*v+a*m+s*y),e[13]=-(u*v+l*m+c*y),e[14]=-(f*v+p*m+h*y),e[15]=1,e)}var i=n(349);e.exports=r},function(e,t){function n(e,t,n,r,i){var o=1/Math.tan(t/2),a=1/(r-i);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*a,e[15]=0,e}e.exports=n},function(e,t,n){"use strict";function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=n(22),s=n(4),u=n(108),l=n(19),c=n(1),f=n.n(c),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h="Illegal or missing parameter to Buffer",d=36662,v=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.type,r=t.size,i=void 0===r?1:r,a=t.offset,s=void 0===a?0:a,u=t.stride,l=void 0===u?0:u,c=t.normalized,f=void 0!==c&&c,p=t.integer,h=void 0!==p&&p,d=t.instanced,v=void 0===d?0:d;o(this,e),this.type=n,this.size=i,this.offset=s,this.stride=l,this.normalized=f,this.integer=h,this.instanced=v},m=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.target=n.target||(i.gl.webgl2?d:a.e.ARRAY_BUFFER),i.index=null,i.setData(n),Object.seal(i),i}return i(t,e),p(t,[{key:"setDataLayout",value:function(e){var t=e.layout,n=e.type,r=e.size,i=void 0===r?1:r,o=e.offset,a=void 0===o?0:o,s=e.stride,u=void 0===s?0:s,l=e.normalized,c=void 0!==l&&l,f=e.integer,p=void 0!==f&&f,h=e.instanced,d=void 0===h?0:h;return this.layout=t||new v({type:n||this.type,size:i,offset:a,stride:u,normalized:c,integer:p,instanced:d}),this}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,n=e.bytes,r=e.usage,i=void 0===r?a.e.STATIC_DRAW:r,o=(e.layout,e.type),s=(e.size,e.offset,e.stride,e.normalized,e.integer,e.instanced,arguments[0]);t?(o=o||Object(u.b)(t),n=t.byteLength,f()(o,h)):(o=o||a.e.FLOAT,n&&0!==n||(n=0,t=new Float32Array(0))),this.bytes=n,this.bytesUsed=n,this.data=t,this.type=o,this.usage=i,this.setDataLayout(Object.assign(s));var l=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(l,this.handle),this.gl.bufferData(l,t||n,i),this.gl.bindBuffer(l,null),this}},{key:"setData",value:function(e){return this.initialize(e)}},{key:"subData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,n=e.offset,r=void 0===n?0:n,i=e.srcOffset,o=void 0===i?0:i,a=e.length;f()(t,h);var u=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(u,this.handle),0!==o||void 0!==a?(Object(s.c)(this.gl),this.gl.bufferSubData(this.target,r,t,o,a||0)):this.gl.bufferSubData(u,r,t),this.gl.bindBuffer(u,null),this}},{key:"copyData",value:function(e){var t=e.sourceBuffer,n=e.readOffset,r=void 0===n?0:n,i=e.writeOffset,o=void 0===i?0:i,a=e.size;return Object(s.c)(this.gl),this.gl.bindBuffer(d,t.handle),this.gl.bindBuffer(36663,this.handle),this.gl.copyBufferSubData(d,36663,r,o,a),this.gl.bindBuffer(d,null),this.gl.bindBuffer(36663,null),this}},{key:"getData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dstData,n=void 0===t?null:t,r=e.srcByteOffset,i=void 0===r?0:r,o=e.dstOffset,a=void 0===o?0:o,l=e.length,c=void 0===l?0:l;Object(s.c)(this.gl);var p=Object(u.c)(this.type,{clamped:!1}),h=this._getAvailableElementCount(i),v=void 0,m=void 0,y=a;n?(m=n.length,v=m-y):(v=Math.min(h,c||h),m=y+v);var g=Math.min(h,v);return c=c||g,f()(c<=g,"Invalid srcByteOffset, dstOffset and length combination"),n=n||new p(m),this.gl.bindBuffer(d,this.handle),this.gl.getBufferSubData(d,i,n,a,c),this.gl.bindBuffer(d,null),n}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?this.target:t,r=e.index,i=void 0===r?this.index:r,o=e.offset,u=void 0===o?0:o,l=e.size;switch(n===a.e.UNIFORM_BUFFER||35982===n?void 0!==l?"ranged":" indexed":"non-indexed"){case"non-indexed":this.gl.bindBuffer(n,this.handle);break;case"indexed":Object(s.c)(this.gl),f()(0===u,h),this.gl.bindBufferBase(n,i,this.handle);break;case"ranged":Object(s.c)(this.gl),this.gl.bindBufferRange(n,i,this.handle,u,l);break;default:throw new Error(h)}return this}},{key:"unbind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?this.target:t,r=e.index,i=void 0===r?this.index:r;return n===a.e.UNIFORM_BUFFER||35982===n?this.gl.bindBufferBase(n,i,null):this.gl.bindBuffer(n,null),this}},{key:"getIndexedParameter",value:function(e,t){var n=this.gl.webgl2?d:this.target;return this.gl.bindBuffer(n,t),this.gl.getIndexedParameter(e,t)}},{key:"_createHandle",value:function(){return this.gl.createBuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteBuffer(this.handle)}},{key:"_getParameter",value:function(e){this.gl.bindBuffer(this.target,this.handle);var t=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),t}},{key:"_getAvailableElementCount",value:function(e){var t=Object(u.c)(this.type,{clamped:!1});return this.bytes/t.BYTES_PER_ELEMENT-e/t.BYTES_PER_ELEMENT}}]),t}(l.a);t.a=m},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return e<S?e+S:e}function u(e){switch(e){case c.e.ALPHA:return 1;case c.e.RGB:return 3;case c.e.RGBA:return 4;default:throw new Error("Unknown format")}}function l(e){return(T.STATUS||{})[e]||"Framebuffer error "+e}var c=n(22),f=n(4),p=n(77),h=n(78),d=n(19),v=n(111),m=n(79),y=n(108),g=n(5),_=n(1),b=n.n(_),x=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),w=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),E=36064,S=34069,T=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.width=null,r.height=null,r.attachments={},r.readBuffer=E,r.drawBuffers=[E],r.initialize(n),Object.seal(r),r}return a(t,e),w(t,[{key:"MAX_COLOR_ATTACHMENTS",get:function(){return this.gl.getParameter(this.gl.MAX_COLOR_ATTACHMENTS)}},{key:"MAX_DRAW_BUFFERS",get:function(){return this.gl.getParameter(this.gl.MAX_DRAW_BUFFERS)}}],[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.colorBufferFloat,r=t.colorBufferHalfFloat;return n&&e.getExtension(Object(f.h)(e)?"EXT_color_buffer_float":"WEBGL_color_buffer_float"),r&&e.getExtension(Object(f.h)(e)?"EXT_color_buffer_float":"EXT_color_buffer_half_float")}},{key:"getDefaultFramebuffer",value:function(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer||(e.luma.defaultFramebuffer=new t(e,{handle:null,attachments:{}})),e.luma.defaultFramebuffer}}]),w(t,[{key:"initialize",value:function(e){var t=e.width,n=void 0===t?1:t,r=e.height,i=void 0===r?1:r,o=e.attachments,a=void 0===o?null:o,s=e.color,u=void 0===s||s,l=e.depth,c=void 0===l||l,f=e.stencil,p=void 0!==f&&f,h=e.check,d=void 0===h||h,v=e.readBuffer,m=e.drawBuffers;if(b()(n>=0&&i>=0,"Width and height need to be integers"),this.width=n,this.height=i,a)for(var y in a){var g=a[y],_=Array.isArray(g)?g[0]:g;_.resize({width:n,height:i})}else a=this._createDefaultAttachments({color:u,depth:c,stencil:p,width:n,height:i});this.update({clearAttachments:!0,attachments:a,readBuffer:v,drawBuffers:m}),a&&d&&this.checkStatus()}},{key:"update",value:function(e){var t=e.attachments,n=void 0===t?{}:t,r=e.readBuffer,i=e.drawBuffers,o=e.clearAttachments,a=void 0!==o&&o;this.attach(n,{clearAttachments:a});var s=this.gl,u=s.bindFramebuffer(36160,this.handle);return r&&this._setReadBuffer(r),i&&this._setDrawBuffers(i),s.bindFramebuffer(36160,u),this}},{key:"resize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,n=e.height;if(null===this.handle)return b()(void 0===t&&void 0===n),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===t&&(t=this.gl.drawingBufferWidth),void 0===n&&(n=this.gl.drawingBufferHeight),t!==this.width&&n!==this.height&&g.f.log(2,"Resizing framebuffer "+this.id+" to "+t+"x"+n);for(var r in this.attachments)this.attachments[r].resize({width:t,height:n});return this.width=t,this.height=n,this}},{key:"attach",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.clearAttachments,i=void 0!==r&&r,o={};i&&Object.keys(this.attachments).forEach(function(e){o[e]=null}),Object.assign(o,e);var a=this.gl.bindFramebuffer(36160,this.handle);for(var s in o){b()("undefined"!==s,"Misspelled framebuffer binding point?");var u=o[s],l=u;if(l)if(l instanceof m.a)this._attachRenderbuffer({attachment:s,renderbuffer:l});else if(Array.isArray(u)){var c=x(u,3),f=c[0],p=c[1],h=void 0===p?0:p,d=c[2],v=void 0===d?0:d;l=f,this._attachTexture({attachment:s,texture:f,layer:h,level:v})}else this._attachTexture({attachment:s,texture:l,layer:0,level:0});else this._unattach({attachment:s});l&&l.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,a),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(function(e){return!t.attachments[e]}).forEach(function(e){delete t.attachments[e]})}},{key:"checkStatus",value:function(){var e=this.gl,t=e.bindFramebuffer(36160,this.handle),n=e.checkFramebufferStatus(36160);if(e.bindFramebuffer(36160,t),n!==e.FRAMEBUFFER_COMPLETE)throw new Error(l(n));return this}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.color,n=e.depth,r=e.stencil,i=e.drawBuffers,o=void 0===i?[]:i,a=this.gl.bindFramebuffer(36160,this.handle);return(t||n||r)&&Object(h.a)(this.gl,{color:t,depth:n,stencil:r}),o.forEach(function(e,t){Object(h.b)({drawBuffer:t,value:e})}),this.gl.bindFramebuffer(36160,a),this}},{key:"readPixels",value:function(e){var t=e.x,n=void 0===t?0:t,r=e.y,i=void 0===r?0:r,o=e.width,a=void 0===o?this.width:o,s=e.height,l=void 0===s?this.height:s,f=e.format,p=void 0===f?c.e.RGBA:f,h=e.type,d=e.pixelArray,v=void 0===d?null:d,m=e.attachment,g=void 0===m?E:m,_=this.gl;if(g===c.e.COLOR_ATTACHMENT0&&null===this.handle&&(g=c.e.FRONT),!v){h=h||_.UNSIGNED_BYTE;var b=Object(y.c)(h,{clamped:!1}),x=u(p);v=v||new b(a*l*x)}h=h||Object(y.b)(v);var w=this.gl.bindFramebuffer(36160,this.handle);return this.gl.readPixels(n,i,a,l,p,h,v),this.gl.bindFramebuffer(36160,w),v}},{key:"copyToDataUrl",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.attachment,n=void 0===t?E:t,r=e.maxHeight,i=void 0===r?Number.MAX_SAFE_INTEGER:r,o=this.readPixels({attachment:n}),a=this.width,s=this.height;s>i;){var u=Object(g.g)({data:o,width:a,height:s});o=u.data,a=u.width,s=u.height}Object(g.a)({data:o,width:a,height:s});var l=document.createElement("canvas");l.width=a,l.height=s;var c=l.getContext("2d"),f=c.createImageData(a,s);return f.data.set(o),c.putImageData(f,0,0),l.toDataURL()}},{key:"copyToImage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.image,n=void 0===t?null:t,r=e.attachment,i=void 0===r?E:r,o=e.maxHeight,a=(void 0===o&&Number.MAX_SAFE_INTEGER,this.readDataUrl({attachment:i}));return n=n||new Image,n.src=a,n}},{key:"copyToTexture",value:function(e){var t=e.texture,n=e.target,r=e.xoffset,i=void 0===r?0:r,o=e.yoffset,a=void 0===o?0:o,s=e.zoffset,u=void 0===s?0:s,l=e.mipmapLevel,c=void 0===l?0:l,f=e.attachment,p=void 0===f?E:f,h=e.x,d=void 0===h?0:h,v=e.y,m=void 0===v?0:v,y=e.width,g=e.height,_=this.gl,b=_.bindFramebuffer(36160,this.handle),x=_.readBuffer(p);switch(y=Number.isFinite(y)?y:t.width,g=Number.isFinite(g)?g:t.height,t.target){case 3553:case 34067:_.copyTexSubImage2D(n||t.target,c,i,a,d,m,y,g);break;case 35866:case 32879:_.copyTexSubImage3D(n||t.target,c,i,a,u,d,m,y,g)}return _.readBuffer(x),_.bindFramebuffer(36160,b),t}},{key:"blit",value:function(e){var t=e.srcFramebuffer,n=e.attachment,r=void 0===n?E:n,i=e.srcX0,o=void 0===i?0:i,a=e.srcY0,s=void 0===a?0:a,u=e.srcX1,l=e.srcY1,p=e.dstX0,h=void 0===p?0:p,d=e.dstY0,v=void 0===d?0:d,m=e.dstX1,y=e.dstY1,g=e.color,_=void 0===g||g,x=e.depth,w=void 0!==x&&x,S=e.stencil,T=void 0!==S&&S,A=e.mask,O=void 0===A?0:A,P=e.filter,C=void 0===P?c.e.NEAREST:P,k=this.gl;b()(Object(f.h)(k),f.b),t.handle||r!==E||(r=c.e.FRONT),_&&(O|=16384),w&&(O|=256),T&&(O|=1024),b()(O),u=void 0===u?t.width:u,l=void 0===l?t.height:l,m=void 0===m?this.width:m,y=void 0===y?this.height:y;var R=k.bindFramebuffer(36008,this.handle),M=k.bindFramebuffer(36009,t.handle),I=k.readBuffer(r);return k.blitFramebuffer(o,s,u,l,h,v,m,y,O,C),k.readBuffer(I),k.bindFramebuffer(36009,M),k.bindFramebuffer(36008,R),this}},{key:"invalidate",value:function(e){var t=e.attachments,n=void 0===t?[]:t,r=e.x,i=void 0===r?0:r,o=e.y,a=void 0===o?0:o,s=e.width,u=e.height,l=this.gl;b()(Object(f.h)(l,f.b));var c=l.bindFramebuffer(36009,this.handle);return 0===i&&0===a&&void 0===s&&void 0===u?l.invalidateFramebuffer(36009,n):l.invalidateFramebuffer(36009,n,i,a,s,u),l.bindFramebuffer(36009,c),this}},{key:"getAttachmentParameter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.attachment,n=void 0===t?E:t,r=e.pname,i=this._getAttachmentParameterFallback(r);return null===i&&(this.gl.bindTexture(36160,this.handle),i=this.gl.getFramebufferAttachmentParameter(36160,n,r),this.gl.bindTexture(36160,null)),i}},{key:"getAttachmentParameters",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.constructor.ATTACHMENT_PARAMETERS||{}),t={};for(var n in e)t[n]=this.getAttachmentParameter(n);return this}},{key:"show",value:function(){return"undefined"!==typeof window&&window.open(this.copyToDataUrl(),"luma-debug-texture"),this}},{key:"log",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.priority,n=void 0===t?0:t,r=e.message,i=void 0===r?"":r;if(n>g.f.priority||"undefined"===typeof window)return this;i=i||"Framebuffer "+this.id;var o=this.copyToDataUrl({maxHeight:100});return g.f.image({priority:n,message:i,image:o},i),this}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?36160:t;return this.gl.bindFramebuffer(n,this.handle),this}},{key:"unbind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?36160:t;return this.gl.bindFramebuffer(n,null),this}},{key:"_createDefaultAttachments",value:function(e){var t=e.color,n=e.depth,i=(e.stencil,e.width),o=e.height,a=null;if(t){var s;a=a||{},a[E]=new v.a(this.gl,{pixels:null,format:c.e.RGBA,type:c.e.UNSIGNED_BYTE,width:i,height:o,mipmaps:!1,parameters:(s={},r(s,c.e.TEXTURE_MIN_FILTER,c.e.NEAREST),r(s,c.e.TEXTURE_MAG_FILTER,c.e.NEAREST),r(s,c.e.TEXTURE_WRAP_S,c.e.CLAMP_TO_EDGE),r(s,c.e.TEXTURE_WRAP_T,c.e.CLAMP_TO_EDGE),s)})}return n&&(a=a||{},a[36096]=new m.a(this.gl,{format:c.e.DEPTH_COMPONENT16,width:i,height:o})),a}},{key:"_unattach",value:function(e){var t=e.attachment;this.gl.bindRenderbuffer(36161,this.handle),this.gl.framebufferRenderbuffer(36160,t,36161,null),delete this.attachments[t]}},{key:"_attachRenderbuffer",value:function(e){var t=e.attachment,n=void 0===t?E:t,r=e.renderbuffer;this.gl.framebufferRenderbuffer(36160,n,36161,r.handle),this.attachments[n]=r}},{key:"_attachTexture",value:function(e){var t=e.attachment,n=void 0===t?E:t,r=e.texture,i=e.layer,o=e.level,a=this.gl;switch(a.bindTexture(r.target,r.handle),r.target){case 35866:case 32879:a.framebufferTextureLayer(36160,n,r.target,o,i);break;case 34067:var u=s(i);a.framebufferTexture2D(36160,n,u,r.handle,o);break;case 3553:a.framebufferTexture2D(36160,n,3553,r.handle,o);break;default:b()(!1,"Illegal texture type")}a.bindTexture(r.target,null),this.attachments[n]=r}},{key:"_setReadBuffer",value:function(e,t){Object(f.h)(e)?e.readBuffer(t):b()(t===E||t===c.e.BACK,"Multiple render targets not supported"),this.readBuffer=t}},{key:"_setDrawBuffers",value:function(e,t){if(Object(f.h)(e))e.drawBuffers(t);else{var n=e.getExtension("WEBGL_draw_buffers");n?n.drawBuffersWEBGL(t):b()(1===t.length&&(t[0]===E||t[0]===c.e.BACK),"Multiple render targets not supported")}this.drawBuffers=t}},{key:"_getAttachmentParameterFallback",value:function(e){var t=Object(p.b)(this.gl);switch(e){case c.e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:return t.webgl2?null:0;case c.e.FRAMEBUFFER_ATTACHMENT_RED_SIZE:case c.e.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:case c.e.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:case c.e.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:case c.e.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:case c.e.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:return t.webgl2?null:8;case c.e.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:return t.webgl2?null:c.e.UNSIGNED_INT;case c.e.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:return t.webgl2||t.EXT_sRGB?null:c.e.LINEAR;default:return null}}},{key:"_createHandle",value:function(){return this.gl.createFramebuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteFramebuffer(this.handle)}},{key:"color",get:function(){return this.attachments[E]||null}},{key:"texture",get:function(){return this.attachments[E]||null}},{key:"depth",get:function(){return this.attachments[36096]||null}},{key:"stencil",get:function(){return this.attachments[36128]||null}}]),t}(d.a);t.a=T},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e){return Array.isArray(e)||ArrayBuffer.isView(e)}function o(e,t){Object(p.d)(e,t);for(var n in t){var r=d[n];r&&r(e,t[n],n)}}function a(e,t,n){if(Object(f.d)(t))return n(e);var r=t.nocatch,i=void 0===r||r;c()(!t.frameBuffer),Object(u.c)(e),o(e,t);var a=void 0;if(i)a=n(e),Object(u.b)(e);else try{a=n(e)}finally{Object(u.b)(e)}return a}t.b=o,t.c=a;var s=n(28),u=n(109),l=n(1),c=n.n(l),f=n(5),p=n(186);n.d(t,"a",function(){return p.c});var h=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d={framebuffer:function(e,t){var n=t&&t.handle?t.handle:t;return e.bindFramebuffer(s.a.FRAMEBUFFER,n)},blend:function(e,t){return t?e.enable(s.a.BLEND):e.disable(s.a.BLEND)},blendColor:function(e,t){return e.blendColor.apply(e,r(t))},blendEquation:function(e,t){t=i(t)?t:[t,t],e.blendEquationSeparate.apply(e,r(t))},blendFunc:function(e,t){t=i(t)&&2===t.length?[].concat(r(t),r(t)):t,e.blendFuncSeparate.apply(e,r(t))},clearColor:function(e,t){return e.clearColor.apply(e,r(t))},clearDepth:function(e,t){return e.clearDepth(t)},clearStencil:function(e,t){return e.clearStencil(t)},colorMask:function(e,t){return e.colorMask.apply(e,r(t))},cull:function(e,t){return t?e.enable(s.a.CULL_FACE):e.disable(s.a.CULL_FACE)},cullFace:function(e,t){return e.cullFace(t)},depthTest:function(e,t){return t?e.enable(s.a.DEPTH_TEST):e.disable(s.a.DEPTH_TEST)},depthFunc:function(e,t){return e.depthFunc(t)},depthMask:function(e,t){return e.depthMask(t)},depthRange:function(e,t){return e.depthRange.apply(e,r(t))},dither:function(e,t){return t?e.enable(s.a.DITHER):e.disable(s.a.DITHER)},derivativeHint:function(e,t){e.hint(s.a.FRAGMENT_SHADER_DERIVATIVE_HINT,t)},frontFace:function(e,t){return e.frontFace(t)},mipmapHint:function(e,t){return e.hint(s.a.GENERATE_MIPMAP_HINT,t)},lineWidth:function(e,t){return e.lineWidth(t)},polygonOffsetFill:function(e,t){return t?e.enable(s.a.POLYGON_OFFSET_FILL):e.disable(s.a.POLYGON_OFFSET_FILL)},polygonOffset:function(e,t){return e.polygonOffset.apply(e,r(t))},sampleCoverage:function(e,t){return e.sampleCoverage.apply(e,r(t))},scissorTest:function(e,t){return t?e.enable(s.a.SCISSOR_TEST):e.disable(s.a.SCISSOR_TEST)},scissor:function(e,t){return e.scissor.apply(e,r(t))},stencilTest:function(e,t){return t?e.enable(s.a.STENCIL_TEST):e.disable(s.a.STENCIL_TEST)},stencilMask:function(e,t){t=i(t)?t:[t,t];var n=t,r=h(n,2),o=r[0],a=r[1];e.stencilMaskSeparate(s.a.FRONT,o),e.stencilMaskSeparate(s.a.BACK,a)},stencilFunc:function(e,t){t=i(t)&&3===t.length?[].concat(r(t),r(t)):t;var n=t,o=h(n,6),a=o[0],u=o[1],l=o[2],c=o[3],f=o[4],p=o[5];e.stencilFuncSeparate(s.a.FRONT,a,u,l),e.stencilFuncSeparate(s.a.BACK,c,f,p)},stencilOp:function(e,t){t=i(t)&&3===t.length?[].concat(r(t),r(t)):t;var n=t,o=h(n,6),a=o[0],u=o[1],l=o[2],c=o[3],f=o[4],p=o[5];e.stencilOpSeparate(s.a.FRONT,a,u,l),e.stencilOpSeparate(s.a.BACK,c,f,p)},viewport:function(e,t){return e.viewport.apply(e,r(t))}}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={LNGLAT:1,METER_OFFSETS:2,METERS:2,LNGLAT_OFFSETS:3,IDENTITY:0}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}t.__esModule=!0,t.default=void 0;var s=r(n(0)),u=r(n(2)),l=r(n(3)),c=function(e){function t(){return e.apply(this,arguments)||this}return a(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.disabled,r=e.label,a=e.icon,u=e.busy,c=e.active,f=e.children,p=e.variant,h=void 0===p?"primary":p,d=e.component,v=void 0===d?"button":d,m=o(e,["className","disabled","label","icon","busy","active","children","variant","component"]),y=m.type;return"button"===v&&(y=y||"button"),s.default.createElement(v,i({},m,{tabIndex:"-1",title:r,type:y,disabled:n,"aria-disabled":n,"aria-label":r,className:(0,l.default)(t,"rw-btn",c&&!n&&"rw-state-active",h&&"rw-btn-"+h),__source:{fileName:"src/Button.js",lineNumber:35},__self:this}),(a||u)&&s.default.createElement("span",{"aria-hidden":"true",className:(0,l.default)("rw-i","rw-i-"+a,u&&"rw-loading"),__source:{fileName:"src/Button.js",lineNumber:51},__self:this}),f)},t}(s.default.Component);c.propTypes={disabled:u.default.bool,label:u.default.string,icon:u.default.string,busy:u.default.bool,active:u.default.bool,variant:u.default.oneOf(["primary","select"]),component:u.default.any};var f=c;t.default=f,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}function a(e){return function(t){return e?c.default.createElement(e,o({},t,{__source:{fileName:v,lineNumber:13},__self:this})):t.text||t.item}}function s(e,t,n){var r=t.groupBy;if(void 0===n&&(n={}),n.data!==e||n.groupBy!==r){if(!r)return{};var i=[],o=(0,h.groupBySortedKeys)(r,e,i);return{data:e,groupBy:r,groups:o,sortedKeys:i,sequentialData:Object.keys(o).reduce(function(e,t){return e.concat(o[t])},[])}}return n}function u(e){var t=e.listComponent;return t&&t.getDataState}function l(e,t){function n(e){var t=E.disabled;return!!Array.isArray(t)&&t.some(function(t){return x.value(e)===x.value(t)})}function r(e){return e?(e=e.toLowerCase(),function(t){return p.presets.startsWith(x.text(t).toLowerCase(),e)}):function(){return!0}}function a(){var e=A.getState();return e&&e.sequentialData||l}var l,h,y=void 0===t?{}:t,g=y.getDataState,_=y.getStateGetterFromProps,b=y.accessors,x=void 0===b?(0,d.default)(e):b,w=!0,E=e.props;g?_=null:(_||(_=u),g=_(E)||s),(0,f.spyOnComponent)(e,{componentWillReceiveProps:function(e){w||(w=e!==E),E=e,w&&_&&(g=_(E)||s)},componentWillUnmount:function(){l=null,h=null,E=null,g=null,_=null}});var S=function(e){var t=e.item,r=i(e,["item"]),a=E.itemComponent;return a?c.default.createElement(a,o({item:t,value:x.value(t),text:x.text(t),disabled:n(t)},r,{__source:{fileName:v,lineNumber:109},__self:this})):x.text(t)},T=function(e){var t=e.group,n=E.groupComponent;return n?c.default.createElement(n,{item:t,__source:{fileName:v,lineNumber:121},__self:this}):t},A={isDisabled:n,first:function(){return A.next(m)},last:function(){var e=a();return A.prevEnabled(e[e.length-1])},prevEnabled:function(e){return n(e)?A.prev(e):e},prev:function(e,t){var i=a(),o=r(t),s=i.indexOf(e);for((s<0||null==s)&&(s=0),s--;s>-1&&(n(i[s])||!o(i[s]));)s--;return s>=0?i[s]:A.isDisabled(e)?void 0:e},next:function(e,t){for(var i=a(),o=r(t),s=i.indexOf(e)+1,u=i.length;s<u&&(n(i[s])||!o(i[s]));)s++;return s<u?i[s]:A.isDisabled(e)?void 0:e},nextEnabled:function(e){return n(e)?A.next(e):e},setData:function(e){w||(w=e!==l),l=e},getState:function(){return w&&(w=!1,h=g(l,E,h)),h},defaultProps:function(){var e=E,t=e.groupBy,r=e.optionComponent,i=e.searchTerm;return o({groupBy:t,renderItem:S,renderGroup:T,searchTerm:i,optionComponent:r,isDisabled:n},E.listProps,{data:l,dataState:A.getState()})}};return A}t.__esModule=!0,t.normalizeComponent=a,t.defaultGetDataState=s,t.default=l;var c=r(n(0)),f=n(25),p=n(93),h=n(23),d=r(n(66)),v="src/util/listDataManager.js",m={}},function(e,t,n){"use strict";function r(e){return function(){return e}}var i=function(){};i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e},e.exports=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(316),s=n(60),u=n(175),l=n(100),c=n.n(l),f=n(101),p=n.n(f),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.width,o=e.height,a=e.latitude,u=void 0===a?0:a,l=e.longitude,c=void 0===l?0:l,f=e.zoom,p=void 0===f?0:f,h=e.pitch,d=void 0===h?0:h,v=e.bearing,m=void 0===v?0:v,y=e.altitude,g=void 0===y?1.5:y,_=e.farZMultiplier,b=void 0===_?10:_;r(this,t),n=n||1,o=o||1;var x=Object(s.k)(p);g=Math.max(.75,g);var w=Object(s.e)({longitude:c,latitude:u,scale:x}),E=Object(s.c)({width:n,height:o,pitch:d,bearing:m,altitude:g,farZMultiplier:b}),S=Object(s.d)({height:o,center:w,pitch:d,bearing:m,altitude:g,flipY:!0}),T=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{width:n,height:o,viewMatrix:S,projectionMatrix:E}));return T.latitude=u,T.longitude=c,T.zoom=p,T.pitch=d,T.bearing=m,T.altitude=g,T.scale=x,T.center=w,Object.freeze(T),T}return o(t,e),h(t,[{key:"projectFlat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return Object(s.f)(e,t)}},{key:"unprojectFlat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return Object(s.i)(e,t)}},{key:"getMapCenterByLngLatPosition",value:function(e){var t=e.lngLat,n=e.pos,r=Object(s.g)(n,this.pixelUnprojectionMatrix),i=Object(s.f)(t,this.scale),o=c()([],i,p()([],r)),a=c()([],this.center,o);return Object(s.i)(a,this.scale)}},{key:"getLocationAtPoint",value:function(e){var t=e.lngLat,n=e.pos;return this.getMapCenterByLngLatPosition({lngLat:t,pos:n})}},{key:"fitBounds",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.width,i=this.height,o=Object(u.a)(Object.assign({width:r,height:i,bounds:e},n));return new t({width:r,height:i,longitude:o.longitude,latitude:o.latitude,zoom:o.zoom})}}]),t}(a.a);t.a=d},function(e,t){function n(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=t[8],p=t[9],h=t[10],d=t[11],v=t[12],m=t[13],y=t[14],g=t[15],_=n[0],b=n[1],x=n[2],w=n[3];return e[0]=_*r+b*s+x*f+w*v,e[1]=_*i+b*u+x*p+w*m,e[2]=_*o+b*l+x*h+w*y,e[3]=_*a+b*c+x*d+w*g,_=n[4],b=n[5],x=n[6],w=n[7],e[4]=_*r+b*s+x*f+w*v,e[5]=_*i+b*u+x*p+w*m,e[6]=_*o+b*l+x*h+w*y,e[7]=_*a+b*c+x*d+w*g,_=n[8],b=n[9],x=n[10],w=n[11],e[8]=_*r+b*s+x*f+w*v,e[9]=_*i+b*u+x*p+w*m,e[10]=_*o+b*l+x*h+w*y,e[11]=_*a+b*c+x*d+w*g,_=n[12],b=n[13],x=n[14],w=n[15],e[12]=_*r+b*s+x*f+w*v,e[13]=_*i+b*u+x*p+w*m,e[14]=_*o+b*l+x*h+w*y,e[15]=_*a+b*c+x*d+w*g,e}e.exports=n},function(e,t){function n(e,t,n){var r=n[0],i=n[1],o=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}e.exports=n},function(e,t){function n(e,t,n){var r,i,o,a,s,u,l,c,f,p,h,d,v=n[0],m=n[1],y=n[2];return t===e?(e[12]=t[0]*v+t[4]*m+t[8]*y+t[12],e[13]=t[1]*v+t[5]*m+t[9]*y+t[13],e[14]=t[2]*v+t[6]*m+t[10]*y+t[14],e[15]=t[3]*v+t[7]*m+t[11]*y+t[15]):(r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=t[8],p=t[9],h=t[10],d=t[11],e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=u,e[6]=l,e[7]=c,e[8]=f,e[9]=p,e[10]=h,e[11]=d,e[12]=r*v+s*m+f*y+t[12],e[13]=i*v+u*m+p*y+t[13],e[14]=o*v+l*m+h*y+t[14],e[15]=a*v+c*m+d*y+t[15]),e}e.exports=n},function(e,t){function n(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,e}e.exports=n},function(e,t,n){"use strict";function r(e){return Math.pow(2,e)}function i(e){return Math.log2(e)}function o(e,t){var n=M(e,2),r=n[0],i=n[1];t*=F;var o=r*D,a=i*D;return[t*(o+I)/(2*I),t*(I-Math.log(Math.tan(L+.5*a)))/(2*I)]}function a(e,t){var n=M(e,2),r=n[0],i=n[1];t*=F;var o=r/t*(2*I)-I,a=2*(Math.atan(Math.exp(I-i/t*(2*I)))-L);return[o*N,a*N]}function s(e){var t=e.latitude;R()(t);var n=Math.cos(t*D);return i(j*n)-8}function u(e){var t=e.latitude,n=e.longitude,i=e.zoom,o=e.scale,a=e.highPrecision,s=void 0!==a&&a;o=void 0!==o?o:r(i),R()(isFinite(t)&&isFinite(n)&&isFinite(o));var u={},l=F*o,c=Math.cos(t*D),f=l/360,p=f/c,h=l/j/c;if(u.pixelsPerMeter=[h,h,h],u.metersPerPixel=[1/h,1/h,1/h],u.pixelsPerDegree=[f,p,h],u.degreesPerPixel=[1/f,1/p,1/h],s){var d=D*Math.tan(t*D)/c,v=f*d/2,m=l/j*d,y=m/p*h;u.pixelsPerDegree2=[0,v,m],u.pixelsPerMeter2=[y,0,y]}return u}function l(e){var t=e.longitude,n=e.latitude,i=e.zoom,a=e.scale,s=e.meterOffset,l=e.distanceScales,c=void 0===l?null:l;a=void 0!==a?a:r(i);var f=o([t,n],a),p=new m.c(f[0],f[1],0);if(s){c=c||u({latitude:n,longitude:t,scale:a});var h=new m.c(s).scale(c.pixelsPerMeter).scale([1,-1,1]);p.add(h)}return p}function c(e){var t=e.height,n=e.altitude;return 2*Math.atan(t/2/n)}function f(e){var t=e.altitude,n=e.pitch,r=n*D,i=Math.atan(.5/t),o=Math.sin(i)*t/Math.sin(Math.PI/2-r-i);return{farZ:Math.cos(Math.PI/2-r)*o+t,nearZ:.1}}function p(e){var t=e.height,n=e.pitch,r=e.bearing,i=e.altitude,o=e.center,a=void 0===o?null:o,s=e.flipY,u=void 0!==s&&s,l=Object(y.a)();return E()(l,l,[0,0,-i]),x()(l,l,[1,1,1/t]),T()(l,l,-n*D),O()(l,l,r*D),u&&x()(l,l,[1,-1,1]),a&&E()(l,l,new m.c(a).negate()),l}function h(e){var t=e.width,n=e.height,r=e.pitch,i=e.altitude,o=e.farZMultiplier,a=void 0===o?10:o,s=f({altitude:i,pitch:r}),u=s.nearZ,l=s.farZ,p=c({height:n,altitude:i});return _()([],p,t/n,u,l*a)}function d(e,t){var n=M(e,3),r=n[0],i=n[1],o=n[2],a=void 0===o?0:o;return R()(isFinite(r)&&isFinite(i)&&isFinite(a)),Object(y.d)(t,[r,i,a,1])}function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=M(e,3),i=r[0],o=r[1],a=r[2];if(R()(isFinite(i)&&isFinite(o)),Number.isFinite(a)){return Object(y.d)(t,[i,o,a,1])}var s=Object(y.d)(t,[i,o,0,1]),u=Object(y.d)(t,[i,o,1,1]),l=s[2],c=u[2],f=l===c?0:((n||0)-l)/(c-l);return C()([],s,u,f)}t.k=r,t.h=i,t.f=o,t.i=a,t.b=s,t.a=u,t.e=l,t.d=p,t.c=h,t.j=d,t.g=v;var m=n(9),y=n(72),g=n(47),_=n.n(g),b=n(57),x=n.n(b),w=n(58),E=n.n(w),S=n(105),T=n.n(S),A=n(71),O=n.n(A),P=n(157),C=n.n(P),k=n(1),R=n.n(k),M=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),I=Math.PI,L=I/4,D=I/180,N=180/I,F=512,j=4003e4},function(e,t,n){"use strict";var r=n(381);n.d(t,"a",function(){return r.a})},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(15),u=n(121),l=n(56),c=n.n(l),f=n(46),p=n.n(f),h=n(57),d=n.n(h),v=n(47),m=n.n(v),y=n(58),g=n.n(y),_=n(105),b=n.n(_),x=n(170),w=n.n(x),E=n(71),S=n.n(E),T=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),A=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),O=Math.PI/180,P=function(e){function t(e){var n=e.id,r=void 0===n?"orbit-viewport":n,a=e.width,s=e.height,l=e.distance,f=e.rotationX,h=void 0===f?0:f,v=e.rotationOrbit,y=void 0===v?0:v,_=e.orbitAxis,x=void 0===_?"Z":_,E=e.lookAt,T=void 0===E?[0,0,0]:E,A=e.up,P=void 0===A?[0,1,0]:A,C=e.fov,k=void 0===C?75:C,R=e.near,M=void 0===R?1:R,I=e.far,L=void 0===I?100:I,D=e.zoom,N=void 0===D?1:D;i(this,t);var F=b()([],Object(u.a)(),-h/180*Math.PI);"Z"===x?S()(F,F,-y/180*Math.PI):w()(F,F,-y/180*Math.PI);var j=Object(u.a)();d()(j,j,[N,N,N]),g()(j,j,[-T[0],-T[1],-T[2]]);var B=p()([],[0,0,l],[0,0,0],P),z=k*O,U=a/s,V=m()([],z,U,M,L),G=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{id:r,viewMatrix:c()(B,B,c()(F,F,j)),projectionMatrix:V,width:a,height:s}));return G.width=a,G.height=s,G.distance=l,G.rotationX=h,G.rotationOrbit=y,G.orbitAxis=x,G.lookAt=T,G.up=P,G.fov=k,G.near=M,G.far=L,G.zoom=N,G}return a(t,e),A(t,[{key:"project",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.topLeft,i=void 0!==n&&n,o=Object(u.d)(this.pixelProjectionMatrix,[].concat(r(e),[1])),a=T(o,3),s=a[0],l=a[1],c=a[2];return[s,i?this.height-l:l,c]}},{key:"unproject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.topLeft,r=void 0!==n&&n,i=T(e,3),o=i[0],a=i[1],s=i[2],l=r?this.height-a:a;return Object(u.d)(this.pixelUnprojectionMatrix,[o,l,s,1])}},{key:"fitBounds",value:function(e){var n=this.width,r=this.height,i=this.rotationX,o=this.rotationOrbit,a=this.orbitAxis,s=this.lookAt,u=this.up,l=this.fov;return new t({width:n,height:r,rotationX:i,rotationOrbit:o,orbitAxis:a,up:u,fov:l,near:this.near,far:this.far,zoom:this.zoom,lookAt:s,distance:Math.max(e[0],e[1],e[2])/2/Math.tan(l/180*Math.PI/2)})}}]),t}(s.a);t.a=P,P.displayName="OrbitViewport"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}t.__esModule=!0,t.default=void 0;var s=r(n(0)),u=r(n(2)),l=r(n(3)),c=function(e){function t(){return e.apply(this,arguments)||this}return a(t,e),t.prototype.render=function(){var e=this.props,t=e.open,n=e.dropUp,r=e.className,a=e.disabled,u=e.readOnly,c=e.focused,f=o(e,["open","dropUp","className","disabled","readOnly","focused"]),p="rw-open"+(n?"-up":"");return s.default.createElement("div",i({},f,{className:(0,l.default)(r,"rw-widget-picker","rw-widget-container",t&&p,a&&"rw-state-disabled",u&&"rw-state-readonly",c&&"rw-state-focus"),__source:{fileName:"src/WidgetPicker.js",lineNumber:30},__self:this}))},t}(s.default.Component);c.propTypes={tabIndex:u.default.node,focused:u.default.bool,disabled:u.default.bool,readOnly:u.default.bool,open:u.default.bool,dropUp:u.default.bool,picker:u.default.bool};var f=c;t.default=f,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}t.__esModule=!0,t.default=void 0;var s=r(n(0)),u=r(n(2)),l=r(n(3)),c=r(n(52)),f=function(e){function t(){return e.apply(this,arguments)||this}return a(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.bordered,r=e.children,a=o(e,["className","bordered","children"]);return s.default.createElement("span",{className:(0,l.default)(t,"rw-select",n&&"rw-select-bordered"),__source:{fileName:"src/Select.js",lineNumber:16},__self:this},r?s.default.Children.map(r,function(e){return e&&s.default.cloneElement(e,{variant:"select"})}):s.default.createElement(c.default,i({},a,{variant:"select",__source:{fileName:"src/Select.js",lineNumber:27},__self:this})))},t}(s.default.Component);f.propTypes={bordered:u.default.bool};var p=f;t.default=p,e.exports=t.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function s(e,t,n,r){var i=r.groups,o=r.sortedKeys;if(!i)return n.indexOf(e);var a=-1,s=-1;return o.some(function(t){var n=i[t].indexOf(e);if(a++,-1!==n)return s=a+n+1,!0;a+=i[t].length}),s}t.__esModule=!0,t.default=void 0;var u=i(n(2)),l=i(n(0)),c=n(12),f=r(n(7)),p=r(n(11)),h=n(26),d=n(53),v=i(n(254)),m=i(n(133)),y=i(n(580)),g=n(32),_={},b={data:u.default.array,dataState:u.default.shape({sortedKeys:u.default.array,groups:u.default.object,data:u.default.array,sequentialData:u.default.array}),onSelect:u.default.func,onMove:u.default.func,activeId:u.default.string,optionComponent:f.elementType,renderItem:u.default.func.isRequired,renderGroup:u.default.func,focusedItem:u.default.any,selectedItem:u.default.any,searchTerm:u.default.string,isDisabled:u.default.func.isRequired,groupBy:f.accessor,messages:u.default.shape({emptyList:u.default.func.isRequired})},x={onSelect:function(){},data:[],dataState:_,optionComponent:m.default},w=function(e){function t(){return e.apply(this,arguments)||this}a(t,e);var n=t.prototype;return n.componentDidMount=function(){this.move()},n.componentDidUpdate=function(){this.move()},n.mapItems=function(e){var t=this.props,n=t.data,r=t.dataState,i=r.sortedKeys,o=r.groups;if(!o)return n.map(function(t,n){return e(t,n,!1)});var a=-1;return i.reduce(function(t,n){var r=o[n];return t.concat(e(n,a,!0),r.map(function(t){return e(t,++a,!1)}))},[])},n.move=function(){var e=this.props,t=e.focusedItem,n=e.onMove,r=e.data,i=e.dataState,o=(0,c.findDOMNode)(this),a=s(t,o,r,i),u=o.children[a];u&&(0,h.notify)(n,[u,o,t])},n.renderGroupHeader=function(e){var t=this.props.renderGroup;return l.default.createElement(y.default,{key:"group_"+e,group:e,__source:{fileName:"src/List.js",lineNumber:95},__self:this},t({group:e}))},n.renderItem=function(e,t){var n=this.props,r=n.activeId,i=n.focusedItem,o=n.selectedItem,a=n.onSelect,s=n.isDisabled,u=n.renderItem,c=n.optionComponent,f=i===e;return l.default.createElement(c,{dataItem:e,key:"item_"+t,index:t,activeId:r,focused:f,onSelect:a,disabled:s(e),selected:o===e,__source:{fileName:"src/List.js",lineNumber:117},__self:this},u({item:e,index:t}))},n.render=function(){var e=this,t=this.props,n=t.className,r=t.messages,i=p.pickElementProps(this),a=(0,g.getMessages)(r),s=a.emptyList;return l.default.createElement(v.default,o({},i,{className:n,emptyListMessage:s(this.props),__source:{fileName:"src/List.js",lineNumber:140},__self:this}),this.mapItems(function(t,n,r){return r?e.renderGroupHeader(t):e.renderItem(t,n)}))},t}(l.default.Component);w.getDataState=d.defaultGetDataState,w.propTypes=b,w.defaultProps=x;var E=w;t.default=E,e.exports=t.default},function(e,t,n){"use strict";function r(e){var t=e.props,n=t.textField,r=t.valueField;return(0,i.spyOnComponent)(e,{componentWillReceiveProps:function(e){n=e.textField,r=e.valueField}}),{text:function(e){return o.dataText(e,n)},value:function(e){return o.dataValue(e,r)},indexOf:function(e,t){return o.dataIndexOf(e,t,r)},matches:function(e,t){return o.valueMatcher(e,t,r)},findOrSelf:function(e,t){return o.dataItem(e,t,r)},find:function(e,t){var n=o.dataIndexOf(e,t,r);if(~n)return e[n]}}}t.__esModule=!0,t.default=r;var i=n(25),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(94));e.exports=t.default},function(e,t,n){"use strict";function r(e,t){void 0===t&&(t=function(e){return e.parentNode});var n,r,a,s=e.props.onMove,u=!0;return(0,o.spyOnComponent)(e,{componentWillReceiveProps:function(e){var t=e.onMove;s=t},componentWillUnmount:function(){u=!1}}),function(e,t,o){if(u){var l,c,f=r,p=n;r=!(!t.offsetWidth||!t.offsetHeight),n=o,c=p!==o,l=r&&!f,(l||r&&c)&&(s?s(e,t,o):(a&&a(),a=(0,i.default)(e,!1)))}}}t.__esModule=!0,t.default=r;var i=function(e){return e&&e.__esModule?e:{default:e}}(n(582)),o=n(25);e.exports=t.default},function(e,t,n){"use strict";function r(e,t,n){for(var r=new Array(n),i=0,o=t;i<n;)r[i]=e[o],i=i+1|0,o=o+1|0;return r}function i(e,t){for(;;){var n=t,r=e;if(!n)return r;t=n[1],e=n[0].length+r|0}}function o(e,t,n){for(;;){var r=n,i=t;if(!r)return 0;for(var o=r[0],a=o.length,s=i,u=0;u<a;)e[s]=o[u],s=s+1|0,u=u+1|0;n=r[1],t=s}}function a(e){var t=i(0,e),n=new Array(t);return o(n,0,e),n}function s(e,t,n){if(t<0||t>=e.length)throw[f.invalid_argument,"index out of bounds"];return e[t]=n,0}function u(e,t){if(t<0||t>=e.length)throw[f.invalid_argument,"index out of bounds"];return e[t]}function l(e,t){for(var n=new Array(e),r=0,i=e-1|0;r<=i;++r)n[r]=t;return n}function c(e,t,n,r,i){if(r<=t){for(var o=0,a=i-1|0;o<=a;++o)n[o+r|0]=e[o+t|0];return 0}for(var s=i-1|0;s>=0;--s)n[s+r|0]=e[s+t|0];return 0}var f=n(14);t.caml_array_sub=r,t.caml_array_concat=a,t.caml_make_vect=l,t.caml_array_blit=c,t.caml_array_get=u,t.caml_array_set=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(18),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"clone",value:function(){var e=this.constructor,t=(new e).copy(this);return t.check(),t}},{key:"copy",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]=e[t];return this.check()}},{key:"set",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0;r<this.ELEMENTS;++r)this[r]=t[r]||0;return this.check()}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)this[n]=e[n+t];return this.check()}},{key:"toString",value:function(){return this.formatString(a.c)}},{key:"formatString",value:function(e){for(var t="",n=0;n<this.ELEMENTS;++n)t+=(n>0?", ":"")+Object(a.f)(this[n],e);return(e.printTypes?this.constructor.name:"")+"["+t+"]"}},{key:"toArray",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)e[t+n]=this[n];return e}},{key:"toFloat32Array",value:function(){return new Float32Array(this)}},{key:"equals",value:function(e){if(!e||this.length!==e.length)return!1;for(var t=0;t<this.ELEMENTS;++t)if(!Object(a.e)(this[t],e[t]))return!1;return!0}},{key:"exactEquals",value:function(e){if(!e||this.length!==e.length)return!1;for(var t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}},{key:"negate",value:function(){for(var e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}},{key:"inverse",value:function(){for(var e=0;e<this.ELEMENTS;++e)this[e]=1/this[e];return this.check()}},{key:"lerp",value:function(e,t){for(var n=0;n<this.ELEMENTS;++n){var r=this[n];this[n]=r+t*(e[0]-r)}return this.check()}},{key:"validate",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,t=e&&e.length===this.ELEMENTS,n=0;n<this.ELEMENTS;++n)t=t&&Number.isFinite(e[n]);return t}},{key:"check",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;if(a.c.debug&&!this.validate(e))throw new Error("Invalid "+this.constructor.name);return this}}]),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Array));t.a=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return 3===e.length&&Number.isFinite(e[0])&&Number.isFinite(e[1])&&Number.isFinite(e[2])}t.b=a;var s=n(99),u=n(18),l=n(326),c=n.n(l),f=n(327),p=n.n(f),h=n(329),d=n.n(h),v=n(160),m=n.n(v),y=n(330),g=n.n(y),_=n(331),b=n.n(_),x=n(332),w=n.n(x),E=n(333),S=n.n(E),T=n(161),A=n.n(T),O=n(334),P=n.n(O),C=n(335),k=n.n(C),R=n(336),M=n.n(R),I=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),L=[0,0,0],D=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Array.isArray(e)&&1===arguments.length?a.copy(e):a.set(e,n,o),a}return o(t,e),I(t,[{key:"set",value:function(e,t,n){return c()(this,e,t,n),this.check()}},{key:"angle",value:function(e){return p()(this,e)}},{key:"add",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;d()(this,this,u)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this.check()}},{key:"subtract",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;m()(this,this,u)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this.check()}},{key:"multiply",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;g()(this,this,u)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this.check()}},{key:"scale",value:function(e){return Number.isFinite(e)?w()(this,this,e):g()(this,this,e),this.check()}},{key:"cross",value:function(e){return A()(this,this,e),this.check()}},{key:"rotateX",value:function(e){var t=e.radians,n=e.origin,r=void 0===n?L:n;return P()(this,this,r,t),this.check()}},{key:"rotateY",value:function(e){var t=e.radians,n=e.origin,r=void 0===n?L:n;return k()(this,this,r,t),this.check()}},{key:"rotateZ",value:function(e){var t=e.radians,n=e.origin,r=void 0===n?L:n;return M()(this,this,r,t),this.check()}},{key:"operation",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,[this,this].concat(n)),this.check()}},{key:"divide",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;b()(this,this,u)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this.check()}},{key:"scaleAndAdd",value:function(e,t){return S()(this,this,e,t),this.check()}},{key:"ELEMENTS",get:function(){return 3}},{key:"x",get:function(){return this[0]},set:function(e){return this[0]=Object(u.a)(e)}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=Object(u.a)(e)}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=Object(u.a)(e)}}]),t}(s.a);t.a=D},function(e,t){function n(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],u=t[3],l=t[4],c=t[5],f=t[6],p=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+l*r,e[1]=a*i+c*r,e[2]=s*i+f*r,e[3]=u*i+p*r,e[4]=l*i-o*r,e[5]=c*i-a*r,e[6]=f*i-s*r,e[7]=p*i-u*r,e}e.exports=n},function(e,t,n){"use strict";function r(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function i(e,t){var n=c()([],t,e);return u()(n,n,1/n[3]),n}function o(e,t){var n=e%t;return n<0?t+n:n}function a(e,t,n){return n*t+(1-n)*e}t.a=r,t.d=i,t.c=o,t.b=a;var s=n(102),u=n.n(s),l=n(59),c=n.n(l)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n){return e<t?t:e>n?n:e}n.d(t,"a",function(){return c});var o=n(21),a=n(1),s=n.n(a),u=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c={minZoom:0,maxZoom:20,minPitch:0,maxPitch:60},f={pitch:0,bearing:0,altitude:1.5},p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width,i=t.height,o=t.latitude,a=t.longitude,u=t.zoom,l=t.bearing,p=void 0===l?f.bearing:l,h=t.pitch,d=void 0===h?f.pitch:h,v=t.altitude,m=void 0===v?f.altitude:v,y=t.maxZoom,g=void 0===y?c.maxZoom:y,_=t.minZoom,b=void 0===_?c.minZoom:_,x=t.maxPitch,w=void 0===x?c.maxPitch:x,E=t.minPitch,S=void 0===E?c.minPitch:E,T=t.startPanLngLat,A=t.startZoomLngLat,O=t.startBearing,P=t.startPitch,C=t.startZoom;r(this,e),s()(Number.isFinite(n),"`width` must be supplied"),s()(Number.isFinite(i),"`height` must be supplied"),s()(Number.isFinite(a),"`longitude` must be supplied"),s()(Number.isFinite(o),"`latitude` must be supplied"),s()(Number.isFinite(u),"`zoom` must be supplied"),this._viewportProps=this._applyConstraints({width:n,height:i,latitude:o,longitude:a,zoom:u,bearing:p,pitch:d,altitude:m,maxZoom:g,minZoom:b,maxPitch:w,minPitch:S}),this._interactiveState={startPanLngLat:T,startZoomLngLat:A,startBearing:O,startPitch:P,startZoom:C}}return l(e,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"panStart",value:function(e){var t=e.pos;return this._getUpdatedMapState({startPanLngLat:this._unproject(t)})}},{key:"pan",value:function(e){var t=e.pos,n=e.startPos,r=this._interactiveState.startPanLngLat||this._unproject(n);if(!r)return this;var i=this._calculateNewLngLat({startPanLngLat:r,pos:t}),o=u(i,2),a=o[0],s=o[1];return this._getUpdatedMapState({longitude:a,latitude:s})}},{key:"panEnd",value:function(){return this._getUpdatedMapState({startPanLngLat:null})}},{key:"rotateStart",value:function(e){e.pos;return this._getUpdatedMapState({startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function(e){var t=e.deltaScaleX,n=void 0===t?0:t,r=e.deltaScaleY,i=void 0===r?0:r,o=this._interactiveState,a=o.startBearing,s=o.startPitch;if(!Number.isFinite(a)||!Number.isFinite(s))return this;var u=this._calculateNewPitchAndBearing({deltaScaleX:n,deltaScaleY:i,startBearing:a,startPitch:s}),l=u.pitch,c=u.bearing;return this._getUpdatedMapState({bearing:c,pitch:l})}},{key:"rotateEnd",value:function(){return this._getUpdatedMapState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function(e){var t=e.pos;return this._getUpdatedMapState({startZoomLngLat:this._unproject(t),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(e){var t=e.pos,n=e.startPos,r=e.scale;s()(r>0,"`scale` must be a positive number");var i=this._interactiveState,a=i.startZoom,l=i.startZoomLngLat;Number.isFinite(a)||(a=this._viewportProps.zoom,l=this._unproject(n)||this._unproject(t)),s()(l,"`startZoomLngLat` prop is required for zoom behavior to calculate where to position the map.");var c=this._calculateNewZoom({scale:r,startZoom:a}),f=new o.a(Object.assign({},this._viewportProps,{zoom:c})),p=f.getLocationAtPoint({lngLat:l,pos:t}),h=u(p,2),d=h[0],v=h[1];return this._getUpdatedMapState({zoom:c,longitude:d,latitude:v})}},{key:"zoomEnd",value:function(){return this._getUpdatedMapState({startZoomLngLat:null,startZoom:null})}},{key:"_getUpdatedMapState",value:function(t){return new e(Object.assign({},this._viewportProps,this._interactiveState,t))}},{key:"_applyConstraints",value:function(e){var t=e.maxZoom,n=e.minZoom,r=e.zoom;e.zoom=i(r,n,t);var a=e.maxPitch,s=e.minPitch,u=e.pitch;return e.pitch=i(u,s,a),Object.assign(e,Object(o.j)(e)),e}},{key:"_unproject",value:function(e){var t=new o.a(this._viewportProps);return e&&t.unproject(e)}},{key:"_calculateNewLngLat",value:function(e){var t=e.startPanLngLat,n=e.pos;return new o.a(this._viewportProps).getMapCenterByLngLatPosition({lngLat:t,pos:n})}},{key:"_calculateNewZoom",value:function(e){var t=e.scale,n=e.startZoom,r=this._viewportProps,o=r.maxZoom,a=r.minZoom;return i(n+Math.log2(t),a,o)}},{key:"_calculateNewPitchAndBearing",value:function(e){var t=e.deltaScaleX,n=e.deltaScaleY,r=e.startBearing,o=e.startPitch;n=i(n,-1,1);var a=this._viewportProps,s=a.minPitch,u=a.maxPitch,l=r+180*t,c=o;return n>0?c=o+n*(u-o):n<0&&(c=o-n*(s-o)),{pitch:c,bearing:l}}}]),e}();t.b=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return c});var i=n(1),o=n.n(i),a=n(106),s=n(73),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(){},c={BREAK:1,SNAP_TO_END:2,IGNORE:3},f={transitionDuration:0,transitionEasing:function(e){return e},transitionInterpolator:new a.a,transitionInterruption:c.BREAK,onTransitionStart:l,onTransitionInterrupt:l,onTransitionEnd:l},p={animation:null,propsInTransition:null,startProps:null,endProps:null},h=function(){function e(t){r(this,e),this.props=t,this.state=p,this._onTransitionFrame=this._onTransitionFrame.bind(this)}return u(e,[{key:"getViewportInTransition",value:function(){return this.state.propsInTransition}},{key:"processViewportChange",value:function(e){var t=!1,n=this.props;if(this.props=e,this._shouldIgnoreViewportChange(n,e))return t;var r=this._isTransitionInProgress();if(this._isTransitionEnabled(e)){var i=Object.assign({},n,this.state.interruption===c.SNAP_TO_END?this.state.endProps:this.state.propsInTransition);r&&n.onTransitionInterrupt(),e.onTransitionStart(),this._triggerTransition(i,e),t=!0}else r&&(n.onTransitionInterrupt(),this._endTransition());return t}},{key:"_isTransitionInProgress",value:function(){return Boolean(this.state.propsInTransition)}},{key:"_isTransitionEnabled",value:function(e){return e.transitionDuration>0&&Boolean(e.transitionInterpolator)}},{key:"_isUpdateDueToCurrentTransition",value:function(e){return!!this.state.propsInTransition&&this.state.interpolator.arePropsEqual(e,this.state.propsInTransition)}},{key:"_shouldIgnoreViewportChange",value:function(e,t){return this._isTransitionInProgress()?this.state.interruption===c.IGNORE||this._isUpdateDueToCurrentTransition(t):!this._isTransitionEnabled(t)||t.transitionInterpolator.arePropsEqual(e,t)}},{key:"_triggerTransition",value:function(e,t){o()(this._isTransitionEnabled(t),"Transition is not enabled"),cancelAnimationFrame(this.state.animation);var n=t.transitionInterpolator.initializeProps(e,t);this.state={duration:t.transitionDuration,easing:t.transitionEasing,interpolator:t.transitionInterpolator,interruption:t.transitionInterruption,startTime:Date.now(),startProps:n.start,endProps:n.end,animation:null,propsInTransition:{}},this._onTransitionFrame()}},{key:"_onTransitionFrame",value:function(){this.state.animation=requestAnimationFrame(this._onTransitionFrame),this._updateViewport()}},{key:"_endTransition",value:function(){cancelAnimationFrame(this.state.animation),this.state=p}},{key:"_updateViewport",value:function(){var e=Date.now(),t=this.state,n=t.startTime,r=t.duration,i=t.easing,o=t.interpolator,a=t.startProps,u=t.endProps,l=!1,c=(e-n)/r;c>=1&&(c=1,l=!0),c=i(c);var f=o.interpolateProps(a,u,c),p=new s.b(Object.assign({},this.props,f));this.state.propsInTransition=p.getViewportProps(),this.props.onViewportChange&&this.props.onViewportChange(this.state.propsInTransition),l&&(this._endTransition(),this.props.onTransitionEnd())}}]),e}();t.b=h,h.defaultProps=f},function(e,t,n){"use strict";n.d(t,"e",function(){return i}),n.d(t,"f",function(){return o}),n.d(t,"g",function(){return a}),n.d(t,"a",function(){return s}),n.d(t,"d",function(){return u}),n.d(t,"b",function(){return l}),n.d(t,"c",function(){return c});var r=n(177),i=r.b?[[r.b.Rotate,{enable:!1}],[r.b.Pinch,{enable:!1}],[r.b.Swipe,{enable:!1}],[r.b.Pan,{threshold:0,enable:!1}],[r.b.Press,{enable:!1}],[r.b.Tap,{event:"doubletap",taps:2,enable:!1}],[r.b.Tap,{enable:!1}]]:null,o={rotate:["pinch"]},a={doubletap:["tap"]},s={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},u={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel","DOMMouseScroll"]},l={tap:"tap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},c={click:"tap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseleave:"pointerleave"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(182),i=n(183),o=n(184);n.d(t,"global",function(){return i.a});if(i.a.luma&&"5.1.4"!==i.a.luma.VERSION)throw new Error("luma.gl - multiple VERSIONs detected: "+i.a.luma.VERSION+" vs 5.1.4");i.a.luma||(r.a&&console.log("luma.gl 5.1.4 - set luma.log.priority=1 (or higher) to trace rendering"),i.a.luma=i.a.luma||{VERSION:"5.1.4",version:"5.1.4",log:o.a,stats:{},globals:{headlessGL:null,headlessTypes:null,modules:{},nodeIO:{}}}),t.default=i.a.luma},function(e,t,n){"use strict";function r(e,t){var n=c[t];l()(n,t);var r=Object(s.h)(e)?n[1]||n[0]:n[0],i="string"===typeof r?Boolean(e.getExtension(r)):r;return l()(!1===i||!0===i),i}function i(e,t){return o(e,t)}function o(e,t){return t=Array.isArray(t)?t:[t],t.every(function(t){return r(e,t)})}function a(e){if(e.luma=e.luma||{},!e.luma.caps){e.luma.caps={},e.luma.caps.webgl2=Object(s.h)(e);for(var t in c)e.luma.caps[t]=r(e,t)}return e.luma.caps}n.d(t,"a",function(){return f}),t.c=i,t.d=o,t.b=a;var s=n(4),u=n(1),l=n.n(u),c={VERTEX_ARRAY_OBJECT:["OES_vertex_array_object",!0],TIMER_QUERY:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],INSTANCED_RENDERING:["ANGLE_instanced_arrays",!0],MULTIPLE_RENDER_TARGETS:["WEBGL_draw_buffers",!0],ELEMENT_INDEX_UINT32:["OES_element_index_uint",!0],BLEND_EQUATION_MINMAX:["EXT_blend_minmax",!0],COLOR_ENCODING_SRGB:["EXT_sRGB",!0],TEXTURE_DEPTH:["WEBGL_depth_texture",!0],TEXTURE_FLOAT:["OES_texture_float",!0],TEXTURE_HALF_FLOAT:["OES_texture_half_float",!0],TEXTURE_FILTER_LINEAR_FLOAT:["OES_texture_float_linear"],TEXTURE_FILTER_LINEAR_HALF_FLOAT:["OES_texture_half_float_linear"],TEXTURE_FILTER_ANISOTROPIC:["EXT_texture_filter_anisotropic"],COLOR_ATTACHMENT_RGBA32F:["WEBGL_color_buffer_float","EXT_color_buffer_float"],COLOR_ATTACHMENT_FLOAT:[!1,"EXT_color_buffer_float"],COLOR_ATTACHMENT_HALF_FLOAT:[!1,"EXT_color_buffer_half_float"],GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},f={};Object.keys(c).forEach(function(e){f[e]=e})},function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.framebuffer,r=void 0===n?null:n,i=t.color,o=void 0===i?null:i,s=t.depth,l=void 0===s?null:s,h=t.stencil,d=void 0===h?null:h,v={};r&&(v.framebuffer=r);var m=0;o&&(m|=p,!0!==o&&(v.clearColor=o)),l&&(m|=c,!0!==l&&(v.clearDepth=l)),d&&(m|=f,!0!==l&&(v.clearStencil=l)),u()(0!==m,y),Object(a.c)(e,v,function(){e.clear(m)})}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.framebuffer,r=void 0===n?null:n,i=t.buffer,s=void 0===i?h:i,c=t.drawBuffer,f=void 0===c?0:c,p=t.value,g=void 0===p?[0,0,0,0]:p;u()(Object(o.h)(e),o.b),Object(a.c)(e,{framebuffer:r},function(){switch(s){case h:switch(g.constructor){case Int32Array:e.clearBufferiv(s,f,g);break;case Uint32Array:e.clearBufferuiv(s,f,g);break;case Float32Array:default:e.clearBufferfv(s,f,g)}break;case d:e.clearBufferfv(d,0,[g]);break;case v:e.clearBufferiv(v,0,[g]);break;case m:var t=l(g,2),n=t[0],r=t[1];e.clearBufferfi(m,0,n,r);break;default:u()(!1,y)}})}t.a=r,t.b=i;var o=n(4),a=n(50),s=n(1),u=n.n(s),l=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=256,f=1024,p=16384,h=6144,d=6145,v=6146,m=34041,y="clear: bad arguments"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t,n){var r=n[t];if(!r)return!1;var i=Object(c.h)(e)?r.gl2||r.gl1:r.gl1;return"string"===typeof i?e.getExtension(i):i}var u,l=n(17),c=n(4),f=n(19),p=n(1),h=n.n(p),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v="EXT_color_buffer_float",m=(u={},a(u,l.b.DEPTH_COMPONENT16,{}),a(u,l.b.DEPTH_COMPONENT24,{gl2:!0}),a(u,l.b.DEPTH_COMPONENT32F,{gl2:!0}),a(u,l.b.STENCIL_INDEX8,{}),a(u,l.b.DEPTH_STENCIL,{}),a(u,l.b.DEPTH24_STENCIL8,{gl2:!0}),a(u,l.b.DEPTH32F_STENCIL8,{gl2:!0}),a(u,l.b.RGBA4,{}),a(u,l.b.RGB565,{}),a(u,l.b.RGB5_A1,{}),a(u,l.b.R8,{gl2:!0}),a(u,l.b.R8UI,{gl2:!0}),a(u,l.b.R8I,{gl2:!0}),a(u,l.b.R16UI,{gl2:!0}),a(u,l.b.R16I,{gl2:!0}),a(u,l.b.R32UI,{gl2:!0}),a(u,l.b.R32I,{gl2:!0}),a(u,l.b.RG8,{gl2:!0}),a(u,l.b.RG8UI,{gl2:!0}),a(u,l.b.RG8I,{gl2:!0}),a(u,l.b.RG16UI,{gl2:!0}),a(u,l.b.RG16I,{gl2:!0}),a(u,l.b.RG32UI,{gl2:!0}),a(u,l.b.RG32I,{gl2:!0}),a(u,l.b.RGB8,{gl2:!0}),a(u,l.b.RGBA8,{gl2:!0}),a(u,l.b.RGB10_A2,{gl2:!0}),a(u,l.b.RGBA8UI,{gl2:!0}),a(u,l.b.RGBA8I,{gl2:!0}),a(u,l.b.RGB10_A2UI,{gl2:!0}),a(u,l.b.RGBA16UI,{gl2:!0}),a(u,l.b.RGBA16I,{gl2:!0}),a(u,l.b.RGBA32I,{gl2:!0}),a(u,l.b.RGBA32UI,{gl2:!0}),a(u,l.b.R16F,{gl2:v}),a(u,l.b.RG16F,{gl2:v}),a(u,l.b.RGBA16F,{gl2:v}),a(u,l.b.R32F,{gl2:v}),a(u,l.b.RG32F,{gl2:v}),a(u,l.b.RGBA32F,{gl2:v}),a(u,l.b.R11F_G11F_B10F,{gl2:v}),u),y=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o.initialize(n),Object.seal(o),o}return o(t,e),d(t,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.format;return!n||s(e,n,m)}},{key:"getSamplesForFormat",value:function(e,t){var n=t.format;return e.getInternalformatParameter(36161,n,32937)}}]),d(t,[{key:"initialize",value:function(e){var t=e.format,n=e.width,r=void 0===n?1:n,i=e.height,o=void 0===i?1:i,a=e.samples,s=void 0===a?0:a;return h()(t,"Needs format"),this.gl.bindRenderbuffer(36161,this.handle),0!==s&&Object(c.h)(this.gl)?this.gl.renderbufferStorageMultisample(36161,s,t,r,o):this.gl.renderbufferStorage(36161,t,r,o),this.format=t,this.width=r,this.height=o,this.samples=s,this}},{key:"resize",value:function(e){var t=e.width,n=e.height;return t!==this.width||n!==this.height?this.initialize({width:t,height:n,format:this.format,samples:this.samples}):this}},{key:"_createHandle",value:function(){return this.gl.createRenderbuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteRenderbuffer(this.handle)}},{key:"_syncHandle",value:function(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}},{key:"_getParameter",value:function(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}]),t}(f.a);t.a=y},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){var n={},r=0;b()(t===s.e.SEPARATE_ATTRIBS||t===s.e.INTERLEAVED_ATTRIBS);var i=t===s.e.SEPARATE_ATTRIBS?1:0,o=!0,a=!1,u=void 0;try{for(var l,c=e[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){n[l.value]=r,r+=i}}catch(e){a=!0,u=e}finally{try{!o&&c.return&&c.return()}finally{if(a)throw u}}return n}var s=n(22),u=n(4),l=n(50),c=n(112),f=n(19),p=n(38),h=n(49),d=n(191),v=n(113),m=n(81),y=n(48),g=n(5),_=n(1),b=n.n(_),x=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),w=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o.initialize(n),o.vertexAttributes=c.a.getDefaultArray(e),Object.seal(o),o._setId(n.id),o}return o(t,e),x(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.vs,n=e.fs,r=e.defaultUniforms,i=e.varyings,o=e.bufferMode,l=void 0===o?s.e.SEPARATE_ATTRIBS:o;return this.vs="string"===typeof t?new m.c(this.gl,t):t,this.fs="string"===typeof n?new m.a(this.gl,n):n,b()(this.vs instanceof m.c,"Program: bad vertex shader"),b()(this.fs instanceof m.a,"Program: bad fragment shader"),this.defaultUniforms=r,i?(Object(u.c)(this.gl),this.varyings=i,this.gl.transformFeedbackVaryings(this.handle,i,l),this.varyingMap=a(i,l)):this.varyingMap={},this._compileAndLink(),this}},{key:"checkAttributeBindings",value:function(e){var t=e.vertexArray,n=t?t.filledLocations:this.vertexAttributes.filledLocations;for(var r in this._attributeToLocationMap){var i=this._attributeToLocationMap[r];n[i]||this._warnedLocations[i]||(g.f.warn("Program "+this.id+": Attribute "+i+":"+r+" not supplied"),this._warnedLocations[i]=!0)}return this}},{key:"reset",value:function(){this.unsetBuffers()}},{key:"use",value:function(){return this.gl.useProgram(this.handle),this}},{key:"draw",value:function(e){var t=this,n=e.drawMode,r=void 0===n?s.e.TRIANGLES:n,i=e.vertexCount,o=e.offset,a=void 0===o?0:o,f=e.start,p=e.end,h=e.isIndexed,v=void 0!==h&&h,m=e.indexType,y=void 0===m?s.e.UNSIGNED_SHORT:m,g=e.isInstanced,_=void 0!==g&&g,b=e.instanceCount,x=void 0===b?0:b,w=e.vertexArray,E=void 0===w?null:w,S=e.transformFeedback,T=void 0===S?null:S,A=e.uniforms,O=void 0===A?{}:A,P=e.samplers,C=void 0===P?{}:P,k=e.parameters,R=void 0===k?{}:k;return E=E||c.a.getDefaultArray(this.gl),E.bind(function(){if(t.gl.useProgram(t.handle),T){var e=Object(d.b)({drawMode:r});T.begin(e)}t.setUniforms(O,C),Object(l.c)(t.gl,R,function(){v&&_?t.ext.drawElementsInstanced(r,i,y,a,x):v&&Object(u.h)(t.gl)&&!isNaN(f)&&!isNaN(p)?t.gl.drawElementsRange(r,f,p,i,y,a):v?t.gl.drawElements(r,i,y,a):_?t.ext.drawArraysInstanced(r,a,i,x):t.gl.drawArrays(r,a,i)}),T&&T.end()}),this}},{key:"setBuffers",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.clear,r=void 0===n||n,i=t.drawParams,o=void 0===i?{}:i;r&&this.vertexAttributes.clearBindings(),o.isInstanced=!1,o.isIndexed=!1,o.indexType=null;for(var a=this._sortBuffersByLocation(e),s=a.locations,u=a.elements,l=0;l<s.length;++l){var c=s[l],f=e[c];if(f)if(f instanceof y.a){var p=f.layout.instanced?1:0;this.vertexAttributes.setBuffer({location:l,buffer:f}),this.vertexAttributes.setDivisor(l,p),o.isInstanced=f.layout.instanced>0,this.vertexAttributes.enable(l)}else this.vertexAttributes.setGeneric({location:l,array:f}),this.vertexAttributes.disable(l,!0);else this.vertexAttributes.disable(l)}if(u){var h=e[u];h.bind(),o.isIndexed=!0,o.indexType=h.layout.type}return this}},{key:"unsetBuffers",value:function(){for(var e=this._attributeCount,t=1;t<e;++t)this.vertexAttributes.disable(t);return this.gl.bindBuffer(s.e.ELEMENT_ARRAY_BUFFER,null),this}},{key:"setUniforms",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var n in e){var r=e[n],i=this._uniformSetters[n],o=t[n];if(i)if(r instanceof h.a&&(r=r.texture),r instanceof p.a){void 0===i.textureIndex&&(i.textureIndex=this._textureIndexCounter++);var a=r,s=i.textureIndex;a.bind(s),o&&o.bind(s),i(s)}else i(r)}return this}},{key:"getAttributeCount",value:function(){return this._getParameter(s.e.ACTIVE_ATTRIBUTES)}},{key:"getAttributeLocation",value:function(e){return this.gl.getAttribLocation(this.handle,e)}},{key:"getAttributeInfo",value:function(e){return this.gl.getActiveAttrib(this.handle,e)}},{key:"getUniformCount",value:function(){return this._getParameter(s.e.ACTIVE_UNIFORMS)}},{key:"getUniformInfo",value:function(e){return this.gl.getActiveUniform(this.handle,e)}},{key:"getUniformLocation",value:function(e){return this.gl.getUniformLocation(this.handle,e)}},{key:"getUniformValue",value:function(e){return this.gl.getUniform(this.handle,e)}},{key:"getVarying",value:function(e,t){return this.gl.getTransformFeedbackVarying(e,t)}},{key:"getFragDataLocation",value:function(e){return Object(u.c)(this.gl),this.gl.getFragDataLocation(this.handle,e)}},{key:"getAttachedShaders",value:function(){return this.gl.getAttachedShaders(this.handle)}},{key:"_compileAndLink",value:function(){var e=this.gl;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),g.f.time(3,"linkProgram for "+this._getName()),e.linkProgram(this.handle),g.f.timeEnd(3,"linkProgram for "+this._getName()),e.debug||g.f.priority>0){e.validateProgram(this.handle);if(!e.getProgramParameter(this.handle,e.LINK_STATUS))throw new Error("Error linking "+e.getProgramInfoLog(this.handle))}this._queryAttributeLocations(),this._queryUniformLocations()}},{key:"_sortBuffersByLocation",value:function(e){var t=null,n=[];if(Object(g.d)(e))return{locations:n,elements:t};n=new Array(this._attributeCount);for(var r in e){var i=e[r],o=this._attributeToLocationMap[r];if(void 0===o){if(i.target===s.e.ELEMENT_ARRAY_BUFFER&&t)throw new Error(this._print(r)+" duplicate GL.ELEMENT_ARRAY_BUFFER");i.target===s.e.ELEMENT_ARRAY_BUFFER?t=r:this._warnedLocations[o]||(g.f.log(2,this._print(r)+" not used"),this._warnedLocations[o]=!0)}else{if(i.target===s.e.ELEMENT_ARRAY_BUFFER)throw new Error(this._print(r)+":"+o+" has both location and type gl.ELEMENT_ARRAY_BUFFER");n[o]=r}}return{locations:n,elements:t}}},{key:"_areAllAttributesEnabled",value:function(){for(var e=this._attributeCount,t=0;t<e;++t)if(!this.vertexAttributes.isEnabled(t))return!1;return!0}},{key:"_print",value:function(e){return"Program "+this.id+": Attribute "+e}},{key:"_createHandle",value:function(){return this.gl.createProgram()}},{key:"_deleteHandle",value:function(){this.gl.deleteProgram(this.handle)}},{key:"_getName",value:function(){var e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?e+"-program":"program"}},{key:"_getOptionsFromHandle",value:function(e){var t=this.gl.getAttachedShaders(e),n={},r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var l=a.value;switch(this.gl.getShaderParameter(this.handle,s.e.SHADER_TYPE)){case s.e.VERTEX_SHADER:n.vs=new m.c({handle:l});break;case s.e.FRAGMENT_SHADER:n.fs=new m.a({handle:l})}}}catch(e){i=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}},{key:"_getParameter",value:function(e){return this.gl.getProgramParameter(this.handle,e)}},{key:"_queryAttributeLocations",value:function(){this._attributeToLocationMap={},this._attributeCount=this.getAttributeCount();for(var e=0;e<this._attributeCount;e++){var t=this.getAttributeInfo(e).name;this._attributeToLocationMap[t]=this.getAttributeLocation(t)}this._warnedLocations={}}},{key:"_queryUniformLocations",value:function(){var e=this.gl;this._uniformSetters={},this._uniformCount=this.getUniformCount();for(var t=0;t<this._uniformCount;t++){var n=this.getUniformInfo(t),r=Object(v.e)(n.name),i=this.getUniformLocation(r.name);this._uniformSetters[r.name]=Object(v.c)(e,i,n,r.isArray)}this._textureIndexCounter=0}},{key:"_setId",value:function(e){if(!e){var t=this._getName();this.id=Object(g.h)(t)}}}]),t}(f.a);t.a=w},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"b",function(){return m}),n.d(t,"c",function(){return y}),n.d(t,"a",function(){return g});var a=n(37),s=n(4),u=n(19),l=n(5),c=n(1),f=n.n(c),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h="Shader: GLSL source code must be a JavaScript string",d=35632,v=35633,m=function(e){function t(e,n,o){r(this,t),Object(s.d)(e),f()("string"===typeof n,h);var u=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,{id:Object(a.e)(n)||Object(l.h)(t.getTypeName(o))}));return u.shaderType=o,u.source=n,u.opts.source=n,u.initialize(u.opts),u}return o(t,e),p(t,null,[{key:"getTypeName",value:function(e){switch(e){case v:return"vertex-shader";case d:return"fragment-shader";default:return f()(!1),"unknown"}}}]),p(t,[{key:"initialize",value:function(e){var t=e.source,n=Object(a.e)(t);n&&(this.id=Object(l.h)(n)),this._compile(t),this.opts.source=t}},{key:"getParameter",value:function(e){return this.gl.getShaderParameter(this.handle,e)}},{key:"toString",value:function(){return this.getTypeName(this.shaderType)+":"+this.id}},{key:"getName",value:function(){return Object(a.e)(this.opts.source)||"unnamed-shader"}},{key:"getSource",value:function(){return this.gl.getShaderSource(this.handle)}},{key:"getTranslatedSource",value:function(){var e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}},{key:"_compile",value:function(){if(this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){var e=this.gl.getShaderInfoLog(this.handle),t=Object(a.f)(e,this.source,this.shaderType),n=t.shaderName,r=t.errors,i=t.warnings;throw l.f.error("GLSL compilation errors in "+n+"\n"+r),l.f.warn("GLSL compilation warnings in "+n+"\n"+i),new Error("GLSL compilation errors in "+n)}}},{key:"_deleteHandle",value:function(){this.gl.deleteShader(this.handle)}},{key:"_getOptsFromHandle",value:function(){return{type:this.getParameter(35663),source:this.getSource()}}}]),t}(u.a),y=function(e){function t(e,n){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,v))}return o(t,e),p(t,[{key:"_createHandle",value:function(){return this.gl.createShader(v)}}]),t}(m),g=function(e){function t(e,n){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,d))}return o(t,e),p(t,[{key:"_createHandle",value:function(){return this.gl.createShader(d)}}]),t}(m)},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(39),u=n(113),l=n(29),c=n(198),f=n(5),p=n(413),h=n(416),d=n(419),v=n(196),m=n(1),y=n.n(m),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_=["renderPickingBuffer","pickingEnabled"],b=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return y()(Object(s.isWebGL)(e)),r.gl=e,r.init(n),r}return a(t,e),g(t,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.vs,n=void 0===t?null:t,r=e.fs,i=void 0===r?null:r,o=e.modules,a=void 0===o?null:o,u=e.defines,c=void 0===u?{}:u,f=e.moduleSettings,p=void 0===f?{}:f,h=e.defaultUniforms,d=e.program,m=void 0===d?null:d,g=e.shaderCache,_=void 0===g?null:g,b=e.isInstanced,x=void 0!==b&&b,w=e.instanced,E=e.vertexCount,S=void 0===E?void 0:E,T=e.instanceCount,A=void 0===T?0:T,O=e.drawMode,P=e.uniforms,C=void 0===P?{}:P,k=e.attributes,R=void 0===k?{}:k,M=e.geometry,I=void 0===M?null:M,L=e.pickable,D=void 0===L||L,N=e.pick,F=void 0===N?null:N,j=(e.render,e.onBeforeRender),B=void 0===j?function(){}:j,z=e.onAfterRender,U=void 0===z?function(){}:z,V=e.varyings,G=void 0===V?null:V,W=e.bufferMode,H=void 0===W?s.GL.SEPARATE_ATTRIBS:W,X=e.timerQueryEnabled,q=void 0!==X&&X;this._initializeProgram({vs:n,fs:i,modules:a,defines:c,moduleSettings:p,defaultUniforms:h,program:m,shaderCache:_,varyings:G,bufferMode:H}),this.uniforms={},C=Object.assign({},this.program.defaultUniforms,C),this.setUniforms(C),this.setUniforms(this.getModuleUniforms()),this.setUniforms(this.getModuleUniforms(p)),w&&(console.warn('Warning: Model constructor: parameter "instanced" renamed to "isInstanced".\nThis will become a hard error in a future version of luma.gl.'),x=x||w),this.buffers={},this.samplers={},this.userData={},this.drawParams={},this.dynamic=!1,this.needsRedraw=!0,I&&this.setGeometry(I),this.attributes={},this.setAttributes(R),void 0!==O&&(this.drawMode=Object(l.b)(O)),void 0!==S&&(this.vertexCount=S),this.isInstanced=x,this.instanceCount=A,this.pickable=Boolean(D),this.pick=F||function(){return!1},this.onBeforeRender=B,this.onAfterRender=U,y()(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount"),this.timerQueryEnabled=q&&v.a.isSupported(this.gl,{timer:!0}),this.timeElapsedQuery=void 0,this.lastQueryReturned=!0,this.stats={accumulatedFrameTime:0,averageFrameTime:0,profileFrameCount:0}}},{key:"delete",value:function(){this.program.delete(),Object(d.d)(this.id)}},{key:"destroy",value:function(){this.delete()}},{key:"setNeedsRedraw",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=e,this}},{key:"getNeedsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.clearRedrawFlags,n=void 0!==t&&t,r=!1;return r=r||this.needsRedraw,this.needsRedraw=this.needsRedraw&&!n,r=r||this.geometry.getNeedsRedraw({clearRedrawFlags:n})}},{key:"setDrawMode",value:function(e){return this.drawMode=Object(l.b)(e),this}},{key:"getDrawMode",value:function(){return this.drawMode}},{key:"setVertexCount",value:function(e){return y()(Number.isFinite(e)),this.vertexCount=e,this}},{key:"getVertexCount",value:function(){return this.vertexCount}},{key:"setInstanceCount",value:function(e){return y()(Number.isFinite(e)),this.instanceCount=e,this}},{key:"getInstanceCount",value:function(){return this.instanceCount}},{key:"getProgram",value:function(){return this.program}},{key:"setGeometry",value:function(e){return this.geometry=e,this.vertexCount=e.getVertexCount(),this.drawMode=e.drawMode,this._createBuffersFromAttributeDescriptors(this.geometry.getAttributes()),this.setNeedsRedraw(),this}},{key:"getAttributes",value:function(){return this.attributes}},{key:"setAttributes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(f.d)(e)?this:(Object.assign(this.attributes,e),this._createBuffersFromAttributeDescriptors(e),this.setNeedsRedraw(),this)}},{key:"getUniforms",value:function(){return this.uniforms}},{key:"setUniforms",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!1;for(var n in e)if(!Object(u.a)(this.uniforms[n],e[n])){t=!0;break}return t&&(Object(s.checkUniformValues)(e,this.id),Object.assign(this.uniforms,e),this.setNeedsRedraw()),this}},{key:"updateModuleSettings",value:function(e){var t=this.getModuleUniforms(e);return this.setUniforms(t)}},{key:"draw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.moduleSettings,n=void 0===t?null:t,r=e.uniforms,i=void 0===r?{}:r,o=e.attributes,a=void 0===o?{}:o,s=e.samplers,u=void 0===s?{}:s,l=e.parameters,c=void 0===l?{}:l,p=e.settings,h=e.framebuffer,d=void 0===h?null:h,v=e.vertexArray,m=void 0===v?null:v,y=e.transformFeedback,g=void 0===y?null:y;return p&&(f.f.deprecated("settings","parameters"),c=p),n&&this.updateModuleSettings(n),d&&(c=Object.assign(c,{framebuffer:d})),this.render(i,a,u,g,c,m),d&&d.log({priority:2,message:"Rendered to "+d.id}),this}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;Object(d.a)(this);var a=this.addViewUniforms(e);Object(d.b)(this.id,a),this.setUniforms(a),this.setAttributes(t),Object.assign(this.samplers,n),f.f.group(2,">>> RENDERING MODEL "+this.id,{collapsed:f.f.priority<=2}),this.setProgramState({vertexArray:o}),this._logAttributesAndUniforms(2,a),this.onBeforeRender();var s=this.drawParams;s.isInstanced&&!this.isInstanced&&f.f.warn("Found instanced attributes on non-instanced model");var u=s.isIndexed,l=s.indexType,c=this.isInstanced,p=this.instanceCount;return this._timerQueryStart(),this.program.draw({parameters:i,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:o,transformFeedback:r,isIndexed:u,indexType:l,isInstanced:c,instanceCount:p}),this._timerQueryEnd(),this.onAfterRender(),this.unsetProgramState(),this.setNeedsRedraw(!1),f.f.groupEnd(2,">>> RENDERING MODEL "+this.id),this}},{key:"setProgramState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.vertexArray,n=void 0===t?null:t,r=this.program;return r.use(),this.drawParams={},r.setBuffers(this.buffers,{drawParams:this.drawParams}),r.checkAttributeBindings({vertexArray:n}),r.setUniforms(this.uniforms,this.samplers),this}},{key:"unsetProgramState",value:function(){return this.program.unsetBuffers(),this}},{key:"addViewUniforms",value:function(e){var t=e.camera,n=e.viewMatrix,r=e.modelMatrix,i=t?t.getUniforms():{},o=n?this.getCoordinateUniforms(n,r):{};return Object.assign({},e,i,o)}},{key:"_initializeProgram",value:function(e){var t=e.vs,n=e.fs,r=e.modules,i=e.defines,o=(e.moduleSettings,e.defaultUniforms,e.program),a=e.shaderCache,u=e.varyings,l=e.bufferMode;if(this.getModuleUniforms=function(e){},!o){t||(t=p.a.vs),n||(n=p.a.fs);var c=Object(h.a)(this.gl,{vs:t,fs:n,modules:r,defines:i});t=c.vs,n=c.fs,o=a?a.getProgram(this.gl,{vs:t,fs:n,id:this.id}):new s.Program(this.gl,{vs:t,fs:n,varyings:u,bufferMode:l});var f=c.getUniforms;this.getModuleUniforms=f||function(e){}}this.program=o,y()(this.program instanceof s.Program,"Model needs a program")}},{key:"_checkForDeprecatedUniforms",value:function(e){_.forEach(function(t){t in e&&f.f.deprecated(t,"use picking shader module and Model class updateModuleSettings()")})}},{key:"_timerQueryStart",value:function(){!0===this.timerQueryEnabled&&(this.timeElapsedQuery||(this.timeElapsedQuery=new v.a(this.gl)),this.lastQueryReturned&&(this.lastQueryReturned=!1,this.timeElapsedQuery.beginTimeElapsedQuery()))}},{key:"_timerQueryEnd",value:function(){if(!0===this.timerQueryEnabled&&(this.timeElapsedQuery.end(),this.timeElapsedQuery.isResultAvailable())){this.lastQueryReturned=!0;var e=this.timeElapsedQuery.getResult();this.stats.lastFrameTime=e,this.stats.accumulatedFrameTime+=e,this.stats.profileFrameCount++,this.stats.averageFrameTime=this.stats.accumulatedFrameTime/this.stats.profileFrameCount,f.f.log(2,"GPU time "+this.program.id+": "+this.stats.lastFrameTime+"ms average "+this.stats.averageFrameTime+"ms accumulated: "+this.stats.accumulatedFrameTime+"ms count: "+this.stats.profileFrameCount)}}},{key:"_createBuffersFromAttributeDescriptors",value:function(e){var t=this.program.gl;for(var n in e){var r=e[n];if(r instanceof s.Buffer)this.buffers[n]=r;else if(r.isGeneric)this.buffers[n]=r.value;else{this.buffers[n]=this.buffers[n]||new s.Buffer(t,{target:r.isIndexed?s.GL.ELEMENT_ARRAY_BUFFER:s.GL.ARRAY_BUFFER});var i=this.buffers[n];i.setData({data:r.value}).setDataLayout(r)}}return this}},{key:"_logAttributesAndUniforms",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(f.f.priority>=e){var n=this._getAttributesTable({header:this.id+" attributes",program:this.program,attributes:Object.assign({},this.geometry.attributes,this.attributes)});f.f.table(e,n);var r=Object(u.d)({header:this.id+" uniforms",program:this.program,uniforms:Object.assign({},this.uniforms,t)}),i=r.table,o=r.unusedTable,a=r.unusedCount;f.f.table(e,i),f.f.log(e,(a||"No")+" unused uniforms ",o)}else{var s=Object(u.d)({header:this.id+" uniforms",program:this.program,uniforms:Object.assign({},this.uniforms,t),undefinedOnly:!0}),l=s.table;s.count>0&&f.f.table(e,l)}Object(d.c)(this,t)}},{key:"_getAttributesTable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.attributes,n=e.header,r=void 0===n?"Attributes":n,i=(e.instanced,e.program);y()(i);var o=i._attributeLocations,a={};for(var s in o){var u=t[s],l=o[s];a[s]=this._getAttributeEntry(u,l,r)}for(var c in t){var f=t[c];a[c]||(a[c]=this._getAttributeEntry(f,null,r))}return a}},{key:"_getAttributeEntry",value:function(e,t,n){var i=function(e){return Math.round(10*e)/10},o="NOT PROVIDED",a=0,u="N/A",l="N/A",c="N/A",p="N/A";if(e&&null===t&&(t=e.isIndexed?"ELEMENT_ARRAY_BUFFER":"NOT USED"),e instanceof s.Buffer){var h=e;o=h.layout.type,a=h.layout.instanced,u=h.layout.size,l=i(h.data.length/h.layout.size),c=h.data.length*h.data.BYTES_PER_ELEMENT}else e&&(o=e.value.constructor.name,a=e.instanced,u=e.size,l=i(e.value.length/e.size),c=e.value.length*e.value.BYTES_PER_ELEMENT,p=e.value);o=String(o).replace("Array","");var d=-1!==o.indexOf("nt");return r({"Inst/Verts/Comps/Bytes/Type/Loc":(a?"I ":"P ")+" "+l+" (x"+u+"="+c+" "+o+") loc="+t},n,Object(f.b)(p,{size:u,isInteger:d}))}},{key:"isPickable",value:function(){return this.pickable}},{key:"setPickable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.pickable=Boolean(e),this}},{key:"getGeometry",value:function(){return this.geometry}},{key:"varyingMap",get:function(){return this.program.varyingMap}}]),t}(c.a);t.a=b},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(29),s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);for(var n=e.bottomRadius,o=void 0===n?0:n,a=e.topRadius,s=void 0===a?0:a,u=e.height,l=void 0===u?1:u,c=e.nradial,f=void 0===c?10:c,p=e.nvertical,h=void 0===p?10:p,d=e.topCap,v=void 0!==d&&d,m=e.bottomCap,y=void 0!==m&&m,g=(v?2:0)+(y?2:0),_=(f+1)*(h+1+g),b=Math.atan2(o-s,l),x=Math.sin,w=Math.cos,E=Math.PI,S=w(b),T=x(b),A=v?-2:0,O=h+(y?2:0),P=f+1,C=new Float32Array(3*_),k=new Float32Array(3*_),R=new Float32Array(2*_),M=new Uint16Array(f*(h+g)*6),I=0,L=0,D=A;D<=O;D++){var N=D/h,F=l*N,j=void 0;D<0?(F=0,N=1,j=o):D>h?(F=l,N=1,j=s):j=o+D/h*(s-o),-2!==D&&D!==h+2||(j=0,N=0),F-=l/2;for(var B=0;B<P;B++){var z=x(B*E*2/f),U=w(B*E*2/f);C[I+0]=z*j,C[I+1]=F,C[I+2]=U*j,k[I+0]=D<0||D>h?0:z*S,k[I+1]=D<0?-1:D>h?1:T,k[I+2]=D<0||D>h?0:U*S,R[L+0]=B/f,R[L+1]=N,L+=2,I+=3}}for(var V=0;V<h+g;V++)for(var G=0;G<f;G++){var W=6*(V*f+G);M[W+0]=P*(V+0)+0+G,M[W+1]=P*(V+0)+1+G,M[W+2]=P*(V+1)+1+G,M[W+3]=P*(V+0)+0+G,M[W+4]=P*(V+1)+1+G,M[W+5]=P*(V+1)+0+G}return i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Object.assign({},e,{attributes:{positions:C,normals:k,texCoords:R,indices:M}})))}return o(t,e),t}(a.a);t.a=s},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;return e.viewport?Object(s.a)(e):{}}var i=n(6),o=n(448),a=n(449),s=n(450),u={};t.a={name:"project",dependencies:[i.m],vs:""+o.a+a.a,getUniforms:r,deprecations:[{type:"uniform vec3",old:"selectedPickingColor",new:"luma.gl's picking module"},{type:"uniform float",old:"renderPickingBuffer",new:"luma.gl's picking module"},{type:"uniform float",old:"pickingEnabled",new:"luma.gl's picking module"},{type:"uniform float",old:"projectionMode",new:"project_uCoordinateSystem"},{type:"uniform vec4",old:"projectionCenter",new:"project_uCenter"},{type:"uniform vec2",old:"projectionOrigin"},{type:"uniform mat4",old:"modelMatrix",new:"project_uModelMatrix"},{type:"uniform mat4",old:"viewMatrix"},{type:"uniform mat4",old:"projectionMatrix",new:"project_uViewProjectionMatrix"},{type:"uniform vec3",old:"projectionPixelsPerUnit",new:"project_uPixelsPerUnit"},{type:"uniform float",old:"projectionScale",new:"project_uScale"},{type:"uniform vec2",old:"viewportSize",new:"project_uViewportSize"},{type:"uniform float",old:"devicePixelRatio",new:"project_uDevicePixelRatio"},{type:"uniform vec3",old:"cameraPos",new:"project_uCameraPosition"},{type:"function",old:"scale",new:"project_scale",deprecated:1},{type:"function",old:"preproject",new:"project_position",deprecated:1},{type:"function",old:"project",new:"project_to_clipspace",deprecated:1}]}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,n){return e<t?t:e>n?n:e}n.d(t,"a",function(){return h});var s=n(221),u=n(21),l=n(1),c=n.n(l),f=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h={minZoom:0,maxZoom:20,minPitch:0,maxPitch:60},d={pitch:0,bearing:0,altitude:1.5},v=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.width,o=e.height,a=e.latitude,s=e.longitude,u=e.zoom,l=e.bearing,f=void 0===l?d.bearing:l,p=e.pitch,v=void 0===p?d.pitch:p,m=e.altitude,y=void 0===m?d.altitude:m,g=e.maxZoom,_=void 0===g?h.maxZoom:g,b=e.minZoom,x=void 0===b?h.minZoom:b,w=e.maxPitch,E=void 0===w?h.maxPitch:w,S=e.minPitch,T=void 0===S?h.minPitch:S,A=e.startPanLngLat,O=e.startZoomLngLat,P=e.startBearing,C=e.startPitch,k=e.startZoom;r(this,t),c()(Number.isFinite(s),"`longitude` must be supplied"),c()(Number.isFinite(a),"`latitude` must be supplied"),c()(Number.isFinite(u),"`zoom` must be supplied");var R=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{width:n,height:o,latitude:a,longitude:s,zoom:u,bearing:f,pitch:v,altitude:y,maxZoom:_,minZoom:x,maxPitch:E,minPitch:T}));return R._interactiveState={startPanLngLat:A,startZoomLngLat:O,startBearing:P,startPitch:C,startZoom:k},R}return o(t,e),p(t,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"panStart",value:function(e){var t=e.pos;return this._getUpdatedState({startPanLngLat:this._unproject(t)})}},{key:"pan",value:function(e){var t=e.pos,n=e.startPos,r=this._interactiveState.startPanLngLat||this._unproject(n);if(!r)return this;var i=this._calculateNewLngLat({startPanLngLat:r,pos:t}),o=f(i,2),a=o[0],s=o[1];return this._getUpdatedState({longitude:a,latitude:s})}},{key:"panEnd",value:function(){return this._getUpdatedState({startPanLngLat:null})}},{key:"rotateStart",value:function(e){e.pos;return this._getUpdatedState({startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function(e){var t=e.deltaScaleX,n=void 0===t?0:t,r=e.deltaScaleY,i=void 0===r?0:r,o=this._interactiveState,a=o.startBearing,s=o.startPitch;if(!Number.isFinite(a)||!Number.isFinite(s))return this;var u=this._calculateNewPitchAndBearing({deltaScaleX:n,deltaScaleY:i,startBearing:a,startPitch:s}),l=u.pitch,c=u.bearing;return this._getUpdatedState({bearing:c,pitch:l})}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function(e){var t=e.pos;return this._getUpdatedState({startZoomLngLat:this._unproject(t),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(e){var t=e.pos,n=e.startPos,r=e.scale;c()(r>0,"`scale` must be a positive number");var i=this._interactiveState,o=i.startZoom,a=i.startZoomLngLat;Number.isFinite(o)||(o=this._viewportProps.zoom,a=this._unproject(n)||this._unproject(t)),c()(a,"`startZoomLngLat` prop is required for zoom behavior to calculate where to position the map.");var s=this._calculateNewZoom({scale:r,startZoom:o}),l=new u.a(Object.assign({},this._viewportProps,{zoom:s})),p=l.getLocationAtPoint({lngLat:a,pos:t}),h=f(p,2),d=h[0],v=h[1];return this._getUpdatedState({zoom:s,longitude:d,latitude:v})}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}},{key:"zoomIn",value:function(){return this._zoomFromCenter(2)}},{key:"zoomOut",value:function(){return this._zoomFromCenter(.5)}},{key:"moveLeft",value:function(){return this._panFromCenter([100,0])}},{key:"moveRight",value:function(){return this._panFromCenter([-100,0])}},{key:"moveUp",value:function(){return this._panFromCenter([0,100])}},{key:"moveDown",value:function(){return this._panFromCenter([0,-100])}},{key:"rotateLeft",value:function(){return this._getUpdatedState({bearing:this._viewportProps.bearing-15})}},{key:"rotateRight",value:function(){return this._getUpdatedState({bearing:this._viewportProps.bearing+15})}},{key:"rotateUp",value:function(){return this._getUpdatedState({pitch:this._viewportProps.pitch+10})}},{key:"rotateDown",value:function(){return this._getUpdatedState({pitch:this._viewportProps.pitch-10})}},{key:"_zoomFromCenter",value:function(e){var t=this._viewportProps,n=t.width,r=t.height;return this.zoom({pos:[n/2,r/2],scale:e})}},{key:"_panFromCenter",value:function(e){var t=this._viewportProps,n=t.width,r=t.height;return this.pan({startPos:[n/2,r/2],pos:[n/2+e[0],r/2+e[1]]})}},{key:"_getUpdatedState",value:function(e){return new t(Object.assign({},this._viewportProps,this._interactiveState,e))}},{key:"_applyConstraints",value:function(e){var t=e.maxZoom,n=e.minZoom,r=e.zoom;e.zoom=a(r,n,t);var i=e.maxPitch,o=e.minPitch,s=e.pitch;return e.pitch=a(s,o,i),Object.assign(e,Object(u.j)(e)),e}},{key:"_unproject",value:function(e){var t=new u.a(this._viewportProps);return e&&t.unproject(e)}},{key:"_calculateNewLngLat",value:function(e){var t=e.startPanLngLat,n=e.pos;return new u.a(this._viewportProps).getMapCenterByLngLatPosition({lngLat:t,pos:n})}},{key:"_calculateNewZoom",value:function(e){var t=e.scale,n=e.startZoom,r=this._viewportProps,i=r.maxZoom,o=r.minZoom;return a(n+Math.log2(t),o,i)}},{key:"_calculateNewPitchAndBearing",value:function(e){var t=e.deltaScaleX,n=e.deltaScaleY,r=e.startBearing,i=e.startPitch;n=a(n,-1,1);var o=this._viewportProps,s=o.minPitch,u=o.maxPitch,l=r+180*t,c=i;return n>0?c=i+n*(u-i):n<0&&(c=i-n*(s-i)),{pitch:c,bearing:l}}}]),t}(s.a);t.b=v},function(e,t,n){"use strict";function r(e,t,n){return Array.isArray(e)?e.map(function(e,i){return r(e,t[i],n)}):n*t+(1-n)*e}function i(e){return Number.isFinite(e)||Array.isArray(e)}function o(e){return c[e]}function a(e,t,n){return o(e)&&Math.abs(n-t)>180&&(n=n<0?n+360:n-360),n}function s(e){var t={};return l.forEach(function(n){var r=e[n];i(r)&&(t[n]=r,o(n)&&(t[n]=Object(u.c)(r+180,360)-180))}),t}t.d=r,t.c=i,t.b=a,t.a=s;var u=n(121),l=["width","height","longitude","latitude","zoom","bearing","pitch","position"],c={longitude:1,bearing:1}},function(e,t,n){"use strict";var r=function(e,t,n,r,i,o,a,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,o,a,s],c=0;u=new Error(t.replace(/%s/g,function(){return l[c++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}};e.exports=r},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,o.default)();try{return e.activeElement}catch(e){}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(242),o=function(e){return e&&e.__esModule?e:{default:e}}(i);e.exports=t.default},function(e,t){function n(e,t){var n=!0;return Array.isArray(t)&&(n="after"!==t[0],t=t[1]),e?function(){n&&t.apply(this,arguments),e.apply(this,arguments),!n&&t.apply(this,arguments)}:t}var r={componentWillMount:!0,componentDidMount:!0,componentWillReceiveProps:!0,shouldComponentUpdate:!0,componentWillUpdate:!0,componentDidUpdate:!0,componentWillUnmount:!0};e.exports=function(e,t){var i=Object.create(null);for(var o in t)r[o]&&(e[o]=n(i[o]=e[o],t[o]));return function(t){if(t&&{}.hasOwnProperty.call(i,t))e[t]=i[t];else for(var t in i)e[t]=i[t]}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}t.__esModule=!0,t.default=void 0;var s=r(n(3)),u=r(n(2)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),c=r(n(244)),f=n(7),p=function(e){function t(){return e.apply(this,arguments)||this}a(t,e);var n=t.prototype;return n.shouldComponentUpdate=function(e){return!!e.shouldUpdate},n.render=function(){var e=this.props,t=e.className,n=e.children,r=o(e,["className","children"]);return delete r.shouldUpdate,(0,l.cloneElement)(n,i({},r,{className:(0,s.default)(t,n.props.className,"rw-popup")}))},t}(l.default.Component);p.propTypes={shouldUpdate:function(){}};var h=function(e){function t(){return e.apply(this,arguments)||this}return a(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.dropUp,r=e.open,a=e.transition,u=o(e,["className","dropUp","open","transition"]);return l.default.createElement(a,i({},u,{in:r,dropUp:n,className:(0,s.default)(t,"rw-popup-container"),__source:{fileName:"src/Popup.js",lineNumber:48},__self:this}),l.default.createElement(p,{shouldUpdate:r,__source:{fileName:"src/Popup.js",lineNumber:54},__self:this},l.default.Children.only(this.props.children)))},t}(l.default.Component);h.defaultProps={open:!1,transition:c.default},h.propTypes={open:u.default.bool,dropUp:u.default.bool,onEntering:u.default.func,onEntered:u.default.func,transition:f.elementType};var d=h;t.default=d,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=(0,u.default)(e);return n?n.innerHeight:t?e.clientHeight:(0,a.default)(e).height}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(251),a=r(o),s=n(92),u=r(s);e.exports=t.default},function(e,t,n){"use strict";function r(e){return e===e.window?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}function o(e){return!1===e?null:!0===e?"startsWith":e||"eq"}function a(e){var t=e.filter,n=e.caseSensitive,r=void 0!==n&&n,i=e.textField;return"function"!==typeof(t=o(t))&&t?(t=d[t],function(e,n){var o=(0,h.dataText)(e,i);return r||(o=o.toLowerCase(),n=n.toLowerCase()),t(o,n)}):t}function s(e){var t=i({},e);return t.minLengh=t.minLengh||0,t.filter=a(t),t}function u(e,t){var n=t.searchTerm,i=void 0===n?"":n,o=r(t,["searchTerm"]),a=s(o),u=a.filter,l=a.minLength;if(!u||!i||!i.trim()||i.length<l)return-1;for(var c=0;c<e.length;c++)if(u(e[c],i,c))return c;return-1}function l(e,t){var n=t.searchTerm,i=void 0===n?"":n,o=r(t,["searchTerm"]),a=s(o),u=a.filter,l=a.minLength;return!u||!i||!i.trim()||i.length<l?e:e.filter(function(e,t){return u(e,i,t)})}function c(e,t){var n=t.searchTerm,i=void 0===n?"":n,o=r(t,["searchTerm"]),a=s(o),u=a.filter,l=a.minLength;if(!u||!i||!i.trim()||i.length<l)return i;for(var c=0;c<e.length;c++)if(u(e[c],i,c))return e[c];return i}t.__esModule=!0,t.indexOf=u,t.filter=l,t.suggest=c,t.propTypes=t.presets=void 0;var f=function(e){return e&&e.__esModule?e:{default:e}}(n(2)),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(7)),h=n(94),d={eq:function(e,t){return e===t},neq:function(e,t){return e!==t},gt:function(e,t){return e>t},gte:function(e,t){return e>=t},lt:function(e,t){return e<t},lte:function(e,t){return e<=t},contains:function(e,t){return-1!==e.indexOf(t)},startsWith:function(e,t){return 0===e.lastIndexOf(t,0)},endsWith:function(e,t){var n=e.length-t.length,r=e.indexOf(t,n);return-1!==r&&r===n}};t.presets=d;var v={textField:p.accessor,caseSensitive:f.default.bool,minLength:f.default.number,filter:f.default.oneOfType([f.default.func,f.default.bool,f.default.oneOf(Object.keys(d))])};t.propTypes=v},function(e,t,n){"use strict";function r(e,t,n){for(var r=-1;++r<e.length;){var o=e[r];if(o===t||function(e){return i(t,e,n)}(o))return r}return-1}function i(e,t,n){return(0,a.isShallowEqual)(s(e,n),s(t,n))}function o(e,t,n){var i=r(e,t,n);return-1!==i?e[i]:t}t.__esModule=!0,t.dataIndexOf=r,t.valueMatcher=i,t.dataItem=o,t.dataText=t.dataValue=void 0;var a=n(23),s=function(e,t){var n=e;return"function"===typeof t?n=t(e):null==e?n=e:"string"===typeof t&&"object"===typeof e&&t in e&&(n=e[t]),n};t.dataValue=s;var u=function(e,t){var n=s(e,t);return null==n?"":n+""};t.dataText=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}function a(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function s(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function u(e,t,n){return p.default.max(p.default.min(e,n),t)}t.__esModule=!0,t.default=void 0;var l=r(n(0)),c=r(n(2)),f=r(n(3)),p=r(n(34)),h="src/CalendarView.js",d=["month","year","decade","century"],v=function(e){function t(){return e.apply(this,arguments)||this}return s(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.activeId,r=a(e,["className","activeId"]);return l.default.createElement("table",o({},r,{role:"grid",tabIndex:"-1","aria-activedescendant":n||null,className:(0,f.default)(t,"rw-nav-view","rw-calendar-grid"),__source:{fileName:h,lineNumber:22},__self:this}))},t}(l.default.Component);v.propTypes={activeId:c.default.string};var m=function(e){function t(){for(var t,n,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=n=e.call.apply(e,[this].concat(o))||this,n.handleChange=function(){var e=n.props,t=e.onChange,r=e.min,i=e.max;t(u(e.date,r,i))},t||i(n)}s(t,e);var n=t.prototype;return n.isEmpty=function(){var e=this.props,t=e.unit,n=e.min,r=e.max,i=e.date;return!p.default.inRange(i,n,r,t)},n.isEqual=function(e){return p.default.eq(this.props.date,e,this.props.unit)},n.isFocused=function(){return!this.props.disabled&&!this.isEmpty()&&this.isEqual(this.props.focused)},n.isNow=function(){return this.props.now&&this.isEqual(this.props.now)},n.isOffView=function(){var e=this.props,t=e.viewUnit,n=e.focused,r=e.date;return r&&n&&t&&p.default[t](r)!==p.default[t](n)},n.isSelected=function(){return this.props.selected&&this.isEqual(this.props.selected)},n.render=function(){var e=this.props,t=e.children,n=e.activeId,r=e.label,i=e.disabled,o=i||this.isEmpty();return l.default.createElement("td",{role:"gridcell",id:this.isFocused()?n:null,title:r,"aria-label":r,"aria-readonly":i,"aria-selected":this.isSelected(),onClick:o?void 0:this.handleChange,className:(0,f.default)("rw-cell",this.isNow()&&"rw-now",o&&"rw-state-disabled",this.isEmpty()&&"rw-cell-not-allowed",this.isOffView()&&"rw-cell-off-range",this.isFocused()&&"rw-state-focus",this.isSelected()&&"rw-state-selected"),__source:{fileName:h,lineNumber:100},__self:this},t)},t}(l.default.Component);m.propTypes={id:c.default.string,activeId:c.default.string.isRequired,label:c.default.string,now:c.default.instanceOf(Date),date:c.default.instanceOf(Date),selected:c.default.instanceOf(Date),focused:c.default.instanceOf(Date),min:c.default.instanceOf(Date),max:c.default.instanceOf(Date),unit:c.default.oneOf(["day"].concat(d)),viewUnit:c.default.oneOf(d),onChange:c.default.func.isRequired,disabled:c.default.bool},v.Body=function(e){return l.default.createElement("tbody",o({className:"rw-calendar-body"},e,{__source:{fileName:h,lineNumber:124},__self:this}))},v.Row=function(e){return l.default.createElement("tr",o({role:"row",className:"rw-calendar-row"},e,{__source:{fileName:h,lineNumber:125},__self:this}))},v.Cell=m;var y=v;t.default=y,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){return t.tag=e,t}t.__=r},function(e,t,n){"use strict";function r(e){return e[1]=s[0],s[0]+=1,e}function i(){return s[0]+=1,s[0]}function o(e){var t=i(0),n=[e,t];return n.tag=248,n}function a(e){if(void 0===e)return 0;if(248===e.tag)return 1;var t=e[0];return void 0!==t?+(248===t.tag):0}var s=[0];t.caml_set_oo_id=r,t.get_id=i,t.create=o,t.isCamlExceptionOrOpenVariant=a},function(e,t,n){"use strict";(function(t){function r(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var i=n(16),o=n(293),a={"Content-Type":"application/x-www-form-urlencoded"},s={adapter:function(){var e;return"undefined"!==typeof XMLHttpRequest?e=n(147):"undefined"!==typeof t&&(e=n(147)),e}(),transformRequest:[function(e,t){return o(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(r(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)?(r(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"===typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};s.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],function(e){s.headers[e]={}}),i.forEach(["post","put","patch"],function(e){s.headers[e]=i.merge(a)}),e.exports=s}).call(t,n(27))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(69),s=n(18),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"len",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"magnitude",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"lengthSquared",value:function(){for(var e=0,t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return e}},{key:"distance",value:function(e){return Math.sqrt(this.distanceSquared(e))}},{key:"distanceSquared",value:function(e){for(var t=0,n=0;n<this.ELEMENTS;++n){var r=this[n]-e[n];t+=r*r}return Object(s.a)(t)}},{key:"dot",value:function(e){for(var t=0,n=0;n<this.ELEMENTS;++n)t+=this[n]*e[n];return Object(s.a)(t)}},{key:"normalize",value:function(){var e=this.magnitude();if(0!==e)for(var t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check()}}]),t}(a.a);t.a=l},function(e,t){function n(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}e.exports=n},function(e,t){function n(e,t){return e[0]=-t[0],e[1]=-t[1],e}e.exports=n},function(e,t){function n(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}e.exports=n},function(e,t){function n(e,t,n,r,i,o,a){var s=1/(t-n),u=1/(r-i),l=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*u,e[14]=(a+o)*l,e[15]=1,e}e.exports=n},function(e,t){function n(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],l=t[7],c=t[8],f=t[9],p=t[10],h=t[11],d=t[12],v=t[13],m=t[14],y=t[15],g=n*s-r*a,_=n*u-i*a,b=n*l-o*a,x=r*u-i*s,w=r*l-o*s,E=i*l-o*u,S=c*v-f*d,T=c*m-p*d,A=c*y-h*d,O=f*m-p*v,P=f*y-h*v,C=p*y-h*m,k=g*C-_*P+b*O+x*A-w*T+E*S;return k?(k=1/k,e[0]=(s*C-u*P+l*O)*k,e[1]=(i*P-r*C-o*O)*k,e[2]=(v*E-m*w+y*x)*k,e[3]=(p*w-f*E-h*x)*k,e[4]=(u*A-a*C-l*T)*k,e[5]=(n*C-i*A+o*T)*k,e[6]=(m*b-d*E-y*_)*k,e[7]=(c*E-p*b+h*_)*k,e[8]=(a*P-s*A+l*S)*k,e[9]=(r*A-n*P-o*S)*k,e[10]=(d*w-v*b+y*g)*k,e[11]=(f*b-c*w-h*g)*k,e[12]=(s*T-a*O-u*S)*k,e[13]=(n*O-r*T+i*S)*k,e[14]=(v*_-d*x-m*g)*k,e[15]=(c*x-f*_+p*g)*k,e):null}e.exports=n},function(e,t){function n(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[4],a=t[5],s=t[6],u=t[7],l=t[8],c=t[9],f=t[10],p=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+l*r,e[5]=a*i+c*r,e[6]=s*i+f*r,e[7]=u*i+p*r,e[8]=l*i-o*r,e[9]=c*i-a*r,e[10]=f*i-s*r,e[11]=p*i-u*r,e}e.exports=n},function(e,t,n){"use strict";var r=(n(107),n(379),n(380));n.d(t,"a",function(){return r.a})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(9),o=n(1),a=n.n(o),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(){function e(){r(this,e)}return s(e,[{key:"arePropsEqual",value:function(e,t){var n=!0,r=!1,o=void 0;try{for(var a,s=(this.propNames||[])[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value;if(!Object(i.d)(e[u],t[u]))return!1}}catch(e){r=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return!0}},{key:"initializeProps",value:function(e,t){return{start:e,end:t}}},{key:"interpolateProps",value:function(e,t,n){a()(!1,"interpolateProps is not implemented")}}]),e}();t.a=u},function(e,t,n){"use strict";function r(e){switch(ArrayBuffer.isView(e)?e.constructor:e){case Float32Array:return h;case Uint16Array:return c;case Uint32Array:return p;case Uint8Array:case Uint8ClampedArray:return u;case Int8Array:return s;case Int16Array:return l;case Int32Array:return f;default:throw new Error(y)}}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.clamped,r=void 0===n||n;switch(e){case h:return Float32Array;case c:case m:case d:case v:return Uint16Array;case p:return Uint32Array;case u:return r?Uint8ClampedArray:Uint8Array;case s:return Int8Array;case l:return Int16Array;case f:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function o(e){var t=e.data,n=e.width,r=e.height,i=e.bytesPerPixel,o=void 0===i?4:i,a=e.temp,s=n*o;a=a||new Uint8Array(s);for(var u=0;u<r/2;++u){var l=u*s,c=(r-u-1)*s;a.set(t.subarray(l,l+s)),t.copyWithin(l,c,c+s),t.set(a,c)}}function a(e){for(var t=e.data,n=e.width,r=e.height,i=Math.round(n/2),o=Math.round(r/2),a=new Uint8Array(i*o*4),s=0;s<o;s++)for(var u=0;u<i;u++)for(var l=0;l<4;l++)a[4*(s*i+u)+l]=t[4*(2*s*n+2*u)+l];return{data:a,width:i,height:o}}t.b=r,t.c=i,t.a=o,t.d=a;var s=5120,u=5121,l=5122,c=5123,f=5124,p=5125,h=5126,d=32819,v=32820,m=33635,y="Failed to deduce GL constant from typed array"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=e[t].bind(e);e[t]=function(){var t=arguments.length<=0?void 0:arguments[0];return t in e.state.cache||(e.state.cache[t]=n.apply(void 0,arguments)),e.state.enable?e.state.cache[t]:n.apply(void 0,arguments)},Object.defineProperty(e[t],"name",{value:t+"-from-cache",configurable:!1})}function a(e,t,n){var r=e[t].bind(e);e[t]=function(){for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];var s=n.apply(void 0,[e.state._updateCache].concat(o)),u=s.valueChanged,l=s.oldValue;if(u){var c;(c=e.state).log.apply(c,["gl."+t].concat(o)),r.apply(void 0,o)}return l},Object.defineProperty(e[t],"name",{value:t+"-to-cache",configurable:!1})}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.enable,r=void 0===n||n,i=t.copyState;if(d()(void 0!==i),!e.state){Object(p.a)(e),e.state=new g(e,{copyState:i,enable:r});for(var s in y){a(e,s,y[s])}o(e,"getParameter"),o(e,"isEnabled")}return e.state.enable=r,e}function u(e){d()(e.state),e.state.push()}function l(e){d()(e.state),e.state.pop()}t.a=s,t.c=u,t.b=l;var c=n(28),f=n(186),p=n(185),h=n(1),d=n.n(h),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m=function(e,t){var n=Array.isArray(e)||ArrayBuffer.isView(e),r=Array.isArray(t)||ArrayBuffer.isView(t);if(n&&r&&e.length===t.length){for(var i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}return e===t},y={enable:function(e,t){return e(i({},t,!0))},disable:function(e,t){return e(i({},t,!1))},pixelStorei:function(e,t,n){return e(i({},t,n))},hint:function(e,t,n){return e(i({},t,n))},bindFramebuffer:function(e,t,n){var r;switch(t){case c.a.FRAMEBUFFER:return e((r={},i(r,c.a.DRAW_FRAMEBUFFER_BINDING,n),i(r,c.a.READ_FRAMEBUFFER_BINDING,n),r));case c.a.DRAW_FRAMEBUFFER:return e(i({},c.a.DRAW_FRAMEBUFFER_BINDING,n));case c.a.READ_FRAMEBUFFER:return e(i({},c.a.READ_FRAMEBUFFER_BINDING,n));default:return null}},blendColor:function(e,t,n,r,o){return e(i({},c.a.BLEND_COLOR,new Float32Array([t,n,r,o])))},blendEquation:function(e,t){var n;return e((n={},i(n,c.a.BLEND_EQUATION_RGB,t),i(n,c.a.BLEND_EQUATION_ALPHA,t),n))},blendEquationSeparate:function(e,t,n){var r;return e((r={},i(r,c.a.BLEND_EQUATION_RGB,t),i(r,c.a.BLEND_EQUATION_ALPHA,n),r))},blendFunc:function(e,t,n){var r;return e((r={},i(r,c.a.BLEND_SRC_RGB,t),i(r,c.a.BLEND_DST_RGB,n),i(r,c.a.BLEND_SRC_ALPHA,t),i(r,c.a.BLEND_DST_ALPHA,n),r))},blendFuncSeparate:function(e,t,n,r,o){var a;return e((a={},i(a,c.a.BLEND_SRC_RGB,t),i(a,c.a.BLEND_DST_RGB,n),i(a,c.a.BLEND_SRC_ALPHA,r),i(a,c.a.BLEND_DST_ALPHA,o),a))},clearColor:function(e,t,n,r,o){return e(i({},c.a.COLOR_CLEAR_VALUE,new Float32Array([t,n,r,o])))},clearDepth:function(e,t){return e(i({},c.a.DEPTH_CLEAR_VALUE,t))},clearStencil:function(e,t){return e(i({},c.a.STENCIL_CLEAR_VALUE,t))},colorMask:function(e,t,n,r,o){return e(i({},c.a.COLOR_WRITEMASK,[t,n,r,o]))},cullFace:function(e,t){return e(i({},c.a.CULL_FACE_MODE,t))},depthFunc:function(e,t){return e(i({},c.a.DEPTH_FUNC,t))},depthRange:function(e,t,n){return e(i({},c.a.DEPTH_RANGE,new Float32Array([t,n])))},depthMask:function(e,t){return e(i({},c.a.DEPTH_WRITEMASK,t))},frontFace:function(e,t){return e(i({},c.a.FRONT_FACE,t))},lineWidth:function(e,t){return e(i({},c.a.LINE_WIDTH,t))},polygonOffset:function(e,t,n){var r;return e((r={},i(r,c.a.POLYGON_OFFSET_FACTOR,t),i(r,c.a.POLYGON_OFFSET_UNITS,n),r))},sampleCoverage:function(e,t,n){var r;return e((r={},i(r,c.a.SAMPLE_COVERAGE_VALUE,t),i(r,c.a.SAMPLE_COVERAGE_INVERT,n),r))},scissor:function(e,t,n,r,o){return e(i({},c.a.SCISSOR_BOX,new Int32Array([t,n,r,o])))},stencilMask:function(e,t){var n;return e((n={},i(n,c.a.STENCIL_WRITEMASK,t),i(n,c.a.STENCIL_BACK_WRITEMASK,t),n))},stencilMaskSeparate:function(e,t,n){return e(i({},t===c.a.FRONT?c.a.STENCIL_WRITEMASK:c.a.STENCIL_BACK_WRITEMASK,n))},stencilFunc:function(e,t,n,r){var o;return e((o={},i(o,c.a.STENCIL_FUNC,t),i(o,c.a.STENCIL_REF,n),i(o,c.a.STENCIL_VALUE_MASK,r),i(o,c.a.STENCIL_BACK_FUNC,t),i(o,c.a.STENCIL_BACK_REF,n),i(o,c.a.STENCIL_BACK_VALUE_MASK,r),o))},stencilFuncSeparate:function(e,t,n,r,o){var a;return e((a={},i(a,t===c.a.FRONT?c.a.STENCIL_FUNC:c.a.STENCIL_BACK_FUNC,n),i(a,t===c.a.FRONT?c.a.STENCIL_REF:c.a.STENCIL_BACK_REF,r),i(a,t===c.a.FRONT?c.a.STENCIL_VALUE_MASK:c.a.STENCIL_BACK_VALUE_MASK,o),a))},stencilOp:function(e,t,n,r){var o;return e((o={},i(o,c.a.STENCIL_FAIL,t),i(o,c.a.STENCIL_PASS_DEPTH_FAIL,n),i(o,c.a.STENCIL_PASS_DEPTH_PASS,r),i(o,c.a.STENCIL_BACK_FAIL,t),i(o,c.a.STENCIL_BACK_PASS_DEPTH_FAIL,n),i(o,c.a.STENCIL_BACK_PASS_DEPTH_PASS,r),o))},stencilOpSeparate:function(e,t,n,r,o){var a;return e((a={},i(a,t===c.a.FRONT?c.a.STENCIL_FAIL:c.a.STENCIL_BACK_FAIL,n),i(a,t===c.a.FRONT?c.a.STENCIL_PASS_DEPTH_FAIL:c.a.STENCIL_BACK_PASS_DEPTH_FAIL,r),i(a,t===c.a.FRONT?c.a.STENCIL_PASS_DEPTH_PASS:c.a.STENCIL_BACK_PASS_DEPTH_PASS,o),a))},viewport:function(e,t,n,r,o){return e(i({},c.a.VIEWPORT,new Int32Array([t,n,r,o])))}},g=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.copyState,o=void 0!==i&&i,a=n.log,s=void 0===a?function(){}:a;r(this,e),this.gl=t,this.stateStack=[],this.enable=!0,this.cache=o?Object(f.b)(t):Object.assign({},f.a),this.log=s,this._updateCache=this._updateCache.bind(this),Object.seal(this)}return v(e,[{key:"push",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.stateStack.push({})}},{key:"pop",value:function(){d()(this.stateStack.length>0);var e=this.stateStack[this.stateStack.length-1];Object(f.d)(this.gl,e,this.cache),this.stateStack.pop()}},{key:"_updateCache",value:function(e){var t=!1,n=void 0,r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(var i in e)d()(void 0!==i),m(e[i],this.cache[i])||(t=!0,n=this.cache[i],!r||i in r||(r[i]=this.cache[i]),this.cache[i]=e[i]);return{valueChanged:t,oldValue:n}}}]),e}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){return e},a=function(){function e(){r(this,e),this.pendingQueries=new Set,this.invalidQueryType=null,this.invalidErrorMessage="",this.checkInvalid=function(){return!1}}return i(e,[{key:"poll",value:function(e){this.cancelInvalidQueries(e);var t=!0,n=!1,r=void 0;try{for(var i,o=this.pendingQueries.values()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;if(a.isResultAvailable()){var s=a.getResult();this.resolveQuery(a,s)}}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}},{key:"setInvalidator",value:function(e){var t=e.queryType,n=e.errorMessage,r=e.checkInvalid;this.invalidQueryType=t,this.invalidErrorMessage=n,this.checkInvalid=r}},{key:"beginQuery",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o;this.cancelInvalidQueries(e.gl),this.cancelQuery(e);var r={};return e.promise=new Promise(function(e,t){r.resolve=e,r.reject=t}),Object.assign(e.promise,r),this.pendingQueries.add(e),e.promise.then(t).catch(n)}},{key:"resolveQuery",value:function(e,t){this.pendingQueries.delete(e),e.promise.resolve(t)}},{key:"rejectQuery",value:function(e,t){this.pendingQueries.delete(e),e.promise&&e.promise.reject(new Error(t))}},{key:"deleteQuery",value:function(e){return this.rejectQuery(e,"Query was deleted before result was available")}},{key:"cancelQuery",value:function(e){return this.rejectQuery(e,"Query was canceled before result was available")}},{key:"invalidateQuery",value:function(e){e instanceof this.invalidQueryType&&this.rejectQuery(e,this.invalidErrorMessage)}},{key:"cancelInvalidQueries",value:function(e){if(this.checkInvalid(e)){var t=!0,n=!1,r=void 0;try{for(var i,o=this.pendingQueries.values()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;this.invalidateQuery(a)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}}}]),e}();t.a=new a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(22),s=n(4),u=n(38),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t),Object(s.d)(e);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,Object.assign({},n,{target:e.TEXTURE_2D})));return o.initialize(n),Object.seal(o),o}return o(t,e),l(t,null,[{key:"isSupported",value:function(e,t){return u.a.isSupported(e,t)}}]),l(t,[{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,t=this.gl;if(void 0===e)throw new Error("Texture.bind: must specify texture unit");return this.textureUnit=e,t.activeTexture(t.TEXTURE0+e),t.bindTexture(this.target,this.handle),e}},{key:"unbind",value:function(){var e=this.gl;if(void 0===this.textureUnit)throw new Error("Texture.unbind: texture unit not specified");return e.activeTexture(e.TEXTURE0+this.textureUnit),e.bindTexture(this.target,null),this.textureUnit}},{key:"getActiveUnit",value:function(){return this.gl.getParameter(a.a.ACTIVE_TEXTURE)-a.a.TEXTURE0}}]),t}(u.a);t.a=c},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(17),u=n(4),l=n(19),c=n(1),f=n.n(c),p=n(5),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=[34338,34339,34340,34341,34922,34373,34975,35069,35070],v=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.elements=null,r.buffers={},r.locations={},r.names={},r.drawParameters={},r._bound=!1,r._filledLocations={},Object.seal(r),r.initialize(n),r}return a(t,e),h(t,[{key:"MAX_ATTRIBUTES",get:function(){return this.gl.getParameter(this.gl.MAX_VERTEX_ATTRIBS)}}],[{key:"isSupported",value:function(e){return Object(u.h)(e)||e.getExtension("OES_vertex_array_object")}},{key:"getDefaultArray",value:function(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new t(e,{handle:null})),e.luma.defaultVertexArray}},{key:"getMaxAttributes",value:function(e){return e.getParameter(e.MAX_VERTEX_ATTRIBS)}}]),h(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.buffers,n=void 0===t?{}:t,r=e.elements,i=void 0===r?null:r,o=e.locations,a=void 0===o?{}:o;this.setLocations(a),this.setBuffers(n,{clear:!0}),this.setElements(i)}},{key:"setLocations",value:function(e){this.locations=e,this.names={}}},{key:"setElements",value:function(e){return f()(!e||34963===e.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.ext.bindVertexArray(this.handle),this.gl.bindBuffer(34963,e&&e.handle),this.ext.bindVertexArray(null),this.elements=e,this}},{key:"_getBufferAndLayout",value:function(e){var t=void 0,n=void 0;return e.handle?(t=e,n=e.layout):(t=e.buffer,n=Object.assign({},t.layout,e.layout||{},e)),{buffer:t,layout:n}}},{key:"setBuffers",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.clear;(void 0===n||n)&&this.clearBindings();var r=this._getLocations(e),i=r.locations,o=r.elements;this.ext.bindVertexArray(this.handle);for(var a in i){var s=i[a];if(s){var u=this._getBufferAndLayout(s),l=u.buffer,c=u.layout;this.setBuffer({location:a,buffer:l,layout:c}),this.setDivisor(a,c.instanced?1:0),this.enable(a)}else this.disable(a)}this.buffers=e,this.ext.bindVertexArray(null),o&&this.setElements(o)}},{key:"enable",value:function(e){var t=this;this.bind(function(){t.gl.enableVertexAttribArray(e)})}},{key:"clearBindings",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.disableZero,r=void 0!==n&&n;this.bind(function(){for(var t in e._filledLocations)e._filledLocations[t]&&(t>0||r)&&e.gl.disableVertexAttribArray(t);e._filledLocations={}})}},{key:"disable",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(e>0||n)&&this.bind(function(){t.gl.disableVertexAttribArray(e)})}},{key:"setDivisor",value:function(e,t){var n=this;this.bind(function(){n.ext.vertexAttribDivisor(e,t)})}},{key:"setBuffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.location,n=e.buffer,r=e.target,i=e.layout,o=this.gl;r=void 0!==r?r:n.target,i=void 0!==i?i:n.layout,f()(r,"setBuffer needs target"),f()(i,"setBuffer called on uninitialized buffer"),this._filledLocations[t]=!0,this.bind(function(){n.bind({target:o.ARRAY_BUFFER});var e=i,r=e.size,a=e.type,s=e.normalized,l=e.stride,c=e.offset;i.integer?(f()(Object(u.h)(o)),o.vertexAttribIPointer(t,r,a,l,c)):o.vertexAttribPointer(t,r,a,s,l,c)})}},{key:"setGeneric",value:function(e){var t=e.location,n=e.array;switch(this._filledLocations[t]=!0,n.constructor){case Float32Array:this._setGenericFloatArray(t,n);break;case Int32Array:this._setGenericIntArray(t,n);break;case Uint32Array:this._setGenericUintArray(t,n);break;default:this.setGenericValues.apply(this,[t].concat(r(n)))}}},{key:"_setGenericFloatArray",value:function(e,t){var n=this.gl;switch(t.length){case 1:n.vertexAttrib1fv(e,t);break;case 2:n.vertexAttrib2fv(e,t);break;case 3:n.vertexAttrib3fv(e,t);break;case 4:n.vertexAttrib4fv(e,t);break;default:f()(!1)}}},{key:"_setGenericIntArray",value:function(e,t){var n=this.gl;switch(f()(Object(u.h)(n)),t.length){case 1:n.vertexAttribI1iv(e,t);break;case 2:n.vertexAttribI2iv(e,t);break;case 3:n.vertexAttribI3iv(e,t);break;case 4:n.vertexAttribI4iv(e,t);break;default:f()(!1)}}},{key:"_setGenericUintArray",value:function(e,t){var n=this.gl;switch(f()(Object(u.h)(n)),t.length){case 1:n.vertexAttribI1uiv(e,t);break;case 2:n.vertexAttribI2uiv(e,t);break;case 3:n.vertexAttribI3uiv(e,t);break;case 4:n.vertexAttribI4uiv(e,t);break;default:f()(!1)}}},{key:"setGenericValues",value:function(e,t,n,r,i){var o=this.gl;switch(arguments.length-1){case 1:o.vertexAttrib1f(e,t);break;case 2:o.vertexAttrib2f(e,t,n);break;case 3:o.vertexAttrib3f(e,t,n,r);break;case 4:o.vertexAttrib4f(e,t,n,r,i);break;default:f()(!1)}}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;if("function"!==typeof e)return this.bindVertexArray(e),this;var t=void 0;return this._bound?t=e():(this.ext.bindVertexArray(this.handle),this._bound=!0,t=e(),this.ext.bindVertexArray(null),this._bound=!1),t}},{key:"_deduceDrawParameters",value:function(){var e=!1,t=!1,n=null;return this.elements&&(t=!0,n=this.elements.layout.type),this.buffers.forEach(function(t){t.layout.instanced>0&&(e=!0)}),{isInstanced:e,isIndexed:t,indexType:n}}},{key:"_getLocations",value:function(e){var t=null,n={};for(var r in e){var i=e[r];i&&34963===i.target&&(f()(!t,"Duplicate GL.ELEMENT_ARRAY_BUFFER"),t=i);var o=Number(r);Number.isFinite(o)||(o=this.locations[r]),f()(Number.isFinite(o)),f()(!n[o],"Duplicate attribute for binding point "+o),n[o]=i}return{locations:n,elements:t}}},{key:"_sortBuffersByLocation",value:function(e){var t=null,n=new Array(this._attributeCount).fill(null);for(var r in e){var i=e[r];34963===i.target?(f()(!t,"Duplicate GL.ELEMENT_ARRAY_BUFFER"),t=i):this._warn[r]||(p.f.warn(2,this._print(r)+" not used"),this._warn[r]=!0);var o=Number(r);Number.isFinite(o)||(o=this.locations[r]),n[o]=r,f()(null===n[o],"Duplicate attribute for binding point "+o),n[o]=o}return{locations:n,elements:t}}},{key:"_createHandle",value:function(){return this.ext.createVertexArray()}},{key:"_deleteHandle",value:function(e){return this.ext.deleteVertexArray(e),[this.elements]}},{key:"_getParameter",value:function(e,t){var n=t.location;f()(Number.isFinite(n)),this.ext.bindVertexArray(this.handle);var r=void 0;switch(e){case 34373:r=this.gl.getVertexAttribOffset(n,e);break;default:r=this.ext.getVertexAttrib(n,e)}return this.ext.bindVertexArray(null),r}},{key:"_getData",value:function(){var e=this;return new Array(this.MAX_ATTRIBUTES).fill(0).map(function(t,n){var r={};return d.forEach(function(t){r[Object(s.d)(t)]=e.getParameter(t,{location:n})}),r})}},{key:"_bind",value:function(e){this.ext.bindVertexArray(e)}},{key:"filledLocations",get:function(){return this._filledLocations}}]),t}(l.a);t.a=v},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t,n,r){var i=e.length;if(i%t&&_.f.warn("Uniform size should be multiples of "+t,e),e instanceof n)return e;var o=r[i];o||(o=new n(i),r[i]=o);for(var a=0;a<i;a++)o[a]=e[a];return o}function o(e,t){return i(e,t,Float32Array,E)}function a(e,t){return i(e,t,Int32Array,S)}function s(e,t){return i(e,t,Uint32Array,T)}function u(e){var t=/([^\[]*)(\[[0-9]+\])?/,n=e.match(t);if(!n||n.length<2)throw new Error("Failed to parse GLSL uniform name "+e);return{name:n[1],length:n[2]||1,isArray:Boolean(n[2])}}function l(e,t,n){var r=w[n.type];if(!r)throw new Error("Unknown GLSL uniform type "+n.type);return r.bind(null,e,t)}function c(e,t){for(var n in e){var r=e[n];if(!f(r))throw t=t?t+" ":"",console.error(t+" Bad uniform "+n,r),new Error(t+" Bad uniform "+n)}return!0}function f(e){return Array.isArray(e)?e.length>0&&e.every(function(e){return isFinite(e)}):ArrayBuffer.isView(e)?e.length>0:!!isFinite(e)||(e instanceof g.a||e instanceof y.a&&Boolean(e.texture))}function p(e){return void 0!==e&&null!==e}function h(e){var t=e.table,n=e.header,i=e.uniforms,o=e.uniformName,a=e.undefinedOnly,s=i[o],u=p(s);return(!a||!u)&&(t[o]=r({Type:u?s:"NOT PROVIDED"},n,u?Object(_.b)(s):"N/A"),!0)}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.header,n=void 0===t?"Uniforms":t,i=e.program,o=e.uniforms,a=e.undefinedOnly,s=void 0!==a&&a;x()(i);var u=i._uniformSetters,l={},c=Object.keys(u).sort(),f=0,p=!0,d=!1,v=void 0;try{for(var m,y=c[Symbol.iterator]();!(p=(m=y.next()).done);p=!0){var g=m.value;g.match(".*_.*")||g.match(".*Matrix")||h({table:l,header:n,uniforms:o,uniformName:g,undefinedOnly:s})&&f++}}catch(e){d=!0,v=e}finally{try{!p&&y.return&&y.return()}finally{if(d)throw v}}var b=!0,w=!1,E=void 0;try{for(var S,T=c[Symbol.iterator]();!(b=(S=T.next()).done);b=!0){var A=S.value;A.match(".*Matrix")&&h({table:l,header:n,uniforms:o,uniformName:A,undefinedOnly:s})&&f++}}catch(e){w=!0,E=e}finally{try{!b&&T.return&&T.return()}finally{if(w)throw E}}var O=!0,P=!1,C=void 0;try{for(var k,R=c[Symbol.iterator]();!(O=(k=R.next()).done);O=!0){var M=k.value;l[M]||h({table:l,header:n,uniforms:o,uniformName:M,undefinedOnly:s})&&f++}}catch(e){P=!0,C=e}finally{try{!O&&R.return&&R.return()}finally{if(P)throw C}}var I=0,L={};if(!s)for(var D in o){var N=o[D];l[D]||(I++,L[D]=r({Type:"NOT USED: "+N},n,Object(_.b)(N)))}return{table:l,count:f,unusedTable:L,unusedCount:I}}function v(e,t){if(Array.isArray(e)||ArrayBuffer.isView(e)){if(!t)return!1;var n=e.length;if(t.length!==n)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}return e===t}t.e=u,t.c=l,t.b=c,t.d=d,t.a=v;var m,y=n(49),g=n(38),_=n(5),b=n(1),x=n.n(b),w=(m={},r(m,5126,function(e,t,n){return e.uniform1f(t,n)}),r(m,35664,function(e,t,n){return e.uniform2fv(t,o(n,2))}),r(m,35665,function(e,t,n){return e.uniform3fv(t,o(n,3))}),r(m,35666,function(e,t,n){return e.uniform4fv(t,o(n,4))}),r(m,5124,function(e,t,n){return e.uniform1i(t,n)}),r(m,35667,function(e,t,n){return e.uniform2iv(t,a(n,2))}),r(m,35668,function(e,t,n){return e.uniform3iv(t,a(n,3))}),r(m,35669,function(e,t,n){return e.uniform4iv(t,a(n,4))}),r(m,35670,function(e,t,n){return e.uniform1i(t,n)}),r(m,35671,function(e,t,n){return e.uniform2iv(t,a(n,2))}),r(m,35672,function(e,t,n){return e.uniform3iv(t,a(n,3))}),r(m,35673,function(e,t,n){return e.uniform4iv(t,a(n,4))}),r(m,35674,function(e,t,n){return e.uniformMatrix2fv(t,!1,o(n,4))}),r(m,35675,function(e,t,n){return e.uniformMatrix3fv(t,!1,o(n,9))}),r(m,35676,function(e,t,n){return e.uniformMatrix4fv(t,!1,o(n,16))}),r(m,35678,function(e,t,n){return e.uniform1i(t,n)}),r(m,35680,function(e,t,n){return e.uniform1i(t,n)}),r(m,5125,function(e,t,n){return e.uniform1ui(t,n)}),r(m,36294,function(e,t,n){return e.uniform2uiv(t,s(n,2))}),r(m,36295,function(e,t,n){return e.uniform3uiv(t,s(n,3))}),r(m,36296,function(e,t,n){return e.uniform4uiv(t,s(n,4))}),r(m,35685,function(e,t,n){return e.uniformMatrix2x3fv(t,!1,o(n,6))}),r(m,35686,function(e,t,n){return e.uniformMatrix2x4fv(t,!1,o(n,8))}),r(m,35687,function(e,t,n){return e.uniformMatrix3x2fv(t,!1,o(n,6))}),r(m,35688,function(e,t,n){return e.uniformMatrix3x4fv(t,!1,o(n,12))}),r(m,35689,function(e,t,n){return e.uniformMatrix4x2fv(t,!1,o(n,8))}),r(m,35690,function(e,t,n){return e.uniformMatrix4x3fv(t,!1,o(n,12))}),r(m,35679,function(e,t,n){return e.uniform1i(t,n)}),r(m,35682,function(e,t,n){return e.uniform1i(t,n)}),r(m,36289,function(e,t,n){return e.uniform1i(t,n)}),r(m,36292,function(e,t,n){return e.uniform1i(t,n)}),r(m,36293,function(e,t,n){return e.uniform1i(t,n)}),r(m,36298,function(e,t,n){return e.uniform1i(t,n)}),r(m,36299,function(e,t,n){return e.uniform1i(t,n)}),r(m,36300,function(e,t,n){return e.uniform1i(t,n)}),r(m,36303,function(e,t,n){return e.uniform1i(t,n)}),r(m,36306,function(e,t,n){return e.uniform1i(t,n)}),r(m,36307,function(e,t,n){return e.uniform1i(t,n)}),r(m,36308,function(e,t,n){return e.uniform1i(t,n)}),r(m,36311,function(e,t,n){return e.uniform1i(t,n)}),m),E={},S={},T={}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){if(e.luma=e.luma||{},!e.luma.limits){e.luma.limits={},e.luma.webgl1MinLimits={},e.luma.webgl2MinLimits={};var t=Object(f.h)(e);for(var n in p){var r=p[n],i=r.gl1,o="gl2"in r?r.gl2:r.gl1,a=t?o:i,s="gl2"in r&&!t||"extension"in r&&!e.getExtension(r.extension),u=s?a:e.getParameter(n);e.luma.limits[n]=u,e.luma.webgl1MinLimits[n]=i,e.luma.webgl2MinLimits[n]=o}}return e.luma.limits}function o(e){if(e.luma=e.luma||{},!e.luma.info){var t,n=e.getExtension("WEBGL_debug_renderer_info");e.luma.info=(t={},r(t,c.b.VENDOR,e.getParameter(c.b.VENDOR)),r(t,c.b.RENDERER,e.getParameter(c.b.RENDERER)),r(t,c.b.UNMASKED_VENDOR_WEBGL,e.getParameter(n&&n.UNMASKED_VENDOR_WEBGL||c.b.VENDOR)),r(t,c.b.UNMASKED_RENDERER_WEBGL,e.getParameter(n&&n.UNMASKED_RENDERER_WEBGL||c.b.RENDERER)),r(t,c.b.VERSION,e.getParameter(c.b.VERSION)),r(t,c.b.SHADING_LANGUAGE_VERSION,e.getParameter(c.b.SHADING_LANGUAGE_VERSION)),t)}return e.luma.info}function a(e){var t=e.getParameter(c.b.VENDOR),n=e.getParameter(c.b.RENDERER),r=e.getExtension("WEBGL_debug_renderer_info"),i=r&&e.getParameter(r.UNMASKED_VENDOR_WEBGL||c.b.VENDOR),o=r&&e.getParameter(r.UNMASKED_RENDERER_WEBGL||c.b.RENDERER);return{vendor:i||t,renderer:o||n,vendorMasked:t,rendererMasked:n,version:e.getParameter(c.b.VERSION),shadingLanguageVersion:e.getParameter(c.b.SHADING_LANGUAGE_VERSION)}}function s(e){var t=i(e),n=o(e);return{vendor:n[h]||n[c.b.VENDOR],renderer:n[d]||n[c.b.RENDERER],version:n[c.b.VERSION],shadingLanguageVersion:n[c.b.SHADING_LANGUAGE_VERSION],info:n,limits:t,webgl1MinLimits:e.luma.webgl1MinLimits,webgl2MinLimits:e.luma.webgl2MinLimits}}function u(e){return a(e)}t.a=s,t.b=u;var l,c=n(17),f=n(4),p=(l={},r(l,c.b.ALIASED_LINE_WIDTH_RANGE,{gl1:new Float32Array([1,1])}),r(l,c.b.ALIASED_POINT_SIZE_RANGE,{gl1:new Float32Array([1,1])}),r(l,c.b.MAX_TEXTURE_SIZE,{gl1:64,gl2:2048}),r(l,c.b.MAX_CUBE_MAP_TEXTURE_SIZE,{gl1:16}),r(l,c.b.MAX_TEXTURE_IMAGE_UNITS,{gl1:8}),r(l,c.b.MAX_COMBINED_TEXTURE_IMAGE_UNITS,{gl1:8}),r(l,c.b.MAX_VERTEX_TEXTURE_IMAGE_UNITS,{gl1:0}),r(l,c.b.MAX_RENDERBUFFER_SIZE,{gl1:1}),r(l,c.b.MAX_VARYING_VECTORS,{gl1:8}),r(l,c.b.MAX_VERTEX_ATTRIBS,{gl1:8}),r(l,c.b.MAX_VERTEX_UNIFORM_VECTORS,{gl1:128}),r(l,c.b.MAX_FRAGMENT_UNIFORM_VECTORS,{gl1:16}),r(l,c.b.MAX_VIEWPORT_DIMS,{gl1:new Int32Array([0,0])}),r(l,c.b.MAX_3D_TEXTURE_SIZE,{gl1:0,gl2:256}),r(l,c.b.MAX_ARRAY_TEXTURE_LAYERS,{gl1:0,gl2:256}),r(l,c.b.MAX_CLIENT_WAIT_TIMEOUT_WEBGL,{gl1:0,gl2:0}),r(l,c.b.MAX_COLOR_ATTACHMENTS,{gl1:0,gl2:4}),r(l,c.b.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS,{gl1:0,gl2:0}),r(l,c.b.MAX_COMBINED_UNIFORM_BLOCKS,{gl1:0,gl2:0}),r(l,c.b.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS,{gl1:0,gl2:0}),r(l,c.b.MAX_DRAW_BUFFERS,{gl1:0,gl2:4}),r(l,c.b.MAX_ELEMENT_INDEX,{gl1:0,gl2:0}),r(l,c.b.MAX_ELEMENTS_INDICES,{gl1:0,gl2:0}),r(l,c.b.MAX_ELEMENTS_VERTICES,{gl1:0,gl2:0}),r(l,c.b.MAX_FRAGMENT_INPUT_COMPONENTS,{gl1:0,gl2:0}),r(l,c.b.MAX_FRAGMENT_UNIFORM_BLOCKS,{gl1:0,gl2:0}),r(l,c.b.MAX_FRAGMENT_UNIFORM_COMPONENTS,{gl1:0,gl2:0}),r(l,c.b.MAX_SAMPLES,{gl1:0,gl2:0}),r(l,c.b.MAX_SERVER_WAIT_TIMEOUT,{gl1:0,gl2:0}),r(l,c.b.MAX_TEXTURE_LOD_BIAS,{gl1:0,gl2:0}),r(l,c.b.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS,{gl1:0,gl2:0}),r(l,c.b.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS,{gl1:0,gl2:0}),r(l,c.b.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS,{gl1:0,gl2:0}),r(l,c.b.MAX_UNIFORM_BLOCK_SIZE,{gl1:0,gl2:0}),r(l,c.b.MAX_UNIFORM_BUFFER_BINDINGS,{gl1:0,gl2:0}),r(l,c.b.MAX_VARYING_COMPONENTS,{gl1:0,gl2:0}),r(l,c.b.MAX_VERTEX_OUTPUT_COMPONENTS,{gl1:0,gl2:0}),r(l,c.b.MAX_VERTEX_UNIFORM_BLOCKS,{gl1:0,gl2:0}),r(l,c.b.MAX_VERTEX_UNIFORM_COMPONENTS,{gl1:0,gl2:0}),r(l,c.b.MIN_PROGRAM_TEXEL_OFFSET,{gl1:0,gl2:-8,negative:!0}),r(l,c.b.MAX_PROGRAM_TEXEL_OFFSET,{gl1:0,gl2:7}),r(l,c.b.UNIFORM_BUFFER_OFFSET_ALIGNMENT,{gl1:0,gl2:0}),l),h=37445,d=37446},function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ignoreMultipleRegistrations,r=void 0!==n&&n,i=!0,o=!1,a=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){c(s.value,{ignoreMultipleRegistrations:r})}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}}function i(e){d=e}function o(e){if("string"!==typeof e){var t=e;return p()("string"===typeof t.name),c(t,{ignoreMultipleRegistrations:!0}),t}var n=h[e];return n||p()(!1,"Unknown shader module "+e),n}function a(e){return s(e.map(function(e){return"string"!==typeof e?(r([e],{ignoreMultipleRegistrations:!0}),e.name):e}))}function s(e){e=e.concat(d);var t={};return u({modules:e,level:0,result:t}),Object.keys(t).sort(function(e,n){return t[n]-t[e]})}function u(e){var t=e.modules,n=e.level,r=e.result;if(n>=5)throw new Error("Possible loop in shader dependency graph");var i=!0,a=!1,s=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var f=l.value,p=o(f);(void 0===r[p.name]||r[p.name]<n)&&(r[p.name]=n)}}catch(e){a=!0,s=e}finally{try{!i&&c.return&&c.return()}finally{if(a)throw s}}var h=!0,d=!1,v=void 0;try{for(var m,y=t[Symbol.iterator]();!(h=(m=y.next()).done);h=!0){var g=m.value,_=o(g);_.dependencies&&u({modules:_.dependencies,level:n+1,result:r})}}catch(e){d=!0,v=e}finally{try{!h&&y.return&&y.return()}finally{if(d)throw v}}return r}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.forEach(function(e){switch(e.type){case"function":e.regex=new RegExp("\\b"+e.old+"\\(");break;default:e.regex=new RegExp(e.type+" "+e.old+";")}}),e}function c(e,t){var n=t.ignoreMultipleRegistrations,r=void 0!==n&&n;if(p()(e.name,"shader module has no name"),!r&&h[e.name])throw new Error("shader module "+e.name+" already registered");h[e.name]=e,e.dependencies=e.dependencies||[],e.deprecations=l(e.deprecations)}t.b=r,t.d=i,t.a=o,t.c=a;var f=n(1),p=n.n(f),h={},d=[]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i="undefined"!==typeof window&&window.addEventListener,o=new Map,a=function(){return i&&window.__SEER_INITIALIZED__},s=function(e,t){var n=o.get(e),r=Date.now();return!!(n&&r-n<t)||(o.set(e,r),!1)},u=function(e){return function(t,n){if(!n||"object"!==("undefined"===typeof n?"undefined":r(n))||!e.has(n)){e.add(n);return Object.prototype.toString.call(n).slice(8,-1).includes("Array")?Array.prototype.slice.call(n,0,20):n}}},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(i&&a()){var n=new Set,r=JSON.stringify(t,u(n));try{window.postMessage({type:e,payload:r,source:"seer-agent"},"*")}catch(e){if(s("seer-log",2e3))return;console.log(e)}}},c=new Map,f=function(e){if(e&&e.data&&"seer-core"===e.data.source){var t=e.data,n=t.type,r=t.payload,i=c.get(n);i&&i.forEach(function(e){return e(r)})}},p=function(){i&&!window.__SEER_LISTENER__&&(window.addEventListener("message",f),window.__SEER_LISTENER__=!0)},h=function(){i&&window.__SEER_LISTENER__&&(window.removeEventListener("message",f),delete window.__SEER_LISTENER__)},d=function(e,t){if(i){if(!e||!t)throw new Error("Please provide a type and callback");c.has(e)||c.set(e,[]),window.__SEER_LISTENER__||p(),c.get(e).push(t)}},v=function(e){c.forEach(function(t,n){c.set(n,t.filter(function(t){return t!==e}))})},m=function(e,t){return l("LIST",{key:e,data:t})},y=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return l("LIST_ITEM",{key:e,itemKey:t,data:n})},g=function(e,t,n,r){return l("UPDATE_ITEM",{key:e,itemKey:t,path:n,data:r})},_=function(e,t,n){return l("MULTI_UPDATE_ITEM",{key:e,itemKey:t,array:n})},b=function(e,t){return l("DELETE_ITEM",{key:e,itemKey:t})},x=function(e,t,n){return l("ADD_LOG",{key:e,itemKey:t,msg:n})};t.default={send:l,throttle:s,isReady:a,list:m,listItem:y,updateItem:g,multiUpdate:_,deleteItem:b,addLog:x,listeners:c,listenFor:d,removeListener:v,init:p,clean:h}},function(e,t,n){"use strict";function r(e,t){if(e===t)return!0;if(Array.isArray(e)){var n=e.length;if(!t||t.length!==n)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}return!1}function i(e){var t={},n=void 0;return function(i){for(var o in i)if(!r(i[o],t[o])){n=e(i),t=i;break}return n}}t.a=i},function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Math.fround(e),i=e-Math.fround(e);return t[n]=r,t[n+1]=i,t}function i(e){for(var t=new Float32Array(32),n=0;n<4;++n)for(var i=0;i<4;++i){var o=4*n+i;r(e[4*i+n],t,2*o)}return t}function o(e){return e-Math.fround(e)}function a(e){if(e.fp64){if(e.coordinateSystem===u.a.LNGLAT)return!0;s.a.once(0,"64-bit mode only works with coordinateSystem set to\n      COORDINATE_SYSTEM.LNGLAT. Rendering in 32-bit mode instead")}return!1}t.c=r,t.d=i,t.b=o,t.a=a;var s=n(10),u=n(51)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(51),o=n(213),a=n(120),s=n(215),u=n(456),l=n(216),c=n(217),f=n(10),p=n(6),h=n(1),d=n.n(h),v=n(458),m=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=Object.freeze({}),_=function(){},b={dataComparator:null,updateTriggers:{},numInstances:void 0,visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:.8},onHover:_,onClick:_,coordinateSystem:i.a.LNGLAT,coordinateOrigin:[0,0,0],parameters:{},uniforms:{},framebuffer:null,animation:null,getPolygonOffset:function(e){return[0,100*-e.layerIndex]},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:[0,0,128,128]},x=0,w=function(){function e(){r(this,e),this.props=u.a.apply(this,arguments),this.id=this.props.id,this.oldProps=g,this.count=x++,this.lifecycle=s.a.NO_STATE,this.parentLayer=null,this.context=null,this.state=null,this.internalState=null,Object.seal(this)}return y(e,[{key:"clone",value:function(e){return new this.constructor(Object.assign({},this.props,e))}},{key:"toString",value:function(){return(this.constructor.layerName||this.constructor.name)+"({id: '"+this.props.id+"'})"}},{key:"setState",value:function(e){Object.assign(this.state,e),this.setNeedsRedraw()}},{key:"setNeedsRedraw",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.internalState&&(this.internalState.needsRedraw=e)}},{key:"getNeedsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.clearRedrawFlags,n=void 0!==t&&t;return this._getNeedsRedraw(n)}},{key:"needsUpdate",value:function(){return this.shouldUpdateState(this._getUpdateParams())}},{key:"isPickable",value:function(){return this.props.pickable&&this.props.visible}},{key:"getModels",value:function(){return this.state&&(this.state.models||(this.state.model?[this.state.model]:[]))}},{key:"getSingleModel",value:function(){return this.state&&this.state.model}},{key:"getAttributeManager",value:function(){return this.internalState&&this.internalState.attributeManager}},{key:"getCurrentLayer",value:function(){return this.internalState&&this.internalState.layer}},{key:"getFirstObject",value:function(){var e=this.props.data,t=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){return i.value}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}return null}},{key:"project",value:function(e){var t=this.context.viewport;return d()(Array.isArray(e)),t.project(e)}},{key:"unproject",value:function(e){var t=this.context.viewport;return d()(Array.isArray(e)),t.unproject(e)}},{key:"projectFlat",value:function(e){var t=this.context.viewport;return d()(Array.isArray(e)),t.projectFlat(e)}},{key:"unprojectFlat",value:function(e){var t=this.context.viewport;return d()(Array.isArray(e)),t.unprojectFlat(e)}},{key:"screenToDevicePixels",value:function(e){return f.a.deprecated("screenToDevicePixels","DeckGL prop useDevicePixels for conversion"),e*("undefined"!==typeof window?window.devicePixelRatio:1)}},{key:"nullPickingColor",value:function(){return[0,0,0]}},{key:"encodePickingColor",value:function(e){return d()(0===(e+1>>24&255),"index out of picking color range"),[e+1&255,e+1>>8&255,e+1>>8>>8&255]}},{key:"decodePickingColor",value:function(e){d()(e instanceof Uint8Array);var t=m(e,3);return t[0]+256*t[1]+65536*t[2]-1}},{key:"initializeState",value:function(){throw new Error("Layer "+this+" has not defined initializeState")}},{key:"shouldUpdateState",value:function(e){e.oldProps,e.props,e.oldContext,e.context;return e.changeFlags.propsOrDataChanged}},{key:"updateState",value:function(e){var t=(e.oldProps,e.props,e.oldContext,e.context,e.changeFlags),n=this.getAttributeManager();t.dataChanged&&n&&n.invalidateAll()}},{key:"finalizeState",value:function(){}},{key:"draw",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=this.getModels()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){i.value.draw(e)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}},{key:"getPickingInfo",value:function(e){var t=e.info,n=(e.mode,t.index);return n>=0&&Array.isArray(this.props.data)&&(t.object=this.props.data[n]),t}},{key:"invalidateAttribute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.getAttributeManager();n&&("all"===e?(f.a.log(1,"updateTriggers invalidating all attributes: "+t),n.invalidateAll()):(f.a.log(1,"updateTriggers invalidating attribute "+e+": "+t),n.invalidate(e)))}},{key:"updateAttributes",value:function(e){var t=this.getAttributeManager();if(t){var n=this.getNumInstances(e);t.update({data:e.data,numInstances:n,props:e,transitions:e.transitions,buffers:e,context:this,ignoreUnknownAttributes:!0});var r=this.getSingleModel();if(r){var i=t.getChangedAttributes({clearChangedFlags:!0});r.setAttributes(i)}}}},{key:"updateTransition",value:function(){var e=this.getSingleModel(),t=this.getAttributeManager(),n=t&&t.updateTransition();e&&n&&e.setAttributes(t.getChangedAttributes({transition:!0}))}},{key:"calculateInstancePickingColors",value:function(e,t){for(var n=t.numInstances,r=e.value,i=e.size,o=0;o<n;o++){var a=this.encodePickingColor(o);r[o*i+0]=a[0],r[o*i+1]=a[1],r[o*i+2]=a[2]}}},{key:"getNumInstances",value:function(e){if(e=e||this.props,this.state&&void 0!==this.state.numInstances)return this.state.numInstances;if(void 0!==e.numInstances)return e.numInstances;var t=this.props.data;return Object(c.a)(t)}},{key:"_initialize",value:function(){d()(0===arguments.length),d()(this.context.gl),this._initState(),this.initializeState(this.context),this.state.attributeManager=this.getAttributeManager(),this.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0}),this._updateState(this._getUpdateParams());var e=this.getSingleModel();e&&(e.id=this.props.id,e.program.id=this.props.id+"-program",e.geometry.id=this.props.id+"-geometry",e.setAttributes(this.getAttributeManager().getAttributes())),this.isComposite&&this._renderLayers(),this.clearChangeFlags()}},{key:"_update",value:function(){d()(0===arguments.length);var e=this.needsUpdate(),t={props:this.props,oldProps:this.oldProps,context:this.context,oldContext:this.oldContext,changeFlags:this.internalState.changeFlags};e&&this._updateState(t),this.isComposite&&this._renderLayers(e),this.clearChangeFlags()}},{key:"_updateState",value:function(e){this.updateState(e),this.updateAttributes(this.props),this._updateBaseUniforms(),this._updateModuleSettings(),this.state.model&&this.state.model.setInstanceCount(this.getNumInstances())}},{key:"_finalize",value:function(){d()(this.internalState&&this.state),d()(0===arguments.length),this.finalizeState(this.context),Object(a.d)(this.id)}},{key:"drawLayer",value:function(e){var t=this,n=e.moduleParameters,r=void 0===n?null:n,i=e.uniforms,o=void 0===i?{}:i,a=e.parameters,s=void 0===a?{}:a;if(o.picking_uActive||this.updateTransition(),r){var u=!0,l=!1,c=void 0;try{for(var f,h=this.getModels()[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){f.value.updateModuleSettings(r)}}catch(e){l=!0,c=e}finally{try{!u&&h.return&&h.return()}finally{if(l)throw c}}}var d=this.props.getPolygonOffset,v=d&&d(o)||[0,0];s.polygonOffset=v,Object(p.t)(this.context.gl,s,function(){t.draw({moduleParameters:r,uniforms:o,parameters:s,context:t.context})})}},{key:"pickLayer",value:function(e){return this.getPickingInfo(e)}},{key:"getChangeFlags",value:function(){return this.internalState.changeFlags}},{key:"setChangeFlags",value:function(e){var t=this;this.internalState.changeFlags=this.internalState.changeFlags||{};var n=this.internalState.changeFlags;e.dataChanged&&!n.dataChanged&&(n.dataChanged=e.dataChanged,f.a.log(2,function(){return"dataChanged: "+e.dataChanged+" in "+t.id})),e.updateTriggersChanged&&!n.updateTriggersChanged&&(n.updateTriggersChanged=n.updateTriggersChanged&&e.updateTriggersChanged?Object.assign({},e.updateTriggersChanged,n.updateTriggersChanged):e.updateTriggersChanged||n.updateTriggersChanged,f.a.log(2,function(){return"updateTriggersChanged: "+Object.keys(e.updateTriggersChanged).join(", ")+" in "+t.id})),e.propsChanged&&!n.propsChanged&&(n.propsChanged=e.propsChanged,f.a.log(2,function(){return"propsChanged: "+e.propsChanged+" in "+t.id})),e.viewportChanged&&!n.viewportChanged&&(n.viewportChanged=e.viewportChanged,f.a.log(3,function(){return"viewportChanged: "+e.viewportChanged+" in "+t.id}));var r=e.dataChanged||e.updateTriggersChanged||e.propsChanged;n.propsOrDataChanged=n.propsOrDataChanged||r,n.somethingChanged=n.somethingChanged||r||e.viewportChanged}},{key:"clearChangeFlags",value:function(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}},{key:"printChangeFlags",value:function(){var e=this.internalState.changeFlags;return(e.dataChanged?"data ":"")+(e.propsChanged?"props ":"")+(e.updateTriggersChanged?"triggers ":"")+(e.viewportChanged?"viewport":"")}},{key:"diffProps",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.oldProps,n=Object(l.b)(e,t);if(n.updateTriggersChanged)for(var r in n.updateTriggersChanged)n.updateTriggersChanged[r]&&this._activeUpdateTrigger(r);return this.setChangeFlags(n)}},{key:"_getUpdateParams",value:function(){return{props:this.props,oldProps:this.oldProps,context:this.context,oldContext:this.oldContext||{},changeFlags:this.internalState.changeFlags}}},{key:"_getNeedsRedraw",value:function(e){if(!this.internalState)return!1;var t=!1;t=t||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!e;var n=this.getAttributeManager(),r=n&&n.getNeedsRedraw({clearRedrawFlags:e});t=t||r;var i=!0,o=!1,a=void 0;try{for(var s,u=this.getModels()[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value,c=l.getNeedsRedraw({clearRedrawFlags:e});c&&"string"!==typeof c&&(c="model "+l.id),t=t||c}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}return t}},{key:"_initState",value:function(){d()(!this.internalState&&!this.state);var e=new o.a(this.context.gl,{id:this.props.id});e.addInstanced({instancePickingColors:{type:p.f.UNSIGNED_BYTE,size:3,update:this.calculateInstancePickingColors}}),this.internalState=new v.a({attributeManager:e}),this.state={},this.state.attributeManager=this.getAttributeManager()}},{key:"_transferState",value:function(e){var t=e.state,n=e.internalState,r=e.props;d()(t&&n),t.layer=this,this.state=t,this.internalState=n,this.oldProps=r;var i=!0,o=!1,a=void 0;try{for(var s,u=this.getModels()[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){s.value.userData.layer=this}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}this.diffProps()}},{key:"_activeUpdateTrigger",value:function(e){this.invalidateAttribute(e)}},{key:"_checkRequiredProp",value:function(e,t){var n=this.props[e];if(void 0===n)throw new Error("Property "+e+" undefined in layer "+this);if(t&&!t(n))throw new Error("Bad property "+e+" in layer "+this)}},{key:"_updateBaseUniforms",value:function(){var e={opacity:Math.pow(this.props.opacity,1/2.2),ONE:1},t=!0,n=!1,r=void 0;try{for(var i,o=this.getModels()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){i.value.setUniforms(e)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}this.setNeedsRedraw()}},{key:"_updateModuleSettings",value:function(){var e={pickingHighlightColor:this.props.highlightColor},t=!0,n=!1,r=void 0;try{for(var i,o=this.getModels()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){i.value.updateModuleSettings(e)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}},{key:"setUniforms",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=this.getModels()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){i.value.setUniforms(e)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}this.setNeedsRedraw(),f.a.deprecated("layer.setUniforms","model.setUniforms")}},{key:"stats",get:function(){return this.internalState.stats}}]),e}();t.a=w,w.layerName="Layer",w.defaultProps=b},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e){var t=[{path:"objects.props",data:e.props}],n=[e.constructor.layerName];if(e.state){if(e.getAttributeManager()){var r=e.getAttributeManager().getAttributes();t.push({path:"objects.attributes",data:r}),n.push(e.getAttributeManager().stats.getTimeString())}if(e.state.model){e.state.model.timerQueryEnabled=!0;var i=e.state.model.stats.lastFrameTime;i&&n.push((1e3*i).toFixed(0)+"\u03bcs")}}return t.push({path:"badges",data:n}),t}n.d(t,"f",function(){return l}),n.d(t,"a",function(){return c}),n.d(t,"c",function(){return f}),n.d(t,"e",function(){return p}),n.d(t,"b",function(){return h}),n.d(t,"g",function(){return d}),n.d(t,"d",function(){return v});var o=n(116),a=n.n(o),s=function e(t,n,r){t&&(n.length>1?e(t[n[0]],n.slice(1),r):t[n[0]]=r)},u=new Map,l=function(e,t,n){if(a.a.isReady()){u.has(e)||u.set(e,new Map);u.get(e).set(t,n)}},c=function(e){if(a.a.isReady()&&e.id){var t=u.get(e.id);t&&t.forEach(function(t,n){s(e,n,t),"data"===n[0]&&(e.data=[].concat(r(e.data)))})}},f=function(e){a.a.isReady()&&a.a.listenFor("deck.gl",e)},p=function(e){a.a.isReady()&&a.a.listenFor("init",e)},h=function(e){if(a.a.isReady()&&e){var t=[e.constructor.layerName];a.a.listItem("deck.gl",e.id,{badges:t,links:e.state&&e.state.model?["luma.gl:"+e.state.model.id]:void 0,parent:e.parentLayer?e.parentLayer.id:void 0})}},d=function(e){if(a.a.isReady()&&!a.a.throttle("deck.gl:"+e.id,1e3)){var t=i(e);a.a.multiUpdate("deck.gl",e.id,t)}},v=function(e){a.a.isReady()&&e&&a.a.deleteItem("deck.gl",e)}},function(e,t,n){"use strict";function r(e,t){if(!e)return null;var n=c()([0,0,0,0],t,e),r=1/n[3];return u()(n,n,[r,r,r,r]),n}function i(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function o(e){var t=e.viewMatrix,n=e.viewMatrixInverse;return{eye:[n[12],n[13],n[14]],direction:[t[2],t[6],t[10]],up:[t[1],t[5],t[9]]}}function a(e,t){p()(Number.isFinite(e)&&Number.isFinite(t));var n=e%t;return n<0?t+n:n}t.d=r,t.a=i,t.b=o,t.c=a;var s=n(165),u=n.n(s),l=n(59),c=n.n(l),f=n(1),p=n.n(f)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(15),s=n(21),u=n(100),l=n.n(u),c=n(101),f=n.n(c),p=n(1),h=n.n(p),d=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m="Illegal argument to WebMercatorViewport",y=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=e.latitude,o=void 0===n?0:n,a=e.longitude,u=void 0===a?0:a,l=e.zoom,c=void 0===l?11:l,f=e.pitch,p=void 0===f?0:f,h=e.bearing,d=void 0===h?0:h,v=e.farZMultiplier,m=void 0===v?10:v,y=e.width,g=e.height,_=e.altitude,b=void 0===_?1.5:_;y=y||1,g=g||1,b=Math.max(.75,b);var x=Object(s.f)({width:y,height:g,pitch:p,altitude:b,farZMultiplier:m}),w=Object(s.g)({height:g,pitch:p,bearing:d,altitude:b}),E=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Object.assign({},e,{position:e.position&&[e.position[0],e.position[1],0],width:y,height:g,viewMatrix:w,longitude:u,latitude:o,zoom:c,projectionMatrix:x,focalDistance:1})));return E.latitude=o,E.longitude=u,E.zoom=c,E.pitch=p,E.bearing=d,E.altitude=b,E.metersToLngLatDelta=E.metersToLngLatDelta.bind(E),E.lngLatDeltaToMeters=E.lngLatDeltaToMeters.bind(E),E.addMetersToLngLat=E.addMetersToLngLat.bind(E),Object.freeze(E),E}return o(t,e),v(t,[{key:"_projectFlat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return Object(s.i)(e,t)}},{key:"_unprojectFlat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return Object(s.l)(e,t)}},{key:"metersToLngLatDelta",value:function(e){var t=d(e,3),n=t[0],r=t[1],i=t[2],o=void 0===i?0:i;h()(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(o),m);var a=this.distanceScales,s=a.pixelsPerMeter,u=a.degreesPerPixel,l=n*s[0]*u[0],c=r*s[1]*u[1];return 2===e.length?[l,c]:[l,c,o]}},{key:"lngLatDeltaToMeters",value:function(e){var t=d(e,3),n=t[0],r=t[1],i=t[2],o=void 0===i?0:i;h()(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(o),m);var a=this.distanceScales,s=a.pixelsPerDegree,u=a.metersPerPixel,l=n*s[0]*u[0],c=r*s[1]*u[1];return 2===e.length?[l,c]:[l,c,o]}},{key:"addMetersToLngLat",value:function(e,t){var n=d(e,3),r=n[0],i=n[1],o=n[2],a=void 0===o?0:o,s=this.metersToLngLatDelta(t),u=d(s,3),l=u[0],c=u[1],f=u[2],p=void 0===f?0:f;return 2===e.length?[r+l,i+c]:[r+l,i+c,a+p]}},{key:"getMapCenterByLngLatPosition",value:function(e){var t=e.lngLat,n=e.pos,r=Object(s.k)(n,this.pixelUnprojectionMatrix),i=Object(s.i)(t,this.scale),o=l()([],i,f()([],r)),a=l()([],this.center,o);return Object(s.l)(a,this.scale)}},{key:"getLocationAtPoint",value:function(e){var t=e.lngLat,n=e.pos;return this.getMapCenterByLngLatPosition({lngLat:t,pos:n})}},{key:"fitBounds",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.width,i=this.height,o=Object(s.b)(Object.assign({width:r,height:i,bounds:e},n));return new t({width:r,height:i,longitude:o.longitude,latitude:o.latitude,zoom:o.zoom})}},{key:"isMapSynched",value:function(){var e={pitch:60,zoom:40},t=this.pitch,n=this.zoom;return t<=e.pitch+1e-6&&n<=e.zoom+1e-6}}]),t}(a.a);t.a=y,y.displayName="WebMercatorViewport"},function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.filter,r=void 0===n?function(){return!0}:n,o=t.map,a=void 0===o?function(e){return e}:o,s=t.result,u=void 0===s?[]:s;return Array.isArray(e)?i(e,r,a,u):r(e)?[a(e)]:[]}function i(e,t,n,r){for(var o=-1;++o<e.length;){var a=e[o];Array.isArray(a)?i(a,t,n,r):t(a)&&r.push(n(a))}return r}function o(e){for(var t=0,n=-1;++n<e.length;){var r=e[n];Array.isArray(r)||ArrayBuffer.isView(r)?t+=o(r):t++}return t}function a(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.result,r=void 0===n?[]:n,i=t.dimensions,o=void 0===i?3:i,s=-1,u=0;++s<e.length;){var l=e[s];Array.isArray(l)||ArrayBuffer.isView(l)?a(l,{result:r,dimensions:o}):u<o&&(r.push(l),u++)}return u>0&&u<o&&r.push(0),r}function s(e){for(var t=e.target,n=e.source,r=e.start,i=void 0===r?0:r,o=e.count,a=void 0===o?1:o,s=n.length,u=a*s,l=0,c=i;l<s;l++)t[c++]=n[l];for(;l<u;)l<u-l?(t.copyWithin(i+l,i,i+l),l*=2):(t.copyWithin(i+l,i,i+u-l),l=u);return t}t.c=r,t.a=o,t.d=a,t.b=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(85),o=n(125),a=n(126),s=n(1),u=n.n(s),l=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f={transitionDuration:0},p={transitionDuration:300,transitionEasing:function(e){return e},transitionInterpolator:new o.a,transitionInterruption:a.a.BREAK},h={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},d=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e),u()(t),this.ViewportState=t,this.viewportState=null,this.viewportStateProps=null,this.eventManager=null,this._events=null,this._state={isDragging:!1},this.events=[],this.handleEvent=this.handleEvent.bind(this),this.setOptions(n),this.constructor===e&&Object.seal(this)}return c(e,[{key:"handleEvent",value:function(e){var t=this.ViewportState;switch(this.viewportState=new t(Object.assign({},this.viewportStateProps,this._state)),e.type){case"panstart":return this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}},{key:"getCenter",value:function(e){var t=e.offsetCenter;return[t.x,t.y]}},{key:"isFunctionKeyPressed",value:function(e){var t=e.srcEvent;return Boolean(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}},{key:"isDragging",value:function(){return this._state.isDragging}},{key:"setOptions",value:function(e){var t=e.onViewportChange,n=e.onStateChange,r=void 0===n?this.onStateChange:n,i=e.eventManager,o=void 0===i?this.eventManager:i,a=e.scrollZoom,s=void 0===a||a,u=e.dragPan,l=void 0===u||u,c=e.dragRotate,f=void 0===c||c,p=e.doubleClickZoom,d=void 0===p||p,v=e.touchZoom,m=void 0===v||v,y=e.touchRotate,g=void 0!==y&&y,_=e.keyboard,b=void 0===_||_;this.onViewportChange=t,this.onStateChange=r,this.viewportStateProps=e,this.eventManager!==o&&(this.eventManager=o,this._events={},this.toggleEvents(this.events,!0));var x=Boolean(this.onViewportChange);this.toggleEvents(h.WHEEL,x&&s),this.toggleEvents(h.PAN,x&&(l||f)),this.toggleEvents(h.PINCH,x&&(m||g)),this.toggleEvents(h.DOUBLE_TAP,x&&d),this.toggleEvents(h.KEYBOARD,x&&b),this.scrollZoom=s,this.dragPan=l,this.dragRotate=f,this.doubleClickZoom=d,this.touchZoom=m,this.touchRotate=g,this.keyboard=b}},{key:"toggleEvents",value:function(e,t){var n=this;this.eventManager&&e.forEach(function(e){n._events[e]!==t&&(n._events[e]=t,t?n.eventManager.on(e,n.handleEvent):n.eventManager.off(e,n.handleEvent))})}},{key:"setState",value:function(e){Object.assign(this._state,e),this.onStateChange&&this.onStateChange(this._state)}},{key:"updateViewport",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.viewportState.getViewportProps(),i=Object.assign({},e.getViewportProps(),t);if(this.onViewportChange&&Object.keys(i).some(function(e){return r[e]!==i[e]})){var o=this.viewportState.getViewport?this.viewportState.getViewport():null;this.onViewportChange(i,o)}this.setState(Object.assign({},e.getInteractiveState(),n))}},{key:"_onPanStart",value:function(e){var t=this.getCenter(e),n=this.viewportState.panStart({pos:t}).rotateStart({pos:t});return this.updateViewport(n,f,{isDragging:!0})}},{key:"_onPan",value:function(e){return this.isFunctionKeyPressed(e)||e.rightButton?this._onPanRotate(e):this._onPanMove(e)}},{key:"_onPanEnd",value:function(e){var t=this.viewportState.panEnd().rotateEnd();return this.updateViewport(t,null,{isDragging:!1})}},{key:"_onPanMove",value:function(e){if(!this.dragPan)return!1;var t=this.getCenter(e),n=this.viewportState.pan({pos:t});return this.updateViewport(n,f,{isDragging:!0})}},{key:"_onPanRotate",value:function(e){return!!this.dragRotate&&(this.viewportState instanceof i.b?this._onPanRotateMap(e):this._onPanRotateStandard(e))}},{key:"_onPanRotateStandard",value:function(e){var t=e.deltaX,n=e.deltaY,r=this.viewportState.getViewportProps(),i=r.width,o=r.height,a=t/i,s=n/o,u=this.viewportState.rotate({deltaScaleX:a,deltaScaleY:s});return this.updateViewport(u,f,{isDragging:!0})}},{key:"_onPanRotateMap",value:function(e){var t=e.deltaX,n=e.deltaY,r=this.getCenter(e),i=l(r,2),o=i[1],a=o-n,s=this.viewportState.getViewportProps(),u=s.width,c=s.height,p=t/u,h=0;n>0?Math.abs(c-a)>5&&(h=n/(a-c)*1.2):n<0&&a>5&&(h=1-o/a),h=Math.min(1,Math.max(-1,h));var d=this.viewportState.rotate({deltaScaleX:p,deltaScaleY:h});return this.updateViewport(d,f,{isDragging:!0})}},{key:"_onWheel",value:function(e){if(!this.scrollZoom)return!1;var t=this.getCenter(e),n=e.delta,r=2/(1+Math.exp(-Math.abs(.01*n)));n<0&&0!==r&&(r=1/r);var i=this.viewportState.zoom({pos:t,scale:r});return this.updateViewport(i,f)}},{key:"_onPinchStart",value:function(e){var t=this.getCenter(e),n=this.viewportState.zoomStart({pos:t}).rotateStart({pos:t});return this._state.startPinchRotation=e.rotation,this.updateViewport(n,f,{isDragging:!0})}},{key:"_onPinch",value:function(e){if(!this.touchZoom&&!this.touchRotate)return!1;var t=this.viewportState;if(this.touchZoom){var n=e.scale,r=this.getCenter(e);t=t.zoom({pos:r,scale:n})}if(this.touchRotate){var i=e.rotation,o=this._state.startPinchRotation;t=t.rotate({deltaScaleX:-(i-o)/180})}return this.updateViewport(t,f,{isDragging:!0})}},{key:"_onPinchEnd",value:function(e){var t=this.viewportState.zoomEnd().rotateEnd();return this._state.startPinchRotation=0,this.updateViewport(t,null,{isDragging:!1})}},{key:"_onDoubleTap",value:function(e){if(!this.doubleClickZoom)return!1;var t=this.getCenter(e),n=this.isFunctionKeyPressed(e),r=this.viewportState.zoom({pos:t,scale:n?.5:2});return this.updateViewport(r,p)}},{key:"_onKeyDown",value:function(e){if(!this.keyboard)return!1;var t=this.isFunctionKeyPressed(e),n=this.viewportState,r=void 0;switch(e.srcEvent.keyCode){case 189:r=t?n.zoomOut().zoomOut():n.zoomOut();break;case 187:r=t?n.zoomIn().zoomIn():n.zoomIn();break;case 37:r=t?n.rotateLeft():n.moveLeft();break;case 39:r=t?n.rotateRight():n.moveRight();break;case 38:r=t?n.rotateUp():n.moveUp();break;case 40:r=t?n.rotateDown():n.moveDown();break;default:return!1}return this.updateViewport(r,p)}}]),e}();t.a=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(223),s=n(86),u=n(1),l=n.n(u),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=["longitude","latitude","zoom","bearing","pitch"],p=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f;r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.propNames=e,n}return o(t,e),c(t,[{key:"initializeProps",value:function(e,t){var n={},r={},i=!0,o=!1,a=void 0;try{for(var u,c=this.propNames[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var f=u.value,p=e[f],h=t[f];l()(Object(s.c)(p)&&Object(s.c)(h),f+" must be supplied for transition"),n[f]=p,r[f]=Object(s.b)(f,p,h)}}catch(e){o=!0,a=e}finally{try{!i&&c.return&&c.return()}finally{if(o)throw a}}return{start:n,end:r}}},{key:"interpolateProps",value:function(e,t,n){var r={},i=!0,o=!1,a=void 0;try{for(var u,l=this.propNames[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var c=u.value;r[c]=Object(s.d)(e[c],t[c],n)}}catch(e){o=!0,a=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw a}}return r}}]),t}(a.a);t.a=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return c});var i=n(125),o=n(86),a=n(1),s=n.n(a),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(){},c={BREAK:1,SNAP_TO_END:2,IGNORE:3},f={transitionDuration:0,transitionEasing:function(e){return e},transitionInterpolator:new i.a,transitionInterruption:c.BREAK,onTransitionStart:l,onTransitionInterrupt:l,onTransitionEnd:l},p={animation:null,propsInTransition:null,startProps:null,endProps:null},h=function(){function e(t){r(this,e),this.props=t,this.state=p,this._onTransitionFrame=this._onTransitionFrame.bind(this)}return u(e,[{key:"getViewportInTransition",value:function(){return this.state.propsInTransition}},{key:"processViewportChange",value:function(e){var t=!1,n=this.props;if(this.props=e,this._shouldIgnoreViewportChange(n,e))return t;var r=this._isTransitionInProgress();if(this._isTransitionEnabled(e)){var i=Object.assign({},n,this.state.interruption===c.SNAP_TO_END?this.state.endProps:this.state.propsInTransition||n);r&&n.onTransitionInterrupt(),e.onTransitionStart(),this._triggerTransition(i,e),t=!0}else r&&(n.onTransitionInterrupt(),this._endTransition());return t}},{key:"_isTransitionInProgress",value:function(){return this.state.propsInTransition}},{key:"_isTransitionEnabled",value:function(e){return e.transitionDuration>0&&e.transitionInterpolator}},{key:"_isUpdateDueToCurrentTransition",value:function(e){return!!this.state.propsInTransition&&this.state.interpolator.arePropsEqual(e,this.state.propsInTransition)}},{key:"_shouldIgnoreViewportChange",value:function(e,t){return this._isTransitionInProgress()?this.state.interruption===c.IGNORE||this._isUpdateDueToCurrentTransition(t):!this._isTransitionEnabled(t)||t.transitionInterpolator.arePropsEqual(e,t)}},{key:"_triggerTransition",value:function(e,t){s()(this._isTransitionEnabled(t),"Transition is not enabled"),cancelAnimationFrame(this.state.animation);var n=t.transitionInterpolator.initializeProps(e,t);this.state={duration:t.transitionDuration,easing:t.transitionEasing,interpolator:t.transitionInterpolator,interruption:t.transitionInterruption,startTime:Date.now(),startProps:n.start,endProps:n.end,animation:null,propsInTransition:{}},this._onTransitionFrame()}},{key:"_onTransitionFrame",value:function(){this.state.animation=requestAnimationFrame(this._onTransitionFrame),this._updateViewport()}},{key:"_endTransition",value:function(){cancelAnimationFrame(this.state.animation),this.state=p}},{key:"_updateViewport",value:function(){var e=Date.now(),t=this.state,n=t.startTime,r=t.duration,i=t.easing,a=t.interpolator,s=t.startProps,u=t.endProps,l=!1,c=(e-n)/r;c>=1&&(c=1,l=!0),c=i(c);var f=a.interpolateProps(s,u,c);this.state.propsInTransition=Object(o.a)(Object.assign({},this.props,f)),this.props.onViewportChange&&this.props.onViewportChange(this.state.propsInTransition,{inTransition:!0}),l&&(this._endTransition(),this.props.onTransitionEnd())}}]),e}();t.b=h,h.defaultProps=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=0,a=function(){function e(){r(this,e),this.id="effect",this.count=o++,this.visible=!0,this.priority=0,this.needsRedraw=!1}return i(e,[{key:"initialize",value:function(e){e.gl,e.layerManager}},{key:"finalize",value:function(e){e.gl,e.layerManager}},{key:"preDraw",value:function(e){e.gl,e.layerManager}},{key:"draw",value:function(e){e.gl,e.layerManager}},{key:"setNeedsRedraw",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.needsRedraw=e}}]),e}();t.a=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(8),s=n(6),u=n(512),l=n(513),c=n(514),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},h=a.d.fp64LowPart,d=a.d.enable64bitSupport,v=[0,0,0,255],m={widthScale:1,widthMinPixels:0,widthMaxPixels:Number.MAX_SAFE_INTEGER,rounded:!1,miterLimit:4,fp64:!1,dashJustified:!1,getPath:function(e){return e.path},getColor:function(e){return e.color||v},getWidth:function(e){return e.width||1},getDashArray:null},y=function(e){var t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]},g=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),f(t,[{key:"getShaders",value:function(){return d(this.props)?{vs:l.a,fs:c.a,modules:["project64","picking"]}:{vs:u.a,fs:c.a,modules:["picking"]}}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instanceStartPositions:{size:3,update:this.calculateStartPositions},instanceEndPositions:{size:3,update:this.calculateEndPositions},instanceLeftDeltas:{size:3,update:this.calculateLeftDeltas},instanceRightDeltas:{size:3,update:this.calculateRightDeltas},instanceStrokeWidths:{size:1,accessor:"getWidth",update:this.calculateStrokeWidths},instanceDashArrays:{size:2,accessor:"getDashArray",update:this.calculateDashArrays},instanceColors:{size:4,type:s.f.UNSIGNED_BYTE,accessor:"getColor",update:this.calculateColors},instancePickingColors:{size:3,type:s.f.UNSIGNED_BYTE,update:this.calculatePickingColors}})}},{key:"updateAttribute",value:function(e){var t=e.props,n=e.oldProps;e.changeFlags;if(t.fp64!==n.fp64){var r=this.getAttributeManager();r.invalidateAll(),t.fp64&&t.coordinateSystem===a.a.LNGLAT?r.addInstanced({instanceStartEndPositions64xyLow:{size:4,update:this.calculateInstanceStartEndPositions64xyLow}}):r.remove(["instanceStartEndPositions64xyLow"])}}},{key:"updateState",value:function(e){var n=e.oldProps,r=e.props,i=e.changeFlags;p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateState",this).call(this,{props:r,oldProps:n,changeFlags:i});var o=this.props.getPath,a=this.getAttributeManager();if(r.fp64!==n.fp64){var s=this.context.gl;this.setState({model:this._getModel(s)})}if(this.updateAttribute({props:r,oldProps:n,changeFlags:i}),i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getPath)){var u=r.data.map(o),l=u.reduce(function(e,t){return e+t.length-1},0);this.setState({paths:u,numInstances:l}),a.invalidateAll()}}},{key:"draw",value:function(e){var t=e.uniforms,n=this.props,r=n.rounded,i=n.miterLimit,o=n.widthScale,a=n.widthMinPixels,s=n.widthMaxPixels,u=n.dashJustified;this.state.model.render(Object.assign({},t,{jointType:Number(r),alignMode:Number(u),widthScale:o,miterLimit:i,widthMinPixels:a,widthMaxPixels:s}))}},{key:"_getModel",value:function(e){var t=[0,2,1,1,2,4,1,4,3,3,4,5],n=[0,0,1,0,-1,0,0,1,0,1,-1,0,1,1,0,1,0,1];return new s.h(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new s.g({drawMode:s.f.TRIANGLES,attributes:{indices:new Uint16Array(t),positions:new Float32Array(n)}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"calculateStartPositions",value:function(e){var t=this.state.paths,n=e.value,r=0;t.forEach(function(e){for(var t=e.length-1,i=0;i<t;i++){var o=e[i];n[r++]=o[0],n[r++]=o[1],n[r++]=o[2]||0}})}},{key:"calculateEndPositions",value:function(e){var t=this.state.paths,n=e.value,r=0;t.forEach(function(e){for(var t=1;t<e.length;t++){var i=e[t];n[r++]=i[0],n[r++]=i[1],n[r++]=i[2]||0}})}},{key:"calculateInstanceStartEndPositions64xyLow",value:function(e){var t=this.state.paths,n=e.value,r=0;t.forEach(function(e){for(var t=e.length-1,i=0;i<t;i++){var o=e[i],a=e[i+1];n[r++]=h(o[0]),n[r++]=h(o[1]),n[r++]=h(a[0]),n[r++]=h(a[1])}})}},{key:"calculateLeftDeltas",value:function(e){var t=this.state.paths,n=e.value,r=0;t.forEach(function(e){for(var t=e.length-1,i=y(e)?e[e.length-2]:e[0],o=0;o<t;o++){var a=e[o];n[r++]=a[0]-i[0],n[r++]=a[1]-i[1],n[r++]=a[2]-i[2]||0,i=a}})}},{key:"calculateRightDeltas",value:function(e){var t=this.state.paths,n=e.value,r=0;t.forEach(function(e){for(var t=1;t<e.length;t++){var i=e[t],o=e[t+1];o||(o=y(e)?e[1]:i),n[r++]=o[0]-i[0],n[r++]=o[1]-i[1],n[r++]=o[2]-i[2]||0}})}},{key:"calculateStrokeWidths",value:function(e){var t=this.props,n=t.data,r=t.getWidth,i=this.state.paths,o=e.value,a=0;i.forEach(function(e,t){for(var i=r(n[t],t),s=1;s<e.length;s++)o[a++]=i})}},{key:"calculateDashArrays",value:function(e){var t=this.props,n=t.data,r=t.getDashArray;if(r){var i=this.state.paths,o=e.value,a=0;i.forEach(function(e,t){for(var i=r(n[t],t),s=1;s<e.length;s++)o[a++]=i[0],o[a++]=i[1]})}}},{key:"calculateColors",value:function(e){var t=this.props,n=t.data,r=t.getColor,i=this.state.paths,o=e.value,a=0;i.forEach(function(e,t){var i=r(n[t],t);isNaN(i[3])&&(i[3]=255);for(var s=1;s<e.length;s++)o[a++]=i[0],o[a++]=i[1],o[a++]=i[2],o[a++]=i[3]})}},{key:"calculatePickingColors",value:function(e){var t=this,n=this.state.paths,r=e.value,i=0;n.forEach(function(e,n){for(var o=t.encodePickingColor(n),a=1;a<e.length;a++)r[i++]=o[0],r[i++]=o[1],r[i++]=o[2]})}}]),t}(a.c);t.a=g,g.layerName="PathLayer",g.defaultProps=m},function(e,t,n){"use strict";function r(e){return e.length>=1&&e[0].length>=2&&Number.isFinite(e[0][0])}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.dimensions;return r(e)?[e]:e}function o(e){return r(e)?e.length:e.reduce(function(e,t){return e+t.length},0)}function a(e){var t=0,n=!0,r=!0,o=!1,a=void 0;try{for(var s,u=i(e)[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var l=s.value,c=l.length;t+=n?c>=3?c-2:0:c+1,n=!1}}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return t}function s(e,t){if(r(e))return void e.forEach(t);var n=0;e.forEach(function(r){r.forEach(function(r,i,o){return t(r,n,e)}),n++})}t.d=i,t.c=o,t.b=a,t.a=s},function(e,t,n){"use strict";function r(e){var t=!0;return(0,i.default)(e,{componentWillUnmount:function(){t=!1}}),function(){return t}}t.__esModule=!0,t.default=r;var i=function(e){return e&&e.__esModule?e:{default:e}}(n(89));e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){var r="",i="",o=t;if("string"===typeof t){if(void 0===n)return e.style[(0,a.default)(t)]||(0,c.default)(e).getPropertyValue((0,u.default)(t));(o={})[t]=n}Object.keys(o).forEach(function(t){var n=o[t];n||0===n?(0,v.default)(t)?i+=t+"("+n+") ":r+=(0,u.default)(t)+": "+n+";":(0,p.default)(e,(0,u.default)(t))}),i&&(r+=h.transform+": "+i+";"),e.style.cssText+=";"+r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(250),a=r(o),s=n(573),u=r(s),l=n(575),c=r(l),f=n(576),p=r(f),h=n(132),d=n(577),v=r(d);e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.animationEnd=t.animationDelay=t.animationTiming=t.animationDuration=t.animationName=t.transitionEnd=t.transitionDuration=t.transitionDelay=t.transitionTiming=t.transitionProperty=t.transform=void 0;var r=n(31),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o="transform",a=void 0,s=void 0,u=void 0,l=void 0,c=void 0,f=void 0,p=void 0,h=void 0,d=void 0,v=void 0,m=void 0;if(i.default){var y=function(){for(var e=document.createElement("div").style,t={O:function(e){return"o"+e.toLowerCase()},Moz:function(e){return e.toLowerCase()},Webkit:function(e){return"webkit"+e},ms:function(e){return"MS"+e}},n=Object.keys(t),r=void 0,i=void 0,o="",a=0;a<n.length;a++){var s=n[a];if(s+"TransitionProperty"in e){o="-"+s.toLowerCase(),r=t[s]("TransitionEnd"),i=t[s]("AnimationEnd");break}}return!r&&"transitionProperty"in e&&(r="transitionend"),!i&&"animationName"in e&&(i="animationend"),e=null,{animationEnd:i,transitionEnd:r,prefix:o}}();a=y.prefix,t.transitionEnd=s=y.transitionEnd,t.animationEnd=u=y.animationEnd,t.transform=o=a+"-"+o,t.transitionProperty=l=a+"-transition-property",t.transitionDuration=c=a+"-transition-duration",t.transitionDelay=p=a+"-transition-delay",t.transitionTiming=f=a+"-transition-timing-function",t.animationName=h=a+"-animation-name",t.animationDuration=d=a+"-animation-duration",t.animationTiming=v=a+"-animation-delay",t.animationDelay=m=a+"-animation-timing-function"}t.transform=o,t.transitionProperty=l,t.transitionTiming=f,t.transitionDelay=p,t.transitionDuration=c,t.transitionEnd=s,t.animationName=h,t.animationDuration=d,t.animationTiming=v,t.animationDelay=m,t.animationEnd=u,t.default={transform:o,end:s,property:l,timing:f,delay:p,duration:c}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}t.__esModule=!0,t.default=void 0;var s=r(n(0)),u=r(n(2)),l=r(n(3)),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(11)),f=function(e){function t(){for(var t,n,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=n=e.call.apply(e,[this].concat(i))||this,n.handleSelect=function(e){var t=n.props,r=t.onSelect,i=t.disabled,o=t.dataItem;r&&!i&&r(o,e)},t||o(n)}return a(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.children,r=e.focused,o=e.selected,a=e.disabled,u=e.activeId,f=this.props.component||"li",p=c.omitOwn(this),h={"rw-state-focus":r,"rw-state-selected":o,"rw-state-disabled":a},d=r?u:void 0;return s.default.createElement(f,i({id:d,role:"option",tabIndex:a?void 0:"-1","aria-selected":!!o,className:(0,l.default)("rw-list-option",t,h),onClick:this.handleSelect},p,{__source:{fileName:"src/ListOption.js",lineNumber:39},__self:this}),n)},t}(s.default.Component);f.propTypes={activeId:u.default.string,dataItem:u.default.any,index:u.default.number,focused:u.default.bool,selected:u.default.bool,disabled:u.default.bool,onSelect:u.default.func,component:u.default.string};var p=f;t.default=p,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function a(e){var t=e.className,n=e.disabled,r=e.readOnly,a=e.value,u=e.tabIndex,f=e.nodeRef,p=e.type,h=void 0===p?"text":p,d=e.component,v=void 0===d?"input":d,m=o(e,["className","disabled","readOnly","value","tabIndex","nodeRef","type","component"]);return s.default.createElement(v,i({},m,{type:h,ref:f,tabIndex:u||0,autoComplete:"off",disabled:n,readOnly:r,"aria-disabled":n,"aria-readonly":r,value:null==a?"":a,className:(0,l.default)(t,"rw-input"),__source:{fileName:c,lineNumber:27},__self:this}))}t.__esModule=!0,t.default=void 0;var s=r(n(0)),u=r(n(2)),l=r(n(3)),c="src/Input.js";a.propTypes={disabled:u.default.bool,readOnly:u.default.bool,value:u.default.string,type:u.default.string,tabIndex:u.default.string,component:u.default.any,nodeRef:u.default.func};var f=a;t.default=f,e.exports=t.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t,n,r,i){var o={};return Object.keys(r).forEach(function(e){o[e]=r[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}function c(e){var t=null==e.date||e.date,n=null==e.time||e.time;return e.format?e.format:t&&n||!t&&!n?H.date.getFormat("default"):H.date.getFormat(t?"date":"time")}function f(e,t,n){var r="";return e instanceof Date&&!isNaN(e.getTime())&&(r=H.date.format(e,t,n)),r}function p(e){return e&&!isNaN(e.getTime())?e:null}t.__esModule=!0,t.default=void 0;var h,d,v,m,y,g,_,b,x,w,E=(i(n(87)),i(n(2))),S=i(n(0)),T=n(12),A=i(n(88)),O=i(n(3)),P=i(n(598)),C=i(n(41)),k=i(n(42)),R=i(n(63)),M=i(n(90)),I=i(n(52)),L=i(n(257)),D=i(n(599)),N=i(n(64)),F=i(n(600)),j=n(32),B=r(n(11)),z=r(n(7)),U=i(n(43)),V=i(n(67)),G=n(33),W=i(n(34)),H=n(13),X=n(26),q="src/DateTimePicker.js",Y={date:"time",time:"date"},Z=function(e,t){return e&&t||!e&&!t},K=l({},L.default.ControlledComponent.propTypes,{value:E.default.instanceOf(Date),onChange:E.default.func,open:E.default.oneOf([!1,"time","date"]),onToggle:E.default.func,currentDate:E.default.instanceOf(Date),onCurrentDateChange:E.default.func,onSelect:E.default.func,min:E.default.instanceOf(Date),max:E.default.instanceOf(Date),step:E.default.number,culture:E.default.string,format:z.dateFormat,timeFormat:z.dateFormat,editFormat:z.dateFormat,date:E.default.bool,time:E.default.bool,calendar:(0,P.default)(E.default.bool,"Use `date` instead"),timeComponent:z.elementType,dropUp:E.default.bool,popupTransition:z.elementType,placeholder:E.default.string,name:E.default.string,autoFocus:E.default.bool,disabled:z.disabled,readOnly:z.disabled,parse:E.default.oneOfType([E.default.arrayOf(E.default.string),E.default.string,E.default.func]),tabIndex:E.default.any,"aria-labelledby":E.default.string,"aria-describedby":E.default.string,onKeyDown:E.default.func,onKeyPress:E.default.func,onBlur:E.default.func,onFocus:E.default.func,inputProps:E.default.object,isRtl:E.default.bool,messages:E.default.shape({dateButton:E.default.string,timeButton:E.default.string})}),Q=(w=x=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=e.call.apply(e,[this].concat(r))||this,o(t,"handleChange",d,s(t)),o(t,"handleKeyDown",v,s(t)),o(t,"handleKeyPress",m,s(t)),o(t,"handleDateSelect",y,s(t)),o(t,"handleTimeSelect",g,s(t)),o(t,"handleCalendarClick",_,s(t)),o(t,"handleTimeClick",b,s(t)),t.attachCalRef=function(e){return t.calRef=e},t.attachTimeRef=function(e){return t.timeRef=e},t.attachInputRef=function(e){return t.inputRef=e},t.parse=function(e){var n=t.props,r=n.parse,i=n.culture,o=n.editFormat,a=c(t.props);r||a||o||invariant(!1);var s,u=[a,o];if("function"==typeof r){if(s=r(e,i))return s}else u=u.concat(r).filter(Boolean);for(var l=0;l<u.length;l++)if(s=H.date.parse(e,u[l],i))return s;return null},t.messages=(0,j.getMessages)(t.props.messages),t.inputId=(0,X.instanceId)(s(t),"_input"),t.dateId=(0,X.instanceId)(s(t),"_date"),t.listId=(0,X.instanceId)(s(t),"_listbox"),t.activeCalendarId=(0,X.instanceId)(s(t),"_calendar_active_cell"),t.activeOptionId=(0,X.instanceId)(s(t),"_listbox_active_option"),t.handleScroll=(0,V.default)(s(t)),t.focusManager=(0,U.default)(s(t),{didHandle:function(e){e||t.close()}}),t.state={focused:!1},t}a(t,e);var n=t.prototype;return n.componentWillReceiveProps=function(e){var t=e.messages;this.messages=(0,j.getMessages)(t)},n.renderInput=function(e){var t=this.props,n=t.open,r=t.value,i=t.editFormat,o=t.culture,a=t.placeholder,s=t.disabled,u=t.readOnly,f=t.name,p=t.tabIndex,h=t.autoFocus,d=t.inputProps,v=t["aria-labelledby"],m=t["aria-describedby"],y=this.state.focused,g=null;return"time"===n?g=this.activeOptionId:"date"===n&&(g=this.activeCalendarId),S.default.createElement(D.default,l({},d,{id:this.inputId,ref:this.attachInputRef,role:"combobox",name:f,tabIndex:p,autoFocus:h,placeholder:a,disabled:s,readOnly:u,value:r,format:c(this.props),editFormat:i,editing:y,culture:o,parse:this.parse,onChange:this.handleChange,"aria-haspopup":!0,"aria-activedescendant":g,"aria-labelledby":v,"aria-describedby":m,"aria-expanded":!!n,"aria-owns":e,__source:{fileName:q,lineNumber:353},__self:this}))},n.renderButtons=function(){var e=this.props,t=e.date,n=e.time,r=e.disabled,i=e.readOnly;if(!t&&!n)return null;var o=this.messages;return S.default.createElement(N.default,{bordered:!0,__source:{fileName:q,lineNumber:390},__self:this},t&&S.default.createElement(I.default,{icon:"calendar",label:o.dateButton(),disabled:r||i,onClick:this.handleCalendarClick,__source:{fileName:q,lineNumber:392},__self:this}),n&&S.default.createElement(I.default,{icon:"clock-o",label:o.timeButton(),disabled:r||i,onClick:this.handleTimeClick,__source:{fileName:q,lineNumber:400},__self:this}))},n.renderCalendar=function(){var e=this,t=this.activeCalendarId,n=this.inputId,r=this.dateId,i=this.props,o=i.open,a=i.value,s=i.popupTransition,u=i.dropUp,c=i.onCurrentDateChange,f=i.currentDate,p=B.pick(this.props,L.default.ControlledComponent);return p.defaultView=this.props.defaultView,S.default.createElement(M.default,{dropUp:u,open:"date"===o,className:"rw-calendar-popup",transition:s,__source:{fileName:q,lineNumber:427},__self:this},S.default.createElement(L.default,l({},p,{id:r,activeId:t,tabIndex:"-1",value:a,autoFocus:!1,onChange:this.handleDateSelect,onNavigate:function(){return e.focus()},currentDate:f,onCurrentDateChange:c,"aria-hidden":!o,"aria-live":"polite","aria-labelledby":n,ref:this.attachCalRef,__source:{fileName:q,lineNumber:433},__self:this})))},n.renderTimeList=function(){var e=this,t=this.activeOptionId,n=this.inputId,r=this.listId,i=this.props,o=i.open,a=i.value,s=i.min,u=i.max,l=i.step,c=i.currentDate,f=i.dropUp,h=i.date,d=i.culture,v=i.timeFormat,m=i.timeComponent,y=i.popupTransition;return S.default.createElement(M.default,{dropUp:f,transition:y,open:"time"===o,onEntering:function(){return e.timeRef.forceUpdate()},__source:{fileName:q,lineNumber:473},__self:this},S.default.createElement("div",{__source:{fileName:q,lineNumber:479},__self:this},S.default.createElement(F.default,{id:r,min:s,max:u,step:l,currentDate:c,activeId:t,format:v,culture:d,value:p(a),onMove:this.handleScroll,onSelect:this.handleTimeSelect,preserveDate:!!h,itemComponent:m,"aria-labelledby":n,"aria-live":o&&"polite","aria-hidden":!o,messages:this.messages,ref:this.attachTimeRef,__source:{fileName:q,lineNumber:480},__self:this})))},n.render=function(){var e=this.props,t=e.className,n=e.date,r=e.time,i=e.open,o=e.disabled,a=e.readOnly,s=e.dropUp,u=this.state.focused,c=B.pickElementProps(this,L.default.ControlledComponent),f=i||(0,X.isFirstFocusedRender)(this),p="";return n&&(p+=this.dateId),r&&(p+=" "+this.listId),S.default.createElement(k.default,l({},c,{open:!!i,dropUp:s,focused:u,disabled:o,readOnly:a,onKeyDown:this.handleKeyDown,onKeyPress:this.handleKeyPress,onBlur:this.focusManager.handleBlur,onFocus:this.focusManager.handleFocus,className:(0,O.default)(t,"rw-datetime-picker"),__source:{fileName:q,lineNumber:522},__self:this}),S.default.createElement(R.default,{__source:{fileName:q,lineNumber:535},__self:this},this.renderInput(p.trim()),this.renderButtons()),!(!f||!r)&&this.renderTimeList(),!(!f||!n)&&this.renderCalendar())},n.focus=function(){this.inputRef&&(0,A.default)()!==(0,T.findDOMNode)(this.inputRef)&&this.inputRef.focus()},n.toggle=function(e){var t=this.props.open;t&&t===e?this.close():this.open(e)},n.open=function(e){var t=this.props,n=t.open,r=t.date,i=t.time,o=t.onToggle;e||(i&&(e="time"),r&&(e="date"),Z(r,i)&&(e=Y[n]||"date")),n!==e&&(0,X.notify)(o,e)},n.close=function(){this.props.open&&(0,X.notify)(this.props.onToggle,!1)},n.inRangeValue=function(e){return null==e?e:W.default.max(W.default.min(e,this.props.max),this.props.min)},t}(S.default.Component),x.displayName="DateTimePicker",x.propTypes=K,x.defaultProps=l({},L.default.ControlledComponent.defaultProps,{value:null,min:new Date(1900,0,1),max:new Date(2099,11,31),date:!0,time:!0,open:!1}),h=w,d=u(h.prototype,"handleChange",[G.widgetEditable],{enumerable:!0,initializer:function(){var e=this;return function(t,n,r){var i=e.props,o=i.onChange,a=i.value;r&&(t=e.inRangeValue(t)),o&&(null==t||null==a?t!=a&&o(t,n):W.default.eq(t,a)||o(t,n))}}}),v=u(h.prototype,"handleKeyDown",[G.widgetEditable],{enumerable:!0,initializer:function(){var e=this;return function(t){var n=e.props,r=n.open,i=n.onKeyDown;(0,X.notify)(i,[t]),t.defaultPrevented||("Escape"===t.key&&r?e.close():t.altKey?"ArrowDown"===t.key?(t.preventDefault(),e.open()):"ArrowUp"===t.key&&(t.preventDefault(),e.close()):r&&("date"===r&&e.calRef.inner.handleKeyDown(t),"time"===r&&e.timeRef.handleKeyDown(t)))}}}),m=u(h.prototype,"handleKeyPress",[G.widgetEditable],{enumerable:!0,initializer:function(){var e=this;return function(t){(0,X.notify)(e.props.onKeyPress,[t]),t.defaultPrevented}}}),y=u(h.prototype,"handleDateSelect",[G.widgetEditable],{enumerable:!0,initializer:function(){var e=this;return function(t){var n=c(e.props),r=W.default.merge(t,e.props.value,e.props.currentDate),i=f(t,n,e.props.culture);e.close(),(0,X.notify)(e.props.onSelect,[r,i]),e.handleChange(r,i,!0),e.focus()}}}),g=u(h.prototype,"handleTimeSelect",[G.widgetEditable],{enumerable:!0,initializer:function(){var e=this;return function(t){var n=c(e.props),r=W.default.merge(e.props.value,t.date,e.props.currentDate),i=f(t.date,n,e.props.culture);e.close(),(0,X.notify)(e.props.onSelect,[r,i]),e.handleChange(r,i,!0),e.focus()}}}),_=u(h.prototype,"handleCalendarClick",[G.widgetEditable],{enumerable:!0,initializer:function(){var e=this;return function(){e.focus(),e.toggle("date")}}}),b=u(h.prototype,"handleTimeClick",[G.widgetEditable],{enumerable:!0,initializer:function(){var e=this;return function(){e.focus(),e.toggle("time")}}}),h),J=(0,C.default)(Q,{open:"onToggle",value:"onChange",currentDate:"onCurrentDateChange"},["focus"]);t.default=J,e.exports=t.default},function(e,t,n){"use strict";function r(){}function i(e){try{return e.then}catch(e){return y=e,g}}function o(e,t){try{return e(t)}catch(e){return y=e,g}}function a(e,t,n){try{e(t,n)}catch(e){return y=e,g}}function s(e){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof e)throw new TypeError("Promise constructor's argument is not a function");this._75=0,this._83=0,this._18=null,this._38=null,e!==r&&v(e,this)}function u(e,t,n){return new e.constructor(function(i,o){var a=new s(r);a.then(i,o),l(e,new d(t,n,a))})}function l(e,t){for(;3===e._83;)e=e._18;if(s._47&&s._47(e),0===e._83)return 0===e._75?(e._75=1,void(e._38=t)):1===e._75?(e._75=2,void(e._38=[e._38,t])):void e._38.push(t);c(e,t)}function c(e,t){m(function(){var n=1===e._83?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._83?f(t.promise,e._18):p(t.promise,e._18));var r=o(n,e._18);r===g?p(t.promise,y):f(t.promise,r)})}function f(e,t){if(t===e)return p(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"===typeof t||"function"===typeof t)){var n=i(t);if(n===g)return p(e,y);if(n===e.then&&t instanceof s)return e._83=3,e._18=t,void h(e);if("function"===typeof n)return void v(n.bind(t),e)}e._83=1,e._18=t,h(e)}function p(e,t){e._83=2,e._18=t,s._71&&s._71(e,t),h(e)}function h(e){if(1===e._75&&(l(e,e._38),e._38=null),2===e._75){for(var t=0;t<e._38.length;t++)l(e,e._38[t]);e._38=null}}function d(e,t,n){this.onFulfilled="function"===typeof e?e:null,this.onRejected="function"===typeof t?t:null,this.promise=n}function v(e,t){var n=!1,r=a(e,function(e){n||(n=!0,f(t,e))},function(e){n||(n=!0,p(t,e))});n||r!==g||(n=!0,p(t,y))}var m=n(262),y=null,g={};e.exports=s,s._47=null,s._71=null,s._44=r,s.prototype.then=function(e,t){if(this.constructor!==s)return u(this,e,t);var n=new s(r);return l(this,new d(e,t,n)),n}},function(e,t,n){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,u=r(e),l=1;l<arguments.length;l++){n=Object(arguments[l]);for(var c in n)o.call(n,c)&&(u[c]=n[c]);if(i){s=i(n);for(var f=0;f<s.length;f++)a.call(n,s[f])&&(u[s[f]]=n[s[f]])}}return u}},function(e,t,n){"use strict";var r={};e.exports=r},function(e,t,n){"use strict";function r(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function i(e,t){if(r(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(var a=0;a<n.length;a++)if(!o.call(t,n[a])||!r(e[n[a]],t[n[a]]))return!1;return!0}var o=Object.prototype.hasOwnProperty;e.exports=i},function(e,t,n){"use strict";function r(e){for(var t=0,n=e;;){var r=n,i=t;if(!r)return i;n=r[1],t=i+1|0}}function i(e){if(e)return e[0];throw[q.failure,"hd"]}function o(e){if(e)return e[1];throw[q.failure,"tl"]}function a(e,t){if(t<0)throw[q.invalid_argument,"List.nth"];for(var n=e,r=t;;){var i=r,o=n;if(o){if(i){r=i-1|0,n=o[1];continue}return o[0]}throw[q.failure,"nth"]}}function s(e,t){for(;;){var n=t,r=e;if(!r)return n;t=[r[0],n],e=r[1]}}function u(e){return s(e,0)}function l(e){return e?X.$at(e[0],l(e[1])):0}function c(e,t){if(t){return[W._1(e,t[0]),c(e,t[1])]}return 0}function f(e,t,n){if(n){return[W._2(t,e,n[0]),f(e+1|0,t,n[1])]}return 0}function p(e,t){return f(0,e,t)}function h(e,t){for(var n=0,r=t;;){var i=r,o=n;if(!i)return o;r=i[1],n=[W._1(e,i[0]),o]}}function d(e,t){for(;;){var n=t;{if(!n)return 0;W._1(e,n[0]),t=n[1]}}}function v(e,t){for(var n=0,r=e,i=t;;){var o=i,a=n;if(!o)return 0;W._2(r,a,o[0]),i=o[1],n=a+1|0}}function m(e,t,n){for(;;){var r=n,i=t;if(!r)return i;n=r[1],t=W._2(e,i,r[0])}}function y(e,t,n){return t?W._2(e,t[0],y(e,t[1],n)):n}function g(e,t,n){if(t){if(n){return[W._2(e,t[0],n[0]),g(e,t[1],n[1])]}throw[q.invalid_argument,"List.map2"]}if(n)throw[q.invalid_argument,"List.map2"];return 0}function _(e,t,n){for(var r=0,i=t,o=n;;){var a=o,s=i,u=r;if(s){if(a){o=a[1],i=s[1],r=[W._2(e,s[0],a[0]),u];continue}throw[q.invalid_argument,"List.rev_map2"]}if(a)throw[q.invalid_argument,"List.rev_map2"];return u}}function b(e,t,n){for(;;){var r=n,i=t;if(i){if(r){W._2(e,i[0],r[0]),n=r[1],t=i[1];continue}throw[q.invalid_argument,"List.iter2"]}if(r)throw[q.invalid_argument,"List.iter2"];return 0}}function x(e,t,n,r){for(;;){var i=r,o=n,a=t;if(o){if(i){r=i[1],n=o[1],t=W._3(e,a,o[0],i[0]);continue}throw[q.invalid_argument,"List.fold_left2"]}if(i)throw[q.invalid_argument,"List.fold_left2"];return a}}function w(e,t,n,r){if(t){if(n)return W._3(e,t[0],n[0],w(e,t[1],n[1],r));throw[q.invalid_argument,"List.fold_right2"]}if(n)throw[q.invalid_argument,"List.fold_right2"];return r}function E(e,t){for(;;){var n=t;if(n){if(W._1(e,n[0])){t=n[1];continue}return 0}return 1}}function S(e,t){for(;;){var n=t;{if(!n)return 0;if(W._1(e,n[0]))return 1;t=n[1]}}}function T(e,t,n){for(;;){var r=n,i=t;if(i){if(r){if(W._2(e,i[0],r[0])){n=r[1],t=i[1];continue}return 0}throw[q.invalid_argument,"List.for_all2"]}if(r)throw[q.invalid_argument,"List.for_all2"];return 1}}function A(e,t,n){for(;;){var r=n,i=t;if(i){if(r){if(W._2(e,i[0],r[0]))return 1;n=r[1],t=i[1];continue}throw[q.invalid_argument,"List.exists2"]}if(r)throw[q.invalid_argument,"List.exists2"];return 0}}function O(e,t){for(;;){var n=t;if(n){if(H.caml_compare(n[0],e)){t=n[1];continue}return 1}return 0}}function P(e,t){for(;;){var n=t;{if(!n)return 0;if(n[0]===e)return 1;t=n[1]}}}function C(e,t){for(;;){var n=t;if(n){var r=n[0];if(H.caml_compare(r[0],e)){t=n[1];continue}return r[1]}throw q.not_found}}function k(e,t){for(;;){var n=t;{if(!n)throw q.not_found;var r=n[0];if(r[0]===e)return r[1];t=n[1]}}}function R(e,t){for(;;){var n=t;if(n){if(H.caml_compare(n[0][0],e)){t=n[1];continue}return 1}return 0}}function M(e,t){for(;;){var n=t;{if(!n)return 0;if(n[0][0]===e)return 1;t=n[1]}}}function I(e,t){if(t){var n=t[1],r=t[0];return H.caml_compare(r[0],e)?[r,I(e,n)]:n}return 0}function L(e,t){if(t){var n=t[1],r=t[0];return r[0]===e?n:[r,L(e,n)]}return 0}function D(e,t){for(;;){var n=t;{if(!n)throw q.not_found;var r=n[0];if(W._1(e,r))return r;t=n[1]}}}function N(e){return function(t){for(var n=0,r=t;;){var i=r,o=n;if(!i)return s(o,0);var a=i[1],u=i[0];W._1(e,u)?(r=a,n=[u,o]):r=a}}}function F(e,t){for(var n=0,r=0,i=t;;){var o=i,a=r,u=n;if(!o)return[s(u,0),s(a,0)];var l=o[1],c=o[0];W._1(e,c)?(i=l,n=[c,u]):(i=l,r=[c,a])}}function j(e){if(e){var t=e[0],n=j(e[1]);return[[t[0],n[0]],[t[1],n[1]]]}return[0,0]}function B(e,t){if(e){if(t)return[[e[0],t[0]],B(e[1],t[1])];throw[q.invalid_argument,"List.combine"]}if(t)throw[q.invalid_argument,"List.combine"];return 0}function z(e,t,n){if(t){if(n){var r=n[0],i=t[0];return W._2(e,i,r)<=0?[i,z(e,t[1],n)]:[r,z(e,t,n[1])]}return t}return n}function U(e,t){for(;;){var n=t,r=e;if(r){if(n){t=n[1],e=r-1|0;continue}throw[q.assert_failure,["list.ml",223,11]]}return n}}function V(e,t){var n=function(t,n){var r=0;if(2!==t)if(3!==t)r=1;else if(n){var o=n[1];if(o){var a=o[1];if(a){var u=a[0],l=o[0],c=n[0];return W._2(e,c,l)<=0?W._2(e,l,u)<=0?[c,[l,[u,0]]]:W._2(e,c,u)<=0?[c,[u,[l,0]]]:[u,[c,[l,0]]]:W._2(e,c,u)<=0?[l,[c,[u,0]]]:W._2(e,l,u)<=0?[l,[u,[c,0]]]:[u,[l,[c,0]]]}r=1}else r=1}else r=1;else if(n){var f=n[1];if(f){var p=f[0],h=n[0];return W._2(e,h,p)<=0?[h,[p,0]]:[p,[h,0]]}r=1}else r=1;if(1===r)for(var d=t>>1,v=t-d|0,m=U(d,n),y=i(d,n),g=i(v,m),_=y,b=g,x=0;;){var w=x,E=b,S=_;if(S){if(E){var T=E[0],A=S[0];if(W._2(e,A,T)>0){x=[A,w],_=S[1];continue}x=[T,w],b=E[1];continue}return s(S,w)}return s(E,w)}},i=function(t,r){var i=0;if(2!==t)if(3!==t)i=1;else if(r){var o=r[1];if(o){var a=o[1];if(a){var u=a[0],l=o[0],c=r[0];return W._2(e,c,l)>0?W._2(e,l,u)>0?[c,[l,[u,0]]]:W._2(e,c,u)>0?[c,[u,[l,0]]]:[u,[c,[l,0]]]:W._2(e,c,u)>0?[l,[c,[u,0]]]:W._2(e,l,u)>0?[l,[u,[c,0]]]:[u,[l,[c,0]]]}i=1}else i=1}else i=1;else if(r){var f=r[1];if(f){var p=f[0],h=r[0];return W._2(e,h,p)>0?[h,[p,0]]:[p,[h,0]]}i=1}else i=1;if(1===i)for(var d=t>>1,v=t-d|0,m=U(d,r),y=n(d,r),g=n(v,m),_=y,b=g,x=0;;){var w=x,E=b,S=_;if(S){if(E){var T=E[0],A=S[0];if(W._2(e,A,T)<=0){x=[A,w],_=S[1];continue}x=[T,w],b=E[1];continue}return s(S,w)}return s(E,w)}},o=r(t);return o<2?t:n(o,t)}function G(e,t){var n=function(t,n){var r=0;if(2!==t)if(3!==t)r=1;else if(n){var o=n[1];if(o){var a=o[1];if(a){var u=a[0],l=o[0],c=n[0],f=W._2(e,c,l);if(f){if(f<0){var p=W._2(e,l,u);if(p){if(p<0)return[c,[l,[u,0]]];var h=W._2(e,c,u);return h?h<0?[c,[u,[l,0]]]:[u,[c,[l,0]]]:[c,[l,0]]}return[c,[l,0]]}var d=W._2(e,c,u);if(d){if(d<0)return[l,[c,[u,0]]];var v=W._2(e,l,u);return v?v<0?[l,[u,[c,0]]]:[u,[l,[c,0]]]:[l,[c,0]]}return[l,[c,0]]}var m=W._2(e,l,u);return m?m<0?[l,[u,0]]:[u,[l,0]]:[l,0]}r=1}else r=1}else r=1;else if(n){var y=n[1];if(y){var g=y[0],_=n[0],b=W._2(e,_,g);return b?b<0?[_,[g,0]]:[g,[_,0]]:[_,0]}r=1}else r=1;if(1===r)for(var x=t>>1,w=t-x|0,E=U(x,n),S=i(x,n),T=i(w,E),A=S,O=T,P=0;;){var C=P,k=O,R=A;if(R){if(k){var M=k[1],I=k[0],L=R[1],D=R[0],N=W._2(e,D,I);if(N){if(N>0){P=[D,C],A=L;continue}P=[I,C],O=M;continue}P=[D,C],O=M,A=L;continue}return s(R,C)}return s(k,C)}},i=function(t,r){var i=0;if(2!==t)if(3!==t)i=1;else if(r){var o=r[1];if(o){var a=o[1];if(a){var u=a[0],l=o[0],c=r[0],f=W._2(e,c,l);if(f){if(f>0){var p=W._2(e,l,u);if(p){if(p>0)return[c,[l,[u,0]]];var h=W._2(e,c,u);return h?h>0?[c,[u,[l,0]]]:[u,[c,[l,0]]]:[c,[l,0]]}return[c,[l,0]]}var d=W._2(e,c,u);if(d){if(d>0)return[l,[c,[u,0]]];var v=W._2(e,l,u);return v?v>0?[l,[u,[c,0]]]:[u,[l,[c,0]]]:[l,[c,0]]}return[l,[c,0]]}var m=W._2(e,l,u);return m?m>0?[l,[u,0]]:[u,[l,0]]:[l,0]}i=1}else i=1}else i=1;else if(r){var y=r[1];if(y){var g=y[0],_=r[0],b=W._2(e,_,g);return b?b>0?[_,[g,0]]:[g,[_,0]]:[_,0]}i=1}else i=1;if(1===i)for(var x=t>>1,w=t-x|0,E=U(x,r),S=n(x,r),T=n(w,E),A=S,O=T,P=0;;){var C=P,k=O,R=A;if(R){if(k){var M=k[1],I=k[0],L=R[1],D=R[0],N=W._2(e,D,I);if(N){if(N<0){P=[D,C],A=L;continue}P=[I,C],O=M;continue}P=[D,C],O=M,A=L;continue}return s(R,C)}return s(k,C)}},o=r(t);return o<2?t:n(o,t)}var W=n(35),H=n(277),X=n(142),q=n(14),Y=X.$at,Z=l,K=N,Q=V,J=V;t.length=r,t.hd=i,t.tl=o,t.nth=a,t.rev=u,t.append=Y,t.rev_append=s,t.concat=Z,t.flatten=l,t.iter=d,t.iteri=v,t.map=c,t.mapi=p,t.rev_map=h,t.fold_left=m,t.fold_right=y,t.iter2=b,t.map2=g,t.rev_map2=_,t.fold_left2=x,t.fold_right2=w,t.for_all=E,t.exists=S,t.for_all2=T,t.exists2=A,t.mem=O,t.memq=P,t.find=D,t.filter=K,t.find_all=N,t.partition=F,t.assoc=C,t.assq=k,t.mem_assoc=R,t.mem_assq=M,t.remove_assoc=I,t.remove_assq=L,t.split=j,t.combine=B,t.sort=Q,t.stable_sort=V,t.fast_sort=J,t.sort_uniq=G,t.merge=z},function(e,t,n){"use strict";function r(e,t){return e<t?-1:e===t?0:1}function i(e,t){return e===t?0:e<t?-1:e>t||e===e?1:t===t?-1:0}function o(e,t){return e===t?0:e<t?-1:1}function a(e,t){return e<t?e:t}function s(e,t){return e<t?e:t}function u(e,t){return e<t?e:t}function l(e,t){return e<t?e:t}function c(e,t){return e<t?e:t}function f(e,t){return e>t?e:t}function p(e,t){return e>t?e:t}function h(e,t){return e>t?e:t}function d(e,t){return e>t?e:t}function v(e,t){return e>t?e:t}var m=r,y=r;t.caml_int_compare=r,t.caml_float_compare=i,t.caml_nativeint_compare=m,t.caml_string_compare=o,t.caml_int32_compare=y,t.caml_int_min=a,t.caml_float_min=s,t.caml_string_min=u,t.caml_nativeint_min=l,t.caml_int32_min=c,t.caml_int_max=f,t.caml_float_max=p,t.caml_string_max=h,t.caml_nativeint_max=d,t.caml_int32_max=v},function(e,t,n){"use strict";function r(e){throw[Oe.failure,e]}function i(e){throw[Oe.invalid_argument,e]}function o(e){return e>=0?e:0|-e}function a(e){return-1^e}function s(e){if(e<0||e>255)throw[Oe.invalid_argument,"char_of_int"];return e}function u(e){return e?"true":"false"}function l(e){switch(e){case"false":return 0;case"true":return 1;default:throw[Oe.invalid_argument,"bool_of_string"]}}function c(e){return""+e}function f(e){for(var t=e.length,n=0;;){var r=n;if(r>=t)return e+".";var i=Se.get(e,r);if(i>=48){if(i>=58)return e;n=r+1|0}else{if(45!==i)return e;n=r+1|0}}}function p(e){return f(Ee.caml_format_float("%.12g",e))}function h(e,t){return e?[e[0],h(e[1],t)]:t}function d(e,t,n){return xe.caml_ml_open_descriptor_out(Ae.not_implemented("caml_sys_open not implemented by bucklescript yet\n"))}function v(e){return d([1,[3,[4,[7,0]]]],438,e)}function m(e){return d([1,[3,[4,[6,0]]]],438,e)}function y(){for(var e=xe.caml_ml_out_channels_list(0);;){var t=e;{if(!t)return 0;try{xe.caml_ml_flush(t[0])}catch(e){}e=t[1]}}}function g(e,t){return xe.caml_ml_output(e,t,0,t.length)}function _(e,t){return xe.caml_ml_output(e,t,0,t.length)}function b(e,t,n,r){if(n<0||r<0||n>(t.length-r|0))throw[Oe.invalid_argument,"output"];return xe.caml_ml_output(e,t,n,r)}function x(e,t,n,r){if(n<0||r<0||n>(t.length-r|0))throw[Oe.invalid_argument,"output_substring"];return xe.caml_ml_output(e,t,n,r)}function w(e,t){return Ae.not_implemented("caml_output_value not implemented by bucklescript yet\n")}function E(e){return xe.caml_ml_flush(e),Ae.not_implemented("caml_ml_close_channel not implemented by bucklescript yet\n")}function S(e){try{xe.caml_ml_flush(e)}catch(e){}try{return Ae.not_implemented("caml_ml_close_channel not implemented by bucklescript yet\n")}catch(e){return 0}}function T(e,t,n){return xe.caml_ml_open_descriptor_in(Ae.not_implemented("caml_sys_open not implemented by bucklescript yet\n"))}function A(e){return T([0,[7,0]],0,e)}function O(e){return T([0,[6,0]],0,e)}function P(e,t,n,r){if(n<0||r<0||n>(t.length-r|0))throw[Oe.invalid_argument,"input"];return Ae.not_implemented("caml_ml_input not implemented by bucklescript yet\n")}function C(e,t,n,r){for(;;){var i=r,o=n;if(i<=0)return 0;var a=Ae.not_implemented("caml_ml_input not implemented by bucklescript yet\n");if(!a)throw Oe.end_of_file;r=i-a|0,n=o+a|0}}function k(e,t,n,r){if(n<0||r<0||n>(t.length-r|0))throw[Oe.invalid_argument,"really_input"];return C(e,t,n,r)}function R(e,t){var n=Se.caml_create_string(t);return k(e,n,0,t),Se.bytes_to_string(n)}function M(e){var t=function(e,t,n){for(;;){var r=n,i=t;if(!r)return e;var o=r[0],a=o.length;Se.caml_blit_bytes(o,0,e,i-a|0,a),n=r[1],t=i-a|0}};return Se.bytes_to_string(function(n,r){for(;;){var i=r,o=n,a=Ae.not_implemented("caml_ml_input_scan_line not implemented by bucklescript yet\n");if(!a){if(o)return t(Se.caml_create_string(i),i,o);throw Oe.end_of_file}if(a>0){var s=Se.caml_create_string(a-1|0);if(Ae.not_implemented("caml_ml_input not implemented by bucklescript yet\n"),xe.caml_ml_input_char(e),o){var u=(i+a|0)-1|0;return t(Se.caml_create_string(u),u,[s,o])}return s}var l=Se.caml_create_string(0|-a);Ae.not_implemented("caml_ml_input not implemented by bucklescript yet\n"),r=i-a|0,n=[l,o]}}(0,0))}function I(){try{return Ae.not_implemented("caml_ml_close_channel not implemented by bucklescript yet\n")}catch(e){return 0}}function L(e){return xe.caml_ml_output_char(Re,e)}function D(e){return _(Re,e)}function N(e){return g(Re,e)}function F(e){return _(Re,""+e)}function j(e){return _(Re,f(Ee.caml_format_float("%.12g",e)))}function B(e){return console.log(e),0}function z(){return xe.caml_ml_output_char(Re,10),xe.caml_ml_flush(Re)}function U(e){return xe.caml_ml_output_char(Me,e)}function V(e){return _(Me,e)}function G(e){return g(Me,e)}function W(e){return _(Me,""+e)}function H(e){return _(Me,f(Ee.caml_format_float("%.12g",e)))}function X(e){return console.error(e),0}function q(){return xe.caml_ml_output_char(Me,10),xe.caml_ml_flush(Me)}function Y(){return xe.caml_ml_flush(Re),M(ke)}function Z(){return Ee.caml_int_of_string((xe.caml_ml_flush(Re),M(ke)))}function K(){return Ee.caml_float_of_string((xe.caml_ml_flush(Re),M(ke)))}function Q(e){return e[1]}function J(e,t){return[Pe.concat_fmt(e[0],t[0]),e[1]+"%,"+t[1]]}function $(e){var t=Ie[0];return Ie[0]=function(){return be._1(e,0),be._1(t,0)},0}function ee(){return be._1(Ie[0],0)}function te(e){return ee(0),we.caml_sys_exit(e)}function ne(e,t){return Ae.not_implemented("caml_ml_output_int not implemented by bucklescript yet\n")}function re(e,t){return Ae.not_implemented("caml_ml_seek_out not implemented by bucklescript yet\n")}function ie(){return Ae.not_implemented("caml_ml_pos_out not implemented by bucklescript yet\n")}function oe(){return Ae.not_implemented("caml_ml_channel_size not implemented by bucklescript yet\n")}function ae(e,t){return Ae.not_implemented("caml_ml_set_binary_mode not implemented by bucklescript yet\n")}function se(){return Ae.not_implemented("caml_ml_input_int not implemented by bucklescript yet\n")}function ue(){return Ae.not_implemented("caml_input_value not implemented by bucklescript yet\n")}function le(e,t){return Ae.not_implemented("caml_ml_seek_in not implemented by bucklescript yet\n")}function ce(){return Ae.not_implemented("caml_ml_pos_in not implemented by bucklescript yet\n")}function fe(){return Ae.not_implemented("caml_ml_channel_size not implemented by bucklescript yet\n")}function pe(){return Ae.not_implemented("caml_ml_close_channel not implemented by bucklescript yet\n")}function he(e,t){return Ae.not_implemented("caml_ml_set_binary_mode not implemented by bucklescript yet\n")}function de(e,t){return Ae.not_implemented("caml_ml_seek_out_64 not implemented by bucklescript yet\n")}function ve(){return Ae.not_implemented("caml_ml_pos_out_64 not implemented by bucklescript yet\n")}function me(){return Ae.not_implemented("caml_ml_channel_size_64 not implemented by bucklescript yet\n")}function ye(e,t){return Ae.not_implemented("caml_ml_seek_in_64 not implemented by bucklescript yet\n")}function ge(){return Ae.not_implemented("caml_ml_pos_in_64 not implemented by bucklescript yet\n")}function _e(){return Ae.not_implemented("caml_ml_channel_size_64 not implemented by bucklescript yet\n")}var be=n(35),xe=n(278),we=n(279),Ee=n(280),Se=n(282),Te=n(97),Ae=n(283),Oe=n(14),Pe=n(284),Ce=Te.create("Pervasives.Exit"),ke=xe.stdin,Re=xe.stdout,Me=xe.stderr,Ie=[y],Le=Number.MAX_VALUE,De=Number.MIN_VALUE,Ne=xe.caml_ml_flush,Fe=xe.caml_ml_output_char,je=xe.caml_ml_output_char,Be=xe.caml_ml_input_char,ze=xe.caml_ml_input_char,Ue=[de,ve,me,ye,ge,_e];t.invalid_arg=i,t.failwith=r,t.Exit=Ce,t.abs=o,t.max_int=2147483647,t.min_int=-2147483648,t.lnot=a,t.infinity=1/0,t.neg_infinity=-1/0,t.nan=NaN,t.max_float=Le,t.min_float=De,t.epsilon_float=2.220446049250313e-16,t.char_of_int=s,t.string_of_bool=u,t.bool_of_string=l,t.string_of_int=c,t.string_of_float=p,t.$at=h,t.stdin=ke,t.stdout=Re,t.stderr=Me,t.print_char=L,t.print_string=D,t.print_bytes=N,t.print_int=F,t.print_float=j,t.print_endline=B,t.print_newline=z,t.prerr_char=U,t.prerr_string=V,t.prerr_bytes=G,t.prerr_int=W,t.prerr_float=H,t.prerr_endline=X,t.prerr_newline=q,t.read_line=Y,t.read_int=Z,t.read_float=K,t.open_out=v,t.open_out_bin=m,t.open_out_gen=d,t.flush=Ne,t.flush_all=y,t.output_char=Fe,t.output_string=_,t.output_bytes=g,t.output=b,t.output_substring=x,t.output_byte=je,t.output_binary_int=ne,t.output_value=w,t.seek_out=re,t.pos_out=ie,t.out_channel_length=oe,t.close_out=E,t.close_out_noerr=S,t.set_binary_mode_out=ae,t.open_in=A,t.open_in_bin=O,t.open_in_gen=T,t.input_char=Be,t.input_line=M,t.input=P,t.really_input=k,t.really_input_string=R,t.input_byte=ze,t.input_binary_int=se,t.input_value=ue,t.seek_in=le,t.pos_in=ce,t.in_channel_length=fe,t.close_in=pe,t.close_in_noerr=I,t.set_binary_mode_in=he,t.LargeFile=Ue,t.string_of_format=Q,t.$caret$caret=J,t.exit=te,t.at_exit=$,t.valid_float_lexem=f,t.unsafe_really_input=C,t.do_at_exit=ee},function(e,t,n){"use strict";function r(e,t){if(0===t)throw s.division_by_zero;return e/t|0}function i(e,t){if(0===t)throw s.division_by_zero;return e%t}function o(e){return(255&e)<<8|(65280&e)>>>8}function a(e){return(255&e)<<24|(65280&e)<<8|(16711680&e)>>>8|(4278190080&e)>>>24}var s=n(14),u=Math.imul||function(e,t){return t|=0,((e>>16)*t<<16)+(65535&e)*t|0},l=a;t.div=r,t.mod_=i,t.caml_bswap16=o,t.caml_int32_bswap=a,t.caml_nativeint_bswap=l,t.imul=u},function(e,t,n){"use strict";var r=String.prototype.repeat&&function(e,t){return t.repeat(e)}||function(e,t){if(0==t.length||0==e)return"";if(t.length*e>=1<<28)throw new RangeError("repeat count must not overflow maximum string size");for(var n="";1==(1&e)&&(n+=t),0!=(e>>>=1);)t+=t;return n};t.repeat=r},function(e,t,n){"use strict";function r(e,t){if(e){if(e<0)throw[T.invalid_argument,"Array.init"];for(var n=E.caml_make_vect(e,x._1(t,0)),r=1,i=e-1|0;r<=i;++r)n[r]=x._1(t,r);return n}return[]}function i(e,t,n){for(var r=E.caml_make_vect(e,[]),i=0,o=e-1|0;i<=o;++i)r[i]=E.caml_make_vect(t,n);return r}function o(e){var t=e.length;return t?E.caml_array_sub(e,0,t):[]}function a(e,t){var n=e.length;return n?t.length?e.concat(t):E.caml_array_sub(e,0,n):o(t)}function s(e,t,n){if(n<0||t>(e.length-n|0))throw[T.invalid_argument,"Array.sub"];return E.caml_array_sub(e,t,n)}function u(e,t,n,r){if(t<0||n<0||t>(e.length-n|0))throw[T.invalid_argument,"Array.fill"];for(var i=t,o=(t+n|0)-1|0;i<=o;++i)e[i]=r;return 0}function l(e,t,n,r,i){if(i<0||t<0||t>(e.length-i|0)||r<0||r>(n.length-i|0))throw[T.invalid_argument,"Array.blit"];return E.caml_array_blit(e,t,n,r,i)}function c(e,t){for(var n=0,r=t.length-1|0;n<=r;++n)x._1(e,t[n]);return 0}function f(e,t){var n=t.length;if(n){for(var r=E.caml_make_vect(n,x._1(e,t[0])),i=1,o=n-1|0;i<=o;++i)r[i]=x._1(e,t[i]);return r}return[]}function p(e,t){for(var n=0,r=t.length-1|0;n<=r;++n)x._2(e,n,t[n]);return 0}function h(e,t){var n=t.length;if(n){for(var r=E.caml_make_vect(n,x._2(e,0,t[0])),i=1,o=n-1|0;i<=o;++i)r[i]=x._2(e,i,t[i]);return r}return[]}function d(e){for(var t=e.length-1|0,n=0;;){var r=n,i=t;if(i<0)return r;n=[e[i],r],t=i-1|0}}function v(e,t){for(;;){var n=t,r=e;if(!n)return r;t=n[1],e=r+1|0}}function m(e){if(!e)return[];for(var t=E.caml_make_vect(v(0,e),e[0]),n=1,r=e[1];;){var i=r,o=n;if(!i)return t;t[o]=i[0],r=i[1],n=o+1|0}}function y(e,t,n){for(var r=t,i=0,o=n.length-1|0;i<=o;++i)r=x._2(e,r,n[i]);return r}function g(e,t,n){for(var r=n,i=t.length-1|0;i>=0;--i)r=x._2(e,t[i],r);return r}function _(e,t){for(var n=function(n,r){var i=1+((r+r|0)+r|0)|0,o=i;if((i+2|0)<n)return x._2(e,E.caml_array_get(t,i),E.caml_array_get(t,i+1|0))<0&&(o=i+1|0),x._2(e,E.caml_array_get(t,o),E.caml_array_get(t,i+2|0))<0&&(o=i+2|0),o;if((i+1|0)<n&&x._2(e,E.caml_array_get(t,i),E.caml_array_get(t,i+1|0))<0)return i+1|0;if(i<n)return i;throw[A,r]},r=t.length,i=((r+1|0)/3|0)-1|0;i>=0;--i)!function(r,i,o){try{for(var a=r,s=i,u=o;;){var l=s,c=n(a,l);if(!(x._2(e,E.caml_array_get(t,c),u)>0))return E.caml_array_set(t,l,u);E.caml_array_set(t,l,E.caml_array_get(t,c)),s=c}}catch(e){var f=w.internalToOCamlException(e);if(f[0]===A)return E.caml_array_set(t,f[1],o);throw f}}(r,i,E.caml_array_get(t,i));for(var o=r-1|0;o>=2;--o){var a=E.caml_array_get(t,o);E.caml_array_set(t,o,E.caml_array_get(t,0)),function(n,r){for(;;){var i=n,o=(i-1|0)/3|0;if(i===o)throw[T.assert_failure,["array.ml",168,4]];if(x._2(e,E.caml_array_get(t,o),r)<0){if(E.caml_array_set(t,i,E.caml_array_get(t,o)),o>0){n=o;continue}return E.caml_array_set(t,0,r)}return E.caml_array_set(t,i,r)}}(function(e,r){try{for(var i=e,o=r;;){var a=o,s=n(i,a);E.caml_array_set(t,a,E.caml_array_get(t,s)),o=s}}catch(e){var u=w.internalToOCamlException(e);if(u[0]===A)return u[1];throw u}}(o,0),a)}if(r>1){var s=E.caml_array_get(t,1);return E.caml_array_set(t,1,E.caml_array_get(t,0)),E.caml_array_set(t,0,s)}return 0}function b(e,t){var n=function(n,r,i,o,a,s,u){for(var c=n+r|0,f=o+a|0,p=n,h=E.caml_array_get(t,n),d=o,v=E.caml_array_get(i,o),m=u;;){var y=m,g=v,_=d,b=h,w=p;if(x._2(e,b,g)<=0){E.caml_array_set(s,y,b);var S=w+1|0;if(S<c){m=y+1|0,h=E.caml_array_get(t,S),p=S;continue}return l(i,_,s,y+1|0,f-_|0)}E.caml_array_set(s,y,g);var T=_+1|0;if(!(T<f))return l(t,w,s,y+1|0,c-w|0);m=y+1|0,v=E.caml_array_get(i,T),d=T}},r=function(n,r,i,o){for(var a=0,s=o-1|0;a<=s;++a){for(var u=E.caml_array_get(t,n+a|0),l=(i+a|0)-1|0;l>=i&&x._2(e,E.caml_array_get(r,l),u)>0;)E.caml_array_set(r,l+1|0,E.caml_array_get(r,l)),l=l-1|0;E.caml_array_set(r,l+1|0,u)}return 0},i=function(e,o,a,s){if(s<=5)return r(e,o,a,s);var u=s/2|0,l=s-u|0;return i(e+u|0,o,a+u|0,l),i(e,t,e+l|0,u),n(e+l|0,u,o,a+u|0,l,o,a)},o=t.length;if(o<=5)return r(0,t,0,o);var a=o/2|0,s=o-a|0,u=E.caml_make_vect(s,E.caml_array_get(t,0));return i(a,u,0,s),i(0,t,s,a),n(s,a,u,0,s,t,0)}var x=n(35),w=n(285),E=n(68),S=n(97),T=n(14),A=S.create("Array.Bottom"),O=i,P=E.caml_array_concat,C=b;t.init=r,t.make_matrix=i,t.create_matrix=O,t.append=a,t.concat=P,t.sub=s,t.copy=o,t.fill=u,t.blit=l,t.to_list=d,t.of_list=m,t.iter=c,t.map=f,t.iteri=p,t.mapi=h,t.fold_left=y,t.fold_right=g,t.sort=_,t.stable_sort=b,t.fast_sort=C},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";var r=n(16),i=n(294),o=n(296),a=n(297),s=n(298),u=n(148),l="undefined"!==typeof window&&window.btoa&&window.btoa.bind(window)||n(299);e.exports=function(e){return new Promise(function(t,c){var f=e.data,p=e.headers;r.isFormData(f)&&delete p["Content-Type"];var h=new XMLHttpRequest,d="onreadystatechange",v=!1;if("undefined"===typeof window||!window.XDomainRequest||"withCredentials"in h||s(e.url)||(h=new window.XDomainRequest,d="onload",v=!0,h.onprogress=function(){},h.ontimeout=function(){}),e.auth){var m=e.auth.username||"",y=e.auth.password||"";p.Authorization="Basic "+l(m+":"+y)}if(h.open(e.method.toUpperCase(),o(e.url,e.params,e.paramsSerializer),!0),h.timeout=e.timeout,h[d]=function(){if(h&&(4===h.readyState||v)&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in h?a(h.getAllResponseHeaders()):null,r=e.responseType&&"text"!==e.responseType?h.response:h.responseText,o={data:r,status:1223===h.status?204:h.status,statusText:1223===h.status?"No Content":h.statusText,headers:n,config:e,request:h};i(t,c,o),h=null}},h.onerror=function(){c(u("Network Error",e,null,h)),h=null},h.ontimeout=function(){c(u("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",h)),h=null},r.isStandardBrowserEnv()){var g=n(300),_=(e.withCredentials||s(e.url))&&e.xsrfCookieName?g.read(e.xsrfCookieName):void 0;_&&(p[e.xsrfHeaderName]=_)}if("setRequestHeader"in h&&r.forEach(p,function(e,t){"undefined"===typeof f&&"content-type"===t.toLowerCase()?delete p[t]:h.setRequestHeader(t,e)}),e.withCredentials&&(h.withCredentials=!0),e.responseType)try{h.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"===typeof e.onDownloadProgress&&h.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){h&&(h.abort(),c(e),h=null)}),void 0===f&&(f=null),h.send(f)})}},function(e,t,n){"use strict";var r=n(295);e.exports=function(e,t,n,i,o){var a=new Error(e);return r(a,t,n,i,o)}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(0),s=(n.n(a),n(2)),u=n.n(s),l=n(45),c=n(154),f=n(73),p=n(21),h=n(74),d=n(61),v=n(179),m=n(388),y=n(180),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_=Object.assign({},c.a.propTypes,{maxZoom:u.a.number,minZoom:u.a.number,maxPitch:u.a.number,minPitch:u.a.number,onViewportChange:u.a.func,transitionDuration:u.a.number,transitionInterpolator:u.a.object,transitionInterruption:u.a.number,transitionEasing:u.a.func,onTransitionStart:u.a.func,onTransitionInterrupt:u.a.func,onTransitionEnd:u.a.func,scrollZoom:u.a.bool,dragPan:u.a.bool,dragRotate:u.a.bool,doubleClickZoom:u.a.bool,touchZoom:u.a.bool,touchRotate:u.a.bool,keyboard:u.a.bool,onHover:u.a.func,onClick:u.a.func,clickRadius:u.a.number,getCursor:u.a.func,visibilityConstraints:u.a.shape({minZoom:u.a.number,maxZoom:u.a.number,minPitch:u.a.number,maxPitch:u.a.number}),mapControls:u.a.shape({events:u.a.arrayOf(u.a.string),handleEvent:u.a.func})}),b=function(e){var t=e.isDragging,n=e.isHovering;return t?m.a.CURSOR.GRABBING:n?m.a.CURSOR.POINTER:m.a.CURSOR.GRAB},x=Object.assign({},c.a.defaultProps,f.a,h.b.defaultProps,{onViewportChange:null,onClick:null,onHover:null,scrollZoom:!0,dragPan:!0,dragRotate:!0,doubleClickZoom:!0,clickRadius:0,getCursor:b,visibilityConstraints:f.a}),w={viewport:u.a.instanceOf(p.a),isDragging:u.a.bool,eventManager:u.a.object},E=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(l.a)(n),Object(y.a)(e),n.state={isDragging:!1,isHovering:!1},n._mapControls=e.mapControls||new v.a,n._eventManager=new d.a(null,{rightButton:!0}),n}return o(t,e),g(t,null,[{key:"supported",value:function(){return c.a.supported()}}]),g(t,[{key:"getChildContext",value:function(){return{viewport:new p.a(this.props),isDragging:this.state.isDragging,eventManager:this._eventManager}}},{key:"componentDidMount",value:function(){var e=this._eventManager;e.on("mousemove",this._onMouseMove),e.on("click",this._onMouseClick),this._mapControls.setOptions(Object.assign({},this.props,{onStateChange:this._onInteractiveStateChange,eventManager:e})),this._transitionManager=new h.b(this.props)}},{key:"componentWillUpdate",value:function(e){this._mapControls.setOptions(e),this._transitionManager.processViewportChange(e)}},{key:"getMap",value:function(){return this._map?this._map.getMap():null}},{key:"queryRenderedFeatures",value:function(e,t){return this._map.queryRenderedFeatures(e,t)}},{key:"_checkVisibilityConstraints",value:function(e){var t=e.visibilityConstraints;for(var n in e){var r=function(e){return e[0].toUpperCase()+e.slice(1)}(n),i="min"+r,o="max"+r;if(i in t&&e[n]<t[i])return!1;if(o in t&&e[n]>t[o])return!1}return!0}},{key:"_getFeatures",value:function(e){var t=e.pos,n=e.radius,r=void 0;if(n){var i=n,o=[[t[0]-i,t[1]+i],[t[0]+i,t[1]-i]];r=this._map.queryRenderedFeatures(o)}else r=this._map.queryRenderedFeatures(t);return r}},{key:"_onInteractiveStateChange",value:function(e){var t=e.isDragging,n=void 0!==t&&t;n!==this.state.isDragging&&this.setState({isDragging:n})}},{key:"_getPos",value:function(e){var t=e.offsetCenter;return[t.x,t.y]}},{key:"_onMouseMove",value:function(e){if(!this.state.isDragging){var t=this._getPos(e),n=this._getFeatures({pos:t,radius:this.props.clickRadius}),r=n&&n.length>0;if(r!==this.state.isHovering&&this.setState({isHovering:r}),this.props.onHover){var i=new p.a(this.props);e.lngLat=i.unproject(t),e.features=n,this.props.onHover(e)}}}},{key:"_onMouseClick",value:function(e){if(this.props.onClick){var t=this._getPos(e),n=new p.a(this.props);e.lngLat=n.unproject(t),e.features=this._getFeatures({pos:t,radius:this.props.clickRadius}),this.props.onClick(e)}}},{key:"_eventCanvasLoaded",value:function(e){this._eventManager.setElement(e)}},{key:"_staticMapLoaded",value:function(e){this._map=e}},{key:"render",value:function(){var e=this.props,t=e.width,n=e.height,r=e.getCursor,i={width:t,height:n,position:"relative",cursor:r(this.state)};return Object(a.createElement)("div",{key:"map-controls",ref:this._eventCanvasLoaded,style:i},Object(a.createElement)(c.a,Object.assign({},this.props,this._transitionManager&&this._transitionManager.getViewportInTransition(),{visible:this._checkVisibilityConstraints(this.props),ref:this._staticMapLoaded,children:this.props.children})))}}]),t}(a.PureComponent);t.a=E,E.displayName="InteractiveMap",E.propTypes=_,E.defaultProps=x,E.childContextTypes=w},function(e,t,n){"use strict";function r(e,t,n,r,o,a,s,u){if(i(t),!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,o,a,s,u],f=0;l=new Error(t.replace(/%s/g,function(){return c[f++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}}var i=function(e){};e.exports=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(){}var s=n(0),u=(n.n(s),n(2)),l=n.n(u),c=n(45),f=n(314),p=n(155),h=n(21),d=n(377),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m="A valid API access token is required to use Mapbox data",y=Object.assign({},d.a.propTypes,{mapStyle:l.a.oneOfType([l.a.string,l.a.object]),preventStyleDiffing:l.a.bool,visible:l.a.bool}),g=Object.assign({},d.a.defaultProps,{mapStyle:"mapbox://styles/mapbox/light-v8",preventStyleDiffing:!1,visible:!0}),_={viewport:l.a.instanceOf(h.a)},b=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._queryParams={},t.supported()||(n.componentDidMount=a,n.componentWillReceiveProps=a,n.componentDidUpdate=a,n.componentWillUnmount=a),n.state={accessTokenInvalid:!1},Object(c.a)(n),n}return o(t,e),v(t,null,[{key:"supported",value:function(){return d.a&&d.a.supported()}}]),v(t,[{key:"getChildContext",value:function(){return{viewport:new h.a(this.props)}}},{key:"componentDidMount",value:function(){var e=this.props.mapStyle;this._mapbox=new d.a(Object.assign({},this.props,{container:this._mapboxMap,onError:this._mapboxMapError,mapStyle:Object(p.a)(e)?e.toJS():e})),this._map=this._mapbox.getMap(),this._updateQueryParams(e)}},{key:"componentWillReceiveProps",value:function(e){this._mapbox.setProps(e),this._updateMapStyle(this.props,e),this.setState({width:this.props.width,height:this.props.height})}},{key:"componentDidUpdate",value:function(){this._updateMapSize(this.state,this.props)}},{key:"componentWillUnmount",value:function(){this._mapbox.finalize(),this._mapbox=null,this._map=null}},{key:"getMap",value:function(){return this._map}},{key:"queryRenderedFeatures",value:function(e,t){var n=t||this._queryParams;return n.layers&&0===n.layers.length?[]:this._map.queryRenderedFeatures(e,n)}},{key:"_updateQueryParams",value:function(e){var t=Object(f.a)(e);this._queryParams={layers:t}}},{key:"_updateMapSize",value:function(e,t){(e.width!==t.width||e.height!==t.height)&&this._map.resize()}},{key:"_updateMapStyle",value:function(e,t){var n=t.mapStyle,r=e.mapStyle;n!==r&&(Object(p.a)(n)?this.props.preventStyleDiffing?this._map.setStyle(n.toJS()):Object(f.b)(r,n,this._map):this._map.setStyle(n),this._updateQueryParams(n))}},{key:"_mapboxMapLoaded",value:function(e){this._mapboxMap=e}},{key:"_mapboxMapError",value:function(e){401!==(e.error&&e.error.status||e.status)||this.state.accessTokenInvalid||(console.error(m),this.setState({accessTokenInvalid:!0}))}},{key:"_renderNoTokenWarning",value:function(){if(this.state.accessTokenInvalid){var e={position:"absolute",left:0,top:0};return Object(s.createElement)("div",{key:"warning",id:"no-token-warning",style:e},[Object(s.createElement)("h3",{key:"header"},m),Object(s.createElement)("div",{key:"text"},"For information on setting up your basemap, read"),Object(s.createElement)("a",{key:"link",href:"https://uber.github.io/react-map-gl/#/Documentation/getting-started/about-mapbox-tokens"},"Note on Map Tokens")])}return null}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.width,r=e.height,i=e.style,o=e.visible,a=Object.assign({},i,{width:n,height:r,position:"relative"}),u=Object.assign({},i,{width:n,height:r,visibility:o?"visible":"hidden"}),l={position:"absolute",left:0,top:0,width:n,height:r,overflow:"hidden"};return Object(s.createElement)("div",{key:"map-container",style:a,children:[Object(s.createElement)("div",{key:"map-mapbox",ref:this._mapboxMapLoaded,style:u,className:t}),Object(s.createElement)("div",{key:"map-overlays",className:"overlays",style:l,children:this.props.children}),this._renderNoTokenWarning()]})}}]),t}(s.PureComponent);t.a=b,b.displayName="StaticMap",b.propTypes=y,b.defaultProps=g,b.childContextTypes=_},function(e,t,n){"use strict";function r(e){return Boolean(e&&e[i])}t.a=r;var i="@@__IMMUTABLE_MAP__@@"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return 2===e.length&&Number.isFinite(e[0])&&Number.isFinite(e[1])}t.b=a;var s=n(99),u=n(18),l=n(317),c=n.n(l),f=n(100),p=n.n(f),h=n(318),d=n.n(h),v=n(319),m=n.n(v),y=n(320),g=n.n(y),_=n(321),b=n.n(_),x=n(322),w=n.n(x),E=n(101),S=n.n(E),T=n(323),A=n.n(T),O=n(324),P=n.n(O),C=n(325),k=n.n(C),R=n(157),M=n.n(R),I=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),L=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Array.isArray(e)&&1===arguments.length?o.copy(e):o.set(e,n),o}return o(t,e),I(t,[{key:"set",value:function(e,t){return c()(this,e,t),this.check(),this}},{key:"add",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;p()(this,this,u)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this}},{key:"subtract",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;d()(this,this,u)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this.check(),this}},{key:"multiply",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;m()(this,this,u)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this.check(),this}},{key:"divide",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;g()(this,this,u)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this.check(),this}},{key:"scale",value:function(e){return Number.isFinite(e)&&b()(this,this,e),this.check(),this}},{key:"scaleAndAdd",value:function(e,t){return w()(this,this,e,t),this.check(),this}},{key:"negate",value:function(){return S()(this,this),this.check(),this}},{key:"normalize",value:function(){return A()(this,this),this.check(),this}},{key:"dot",value:function(e){return P()(this,e)}},{key:"cross",value:function(e){return k()(this,this,e),this.check(),this}},{key:"lerp",value:function(e,t){return M()(this,this,e,t),this.check(),this}},{key:"horizontalAngle",value:function(){return Math.atan2(this.y,this.x)}},{key:"verticalAngle",value:function(){return Math.atan2(this.x,this.y)}},{key:"operation",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,[this,this].concat(n)),this.check(),this}},{key:"ELEMENTS",get:function(){return 2}},{key:"x",get:function(){return this[0]},set:function(e){return this[0]=Object(u.a)(e)}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=Object(u.a)(e)}}]),t}(s.a);t.a=L},function(e,t){function n(e,t,n,r){var i=t[0],o=t[1];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e}e.exports=n},function(e,t){function n(e,t){var n=t[0],r=t[1],i=t[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o),e}e.exports=n},function(e,t){function n(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}e.exports=n},function(e,t){function n(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}e.exports=n},function(e,t){function n(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],u=n[2];return e[0]=i*u-o*s,e[1]=o*a-r*u,e[2]=r*s-i*a,e}e.exports=n},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return 4===e.length&&Number.isFinite(e[0])&&Number.isFinite(e[1])&&Number.isFinite(e[2])&&Number.isFinite(e[3])}t.b=a;var s=n(99),u=n(18),l=n(163),c=n.n(l),f=n(337),p=n.n(f),h=n(164),d=n.n(h),v=n(338),m=n.n(v),y=n(165),g=n.n(y),_=n(339),b=n.n(_),x=n(102),w=n.n(x),E=n(340),S=n.n(E),T=n(341),A=n.n(T),O=n(342),P=n.n(O),C=n(166),k=n.n(C),R=n(167),M=n.n(R),I=n(168),L=n.n(I),D=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),N=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;r(this,t);var s=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Array.isArray(e)&&1===arguments.length?s.copy(e):s.set(e,n,o,a),s}return o(t,e),D(t,[{key:"set",value:function(e,t,n,r){return c()(this,e,t,n,r),this.check(),this}},{key:"distance",value:function(e){return p()(e)}},{key:"add",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;d()(this,this,u)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this.check(),this}},{key:"subtract",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;m()(this,this,u)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this.check(),this}},{key:"multiply",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;g()(this,this,u)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this.check(),this}},{key:"divide",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;b()(this,this,u)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this.check(),this}},{key:"scale",value:function(e){return w()(this,this,e),this.check(),this}},{key:"scaleAndAdd",value:function(e,t){return S()(this,this,e,t),this.check(),this}},{key:"negate",value:function(){return A()(this,this),this.check(),this}},{key:"inverse",value:function(){return P()(this,this),this.check(),this}},{key:"normalize",value:function(){return k()(this,this),this.check(),this}},{key:"dot",value:function(e){return M()(this,e)}},{key:"lerp",value:function(e,t){return L()(this,this,e,t),this.check(),this}},{key:"ELEMENTS",get:function(){return 4}},{key:"x",get:function(){return this[0]},set:function(e){return this[0]=Object(u.a)(e)}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=Object(u.a)(e)}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=Object(u.a)(e)}},{key:"w",get:function(){return this[3]},set:function(e){return this[3]=Object(u.a)(e)}}]),t}(s.a);t.a=N},function(e,t){function n(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e}e.exports=n},function(e,t){function n(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}e.exports=n},function(e,t){function n(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}e.exports=n},function(e,t){function n(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),e[0]=n*a,e[1]=r*a,e[2]=i*a,e[3]=o*a),e}e.exports=n},function(e,t){function n(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}e.exports=n},function(e,t){function n(e,t,n,r){var i=t[0],o=t[1],a=t[2],s=t[3];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e[2]=a+r*(n[2]-a),e[3]=s+r*(n[3]-s),e}e.exports=n},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(69),s=n(18),u=n(156),l=n(70),c=n(162),f=n(1),p=n.n(f),h=n(346),d=n.n(h),v=n(347),m=n.n(v),y=n(348),g=n.n(y),_=n(46),b=n.n(_),x=n(103),w=n.n(x),E=n(47),S=n.n(E),T=n(350),A=n.n(T),O=n(104),P=n.n(O),C=n(56),k=n.n(C),R=n(105),M=n.n(R),I=n(170),L=n.n(I),D=n(71),N=n.n(D),F=n(57),j=n.n(F),B=n(58),z=n.n(B),U=n(351),V=n.n(U),G=n(352),W=n.n(G),H=n(59),X=n.n(H),q=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Y=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Z=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],K=[0,0,0,0],Q=function(e){function t(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Array.isArray(n[0])&&1===arguments.length?a.copy(n[0]):a.identity(),a}return o(t,e),Y(t,[{key:"setRowMajor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,p=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,h=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,d=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,v=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return this.set(e,i,u,p,t,o,l,h,n,a,c,d,r,s,f,v)}},{key:"setColumnMajor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,p=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,h=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,d=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,v=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return this.set(e,t,n,r,i,o,a,s,u,l,c,f,p,h,d,v)}},{key:"set",value:function(e,t,n,r,i,o,a,s,u,l,c,f,p,h,d,v){return this[0]=e,this[1]=t,this[2]=n,this[3]=r,this[4]=i,this[5]=o,this[6]=a,this[7]=s,this[8]=u,this[9]=l,this[10]=c,this[11]=f,this[12]=p,this[13]=h,this[14]=d,this[15]=v,this.check(),this}},{key:"determinant",value:function(){return d()(this)}},{key:"identity",value:function(){for(var e=0;e<Z.length;++e)this[e]=Z[e];return this.check(),this}},{key:"fromQuaternion",value:function(e){return m()(this,e),this.check(),this}},{key:"frustum",value:function(e){var t=e.left,n=e.right,r=e.bottom,i=e.top,o=e.near,a=e.far;return g()(this,t,n,r,i,o,a),this.check(),this}},{key:"lookAt",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.eye,n=e.center,r=void 0===n?[0,0,0]:n,i=e.up,o=void 0===i?[0,1,0]:i;return b()(this,t,r,o),this.check(),this}},{key:"ortho",value:function(e){var t=e.left,n=e.right,r=e.bottom,i=e.top,o=e.near,a=void 0===o?.1:o,s=e.far,u=void 0===s?500:s;return w()(this,t,n,r,i,a,u),this.check(),this}},{key:"perspective",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fov,n=void 0===t?45*Math.PI/180:t,r=e.aspect,i=void 0===r?1:r,o=e.near,a=void 0===o?.1:o,s=e.far,u=void 0===s?500:s;if(n>2*Math.PI)throw Error("radians");return S()(this,n,i,a,u),this.check(),this}},{key:"transpose",value:function(){return A()(this,this),this.check(),this}},{key:"invert",value:function(){return P()(this,this),this.check(),this}},{key:"multiplyLeft",value:function(e){return k()(this,e,this),this.check(),this}},{key:"multiplyRight",value:function(e){return k()(this,this,e),this.check(),this}},{key:"rotateX",value:function(e){return M()(this,this,e),this.check(),this}},{key:"rotateY",value:function(e){return L()(this,this,e),this.check(),this}},{key:"rotateZ",value:function(e){return N()(this,this,e),this.check(),this}},{key:"rotateXYZ",value:function(e){var t=q(e,3),n=t[0],r=t[1],i=t[2];return this.rotateX(n).rotateY(r).rotateZ(i)}},{key:"rotateAxis",value:function(e,t){return N()(this,this,e,t),this.check(),this}},{key:"scale",value:function(e){return j()(this,this,e),this.check(),this}},{key:"translate",value:function(e){return z()(this,this,e),this.check(),this}},{key:"transformVector2",value:function(e,t){return t=t||new u.a,V()(t,e,this),p()(Object(u.b)(t)),t}},{key:"transformVector3",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new l.a;return t=t||new l.a,W()(t,e,this),p()(Object(l.b)(t)),t}},{key:"transformVector4",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new c.a;return t=t||new c.a,X()(t,e,this),p()(Object(c.b)(t)),t}},{key:"transformVector",value:function(e,t){switch(e.length){case 2:return this.transformVector2(e,t);case 3:return this.transformVector3(e,t);case 4:return this.transformVector4(e,t);default:throw new Error("Illegal vector")}}},{key:"transformDirection",value:function(e,t){switch(e.length){case 2:X()(K,[e[0],e[1],0,0],this),t=t||new u.a,t[0]=K[0],t[1]=K[1];break;case 3:X()(K,[e[0],e[1],e[2],0],this),t=t||new l.a,t[0]=K[0],t[1]=K[1],t[2]=K[2];break;case 4:p()(0===e[3]),t=t||new c.a,X()(t,e,this);break;default:throw new Error("Illegal vector")}return t}},{key:"transformPoint",value:function(e,t){switch(e.length){case 2:t=t||new u.a,X()(t,[e[0],e[1],0,1],this),t.length=2,p()(Object(u.b)(t));break;case 3:t=t||new l.a,X()(t,[e[0],e[1],e[2],1],this),t.length=3,p()(Object(l.b)(t));break;case 4:p()(0!==e[3]),t=t||new c.a,X()(t,e,this),p()(Object(c.b)(t));break;default:throw new Error("Illegal vector")}return t}},{key:"ELEMENTS",get:function(){return 16}},{key:"m00",get:function(){return this[0]},set:function(e){return this[0]=Object(s.a)(e)}},{key:"m01",get:function(){return this[4]},set:function(e){return this[4]=Object(s.a)(e)}},{key:"m02",get:function(){return this[8]},set:function(e){return this[8]=Object(s.a)(e)}},{key:"m03",get:function(){return this[12]},set:function(e){return this[12]=Object(s.a)(e)}},{key:"m10",get:function(){return this[1]},set:function(e){return this[1]=Object(s.a)(e)}},{key:"m11",get:function(){return this[5]},set:function(e){return this[5]=Object(s.a)(e)}},{key:"m12",get:function(){return this[9]},set:function(e){return this[9]=Object(s.a)(e)}},{key:"m13",get:function(){return this[13]},set:function(e){return this[13]=Object(s.a)(e)}},{key:"m20",get:function(){return this[2]},set:function(e){return this[2]=Object(s.a)(e)}},{key:"m21",get:function(){return this[6]},set:function(e){return this[6]=Object(s.a)(e)}},{key:"m22",get:function(){return this[10]},set:function(e){return this[10]=Object(s.a)(e)}},{key:"m23",get:function(){return this[14]},set:function(e){return this[14]=Object(s.a)(e)}},{key:"m30",get:function(){return this[3]},set:function(e){return this[3]=Object(s.a)(e)}},{key:"m31",get:function(){return this[7]},set:function(e){return this[7]=Object(s.a)(e)}},{key:"m32",get:function(){return this[11]},set:function(e){return this[11]=Object(s.a)(e)}},{key:"m33",get:function(){return this[15]},set:function(e){return this[15]=Object(s.a)(e)}}]),t}(a.a);t.a=Q},function(e,t){function n(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],u=t[3],l=t[8],c=t[9],f=t[10],p=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-l*r,e[1]=a*i-c*r,e[2]=s*i-f*r,e[3]=u*i-p*r,e[8]=o*r+l*i,e[9]=a*r+c*i,e[10]=s*r+f*i,e[11]=u*r+p*i,e}e.exports=n},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(69),s=n(18),u=n(353),l=n.n(u),c=n(354),f=n.n(c),p=n(355),h=n.n(p),d=n(357),v=n.n(d),m=n(359),y=n.n(m),g=n(360),_=n.n(g),b=n(361),x=n.n(b),w=n(362),E=n.n(w),S=n(363),T=n.n(S),A=n(364),O=n.n(A),P=n(365),C=n.n(P),k=n(366),R=n.n(k),M=n(173),I=n.n(M),L=n(367),D=n.n(L),N=n(368),F=n.n(N),j=n(369),B=n.n(j),z=n(370),U=n.n(z),V=n(371),G=n.n(V),W=n(174),H=n.n(W),X=n(372),q=n.n(X),Y=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Z=[0,0,0,1],K=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;r(this,t);var s=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Array.isArray(e)&&1===arguments.length?s.copy(e):s.set(e,n,o,a),s}return o(t,e),Y(t,[{key:"fromMatrix3",value:function(e){return l()(this,e),this.check(),this}},{key:"fromValues",value:function(e,t,n,r){return this.set(e,t,n,r)}},{key:"identity",value:function(){return f()(this),this.check(),this}},{key:"length",value:function(){return h()(this)}},{key:"squaredLength",value:function(e){return v()(this)}},{key:"dot",value:function(e,t){if(void 0!==t)throw new Error("Quaternion.dot only takes one argument");return y()(this,e)}},{key:"rotationTo",value:function(e,t){return _()(this,e,t),this.check(),this}},{key:"add",value:function(e,t){if(void 0!==t)throw new Error("Quaternion.add only takes one argument");return x()(this,e),this.check(),this}},{key:"calculateW",value:function(){return E()(this,this),this.check(),this}},{key:"conjugate",value:function(){return T()(this,this),this.check(),this}},{key:"invert",value:function(){return O()(this,this),this.check(),this}},{key:"lerp",value:function(e,t,n){return C()(this,e,t,n),this.check(),this}},{key:"multiply",value:function(e,t){if(void 0!==t)throw new Error("Quaternion.multiply only takes one argument");return R()(this,this,t),this.check(),this}},{key:"normalize",value:function(){return I()(this,this),this.check(),this}},{key:"rotateX",value:function(e){return D()(this,this,e),this.check(),this}},{key:"rotateY",value:function(e){return F()(this,this,e),this.check(),this}},{key:"rotateZ",value:function(e){return B()(this,this,e),this.check(),this}},{key:"scale",value:function(e){return U()(this,this,e),this.check(),this}},{key:"set",value:function(e,t,n,r){return G()(this,e,t,n,r),this.check(),this}},{key:"setAxisAngle",value:function(e,t){return H()(this,e,t),this.check(),this}},{key:"slerp",value:function(e){var t=e.start,n=void 0===t?Z:t,r=e.target,i=e.ratio;return q()(this,n,r,i),this.check(),this}},{key:"ELEMENTS",get:function(){return 4}},{key:"x",get:function(){return this[0]},set:function(e){return this[0]=Object(s.a)(e)}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=Object(s.a)(e)}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=Object(s.a)(e)}},{key:"w",get:function(){return this[3]},set:function(e){return this[3]=Object(s.a)(e)}}]),t}(a.a);t.a=K},function(e,t){function n(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}e.exports=n},function(e,t,n){e.exports=n(166)},function(e,t){function n(e,t,n){n*=.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}e.exports=n},function(e,t,n){"use strict";function r(e){var t=e.width,n=e.height,r=e.bounds,a=e.padding,s=void 0===a?0:a,u=e.offset,l=void 0===u?[0,0]:u,c=o(r,2),f=o(c[0],2),p=f[0],h=f[1],d=o(c[1],2),v=d[0],m=d[1],y=new i.a({width:t,height:n,longitude:0,latitude:0,zoom:0}),g=y.project([p,m]),_=y.project([v,h]),b=[Math.abs(_[0]-g[0]),Math.abs(_[1]-g[1])],x=[(_[0]+g[0])/2,(_[1]+g[1])/2],w=(t-2*s-2*Math.abs(l[0]))/b[0],E=(n-2*s-2*Math.abs(l[1]))/b[1],S=y.unproject(x),T=y.zoom+Math.log2(Math.abs(Math.min(w,E)));return{longitude:S[0],latitude:S[1],zoom:T}}t.a=r;var i=n(55),o=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(e,t,n){"use strict";function r(e,t,n){return Array.isArray(e)?e.map(function(e,i){return r(e,t[i],n)}):n*t+(1-n)*e}function i(e){return Number.isFinite(e)||Array.isArray(e)}function o(e){return s[e]}function a(e,t,n){return o(e)&&Math.abs(n-t)>180&&(n=n<0?n+360:n-360),n}t.c=r,t.b=i,t.a=a;var s={longitude:1,bearing:1}},function(e,t,n){"use strict";function r(e){var t={},n=function(){return t};return t.get=function(){return null},t.set=n,t.on=n,t.off=n,t.destroy=n,t.emit=n,t}n.d(t,"a",function(){return s});var i=n(178),o=(n.n(i),n(382)),a=void 0;i.isBrowser&&(a=n(383)),a&&(Object(o.b)(a.PointerEventInput),Object(o.a)(a.MouseInput));var s=a?a.Manager:r;t.b=a},function(e,t,n){(function(t,n){var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i="object"!==("undefined"===typeof t?"undefined":r(t))||"[object process]"!==String(t)||t.browser,o="undefined"!==typeof navigator?navigator.userAgent.toLowerCase():"";e.exports={window:"undefined"!==typeof window?window:n,global:"undefined"!==typeof n?n:window,document:"undefined"!==typeof document?document:{},isBrowser:i,userAgent:o}}).call(t,n(27),n(20))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(73),o=n(106),a=n(74),s=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l={transitionDuration:0},c={transitionDuration:300,transitionEasing:function(e){return e},transitionInterpolator:new o.a,transitionInterruption:a.a.BREAK},f={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},p=function(){function e(){r(this,e),this._state={isDragging:!1},this.events=[],this.handleEvent=this.handleEvent.bind(this)}return u(e,[{key:"handleEvent",value:function(e){switch(this.mapState=this.getMapState(),e.type){case"panstart":return this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}},{key:"getCenter",value:function(e){var t=e.offsetCenter;return[t.x,t.y]}},{key:"isFunctionKeyPressed",value:function(e){var t=e.srcEvent;return Boolean(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}},{key:"setState",value:function(e){Object.assign(this._state,e),this.onStateChange&&this.onStateChange(this._state)}},{key:"updateViewport",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.mapState?this.mapState.getViewportProps():{},i=Object.assign({},e.getViewportProps(),t);this.onViewportChange&&Object.keys(i).some(function(e){return r[e]!==i[e]})&&this.onViewportChange(i),this.setState(Object.assign({},e.getInteractiveState(),n))}},{key:"getMapState",value:function(e){return new i.b(Object.assign({},this.mapStateProps,this._state,e))}},{key:"setOptions",value:function(e){var t=e.onChangeViewport,n=e.touchZoomRotate,r=void 0===n||n,o=e.onViewportChange,a=e.onStateChange,s=void 0===a?this.onStateChange:a,u=e.eventManager,l=void 0===u?this.eventManager:u,c=e.scrollZoom,p=void 0===c||c,h=e.dragPan,d=void 0===h||h,v=e.dragRotate,m=void 0===v||v,y=e.doubleClickZoom,g=void 0===y||y,_=e.touchZoom,b=void 0===_||_,x=e.touchRotate,w=void 0!==x&&x,E=e.keyboard,S=void 0===E||E;this.onViewportChange=o||t,this.onStateChange=s,this.mapStateProps&&this.mapStateProps.height!==e.height&&this.updateViewport(new i.b(e)),this.mapStateProps=e,this.eventManager!==l&&(this.eventManager=l,this._events={},this.toggleEvents(this.events,!0));var T=Boolean(this.onViewportChange);this.toggleEvents(f.WHEEL,T&&p),this.toggleEvents(f.PAN,T&&(d||m)),this.toggleEvents(f.PINCH,T&&r),this.toggleEvents(f.DOUBLE_TAP,T&&g),this.toggleEvents(f.KEYBOARD,T&&S),this.scrollZoom=p,this.dragPan=d,this.dragRotate=m,this.doubleClickZoom=g,this.touchZoom=r&&b,this.touchRotate=r&&w,this.keyboard=S}},{key:"toggleEvents",value:function(e,t){var n=this;this.eventManager&&e.forEach(function(e){n._events[e]!==t&&(n._events[e]=t,t?n.eventManager.on(e,n.handleEvent):n.eventManager.off(e,n.handleEvent))})}},{key:"_onPanStart",value:function(e){var t=this.getCenter(e),n=this.mapState.panStart({pos:t}).rotateStart({pos:t});return this.updateViewport(n,l,{isDragging:!0})}},{key:"_onPan",value:function(e){return this.isFunctionKeyPressed(e)||e.rightButton?this._onPanRotate(e):this._onPanMove(e)}},{key:"_onPanEnd",value:function(e){var t=this.mapState.panEnd().rotateEnd();return this.updateViewport(t,null,{isDragging:!1})}},{key:"_onPanMove",value:function(e){if(!this.dragPan)return!1;var t=this.getCenter(e),n=this.mapState.pan({pos:t});return this.updateViewport(n,l,{isDragging:!0})}},{key:"_onPanRotate",value:function(e){if(!this.dragRotate)return!1;var t=e.deltaX,n=e.deltaY,r=this.getCenter(e),i=s(r,2),o=i[1],a=o-n,u=this.mapState.getViewportProps(),c=u.width,f=u.height,p=t/c,h=0;n>0?Math.abs(f-a)>5&&(h=n/(a-f)*1.2):n<0&&a>5&&(h=1-o/a),h=Math.min(1,Math.max(-1,h));var d=this.mapState.rotate({deltaScaleX:p,deltaScaleY:h});return this.updateViewport(d,l,{isDragging:!0})}},{key:"_onWheel",value:function(e){if(!this.scrollZoom)return!1;var t=this.getCenter(e),n=e.delta,r=2/(1+Math.exp(-Math.abs(.01*n)));n<0&&0!==r&&(r=1/r);var i=this.mapState.zoom({pos:t,scale:r});return this.updateViewport(i,l)}},{key:"_onPinchStart",value:function(e){var t=this.getCenter(e),n=this.mapState.zoomStart({pos:t}).rotateStart({pos:t});return this._state.startPinchRotation=e.rotation,this.updateViewport(n,l,{isDragging:!0})}},{key:"_onPinch",value:function(e){if(!this.touchZoom&&!this.touchRotate)return!1;var t=this.mapState;if(this.touchZoom){var n=e.scale,r=this.getCenter(e);t=t.zoom({pos:r,scale:n})}if(this.touchRotate){var i=e.rotation,o=this._state.startPinchRotation;t=t.rotate({deltaScaleX:-(i-o)/180})}return this.updateViewport(t,l,{isDragging:!0})}},{key:"_onPinchEnd",value:function(e){var t=this.mapState.zoomEnd().rotateEnd();return this._state.startPinchRotation=0,this.updateViewport(t,null,{isDragging:!1})}},{key:"_onDoubleTap",value:function(e){if(!this.doubleClickZoom)return!1;var t=this.getCenter(e),n=this.isFunctionKeyPressed(e),r=this.mapState.zoom({pos:t,scale:n?.5:2});return this.updateViewport(r,c)}},{key:"_onKeyDown",value:function(e){if(!this.keyboard)return!1;var t=this.isFunctionKeyPressed(e),n=this.mapStateProps,r=void 0;switch(e.srcEvent.keyCode){case 189:r=t?this.getMapState({zoom:n.zoom-2}):this.getMapState({zoom:n.zoom-1});break;case 187:r=t?this.getMapState({zoom:n.zoom+2}):this.getMapState({zoom:n.zoom+1});break;case 37:r=t?this.getMapState({bearing:n.bearing-15}):this.mapState.pan({pos:[100,0],startPos:[0,0]});break;case 39:r=t?this.getMapState({bearing:n.bearing+15}):this.mapState.pan({pos:[-100,0],startPos:[0,0]});break;case 38:r=t?this.getMapState({pitch:n.pitch+10}):this.mapState.pan({pos:[0,100],startPos:[0,0]});break;case 40:r=t?this.getMapState({pitch:n.pitch-10}):this.mapState.pan({pos:[0,-100],startPos:[0,0]});break;default:return!1}return this.updateViewport(r,c)}}]),e}();t.a=p},function(e,t,n){"use strict";function r(e){return"react-map-gl: `"+e+"` is deprecated and will be removed in a later version."}function i(e){return"Use `"+e+"` instead."}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.forEach(function(t){if(e.hasOwnProperty(t.old)){var n=r(t.old);t.new&&(n=n+" "+i(t.new)),console.warn(n)}})}t.a=o;var a=[{old:"onChangeViewport",new:"onViewportChange"},{old:"perspectiveEnabled",new:"dragRotate"},{old:"onHoverFeatures",new:"onHover"},{old:"onClickFeatures",new:"onClick"},{old:"touchZoomRotate",new:"touchZoom, touchRotate"}]},function(e,t,n){"use strict";function r(){Object(i.q)([i.m,i.n,o.a,a.a,s.a,i.p]),Object(i.r)([o.a])}Object.defineProperty(t,"__esModule",{value:!0}),t.initializeShaderModules=r;var i=n(6),o=n(84),a=n(210),s=n(211);n.d(t,"fp32",function(){return i.m}),n.d(t,"fp64",function(){return i.n}),n.d(t,"picking",function(){return i.p}),n.d(t,"project",function(){return o.a}),n.d(t,"project64",function(){return a.a}),n.d(t,"lighting",function(){return s.a}),r()},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return o});var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i="object"===("undefined"===typeof e?"undefined":r(e))&&"[object process]"===String(e)&&!e.browser,o=!i}).call(t,n(27))},function(e,t,n){"use strict";(function(e){n.d(t,"b",function(){return r}),n.d(t,"a",function(){return i});var r="undefined"!==typeof window?window:e,i="undefined"!==typeof e?e:window;"undefined"!==typeof document&&document}).call(t,n(20))},function(e,t,n){"use strict";function r(e,t,n){var r=e.width*n,i=e.height*n,o=e.src.replace(/\(/g,"%28").replace(/\)/g,"%29");console.log(t+" %c+",["font-size:1px;","padding:"+Math.floor(i/2)+"px "+Math.floor(r/2)+"px;","line-height:"+i+"px;","background:url("+o+");","background-size:"+r+"px "+i+"px;","color:transparent;"].join(""))}function i(e,t){for(var n=t.maxElts,r=void 0===n?16:n,i=t.size,a=void 0===i?1:i,s="[",u=0;u<e.length&&u<r;++u)u>0&&(s+=","+(u%a===0?" ":"")),s+=o(e[u],t);return s+(e.length>r?"...":"]")}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.isInteger,r=void 0!==n&&n;if(Array.isArray(e)||ArrayBuffer.isView(e))return i(e,t);if(!Number.isFinite(e))return String(e);if(Math.abs(e)<1e-16)return r?"0":"0.";if(r)return e.toFixed(0);if(Math.abs(e)>100&&Math.abs(e)<1e4)return e.toFixed(0);var o=e.toPrecision(2);return o.indexOf(".0")===o.length-2?o.slice(0,-1):o}t.b=o,console.debug=console.debug||console.log;var a={},s={priority:0,table:function(e,t){e<=s.priority&&t&&console.table(t)},log:function(e,t){if(e<=s.priority){for(var n,r=arguments.length,i=Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];(n=console).debug.apply(n,["luma.gl: "+t].concat(i))}},info:function(e,t){if(e<=s.priority){for(var n,r=arguments.length,i=Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];(n=console).log.apply(n,["luma.gl: "+t].concat(i))}},once:function(e,t){if(!a[t]){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];s.log.apply(s,[e,t].concat(r)),a[t]=!0}},warn:function(e){if(!a[e]){for(var t,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=console).warn.apply(t,["luma.gl: "+e].concat(r)),a[e]=!0}},error:function(e){for(var t,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=console).error.apply(t,["luma.gl: "+e].concat(r))},image:function(e){var t=e.priority,n=e.image,i=e.message,o=void 0===i?"":i,a=e.scale,u=void 0===a?1:a;if(!(t>s.priority)&&"undefined"!==typeof window){if("string"===typeof n){var l=new Image;l.onload=r.bind(null,l,o,u),l.src=n}var c=n.nodeName||"";if("img"===c.toLowerCase()&&r(n,o,u),"canvas"===c.toLowerCase()){var f=new Image;f.onload=r.bind(null,f,o,u),f.src=n.toDataURL()}}},deprecated:function(e,t){s.warn("`"+e+"` is deprecated and will be removed in a later version. Use `"+t+"` instead")},removed:function(e,t){s.error("`"+e+"` is no longer supported. Use `"+t+"` instead,   check our Upgrade Guide for more details")},group:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.collapsed,i=void 0!==r&&r;e<=s.priority&&(i?console.groupCollapsed("luma.gl: "+t):console.group("luma.gl: "+t))},groupEnd:function(e,t){e<=s.priority&&console.groupEnd("luma.gl: "+t)},time:function(e,t){e<=s.priority&&(console.time?console.time(t):console.info(t))},timeEnd:function(e,t){e<=s.priority&&(console.timeEnd?console.timeEnd(t):console.info(t))}};t.a=s},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){return e&&32874===e.TEXTURE_BINDING_3D}function o(e,t){return{webgl2:i(e),ext:e.getExtension(t)}}function a(e){e.luma.extensions={};var t=e.getSupportedExtensions(),n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;e.luma[s]=e.getExtension(s)}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}}function s(e,t){var n=t.extension,r=t.target,i=t.target2,o=d[n];p()(o);var a=o.meta,s=void 0===a?{}:a,u=s.suffix,l=void 0===u?"":u,c=e.getExtension(n);Object.keys(o).forEach(function(t){var n=""+t+l,a=null;"meta"===t||"function"===typeof e[t]||(c&&"function"===typeof c[n]?a=function(){return c[n].apply(c,arguments)}:"function"===typeof o[t]&&(a=o[t].bind(r))),a&&(r[t]=a,i[t]=a)})}function u(e,t){var n=t.target,r=t.target2,i=d.OVERRIDES;Object.keys(i).forEach(function(t){if("function"===typeof i[t]){var o=e[t]?e[t].bind(e):function(){},a=i[t].bind(null,e,o);n[t]=a,r[t]=a}})}function l(e){if(e.luma=e.luma||{},a(e),!e.luma.polyfilled){for(var t in d)"overrides"!==t&&s(e,{extension:t,target:e.luma,target2:e});u(e,{target:e.luma,target2:e}),e.luma.polyfilled=!0}return e}t.a=l;var c,f=n(1),p=n.n(f),h=n(407),d=(c={},r(c,"OES_vertex_array_object",{meta:{suffix:"OES"},createVertexArray:function(){p()(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:function(){},bindVertexArray:function(){},isVertexArray:function(){return!1}}),r(c,"ANGLE_instanced_arrays",{meta:{suffix:"ANGLE"},vertexAttribDivisor:function(e,t){p()(0===t,"WebGL instanced rendering not supported")},drawElementsInstanced:function(){},drawArraysInstanced:function(){}}),r(c,"WEBGL_draw_buffers",{meta:{suffix:"WEBGL"},drawBuffers:function(){p()(!1)}}),r(c,"EXT_disjoint_timer_query",{meta:{suffix:"EXT"},createQuery:function(){p()(!1)},deleteQuery:function(){p()(!1)},beginQuery:function(){p()(!1)},endQuery:function(){},getQuery:function(e,t){return this.getQueryObject(e,t)},getQueryParameter:function(e,t){return this.getQueryObject(e,t)},queryCounter:function(){},getQueryObject:function(){}}),r(c,"EXT_disjoint_timer_query_webgl2",{meta:{suffix:"EXT"},queryCounter:null}),r(c,"OVERRIDES",{readBuffer:function(e,t,n){i(e)&&t(n)},getVertexAttrib:function(e,t,n,r){var i=o(e,"ANGLE_instanced_arrays"),a=i.webgl2,s=i.ext,u=void 0;switch(r){case 35069:u=!!a&&void 0;break;case 35070:u=a||s?void 0:0}return void 0!==u?u:t(n,r)},getProgramParameter:function(e,t,n,r){if(!i(e))switch(r){case 35967:return 35981;case 35971:case 35382:return 0}return t(n,r)},getInternalformatParameter:function(e,t,n,r,o){if(!i(e))switch(o){case 32937:return new Int32Array([0])}return e.getInternalformatParameter(n,r,o)},getTexParameter:function(e,t,n,r){switch(r){case 34046:var i=e.luma.extensions,o=i.EXT_texture_filter_anisotropic;r=o&&o.TEXTURE_MAX_ANISOTROPY_EXT||34046}return t(n,r)},getParameter:h.a,hint:function(e,t,n,r){return t(n,r)}}),c)},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n={};for(var r in t){var i=w[r];i&&("string"===typeof i?n[i]=!0:i(e,t[r],Number(r)))}var o=e.state&&e.state.cache;if(o){var a=Object.assign({},o,t);for(var s in n){(0,E[s])(e,a)}}}function a(e,t){var n=T[t];return n?n(e,Number(t)):e.getParameter(Number(t))}function s(e,t){t=t||m;var n=Array.isArray(t)?t:Object.keys(t),r={},i=!0,o=!1,s=void 0;try{for(var u,l=n[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var c=u.value;r[c]=a(e,c)}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}return r}function u(e){return Object.assign({},m,{})}function l(e){o(e,u(e))}n.d(t,"a",function(){return m}),t.d=o,t.b=s,t.c=l;var c,f,p,h=n(28),d=n(4),v=n(1),m=(n.n(v),c={},i(c,h.a.BLEND,!1),i(c,h.a.BLEND_COLOR,new Float32Array([0,0,0,0])),i(c,h.a.BLEND_EQUATION_RGB,h.a.FUNC_ADD),i(c,h.a.BLEND_EQUATION_ALPHA,h.a.FUNC_ADD),i(c,h.a.BLEND_SRC_RGB,h.a.ONE),i(c,h.a.BLEND_DST_RGB,h.a.ZERO),i(c,h.a.BLEND_SRC_ALPHA,h.a.ONE),i(c,h.a.BLEND_DST_ALPHA,h.a.ZERO),i(c,h.a.COLOR_CLEAR_VALUE,new Float32Array([0,0,0,0])),i(c,h.a.COLOR_WRITEMASK,[!0,!0,!0,!0]),i(c,h.a.CULL_FACE,!1),i(c,h.a.CULL_FACE_MODE,h.a.BACK),i(c,h.a.DEPTH_TEST,!1),i(c,h.a.DEPTH_CLEAR_VALUE,1),i(c,h.a.DEPTH_FUNC,h.a.LESS),i(c,h.a.DEPTH_RANGE,new Float32Array([0,1])),i(c,h.a.DEPTH_WRITEMASK,!0),i(c,h.a.DITHER,!0),i(c,h.a.FRAMEBUFFER_BINDING,null),i(c,h.a.FRONT_FACE,h.a.CCW),i(c,h.a.GENERATE_MIPMAP_HINT,h.a.DONT_CARE),i(c,h.a.LINE_WIDTH,1),i(c,h.a.POLYGON_OFFSET_FILL,!1),i(c,h.a.POLYGON_OFFSET_FACTOR,0),i(c,h.a.POLYGON_OFFSET_UNITS,0),i(c,h.a.SAMPLE_COVERAGE_VALUE,1),i(c,h.a.SAMPLE_COVERAGE_INVERT,!1),i(c,h.a.SCISSOR_TEST,!1),i(c,h.a.SCISSOR_BOX,new Int32Array([0,0,1024,1024])),i(c,h.a.STENCIL_TEST,!1),i(c,h.a.STENCIL_CLEAR_VALUE,0),i(c,h.a.STENCIL_WRITEMASK,4294967295),i(c,h.a.STENCIL_BACK_WRITEMASK,4294967295),i(c,h.a.STENCIL_FUNC,h.a.ALWAYS),i(c,h.a.STENCIL_REF,0),i(c,h.a.STENCIL_VALUE_MASK,4294967295),i(c,h.a.STENCIL_BACK_FUNC,h.a.ALWAYS),i(c,h.a.STENCIL_BACK_REF,0),i(c,h.a.STENCIL_BACK_VALUE_MASK,4294967295),i(c,h.a.STENCIL_FAIL,h.a.KEEP),i(c,h.a.STENCIL_PASS_DEPTH_FAIL,h.a.KEEP),i(c,h.a.STENCIL_PASS_DEPTH_PASS,h.a.KEEP),i(c,h.a.STENCIL_BACK_FAIL,h.a.KEEP),i(c,h.a.STENCIL_BACK_PASS_DEPTH_FAIL,h.a.KEEP),i(c,h.a.STENCIL_BACK_PASS_DEPTH_PASS,h.a.KEEP),i(c,h.a.VIEWPORT,new Int32Array([0,0,1024,1024])),i(c,h.a.PACK_ALIGNMENT,4),i(c,h.a.UNPACK_ALIGNMENT,4),i(c,h.a.UNPACK_FLIP_Y_WEBGL,!1),i(c,h.a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),i(c,h.a.UNPACK_COLORSPACE_CONVERSION_WEBGL,h.a.BROWSER_DEFAULT_WEBGL),i(c,h.a.FRAGMENT_SHADER_DERIVATIVE_HINT,h.a.DONT_CARE),i(c,h.a.READ_FRAMEBUFFER_BINDING,null),i(c,h.a.RASTERIZER_DISCARD,!1),i(c,h.a.PACK_ROW_LENGTH,0),i(c,h.a.PACK_SKIP_PIXELS,0),i(c,h.a.PACK_SKIP_ROWS,0),i(c,h.a.UNPACK_ROW_LENGTH,0),i(c,h.a.UNPACK_IMAGE_HEIGHT,0),i(c,h.a.UNPACK_SKIP_PIXELS,0),i(c,h.a.UNPACK_SKIP_ROWS,0),i(c,h.a.UNPACK_SKIP_IMAGES,0),c),y=function(e,t,n){return t?e.enable(n):e.disable(n)},g=function(e,t,n){return e.hint(n,t)},_=function(e,t,n){return e.pixelStorei(n,t)},b=function(e,t){var n=Object(d.h)(e)?h.a.DRAW_FRAMEBUFFER:h.a.FRAMEBUFFER;return e.bindFramebuffer(n,t)},x=function(e,t){return e.bindFramebuffer(h.a.READ_FRAMEBUFFER,t)},w=(f={},i(f,h.a.BLEND,y),i(f,h.a.BLEND_COLOR,function(e,t){return e.blendColor.apply(e,r(t))}),i(f,h.a.BLEND_EQUATION_RGB,"blendEquation"),i(f,h.a.BLEND_EQUATION_ALPHA,"blendEquation"),i(f,h.a.BLEND_SRC_RGB,"blendFunc"),i(f,h.a.BLEND_DST_RGB,"blendFunc"),i(f,h.a.BLEND_SRC_ALPHA,"blendFunc"),i(f,h.a.BLEND_DST_ALPHA,"blendFunc"),i(f,h.a.COLOR_CLEAR_VALUE,function(e,t){return e.clearColor.apply(e,r(t))}),i(f,h.a.COLOR_WRITEMASK,function(e,t){return e.colorMask.apply(e,r(t))}),i(f,h.a.CULL_FACE,y),i(f,h.a.CULL_FACE_MODE,function(e,t){return e.cullFace(t)}),i(f,h.a.DEPTH_TEST,y),i(f,h.a.DEPTH_CLEAR_VALUE,function(e,t){return e.clearDepth(t)}),i(f,h.a.DEPTH_FUNC,function(e,t){return e.depthFunc(t)}),i(f,h.a.DEPTH_RANGE,function(e,t){return e.depthRange.apply(e,r(t))}),i(f,h.a.DEPTH_WRITEMASK,function(e,t){return e.depthMask(t)}),i(f,h.a.DITHER,y),i(f,h.a.FRAGMENT_SHADER_DERIVATIVE_HINT,g),i(f,h.a.FRAMEBUFFER_BINDING,b),i(f,h.a.FRONT_FACE,function(e,t){return e.frontFace(t)}),i(f,h.a.GENERATE_MIPMAP_HINT,g),i(f,h.a.LINE_WIDTH,function(e,t){return e.lineWidth(t)}),i(f,h.a.POLYGON_OFFSET_FILL,y),i(f,h.a.POLYGON_OFFSET_FACTOR,"polygonOffset"),i(f,h.a.POLYGON_OFFSET_UNITS,"polygonOffset"),i(f,h.a.RASTERIZER_DISCARD,y),i(f,h.a.SAMPLE_COVERAGE_VALUE,"sampleCoverage"),i(f,h.a.SAMPLE_COVERAGE_INVERT,"sampleCoverage"),i(f,h.a.SCISSOR_TEST,y),i(f,h.a.SCISSOR_BOX,function(e,t){return e.scissor.apply(e,r(t))}),i(f,h.a.STENCIL_TEST,y),i(f,h.a.STENCIL_CLEAR_VALUE,function(e,t){return e.clearStencil(t)}),i(f,h.a.STENCIL_WRITEMASK,function(e,t){return e.stencilMaskSeparate(h.a.FRONT,t)}),i(f,h.a.STENCIL_BACK_WRITEMASK,function(e,t){return e.stencilMaskSeparate(h.a.BACK,t)}),i(f,h.a.STENCIL_FUNC,"stencilFuncFront"),i(f,h.a.STENCIL_REF,"stencilFuncFront"),i(f,h.a.STENCIL_VALUE_MASK,"stencilFuncFront"),i(f,h.a.STENCIL_BACK_FUNC,"stencilFuncBack"),i(f,h.a.STENCIL_BACK_REF,"stencilFuncBack"),i(f,h.a.STENCIL_BACK_VALUE_MASK,"stencilFuncBack"),i(f,h.a.STENCIL_FAIL,"stencilOpFront"),i(f,h.a.STENCIL_PASS_DEPTH_FAIL,"stencilOpFront"),i(f,h.a.STENCIL_PASS_DEPTH_PASS,"stencilOpFront"),i(f,h.a.STENCIL_BACK_FAIL,"stencilOpBack"),i(f,h.a.STENCIL_BACK_PASS_DEPTH_FAIL,"stencilOpBack"),i(f,h.a.STENCIL_BACK_PASS_DEPTH_PASS,"stencilOpBack"),i(f,h.a.VIEWPORT,function(e,t){return e.viewport.apply(e,r(t))}),i(f,h.a.PACK_ALIGNMENT,_),i(f,h.a.UNPACK_ALIGNMENT,_),i(f,h.a.UNPACK_FLIP_Y_WEBGL,_),i(f,h.a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,_),i(f,h.a.UNPACK_COLORSPACE_CONVERSION_WEBGL,_),i(f,h.a.PACK_ROW_LENGTH,_),i(f,h.a.PACK_SKIP_PIXELS,_),i(f,h.a.PACK_SKIP_ROWS,_),i(f,h.a.READ_FRAMEBUFFER_BINDING,x),i(f,h.a.UNPACK_ROW_LENGTH,_),i(f,h.a.UNPACK_IMAGE_HEIGHT,_),i(f,h.a.UNPACK_SKIP_PIXELS,_),i(f,h.a.UNPACK_SKIP_ROWS,_),i(f,h.a.UNPACK_SKIP_IMAGES,_),f),E={blendEquation:function(e,t){return e.blendEquationSeparate(t[h.a.BLEND_EQUATION_RGB],t[h.a.BLEND_EQUATION_ALPHA])},blendFunc:function(e,t){return e.blendFuncSeparate(t[h.a.BLEND_SRC_RGB],t[h.a.BLEND_DST_RGB],t[h.a.BLEND_SRC_ALPHA],t[h.a.BLEND_DST_ALPHA])},polygonOffset:function(e,t){return e.polygonOffset(t[h.a.POLYGON_OFFSET_FACTOR],t[h.a.POLYGON_OFFSET_UNITS])},sampleCoverage:function(e,t){return e.sampleCoverage(t[h.a.SAMPLE_COVERAGE_VALUE],t[h.a.SAMPLE_COVERAGE_INVERT])},stencilFuncFront:function(e,t){return e.stencilFuncSeparate(h.a.FRONT,t[h.a.STENCIL_FUNC],t[h.a.STENCIL_REF],t[h.a.STENCIL_VALUE_MASK])},stencilFuncBack:function(e,t){return e.stencilFuncSeparate(h.a.BACK,t[h.a.STENCIL_BACK_FUNC],t[h.a.STENCIL_BACK_REF],t[h.a.STENCIL_BACK_VALUE_MASK])},stencilOpFront:function(e,t){return e.stencilOpSeparate(h.a.FRONT,t[h.a.STENCIL_FAIL],t[h.a.STENCIL_PASS_DEPTH_FAIL],t[h.a.STENCIL_PASS_DEPTH_PASS])},stencilOpBack:function(e,t){return e.stencilOpSeparate(h.a.BACK,t[h.a.STENCIL_BACK_FAIL],t[h.a.STENCIL_BACK_PASS_DEPTH_FAIL],t[h.a.STENCIL_BACK_PASS_DEPTH_PASS])}},S=function(e,t){return e.isEnabled(t)},T=(p={},i(p,h.a.BLEND,S),i(p,h.a.CULL_FACE,S),i(p,h.a.DEPTH_TEST,S),i(p,h.a.DITHER,S),i(p,h.a.POLYGON_OFFSET_FILL,S),i(p,h.a.SAMPLE_ALPHA_TO_COVERAGE,S),i(p,h.a.SAMPLE_COVERAGE,S),i(p,h.a.SCISSOR_TEST,S),i(p,h.a.STENCIL_TEST,S),i(p,h.a.RASTERIZER_DISCARD,S),p)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"m",function(){return O}),n.d(t,"a",function(){return C}),n.d(t,"h",function(){return u}),n.d(t,"f",function(){return c}),n.d(t,"i",function(){return p}),n.d(t,"d",function(){return d}),n.d(t,"e",function(){return m}),n.d(t,"g",function(){return g}),n.d(t,"k",function(){return b}),n.d(t,"l",function(){return w}),n.d(t,"c",function(){return S}),n.d(t,"j",function(){return A}),n.d(t,"b",function(){return P});var i=n(76),o=function e(){r(this,e)},a=i.default.globals.headlessTypes||i.global,s=a.WebGLRenderingContext,u=void 0===s?o:s,l=a.WebGLProgram,c=void 0===l?o:l,f=a.WebGLShader,p=void 0===f?o:f,h=a.WebGLBuffer,d=void 0===h?o:h,v=a.WebGLFramebuffer,m=void 0===v?o:v,y=a.WebGLRenderbuffer,g=void 0===y?o:y,_=a.WebGLTexture,b=void 0===_?o:_,x=a.WebGLUniformLocation,w=void 0===x?o:x,E=a.WebGLActiveInfo,S=void 0===E?o:E,T=a.WebGLShaderPrecisionFormat,A=void 0===T?o:T,O=u!==o&&c!==o&&p!==o&&d!==o&&m!==o&&g!==o&&b!==o&&w!==o&&S!==o&&A!==o,P=function(){var e=function e(){r(this,e)};return i.global.WebGL2RenderingContext||e}(),C=function(){var e=function e(){r(this,e)};return i.global.Image||e}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return e.luma=e.luma||{},e.luma}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.debug;return null===e?null:n?s(e):a(e)}function a(e){if(null===e)return null;var t=i(e);return t.realContext?t.realContext:e}function s(e){if(null===e)return null;var t=i(e);if(t.realContext)return e;if(t.debugContext)return t.debugContext;var n=function e(){r(this,e)},o=p.a.makeDebugContext(e,l,c);return Object.assign(n.prototype,o),t.debugContext=o,o.debug=!0,o.gl=e,o}function u(e,t){var n=p.a.glFunctionArgsToString(e,t);return n=n.slice(0,100)+(n.length>100?"...":""),"gl."+e+"("+n+")"}function l(e,t,n){if(!h.f.nothrow){var r=p.a.glEnumToString(e),i=p.a.glFunctionArgsToString(t,n);throw new Error(r+" in gl."+t+"("+i+")")}}function c(e,t){if(h.f.debug){var n=void 0;if(h.f.priority>=4&&(n=u(e,t),h.f.info(4,""+n)),h.f.break){n=n||u(e,t);h.f.break&&h.f.break.every(function(e){return-1!==n.indexOf(e)})}var r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){if(void 0===a.value)throw n=n||u(e,t),new Error("Undefined argument: "+n)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}}t.a=o;var f=n(408),p=n.n(f),h=n(5),d=n(189);Object(d.a)()},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(){p.a.PARAMETERS=_,h.a.PARAMETERS=b,d.a.ATTACHMENT_PARAMETERS=x,d.a.STATUS=w,v.a.PARAMETERS=E,m.a.PARAMETERS=S,y.a.PARAMETERS=T,g.a.PARAMETERS=A}t.a=i;var o,a,s,u,l,c,f=n(28),p=n(48),h=n(190),d=n(49),v=n(80),m=n(79),y=n(192),g=n(38),_=(o={},r(o,f.a.BUFFER_SIZE,{webgl1:0}),r(o,f.a.BUFFER_USAGE,{webgl1:0}),o),b=[f.a.OBJECT_TYPE,f.a.SYNC_STATUS,f.a.SYNC_CONDITION,f.a.SYNC_FLAGS],x=[f.a.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME,f.a.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE,f.a.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE,f.a.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL,f.a.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING,f.a.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER,f.a.FRAMEBUFFER_ATTACHMENT_RED_SIZE,f.a.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE,f.a.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE,f.a.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE,f.a.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE,f.a.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE,f.a.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE],w=(a={},r(a,f.a.FRAMEBUFFER_COMPLETE,"Success. Framebuffer is correctly set up"),r(a,f.a.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,"Framebuffer attachment types mismatched or some attachment point not attachment complete"),r(a,f.a.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT,"Framebuffer has no attachment"),r(a,f.a.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,"Framebuffer attachments do not have the same size"),r(a,f.a.FRAMEBUFFER_UNSUPPORTED,"Framebuffer attachment format not supported or depth and stencil attachments are not same"),r(a,f.a.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE,"Framebuffer attachement SAMPLES differs among renderbuffers, or are mixed with textures"),a),E=(s={},r(s,f.a.DELETE_STATUS,{webgl1:0}),r(s,f.a.LINK_STATUS,{webgl1:0}),r(s,f.a.VALIDATE_STATUS,{webgl1:0}),r(s,f.a.ATTACHED_SHADERS,{webgl1:0}),r(s,f.a.ACTIVE_ATTRIBUTES,{webgl1:0}),r(s,f.a.ACTIVE_UNIFORMS,{webgl1:0}),r(s,f.a.TRANSFORM_FEEDBACK_BUFFER_MODE,{webgl2:0}),r(s,f.a.TRANSFORM_FEEDBACK_VARYINGS,{webgl2:0}),r(s,f.a.ACTIVE_UNIFORM_BLOCKS,{webgl2:0}),s),S=(u={},r(u,f.a.RENDERBUFFER_WIDTH,{webgl1:0}),r(u,f.a.RENDERBUFFER_HEIGHT,{webgl1:0}),r(u,f.a.RENDERBUFFER_INTERNAL_FORMAT,{type:"GLenum",webgl1:f.a.RGBA4}),r(u,f.a.RENDERBUFFER_GREEN_SIZE,{webgl1:0}),r(u,f.a.RENDERBUFFER_BLUE_SIZE,{webgl1:0}),r(u,f.a.RENDERBUFFER_RED_SIZE,{webgl1:0}),r(u,f.a.RENDERBUFFER_ALPHA_SIZE,{webgl1:0}),r(u,f.a.RENDERBUFFER_DEPTH_SIZE,{webgl1:0}),r(u,f.a.RENDERBUFFER_STENCIL_SIZE,{webgl1:0}),r(u,f.a.RENDERBUFFER_SAMPLES,{webgl2:1}),u),T=(l={},r(l,f.a.TEXTURE_MAG_FILTER,{webgl2:!0}),r(l,f.a.TEXTURE_MIN_FILTER,{webgl2:!0}),r(l,f.a.TEXTURE_WRAP_S,{webgl2:!0}),r(l,f.a.TEXTURE_WRAP_T,{webgl2:!0}),r(l,f.a.TEXTURE_WRAP_R,{webgl2:!0}),r(l,f.a.TEXTURE_BASE_LEVEL,{webgl2:!0}),r(l,f.a.TEXTURE_MAX_LEVEL,{webgl2:!0}),r(l,f.a.TEXTURE_COMPARE_FUNC,{webgl2:!0}),r(l,f.a.TEXTURE_COMPARE_MODE,{webgl2:!0}),r(l,f.a.TEXTURE_MIN_LOD,{webgl2:!0}),r(l,f.a.TEXTURE_MAX_LOD,{webgl2:!0}),l),A=(c={},r(c,f.a.TEXTURE_MAG_FILTER,{type:"GLenum",webgl1:f.a.LINEAR}),r(c,f.a.TEXTURE_MIN_FILTER,{type:"GLenum",webgl1:f.a.NEAREST_MIPMAP_LINEAR}),r(c,f.a.TEXTURE_WRAP_S,{type:"GLenum",webgl1:f.a.REPEAT}),r(c,f.a.TEXTURE_WRAP_T,{type:"GLenum",webgl1:f.a.REPEAT}),r(c,f.a.TEXTURE_WRAP_R,{type:"GLenum",webgl2:f.a.REPEAT}),r(c,f.a.TEXTURE_BASE_LEVEL,{webgl2:0}),r(c,f.a.TEXTURE_MAX_LEVEL,{webgl2:1e3}),r(c,f.a.TEXTURE_COMPARE_FUNC,{type:"GLenum",webgl2:f.a.LEQUAL}),r(c,f.a.TEXTURE_COMPARE_MODE,{type:"GLenum",webgl2:f.a.NONE}),r(c,f.a.TEXTURE_MIN_LOD,{webgl2:-1e3}),r(c,f.a.TEXTURE_MAX_LOD,{webgl2:1e3}),r(c,f.a.TEXTURE_WIDTH,{webgl1:0}),r(c,f.a.TEXTURE_HEIGHT,{webgl1:0}),c)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(22),s=n(4),u=n(19),l=n(110),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function(e){function t(e,n){r(this,t),Object(s.c)(e);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o.promise=null,Object.seal(o),o}return o(t,e),c(t,[{key:"wait",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.flags,n=void 0===t?0:t,r=e.timeout,i=void 0===r?a.e.TIMEOUT_IGNORED:r;return this.gl.waitSync(this.handle,n,i),this}},{key:"clientWait",value:function(e){var t=e.flags,n=void 0===t?a.e.SYNC_FLUSH_COMMANDS_BIT:t,r=e.timeout,i=this.gl.clientWaitSync(this.handle,n,r);switch(i){case a.e.ALREADY_SIGNALED:case a.e.TIMEOUT_EXPIRED:case a.e.CONDITION_SATISFIED:case a.e.WAIT_FAILED:}return i}},{key:"cancel",value:function(){l.a.cancelQuery(this)}},{key:"isSignaled",value:function(){return this.getParameter(a.e.SYNC_STATUS)===a.e.SIGNALED}},{key:"isResultAvailable",value:function(){return this.isSignaled()}},{key:"getResult",value:function(){return this.isSignaled()}},{key:"getParameter",value:function(e){return this.gl.getSyncParameter(this.handle,e)}},{key:"_createHandle",value:function(){return this.gl.fenceSync(a.e.SYNC_GPU_COMMANDS_COMPLETE,0)}},{key:"_deleteHandle",value:function(){l.a.deleteQuery(this),this.gl.deleteSync(this.handle)}}]),t}(u.a);t.a=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){switch(e.drawMode){case s.b.POINTS:return s.b.POINTS;case s.b.LINES:case s.b.LINE_STRIP:case s.b.LINE_LOOP:return s.b.LINES;case s.b.TRIANGLES:case s.b.TRIANGLE_STRIP:case s.b.TRIANGLE_FAN:return s.b.TRIANGLES;default:return f()(!1),0}}t.b=a;var s=n(17),u=n(19),l=n(4),c=n(1),f=n.n(c),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t),Object(l.c)(e);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o.buffers={},Object.seal(o),o.initialize(n),o}return o(t,e),p(t,null,[{key:"isSupported",value:function(e){return Object(l.h)(e)}},{key:"isHandle",value:function(e){return this.gl.isTransformFeedback(this.handle)}}]),p(t,[{key:"initialize",value:function(e){var t=e.buffers,n=void 0===t?{}:t,r=e.varyingMap,i=void 0===r?{}:r;this.bindBuffers(n,{clear:!0,varyingMap:i})}},{key:"bindBuffers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.clear,r=void 0!==n&&n,i=t.varyingMap,o=void 0===i?{}:i;r&&(this._unbindBuffers(),this.buffers={});for(var a in e){var s=e[a],u=Number.isFinite(Number(a))?Number(a):o[a];f()(Number.isFinite(u)),this.buffers[u]=s}}},{key:"begin",value:function(e){return this._bindBuffers(),this.gl.bindTransformFeedback(36386,this.handle),this.gl.beginTransformFeedback(e),this}},{key:"pause",value:function(){return this.gl.bindTransformFeedback(36386,this.handle),this.gl.pauseTransformFeedback(),this.gl.bindTransformFeedback(36386,null),this._unbindBuffers(),this}},{key:"resume",value:function(){return this._bindBuffers(),this.gl.bindTransformFeedback(36386,this.handle),this.gl.resumeTransformFeedback(),this}},{key:"end",value:function(){return this.gl.bindTransformFeedback(36386,this.handle),this.gl.endTransformFeedback(),this.gl.bindTransformFeedback(36386,null),this._unbindBuffers(),this}},{key:"bindBuffer",value:function(e){var t=e.index,n=e.buffer,r=e.offset,i=void 0===r?0:r,o=e.size;return n.unbind(),this.gl.bindTransformFeedback(36386,this.handle),void 0===o?this.gl.bindBufferBase(35982,t,n.handle):this.gl.bindBufferRange(35982,t,n.handle,i,o),this}},{key:"unbindBuffer",value:function(e){var t=e.index;return this.gl.bindTransformFeedback(36386,this.handle),this.gl.bindBufferBase(35982,t,null),this}},{key:"_bindBuffers",value:function(){for(var e in this.buffers)this.bindBuffer({buffer:this.buffers[e],index:Number(e)})}},{key:"_unbindBuffers",value:function(){for(var e in this.buffers)this.unbindBuffer({buffer:this.buffers[e],index:Number(e)})}},{key:"_createHandle",value:function(){return this.gl.createTransformFeedback()}},{key:"_deleteHandle",value:function(){this.gl.deleteTransformFeedback(this.handle)}}]),t}(u.a);t.a=h},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(22),s=n(4),u=n(19),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e){function t(e,n){r(this,t),Object(s.c)(e);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return Object.seal(o),o}return o(t,e),l(t,null,[{key:"isSupported",value:function(e){return Object(s.h)(e)}},{key:"isHandle",value:function(e){return this.gl.isSampler(this.handle)}}]),l(t,[{key:"bind",value:function(e){return this.gl.bindSampler(e,this.handle),this}},{key:"unbind",value:function(e){return this.gl.bindSampler(e,null),this}},{key:"_createHandle",value:function(){return this.gl.createSampler()}},{key:"_deleteHandle",value:function(){this.gl.deleteSampler(this.handle)}},{key:"_getParameter",value:function(e){return this.gl.getSamplerParameter(this.handle,e)}},{key:"_setParameter",value:function(e,t){switch(e){case a.e.TEXTURE_MIN_LOD:case a.e.TEXTURE_MAX_LOD:this.gl.samplerParameterf(this.handle,e,t);break;default:this.gl.samplerParameteri(this.handle,e,t)}return this}}]),t}(u.a);t.a=c},function(e,t,n){"use strict";function r(e){var t=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,n=e.match(t);return n?n[1]:"unnamed"}function i(e){switch(e){case o:return"fragment";case a:return"vertex";default:return"unknown type"}}t.a=r,t.b=i;var o=35632,a=35633},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(17),s=n(38),u=n(1),l=n.n(u),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=[a.a.TEXTURE_CUBE_MAP_POSITIVE_X,a.a.TEXTURE_CUBE_MAP_NEGATIVE_X,a.a.TEXTURE_CUBE_MAP_POSITIVE_Y,a.a.TEXTURE_CUBE_MAP_NEGATIVE_Y,a.a.TEXTURE_CUBE_MAP_POSITIVE_Z,a.a.TEXTURE_CUBE_MAP_NEGATIVE_Z],p=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,Object.assign({},n,{target:a.a.TEXTURE_CUBE_MAP})));return o.initialize(n),Object.seal(o),o}return o(t,e),c(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.format,n=void 0===t?a.a.RGBA:t,r=e.mipmaps,i=void 0===r||r,o=e.width,s=void 0===o?1:o,u=e.height,c=void 0===u?1:u,f=e.type,p=void 0===f?a.a.UNSIGNED_BYTE:f,h=e.dataFormat,d=this._deduceParameters({format:n,type:p,dataFormat:h});p=d.type,h=d.dataFormat;var v=this._deduceImageSize({data:e[a.a.TEXTURE_CUBE_MAP_POSITIVE_X],width:s,height:c});s=v.width,c=v.height,l()(s===c),this.setCubeMapImageData(e),i&&this.generateMipmap(e),this.opts=e}},{key:"subImage",value:function(e){var t=e.face,n=e.data,r=e.x,i=void 0===r?0:r,o=e.y,a=void 0===o?0:o,s=e.mipmapLevel,u=void 0===s?0:s;return this._subImage({target:t,data:n,x:i,y:a,mipmapLevel:u})}},{key:"setCubeMapImageData",value:function(e){var t=e.width,n=e.height,r=e.pixels,i=e.data,o=e.border,s=void 0===o?0:o,u=e.format,l=void 0===u?a.a.RGBA:u,c=e.type,p=void 0===c?a.a.UNSIGNED_BYTE:c,h=(e.generateMipmap,this.gl);if(r=r||i,this.bind(),this.width||this.height){var d=!0,v=!1,m=void 0;try{for(var y,g=f[Symbol.iterator]();!(d=(y=g.next()).done);d=!0){var _=y.value;h.texImage2D(_,0,l,t,n,s,l,p,r[_])}}catch(e){v=!0,m=e}finally{try{!d&&g.return&&g.return()}finally{if(v)throw m}}}else{var b=!0,x=!1,w=void 0;try{for(var E,S=f[Symbol.iterator]();!(b=(E=S.next()).done);b=!0){var T=E.value;h.texImage2D(T,0,l,l,p,r[T])}}catch(e){x=!0,w=e}finally{try{!b&&S.return&&S.return()}finally{if(x)throw w}}}}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.index;return void 0!==t&&this.gl.activeTexture(a.a.TEXTURE0+t),this.gl.bindTexture(a.a.TEXTURE_CUBE_MAP,this.handle),t}},{key:"unbind",value:function(){return this.gl.bindTexture(a.a.TEXTURE_CUBE_MAP,null),this}}]),t}(s.a);t.a=p,p.FACES=f},function(e,t,n){"use strict";function r(e,t){var n=t.drawMode,r=void 0===n?i.b.TRIANGLES:n,a=t.vertexCount,s=t.offset,u=void 0===s?0:s,l=t.isIndexed,c=void 0!==l&&l,f=t.indexType,p=void 0===f?i.b.UNSIGNED_SHORT:f,h=t.isInstanced,d=void 0!==h&&h,v=t.instanceCount,m=void 0===v?0:v;Object(o.d)(e);e.getExtension("ANGLE_instanced_arrays");if(d){var y=isWebGL2(e),g=e.getExtension("ANGLE_instanced_arrays"),_=y?e:g,b=y?"":"ANGLE",x="drawElementsInstanced"+b,w="drawArraysInstanced"+b;c?_[x](r,a,p,u,m):_[w](r,u,a,m)}else c?e.drawElements(r,a,p,u):e.drawArrays(r,u,a)}t.a=r;var i=n(17),o=n(4),a=n(1);n.n(a)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(19),s=n(110),u=n(77),l=n(4),c=n(37),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=function(e){return e},h=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),a=n.onComplete,s=void 0===a?p:a,u=n.onError,l=void 0===u?p:u;return o.target=null,o.onComplete=s,o.onError=l,o.promise=null,Object.seal(o),o}return o(t,e),f(t,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.queries,r=void 0!==n&&n,i=t.timers,o=void 0!==i&&i,a=t.timestamps,s=void 0!==a&&a,f=Object(l.h)(e),p=Object(u.d)(e,u.a.TIMER_QUERY),h=f||p;if(r&&(h=h&&f),o&&(h=h&&p),s){Object(c.g)(e);var d=e.getQuery(36392,34916);h=h&&d>0}return h}}]),f(t,[{key:"beginTimeElapsedQuery",value:function(){return this.begin(35007)}},{key:"beginOcclusionQuery",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.conservative,n=void 0!==t&&t;return this.begin(n?36202:35887)}},{key:"beginTransformFeedbackQuery",value:function(){return this.begin(35976)}},{key:"getTimestamp",value:function(){s.a.beginQuery(this,this.onComplete,this.onError);try{this.gl.queryCounter(this.handle,36392)}catch(e){s.a.rejectQuery(this,'Timer queries require "EXT_disjoint_timer_query" extension')}return this}},{key:"begin",value:function(e){s.a.beginQuery(this,this.onComplete,this.onError),this.target=e;try{this.gl.beginQuery(this.target,this.handle)}catch(e){s.a.rejectQuery(this,"Query not supported")}return this}},{key:"end",value:function(){return this.target&&(this.ext.endQuery(this.target),this.target=null),this}},{key:"cancel",value:function(){return this.end(),s.a.cancelQuery(this),this}},{key:"isResultAvailable",value:function(){return this.gl.getQueryParameter(this.handle,34919)}},{key:"getResult",value:function(){var e=this.gl.getQueryParameter(this.handle,34918);return Number.isFinite(e)?e/1e6:0}},{key:"_createHandle",value:function(){return t.isSupported(this.gl)?this.gl.createQuery():null}},{key:"_deleteHandle",value:function(){s.a.deleteQuery(this),this.gl.deleteQuery(this.handle)}}],[{key:"poll",value:function(e){s.a.poll(e)}}]),t}(a.a);t.a=h,s.a.setInvalidator({queryType:h,errorMessage:"Disjoint GPU operation invalidated timer queries",checkInvalid:function(e){return e.getParameter(36795)}})},function(e,t,n){"use strict";function r(e,t){var n=t.x,r=t.y,a=t.width,s=void 0===a?1:a,u=t.height,l=void 0===u?1:u,c=t.data,f=t.dataOffset,p=void 0===f?0:f,h=t.type,d=void 0===h?i.e.UNSIGNED_BYTE:h,v=t.sourceHeight,m=t.format,y=void 0===m?i.e.RGBA:m;return c=c||new Uint8Array(4*s*l),r=v?v-r:r,p?(Object(o.c)(e),e.readPixels(n,r,s,l,y,d,c,p)):e.readPixels(n,r,s,l,y,d,c),c}t.a=r;var i=n(22),o=n(4),a=n(1);n.n(a),function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(5),o=n(9),a=n(1),s=n.n(a),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(){function e(t){var n=t.id;t.display;r(this,e),this.position=new o.c,this.rotation=new o.c,this.scale=new o.c(1,1,1),this.matrix=new o.a,this.id=n||Object(i.h)(this.constructor.name),this.display=!0,this.userData={}}return u(e,[{key:"setPosition",value:function(e){return s()(3===e.length,"setPosition requires vector argument"),this.position=e,this}},{key:"setRotation",value:function(e){return s()(3===e.length,"setRotation requires vector argument"),this.rotation=e,this}},{key:"setScale",value:function(e){return s()(3===e.length,"setScale requires vector argument"),this.scale=e,this}},{key:"setMatrixComponents",value:function(e){var t=e.position,n=e.rotation,r=e.scale,i=e.update,o=void 0===i||i;return t&&this.setPosition(t),n&&this.setRotation(n),r&&this.setScale(r),o&&this.updateMatrix(),this}},{key:"updateMatrix",value:function(){var e=this.position,t=this.rotation,n=this.scale;return this.matrix.identity(),this.matrix.translate(e),this.matrix.rotateXYZ(t),this.matrix.scale(n),this}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.position,n=e.rotation,r=e.scale;return t&&this.setPosition(t),n&&this.setRotation(n),r&&this.setScale(r),this.updateMatrix(),this}},{key:"getCoordinateUniforms",value:function(e,t){s()(e),t=t||this.matrix;var n=new o.a(e).multiplyRight(t),r=n.invert();return{viewMatrix:e,modelMatrix:t,objectMatrix:t,worldMatrix:n,worldInverseMatrix:r,worldInverseTransposeMatrix:r.transpose()}}},{key:"transform",value:function(){if(this.parent){var e=this.parent;this.endPosition.set(this.position.add(e.endPosition)),this.endRotation.set(this.rotation.add(e.endRotation)),this.endScale.set(this.scale.add(e.endScale))}else this.endPosition.set(this.position),this.endRotation.set(this.rotation),this.endScale.set(this.scale);for(var t=this.children,n=0;n<t.length;++n)t[n].transform();return this}}]),e}();t.a=l},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){var t=e.id,n=e.source,r=e.type;return t&&"string"===typeof t&&-1===n.indexOf("SHADER_NAME")?"\n#define SHADER_NAME "+t+"_"+w[r]+"\n\n":""}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0,n="";for(var r in e)0===t&&(n+="\n// APPLICATION DEFINES\n"),t++,n+="#define "+r.toUpperCase()+" "+e[r]+"\n";return 0===t&&(n+="\n"),n}function a(e,t){Object(d.a)(e).deprecations.forEach(function(e){e.regex.test(t)&&(e.deprecated?_.f.deprecated(e.old,e.new):_.f.removed(e.old,e.new))})}function s(e,t){var n=Object(d.a)(e),r=void 0;switch(t){case b:r=n.vs||n.vertexShader;break;case x:r=n.fs||n.fragmentShader;break;default:g()(!1)}return"string"!==typeof r?"":"#define MODULE_"+e.toUpperCase()+"\n"+r+"// END MODULE_"+e+"\n\n"}function u(e,t){var n=t.id,r=t.source,u=t.type,l=t.modules,c=void 0===l?[]:l,f=t.defines,p=void 0===f?{}:f;g()("string"===typeof r,"shader source must be a string");var h=r.split("\n"),d="",m=r;0===h[0].indexOf("#version ")&&(d=h[0],m=h.slice(1).join("\n"));var y=i({id:n,source:r,type:u})+"\n"+Object(v.a)(e)+"\n"+Object(v.b)(e)+"\n"+o(p)+"\n"+(u===x?S:"")+"\n",_=!1,b=!0,w=!1,T=void 0;try{for(var A,O=c[Symbol.iterator]();!(b=(A=O.next()).done);b=!0){var P=A.value;switch(P){case"inject":_=!0;break;default:a(P,m),y+=s(P,u)}}}catch(e){w=!0,T=e}finally{try{!b&&O.return&&O.return()}finally{if(w)throw T}}return y=d+y+m,_&&y.replace("}s*$",E),y}function l(e){return function(t){var n={},r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value,l=Object(d.a)(u),c=l.getUniforms?l.getUniforms(t,n):{};Object.assign(n,c)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}}function c(e){var t={},n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,u=Object(d.a)(s);t[s]=u}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return t}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.vs,r=t.fs,i=Object(d.c)(t.modules||[]);return{gl:e,vs:u(e,Object.assign({},t,{source:n,type:b,modules:i})),fs:u(e,Object.assign({},t,{source:r,type:x,modules:i})),getUniforms:l(i),modules:c(i)}}t.a=f;var p,h,d=n(115),v=n(417),m=n(418),y=n(1),g=n.n(y),_=n(5),b="vs",x="fs",w=(p={},r(p,b,"vertex"),r(p,x,"fragment"),p),E=(h={},r(h,b,m.b),r(h,x,m.a),h),S="#ifdef GL_ES\nprecision highp float;\n#endif\n\n"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(81),o=n(80),a=n(1),s=n.n(a),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.gl,i=t._cachePrograms,o=void 0!==i&&i;r(this,e),s()(n),this.gl=n,this.vertexShaders={},this.fragmentShaders={},this.programs={},this._cachePrograms=o}return u(e,[{key:"delete",value:function(){return this}},{key:"getVertexShader",value:function(e,t){s()("string"===typeof t),s()(this._compareContexts(e,this.gl));var n=this.vertexShaders[t];return n||(n=new i.c(e,t),this.vertexShaders[t]=n),n}},{key:"getFragmentShader",value:function(e,t){s()("string"===typeof t),s()(this._compareContexts(e,this.gl));var n=this.fragmentShaders[t];return n||(n=new i.a(e,t),this.fragmentShaders[t]=n),n}},{key:"getProgram",value:function(e,t){s()(this._compareContexts(e,this.gl)),s()("string"===typeof t.vs),s()("string"===typeof t.fs),s()("string"===typeof t.id);var n=this._getProgramKey(t),r=this.programs[n];return r?(this._resetProgram(r),r):(r=this._createNewProgram(e,t),this._cachePrograms&&this._checkProgramProp(r)&&(this.programs[n]=r),r)}},{key:"_getProgramKey",value:function(e){return e.id+"-"+e.vs+"-"+e.fs}},{key:"_checkProgramProp",value:function(e){return!e.varyings}},{key:"_createNewProgram",value:function(e,t){var n=t.vs,r=t.fs,i=this.getVertexShader(e,n),a=this.getFragmentShader(e,r);return new o.a(this.gl,Object.assign({},t,{vs:i,fs:a}))}},{key:"_resetProgram",value:function(e,t){e.reset()}},{key:"_compareContexts",value:function(e,t){return(e.gl||e)===(t.gl||t)}}]),e}();t.a=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return a.c?window.requestAnimationFrame(e):setTimeout(e,1e3/60)}function o(e){return a.c?window.cancelAnimationFrame(e):clearTimeout(e)}t.c=i,t.a=o;var a=n(5),s=n(37),u=n(39),l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f={preserveDrawingBuffer:!0},p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e);var n=t.onCreateContext,i=void 0===n?function(e){return Object(u.createGLContext)(e)}:n,o=t.onInitialize,s=void 0===o?function(){}:o,l=t.onRender,c=void 0===l?function(){}:l,f=t.onFinalize,p=void 0===f?function(){}:f,h=t.gl,d=void 0===h?null:h,v=t.glOptions,m=void 0===v?{}:v,y=t.width,g=void 0===y?null:y,_=t.height,b=void 0===_?null:_,x=t.createFramebuffer,w=void 0!==x&&x,E=t.autoResizeViewport,S=void 0===E||E,T=t.autoResizeDrawingBuffer,A=void 0===T||T,O=t.useDevicePixels,P=void 0===O||O;return"useDevicePixelRatio"in t&&(a.f.deprecated("useDevicePixelRatio","useDevicePixels"),P=t.useDevicePixelRatio),this._onCreateContext=i,this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._renderFrame=this._renderFrame.bind(this),this.glOptions=m,this._createFramebuffer=w,this._onInitialize=s,this._onRender=c,this._onFinalize=p,this.width=g,this.height=b,this.gl=d,this.setProps({autoResizeViewport:S,autoResizeDrawingBuffer:A,useDevicePixels:P}),this}return c(e,[{key:"setNeedsRedraw",value:function(e){return this.needsRedraw=this.needsRedraw||e,this}},{key:"setProps",value:function(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}},{key:"start",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._stopped=!1,this._animationFrameId||(this._startPromise=Object(s.d)().then(function(){return e._stopped?null:(e._createWebGLContext(t),e._initializeCallbackData(),e._updateCallbackData(),e._resizeCanvasDrawingBuffer(),e._resizeViewport(),e._onInitialize(e._callbackData))}).then(function(t){e._stopped||(e._addCallbackData(t||{}),!1===t||e._animationFrameId||(e._animationFrameId=i(e._renderFrame)))})),this}},{key:"stop",value:function(){return this._animationFrameId&&(this._finalizeCallbackData(),o(this._animationFrameId),this._animationFrameId=null,this._stopped=!0),this}},{key:"setViewParameters",value:function(e){var t=e.autoResizeDrawingBuffer,n=void 0===t||t,r=e.autoResizeCanvas,i=void 0===r||r,o=e.autoResizeViewport,s=void 0===o||o,u=e.useDevicePixels,l=void 0===u||u,c=e.useDevicePixelRatio,f=void 0===c?null:c;return a.f.deprecated("AnimationLoop.setViewParameters","AnimationLoop.setProps"),this.autoResizeViewport=s,this.autoResizeCanvas=i,this.autoResizeDrawingBuffer=n,this.useDevicePixels=l,null!==f&&(a.f.deprecated("useDevicePixelRatio","useDevicePixels"),this.useDevicePixels=f),this}},{key:"_setupFrame",value:function(){this._onSetupFrame?this._onSetupFrame(this._callbackData):(this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer())}},{key:"_renderFrame",value:function(){this._setupFrame(),this._updateCallbackData(),this._onRender(this._callbackData),this._callbackData.tick++,this._stopped||(this._animationFrameId=i(this._renderFrame))}},{key:"_initializeCallbackData",value:function(){this._callbackData={gl:this.gl,canvas:this.gl.canvas,framebuffer:this.framebuffer,stop:this.stop,tick:0,tock:0,useDevicePixels:this.useDevicePixels}}},{key:"_updateCallbackData",value:function(){var e=this.gl.canvas;this._callbackData.width=e.width,this._callbackData.height=e.height,this._callbackData.aspect=e.width/e.height}},{key:"_finalizeCallbackData",value:function(){this._onFinalize(this._callbackData)}},{key:"_addCallbackData",value:function(e){"object"===("undefined"===typeof e?"undefined":l(e))&&null!==e&&(this._callbackData=Object.assign({},this._callbackData,e))}},{key:"_createWebGLContext",value:function(e){if(e=Object.assign({},e,f,this.glOptions),e.gl?this.gl=e.gl:this.gl=this._onCreateContext(e),!Object(u.isWebGL)(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");this._createFramebuffer&&(this.framebuffer=new u.Framebuffer(this.gl)),Object(u.resetParameters)(this.gl)}},{key:"_resizeViewport",value:function(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height)}},{key:"_resizeFramebuffer",value:function(){this.framebuffer&&this.framebuffer.resize({width:this.gl.canvas.width,height:this.gl.canvas.height})}},{key:"_resizeCanvasDrawingBuffer",value:function(){this.autoResizeDrawingBuffer&&Object(s.h)(this.gl.canvas,{useDevicePixels:this.useDevicePixels})}}]),e}();t.b=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(83),s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=e.radius,o=void 0===n?1:n,a=e.cap,s=void 0===a||a;return i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Object.assign({},e,{topRadius:0,topCap:Boolean(s),bottomCap:Boolean(s),bottomRadius:o})))}return o(t,e),t}(a.a);t.a=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(){return{indices:new Uint16Array(c),positions:new Float32Array(f),normals:new Float32Array(p),texCoords:new Float32Array(h)}}var s=n(29),u=n(5),l=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=e.id,o=void 0===n?Object(u.h)("cube-geometry"):n;return i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Object.assign({},e,{id:o,attributes:a()})))}return o(t,e),t}(s.a);t.a=l;var c=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),f=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),p=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),h=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1])},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(83),s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=e.radius,o=void 0===n?1:n;return i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Object.assign({},e,{bottomRadius:o,topRadius:o})))}return o(t,e),t}(a.a);t.a=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(29),s=n(9),u=[-1,0,0,0,1,0,0,0,-1,0,0,1,0,-1,0,1,0,0],l=[3,4,5,3,5,1,3,1,0,3,0,4,4,0,2,4,2,5,2,0,1,5,2,1],c=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=e.iterations,o=void 0===n?0:n,a=Math.PI,c=2*a,f=[].concat(u),p=[].concat(l);f.push(),p.push();for(var h=(function(){var e={};return function(t,n){t*=3,n*=3;var r=t<n?t:n,i=t>n?t:n,o=r+"|"+i;if(o in e)return e[o];var a=f[t],s=f[t+1],u=f[t+2],l=f[n],c=f[n+1],p=f[n+2],h=(a+l)/2,d=(s+c)/2,v=(u+p)/2,m=Math.sqrt(h*h+d*d+v*v);return h/=m,d/=m,v/=m,f.push(h,d,v),e[o]=f.length/3-1}}()),d=0;d<o;d++){for(var v=[],m=0;m<p.length;m+=3){var y=h(p[m+0],p[m+1]),g=h(p[m+1],p[m+2]),_=h(p[m+2],p[m+0]);v.push(_,p[m+0],y,y,p[m+1],g,g,p[m+2],_,y,g,_)}p=v}for(var b=new Array(3*p.length),x=new Array(2*p.length),w=p.length,E=w-3;E>=0;E-=3){var S=p[E+0],T=p[E+1],A=p[E+2],O=3*S,P=3*T,C=3*A,k=2*S,R=2*T,M=2*A,I=f[O+0],L=f[O+1],D=f[O+2],N=Math.acos(D/Math.sqrt(I*I+L*L+D*D)),F=Math.atan2(L,I)+a,j=N/a,B=1-F/c,z=f[P+0],U=f[P+1],V=f[P+2],G=Math.acos(V/Math.sqrt(z*z+U*U+V*V)),W=Math.atan2(U,z)+a,H=G/a,X=1-W/c,q=f[C+0],Y=f[C+1],Z=f[C+2],K=Math.acos(Z/Math.sqrt(q*q+Y*Y+Z*Z)),Q=Math.atan2(Y,q)+a,J=K/a,$=1-Q/c,ee=[q-z,Y-U,Z-V],te=[I-z,L-U,D-V],ne=new s.c(ee).cross(te).normalize(),re=void 0;(0===B||0===X||0===$)&&(0===B||B>.5)&&(0===X||X>.5)&&(0===$||$>.5)&&(f.push(f[O+0],f[O+1],f[O+2]),re=f.length/3-1,p.push(re),x[2*re+0]=1,x[2*re+1]=j,b[3*re+0]=ne.x,b[3*re+1]=ne.y,b[3*re+2]=ne.z,f.push(f[P+0],f[P+1],f[P+2]),re=f.length/3-1,p.push(re),x[2*re+0]=1,x[2*re+1]=H,b[3*re+0]=ne.x,b[3*re+1]=ne.y,b[3*re+2]=ne.z,f.push(f[C+0],f[C+1],f[C+2]),re=f.length/3-1,p.push(re),x[2*re+0]=1,x[2*re+1]=J,b[3*re+0]=ne.x,b[3*re+1]=ne.y,b[3*re+2]=ne.z),b[O+0]=b[P+0]=b[C+0]=ne.x,b[O+1]=b[P+1]=b[C+1]=ne.y,b[O+2]=b[P+2]=b[C+2]=ne.z,x[k+0]=B,x[k+1]=j,x[R+0]=X,x[R+1]=H,x[M+0]=$,x[M+1]=J}return i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Object.assign({},e,{attributes:{positions:new Float32Array(f),normals:new Float32Array(b),texCoords:new Float32Array(x),indices:new Uint16Array(p)}})))}return o(t,e),t}(a.a);t.a=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(29),s=n(5),u=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=e.type,o=void 0===n?"x,y":n,a=e.offset,u=void 0===a?0:a,l=e.flipCull,c=void 0!==l&&l,f=e.unpack,p=void 0!==f&&f,h=e.id,d=void 0===h?Object(s.h)("plane-geometry"):h,v=o.split(","),m=e[v[0]+"len"],y=e[v[1]+"len"],g=e["n"+v[0]]||1,_=e["n"+v[1]]||1,b=(g+1)*(_+1),x=new Float32Array(3*b),w=new Float32Array(3*b),E=new Float32Array(2*b);c&&(m=-m);for(var S=0,T=0,A=0;A<=_;A++)for(var O=0;O<=g;O++){var P=O/g,C=A/_;switch(E[S+0]=c?1-P:P,E[S+1]=C,o){case"x,y":x[T+0]=m*P-.5*m,x[T+1]=y*C-.5*y,x[T+2]=u,w[T+0]=0,w[T+1]=0,w[T+2]=c?1:-1;break;case"x,z":x[T+0]=m*P-.5*m,x[T+1]=u,x[T+2]=y*C-.5*y,w[T+0]=0,w[T+1]=c?1:-1,w[T+2]=0;break;case"y,z":x[T+0]=u,x[T+1]=m*P-.5*m,x[T+2]=y*C-.5*y,w[T+0]=c?1:-1,w[T+1]=0,w[T+2]=0}S+=2,T+=3}for(var k=g+1,R=new Uint16Array(g*_*6),M=0;M<_;M++)for(var I=0;I<g;I++){var L=6*(M*g+I);R[L+0]=(M+0)*k+I,R[L+1]=(M+1)*k+I,R[L+2]=(M+0)*k+I+1,R[L+3]=(M+1)*k+I,R[L+4]=(M+1)*k+I+1,R[L+5]=(M+0)*k+I+1}if(p){for(var D=new Float32Array(3*R.length),N=new Float32Array(3*R.length),F=new Float32Array(2*R.length),j=0;j<R.length;++j){var B=R[j];D[3*j+0]=x[3*B+0],D[3*j+1]=x[3*B+1],D[3*j+2]=x[3*B+2],N[3*j+0]=w[3*B+0],N[3*j+1]=w[3*B+1],N[3*j+2]=w[3*B+2],F[2*j+0]=E[2*B+0],F[2*j+1]=E[2*B+1]}x=D,w=N,E=F,R=void 0}var z={positions:x,normals:w,texCoords:E};return R&&(z.indices=R),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Object.assign({},e,{attributes:z,id:d})))}return o(t,e),t}(a.a);t.a=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,n){var r=Math.PI,i=r-0,o=2*Math.PI,a=o-0,s=(e+1)*(t+1);if("number"===typeof n){var u=n;n=function(e,t,n,r,i){return u}}for(var l=new Float32Array(3*s),c=new Float32Array(3*s),f=new Float32Array(2*s),p=new Uint16Array(e*t*6),h=0;h<=e;h++)for(var d=0;d<=t;d++){var v=d/t,m=h/e,y=d+h*(t+1),g=2*y,_=3*y,b=a*v,x=i*m,w=Math.sin(b),E=Math.cos(b),S=Math.sin(x),T=Math.cos(x),A=E*S,O=T,P=w*S,C=n(A,O,P,v,m);l[_+0]=C*A,l[_+1]=C*O,l[_+2]=C*P,c[_+0]=A,c[_+1]=O,c[_+2]=P,f[g+0]=v,f[g+1]=m}for(var k=e+1,R=0;R<e;R++)for(var M=0;M<t;M++){var I=6*(R*t+M);p[I+0]=M*k+R,p[I+1]=M*k+R+1,p[I+2]=(M+1)*k+R,p[I+3]=(M+1)*k+R,p[I+4]=M*k+R+1,p[I+5]=(M+1)*k+R+1}return{positions:l,indices:p,normals:c,texCoords:f}}var s=n(29),u=n(5),l=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=e.nlat,o=void 0===n?10:n,s=e.nlong,l=void 0===s?10:s,c=e.radius,f=void 0===c?1:c,p=e.id,h=void 0===p?Object(u.h)("sphere-geometry"):p;return i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Object.assign({},e,{id:h,attributes:a(o,l,f)})))}return o(t,e),t}(s.a);t.a=l},function(e,t,n){"use strict";function r(e){s=e}function i(e,t){return"string"===typeof e||t||(t=e,e=t.url),t.url=s?s+e:e,(0,a.requestFile)(t)}function o(e,t){return e=s?s+e:e,new Promise(function(n,r){try{var i=new Image;i.onload=function(){return n(i)},i.onerror=function(){return r(new Error("Could not load image "+e+"."))},i.crossOrigin=t&&t.crossOrigin||"anonymous",i.src=e}catch(e){r(e)}})}Object.defineProperty(t,"__esModule",{value:!0}),t.setPathPrefix=r,t.loadFile=i,t.loadImage=o;var a=n(434),s=""},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],{});return void 0!==e.modelMatrix&&(t.modelMatrix=e.modelMatrix),void 0!==e.viewMatrix&&(t.viewMatrix=e.viewMatrix),void 0!==e.projectionMatrix&&(t.projectionMatrix=e.projectionMatrix),void 0!==e.cameraPositionWorld&&(t.cameraPositionWorld=e.cameraPositionWorld),void 0===e.projectionMatrix&&void 0===e.viewMatrix||(t.viewProjectionMatrix=new i.a(e.projectionMatrix).multiplyRight(e.viewMatrix)),t}var i=n(9),o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],a={modelMatrix:o,viewMatrix:o,projectionMatrix:o,cameraPositionWorld:[0,0,0]};t.a={name:"project",getUniforms:r,vs:"varying vec4 project_vPositionWorld;\nvarying vec3 project_vNormalWorld;\n\nvec4 project_getPosition_World() {\n  return project_vPositionWorld;\n}\n\nvec3 project_getNormal_World() {\n  return project_vNormalWorld;\n}\n\n\n// Unprefixed uniforms\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewProjectionMatrix;\nuniform vec3 cameraPositionWorld;\n\nstruct World {\n  vec3 position;\n  vec3 normal;\n};\n\nWorld world;\n\nvoid project_setPosition(vec4 position) {\n  project_vPositionWorld = position;\n}\n\nvoid project_setNormal(vec3 normal) {\n  project_vNormalWorld = normal;\n}\n\nvoid project_setPositionAndNormal_World(vec3 position, vec3 normal) {\n  world.position = position;\n  world.normal = normal;\n}\n\nvoid project_setPositionAndNormal_Model(vec3 position, vec3 normal) {\n  world.position = (modelMatrix * vec4(position, 1.)).xyz;\n  world.normal = mat3(modelMatrix) * normal;\n}\n\nvec4 project_model_to_clipspace(vec4 position) {\n  return viewProjectionMatrix * modelMatrix * position;\n}\n\nvec4 project_model_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * modelMatrix * vec4(position, 1.);\n}\n\nvec4 project_world_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_view_to_clipspace(vec3 position) {\n  return projectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n",fs:"\nvarying vec4 project_vPositionWorld;\nvarying vec3 project_vNormalWorld;\n\nvec4 project_getPosition_World() {\n  return project_vPositionWorld;\n}\n\nvec3 project_getNormal_World() {\n  return project_vNormalWorld;\n}\n"}},function(e,t,n){"use strict";function r(){var e=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),t=e.project_uViewProjectionMatrix,n=e.project_uScale;return t&&n?c({project_uViewProjectionMatrix:t,project_uScale:n}):{}}function i(e){var t=e.project_uViewProjectionMatrix,n=e.project_uScale,r=Object(s.d)(t);return{project_uViewProjectionMatrixFP64:r,project64_uViewProjectionMatrix:r,project64_uScale:Object(s.c)(n)}}var o=n(6),a=n(84),s=n(118),u=n(117),l=n(451);t.a={name:"project64",dependencies:[a.a,o.n],vs:l.a,getUniforms:r,deprecations:[{type:"uniform vec2",old:"projectionFP64[16]",new:"project_uViewProjectionMatrixFP64"},{type:"uniform vec2",old:"projectionScaleFP64",new:"project64_uScale"}]};var c=Object(u.a)(i)},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;if(!e.lightSettings)return{};var t=e.lightSettings,n=t.numberOfLights,r=void 0===n?1:n,i=t.lightsPosition,o=void 0===i?f:i,a=t.lightsStrength,u=void 0===a?p:a,l=t.coordinateSystem,g=void 0===l?s.a.LNGLAT:l,_=t.coordinateOrigin,b=void 0===_?m:_,x=t.modelMatrix,w=void 0===x?null:x,E=t.ambientRatio,S=void 0===E?h:E,T=t.diffuseRatio,A=void 0===T?d:T,O=t.specularRatio,P=void 0===O?v:O;return{lighting_lightPositions:y({lightsPosition:o,numberOfLights:r,viewport:e.viewport,modelMatrix:w,coordinateSystem:e.coordinateSystem,coordinateOrigin:e.coordinateOrigin,fromCoordinateSystem:g,fromCoordinateOrigin:b}),lighting_lightStrengths:u,lighting_ambientRatio:S,lighting_diffuseRatio:A,lighting_specularRatio:P,lighting_numberOfLights:r}}function i(e){for(var t=e.lightsPosition,n=e.numberOfLights,r=e.viewport,i=e.modelMatrix,o=e.coordinateSystem,a=e.coordinateOrigin,s=e.fromCoordinateSystem,l=e.fromCoordinateOrigin,c={viewport:r,modelMatrix:i,coordinateSystem:o,coordinateOrigin:a,fromCoordinateSystem:s,fromCoordinateOrigin:l},f=[],p=0;p<n;p++){var h=Object(u.a)(t.slice(3*p,3*p+3),c);f[3*p]=h[0],f[3*p+1]=h[1],f[3*p+2]=h[2]}return f}var o=n(452),a=n(84),s=n(51),u=n(453),l=n(117);t.a={name:"lighting",dependencies:[a.a],vs:o.a,getUniforms:r};var c={},f=[-122.45,37.75,8e3],p=[2,0],h=.05,d=.6,v=.8,m=[0,0,0],y=Object(l.a)(i)},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(1),a=n.n(o),s=n(6),u=n(116),l=n.n(u),c=n(119),f=n(218),p=n(459),h=n(215),d=n(219),v=n(30),m=n(220),y=n(15),g=n(10),_=n(123),b=n(120),x=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),w={latitude:0,longitude:0,zoom:1},E={uniforms:{},viewports:[],viewport:null,layerFilter:null,viewportChanged:!0,pickingFBO:null,useDevicePixels:!0,lastPickedInfo:{index:-1,layerId:null}},S=function(e){return e instanceof c.a?""+e:e?"invalid":"null"},T=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.eventManager;i(this,e),this.lastRenderedLayers=[],this.prevLayers=[],this.layers=[],this.oldContext={},this.context=Object.assign({},E,{gl:t,shaderCache:new s.i({gl:t,_cachePrograms:!0}),layerManager:this}),this.width=100,this.height=100,this.views=[],this.viewState=w,this.viewsChanged=!0,this.viewports=[],this._needsRedraw="Initial render",this._needsUpdate=!1,this._pickingRadius=0,this._eventManager=null,this._onLayerClick=null,this._onLayerHover=null,this._onClick=this._onClick.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerLeave=this._onPointerLeave.bind(this),this._pickAndCallback=this._pickAndCallback.bind(this),this._initSeer=this._initSeer.bind(this),this._editSeer=this._editSeer.bind(this),Object.seal(this),Object(b.e)(this._initSeer),Object(b.c)(this._editSeer),r&&this._initEventHandling(r),this.setViews()}return x(e,[{key:"finalize",value:function(){l.a.removeListener(this._initSeer),l.a.removeListener(this._editSeer)}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.clearRedrawFlags,n=void 0===t||t;return this._checkIfNeedsRedraw(n)}},{key:"needsUpdate",value:function(){return this._needsUpdate}},{key:"setNeedsRedraw",value:function(e){this._needsRedraw=this._needsRedraw||e}},{key:"setNeedsUpdate",value:function(e){this._needsUpdate=this._needsUpdate||e}},{key:"getLayers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layerIds,n=void 0===t?null:t;return n?this.layers.filter(function(e){return n.find(function(t){return 0===e.id.indexOf(t)})}):this.layers}},{key:"getViews",value:function(){return this.views}},{key:"getViewports",value:function(){return this._rebuildViewportsFromViews(),this.context.viewport=this.viewports[0],this.viewports}},{key:"setParameters",value:function(e){"eventManager"in e&&this._initEventHandling(e.eventManager),("pickingRadius"in e||"onLayerClick"in e||"onLayerHover"in e)&&this._setEventHandlingParameters(e),("width"in e||"height"in e)&&this.setSize(e.width,e.height),"views"in e&&this.setViews(e.views),"viewState"in e&&this.setViewState(e.viewState),"layers"in e&&this.setLayers(e.layers),"layerFilter"in e&&(this.context.layerFilter=e.layerFilter,this.context.layerFilter!==e.layerFilter&&this.setNeedsRedraw("layerFilter changed")),"drawPickingColors"in e&&this.context.drawPickingColors!==e.drawPickingColors&&this.setNeedsRedraw("drawPickingColors changed"),Object.assign(this.context,e)}},{key:"setSize",value:function(e,t){a()(Number.isFinite(e)&&Number.isFinite(t)),e===this.width&&t===this.height||(this.viewsChanged=!0,this.width=e,this.height=t)}},{key:"setViews",value:function(e){e&&0!==e.length||(e=[new m.a({id:"default-view"})]),e=Object(_.c)(e,{filter:Boolean}).map(function(e){return e instanceof y.a?new v.a({viewportInstance:e}):e});var t=this._diffViews(e,this.views);this.views=e,this.viewsChanged=this.viewsChanged||t}},{key:"setViewState",value:function(e){Object(d.a)(e,this.viewState);this.viewState=e,this.viewsChanged=!0}},{key:"setLayers",value:function(e){if(this.getViewports(),a()(this.context.viewport,"LayerManager.updateLayers: viewport not set"),e===this.lastRenderedLayers)return g.a.log(3,"Ignoring layer update due to layer array not changed"),this;this.lastRenderedLayers=e,e=Object(_.c)(e,{filter:Boolean});var t=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){i.value.context=this.context}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}this.prevLayers=this.layers;var s=this._updateLayers({oldLayers:this.prevLayers,newLayers:e}),u=s.error,l=s.generatedLayers;if(this.layers=l,u)throw u;return this}},{key:"updateLayers",value:function(){var e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: "+e),this.setLayers([].concat(r(this.lastRenderedLayers))))}},{key:"drawLayers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.pass,n=void 0===t?"render to screen":t,r=e.redrawReason,i=void 0===r?"unknown reason":r,o=this.context,a=o.gl,s=o.useDevicePixels,u=o.drawPickingColors;Object(f.a)(a,{layers:this.layers,viewports:this.getViewports(),onViewportActive:this._activateViewport.bind(this),useDevicePixels:s,drawPickingColors:u,pass:n,layerFilter:this.context.layerFilter,redrawReason:i})}},{key:"pickObject",value:function(e){var t=e.x,n=e.y,r=e.mode,i=e.radius,o=void 0===i?0:i,a=e.layerIds,s=e.layerFilter,u=this.context,l=u.gl,c=u.useDevicePixels,f=this.getLayers({layerIds:a});return Object(p.a)(l,{x:t,y:n,radius:o,layers:f,mode:r,layerFilter:s,viewports:this.getViewports(),onViewportActive:this._activateViewport.bind(this),pickingFBO:this._getPickingBuffer(),lastPickedInfo:this.context.lastPickedInfo,useDevicePixels:c})}},{key:"pickObjects",value:function(e){var t=e.x,n=e.y,r=e.width,i=e.height,o=e.layerIds,a=e.layerFilter,s=this.context,u=s.gl,l=s.useDevicePixels,c=this.getLayers({layerIds:o});return Object(p.b)(u,{x:t,y:n,width:r,height:i,layers:c,layerFilter:a,mode:"pickObjects",viewports:this.getViewports(),onViewportActive:this._activateViewport.bind(this),pickingFBO:this._getPickingBuffer(),useDevicePixels:l})}},{key:"setViewports",value:function(e){return g.a.deprecated("setViewport","setViews"),this.setViews(e),this}},{key:"setViewport",value:function(e){return g.a.deprecated("setViewport","setViews"),this.setViews([e]),this}},{key:"_checkIfNeedsRedraw",value:function(e){var t=this._needsRedraw;e&&(this._needsRedraw=!1);var n=!0,r=!1,i=void 0;try{for(var o,a=this.layers[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,u=s.getNeedsRedraw({clearRedrawFlags:e});t=t||u}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return t}},{key:"_rebuildViewportsFromViews",value:function(){if(this.viewsChanged){var e=this.width,t=this.height,n=this.views,r=this.viewState,i=n.map(function(n){return n.makeViewport({width:e,height:t,viewState:r})});this.setNeedsRedraw("Viewport(s) changed");var o=i[0];a()(o instanceof y.a,"Invalid viewport"),this.context.viewports=i,this._activateViewport(o),this.viewports=i,this.viewsChanged=!1}}},{key:"_diffViews",value:function(e,t){return e.length!==t.length||e.some(function(n,r){return!e[r].equals(t[r])})}},{key:"_initEventHandling",value:function(e){this._eventManager=e,this._eventManager.on({click:this._onClick,pointermove:this._onPointerMove,pointerleave:this._onPointerLeave})}},{key:"_setEventHandlingParameters",value:function(e){var t=e.pickingRadius,n=e.onLayerClick,r=e.onLayerHover;isNaN(t)||(this._pickingRadius=t),"undefined"!==typeof n&&(this._onLayerClick=n),"undefined"!==typeof r&&(this._onLayerHover=r),this._validateEventHandling()}},{key:"_activateViewport",value:function(e){var t=this.context.viewport;if((!t||!e.equals(t))&&(Object.assign(this.oldContext,this.context),this.context.viewport=e,this.context.viewportChanged=!0,this.context.uniforms={},Object(g.a)(4,e),this.context.viewportChanged)){var n=!0,r=!1,i=void 0;try{for(var o,s=this.layers[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var u=o.value;u.setChangeFlags({viewportChanged:"Viewport changed"}),this._updateLayer(u)}}catch(e){r=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}}return a()(this.context.viewport,"LayerManager: viewport not set"),this}},{key:"_getPickingBuffer",value:function(){var e=this.context.gl;return this.context.pickingFBO=this.context.pickingFBO||new s.e(e),this.context.pickingFBO.resize({width:e.canvas.width,height:e.canvas.height}),this.context.pickingFBO}},{key:"_updateLayers",value:function(e){var t=e.oldLayers,n=e.newLayers,r={},i=!0,o=!1,a=void 0;try{for(var s,u=t[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;r[l.id]?g.a.warn("Multiple old layers with same id "+S(l)):r[l.id]=l}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}var c=[],f=this._updateSublayersRecursively({newLayers:n,oldLayerMap:r,generatedLayers:c}),p=this._finalizeOldLayers(r);return this._needsUpdate=!1,{error:f||p,generatedLayers:c}}},{key:"_updateSublayersRecursively",value:function(e){var t=e.newLayers,n=e.oldLayerMap,r=e.generatedLayers,i=null,o=!0,a=!1,s=void 0;try{for(var u,l=t[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var c=u.value;c.context=this.context;var f=n[c.id];null===f&&g.a.warn("Multiple new layers with same id "+S(c)),n[c.id]=null;var p=null;try{f?(this._transferLayerState(f,c),this._updateLayer(c),Object(b.g)(c)):(this._initializeLayer(c),Object(b.b)(c)),r.push(c),p=c.isComposite&&c.getSubLayers()}catch(e){g.a.warn("error during matching of "+S(c),e),i=i||e}p&&this._updateSublayersRecursively({newLayers:p,oldLayerMap:n,generatedLayers:r})}}catch(e){a=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(a)throw s}}return i}},{key:"_finalizeOldLayers",value:function(e){var t=null;for(var n in e){var r=e[n];r&&(t=t||this._finalizeLayer(r))}return t}},{key:"_initializeLayer",value:function(e){Object(g.a)(2,"initializing "+S(e));var t=null;try{e._initialize(),e.lifecycle=h.a.INITIALIZED}catch(n){g.a.warn("error while initializing "+S(e)+"\n",n),t=t||n}e.internalState.layer=e;var n=!0,r=!1,i=void 0;try{for(var o,a=e.getModels()[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){o.value.userData.layer=e}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return t}},{key:"_transferLayerState",value:function(e,t){t!==e?(Object(g.a)(4,"matched "+S(t),e,"->",t),t.lifecycle=h.a.MATCHED,e.lifecycle=h.a.AWAITING_GC,t._transferState(e)):(g.a.log(4,"Matching layer is unchanged "+t.id),t.lifecycle=h.a.MATCHED,t.oldProps=t.props)}},{key:"_updateLayer",value:function(e){g.a.log(4,"updating "+e+" because: "+e.printChangeFlags());var t=null;try{e._update()}catch(n){g.a.warn("error during update of "+S(e),n),t=n}return t}},{key:"_finalizeLayer",value:function(e){a()(e.lifecycle!==h.a.AWAITING_FINALIZATION),e.lifecycle=h.a.AWAITING_FINALIZATION;var t=null;this.setNeedsRedraw("finalized "+S(e));try{e._finalize()}catch(n){g.a.warn("error during finalization of "+S(e),n),t=n}return e.lifecycle=h.a.FINALIZED,Object(g.a)(2,"finalizing "+S(e)),t}},{key:"_validateEventHandling",value:function(){(this.onLayerClick||this.onLayerHover)&&this.layers.length&&!this.layers.some(function(e){return e.props.pickable})&&g.a.warn("You have supplied a top-level input event handler (e.g. `onLayerClick`), but none of your layers have set the `pickable` flag.")}},{key:"_onClick",value:function(e){e.offsetCenter&&this._pickAndCallback({callback:this._onLayerClick,event:e,mode:"click"})}},{key:"_onPointerMove",value:function(e){e.leftButton||e.rightButton||this._pickAndCallback({callback:this._onLayerHover,event:e,mode:"hover"})}},{key:"_onPointerLeave",value:function(e){this.pickObject({x:-1,y:-1,radius:this._pickingRadius,mode:"hover"})}},{key:"_pickAndCallback",value:function(e){var t=e.event.offsetCenter,n=this._pickingRadius,r=this.pickObject({x:t.x,y:t.y,radius:n,mode:e.mode});if(e.callback){var i=r.find(function(e){return e.index>=0})||null;e.callback(i,r,e.event.srcEvent)}}},{key:"_initSeer",value:function(){this.layers.forEach(function(e){Object(b.b)(e),Object(b.g)(e)})}},{key:"_editSeer",value:function(e){if("edit"===e.type&&"props"===e.valuePath[0]){Object(b.f)(e.itemKey,e.valuePath.slice(1),e.value);var t=this.layers.map(function(e){return new e.constructor(e.props)});this.updateLayers({newLayers:t})}}}]),e}();t.a=T},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.clamped,r=void 0===n||n;switch(e){case u.f.FLOAT:return Float32Array;case u.f.UNSIGNED_SHORT:case u.f.UNSIGNED_SHORT_5_6_5:case u.f.UNSIGNED_SHORT_4_4_4_4:case u.f.UNSIGNED_SHORT_5_5_5_1:return Uint16Array;case u.f.UNSIGNED_INT:return Uint32Array;case u.f.UNSIGNED_BYTE:return r?Uint8ClampedArray:Uint8Array;case u.f.BYTE:return Int8Array;case u.f.SHORT:return Int16Array;case u.f.INT:return Int32Array;default:throw new Error("Failed to deduce type from array")}}var a=n(214),s=n(10),u=n(6),l=n(1),c=n.n(l),f=n(454),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h={savedMessages:null,timeStart:null,onLog:function(e){var t=e.level,n=e.message;s.a.log(t,n)},onUpdateStart:function(e){e.level,e.id,e.numInstances;h.savedMessages=[],h.timeStart=new Date},onUpdate:function(e){var t=(e.level,e.message);h.savedMessages&&h.savedMessages.push(t)},onUpdateEnd:function(e){var t=e.level,n=e.id,r=e.numInstances,i=Math.round(new Date-h.timeStart),o=i+"ms";s.a.group(t,"Updated attributes for "+r+" instances in "+n+" in "+o,{collapsed:!0});var a=!0,u=!1,l=void 0;try{for(var c,f=h.savedMessages[Symbol.iterator]();!(a=(c=f.next()).done);a=!0){var p=c.value;s.a.log(t,p)}}catch(e){u=!0,l=e}finally{try{!a&&f.return&&f.return()}finally{if(u)throw l}}s.a.groupEnd(t,"Updated attributes for "+r+" instances in "+n+" in "+o),h.savedMessages=null}},d=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.id,o=void 0===i?"attribute-manager":i;r(this,e),this.id=o,this.gl=t,this.attributes={},this.updateTriggers={},this.accessors={},this.allocedInstances=-1,this.needsRedraw=!0,this.userData={},this.stats=new a.a({id:"attr"}),this.attributeTransitionManger=new f.a(t,{id:o+"-transitions"}),Object.seal(this)}return p(e,null,[{key:"setDefaultLogFunctions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onLog,n=e.onUpdateStart,r=e.onUpdate,o=e.onUpdateEnd;void 0!==t&&(h.onLog=t||i),void 0!==n&&(h.onUpdateStart=n||i),void 0!==r&&(h.onUpdate=r||i),void 0!==o&&(h.onUpdateEnd=o||i)}}]),p(e,[{key:"add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._add(e,t)}},{key:"remove",value:function(e){for(var t=0;t<e.length;t++){var n=e[t];void 0!==this.attributes[n]&&delete this.attributes[n]}}},{key:"invalidate",value:function(e){var t=this._invalidateTrigger(e);h.onLog({level:2,message:"invalidated attributes "+t+" ("+e+") for "+this.id,id:this.identifier})}},{key:"invalidateAll",value:function(){for(var e in this.attributes)this.attributes[e].needsUpdate=!0;h.onLog({level:2,message:"invalidated all attributes for "+this.id,id:this.identifier})}},{key:"_invalidateTrigger",value:function(e){var t=this.attributes,n=this.updateTriggers,r=n[e];if(r)r.forEach(function(e){var n=t[e];n&&(n.needsUpdate=!0)});else{var i="invalidating non-existent trigger "+e+" for "+this.id+"\n";i+="Valid triggers: "+Object.keys(t).join(", "),s.a.warn(i,r)}return r}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,n=e.numInstances,r=e.transitions,i=e.props,o=void 0===i?{}:i,a=e.buffers,s=void 0===a?{}:a,u=e.context,l=void 0===u?{}:u,c=e.ignoreUnknownAttributes,f=void 0!==c&&c;this._checkExternalBuffers({buffers:s,ignoreUnknownAttributes:f}),this._setExternalBuffers(s),this._analyzeBuffers({numInstances:n})&&(h.onUpdateStart({level:1,id:this.id,numInstances:n}),this.stats.timeStart(),this._updateBuffers({numInstances:n,data:t,props:o,context:l}),this.stats.timeEnd(),h.onUpdateEnd({level:1,id:this.id,numInstances:n})),this.attributeTransitionManger.update(this.attributes,r)}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getChangedAttributes",value:function(e){var t=e.transition,n=void 0!==t&&t,r=e.clearChangedFlags,i=void 0!==r&&r,o=this.attributes,a=this.attributeTransitionManger;if(n)return a.getAttributes();var s={};for(var u in o){var l=o[u];l.changed&&(l.changed=l.changed&&!i,a.hasAttribute(u)||(s[u]=l))}return s}},{key:"getNeedsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.clearRedrawFlags,n=void 0!==t&&t,r=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!n,r&&this.id}},{key:"setNeedsRedraw",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=!0,this}},{key:"addInstanced",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._add(e,t,{instanced:1})}},{key:"getAccessors",value:function(){return this.updateTriggers}},{key:"_add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={};for(var i in e){i in t&&(e[i]=Object.assign({},e[i],t[i]));var o=e[i],a=o.isGeneric||!1,s=o.isIndexed||o.elements,u=o.elements&&1||o.size,l=o.value||null,c=Object.assign({target:void 0,userData:{}},o,{isExternalBuffer:!1,needsAlloc:!1,needsUpdate:!1,changed:!1,isGeneric:a,isIndexed:s,size:u,value:l},n);Object.seal(c),this._validateAttributeDefinition(i,c),r[i]=c}Object.assign(this.attributes,r),this._mapUpdateTriggersToAttributes()}},{key:"_mapUpdateTriggersToAttributes",value:function(){var e=this,t={};for(var n in this.attributes)!function(n){var r=e.attributes[n],i=r.accessor;t[n]=[n],"string"===typeof i&&(i=[i]),Array.isArray(i)&&i.forEach(function(e){t[e]||(t[e]=[]),t[e].push(n)})}(n);this.updateTriggers=t}},{key:"_validateAttributeDefinition",value:function(e,t){if(c()(t.size>=1&&t.size<=4,"Attribute definition for "+e+" invalid size"),!(t.noAlloc||"function"===typeof t.update||"string"===typeof t.accessor))throw new Error("Attribute "+e+" missing update or accessor")}},{key:"_checkExternalBuffers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.buffers,n=void 0===t?{}:t,r=e.ignoreUnknownAttributes,i=void 0!==r&&r,o=this.attributes;for(var a in n){if(!o[a]&&!i)throw new Error("Unknown attribute prop "+a)}}},{key:"_setExternalBuffers",value:function(e){var t=this.attributes,n=this.numInstances;for(var r in t){var i=t[r],a=e[r];if(i.isExternalBuffer=!1,a){var s=o(i.type||u.f.FLOAT);if(!(a instanceof s))throw new Error("Attribute "+r+" must be of type "+s.name);if(i.auto&&a.length<=n*i.size)throw new Error("Attribute prop array must match length and size");i.isExternalBuffer=!0,i.needsUpdate=!1,i.value!==a&&(i.value=a,i.changed=!0,this.needsRedraw=!0)}}}},{key:"_analyzeBuffers",value:function(e){var t=e.numInstances,n=this.attributes;c()(void 0!==t,"numInstances not defined");var r=!1;for(var i in n){var o=n[i];if(!o.isExternalBuffer){(null===o.value||o.value.length/o.size<t)&&(o.update||o.accessor)&&(o.needsAlloc=!0,r=!0),o.needsUpdate&&(r=!0)}}return r}},{key:"_updateBuffers",value:function(e){var t=e.numInstances,n=e.data,r=e.props,i=e.context,a=this.attributes,s=Math.max(t,1);for(var l in a){var c=a[l];if(c.needsAlloc){var f=o(c.type||u.f.FLOAT);c.value=new f(c.size*s),h.onUpdate({level:2,message:l+" allocated "+s,id:this.id}),c.needsAlloc=!1,c.needsUpdate=!0}}for(var p in a){var d=a[p];d.needsUpdate&&this._updateBuffer({attribute:d,attributeName:p,numInstances:t,data:n,props:r,context:i})}this.allocedInstances=s}},{key:"_updateBuffer",value:function(e){var t=e.attribute,n=e.attributeName,r=e.numInstances,i=e.data,o=e.props,a=e.context,s=t.update,u=t.accessor,l=new Date;s?(s.call(a,t,{data:i,props:o,numInstances:r}),this._checkAttributeArray(t,n)):u?(this._updateBufferViaStandardAccessor({attribute:t,data:i,props:o}),this._checkAttributeArray(t,n)):h.onUpdate({level:2,message:n+" missing update function",id:this.id});var c=Math.round(new Date-l),f=c+"ms";h.onUpdate({level:2,message:n+" updated "+r+" "+f,id:this.id}),t.needsUpdate=!1,t.changed=!0,this.needsRedraw=!0}},{key:"_updateBufferViaStandardAccessor",value:function(e){var t=e.attribute,n=e.data,r=e.props,i=t.accessor,o=t.value,a=t.size,s=r[i];c()("function"===typeof s,'accessor "'+i+'" is not a function');var u=t.defaultValue,l=void 0===u?[0,0,0,0]:u;l=Array.isArray(l)?l:[l];var f=0,p=!0,h=!1,d=void 0;try{for(var v,m=n[Symbol.iterator]();!(p=(v=m.next()).done);p=!0){var y=v.value,g=s(y);switch(g=Array.isArray(g)?g:[g],a){case 4:o[f+3]=Number.isFinite(g[3])?g[3]:l[3];case 3:o[f+2]=Number.isFinite(g[2])?g[2]:l[2];case 2:o[f+1]=Number.isFinite(g[1])?g[1]:l[1];case 1:o[f+0]=Number.isFinite(g[0])?g[0]:l[0]}f+=a}}catch(e){h=!0,d=e}finally{try{!p&&m.return&&m.return()}finally{if(h)throw d}}}},{key:"_checkAttributeArray",value:function(e,t){var n=e.value;if(n&&n.length>=4){if(!(Number.isFinite(n[0])&&Number.isFinite(n[1])&&Number.isFinite(n[2])&&Number.isFinite(n[3])))throw new Error("Illegal attribute generated for "+t)}}},{key:"updateTransition",value:function(){var e=this.attributeTransitionManger,t=e.setCurrentTime(Date.now());return this.needsRedraw=this.needsRedraw||t,t}}]),e}();t.a=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return e<10?e.toFixed(2)+"ms":e<100?e.toFixed(1)+"ms":e<1e3?e.toFixed(0)+"ms":(e/1e3).toFixed(2)+"s"}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){var n=t.id;r(this,e),this.id=n,this.time=0,this.total=0,this.average=0,this.count=0,this._time=0}return o(e,[{key:"timeStart",value:function(){this._time=this.timestampMs()}},{key:"timeEnd",value:function(){this.time=this.timestampMs()-this._time,this.total+=this.time,this.count++,this.average=this.total/this.count}},{key:"timestampMs",value:function(){return"undefined"!==typeof window&&window.performance?window.performance.now():Date.now()}},{key:"getTimeString",value:function(){return this.id+":"+i(this.time)+"("+this.count+")"}}]),e}();t.a=a},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Intialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"}},function(e,t,n){"use strict";function r(e,t){var n=i({newProps:e,oldProps:t,ignoreProps:{data:null,updateTriggers:null}}),r=o(e,t),s=!1;return r||(s=a(e,t)),{dataChanged:r,propsChanged:n,updateTriggersChanged:s}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.newProps,n=e.oldProps,r=e.ignoreProps,i=void 0===r?{}:r,o=e.shallowCompareProps,a=void 0===o?{}:o,s=e.triggerName,u=void 0===s?"props":s;if(l()(void 0!==n&&void 0!==t,"compareProps args"),n===t)return null;if("object"!==("undefined"===typeof t?"undefined":c(t))||null===t)return u+" changed shallowly";if("object"!==("undefined"===typeof n?"undefined":c(n))||null===n)return u+" changed shallowly";for(var f in n)if(!(f in i)){if(!(f in t))return u+"."+f+" dropped: "+n[f]+" -> undefined";var p=t[f]&&n[f]&&t[f].equals;if(p&&!p.call(t[f],n[f]))return u+"."+f+" changed deeply: "+n[f]+" -> "+t[f];if(f in a){var h=c(t[f]);"function"===h&&"function"===typeof n[f]&&(p=!0)}if(!p&&n[f]!==t[f])return u+"."+f+" changed shallowly: "+n[f]+" -> "+t[f]}for(var d in t)if(!(d in i)&&!(d in n))return u+"."+d+" added: undefined -> "+t[d];return null}function o(e,t){if(null===t)return"oldProps is null, initial diff";var n=e.dataComparator;if(n){if(!n(e.data,t.data))return"Data comparator detected a change"}else if(e.data!==t.data)return"A new data container was supplied";return null}function a(e,t){if(null===t)return"oldProps is null, initial diff";if("all"in e.updateTriggers){if(s(t,e,"all"))return{all:!0}}var n={},r=!1;for(var i in e.updateTriggers)if("all"!==i){var o=s(t,e,i);o&&(n[i]=!0,r=n)}return r}function s(e,t,n){var r=e.updateTriggers[n]||{};return i({oldProps:t.updateTriggers[n]||{},newProps:r,triggerName:n})}t.b=r,t.a=i;var u=n(1),l=n.n(u),c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}},function(e,t,n){"use strict";function r(e){if(!o(e))throw new Error(s);if("function"===typeof e.count)return e.count();if(Number.isFinite(e.size))return e.size;if(Number.isFinite(e.length))return e.length;if(i(e))return Object.keys(e).length;throw new Error(u)}function i(e){return null!==e&&"object"===("undefined"===typeof e?"undefined":a(e))&&e.constructor===Object}function o(e){return null!==e&&"object"===("undefined"===typeof e?"undefined":a(e))}t.a=r;var a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s="count(): argument not an object",u="count(): argument not a container"},function(e,t,n){"use strict";function r(e,t){var n=(t.useDevicePixels,e.drawingBufferWidth),r=e.drawingBufferHeight;Object(f.t)(e,{viewport:[0,0,n,r]},function(){e.clear(f.f.COLOR_BUFFER_BIT|f.f.DEPTH_BUFFER_BIT)})}function i(e,t){var n=t.layers,i=t.viewports,o=t.onViewportActive,s=t.useDevicePixels,u=t.drawPickingColors,c=void 0!==u&&u,f=t.deviceRect,p=void 0===f?null:f,h=t.parameters,d=void 0===h?{}:h,v=t.layerFilter,m=void 0===v?null:v,y=t.pass,g=void 0===y?"draw":y,_=t.redrawReason,b=void 0===_?"":_;r(e,{useDevicePixels:s}),i.forEach(function(t,r){var i=l(t);o(i),a(e,{layers:n,viewport:i,useDevicePixels:s,drawPickingColors:c,deviceRect:p,parameters:d,layerFilter:m,pass:g,redrawReason:b})})}function o(e,t){var n=t.layers,r=t.viewports,o=t.onViewportActive,a=t.useDevicePixels,s=t.pickingFBO,u=t.deviceRect,l=u.x,c=u.y,p=u.width,h=u.height,d=t.layerFilter,v=void 0===d?null:d,m=t.redrawReason,y=void 0===m?"":m;return Object(f.t)(e,{framebuffer:s,scissorTest:!0,scissor:[l,c,p,h],clearColor:[0,0,0,0]},function(){i(e,{layers:n,viewports:r,onViewportActive:o,useDevicePixels:a,drawPickingColors:!0,layerFilter:v,pass:"picking",redrawReason:y,parameters:{blend:!0,blendFunc:[e.ONE,e.ZERO,e.CONSTANT_ALPHA,e.ZERO],blendEquation:e.FUNC_ADD,blendColor:[0,0,0,0]}})})}function a(e,t){var n=t.layers,r=t.viewport,i=t.useDevicePixels,o=t.drawPickingColors,a=void 0!==o&&o,l=(t.deviceRect,t.parameters),c=void 0===l?{}:l,p=t.layerFilter,h=t.pass,d=void 0===h?"draw":h,v=t.redrawReason,_=void 0===v?"":v,b=y({useDevicePixels:i}),x=g(e,{viewport:r,pixelRatio:b}),w={totalCount:n.length,visibleCount:0,compositeCount:0,pickableCount:0};Object(f.s)(e,c||{}),n.forEach(function(t,n){var i=t.props.visible;a&&(i=i&&t.props.pickable),i&&p&&(i=p({layer:t,viewport:r,isPicking:a})),i&&t.props.pickable&&w.pickableCount++,t.isComposite&&w.compositeCount++,i&&(t.isComposite||w.visibleCount++,s({gl:e,layer:t,layerIndex:n,drawPickingColors:a,pixelRatio:b,glViewport:x,parameters:c}))}),m++,u({renderStats:w,pass:d,redrawReason:_})}function s(e){var t=(e.gl,e.layer),n=e.layerIndex,r=e.drawPickingColors,i=e.pixelRatio,o=e.glViewport,a=e.parameters,s=Object.assign({},t.props,{viewport:t.context.viewport,pickingActive:r?1:0,devicePixelRatio:i}),u=Object.assign({},t.context.uniforms,{layerIndex:n}),l=Object.assign({},t.props.parameters||{},a);Object.assign(l,{viewport:o}),r?Object.assign(l,{blendColor:[0,0,0,(n+1)/255]}):Object.assign(s,c(t)),t.drawLayer({moduleParameters:s,uniforms:u,parameters:l})}function u(e){var t=e.renderStats,n=e.pass,r=e.redrawReason;if(p.a.priority>=v){var i=t.totalCount,o=t.visibleCount,a=t.compositeCount,s=t.pickableCount,u=i-a,l=u-o,c="";c+="RENDER #"+m+" "+o+" (of "+i+" layers) to "+n+" because "+r+" ",p.a.priority>v&&(c+="("+l+" hidden, "+a+" composite "+s+" pickable)"),p.a.log(v,c)}}function l(e){return e.viewport?e.viewport:e}function c(e){if(Number.isInteger(e.props.highlightedObjectIndex)){return{pickingSelectedColor:e.props.highlightedObjectIndex>=0?e.encodePickingColor(e.props.highlightedObjectIndex):null}}return null}n.d(t,"c",function(){return y}),t.a=i,t.b=o;var f=n(6),p=n(10),h=n(1),d=n.n(h),v=2,m=0,y=function(e){var t=e.useDevicePixels;return d()("boolean"===typeof t,"Invalid useDevicePixels"),t&&"undefined"!==typeof window?window.devicePixelRatio:1},g=function(e,t){var n=t.viewport,r=t.pixelRatio,i=e.canvas?e.canvas.clientHeight:100,o=n;return[o.x*r,(i-o.y-o.height)*r,o.width*r,o.height*r]}},function(e,t,n){"use strict";function r(e,t){return Object.keys(e).some(function(n){return Array.isArray(e[n])&&Array.isArray(t[n])?r(e[n],t[n]):e[n]===t[n]})}t.a=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(30),s=n(122),u=function(e){function t(e){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Object.assign({},e,{type:s.a})))}return o(t,e),t}(a.a);t.a=u,u.displayName="MapView"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(9),o=n(1),a=n.n(o),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=i.e.SphericalCoordinates,l={position:[0,0,0],lookAt:[0,0,0],up:[0,0,1],rotationX:0,rotationY:0,fov:50,near:1,far:100},c=function(){function e(t){r(this,e);var n=t.width,o=t.height,s=t.position,u=void 0===s?l.position:s;a()(Number.isFinite(n),"`width` must be supplied"),a()(Number.isFinite(o),"`height` must be supplied"),this._viewportProps=this._applyConstraints(Object.assign({},t,{position:new i.c(u)}))}return s(e,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getDirection",value:function(){return new u({bearing:this._viewportProps.bearing,pitch:this._viewportProps.pitch}).toVector3().normalize()}},{key:"getDirectionFromBearing",value:function(e){return new u({bearing:e,pitch:90}).toVector3().normalize()}},{key:"_applyConstraints",value:function(e){return e}}]),e}();t.a=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n){return e<t?t:e>n?n:e}function o(e,t){return Number.isFinite(e)?e:t}var a=n(62),s=n(1),u=n.n(s),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c={lookAt:[0,0,0],rotationX:0,rotationOrbit:0,fov:50,near:1,far:100,translationX:0,translationY:0,zoom:1},f={minZoom:0,maxZoom:1/0},p=function(){function e(t){var n=t.width,i=t.height,a=t.distance,s=t.rotationX,l=t.rotationOrbit,p=t.orbitAxis,h=t.bounds,d=t.lookAt,v=t.fov,m=t.near,y=t.far,g=t.translationX,_=t.translationY,b=t.zoom,x=t.minZoom,w=t.maxZoom,E=t.startPanViewport,S=t.startPanPos,T=t.isPanning,A=t.startRotateViewport,O=t.isRotating,P=t.startZoomViewport,C=t.startZoomPos;r(this,e),u()(Number.isFinite(n),"`width` must be supplied"),u()(Number.isFinite(i),"`height` must be supplied"),u()(Number.isFinite(a),"`distance` must be supplied"),this._viewportProps=this._applyConstraints({width:n,height:i,distance:a,rotationX:o(s,c.rotationX),rotationOrbit:o(l,c.rotationOrbit),orbitAxis:p,bounds:h,lookAt:d||c.lookAt,fov:o(v,c.fov),near:o(m,c.near),far:o(y,c.far),translationX:o(g,c.translationX),translationY:o(_,c.translationY),zoom:o(b,c.zoom),minZoom:o(x,f.minZoom),maxZoom:o(w,f.maxZoom)}),this._interactiveState={startPanViewport:E,startPanPos:S,isPanning:T,startRotateViewport:A,isRotating:O,startZoomViewport:P,startZoomPos:C}}return l(e,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"panStart",value:function(e){var t=e.pos,n=new a.a(this._viewportProps);return this._getUpdatedOrbitState({startPanPos:t,startPanViewport:n})}},{key:"pan",value:function(e){var t=e.pos,n=e.startPos;if(this._interactiveState.isRotating)return this._getUpdatedOrbitState();var r=this._interactiveState.startPanPos||n;u()(r,"`startPanPos` props is required");var i=this._interactiveState.startPanViewport||new a.a(this._viewportProps),o=t[0]-r[0],s=t[1]-r[1],l=i.project(i.lookAt),c=i.unproject([l[0]-o,l[1]-s,l[2]]);return this._getUpdatedOrbitState({lookAt:c,isPanning:!0})}},{key:"panEnd",value:function(){return this._getUpdatedOrbitState({startPanViewport:null,startPanPos:null,isPanning:null})}},{key:"rotateStart",value:function(e){var t=(e.pos,new a.a(this._viewportProps));return this._getUpdatedOrbitState({startRotateViewport:t})}},{key:"rotate",value:function(e){var t=e.deltaScaleX,n=e.deltaScaleY;if(this._interactiveState.isPanning)return this._getUpdatedOrbitState();var r=this._interactiveState.startRotateViewport,a=r||{},s=a.rotationX,u=a.rotationOrbit;s=o(s,this._viewportProps.rotationX),u=o(u,this._viewportProps.rotationOrbit);var l=i(s-180*n,-89.999,89.999),c=(u-180*t)%360;return this._getUpdatedOrbitState({rotationX:l,rotationOrbit:c,isRotating:!0})}},{key:"rotateEnd",value:function(){return this._getUpdatedOrbitState({startRotateViewport:null,isRotating:null})}},{key:"zoomStart",value:function(e){var t=e.pos,n=new a.a(this._viewportProps);return this._getUpdatedOrbitState({startZoomViewport:n,startZoomPos:t})}},{key:"zoom",value:function(e){var t=e.pos,n=e.startPos,r=e.scale,o=this._viewportProps,s=o.zoom,u=o.minZoom,l=o.maxZoom,c=o.width,f=o.height,p=this._interactiveState.startZoomPos||n||t,h=this._interactiveState.startZoomViewport||new a.a(this._viewportProps),d=i(s*r,u,l),v=t[0]-p[0],m=t[1]-p[1],y=p[0]-c/2,g=f/2-p[1],_=h.project(h.lookAt),b=_[0]-y+y*d/s+v,x=_[1]+g-g*d/s-m,w=h.unproject([b,x,_[2]]);return this._getUpdatedOrbitState({lookAt:w,zoom:d})}},{key:"zoomEnd",value:function(){return this._getUpdatedOrbitState({startZoomPos:null})}},{key:"_getUpdatedOrbitState",value:function(t){return new e(Object.assign({},this._viewportProps,this._interactiveState,t))}},{key:"_applyConstraints",value:function(e){var t=e.maxZoom,n=e.minZoom,r=e.zoom;return e.zoom=r>t?t:r,e.zoom=r<n?n:r,e}}]),e}();t.a=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(9),o=n(1),a=n.n(o),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(){function e(){r(this,e)}return s(e,[{key:"arePropsEqual",value:function(e,t){var n=!0,r=!1,o=void 0;try{for(var a,s=(this.propNames||[])[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value;if(!Object(i.d)(e[u],t[u]))return!1}}catch(e){r=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return!0}},{key:"initializeProps",value:function(e,t){return{start:e,end:t}}},{key:"interpolateProps",value:function(e,t,n){a()(!1,"interpolateProps is not implemented")}}]),e}();t.a=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(124),s=n(85),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e){function t(e){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s.b,e))}return o(t,e),u(t,[{key:"_onPan",value:function(e){return this.isFunctionKeyPressed(e)?this._onPanRotate(e):this._onPanMove(e)}}]),t}(a.a);t.a=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){var n=t.gl,i=t.layerManager;r(this,e),this.gl=n,this.layerManager=i,this._effects=[]}return i(e,[{key:"addEffect",value:function(e){this._effects.push(e),this._sortEffects(),e.initialize({gl:this.gl,layerManager:this.layerManager})}},{key:"removeEffect",value:function(e){var t=this._effects.indexOf(e);return t>=0&&(e.finalize({gl:this.gl,layerManager:this.layerManager}),this._effects.splice(t,1),!0)}},{key:"preDraw",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this._effects[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;o.needsRedraw&&o.preDraw({gl:this.gl,layerManager:this.layerManager})}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}}},{key:"draw",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this._effects[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;o.needsRedraw&&o.draw({gl:this.gl,layerManager:this.layerManager})}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}}},{key:"_sortEffects",value:function(){this._effects.sort(function(e,t){return e.priority>t.priority?-1:e.priority<t.priority?1:e.count-t.count})}}]),e}();t.a=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(2),o=n.n(i),a=n(61),s=n(224),u=n(85),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c={GRABBING:"-webkit-grabbing",GRAB:"-webkit-grab",POINTER:"pointer"},f={width:o.a.number.isRequired,height:o.a.number.isRequired,longitude:o.a.number.isRequired,latitude:o.a.number.isRequired,zoom:o.a.number.isRequired,bearing:o.a.number,pitch:o.a.number,altitude:o.a.number,maxZoom:o.a.number,minZoom:o.a.number,maxPitch:o.a.number,minPitch:o.a.number,onViewportChange:o.a.func,scrollZoom:o.a.bool,dragPan:o.a.bool,dragRotate:o.a.bool,doubleClickZoom:o.a.bool,touchZoomRotate:o.a.bool,getCursor:o.a.func,controls:o.a.shape({events:o.a.arrayOf(o.a.string),handleEvent:o.a.func})},p=function(e){return e.isDragging?c.GRABBING:c.GRAB},h=Object.assign({},u.a,{onViewportChange:null,scrollZoom:!0,dragPan:!0,dragRotate:!0,doubleClickZoom:!0,touchZoomRotate:!0,getCursor:p}),d=function(){function e(t){r(this,e),t=Object.assign({},h,t),this.props=t,this.state={isDragging:!1},this.canvas=t.canvas;var n=new a.a(this.canvas);this._eventManager=n,this._controls=this.props.controls||new s.a,this._controls.setOptions(Object.assign({},this.props,{onStateChange:this._onInteractiveStateChange.bind(this),eventManager:n}))}return l(e,[{key:"setProps",value:function(e){e=Object.assign({},this.props,e),this.props=e,this._controls.setOptions(e)}},{key:"finalize",value:function(){this._eventManager.destroy()}},{key:"_onInteractiveStateChange",value:function(e){var t=e.isDragging,n=void 0!==t&&t;if(n!==this.state.isDragging){this.state.isDragging=n;var r=this.props.getCursor;this.canvas.style.cursor=r(this.state)}}}]),e}();t.a=d,d.displayName="MapController",d.propTypes=f,d.defaultProps=h},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(2),o=n.n(i),a=n(62),s=n(222),u=n(124),l=n(61),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f={GRABBING:"-webkit-grabbing",GRAB:"-webkit-grab",POINTER:"pointer"},p={lookAt:o.a.arrayOf(o.a.number),distance:o.a.number,rotationX:o.a.number,rotationY:o.a.number,translationX:o.a.number,translationY:o.a.number,zoom:o.a.number,minZoom:o.a.number,maxZoom:o.a.number,fov:o.a.number,near:o.a.number,far:o.a.number,width:o.a.number.isRequired,height:o.a.number.isRequired,bounds:o.a.object,onViewportChange:o.a.func.isRequired,getCursor:o.a.func,orbitControls:o.a.object},h=function(e){return e.isDragging?f.GRABBING:f.GRAB},d={lookAt:[0,0,0],rotationX:0,rotationY:0,translationX:0,translationY:0,distance:10,zoom:1,minZoom:0,maxZoom:1/0,fov:50,near:1,far:1e3,getCursor:h},v=function(){function e(t){r(this,e),t=Object.assign({},d,t),this.props=t,this.state={isDragging:!1},this.canvas=t.canvas;var n=new l.a(this.canvas);this._eventManager=n,this._controls=t.orbitControls||new u.a(s.a),this._controls.setOptions(Object.assign({},this.props,{onStateChange:this._onInteractiveStateChange.bind(this),eventManager:n}))}return c(e,null,[{key:"getViewport",value:function(e){return new a.a(e)}}]),c(e,[{key:"setProps",value:function(e){e=Object.assign({},this.props,e),this.props=e,this._controls.setOptions(e)}},{key:"finalize",value:function(){this._eventManager.destroy()}},{key:"_onInteractiveStateChange",value:function(e){var t=e.isDragging,n=void 0!==t&&t;if(n!==this.state.isDragging){this.state.isDragging=n;var r=this.props.getCursor;this.canvas.style.cursor=r(this.state)}}}]),e}();t.a=v,v.displayName="OrbitController",v.propTypes=p,v.defaultProps=d},function(e,t,n){"use strict";function r(e,t,n){return(n-e[0])/(e[1]-e[0])*(t[1]-t[0])+t[0]}function i(e,t,n){var r=(e[1]-e[0])/t.length,i=Math.floor((n-e[0])/r);return t[Math.max(Math.min(i,t.length-1),0)]}function o(e,t){return function(n){var r=(e[1]-e[0])/t.length,i=Math.floor((n-e[0])/r),o=Math.max(Math.min(i,t.length-1),0);return t[o]}}function a(e,t){return function(n){return(n-e[0])/(e[1]-e[0])*(t[1]-t[0])+t[0]}}function s(e,t){var n=u(e,2),r=n[0],i=n[1];return Math.min(i,Math.max(r,t))}t.d=r,t.e=i,t.c=o,t.b=a,t.a=s;var u=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(8),s=n(6),u=n(494),l=n(495),c=n(496),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},h=a.d.fp64LowPart,d=a.d.enable64bitSupport,v=[0,0,0,255],m={radiusScale:1,radiusMinPixels:0,radiusMaxPixels:Number.MAX_SAFE_INTEGER,strokeWidth:1,outline:!1,fp64:!1,getPosition:function(e){return e.position},getRadius:function(e){return e.radius||1},getColor:function(e){return e.color||v}},y=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),f(t,[{key:"getShaders",value:function(e){var t=this.context.shaderCache;return d(this.props)?{vs:l.a,fs:c.a,modules:["project64","picking"],shaderCache:t}:{vs:u.a,fs:c.a,modules:["picking"],shaderCache:t}}},{key:"initializeState",value:function(){this.state.attributeManager.addInstanced({instancePositions:{size:3,transition:!0,accessor:"getPosition",update:this.calculateInstancePositions},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1,update:this.calculateInstanceRadius},instanceColors:{size:4,transition:!0,type:s.f.UNSIGNED_BYTE,accessor:"getColor",update:this.calculateInstanceColors}})}},{key:"updateAttribute",value:function(e){var t=e.props,n=e.oldProps;e.changeFlags;if(t.fp64!==n.fp64){var r=this.getAttributeManager();r.invalidateAll(),t.fp64&&t.coordinateSystem===a.a.LNGLAT?r.addInstanced({instancePositions64xyLow:{size:2,accessor:"getPosition",update:this.calculateInstancePositions64xyLow}}):r.remove(["instancePositions64xyLow"])}}},{key:"updateState",value:function(e){var n=e.props,r=e.oldProps,i=e.changeFlags;if(p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateState",this).call(this,{props:n,oldProps:r,changeFlags:i}),n.fp64!==r.fp64){var o=this.context.gl;this.setState({model:this._getModel(o)})}this.updateAttribute({props:n,oldProps:r,changeFlags:i})}},{key:"draw",value:function(e){var t=e.uniforms,n=this.props,r=n.radiusScale,i=n.radiusMinPixels,o=n.radiusMaxPixels,a=n.outline,s=n.strokeWidth;this.state.model.render(Object.assign({},t,{outline:a?1:0,strokeWidth:s,radiusScale:r,radiusMinPixels:i,radiusMaxPixels:o}))}},{key:"_getModel",value:function(e){var t=[-1,-1,0,-1,1,0,1,1,0,1,-1,0];return new s.h(e,Object.assign(this.getShaders(),{id:this.props.id,geometry:new s.g({drawMode:s.f.TRIANGLE_FAN,attributes:{positions:new Float32Array(t)}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"calculateInstancePositions",value:function(e){var t=this.props,n=t.data,r=t.getPosition,i=e.value,o=0,a=!0,s=!1,u=void 0;try{for(var l,c=n[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value,p=r(f);i[o++]=p[0],i[o++]=p[1],i[o++]=p[2]||0}}catch(e){s=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw u}}}},{key:"calculateInstancePositions64xyLow",value:function(e){var t=this.props,n=t.data,r=t.getPosition,i=e.value,o=0,a=!0,s=!1,u=void 0;try{for(var l,c=n[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value,p=r(f);i[o++]=h(p[0]),i[o++]=h(p[1])}}catch(e){s=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw u}}}},{key:"calculateInstanceRadius",value:function(e){var t=this.props,n=t.data,r=t.getRadius,i=e.value,o=0,a=!0,s=!1,u=void 0;try{for(var l,c=n[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value,p=r(f);i[o++]=isNaN(p)?1:p}}catch(e){s=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw u}}}},{key:"calculateInstanceColors",value:function(e){var t=this.props,n=t.data,r=t.getColor,i=e.value,o=0,a=!0,s=!1,u=void 0;try{for(var l,c=n[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value,p=r(f)||v;i[o++]=p[0],i[o++]=p[1],i[o++]=p[2],i[o++]=isNaN(p[3])?255:p[3]}}catch(e){s=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw u}}}}]),t}(a.c);t.a=y,y.layerName="ScatterplotLayer",y.defaultProps=m},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(8),s=n(6),u=n(501),l=n(502),c=n(503),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},h=a.d.fp64LowPart,d=a.d.enable64bitSupport,v=[255,0,255,255],m={cellSize:{type:"number",min:0,max:1e3,value:1e3},coverage:{type:"number",min:0,max:1,value:1},elevationScale:{type:"number",min:0,value:1},extruded:!0,fp64:!1,getPosition:function(e){return e.position},getElevation:function(e){return e.elevation},getColor:function(e){return e.color},lightSettings:{}},y=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),f(t,[{key:"getShaders",value:function(){var e=this.context.shaderCache;return d(this.props)?{vs:l.a,fs:c.a,modules:["project64","lighting","picking"],shaderCache:e}:{vs:u.a,fs:c.a,modules:["lighting","picking"],shaderCache:e}}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:4,transition:!0,accessor:["getPosition","getElevation"],update:this.calculateInstancePositions},instanceColors:{size:4,type:s.f.UNSIGNED_BYTE,transition:!0,accessor:"getColor",update:this.calculateInstanceColors}})}},{key:"updateAttribute",value:function(e){var t=e.props,n=e.oldProps;e.changeFlags;if(t.fp64!==n.fp64){var r=this.getAttributeManager();r.invalidateAll(),t.fp64&&t.coordinateSystem===a.a.LNGLAT?r.addInstanced({instancePositions64xyLow:{size:2,accessor:"getPosition",update:this.calculateInstancePositions64xyLow}}):r.remove(["instancePositions64xyLow"])}}},{key:"updateState",value:function(e){var n=e.props,r=e.oldProps,i=e.changeFlags;if(p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateState",this).call(this,{props:n,oldProps:r,changeFlags:i}),n.fp64!==r.fp64){var o=this.context.gl;this.setState({model:this._getModel(o)})}this.updateAttribute({props:n,oldProps:r,changeFlags:i}),this.updateUniforms()}},{key:"_getModel",value:function(e){return new s.h(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new s.c,isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"updateUniforms",value:function(){var e=this.props,t=e.opacity,n=e.extruded,r=e.elevationScale,i=e.coverage,o=e.lightSettings;this.state.model.setUniforms(Object.assign({},{extruded:n,elevationScale:r,opacity:t,coverage:i},o))}},{key:"draw",value:function(e){var n=e.uniforms,r=this.context.viewport,i=r.getDistanceScales(),o=i.pixelsPerMeter;p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"draw",this).call(this,{uniforms:Object.assign({cellSize:this.props.cellSize*o[0]},n)})}},{key:"calculateInstancePositions",value:function(e){var t=this.props,n=t.data,r=t.getPosition,i=t.getElevation,o=e.value,a=e.size,s=0,u=!0,l=!1,c=void 0;try{for(var f,p=n[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var h=f.value,d=r(h),v=i(h)||0;o[s+0]=d[0],o[s+1]=d[1],o[s+2]=0,o[s+3]=v,s+=a}}catch(e){l=!0,c=e}finally{try{!u&&p.return&&p.return()}finally{if(l)throw c}}}},{key:"calculateInstancePositions64xyLow",value:function(e){var t=this.props,n=t.data,r=t.getPosition,i=e.value,o=0,a=!0,s=!1,u=void 0;try{for(var l,c=n[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value,p=r(f);i[o++]=h(p[0]),i[o++]=h(p[1])}}catch(e){s=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw u}}}},{key:"calculateInstanceColors",value:function(e){var t=this.props,n=t.data,r=t.getColor,i=e.value,o=e.size,a=0,s=!0,u=!1,l=void 0;try{for(var c,f=n[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var p=c.value,h=r(p)||v;i[a+0]=h[0],i[a+1]=h[1],i[a+2]=h[2],i[a+3]=Number.isFinite(h[3])?h[3]:v[3],a+=o}}catch(e){u=!0,l=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw l}}}}]),t}(a.c);t.a=y,y.layerName="GridCellLayer",y.defaultProps=m},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(8),s=n(6),u=n(506),l=n(507),c=n(508),f=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},d=a.d.log,v=a.d.fp64LowPart,m=a.d.enable64bitSupport,y=[255,0,255,255],g={hexagonVertices:null,radius:null,angle:null,coverage:{type:"number",min:0,max:1,value:1},elevationScale:{type:"number",min:0,value:1},extruded:!0,fp64:!1,getCentroid:function(e){return e.centroid},getColor:function(e){return e.color},getElevation:function(e){return e.elevation},lightSettings:{}},_=function(e){function t(e){r(this,t);var n=!1;return e.hexagonVertices||e.radius&&Number.isFinite(e.angle)?e.hexagonVertices&&(!Array.isArray(e.hexagonVertices)||e.hexagonVertices.length<6)&&(d.once(0,"HexagonCellLayer: hexagonVertices needs to be an array of 6 points"),n=!0):(d.once(0,"HexagonCellLayer: Either hexagonVertices or radius and angle are needed to calculate primitive hexagon."),n=!0),n&&(d.once(0,"Now using 1000 meter as default radius, 0 as default angle"),e.radius=1e3,e.angle=0),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),p(t,[{key:"getShaders",value:function(){return m(this.props)?{vs:l.a,fs:c.a,modules:["project64","lighting","picking"]}:{vs:u.a,fs:c.a,modules:["lighting","picking"]}}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,transition:!0,accessor:["getCentroid","getElevation"],update:this.calculateInstancePositions},instanceColors:{size:4,type:s.f.UNSIGNED_BYTE,transition:!0,accessor:"getColor",update:this.calculateInstanceColors}})}},{key:"updateAttribute",value:function(e){var t=e.props,n=e.oldProps;e.changeFlags;if(t.fp64!==n.fp64){var r=this.getAttributeManager();r.invalidateAll(),t.fp64&&t.coordinateSystem===a.a.LNGLAT?r.addInstanced({instancePositions64xyLow:{size:2,accessor:"getCentroid",update:this.calculateInstancePositions64xyLow}}):r.remove(["instancePositions64xyLow"])}}},{key:"updateState",value:function(e){var n=e.props,r=e.oldProps,i=e.changeFlags;if(h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateState",this).call(this,{props:n,oldProps:r,changeFlags:i}),n.fp64!==r.fp64){var o=this.context.gl;this.setState({model:this._getModel(o)})}this.updateAttribute({props:n,oldProps:r,changeFlags:i}),this.updateUniforms()}},{key:"updateRadiusAngle",value:function(){var e=void 0,t=void 0,n=this.props.hexagonVertices;if(Array.isArray(n)&&n.length>=6){var r=this.props.hexagonVertices,i=r[0],o=r[3],a=this.projectFlat(i),s=this.projectFlat(o),u=a[0]-s[0],l=a[1]-s[1],c=Math.sqrt(u*u+l*l);e=Math.acos(u/c)*-Math.sign(l)+Math.PI/2,t=c/2}else if(this.props.radius&&Number.isFinite(this.props.angle)){var f=this.context.viewport,p=f.getDistanceScales(),h=p.pixelsPerMeter;e=this.props.angle,t=this.props.radius*h[0]}return{angle:e,radius:t}}},{key:"getCylinderGeometry",value:function(e){return new s.d({radius:e,topRadius:e,bottomRadius:e,topCap:!0,bottomCap:!0,height:1,nradial:6,nvertical:1})}},{key:"updateUniforms",value:function(){var e=this.props,t=e.opacity,n=e.elevationScale,r=e.extruded,i=e.coverage;this.state.model.setUniforms({extruded:r,opacity:t,coverage:i,elevationScale:n})}},{key:"_getModel",value:function(e){return new s.h(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:this.getCylinderGeometry(1),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"draw",value:function(e){var n=e.uniforms;h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"draw",this).call(this,{uniforms:Object.assign(this.updateRadiusAngle(),n)})}},{key:"calculateInstancePositions",value:function(e){var t=this.props,n=t.data,r=t.getCentroid,i=t.getElevation,o=e.value,a=e.size,s=0,u=!0,l=!1,c=void 0;try{for(var p,h=n[Symbol.iterator]();!(u=(p=h.next()).done);u=!0){var d=p.value,v=r(d),m=f(v,2),y=m[0],g=m[1],_=i(d);o[s+0]=y,o[s+1]=g,o[s+2]=_||0,s+=a}}catch(e){l=!0,c=e}finally{try{!u&&h.return&&h.return()}finally{if(l)throw c}}}},{key:"calculateInstancePositions64xyLow",value:function(e){var t=this.props,n=t.data,r=t.getCentroid,i=e.value,o=0,a=!0,s=!1,u=void 0;try{for(var l,c=n[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value,p=r(f);i[o++]=v(p[0]),i[o++]=v(p[1])}}catch(e){s=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw u}}}},{key:"calculateInstanceColors",value:function(e){var t=this.props,n=t.data,r=t.getColor,i=e.value,o=e.size,a=0,s=!0,u=!1,l=void 0;try{for(var c,f=n[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var p=c.value,h=r(p)||y;i[a+0]=h[0],i[a+1]=h[1],i[a+2]=h[2],i[a+3]=Number.isFinite(h[3])?h[3]:y[3],a+=o}}catch(e){u=!0,l=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw l}}}}]),t}(a.c);t.a=_,_.layerName="HexagonCellLayer",_.defaultProps=g},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(8),s=n(6),u=n(216),l=n(516),c=n(517),f=n(518),p=n(519),h=n(520),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},m=a.d.enable64bitSupport,y=a.d.get,g={extruded:!1,wireframe:!1,fp64:!1,elevationScale:1,getPolygon:function(e){return y(e,"polygon")||y(e,"geometry.coordinates")},getElevation:function(e){return y(e,"elevation")||y(e,"properties.height")||0},getColor:function(e){return y(e,"color")||y(e,"properties.color")},lightSettings:{}},_=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),d(t,[{key:"getShaders",value:function(){return m(this.props)?{vs:p.a,fs:h.a,modules:["project64","lighting","picking"]}:{vs:f.a,fs:h.a,modules:["lighting","picking"]}}},{key:"initializeState",value:function(){var e=this.context.gl;this.setState({numInstances:0,IndexType:e.getExtension("OES_element_index_uint")?Uint32Array:Uint16Array});var t=this.getAttributeManager();t.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:!0},positions:{size:3,accessor:"getElevation",update:this.calculatePositions,noAlloc:!0},normals:{size:3,update:this.calculateNormals,noAlloc:!0},colors:{size:4,type:s.f.UNSIGNED_BYTE,accessor:"getColor",update:this.calculateColors,noAlloc:!0},pickingColors:{size:3,type:s.f.UNSIGNED_BYTE,update:this.calculatePickingColors,noAlloc:!0}})}},{key:"updateAttribute",value:function(e){var t=e.props,n=e.oldProps;e.changeFlags;if(t.fp64!==n.fp64){var r=this.getAttributeManager();r.invalidateAll(),t.fp64&&t.coordinateSystem===a.a.LNGLAT?r.add({positions64xyLow:{size:2,update:this.calculatePositionsLow}}):r.remove(["positions64xyLow"])}}},{key:"draw",value:function(e){var t=e.uniforms,n=this.props,r=n.extruded,i=n.wireframe,o=n.elevationScale;this.state.model.render(Object.assign({},t,{extruded:r?1:0,wireframe:i?1:0,elevationScale:o}))}},{key:"updateState",value:function(e){var n=e.props,r=e.oldProps,i=e.changeFlags;if(v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateState",this).call(this,{props:n,oldProps:r,changeFlags:i}),this.updateGeometry({props:n,oldProps:r,changeFlags:i})){var o=this.context.gl;this.setState({model:this._getModel(o)})}this.updateAttribute({props:n,oldProps:r,changeFlags:i})}},{key:"updateGeometry",value:function(e){var t=this,n=e.props,r=e.oldProps,i=e.changeFlags,o=n.extruded!==r.extruded||n.wireframe!==r.wireframe||n.fp64!==r.fp64||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getPolygon),a=i.updateTriggersChanged&&Object(u.a)({oldProps:r.updateTriggers.getElevation||{},newProps:n.updateTriggers.getElevation||{},triggerName:"getElevation"});if(i.dataChanged||o||a){var s=n.getPolygon,f=n.extruded,p=n.wireframe,h=n.getElevation,d=n.data.map(s);this.setState({polygonTesselator:f?new c.a({polygons:d,wireframe:p,getHeight:function(e){return h(t.props.data[e])},fp64:this.props.fp64}):new l.a({polygons:d,fp64:this.props.fp64})}),this.state.attributeManager.invalidateAll()}return o}},{key:"_getModel",value:function(e){return new s.h(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new s.g({drawMode:this.props.wireframe?s.f.LINES:s.f.TRIANGLES,attributes:{}}),vertexCount:0,isIndexed:!0,shaderCache:this.context.shaderCache}))}},{key:"calculateIndices",value:function(e){e.value=this.state.polygonTesselator.indices(),e.target=s.f.ELEMENT_ARRAY_BUFFER,this.state.model.setVertexCount(e.value.length/e.size)}},{key:"calculatePositions",value:function(e){e.value=this.state.polygonTesselator.positions().positions}},{key:"calculatePositionsLow",value:function(e){e.value=this.state.polygonTesselator.positions().positions64xyLow}},{key:"calculateNormals",value:function(e){e.value=this.state.polygonTesselator.normals()}},{key:"calculateColors",value:function(e){var t=this;e.value=this.state.polygonTesselator.colors({getColor:function(e){return t.props.getColor(t.props.data[e])}})}},{key:"calculatePickingColors",value:function(e){e.value=this.state.polygonTesselator.pickingColors()}}]),t}(a.c);t.a=_,_.layerName="SolidPolygonLayer",_.defaultProps=g},function(e,t,n){"use strict";function r(e,t,n){n=n||2;var r=t&&t.length,o=r?t[0]*n:e.length,s=i(e,0,o,n,!0),u=[];if(!s)return u;var l,c,p,h,d,v,m;if(r&&(s=f(e,t,s,n)),e.length>80*n){l=p=e[0],c=h=e[1];for(var y=n;y<o;y+=n)d=e[y],v=e[y+1],d<l&&(l=d),v<c&&(c=v),d>p&&(p=d),v>h&&(h=v);m=Math.max(p-l,h-c),m=0!==m?1/m:0}return a(s,u,n,l,c,m),u}function i(e,t,n,r,i){var o,a;if(i===R(e,t,n,r)>0)for(o=t;o<n;o+=r)a=P(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=P(o,e[o],e[o+1],a);return a&&w(a,a.next)&&(C(a),a=a.next),a}function o(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!w(r,r.next)&&0!==x(r.prev,r,r.next))r=r.next;else{if(C(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function a(e,t,n,r,i,f,p){if(e){!p&&f&&v(e,r,i,f);for(var h,d,m=e;e.prev!==e.next;)if(h=e.prev,d=e.next,f?u(e,r,i,f):s(e))t.push(h.i/n),t.push(e.i/n),t.push(d.i/n),C(e),e=d.next,m=d.next;else if((e=d)===m){p?1===p?(e=l(e,t,n),a(e,t,n,r,i,f,2)):2===p&&c(e,t,n,r,i,f):a(o(e),t,n,r,i,f,1);break}}}function s(e){var t=e.prev,n=e,r=e.next;if(x(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(_(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&x(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function u(e,t,n,r){var i=e.prev,o=e,a=e.next;if(x(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,l=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,f=y(s,u,t,n,r),p=y(l,c,t,n,r),h=e.prevZ,d=e.nextZ;h&&h.z>=f&&d&&d.z<=p;){if(h!==e.prev&&h!==e.next&&_(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&x(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,d!==e.prev&&d!==e.next&&_(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&x(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;h&&h.z>=f;){if(h!==e.prev&&h!==e.next&&_(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&x(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;d&&d.z<=p;){if(d!==e.prev&&d!==e.next&&_(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&x(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function l(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;!w(i,o)&&E(i,r,r.next,o)&&T(i,o)&&T(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),C(r),C(r.next),r=e=o),r=r.next}while(r!==e);return r}function c(e,t,n,r,i,s){var u=e;do{for(var l=u.next.next;l!==u.prev;){if(u.i!==l.i&&b(u,l)){var c=O(u,l);return u=o(u,u.next),c=o(c,c.next),a(u,t,n,r,i,s),void a(c,t,n,r,i,s)}l=l.next}u=u.next}while(u!==e)}function f(e,t,n,r){var a,s,u,l,c,f=[];for(a=0,s=t.length;a<s;a++)u=t[a]*r,l=a<s-1?t[a+1]*r:e.length,c=i(e,u,l,r,!1),c===c.next&&(c.steiner=!0),f.push(g(c));for(f.sort(p),a=0;a<f.length;a++)h(f[a],n),n=o(n,n.next);return n}function p(e,t){return e.x-t.x}function h(e,t){if(t=d(e,t)){var n=O(t,e);o(n,n.next)}}function d(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===a)return n.prev;var u,l=n,c=n.x,f=n.y,p=1/0;for(r=n.next;r!==l;)i>=r.x&&r.x>=c&&i!==r.x&&_(o<f?i:a,o,c,f,o<f?a:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<p||u===p&&r.x>n.x)&&T(r,e)&&(n=r,p=u),r=r.next;return n}function v(e,t,n,r){var i=e;do{null===i.z&&(i.z=y(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,m(i)}function m(e){var t,n,r,i,o,a,s,u,l=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<l&&(s++,r=r.nextZ);t++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1);return e}function y(e,t,n,r,i){return e=32767*(e-n)*i,t=32767*(t-r)*i,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1}function g(e){var t=e,n=e;do{t.x<n.x&&(n=t),t=t.next}while(t!==e);return n}function _(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function b(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!S(e,t)&&T(e,t)&&T(t,e)&&A(e,t)}function x(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function w(e,t){return e.x===t.x&&e.y===t.y}function E(e,t,n,r){return!!(w(e,t)&&w(n,r)||w(e,r)&&w(n,t))||x(e,t,n)>0!==x(e,t,r)>0&&x(n,r,e)>0!==x(n,r,t)>0}function S(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&E(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function T(e,t){return x(e.prev,e,e.next)<0?x(e,t,e.next)>=0&&x(e,e.prev,t)>=0:x(e,t,e.prev)<0||x(e,e.next,t)<0}function A(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}function O(e,t){var n=new k(e.i,e.x,e.y),r=new k(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function P(e,t,n,r){var i=new k(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function C(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function k(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function R(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}e.exports=r,e.exports.default=r,r.deviation=function(e,t,n,r){var i=t&&t.length,o=i?t[0]*n:e.length,a=Math.abs(R(e,0,o,n));if(i)for(var s=0,u=t.length;s<u;s++){var l=t[s]*n,c=s<u-1?t[s+1]*n:e.length;a-=Math.abs(R(e,l,c,n))}var f=0;for(s=0;s<r.length;s+=3){var p=r[s]*n,h=r[s+1]*n,d=r[s+2]*n;f+=Math.abs((e[p]-e[d])*(e[h+1]-e[p+1])-(e[p]-e[h])*(e[d+1]-e[p+1]))}return 0===a&&0===f?0:Math.abs((f-a)/a)},r.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)n.vertices.push(e[i][o][a]);i>0&&(r+=e[i-1].length,n.holes.push(r))}return n}},function(e,t,n){"use strict";var r=n(235);n.d(t,"d",function(){return r.a});var i=n(527);n.d(t,"c",function(){return i.a});var o=n(529);n.d(t,"a",function(){return o.a});var a=n(530);n.d(t,"b",function(){return a.a});n(236)},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(0),u=n.n(s),l=n(2),c=n.n(l),f=n(236),p=n(526),h=n(8),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=h.d.Deck,m=h.d.log,y=Object.assign({},v.propTypes,{viewports:c.a.array,viewport:c.a.object}),g=v.defaultProps,_=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n.children=[],Object(f.a)(n),n}return a(t,e),d(t,[{key:"componentDidMount",value:function(){this.deck=new v(Object.assign({},this.props,{canvas:this.overlay})),this._updateFromProps(this.props)}},{key:"componentWillReceiveProps",value:function(e){this._updateFromProps(e)}},{key:"componentWillUnmount",value:function(){this.deck.finalize()}},{key:"queryObject",value:function(e){return m.deprecated("queryObject","pickObject"),this.deck.pickObject(e)}},{key:"pickObject",value:function(e){var t=e.x,n=e.y,r=e.radius,i=void 0===r?0:r,o=e.layerIds,a=void 0===o?null:o;return this.deck.pickObject({x:t,y:n,radius:i,layerIds:a})}},{key:"queryVisibleObjects",value:function(e){return m.deprecated("queryVisibleObjects","pickObjects"),this.pickObjects(e)}},{key:"pickObjects",value:function(e){var t=e.x,n=e.y,r=e.width,i=void 0===r?1:r,o=e.height,a=void 0===o?1:o,s=e.layerIds,u=void 0===s?null:s;return this.deck.pickObjects({x:t,y:n,width:i,height:a,layerIds:u})}},{key:"_updateFromProps",value:function(e){var t=e.viewState;if(!t){var n=e.latitude,i=e.longitude,o=e.zoom,a=e.pitch,s=e.bearing;t=e.viewState||{latitude:n,longitude:i,zoom:o,pitch:a,bearing:s}}var u=e.views||e.viewports||e.viewport&&[e.viewport];e.viewports&&m.deprecated("DeckGL.viewports","DeckGL.views"),e.viewport&&m.deprecated("DeckGL.viewport","DeckGL.views");var l=this._extractJSXLayers(e.children),c=l.layers,f=l.children;this.deck&&this.deck.setProps(Object.assign({},e,{views:u,viewState:t,layers:c?[].concat(r(c),r(e.layers)):e.layers})),this.children=f}},{key:"_extractJSXLayers",value:function(e){var t=[],n=null;return u.a.Children.forEach(e,function(e){if(e){var r=e.type;if(Object(p.a)(r,h.c)){var i=new r(e.props);n=n||[],n.push(i)}else t.push(e)}}),{layers:n,children:t}}},{key:"_renderChildrenUnderViews",value:function(e){var t=this,n=this.deck?this.deck.getViewports():[],r={};return n.forEach(function(e){e.id&&(r[e.id]=e)}),e.map(function(e,n){return e.props.viewId||e.props.viewId?t._positionChild({child:e,viewMap:r,i:n}):e})}},{key:"_positionChild",value:function(e){var t=e.child,n=e.viewMap,r=e.i,i=t.props,o=i.viewId,a=i.viewportId;a&&m.deprecated("viewportId","viewId");var u=n[o||a];if(!u)return null;var l=u.x,c=u.y,f=u.width,p=u.height,h=Object.assign({},t.props,{width:f,height:p});Object.assign(h,u.getMercatorParams(),{visible:u.isMapSynched()});var d=Object(s.cloneElement)(t,h),v={position:"absolute",left:l,top:c,width:f,height:p},y="view-child-"+o+"-"+r;return Object(s.createElement)("div",{key:y,id:y,style:v},d)}},{key:"render",value:function(){var e=this,t=this._renderChildrenUnderViews(this.children),n=this.props,r=n.id,i=n.width,o=n.height,a=n.style,u=Object(s.createElement)("canvas",{ref:function(t){return e.overlay=t},key:"overlay",id:r,style:Object.assign({},{position:"absolute",left:0,top:0,width:i,height:o},a)});return t.push(u),Object(s.createElement)("div",{id:"deckgl-wrapper"},t)}}]),t}(u.a.Component);t.a=_,_.propTypes=y,_.defaultProps=g},function(e,t,n){"use strict";function r(e){var t=Object.getPrototypeOf(e),n=Object.getOwnPropertyNames(t),r=!0,o=!1,a=void 0;try{for(var s,u=n[Symbol.iterator]();!(r=(s=u.next()).done);r=!0)!function(){var t=s.value;"function"===typeof e[t]&&(i.find(function(e){return t===e})||(e[t]=e[t].bind(e)))}()}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}}t.a=r;var i=["constructor","render","componentWillMount","componentDidMount","componentWillReceiveProps","shouldComponentUpdate","componentWillUpdate","componentDidUpdate","componentWillUnmount"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={};return r.forEach(function(n){e[n]&&(t[n]=e[n])}),t};var r=["autoCapitalize","autoComplete","autoCorrect","autoFocus","disabled","form","formAction","formEncType","formMethod","formNoValidate","formTarget","height","id","inputMode","maxLength","name","onClick","onContextMenu","onCopy","onCut","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onPaste","pattern","placeholder","readOnly","required","size","spellCheck","tabIndex","title","aria-atomic","aria-busy","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-dropeffect","aria-errormessage","aria-flowto","aria-grabbed","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-live","aria-owns","aria-relevant","aria-roledescription","aria-activedescendant","aria-autocomplete","aria-multiline","aria-placeholder","aria-readonly","aria-required"]},function(e,t,n){"use strict";function r(e,t,n){return!i(e.props,t)||!i(e.state,n)}var i=n(139);e.exports=r},function(e,t,n){(function(e){!function(t,n){e.exports=n()}(0,function(){"use strict";function t(){return Or.apply(null,arguments)}function n(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function r(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function i(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}function o(e){return void 0===e}function a(e){return"number"===typeof e||"[object Number]"===Object.prototype.toString.call(e)}function s(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function u(e,t){var n,r=[];for(n=0;n<e.length;++n)r.push(t(e[n],n));return r}function l(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function c(e,t){for(var n in t)l(t,n)&&(e[n]=t[n]);return l(t,"toString")&&(e.toString=t.toString),l(t,"valueOf")&&(e.valueOf=t.valueOf),e}function f(e,t,n,r){return St(e,t,n,r,!0).utc()}function p(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function h(e){return null==e._pf&&(e._pf=p()),e._pf}function d(e){if(null==e._isValid){var t=h(e),n=Pr.call(t.parsedDateParts,function(e){return null!=e}),r=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(r=r&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return r;e._isValid=r}return e._isValid}function v(e){var t=f(NaN);return null!=e?c(h(t),e):h(t).userInvalidated=!0,t}function m(e,t){var n,r,i;if(o(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),o(t._i)||(e._i=t._i),o(t._f)||(e._f=t._f),o(t._l)||(e._l=t._l),o(t._strict)||(e._strict=t._strict),o(t._tzm)||(e._tzm=t._tzm),o(t._isUTC)||(e._isUTC=t._isUTC),o(t._offset)||(e._offset=t._offset),o(t._pf)||(e._pf=h(t)),o(t._locale)||(e._locale=t._locale),Cr.length>0)for(n=0;n<Cr.length;n++)r=Cr[n],i=t[r],o(i)||(e[r]=i);return e}function y(e){m(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===kr&&(kr=!0,t.updateOffset(this),kr=!1)}function g(e){return e instanceof y||null!=e&&null!=e._isAMomentObject}function _(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function b(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=_(t)),n}function x(e,t,n){var r,i=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),a=0;for(r=0;r<i;r++)(n&&e[r]!==t[r]||!n&&b(e[r])!==b(t[r]))&&a++;return a+o}function w(e){!1===t.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function E(e,n){var r=!0;return c(function(){if(null!=t.deprecationHandler&&t.deprecationHandler(null,e),r){for(var i,o=[],a=0;a<arguments.length;a++){if(i="","object"===typeof arguments[a]){i+="\n["+a+"] ";for(var s in arguments[0])i+=s+": "+arguments[0][s]+", ";i=i.slice(0,-2)}else i=arguments[a];o.push(i)}w(e+"\nArguments: "+Array.prototype.slice.call(o).join("")+"\n"+(new Error).stack),r=!1}return n.apply(this,arguments)},n)}function S(e,n){null!=t.deprecationHandler&&t.deprecationHandler(e,n),Rr[e]||(w(n),Rr[e]=!0)}function T(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function A(e){var t,n;for(n in e)t=e[n],T(t)?this[n]=t:this["_"+n]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function O(e,t){var n,i=c({},e);for(n in t)l(t,n)&&(r(e[n])&&r(t[n])?(i[n]={},c(i[n],e[n]),c(i[n],t[n])):null!=t[n]?i[n]=t[n]:delete i[n]);for(n in e)l(e,n)&&!l(t,n)&&r(e[n])&&(i[n]=c({},i[n]));return i}function P(e){null!=e&&this.set(e)}function C(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return T(r)?r.call(t,n):r}function k(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function R(){return this._invalidDate}function M(e){return this._ordinal.replace("%d",e)}function I(e,t,n,r){var i=this._relativeTime[n];return T(i)?i(e,t,n,r):i.replace(/%d/i,e)}function L(e,t){var n=this._relativeTime[e>0?"future":"past"];return T(n)?n(t):n.replace(/%s/i,t)}function D(e,t){var n=e.toLowerCase();Fr[n]=Fr[n+"s"]=Fr[t]=e}function N(e){return"string"===typeof e?Fr[e]||Fr[e.toLowerCase()]:void 0}function F(e){var t,n,r={};for(n in e)l(e,n)&&(t=N(n))&&(r[t]=e[n]);return r}function j(e,t){jr[e]=t}function B(e){var t=[];for(var n in e)t.push({unit:n,priority:jr[n]});return t.sort(function(e,t){return e.priority-t.priority}),t}function z(e,t,n){var r=""+Math.abs(e),i=t-r.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}function U(e,t,n,r){var i=r;"string"===typeof r&&(i=function(){return this[r]()}),e&&(Vr[e]=i),t&&(Vr[t[0]]=function(){return z(i.apply(this,arguments),t[1],t[2])}),n&&(Vr[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function V(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function G(e){var t,n,r=e.match(Br);for(t=0,n=r.length;t<n;t++)Vr[r[t]]?r[t]=Vr[r[t]]:r[t]=V(r[t]);return function(t){var i,o="";for(i=0;i<n;i++)o+=T(r[i])?r[i].call(t,e):r[i];return o}}function W(e,t){return e.isValid()?(t=H(t,e.localeData()),Ur[t]=Ur[t]||G(t),Ur[t](e)):e.localeData().invalidDate()}function H(e,t){function n(e){return t.longDateFormat(e)||e}var r=5;for(zr.lastIndex=0;r>=0&&zr.test(e);)e=e.replace(zr,n),zr.lastIndex=0,r-=1;return e}function X(e,t,n){ai[e]=T(t)?t:function(e,r){return e&&n?n:t}}function q(e,t){return l(ai,e)?ai[e](t._strict,t._locale):new RegExp(Y(e))}function Y(e){return Z(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i}))}function Z(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function K(e,t){var n,r=t;for("string"===typeof e&&(e=[e]),a(t)&&(r=function(e,n){n[t]=b(e)}),n=0;n<e.length;n++)si[e[n]]=r}function Q(e,t){K(e,function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)})}function J(e,t,n){null!=t&&l(si,e)&&si[e](t,n._a,n,e)}function $(e){return ee(e)?366:365}function ee(e){return e%4===0&&e%100!==0||e%400===0}function te(){return ee(this.year())}function ne(e,n){return function(r){return null!=r?(ie(this,e,r),t.updateOffset(this,n),this):re(this,e)}}function re(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function ie(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&ee(e.year())&&1===e.month()&&29===e.date()?e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),ue(n,e.month())):e._d["set"+(e._isUTC?"UTC":"")+t](n))}function oe(e){return e=N(e),T(this[e])?this[e]():this}function ae(e,t){if("object"===typeof e){e=F(e);for(var n=B(e),r=0;r<n.length;r++)this[n[r].unit](e[n[r].unit])}else if(e=N(e),T(this[e]))return this[e](t);return this}function se(e,t){return(e%t+t)%t}function ue(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=se(t,12);return e+=(t-n)/12,1===n?ee(e)?29:28:31-n%7%2}function le(e,t){return e?n(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||_i).test(t)?"format":"standalone"][e.month()]:n(this._months)?this._months:this._months.standalone}function ce(e,t){return e?n(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[_i.test(t)?"format":"standalone"][e.month()]:n(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function fe(e,t,n){var r,i,o,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)o=f([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===t?(i=yi.call(this._shortMonthsParse,a),-1!==i?i:null):(i=yi.call(this._longMonthsParse,a),-1!==i?i:null):"MMM"===t?-1!==(i=yi.call(this._shortMonthsParse,a))?i:(i=yi.call(this._longMonthsParse,a),-1!==i?i:null):-1!==(i=yi.call(this._longMonthsParse,a))?i:(i=yi.call(this._shortMonthsParse,a),-1!==i?i:null)}function pe(e,t,n){var r,i,o;if(this._monthsParseExact)return fe.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=f([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function he(e,t){var n;if(!e.isValid())return e;if("string"===typeof t)if(/^\d+$/.test(t))t=b(t);else if(t=e.localeData().monthsParse(t),!a(t))return e;return n=Math.min(e.date(),ue(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function de(e){return null!=e?(he(this,e),t.updateOffset(this,!0),this):re(this,"Month")}function ve(){return ue(this.year(),this.month())}function me(e){return this._monthsParseExact?(l(this,"_monthsRegex")||ge.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=wi),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function ye(e){return this._monthsParseExact?(l(this,"_monthsRegex")||ge.call(this),e?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=Ei),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function ge(){function e(e,t){return t.length-e.length}var t,n,r=[],i=[],o=[];for(t=0;t<12;t++)n=f([2e3,t]),r.push(this.monthsShort(n,"")),i.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(r.sort(e),i.sort(e),o.sort(e),t=0;t<12;t++)r[t]=Z(r[t]),i[t]=Z(i[t]);for(t=0;t<24;t++)o[t]=Z(o[t]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function _e(e,t,n,r,i,o,a){var s=new Date(e,t,n,r,i,o,a);return e<100&&e>=0&&isFinite(s.getFullYear())&&s.setFullYear(e),s}function be(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function xe(e,t,n){var r=7+t-n;return-(7+be(e,0,r).getUTCDay()-t)%7+r-1}function we(e,t,n,r,i){var o,a,s=(7+n-r)%7,u=xe(e,r,i),l=1+7*(t-1)+s+u;return l<=0?(o=e-1,a=$(o)+l):l>$(e)?(o=e+1,a=l-$(e)):(o=e,a=l),{year:o,dayOfYear:a}}function Ee(e,t,n){var r,i,o=xe(e.year(),t,n),a=Math.floor((e.dayOfYear()-o-1)/7)+1;return a<1?(i=e.year()-1,r=a+Se(i,t,n)):a>Se(e.year(),t,n)?(r=a-Se(e.year(),t,n),i=e.year()+1):(i=e.year(),r=a),{week:r,year:i}}function Se(e,t,n){var r=xe(e,t,n),i=xe(e+1,t,n);return($(e)-r+i)/7}function Te(e){return Ee(e,this._week.dow,this._week.doy).week}function Ae(){return this._week.dow}function Oe(){return this._week.doy}function Pe(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function Ce(e){var t=Ee(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function ke(e,t){return"string"!==typeof e?e:isNaN(e)?(e=t.weekdaysParse(e),"number"===typeof e?e:null):parseInt(e,10)}function Re(e,t){return"string"===typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Me(e,t){return e?n(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]:n(this._weekdays)?this._weekdays:this._weekdays.standalone}function Ie(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Le(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin}function De(e,t,n){var r,i,o,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)o=f([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===t?(i=yi.call(this._weekdaysParse,a),-1!==i?i:null):"ddd"===t?(i=yi.call(this._shortWeekdaysParse,a),-1!==i?i:null):(i=yi.call(this._minWeekdaysParse,a),-1!==i?i:null):"dddd"===t?-1!==(i=yi.call(this._weekdaysParse,a))?i:-1!==(i=yi.call(this._shortWeekdaysParse,a))?i:(i=yi.call(this._minWeekdaysParse,a),-1!==i?i:null):"ddd"===t?-1!==(i=yi.call(this._shortWeekdaysParse,a))?i:-1!==(i=yi.call(this._weekdaysParse,a))?i:(i=yi.call(this._minWeekdaysParse,a),-1!==i?i:null):-1!==(i=yi.call(this._minWeekdaysParse,a))?i:-1!==(i=yi.call(this._weekdaysParse,a))?i:(i=yi.call(this._shortWeekdaysParse,a),-1!==i?i:null)}function Ne(e,t,n){var r,i,o;if(this._weekdaysParseExact)return De.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=f([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".",".?")+"$","i")),this._weekdaysParse[r]||(o="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[r].test(e))return r;if(n&&"ddd"===t&&this._shortWeekdaysParse[r].test(e))return r;if(n&&"dd"===t&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}}function Fe(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=ke(e,this.localeData()),this.add(e-t,"d")):t}function je(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Be(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=Re(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function ze(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Ge.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=Pi),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Ue(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Ge.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Ci),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Ve(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Ge.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=ki),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Ge(){function e(e,t){return t.length-e.length}var t,n,r,i,o,a=[],s=[],u=[],l=[];for(t=0;t<7;t++)n=f([2e3,1]).day(t),r=this.weekdaysMin(n,""),i=this.weekdaysShort(n,""),o=this.weekdays(n,""),a.push(r),s.push(i),u.push(o),l.push(r),l.push(i),l.push(o);for(a.sort(e),s.sort(e),u.sort(e),l.sort(e),t=0;t<7;t++)s[t]=Z(s[t]),u[t]=Z(u[t]),l[t]=Z(l[t]);this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function We(){return this.hours()%12||12}function He(){return this.hours()||24}function Xe(e,t){U(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function qe(e,t){return t._meridiemParse}function Ye(e){return"p"===(e+"").toLowerCase().charAt(0)}function Ze(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}function Ke(e){return e?e.toLowerCase().replace("_","-"):e}function Qe(e){for(var t,n,r,i,o=0;o<e.length;){for(i=Ke(e[o]).split("-"),t=i.length,n=Ke(e[o+1]),n=n?n.split("-"):null;t>0;){if(r=Je(i.slice(0,t).join("-")))return r;if(n&&n.length>=t&&x(i,n,!0)>=t-1)break;t--}o++}return Ri}function Je(t){var n=null;if(!Di[t]&&"undefined"!==typeof e&&e&&e.exports)try{n=Ri._abbr;!function(){var e=new Error('Cannot find module "./locale"');throw e.code="MODULE_NOT_FOUND",e}(),$e(n)}catch(e){}return Di[t]}function $e(e,t){var n;return e&&(n=o(t)?nt(e):et(e,t),n?Ri=n:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Ri._abbr}function et(e,t){if(null!==t){var n,r=Li;if(t.abbr=e,null!=Di[e])S("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=Di[e]._config;else if(null!=t.parentLocale)if(null!=Di[t.parentLocale])r=Di[t.parentLocale]._config;else{if(null==(n=Je(t.parentLocale)))return Ni[t.parentLocale]||(Ni[t.parentLocale]=[]),Ni[t.parentLocale].push({name:e,config:t}),null;r=n._config}return Di[e]=new P(O(r,t)),Ni[e]&&Ni[e].forEach(function(e){et(e.name,e.config)}),$e(e),Di[e]}return delete Di[e],null}function tt(e,t){if(null!=t){var n,r,i=Li;r=Je(e),null!=r&&(i=r._config),t=O(i,t),n=new P(t),n.parentLocale=Di[e],Di[e]=n,$e(e)}else null!=Di[e]&&(null!=Di[e].parentLocale?Di[e]=Di[e].parentLocale:null!=Di[e]&&delete Di[e]);return Di[e]}function nt(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Ri;if(!n(e)){if(t=Je(e))return t;e=[e]}return Qe(e)}function rt(){return Mr(Di)}function it(e){var t,n=e._a;return n&&-2===h(e).overflow&&(t=n[li]<0||n[li]>11?li:n[ci]<1||n[ci]>ue(n[ui],n[li])?ci:n[fi]<0||n[fi]>24||24===n[fi]&&(0!==n[pi]||0!==n[hi]||0!==n[di])?fi:n[pi]<0||n[pi]>59?pi:n[hi]<0||n[hi]>59?hi:n[di]<0||n[di]>999?di:-1,h(e)._overflowDayOfYear&&(t<ui||t>ci)&&(t=ci),h(e)._overflowWeeks&&-1===t&&(t=vi),h(e)._overflowWeekday&&-1===t&&(t=mi),h(e).overflow=t),e}function ot(e,t,n){return null!=e?e:null!=t?t:n}function at(e){var n=new Date(t.now());return e._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()]}function st(e){var t,n,r,i,o,a=[];if(!e._d){for(r=at(e),e._w&&null==e._a[ci]&&null==e._a[li]&&ut(e),null!=e._dayOfYear&&(o=ot(e._a[ui],r[ui]),(e._dayOfYear>$(o)||0===e._dayOfYear)&&(h(e)._overflowDayOfYear=!0),n=be(o,0,e._dayOfYear),e._a[li]=n.getUTCMonth(),e._a[ci]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=a[t]=r[t];for(;t<7;t++)e._a[t]=a[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[fi]&&0===e._a[pi]&&0===e._a[hi]&&0===e._a[di]&&(e._nextDay=!0,e._a[fi]=0),e._d=(e._useUTC?be:_e).apply(null,a),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[fi]=24),e._w&&"undefined"!==typeof e._w.d&&e._w.d!==i&&(h(e).weekdayMismatch=!0)}}function ut(e){var t,n,r,i,o,a,s,u;if(t=e._w,null!=t.GG||null!=t.W||null!=t.E)o=1,a=4,n=ot(t.GG,e._a[ui],Ee(Tt(),1,4).year),r=ot(t.W,1),((i=ot(t.E,1))<1||i>7)&&(u=!0);else{o=e._locale._week.dow,a=e._locale._week.doy;var l=Ee(Tt(),o,a);n=ot(t.gg,e._a[ui],l.year),r=ot(t.w,l.week),null!=t.d?((i=t.d)<0||i>6)&&(u=!0):null!=t.e?(i=t.e+o,(t.e<0||t.e>6)&&(u=!0)):i=o}r<1||r>Se(n,o,a)?h(e)._overflowWeeks=!0:null!=u?h(e)._overflowWeekday=!0:(s=we(n,r,i,o,a),e._a[ui]=s.year,e._dayOfYear=s.dayOfYear)}function lt(e){var t,n,r,i,o,a,s=e._i,u=Fi.exec(s)||ji.exec(s);if(u){for(h(e).iso=!0,t=0,n=zi.length;t<n;t++)if(zi[t][1].exec(u[1])){i=zi[t][0],r=!1!==zi[t][2];break}if(null==i)return void(e._isValid=!1);if(u[3]){for(t=0,n=Ui.length;t<n;t++)if(Ui[t][1].exec(u[3])){o=(u[2]||" ")+Ui[t][0];break}if(null==o)return void(e._isValid=!1)}if(!r&&null!=o)return void(e._isValid=!1);if(u[4]){if(!Bi.exec(u[4]))return void(e._isValid=!1);a="Z"}e._f=i+(o||"")+(a||""),yt(e)}else e._isValid=!1}function ct(e,t,n,r,i,o){var a=[ft(e),xi.indexOf(t),parseInt(n,10),parseInt(r,10),parseInt(i,10)];return o&&a.push(parseInt(o,10)),a}function ft(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function pt(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}function ht(e,t,n){if(e){if(Ai.indexOf(e)!==new Date(t[0],t[1],t[2]).getDay())return h(n).weekdayMismatch=!0,n._isValid=!1,!1}return!0}function dt(e,t,n){if(e)return Wi[e];if(t)return 0;var r=parseInt(n,10),i=r%100;return(r-i)/100*60+i}function vt(e){var t=Gi.exec(pt(e._i));if(t){var n=ct(t[4],t[3],t[2],t[5],t[6],t[7]);if(!ht(t[1],n,e))return;e._a=n,e._tzm=dt(t[8],t[9],t[10]),e._d=be.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),h(e).rfc2822=!0}else e._isValid=!1}function mt(e){var n=Vi.exec(e._i);if(null!==n)return void(e._d=new Date(+n[1]));lt(e),!1===e._isValid&&(delete e._isValid,vt(e),!1===e._isValid&&(delete e._isValid,t.createFromInputFallback(e)))}function yt(e){if(e._f===t.ISO_8601)return void lt(e);if(e._f===t.RFC_2822)return void vt(e);e._a=[],h(e).empty=!0;var n,r,i,o,a,s=""+e._i,u=s.length,l=0;for(i=H(e._f,e._locale).match(Br)||[],n=0;n<i.length;n++)o=i[n],r=(s.match(q(o,e))||[])[0],r&&(a=s.substr(0,s.indexOf(r)),a.length>0&&h(e).unusedInput.push(a),s=s.slice(s.indexOf(r)+r.length),l+=r.length),Vr[o]?(r?h(e).empty=!1:h(e).unusedTokens.push(o),J(o,r,e)):e._strict&&!r&&h(e).unusedTokens.push(o);h(e).charsLeftOver=u-l,s.length>0&&h(e).unusedInput.push(s),e._a[fi]<=12&&!0===h(e).bigHour&&e._a[fi]>0&&(h(e).bigHour=void 0),h(e).parsedDateParts=e._a.slice(0),h(e).meridiem=e._meridiem,e._a[fi]=gt(e._locale,e._a[fi],e._meridiem),st(e),it(e)}function gt(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?(r=e.isPM(n),r&&t<12&&(t+=12),r||12!==t||(t=0),t):t}function _t(e){var t,n,r,i,o;if(0===e._f.length)return h(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<e._f.length;i++)o=0,t=m({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],yt(t),d(t)&&(o+=h(t).charsLeftOver,o+=10*h(t).unusedTokens.length,h(t).score=o,(null==r||o<r)&&(r=o,n=t));c(e,n||t)}function bt(e){if(!e._d){var t=F(e._i);e._a=u([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),st(e)}}function xt(e){var t=new y(it(wt(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function wt(e){var t=e._i,r=e._f;return e._locale=e._locale||nt(e._l),null===t||void 0===r&&""===t?v({nullInput:!0}):("string"===typeof t&&(e._i=t=e._locale.preparse(t)),g(t)?new y(it(t)):(s(t)?e._d=t:n(r)?_t(e):r?yt(e):Et(e),d(e)||(e._d=null),e))}function Et(e){var i=e._i;o(i)?e._d=new Date(t.now()):s(i)?e._d=new Date(i.valueOf()):"string"===typeof i?mt(e):n(i)?(e._a=u(i.slice(0),function(e){return parseInt(e,10)}),st(e)):r(i)?bt(e):a(i)?e._d=new Date(i):t.createFromInputFallback(e)}function St(e,t,o,a,s){var u={};return!0!==o&&!1!==o||(a=o,o=void 0),(r(e)&&i(e)||n(e)&&0===e.length)&&(e=void 0),u._isAMomentObject=!0,u._useUTC=u._isUTC=s,u._l=o,u._i=e,u._f=t,u._strict=a,xt(u)}function Tt(e,t,n,r){return St(e,t,n,r,!1)}function At(e,t){var r,i;if(1===t.length&&n(t[0])&&(t=t[0]),!t.length)return Tt();for(r=t[0],i=1;i<t.length;++i)t[i].isValid()&&!t[i][e](r)||(r=t[i]);return r}function Ot(){return At("isBefore",[].slice.call(arguments,0))}function Pt(){return At("isAfter",[].slice.call(arguments,0))}function Ct(e){for(var t in e)if(-1===yi.call(Yi,t)||null!=e[t]&&isNaN(e[t]))return!1;for(var n=!1,r=0;r<Yi.length;++r)if(e[Yi[r]]){if(n)return!1;parseFloat(e[Yi[r]])!==b(e[Yi[r]])&&(n=!0)}return!0}function kt(){return this._isValid}function Rt(){return Kt(NaN)}function Mt(e){var t=F(e),n=t.year||0,r=t.quarter||0,i=t.month||0,o=t.week||0,a=t.day||0,s=t.hour||0,u=t.minute||0,l=t.second||0,c=t.millisecond||0;this._isValid=Ct(t),this._milliseconds=+c+1e3*l+6e4*u+1e3*s*60*60,this._days=+a+7*o,this._months=+i+3*r+12*n,this._data={},this._locale=nt(),this._bubble()}function It(e){return e instanceof Mt}function Lt(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Dt(e,t){U(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+z(~~(e/60),2)+t+z(~~e%60,2)})}function Nt(e,t){var n=(t||"").match(e);if(null===n)return null;var r=n[n.length-1]||[],i=(r+"").match(Zi)||["-",0,0],o=60*i[1]+b(i[2]);return 0===o?0:"+"===i[0]?o:-o}function Ft(e,n){var r,i;return n._isUTC?(r=n.clone(),i=(g(e)||s(e)?e.valueOf():Tt(e).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+i),t.updateOffset(r,!1),r):Tt(e).local()}function jt(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Bt(e,n,r){var i,o=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"===typeof e){if(null===(e=Nt(ri,e)))return this}else Math.abs(e)<16&&!r&&(e*=60);return!this._isUTC&&n&&(i=jt(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),o!==e&&(!n||this._changeInProgress?tn(this,Kt(e-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:jt(this)}function zt(e,t){return null!=e?("string"!==typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Ut(e){return this.utcOffset(0,e)}function Vt(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(jt(this),"m")),this}function Gt(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var e=Nt(ni,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function Wt(e){return!!this.isValid()&&(e=e?Tt(e).utcOffset():0,(this.utcOffset()-e)%60===0)}function Ht(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Xt(){if(!o(this._isDSTShifted))return this._isDSTShifted;var e={};if(m(e,this),e=wt(e),e._a){var t=e._isUTC?f(e._a):Tt(e._a);this._isDSTShifted=this.isValid()&&x(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function qt(){return!!this.isValid()&&!this._isUTC}function Yt(){return!!this.isValid()&&this._isUTC}function Zt(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function Kt(e,t){var n,r,i,o=e,s=null;return It(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:a(e)?(o={},t?o[t]=e:o.milliseconds=e):(s=Ki.exec(e))?(n="-"===s[1]?-1:1,o={y:0,d:b(s[ci])*n,h:b(s[fi])*n,m:b(s[pi])*n,s:b(s[hi])*n,ms:b(Lt(1e3*s[di]))*n}):(s=Qi.exec(e))?(n="-"===s[1]?-1:(s[1],1),o={y:Qt(s[2],n),M:Qt(s[3],n),w:Qt(s[4],n),d:Qt(s[5],n),h:Qt(s[6],n),m:Qt(s[7],n),s:Qt(s[8],n)}):null==o?o={}:"object"===typeof o&&("from"in o||"to"in o)&&(i=$t(Tt(o.from),Tt(o.to)),o={},o.ms=i.milliseconds,o.M=i.months),r=new Mt(o),It(e)&&l(e,"_locale")&&(r._locale=e._locale),r}function Qt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Jt(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function $t(e,t){var n;return e.isValid()&&t.isValid()?(t=Ft(t,e),e.isBefore(t)?n=Jt(e,t):(n=Jt(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function en(e,t){return function(n,r){var i,o;return null===r||isNaN(+r)||(S(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=n,n=r,r=o),n="string"===typeof n?+n:n,i=Kt(n,r),tn(this,i,e),this}}function tn(e,n,r,i){var o=n._milliseconds,a=Lt(n._days),s=Lt(n._months);e.isValid()&&(i=null==i||i,s&&he(e,re(e,"Month")+s*r),a&&ie(e,"Date",re(e,"Date")+a*r),o&&e._d.setTime(e._d.valueOf()+o*r),i&&t.updateOffset(e,a||s))}function nn(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function rn(e,n){var r=e||Tt(),i=Ft(r,this).startOf("day"),o=t.calendarFormat(this,i)||"sameElse",a=n&&(T(n[o])?n[o].call(this,r):n[o]);return this.format(a||this.localeData().calendar(o,this,Tt(r)))}function on(){return new y(this)}function an(e,t){var n=g(e)?e:Tt(e);return!(!this.isValid()||!n.isValid())&&(t=N(o(t)?"millisecond":t),"millisecond"===t?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())}function sn(e,t){var n=g(e)?e:Tt(e);return!(!this.isValid()||!n.isValid())&&(t=N(o(t)?"millisecond":t),"millisecond"===t?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())}function un(e,t,n,r){return r=r||"()",("("===r[0]?this.isAfter(e,n):!this.isBefore(e,n))&&(")"===r[1]?this.isBefore(t,n):!this.isAfter(t,n))}function ln(e,t){var n,r=g(e)?e:Tt(e);return!(!this.isValid()||!r.isValid())&&(t=N(t||"millisecond"),"millisecond"===t?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))}function cn(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function fn(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function pn(e,t,n){var r,i,o;if(!this.isValid())return NaN;if(r=Ft(e,this),!r.isValid())return NaN;switch(i=6e4*(r.utcOffset()-this.utcOffset()),t=N(t)){case"year":o=hn(this,r)/12;break;case"month":o=hn(this,r);break;case"quarter":o=hn(this,r)/3;break;case"second":o=(this-r)/1e3;break;case"minute":o=(this-r)/6e4;break;case"hour":o=(this-r)/36e5;break;case"day":o=(this-r-i)/864e5;break;case"week":o=(this-r-i)/6048e5;break;default:o=this-r}return n?o:_(o)}function hn(e,t){var n,r,i=12*(t.year()-e.year())+(t.month()-e.month()),o=e.clone().add(i,"months");return t-o<0?(n=e.clone().add(i-1,"months"),r=(t-o)/(o-n)):(n=e.clone().add(i+1,"months"),r=(t-o)/(n-o)),-(i+r)||0}function dn(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function vn(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?W(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):T(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",W(n,"Z")):W(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function mn(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var n="["+e+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i=t+'[")]';return this.format(n+r+"-MM-DD[T]HH:mm:ss.SSS"+i)}function yn(e){e||(e=this.isUtc()?t.defaultFormatUtc:t.defaultFormat);var n=W(this,e);return this.localeData().postformat(n)}function gn(e,t){return this.isValid()&&(g(e)&&e.isValid()||Tt(e).isValid())?Kt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function _n(e){return this.from(Tt(),e)}function bn(e,t){return this.isValid()&&(g(e)&&e.isValid()||Tt(e).isValid())?Kt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function xn(e){return this.to(Tt(),e)}function wn(e){var t;return void 0===e?this._locale._abbr:(t=nt(e),null!=t&&(this._locale=t),this)}function En(){return this._locale}function Sn(e){switch(e=N(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function Tn(e){return void 0===(e=N(e))||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))}function An(){return this._d.valueOf()-6e4*(this._offset||0)}function On(){return Math.floor(this.valueOf()/1e3)}function Pn(){return new Date(this.valueOf())}function Cn(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function kn(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Rn(){return this.isValid()?this.toISOString():null}function Mn(){return d(this)}function In(){return c({},h(this))}function Ln(){return h(this).overflow}function Dn(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Nn(e,t){U(0,[e,e.length],0,t)}function Fn(e){return Un.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function jn(e){return Un.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Bn(){return Se(this.year(),1,4)}function zn(){var e=this.localeData()._week;return Se(this.year(),e.dow,e.doy)}function Un(e,t,n,r,i){var o;return null==e?Ee(this,r,i).year:(o=Se(e,r,i),t>o&&(t=o),Vn.call(this,e,t,n,r,i))}function Vn(e,t,n,r,i){var o=we(e,t,n,r,i),a=be(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}function Gn(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function Wn(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function Hn(e,t){t[di]=b(1e3*("0."+e))}function Xn(){return this._isUTC?"UTC":""}function qn(){return this._isUTC?"Coordinated Universal Time":""}function Yn(e){return Tt(1e3*e)}function Zn(){return Tt.apply(null,arguments).parseZone()}function Kn(e){return e}function Qn(e,t,n,r){var i=nt(),o=f().set(r,t);return i[n](o,e)}function Jn(e,t,n){if(a(e)&&(t=e,e=void 0),e=e||"",null!=t)return Qn(e,t,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=Qn(e,r,n,"month");return i}function $n(e,t,n,r){"boolean"===typeof e?(a(t)&&(n=t,t=void 0),t=t||""):(t=e,n=t,e=!1,a(t)&&(n=t,t=void 0),t=t||"");var i=nt(),o=e?i._week.dow:0;if(null!=n)return Qn(t,(n+o)%7,r,"day");var s,u=[];for(s=0;s<7;s++)u[s]=Qn(t,(s+o)%7,r,"day");return u}function er(e,t){return Jn(e,t,"months")}function tr(e,t){return Jn(e,t,"monthsShort")}function nr(e,t,n){return $n(e,t,n,"weekdays")}function rr(e,t,n){return $n(e,t,n,"weekdaysShort")}function ir(e,t,n){return $n(e,t,n,"weekdaysMin")}function or(){var e=this._data;return this._milliseconds=uo(this._milliseconds),this._days=uo(this._days),this._months=uo(this._months),e.milliseconds=uo(e.milliseconds),e.seconds=uo(e.seconds),e.minutes=uo(e.minutes),e.hours=uo(e.hours),e.months=uo(e.months),e.years=uo(e.years),this}function ar(e,t,n,r){var i=Kt(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function sr(e,t){return ar(this,e,t,1)}function ur(e,t){return ar(this,e,t,-1)}function lr(e){return e<0?Math.floor(e):Math.ceil(e)}function cr(){var e,t,n,r,i,o=this._milliseconds,a=this._days,s=this._months,u=this._data;return o>=0&&a>=0&&s>=0||o<=0&&a<=0&&s<=0||(o+=864e5*lr(pr(s)+a),a=0,s=0),u.milliseconds=o%1e3,e=_(o/1e3),u.seconds=e%60,t=_(e/60),u.minutes=t%60,n=_(t/60),u.hours=n%24,a+=_(n/24),i=_(fr(a)),s+=i,a-=lr(pr(i)),r=_(s/12),s%=12,u.days=a,u.months=s,u.years=r,this}function fr(e){return 4800*e/146097}function pr(e){return 146097*e/4800}function hr(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if("month"===(e=N(e))||"year"===e)return t=this._days+r/864e5,n=this._months+fr(t),"month"===e?n:n/12;switch(t=this._days+Math.round(pr(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}}function dr(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*b(this._months/12):NaN}function vr(e){return function(){return this.as(e)}}function mr(){return Kt(this)}function yr(e){return e=N(e),this.isValid()?this[e+"s"]():NaN}function gr(e){return function(){return this.isValid()?this._data[e]:NaN}}function _r(){return _(this.days()/7)}function br(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function xr(e,t,n){var r=Kt(e).abs(),i=To(r.as("s")),o=To(r.as("m")),a=To(r.as("h")),s=To(r.as("d")),u=To(r.as("M")),l=To(r.as("y")),c=i<=Ao.ss&&["s",i]||i<Ao.s&&["ss",i]||o<=1&&["m"]||o<Ao.m&&["mm",o]||a<=1&&["h"]||a<Ao.h&&["hh",a]||s<=1&&["d"]||s<Ao.d&&["dd",s]||u<=1&&["M"]||u<Ao.M&&["MM",u]||l<=1&&["y"]||["yy",l];return c[2]=t,c[3]=+e>0,c[4]=n,br.apply(null,c)}function wr(e){return void 0===e?To:"function"===typeof e&&(To=e,!0)}function Er(e,t){return void 0!==Ao[e]&&(void 0===t?Ao[e]:(Ao[e]=t,"s"===e&&(Ao.ss=t-1),!0))}function Sr(e){if(!this.isValid())return this.localeData().invalidDate();var t=this.localeData(),n=xr(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}function Tr(e){return(e>0)-(e<0)||+e}function Ar(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,r=Oo(this._milliseconds)/1e3,i=Oo(this._days),o=Oo(this._months);e=_(r/60),t=_(e/60),r%=60,e%=60,n=_(o/12),o%=12;var a=n,s=o,u=i,l=t,c=e,f=r?r.toFixed(3).replace(/\.?0+$/,""):"",p=this.asSeconds();if(!p)return"P0D";var h=p<0?"-":"",d=Tr(this._months)!==Tr(p)?"-":"",v=Tr(this._days)!==Tr(p)?"-":"",m=Tr(this._milliseconds)!==Tr(p)?"-":"";return h+"P"+(a?d+a+"Y":"")+(s?d+s+"M":"")+(u?v+u+"D":"")+(l||c||f?"T":"")+(l?m+l+"H":"")+(c?m+c+"M":"")+(f?m+f+"S":"")}var Or,Pr;Pr=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length>>>0,r=0;r<n;r++)if(r in t&&e.call(this,t[r],r,t))return!0;return!1};var Cr=t.momentProperties=[],kr=!1,Rr={};t.suppressDeprecationWarnings=!1,t.deprecationHandler=null;var Mr;Mr=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)l(e,t)&&n.push(t);return n};var Ir={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Lr={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Dr=/\d{1,2}/,Nr={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Fr={},jr={},Br=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,zr=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ur={},Vr={},Gr=/\d/,Wr=/\d\d/,Hr=/\d{3}/,Xr=/\d{4}/,qr=/[+-]?\d{6}/,Yr=/\d\d?/,Zr=/\d\d\d\d?/,Kr=/\d\d\d\d\d\d?/,Qr=/\d{1,3}/,Jr=/\d{1,4}/,$r=/[+-]?\d{1,6}/,ei=/\d+/,ti=/[+-]?\d+/,ni=/Z|[+-]\d\d:?\d\d/gi,ri=/Z|[+-]\d\d(?::?\d\d)?/gi,ii=/[+-]?\d+(\.\d{1,3})?/,oi=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ai={},si={},ui=0,li=1,ci=2,fi=3,pi=4,hi=5,di=6,vi=7,mi=8;U("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),U(0,["YY",2],0,function(){return this.year()%100}),U(0,["YYYY",4],0,"year"),U(0,["YYYYY",5],0,"year"),U(0,["YYYYYY",6,!0],0,"year"),D("year","y"),j("year",1),X("Y",ti),X("YY",Yr,Wr),X("YYYY",Jr,Xr),X("YYYYY",$r,qr),X("YYYYYY",$r,qr),K(["YYYYY","YYYYYY"],ui),K("YYYY",function(e,n){n[ui]=2===e.length?t.parseTwoDigitYear(e):b(e)}),K("YY",function(e,n){n[ui]=t.parseTwoDigitYear(e)}),K("Y",function(e,t){t[ui]=parseInt(e,10)}),t.parseTwoDigitYear=function(e){return b(e)+(b(e)>68?1900:2e3)};var yi,gi=ne("FullYear",!0);yi=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},U("M",["MM",2],"Mo",function(){return this.month()+1}),U("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),U("MMMM",0,0,function(e){return this.localeData().months(this,e)}),D("month","M"),j("month",8),X("M",Yr),X("MM",Yr,Wr),X("MMM",function(e,t){return t.monthsShortRegex(e)}),X("MMMM",function(e,t){return t.monthsRegex(e)}),K(["M","MM"],function(e,t){t[li]=b(e)-1}),K(["MMM","MMMM"],function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);null!=i?t[li]=i:h(n).invalidMonth=e});var _i=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,bi="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),xi="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),wi=oi,Ei=oi;U("w",["ww",2],"wo","week"),U("W",["WW",2],"Wo","isoWeek"),D("week","w"),D("isoWeek","W"),j("week",5),j("isoWeek",5),X("w",Yr),X("ww",Yr,Wr),X("W",Yr),X("WW",Yr,Wr),Q(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=b(e)});var Si={dow:0,doy:6};U("d",0,"do","day"),U("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),U("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),U("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),U("e",0,0,"weekday"),U("E",0,0,"isoWeekday"),D("day","d"),D("weekday","e"),D("isoWeekday","E"),j("day",11),j("weekday",11),j("isoWeekday",11),X("d",Yr),X("e",Yr),X("E",Yr),X("dd",function(e,t){return t.weekdaysMinRegex(e)}),X("ddd",function(e,t){return t.weekdaysShortRegex(e)}),X("dddd",function(e,t){return t.weekdaysRegex(e)}),Q(["dd","ddd","dddd"],function(e,t,n,r){var i=n._locale.weekdaysParse(e,r,n._strict);null!=i?t.d=i:h(n).invalidWeekday=e}),Q(["d","e","E"],function(e,t,n,r){t[r]=b(e)});var Ti="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ai="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Oi="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Pi=oi,Ci=oi,ki=oi;U("H",["HH",2],0,"hour"),U("h",["hh",2],0,We),U("k",["kk",2],0,He),U("hmm",0,0,function(){return""+We.apply(this)+z(this.minutes(),2)}),U("hmmss",0,0,function(){return""+We.apply(this)+z(this.minutes(),2)+z(this.seconds(),2)}),U("Hmm",0,0,function(){return""+this.hours()+z(this.minutes(),2)}),U("Hmmss",0,0,function(){return""+this.hours()+z(this.minutes(),2)+z(this.seconds(),2)}),Xe("a",!0),Xe("A",!1),D("hour","h"),j("hour",13),X("a",qe),X("A",qe),X("H",Yr),X("h",Yr),X("k",Yr),X("HH",Yr,Wr),X("hh",Yr,Wr),X("kk",Yr,Wr),X("hmm",Zr),X("hmmss",Kr),X("Hmm",Zr),X("Hmmss",Kr),K(["H","HH"],fi),K(["k","kk"],function(e,t,n){var r=b(e);t[fi]=24===r?0:r}),K(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),K(["h","hh"],function(e,t,n){t[fi]=b(e),h(n).bigHour=!0}),K("hmm",function(e,t,n){var r=e.length-2;t[fi]=b(e.substr(0,r)),t[pi]=b(e.substr(r)),h(n).bigHour=!0}),K("hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[fi]=b(e.substr(0,r)),t[pi]=b(e.substr(r,2)),t[hi]=b(e.substr(i)),h(n).bigHour=!0}),K("Hmm",function(e,t,n){var r=e.length-2;t[fi]=b(e.substr(0,r)),t[pi]=b(e.substr(r))}),K("Hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[fi]=b(e.substr(0,r)),t[pi]=b(e.substr(r,2)),t[hi]=b(e.substr(i))});var Ri,Mi=/[ap]\.?m?\.?/i,Ii=ne("Hours",!0),Li={calendar:Ir,longDateFormat:Lr,invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:Dr,relativeTime:Nr,months:bi,monthsShort:xi,week:Si,weekdays:Ti,weekdaysMin:Oi,weekdaysShort:Ai,meridiemParse:Mi},Di={},Ni={},Fi=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ji=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Bi=/Z|[+-]\d\d(?::?\d\d)?/,zi=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Ui=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Vi=/^\/?Date\((\-?\d+)/i,Gi=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Wi={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};t.createFromInputFallback=E("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),t.ISO_8601=function(){},t.RFC_2822=function(){};var Hi=E("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Tt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:v()}),Xi=E("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Tt.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:v()}),qi=function(){return Date.now?Date.now():+new Date},Yi=["year","quarter","month","week","day","hour","minute","second","millisecond"];Dt("Z",":"),Dt("ZZ",""),X("Z",ri),X("ZZ",ri),K(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Nt(ri,e)});var Zi=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var Ki=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Qi=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;Kt.fn=Mt.prototype,Kt.invalid=Rt;var Ji=en(1,"add"),$i=en(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var eo=E("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});U(0,["gg",2],0,function(){return this.weekYear()%100}),U(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Nn("gggg","weekYear"),Nn("ggggg","weekYear"),Nn("GGGG","isoWeekYear"),Nn("GGGGG","isoWeekYear"),D("weekYear","gg"),D("isoWeekYear","GG"),j("weekYear",1),j("isoWeekYear",1),X("G",ti),X("g",ti),X("GG",Yr,Wr),X("gg",Yr,Wr),X("GGGG",Jr,Xr),X("gggg",Jr,Xr),X("GGGGG",$r,qr),X("ggggg",$r,qr),Q(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=b(e)}),Q(["gg","GG"],function(e,n,r,i){n[i]=t.parseTwoDigitYear(e)}),U("Q",0,"Qo","quarter"),D("quarter","Q"),j("quarter",7),X("Q",Gr),K("Q",function(e,t){t[li]=3*(b(e)-1)}),U("D",["DD",2],"Do","date"),D("date","D"),j("date",9),X("D",Yr),X("DD",Yr,Wr),X("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),K(["D","DD"],ci),K("Do",function(e,t){t[ci]=b(e.match(Yr)[0])});var to=ne("Date",!0);U("DDD",["DDDD",3],"DDDo","dayOfYear"),D("dayOfYear","DDD"),j("dayOfYear",4),X("DDD",Qr),X("DDDD",Hr),K(["DDD","DDDD"],function(e,t,n){n._dayOfYear=b(e)}),U("m",["mm",2],0,"minute"),D("minute","m"),j("minute",14),X("m",Yr),X("mm",Yr,Wr),K(["m","mm"],pi);var no=ne("Minutes",!1);U("s",["ss",2],0,"second"),D("second","s"),j("second",15),X("s",Yr),X("ss",Yr,Wr),K(["s","ss"],hi);var ro=ne("Seconds",!1);U("S",0,0,function(){return~~(this.millisecond()/100)}),U(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),U(0,["SSS",3],0,"millisecond"),U(0,["SSSS",4],0,function(){return 10*this.millisecond()}),U(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),U(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),U(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),U(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),U(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),D("millisecond","ms"),j("millisecond",16),X("S",Qr,Gr),X("SS",Qr,Wr),X("SSS",Qr,Hr);var io;for(io="SSSS";io.length<=9;io+="S")X(io,ei);for(io="S";io.length<=9;io+="S")K(io,Hn);var oo=ne("Milliseconds",!1);U("z",0,0,"zoneAbbr"),U("zz",0,0,"zoneName");var ao=y.prototype;ao.add=Ji,ao.calendar=rn,ao.clone=on,ao.diff=pn,ao.endOf=Tn,ao.format=yn,ao.from=gn,ao.fromNow=_n,ao.to=bn,ao.toNow=xn,ao.get=oe,ao.invalidAt=Ln,ao.isAfter=an,ao.isBefore=sn,ao.isBetween=un,ao.isSame=ln,ao.isSameOrAfter=cn,ao.isSameOrBefore=fn,ao.isValid=Mn,ao.lang=eo,ao.locale=wn,ao.localeData=En,ao.max=Xi,ao.min=Hi,ao.parsingFlags=In,ao.set=ae,ao.startOf=Sn,ao.subtract=$i,ao.toArray=Cn,ao.toObject=kn,ao.toDate=Pn,ao.toISOString=vn,ao.inspect=mn,ao.toJSON=Rn,ao.toString=dn,ao.unix=On,ao.valueOf=An,ao.creationData=Dn,ao.year=gi,ao.isLeapYear=te,ao.weekYear=Fn,ao.isoWeekYear=jn,ao.quarter=ao.quarters=Gn,ao.month=de,ao.daysInMonth=ve,ao.week=ao.weeks=Pe,ao.isoWeek=ao.isoWeeks=Ce,ao.weeksInYear=zn,ao.isoWeeksInYear=Bn,ao.date=to,ao.day=ao.days=Fe,ao.weekday=je,ao.isoWeekday=Be,ao.dayOfYear=Wn,ao.hour=ao.hours=Ii,ao.minute=ao.minutes=no,ao.second=ao.seconds=ro,ao.millisecond=ao.milliseconds=oo,ao.utcOffset=Bt,ao.utc=Ut,ao.local=Vt,ao.parseZone=Gt,ao.hasAlignedHourOffset=Wt,ao.isDST=Ht,ao.isLocal=qt,ao.isUtcOffset=Yt,ao.isUtc=Zt,ao.isUTC=Zt,ao.zoneAbbr=Xn,ao.zoneName=qn,ao.dates=E("dates accessor is deprecated. Use date instead.",to),ao.months=E("months accessor is deprecated. Use month instead",de),ao.years=E("years accessor is deprecated. Use year instead",gi),ao.zone=E("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",zt),ao.isDSTShifted=E("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Xt);var so=P.prototype;so.calendar=C,so.longDateFormat=k,so.invalidDate=R,so.ordinal=M,so.preparse=Kn,so.postformat=Kn,so.relativeTime=I,so.pastFuture=L,so.set=A,so.months=le,so.monthsShort=ce,so.monthsParse=pe,so.monthsRegex=ye,so.monthsShortRegex=me,so.week=Te,so.firstDayOfYear=Oe,so.firstDayOfWeek=Ae,so.weekdays=Me,so.weekdaysMin=Le,so.weekdaysShort=Ie,so.weekdaysParse=Ne,so.weekdaysRegex=ze,so.weekdaysShortRegex=Ue,so.weekdaysMinRegex=Ve,so.isPM=Ye,so.meridiem=Ze,$e("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===b(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),t.lang=E("moment.lang is deprecated. Use moment.locale instead.",$e),t.langData=E("moment.langData is deprecated. Use moment.localeData instead.",nt);var uo=Math.abs,lo=vr("ms"),co=vr("s"),fo=vr("m"),po=vr("h"),ho=vr("d"),vo=vr("w"),mo=vr("M"),yo=vr("y"),go=gr("milliseconds"),_o=gr("seconds"),bo=gr("minutes"),xo=gr("hours"),wo=gr("days"),Eo=gr("months"),So=gr("years"),To=Math.round,Ao={ss:44,s:45,m:45,h:22,d:26,M:11},Oo=Math.abs,Po=Mt.prototype;return Po.isValid=kt,Po.abs=or,Po.add=sr,Po.subtract=ur,Po.as=hr,Po.asMilliseconds=lo,Po.asSeconds=co,Po.asMinutes=fo,Po.asHours=po,Po.asDays=ho,Po.asWeeks=vo,Po.asMonths=mo,Po.asYears=yo,Po.valueOf=dr,Po._bubble=cr,Po.clone=mr,Po.get=yr,Po.milliseconds=go,Po.seconds=_o,Po.minutes=bo,Po.hours=xo,Po.days=wo,Po.weeks=_r,Po.months=Eo,Po.years=So,Po.humanize=Sr,Po.toISOString=Ar,Po.toString=Ar,Po.toJSON=Ar,Po.locale=wn,Po.localeData=En,Po.toIsoString=E("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Ar),Po.lang=eo,U("X",0,0,"unix"),U("x",0,0,"valueOf"),X("x",ti),X("X",ii),K("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),K("x",function(e,t,n){n._d=new Date(b(e))}),t.version="2.21.0",function(e){Or=e}(Tt),t.fn=ao,t.min=Ot,t.max=Pt,t.now=qi,t.utc=f,t.unix=Yn,t.months=er,t.isDate=s,t.locale=$e,t.invalid=v,t.duration=Kt,t.isMoment=g,t.weekdays=nr,t.parseZone=Zn,t.localeData=nt,t.isDuration=It,t.monthsShort=tr,t.weekdaysMin=ir,t.defineLocale=et,t.updateLocale=tt,t.locales=rt,t.weekdaysShort=rr,t.normalizeUnits=N,t.relativeTimeRounding=wr,t.relativeTimeThreshold=Er,t.calendarFormat=nn,t.prototype=ao,t.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"},t})}).call(t,n(151)(e))},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(13)),i={setLocalizers:function(e){var t=e.date,n=e.number;t&&this.setDateLocalizer(t),n&&this.setNumberLocalizer(n)},setDateLocalizer:r.setDate,setNumberLocalizer:r.setNumber};t.default=i,e.exports=t.default},function(e,t,n){"use strict";var r=function(){};e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.ownerDocument||document}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t,n=(0,a.default)(e),r=Object.create(null);return(0,o.default)(e,{componentWillUnmount:function(){for(var e in r)clearTimeout(r[e]);r=null}}),t={clear:function(e){clearTimeout(r[e])},set:function(e,i,o){n()&&(t.clear(e),r[e]=setTimeout(i,o))}}}t.__esModule=!0,t.default=i;var o=r(n(89)),a=r(n(130));e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function s(e){var t=(0,f.default)(e,h.transitionDuration),n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}t.__esModule=!0,t.default=void 0;var u,l=r(n(3)),c=r(n(245)),f=r(n(131)),p=r(n(91)),h=n(132),d=r(n(2)),v=r(n(0)),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(252)),y="src/SlideDownTransition.js",g=(u={},u[m.ENTERING]="rw-popup-transition-entering",u[m.EXITING]="rw-popup-transition-exiting",u[m.EXITED]="rw-popup-transition-exited",u),_={in:d.default.bool.isRequired,dropUp:d.default.bool,onEntering:d.default.func,onEntered:d.default.func},b=function(e){function t(){for(var t,n,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=n=e.call.apply(e,[this].concat(i))||this,n.setContainerHeight=function(e){e.style.height=n.getHeight()+"px"},n.clearContainerHeight=function(e){e.style.height=""},n.handleEntered=function(e){n.clearContainerHeight(e),n.props.onEntered&&n.props.onEntered()},n.handleEntering=function(){n.props.onEntering&&n.props.onEntering()},n.handleTransitionEnd=function(e,t){var n=s(e.lastChild)||0,r=function n(){c.default.off(e,h.transitionEnd,n,!1),t()};setTimeout(r,1.5*n),c.default.on(e,h.transitionEnd,r,!1)},n.attachRef=function(e){return n.element=e},t||o(n)}a(t,e);var n=t.prototype;return n.getHeight=function(){var e,t=this.element,n=t.firstChild,r=parseInt((0,f.default)(n,"margin-top"),10)+parseInt((0,f.default)(n,"margin-bottom"),10),i=t.style.display;return t.style.display="block",e=((0,p.default)(n)||0)+(isNaN(r)?0:r),t.style.display=i,e},n.render=function(){var e=this,t=this.props,n=t.children,r=t.className,o=t.dropUp;return v.default.createElement(m.default,{appear:!0,in:this.props.in,timeout:5e3,onEnter:this.setContainerHeight,onEntering:this.handleEntering,onEntered:this.handleEntered,onExit:this.setContainerHeight,onExited:this.clearContainerHeight,addEndListener:this.handleTransitionEnd,__source:{fileName:y,lineNumber:87},__self:this},function(t,a){return v.default.createElement("div",i({},a,{ref:e.attachRef,className:(0,l.default)(r,o&&"rw-dropup",g[t]),__source:{fileName:y,lineNumber:99},__self:this}),v.default.createElement("div",{className:"rw-popup-transition",__source:{fileName:y,lineNumber:108},__self:this},n))})},t}(v.default.Component);b.propTypes=_;var x=b;t.default=x,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.listen=t.filter=t.off=t.on=void 0;var i=n(246),o=r(i),a=n(247),s=r(a),u=n(570),l=r(u),c=n(571),f=r(c);t.on=o.default,t.off=s.default,t.filter=l.default,t.listen=f.default,t.default={on:o.default,off:s.default,filter:l.default,listen:f.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(31),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=function(){};i.default&&(o=function(){return document.addEventListener?function(e,t,n,r){return e.addEventListener(t,n,r||!1)}:document.attachEvent?function(e,t,n){return e.attachEvent("on"+t,function(t){t=t||window.event,t.target=t.target||t.srcElement,t.currentTarget=e,n.call(e,t)})}:void 0}()),t.default=o,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(31),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=function(){};i.default&&(o=function(){return document.addEventListener?function(e,t,n,r){return e.removeEventListener(t,n,r||!1)}:document.attachEvent?function(e,t,n){return e.detachEvent("on"+t,n)}:void 0}()),t.default=o,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){if(t)do{if(t===e)return!0}while(t=t.parentNode);return!1}Object.defineProperty(t,"__esModule",{value:!0});var i=n(31),o=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=function(){return o.default?function(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):r(e,t)}:r}(),e.exports=t.default},function(e,t,n){"use strict";function r(e,t){var n,r="#"===t[0],a="."===t[0],s=r||a?t.slice(1):t,u=i.test(s);return u?r?(e=e.getElementById?e:document,(n=e.getElementById(s))?[n]:[]):o(e.getElementsByClassName&&a?e.getElementsByClassName(s):e.getElementsByTagName(t)):o(e.querySelectorAll(t))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=/^[\w-]*$/,o=Function.prototype.bind.call(Function.prototype.call,[].slice);e.exports=t.default},function(e,t,n){"use strict";function r(e){return(0,o.default)(e.replace(a,"ms-"))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(572),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a=/^-ms-/;e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=(0,c.default)(e),n=(0,u.default)(t),r=t&&t.documentElement,i={top:0,left:0,height:0,width:0};if(t)return(0,a.default)(r,e)?(void 0!==e.getBoundingClientRect&&(i=e.getBoundingClientRect()),i={top:i.top+(n.pageYOffset||r.scrollTop)-(r.clientTop||0),left:i.left+(n.pageXOffset||r.scrollLeft)-(r.clientLeft||0),width:(null==i.width?e.offsetWidth:i.width)||0,height:(null==i.height?e.offsetHeight:i.height)||0}):i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(248),a=r(o),s=n(92),u=r(s),l=n(242),c=r(l);e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(){}t.__esModule=!0,t.EXITING=t.ENTERED=t.ENTERING=t.EXITED=t.UNMOUNTED=void 0;var l=n(2),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l),f=n(0),p=r(f),h=n(12),d=r(h),v=(n(578),t.UNMOUNTED="unmounted"),m=t.EXITED="exited",y=t.ENTERING="entering",g=t.ENTERED="entered",_=t.EXITING="exiting",b=function(e){function t(n,r){o(this,t);var i=a(this,e.call(this,n,r)),s=r.transitionGroup,u=s&&!s.isMounting?n.enter:n.appear,l=void 0;return i.nextStatus=null,n.in?u?(l=m,i.nextStatus=y):l=g:l=n.unmountOnExit||n.mountOnEnter?v:m,i.state={status:l},i.nextCallback=null,i}return s(t,e),t.prototype.getChildContext=function(){return{transitionGroup:null}},t.prototype.componentDidMount=function(){this.updateStatus(!0)},t.prototype.componentWillReceiveProps=function(e){var t=this.pendingState||this.state,n=t.status;e.in?(n===v&&this.setState({status:m}),n!==y&&n!==g&&(this.nextStatus=y)):n!==y&&n!==g||(this.nextStatus=_)},t.prototype.componentDidUpdate=function(){this.updateStatus()},t.prototype.componentWillUnmount=function(){this.cancelNextCallback()},t.prototype.getTimeouts=function(){var e=this.props.timeout,t=void 0,n=void 0,r=void 0;return t=n=r=e,null!=e&&"number"!==typeof e&&(t=e.exit,n=e.enter,r=e.appear),{exit:t,enter:n,appear:r}},t.prototype.updateStatus=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.nextStatus;if(null!==t){this.nextStatus=null,this.cancelNextCallback();var n=d.default.findDOMNode(this);t===y?this.performEnter(n,e):this.performExit(n)}else this.props.unmountOnExit&&this.state.status===m&&this.setState({status:v})},t.prototype.performEnter=function(e,t){var n=this,r=this.props.enter,i=this.context.transitionGroup?this.context.transitionGroup.isMounting:t,o=this.getTimeouts();if(!t&&!r)return void this.safeSetState({status:g},function(){n.props.onEntered(e)});this.props.onEnter(e,i),this.safeSetState({status:y},function(){n.props.onEntering(e,i),n.onTransitionEnd(e,o.enter,function(){n.safeSetState({status:g},function(){n.props.onEntered(e,i)})})})},t.prototype.performExit=function(e){var t=this,n=this.props.exit,r=this.getTimeouts();if(!n)return void this.safeSetState({status:m},function(){t.props.onExited(e)});this.props.onExit(e),this.safeSetState({status:_},function(){t.props.onExiting(e),t.onTransitionEnd(e,r.exit,function(){t.safeSetState({status:m},function(){t.props.onExited(e)})})})},t.prototype.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},t.prototype.safeSetState=function(e,t){var n=this;this.pendingState=e,t=this.setNextCallback(t),this.setState(e,function(){n.pendingState=null,t()})},t.prototype.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},t.prototype.onTransitionEnd=function(e,t,n){this.setNextCallback(n),e?(this.props.addEndListener&&this.props.addEndListener(e,this.nextCallback),null!=t&&setTimeout(this.nextCallback,t)):setTimeout(this.nextCallback,0)},t.prototype.render=function(){var e=this.state.status;if(e===v)return null;var t=this.props,n=t.children,r=i(t,["children"]);if(delete r.in,delete r.mountOnEnter,delete r.unmountOnExit,delete r.appear,delete r.enter,delete r.exit,delete r.timeout,delete r.addEndListener,delete r.onEnter,delete r.onEntering,delete r.onEntered,delete r.onExit,delete r.onExiting,delete r.onExited,"function"===typeof n)return n(e,r);var o=p.default.Children.only(n);return p.default.cloneElement(o,r)},t}(p.default.Component);b.contextTypes={transitionGroup:c.object},b.childContextTypes={transitionGroup:function(){}},b.propTypes={},b.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:u,onEntering:u,onEntered:u,onExit:u,onExiting:u,onExited:u},b.UNMOUNTED=0,b.EXITED=1,b.ENTERING=2,b.ENTERED=3,b.EXITING=4,t.default=b},function(e,t,n){"use strict";function r(e){function t(t,n,r,i,o,a){var s=i||"<<anonymous>>",u=a||r;if(null==n[r])return t?new Error("Required "+o+" `"+u+"` was not specified in `"+s+"`."):null;for(var l=arguments.length,c=Array(l>6?l-6:0),f=6;f<l;f++)c[f-6]=arguments[f];return e.apply(void 0,[n,r,s,o,u].concat(c))}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}t.__esModule=!0,t.default=void 0;var s=r(n(0)),u=r(n(2)),l=r(n(3)),c=n(26),f={className:u.default.string,role:u.default.string,nodeRef:u.default.func,emptyListMessage:u.default.node},p=function(e){function t(){return e.apply(this,arguments)||this}return a(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.role,r=e.children,a=e.emptyListMessage,u=e.nodeRef,f=o(e,["className","role","children","emptyListMessage","nodeRef"]),p=(0,c.instanceId)(this);return s.default.createElement("ul",i({id:p,tabIndex:"-1",ref:u,className:(0,l.default)(t,"rw-list"),role:void 0===n?"listbox":n},f,{__source:{fileName:"src/Listbox.js",lineNumber:22},__self:this}),s.default.Children.count(r)?r:s.default.createElement("li",{className:"rw-list-empty",__source:{fileName:"src/Listbox.js",lineNumber:33},__self:this},a))},t}(s.default.Component);p.propTypes=f;var h=p;t.default=h,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function a(e){var t=e.searchTerm,n=e.onSelect,r=e.focused,a=e.children,s=e.activeId,p=o(e,["searchTerm","onSelect","focused","children","activeId"]);return u.default.createElement(l.default,i({},p,{className:"rw-list-option-create",__source:{fileName:f,lineNumber:18},__self:this}),u.default.createElement(c.default,{onSelect:n,focused:r,activeId:s,dataItem:t,__source:{fileName:f,lineNumber:19},__self:this},a))}t.__esModule=!0,t.default=void 0;var s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),u=r(n(0)),l=r(n(254)),c=r(n(133)),f="src/AddToListOption.js",p={searchTerm:s.string,focused:s.bool,onSelect:s.func.isRequired,activeId:s.string};a.propTypes=p;var h=a;t.default=h,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return!c&&s.default&&function(){var e=document.body,t=e.matches||e.matchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;c=t?function(e,n){return t.call(e,n)}:o}(),c?c(e,t):null}function o(e,t){for(var n=(0,l.default)(e.document||e.ownerDocument,t),r=0;n[r]&&n[r]!==e;)r++;return!!n[r]}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n(31),s=r(a),u=n(249),l=r(u),c=void 0;e.exports=t.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}function a(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function s(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t,n,r,i){var o={};return Object.keys(r).forEach(function(e){o[e]=r[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function c(e){return e&&!isNaN(e.getTime())?e:null}t.__esModule=!0,t.default=void 0;var f,p,h,d,v,m,y,g,_,b=i(n(0)),x=n(12),w=i(n(2)),E=i(n(3)),S=i(n(41)),T=n(25),A=i(n(42)),O=i(n(588)),P=i(n(589)),C=i(n(590)),k=i(n(592)),R=i(n(593)),M=i(n(594)),I=n(32),L=i(n(258)),D=i(n(43)),N=n(13),F=r(n(7)),j=r(n(11)),B=i(n(34)),z=n(26),U=n(33),V=function(e){return e[e.length-1]},G={month:"day",year:"month",decade:"year",century:"decade"},W=["month","year","decade","century"],H={month:C.default,year:k.default,decade:R.default,century:M.default},X={ArrowDown:"DOWN",ArrowUp:"UP",ArrowRight:"RIGHT",ArrowLeft:"LEFT"},q={LEFT:"RIGHT",RIGHT:"LEFT"},Y={year:1,decade:10,century:100},Z={activeId:w.default.string,disabled:F.disabled,readOnly:F.disabled,onChange:w.default.func,value:w.default.instanceOf(Date),min:w.default.instanceOf(Date).isRequired,max:w.default.instanceOf(Date).isRequired,currentDate:w.default.instanceOf(Date),onCurrentDateChange:w.default.func,view:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return w.default.oneOf(e.views||W).apply(void 0,[e].concat(n))},views:w.default.arrayOf(w.default.oneOf(W)).isRequired,onViewChange:w.default.func,onNavigate:w.default.func,culture:w.default.string,autoFocus:w.default.bool,footer:w.default.bool,dayComponent:F.elementType,headerFormat:F.dateFormat,footerFormat:F.dateFormat,dayFormat:F.dateFormat,dateFormat:F.dateFormat,monthFormat:F.dateFormat,yearFormat:F.dateFormat,decadeFormat:F.dateFormat,centuryFormat:F.dateFormat,isRtl:w.default.bool,messages:w.default.shape({moveBack:w.default.string,moveForward:w.default.string}),onKeyDown:w.default.func,tabIndex:w.default.any},K=(_=g=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t=e.call.apply(e,[this].concat(r))||this,t.handleFocusWillChange=function(){if(-1==t.props.tabIndex)return!1},a(t,"handleViewChange",p,u(t)),a(t,"handleMoveBack",h,u(t)),a(t,"handleMoveForward",d,u(t)),a(t,"handleChange",v,u(t)),a(t,"handleFooterClick",m,u(t)),a(t,"handleKeyDown",y,u(t)),t.messages=(0,I.getMessages)(t.props.messages),t.viewId=(0,z.instanceId)(u(t),"_calendar"),t.labelId=(0,z.instanceId)(u(t),"_calendar_label"),t.activeId=t.props.activeId||(0,z.instanceId)(u(t),"_calendar_active_cell"),(0,T.autoFocus)(u(t)),t.focusManager=(0,D.default)(u(t),{willHandle:t.handleFocusWillChange});var o=t.props,s=o.view,l=o.views;return t.state={selectedIndex:0,view:s||l[0]},t}s(t,e),t.move=function(e,t,n,r,i){var o,a="month"===r,s="UP"===i||"DOWN"===i,u=G[r],l=a&&s?"week":G[r],c=a||!s?1:4;return"UP"!==i&&"LEFT"!==i||(c*=-1),o=B.default.add(e,c,l),B.default.inRange(o,t,n,u)?o:e};var n=t.prototype;return n.componentWillReceiveProps=function(e){var t=e.messages,n=e.view,r=e.views,i=e.value,o=e.currentDate,a=this.inRangeValue(i);this.messages=(0,I.getMessages)(t),n=n||r[0],this.setState({view:n,slideDirection:this.getSlideDirection({view:n,views:r,currentDate:o})}),B.default.eq(a,c(this.props.value),G[n])||this.setCurrentDate(a,o)},n.render=function(){var e=this.props,n=e.className,r=e.value,i=e.footerFormat,a=e.disabled,s=e.readOnly,u=e.footer,l=e.views,c=e.min,f=e.max,p=e.culture,h=e.tabIndex,d=this.state,v=d.view,m=d.slideDirection,y=d.focused,g=this.getCurrentDate(),_=H[v],x=new Date,w=!B.default.inRange(x,c,f,v),S=v+"_"+B.default[v](g),T=j.pickElementProps(this),C=j.pick(this.props,_),k=a||s;return b.default.createElement(A.default,o({},T,{role:"group",focused:y,disabled:a,readOnly:s,tabIndex:h||0,onKeyDown:this.handleKeyDown,onBlur:this.focusManager.handleBlur,onFocus:this.focusManager.handleFocus,className:(0,E.default)(n,"rw-calendar rw-widget-container"),"aria-activedescendant":this.activeId,__source:{fileName:"src/Calendar.js",lineNumber:440},__self:this}),b.default.createElement(O.default,{isRtl:this.isRtl(),label:this.getHeaderLabel(),labelId:this.labelId,messages:this.messages,upDisabled:k||v===V(l),prevDisabled:k||!B.default.inRange(this.nextDate("LEFT"),c,f,v),nextDisabled:k||!B.default.inRange(this.nextDate("RIGHT"),c,f,v),onViewChange:this.handleViewChange,onMoveLeft:this.handleMoveBack,onMoveRight:this.handleMoveForward,__source:{fileName:"src/Calendar.js",lineNumber:453},__self:this}),b.default.createElement(t.Transition,{direction:m,__source:{fileName:"src/Calendar.js",lineNumber:465},__self:this},b.default.createElement(_,o({},C,{key:S,id:this.viewId,activeId:this.activeId,value:r,today:x,disabled:a,focused:g,onChange:this.handleChange,onKeyDown:this.handleKeyDown,"aria-labelledby":this.labelId,__source:{fileName:"src/Calendar.js",lineNumber:466},__self:this}))),u&&b.default.createElement(P.default,{value:x,format:i,culture:p,disabled:a||w,readOnly:s,onClick:this.handleFooterClick,__source:{fileName:"src/Calendar.js",lineNumber:481},__self:this}))},n.navigate=function(e,t){var n=this.props,r=n.views,i=n.min,o=n.max,a=n.onNavigate,s=n.onViewChange,u=this.state.view,l="LEFT"===e||"UP"===e?"right":"left";"UP"===e&&(u=r[r.indexOf(u)+1]||u),"DOWN"===e&&(u=r[r.indexOf(u)-1]||u),t||(t=-1!==["LEFT","RIGHT"].indexOf(e)?this.nextDate(e):this.getCurrentDate()),B.default.inRange(t,i,o,u)&&((0,z.notify)(a,[t,l,u]),this.focus(!0),this.setCurrentDate(t),(0,z.notify)(s,[u]))},n.focus=function(){+this.props.tabIndex>-1&&(0,x.findDOMNode)(this).focus()},n.getCurrentDate=function(){return this.props.currentDate||this.props.value||new Date},n.setCurrentDate=function(e,t){void 0===t&&(t=this.getCurrentDate());var n=this.inRangeValue(e?new Date(e):t);B.default.eq(n,c(t),G[this.state.view])||(0,z.notify)(this.props.onCurrentDateChange,n)},n.nextDate=function(e){var t="LEFT"===e?"subtract":"add",n=this.state.view,r="month"===n?n:"year",i=Y[n]||1;return B.default[t](this.getCurrentDate(),1*i,r)},n.getHeaderLabel=function(){var e=this.props,t=e.culture,n=e.decadeFormat,r=e.yearFormat,i=e.headerFormat,o=e.centuryFormat,a=this.state.view,s=this.getCurrentDate();switch(a){case"month":return i=N.date.getFormat("header",i),N.date.format(s,i,t);case"year":return r=N.date.getFormat("year",r),N.date.format(s,r,t);case"decade":return n=N.date.getFormat("decade",n),N.date.format(B.default.startOf(s,"decade"),n,t);case"century":return o=N.date.getFormat("century",o),N.date.format(B.default.startOf(s,"century"),o,t)}},n.inRangeValue=function(e){var t=c(e);return null===t?t:B.default.max(B.default.min(t,this.props.max),this.props.min)},n.isRtl=function(){return!!(this.props.isRtl||this.context&&this.context.isRtl)},n.isValidView=function(e,t){return void 0===t&&(t=this.props.views),-1!==t.indexOf(e)},n.getSlideDirection=function(e){var t=e.view,n=e.currentDate,r=e.views,i=this.props.currentDate,o=this.state,a=o.slideDirection,s=o.view;return s!==t?r.indexOf(s)>r.indexOf(t)?"top":"bottom":i!==n?B.default.gt(n,i)?"left":"right":a},t}(b.default.Component),g.displayName="Calendar",g.propTypes=Z,g.defaultProps={value:null,min:new Date(1900,0,1),max:new Date(2099,11,31),views:W,tabIndex:"0",footer:!0},g.contextTypes={isRtl:w.default.bool},g.Transition=L.default,f=_,p=l(f.prototype,"handleViewChange",[U.widgetEditable],{enumerable:!0,initializer:function(){var e=this;return function(){e.navigate("UP")}}}),h=l(f.prototype,"handleMoveBack",[U.widgetEditable],{enumerable:!0,initializer:function(){var e=this;return function(){e.navigate("LEFT")}}}),d=l(f.prototype,"handleMoveForward",[U.widgetEditable],{enumerable:!0,initializer:function(){var e=this;return function(){e.navigate("RIGHT")}}}),v=l(f.prototype,"handleChange",[U.widgetEditable],{enumerable:!0,initializer:function(){var e=this;return function(t){var n=e.props,r=n.views,i=n.onChange,o=e.state.view;if(r[0]===o)return e.setCurrentDate(t),(0,z.notify)(i,t),void e.focus();e.navigate("DOWN",t)}}}),m=l(f.prototype,"handleFooterClick",[U.widgetEditable],{enumerable:!0,initializer:function(){var e=this;return function(t){var n=e.props,r=n.views,i=n.min,o=n.max,a=n.onViewChange,s=r[0];(0,z.notify)(e.props.onChange,t),B.default.inRange(t,i,o,s)&&(e.focus(),e.setCurrentDate(t),(0,z.notify)(a,[s]))}}}),y=l(f.prototype,"handleKeyDown",[U.widgetEditable],{enumerable:!0,initializer:function(){var e=this;return function(t){var n=t.ctrlKey||t.metaKey,r=t.key,i=X[r],o=e.getCurrentDate(),a=e.state.view,s=G[a];if("Enter"===r)return t.preventDefault(),e.handleChange(o);if(i)if(n)t.preventDefault(),e.navigate(i);else{e.isRtl()&&q[i]&&(i=q[i]);var u=K.move(o,e.props.min,e.props.max,a,i);B.default.eq(o,u,s)||(t.preventDefault(),B.default.gt(u,o,a)?e.navigate("RIGHT",u):B.default.lt(u,o,a)?e.navigate("LEFT",u):e.setCurrentDate(u))}(0,z.notify)(e.props.onKeyDown,[t])}}}),f),Q=(0,S.default)(K,{value:"onChange",currentDate:"onCurrentDateChange",view:"onViewChange"},["focus"]);t.default=Q,e.exports=t.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}function a(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function l(e){var t=(0,d.default)(e,m.transitionDuration),n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}t.__esModule=!0,t.default=void 0;var c,f,p=i(n(3)),h=i(n(245)),d=i(n(131)),v=i(n(91)),m=n(132),y=i(n(2)),g=i(n(595)),_=r(n(252)),b=i(n(0)),x=n(12),w=r(n(11)),E="src/SlideTransitionGroup.js",S=y.default.oneOf(["left","right","top","bottom"]),T=(c={},c[_.ENTERING]={position:"absolute"},c[_.EXITING]={position:"absolute"},c),A=(f={},f[_.ENTERED]="rw-calendar-transition-entered",f[_.ENTERING]="rw-calendar-transition-entering",f[_.EXITING]="rw-calendar-transition-exiting",f[_.EXITED]="rw-calendar-transition-exited",f),O=function(e){function t(){for(var t,n,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n=e.call.apply(e,[this].concat(i))||this,n.handleTransitionEnd=function(e,t){var n=l(e)||300,r=function n(){h.default.off(e,m.transitionEnd,n,!1),t()};setTimeout(r,1.5*n),h.default.on(e,m.transitionEnd,r,!1)},t||s(n)}return u(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=a(e,["children"]),r=this.context.direction,i=b.default.Children.only(t);return b.default.createElement(_.default,o({},n,{timeout:5e3,addEndListener:this.handleTransitionEnd,__source:{fileName:E,lineNumber:58},__self:this}),function(e,t){return b.default.cloneElement(i,o({},t,{style:T[e],className:(0,p.default)(i.props.className,"rw-calendar-transition","rw-calendar-transition-"+r,A[e])}))})},t}(b.default.Component);O.contextTypes={direction:S};var P=function(e){function t(){for(var t,n,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n=e.call.apply(e,[this].concat(i))||this,n.handleEnter=function(e){var t=(0,x.findDOMNode)(s(n));if(e){var r=(0,v.default)(e)+"px";(0,d.default)(t,{height:r,overflow:"hidden"})}},n.handleExited=function(){var e=(0,x.findDOMNode)(s(n));(0,d.default)(e,{overflow:"",height:""})},t||s(n)}u(t,e);var n=t.prototype;return n.getChildContext=function(){return{direction:this.props.direction}},n.render=function(){var e=this.props,t=e.children,n=e.direction;return b.default.createElement(g.default,o({},w.omitOwn(this),{component:"div",className:"rw-calendar-transition-group",__source:{fileName:E,lineNumber:120},__self:this}),b.default.createElement(O,{key:t.key,direction:n,onEnter:this.handleEnter,onExited:this.handleExited,__source:{fileName:E,lineNumber:125},__self:this},t))},t}(b.default.Component);P.childContextTypes={direction:S},P.defaultProps={direction:"left"},P.propTypes={direction:S};var C=P;t.default=C,e.exports=t.default},function(e,t,n){n(260),e.exports=n(266)},function(e,t,n){"use strict";"undefined"===typeof Promise&&(n(261).enable(),window.Promise=n(263)),n(264),Object.assign=n(265)},function(e,t,n){"use strict";function r(){l=!1,s._47=null,s._71=null}function i(e){function t(t){(e.allRejections||a(f[t].error,e.whitelist||u))&&(f[t].displayId=c++,e.onUnhandled?(f[t].logged=!0,e.onUnhandled(f[t].displayId,f[t].error)):(f[t].logged=!0,o(f[t].displayId,f[t].error)))}function n(t){f[t].logged&&(e.onHandled?e.onHandled(f[t].displayId,f[t].error):f[t].onUnhandled||(console.warn("Promise Rejection Handled (id: "+f[t].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+f[t].displayId+".")))}e=e||{},l&&r(),l=!0;var i=0,c=0,f={};s._47=function(e){2===e._83&&f[e._56]&&(f[e._56].logged?n(e._56):clearTimeout(f[e._56].timeout),delete f[e._56])},s._71=function(e,n){0===e._75&&(e._56=i++,f[e._56]={displayId:null,error:n,timeout:setTimeout(t.bind(null,e._56),a(n,u)?100:2e3),logged:!1})}}function o(e,t){console.warn("Possible Unhandled Promise Rejection (id: "+e+"):"),((t&&(t.stack||t))+"").split("\n").forEach(function(e){console.warn("  "+e)})}function a(e,t){return t.some(function(t){return e instanceof t})}var s=n(136),u=[ReferenceError,TypeError,RangeError],l=!1;t.disable=r,t.enable=i},function(e,t,n){"use strict";(function(t){function n(e){a.length||(o(),s=!0),a[a.length]=e}function r(){for(;u<a.length;){var e=u;if(u+=1,a[e].call(),u>l){for(var t=0,n=a.length-u;t<n;t++)a[t]=a[t+u];a.length-=u,u=0}}a.length=0,u=0,s=!1}function i(e){return function(){function t(){clearTimeout(n),clearInterval(r),e()}var n=setTimeout(t,0),r=setInterval(t,50)}}e.exports=n;var o,a=[],s=!1,u=0,l=1024,c="undefined"!==typeof t?t:self,f=c.MutationObserver||c.WebKitMutationObserver;o="function"===typeof f?function(e){var t=1,n=new f(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}(r):i(r),n.requestFlush=o,n.makeRequestCallFromTimer=i}).call(t,n(20))},function(e,t,n){"use strict";function r(e){var t=new i(i._44);return t._83=1,t._18=e,t}var i=n(136);e.exports=i;var o=r(!0),a=r(!1),s=r(null),u=r(void 0),l=r(0),c=r("");i.resolve=function(e){if(e instanceof i)return e;if(null===e)return s;if(void 0===e)return u;if(!0===e)return o;if(!1===e)return a;if(0===e)return l;if(""===e)return c;if("object"===typeof e||"function"===typeof e)try{var t=e.then;if("function"===typeof t)return new i(t.bind(e))}catch(e){return new i(function(t,n){n(e)})}return r(e)},i.all=function(e){var t=Array.prototype.slice.call(e);return new i(function(e,n){function r(a,s){if(s&&("object"===typeof s||"function"===typeof s)){if(s instanceof i&&s.then===i.prototype.then){for(;3===s._83;)s=s._18;return 1===s._83?r(a,s._18):(2===s._83&&n(s._18),void s.then(function(e){r(a,e)},n))}var u=s.then;if("function"===typeof u){return void new i(u.bind(s)).then(function(e){r(a,e)},n)}}t[a]=s,0===--o&&e(t)}if(0===t.length)return e([]);for(var o=t.length,a=0;a<t.length;a++)r(a,t[a])})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){e.forEach(function(e){i.resolve(e).then(t,n)})})},i.prototype.catch=function(e){return this.then(null,e)}},function(e,t){!function(e){"use strict";function t(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!==typeof e&&(e=String(e)),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return y.iterable&&(t[Symbol.iterator]=function(){return t}),t}function i(e){this.map={},e instanceof i?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function a(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function s(e){var t=new FileReader,n=a(t);return t.readAsArrayBuffer(e),n}function u(e){var t=new FileReader,n=a(t);return t.readAsText(e),n}function l(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}function c(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function f(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"===typeof e)this._bodyText=e;else if(y.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(y.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(y.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(y.arrayBuffer&&y.blob&&_(e))this._bodyArrayBuffer=c(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!y.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!b(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=c(e)}else this._bodyText="";this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):y.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},y.blob&&(this.blob=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(l(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},y.formData&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this}function p(e){var t=e.toUpperCase();return x.indexOf(t)>-1?t:e}function h(e,t){t=t||{};var n=t.body;if(e instanceof h){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new i(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new i(t.headers)),this.method=p(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function d(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function v(e){var t=new i;return e.split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}}),t}function m(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new i(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var y={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(y.arrayBuffer)var g=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],_=function(e){return e&&DataView.prototype.isPrototypeOf(e)},b=ArrayBuffer.isView||function(e){return e&&g.indexOf(Object.prototype.toString.call(e))>-1};i.prototype.append=function(e,r){e=t(e),r=n(r);var i=this.map[e];this.map[e]=i?i+","+r:r},i.prototype.delete=function(e){delete this.map[t(e)]},i.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},i.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},i.prototype.set=function(e,r){this.map[t(e)]=n(r)},i.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},i.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},i.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},i.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},y.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var x=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];h.prototype.clone=function(){return new h(this,{body:this._bodyInit})},f.call(h.prototype),f.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},m.error=function(){var e=new m(null,{status:0,statusText:""});return e.type="error",e};var w=[301,302,303,307,308];m.redirect=function(e,t){if(-1===w.indexOf(t))throw new RangeError("Invalid status code");return new m(null,{status:t,headers:{location:e}})},e.Headers=i,e.Request=h,e.Response=m,e.fetch=function(e,t){return new Promise(function(n,r){var i=new h(e,t),o=new XMLHttpRequest;o.onload=function(){var e={status:o.status,statusText:o.statusText,headers:v(o.getAllResponseHeaders()||"")};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var t="response"in o?o.response:o.responseText;n(new m(t,e))},o.onerror=function(){r(new TypeError("Network request failed"))},o.ontimeout=function(){r(new TypeError("Network request failed"))},o.open(i.method,i.url,!0),"include"===i.credentials&&(o.withCredentials=!0),"responseType"in o&&y.blob&&(o.responseType="blob"),i.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),o.send("undefined"===typeof i._bodyInit?null:i._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!==typeof self?self:this)},function(e,t,n){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,u=r(e),l=1;l<arguments.length;l++){n=Object(arguments[l]);for(var c in n)o.call(n,c)&&(u[c]=n[c]);if(i){s=i(n);for(var f=0;f<s.length;f++)a.call(n,s[f])&&(u[s[f]]=n[s[f]])}}return u}},function(e,t,n){"use strict";var r=n(267),i=n(44),o=n(287),a=n(288);n(612),r.renderToElementWithId(i.element(0,0,a.make([])),"root"),o.default()},function(e,t,n){"use strict";function r(e,t){var n=document.getElementsByClassName(t);if(n.length)return s.render(e,u.caml_array_get(n,0)),0;throw[l.invalid_argument,"ReactDOMRE.renderToElementWithClassName: no element of class "+t+" found in the HTML."]}function i(e,t){var n=document.getElementById(t);if(null==n)throw[l.invalid_argument,"ReactDOMRE.renderToElementWithId : no element of id "+t+" found in the HTML."];return s.render(e,n),0}function o(e,t){return Object.assign(Object.assign({},e),t)}function a(e,t,n){var r={};return r[t]=n,o(e,r)}var s=n(12),u=n(68),l=n(14),c=[o,a];t.renderToElementWithClassName=r,t.renderToElementWithId=i,t.Style=c},function(e,t,n){"use strict";function r(e){for(var t=arguments.length-1,n="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);throw t=Error(n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."),t.name="Invariant Violation",t.framesToPop=1,t}function i(e,t){return(e&t)===t}function o(e,t){if(Cn.hasOwnProperty(e)||2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1]))return!1;if(null===t)return!0;switch(typeof t){case"boolean":return Cn.hasOwnProperty(e)?e=!0:(t=a(e))?e=t.hasBooleanValue||t.hasStringBooleanValue||t.hasOverloadedBooleanValue:(e=e.toLowerCase().slice(0,5),e="data-"===e||"aria-"===e),e;case"undefined":case"number":case"string":case"object":return!0;default:return!1}}function a(e){return Rn.hasOwnProperty(e)?Rn[e]:null}function s(e){return e[1].toUpperCase()}function u(e,t,n,r,i,o,a,s,u){Wn._hasCaughtError=!1,Wn._caughtError=null;var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(e){Wn._caughtError=e,Wn._hasCaughtError=!0}}function l(){if(Wn._hasRethrowError){var e=Wn._rethrowError;throw Wn._rethrowError=null,Wn._hasRethrowError=!1,e}}function c(){if(Hn)for(var e in Xn){var t=Xn[e],n=Hn.indexOf(e);if(-1<n||r("96",e),!qn[n]){t.extractEvents||r("97",e),qn[n]=t,n=t.eventTypes;for(var i in n){var o=void 0,a=n[i],s=t,u=i;Yn.hasOwnProperty(u)&&r("99",u),Yn[u]=a;var l=a.phasedRegistrationNames;if(l){for(o in l)l.hasOwnProperty(o)&&f(l[o],s,u);o=!0}else a.registrationName?(f(a.registrationName,s,u),o=!0):o=!1;o||r("98",i,e)}}}}function f(e,t,n){Zn[e]&&r("100",e),Zn[e]=t,Kn[e]=t.eventTypes[n].dependencies}function p(e){Hn&&r("101"),Hn=Array.prototype.slice.call(e),c()}function h(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var i=e[t];Xn.hasOwnProperty(t)&&Xn[t]===i||(Xn[t]&&r("102",t),Xn[t]=i,n=!0)}n&&c()}function d(e,t,n,r){t=e.type||"unknown-event",e.currentTarget=er(r),Wn.invokeGuardedCallbackAndCatchFirstError(t,n,void 0,e),e.currentTarget=null}function v(e,t){return null==t&&r("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function m(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}function y(e,t){if(e){var n=e._dispatchListeners,r=e._dispatchInstances;if(Array.isArray(n))for(var i=0;i<n.length&&!e.isPropagationStopped();i++)d(e,t,n[i],r[i]);else n&&d(e,t,n,r);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function g(e){return y(e,!0)}function _(e){return y(e,!1)}function b(e,t){var n=e.stateNode;if(!n)return null;var i=Jn(n);if(!i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(i=!i.disabled)||(e=e.type,i=!("button"===e||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}return e?null:(n&&"function"!==typeof n&&r("231",t,typeof n),n)}function x(e,t,n,r){for(var i,o=0;o<qn.length;o++){var a=qn[o];a&&(a=a.extractEvents(e,t,n,r))&&(i=v(i,a))}return i}function w(e){e&&(tr=v(tr,e))}function E(e){var t=tr;tr=null,t&&(e?m(t,g):m(t,_),tr&&r("95"),Wn.rethrowCaughtError())}function S(e){if(e[or])return e[or];for(var t=[];!e[or];){if(t.push(e),!e.parentNode)return null;e=e.parentNode}var n=void 0,r=e[or];if(5===r.tag||6===r.tag)return r;for(;e&&(r=e[or]);e=t.pop())n=r;return n}function T(e){if(5===e.tag||6===e.tag)return e.stateNode;r("33")}function A(e){return e[ar]||null}function O(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function P(e,t,n){for(var r=[];e;)r.push(e),e=O(e);for(e=r.length;0<e--;)t(r[e],"captured",n);for(e=0;e<r.length;e++)t(r[e],"bubbled",n)}function C(e,t,n){(t=b(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=v(n._dispatchListeners,t),n._dispatchInstances=v(n._dispatchInstances,e))}function k(e){e&&e.dispatchConfig.phasedRegistrationNames&&P(e._targetInst,C,e)}function R(e){if(e&&e.dispatchConfig.phasedRegistrationNames){var t=e._targetInst;t=t?O(t):null,P(t,C,e)}}function M(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=b(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=v(n._dispatchListeners,t),n._dispatchInstances=v(n._dispatchInstances,e))}function I(e){e&&e.dispatchConfig.registrationName&&M(e._targetInst,null,e)}function L(e){m(e,k)}function D(e,t,n,r){if(n&&r)e:{for(var i=n,o=r,a=0,s=i;s;s=O(s))a++;s=0;for(var u=o;u;u=O(u))s++;for(;0<a-s;)i=O(i),a--;for(;0<s-a;)o=O(o),s--;for(;a--;){if(i===o||i===o.alternate)break e;i=O(i),o=O(o)}i=null}else i=null;for(o=i,i=[];n&&n!==o&&(null===(a=n.alternate)||a!==o);)i.push(n),n=O(n);for(n=[];r&&r!==o&&(null===(a=r.alternate)||a!==o);)n.push(r),r=O(r);for(r=0;r<i.length;r++)M(i[r],"bubbled",e);for(e=n.length;0<e--;)M(n[e],"captured",t)}function N(){return!lr&&bn.canUseDOM&&(lr="textContent"in document.documentElement?"textContent":"innerText"),lr}function F(){if(cr._fallbackText)return cr._fallbackText;var e,t,n=cr._startText,r=n.length,i=j(),o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return cr._fallbackText=i.slice(e,1<t?1-t:void 0),cr._fallbackText}function j(){return"value"in cr._root?cr._root.value:cr._root[N()]}function B(e,t,n,r){this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface;for(var i in e)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?wn.thatReturnsTrue:wn.thatReturnsFalse,this.isPropagationStopped=wn.thatReturnsFalse,this}function z(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function U(e){e instanceof this||r("223"),e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function V(e){e.eventPool=[],e.getPooled=z,e.release=U}function G(e,t,n,r){return B.call(this,e,t,n,r)}function W(e,t,n,r){return B.call(this,e,t,n,r)}function H(e,t){switch(e){case"topKeyUp":return-1!==hr.indexOf(t.keyCode);case"topKeyDown":return 229!==t.keyCode;case"topKeyPress":case"topMouseDown":case"topBlur":return!0;default:return!1}}function X(e){return e=e.detail,"object"===typeof e&&"data"in e?e.data:null}function q(e,t){switch(e){case"topCompositionEnd":return X(t);case"topKeyPress":return 32!==t.which?null:(Er=!0,xr);case"topTextInput":return e=t.data,e===xr&&Er?null:e;default:return null}}function Y(e,t){if(Sr)return"topCompositionEnd"===e||!dr&&H(e,t)?(e=F(),cr._root=null,cr._startText=null,cr._fallbackText=null,Sr=!1,e):null;switch(e){case"topPaste":return null;case"topKeyPress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"topCompositionEnd":return br?null:t.data;default:return null}}function Z(e){if(e=$n(e)){Ar&&"function"===typeof Ar.restoreControlledState||r("194");var t=Jn(e.stateNode);Ar.restoreControlledState(e.stateNode,e.type,t)}}function K(e){Or?Pr?Pr.push(e):Pr=[e]:Or=e}function Q(){if(Or){var e=Or,t=Pr;if(Pr=Or=null,Z(e),t)for(e=0;e<t.length;e++)Z(t[e])}}function J(e,t){return e(t)}function $(e,t){if(Rr)return J(e,t);Rr=!0;try{return J(e,t)}finally{Rr=!1,Q()}}function ee(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Mr[e.type]:"textarea"===t}function te(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function ne(e,t){if(!bn.canUseDOM||t&&!("addEventListener"in document))return!1;t="on"+e;var n=t in document;return n||(n=document.createElement("div"),n.setAttribute(t,"return;"),n="function"===typeof n[t]),!n&&gr&&"wheel"===e&&(n=document.implementation.hasFeature("Events.wheel","3.0")),n}function re(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ie(e){var t=re(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"function"===typeof n.get&&"function"===typeof n.set)return Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:!0,get:function(){return n.get.call(this)},set:function(e){r=""+e,n.set.call(this,e)}}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}function oe(e){e._valueTracker||(e._valueTracker=ie(e))}function ae(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=re(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function se(e,t,n){return e=B.getPooled(Ir.change,e,t,n),e.type="change",K(n),L(e),e}function ue(e){w(e),E(!1)}function le(e){if(ae(T(e)))return e}function ce(e,t){if("topChange"===e)return t}function fe(){Lr&&(Lr.detachEvent("onpropertychange",pe),Dr=Lr=null)}function pe(e){"value"===e.propertyName&&le(Dr)&&(e=se(Dr,e,te(e)),$(ue,e))}function he(e,t,n){"topFocus"===e?(fe(),Lr=t,Dr=n,Lr.attachEvent("onpropertychange",pe)):"topBlur"===e&&fe()}function de(e){if("topSelectionChange"===e||"topKeyUp"===e||"topKeyDown"===e)return le(Dr)}function ve(e,t){if("topClick"===e)return le(t)}function me(e,t){if("topInput"===e||"topChange"===e)return le(t)}function ye(e,t,n,r){return B.call(this,e,t,n,r)}function ge(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=jr[e])&&!!t[e]}function _e(){return ge}function be(e,t,n,r){return B.call(this,e,t,n,r)}function xe(e){return e=e.type,"string"===typeof e?e:"function"===typeof e?e.displayName||e.name:null}function we(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if(0!==(2&t.effectTag))return 1;for(;t.return;)if(t=t.return,0!==(2&t.effectTag))return 1}return 3===t.tag?2:3}function Ee(e){return!!(e=e._reactInternalFiber)&&2===we(e)}function Se(e){2!==we(e)&&r("188")}function Te(e){var t=e.alternate;if(!t)return t=we(e),3===t&&r("188"),1===t?null:e;for(var n=e,i=t;;){var o=n.return,a=o?o.alternate:null;if(!o||!a)break;if(o.child===a.child){for(var s=o.child;s;){if(s===n)return Se(o),e;if(s===i)return Se(o),t;s=s.sibling}r("188")}if(n.return!==i.return)n=o,i=a;else{s=!1;for(var u=o.child;u;){if(u===n){s=!0,n=o,i=a;break}if(u===i){s=!0,i=o,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,i=o;break}if(u===i){s=!0,i=a,n=o;break}u=u.sibling}s||r("189")}}n.alternate!==i&&r("190")}return 3!==n.tag&&r("188"),n.stateNode.current===n?e:t}function Ae(e){if(!(e=Te(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Oe(e){if(!(e=Te(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child&&4!==t.tag)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Pe(e){var t=e.targetInst;do{if(!t){e.ancestors.push(t);break}var n;for(n=t;n.return;)n=n.return;if(!(n=3!==n.tag?null:n.stateNode.containerInfo))break;e.ancestors.push(t),t=S(n)}while(t);for(n=0;n<e.ancestors.length;n++)t=e.ancestors[n],Wr(e.topLevelType,t,e.nativeEvent,te(e.nativeEvent))}function Ce(e){Gr=!!e}function ke(e,t,n){return n?En.listen(n,t,Me.bind(null,e)):null}function Re(e,t,n){return n?En.capture(n,t,Me.bind(null,e)):null}function Me(e,t){if(Gr){var n=te(t);if(n=S(n),null===n||"number"!==typeof n.tag||2===we(n)||(n=null),Vr.length){var r=Vr.pop();r.topLevelType=e,r.nativeEvent=t,r.targetInst=n,e=r}else e={topLevelType:e,nativeEvent:t,targetInst:n,ancestors:[]};try{$(Pe,e)}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>Vr.length&&Vr.push(e)}}}function Ie(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n["ms"+e]="MS"+t,n["O"+e]="o"+t.toLowerCase(),n}function Le(e){if(qr[e])return qr[e];if(!Xr[e])return e;var t,n=Xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Yr)return qr[e]=n[t];return""}function De(e){return Object.prototype.hasOwnProperty.call(e,Jr)||(e[Jr]=Qr++,Kr[e[Jr]]={}),Kr[e[Jr]]}function Ne(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Fe(e,t){var n=Ne(e);e=0;for(var r;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ne(n)}}function je(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&"text"===e.type||"textarea"===t||"true"===e.contentEditable)}function Be(e,t){if(ii||null==ti||ti!==Sn())return null;var n=ti;return"selectionStart"in n&&je(n)?n={start:n.selectionStart,end:n.selectionEnd}:window.getSelection?(n=window.getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}):n=void 0,ri&&Tn(ri,n)?null:(ri=n,e=B.getPooled(ei.select,ni,e,t),e.type="select",e.target=ti,L(e),e)}function ze(e,t,n,r){return B.call(this,e,t,n,r)}function Ue(e,t,n,r){return B.call(this,e,t,n,r)}function Ve(e,t,n,r){return B.call(this,e,t,n,r)}function Ge(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,32<=e||13===e?e:0}function We(e,t,n,r){return B.call(this,e,t,n,r)}function He(e,t,n,r){return B.call(this,e,t,n,r)}function Xe(e,t,n,r){return B.call(this,e,t,n,r)}function qe(e,t,n,r){return B.call(this,e,t,n,r)}function Ye(e,t,n,r){return B.call(this,e,t,n,r)}function Ze(e){0>pi||(e.current=fi[pi],fi[pi]=null,pi--)}function Ke(e,t){pi++,fi[pi]=e.current,e.current=t}function Qe(e){return $e(e)?vi:hi.current}function Je(e,t){var n=e.type.contextTypes;if(!n)return Pn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function $e(e){return 2===e.tag&&null!=e.type.childContextTypes}function et(e){$e(e)&&(Ze(di,e),Ze(hi,e))}function tt(e,t,n){null!=hi.cursor&&r("168"),Ke(hi,t,e),Ke(di,n,e)}function nt(e,t){var n=e.stateNode,i=e.type.childContextTypes;if("function"!==typeof n.getChildContext)return t;n=n.getChildContext();for(var o in n)o in i||r("108",xe(e)||"Unknown",o);return xn({},t,n)}function rt(e){if(!$e(e))return!1;var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||Pn,vi=hi.current,Ke(hi,t,e),Ke(di,di.current,e),!0}function it(e,t){var n=e.stateNode;if(n||r("169"),t){var i=nt(e,vi);n.__reactInternalMemoizedMergedChildContext=i,Ze(di,e),Ze(hi,e),Ke(hi,i,e)}else Ze(di,e);Ke(di,t,e)}function ot(e,t,n){this.tag=e,this.key=t,this.stateNode=this.type=null,this.sibling=this.child=this.return=null,this.index=0,this.memoizedState=this.updateQueue=this.memoizedProps=this.pendingProps=this.ref=null,this.internalContextTag=n,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.expirationTime=0,this.alternate=null}function at(e,t,n){var r=e.alternate;return null===r?(r=new ot(e.tag,e.key,e.internalContextTag),r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.effectTag=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.expirationTime=n,r.pendingProps=t,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function st(e,t,n){var i=void 0,o=e.type,a=e.key;return"function"===typeof o?(i=o.prototype&&o.prototype.isReactComponent?new ot(2,a,t):new ot(0,a,t),i.type=o,i.pendingProps=e.props):"string"===typeof o?(i=new ot(5,a,t),i.type=o,i.pendingProps=e.props):"object"===typeof o&&null!==o&&"number"===typeof o.tag?(i=o,i.pendingProps=e.props):r("130",null==o?o:typeof o,""),i.expirationTime=n,i}function ut(e,t,n,r){return t=new ot(10,r,t),t.pendingProps=e,t.expirationTime=n,t}function lt(e,t,n){return t=new ot(6,null,t),t.pendingProps=e,t.expirationTime=n,t}function ct(e,t,n){return t=new ot(7,e.key,t),t.type=e.handler,t.pendingProps=e,t.expirationTime=n,t}function ft(e,t,n){return e=new ot(9,null,t),e.expirationTime=n,e}function pt(e,t,n){return t=new ot(4,e.key,t),t.pendingProps=e.children||[],t.expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ht(e){return function(t){try{return e(t)}catch(e){}}}function dt(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);mi=ht(function(e){return t.onCommitFiberRoot(n,e)}),yi=ht(function(e){return t.onCommitFiberUnmount(n,e)})}catch(e){}return!0}function vt(e){"function"===typeof mi&&mi(e)}function mt(e){"function"===typeof yi&&yi(e)}function yt(e){return{baseState:e,expirationTime:0,first:null,last:null,callbackList:null,hasForceUpdate:!1,isInitialized:!1}}function gt(e,t){null===e.last?e.first=e.last=t:(e.last.next=t,e.last=t),(0===e.expirationTime||e.expirationTime>t.expirationTime)&&(e.expirationTime=t.expirationTime)}function _t(e,t){var n=e.alternate,r=e.updateQueue;null===r&&(r=e.updateQueue=yt(null)),null!==n?null===(e=n.updateQueue)&&(e=n.updateQueue=yt(null)):e=null,e=e!==r?e:null,null===e?gt(r,t):null===r.last||null===e.last?(gt(r,t),gt(e,t)):(gt(r,t),e.last=t)}function bt(e,t,n,r){return e=e.partialState,"function"===typeof e?e.call(t,n,r):e}function xt(e,t,n,r,i,o){null!==e&&e.updateQueue===n&&(n=t.updateQueue={baseState:n.baseState,expirationTime:n.expirationTime,first:n.first,last:n.last,isInitialized:n.isInitialized,callbackList:null,hasForceUpdate:!1}),n.expirationTime=0,n.isInitialized?e=n.baseState:(e=n.baseState=t.memoizedState,n.isInitialized=!0);for(var a=!0,s=n.first,u=!1;null!==s;){var l=s.expirationTime;if(l>o){var c=n.expirationTime;(0===c||c>l)&&(n.expirationTime=l),u||(u=!0,n.baseState=e)}else u||(n.first=s.next,null===n.first&&(n.last=null)),s.isReplace?(e=bt(s,r,e,i),a=!0):(l=bt(s,r,e,i))&&(e=a?xn({},e,l):xn(e,l),a=!1),s.isForced&&(n.hasForceUpdate=!0),null!==s.callback&&(l=n.callbackList,null===l&&(l=n.callbackList=[]),l.push(s));s=s.next}return null!==n.callbackList?t.effectTag|=32:null!==n.first||n.hasForceUpdate||(t.updateQueue=null),u||(n.baseState=e),e}function wt(e,t){var n=e.callbackList;if(null!==n)for(e.callbackList=null,e=0;e<n.length;e++){var i=n[e],o=i.callback;i.callback=null,"function"!==typeof o&&r("191",o),o.call(t)}}function Et(e,t,n,i){function o(e,t){t.updater=a,e.stateNode=t,t._reactInternalFiber=e}var a={isMounted:Ee,enqueueSetState:function(n,r,i){n=n._reactInternalFiber,i=void 0===i?null:i;var o=t(n);_t(n,{expirationTime:o,partialState:r,callback:i,isReplace:!1,isForced:!1,nextCallback:null,next:null}),e(n,o)},enqueueReplaceState:function(n,r,i){n=n._reactInternalFiber,i=void 0===i?null:i;var o=t(n);_t(n,{expirationTime:o,partialState:r,callback:i,isReplace:!0,isForced:!1,nextCallback:null,next:null}),e(n,o)},enqueueForceUpdate:function(n,r){n=n._reactInternalFiber,r=void 0===r?null:r;var i=t(n);_t(n,{expirationTime:i,partialState:null,callback:r,isReplace:!1,isForced:!0,nextCallback:null,next:null}),e(n,i)}};return{adoptClassInstance:o,constructClassInstance:function(e,t){var n=e.type,r=Qe(e),i=2===e.tag&&null!=e.type.contextTypes,a=i?Je(e,r):Pn;return t=new n(t,a),o(e,t),i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=a),t},mountClassInstance:function(e,t){var n=e.alternate,i=e.stateNode,o=i.state||null,s=e.pendingProps;s||r("158");var u=Qe(e);i.props=s,i.state=e.memoizedState=o,i.refs=Pn,i.context=Je(e,u),null!=e.type&&null!=e.type.prototype&&!0===e.type.prototype.unstable_isAsyncReactComponent&&(e.internalContextTag|=1),"function"===typeof i.componentWillMount&&(o=i.state,i.componentWillMount(),o!==i.state&&a.enqueueReplaceState(i,i.state,null),null!==(o=e.updateQueue)&&(i.state=xt(n,e,o,i,s,t))),"function"===typeof i.componentDidMount&&(e.effectTag|=4)},updateClassInstance:function(e,t,o){var s=t.stateNode;s.props=t.memoizedProps,s.state=t.memoizedState;var u=t.memoizedProps,l=t.pendingProps;l||null==(l=u)&&r("159");var c=s.context,f=Qe(t);if(f=Je(t,f),"function"!==typeof s.componentWillReceiveProps||u===l&&c===f||(c=s.state,s.componentWillReceiveProps(l,f),s.state!==c&&a.enqueueReplaceState(s,s.state,null)),c=t.memoizedState,o=null!==t.updateQueue?xt(e,t,t.updateQueue,s,l,o):c,!(u!==l||c!==o||di.current||null!==t.updateQueue&&t.updateQueue.hasForceUpdate))return"function"!==typeof s.componentDidUpdate||u===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=4),!1;var p=l;if(null===u||null!==t.updateQueue&&t.updateQueue.hasForceUpdate)p=!0;else{var h=t.stateNode,d=t.type;p="function"===typeof h.shouldComponentUpdate?h.shouldComponentUpdate(p,o,f):!d.prototype||!d.prototype.isPureReactComponent||(!Tn(u,p)||!Tn(c,o))}return p?("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(l,o,f),"function"===typeof s.componentDidUpdate&&(t.effectTag|=4)):("function"!==typeof s.componentDidUpdate||u===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=4),n(t,l),i(t,o)),s.props=l,s.state=o,s.context=f,p}}}function St(e){return null===e||"undefined"===typeof e?null:(e=Si&&e[Si]||e["@@iterator"],"function"===typeof e?e:null)}function Tt(e,t){var n=t.ref;if(null!==n&&"function"!==typeof n){if(t._owner){t=t._owner;var i=void 0;t&&(2!==t.tag&&r("110"),i=t.stateNode),i||r("147",n);var o=""+n;return null!==e&&null!==e.ref&&e.ref._stringRef===o?e.ref:(e=function(e){var t=i.refs===Pn?i.refs={}:i.refs;null===e?delete t[o]:t[o]=e},e._stringRef=o,e)}"string"!==typeof n&&r("148"),t._owner||r("149",n)}return n}function At(e,t){"textarea"!==e.type&&r("31","[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function Ot(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t,n){return e=at(e,t,n),e.index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index,r<n?(t.effectTag=2,n):r):(t.effectTag=2,n):n}function s(t){return e&&null===t.alternate&&(t.effectTag=2),t}function u(e,t,n,r){return null===t||6!==t.tag?(t=lt(n,e.internalContextTag,r),t.return=e,t):(t=o(t,n,r),t.return=e,t)}function l(e,t,n,r){return null!==t&&t.type===n.type?(r=o(t,n.props,r),r.ref=Tt(t,n),r.return=e,r):(r=st(n,e.internalContextTag,r),r.ref=Tt(t,n),r.return=e,r)}function c(e,t,n,r){return null===t||7!==t.tag?(t=ct(n,e.internalContextTag,r),t.return=e,t):(t=o(t,n,r),t.return=e,t)}function f(e,t,n,r){return null===t||9!==t.tag?(t=ft(n,e.internalContextTag,r),t.type=n.value,t.return=e,t):(t=o(t,null,r),t.type=n.value,t.return=e,t)}function p(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=pt(n,e.internalContextTag,r),t.return=e,t):(t=o(t,n.children||[],r),t.return=e,t)}function h(e,t,n,r,i){return null===t||10!==t.tag?(t=ut(n,e.internalContextTag,r,i),t.return=e,t):(t=o(t,n,r),t.return=e,t)}function d(e,t,n){if("string"===typeof t||"number"===typeof t)return t=lt(""+t,e.internalContextTag,n),t.return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _i:return t.type===Ei?(t=ut(t.props.children,e.internalContextTag,n,t.key),t.return=e,t):(n=st(t,e.internalContextTag,n),n.ref=Tt(null,t),n.return=e,n);case bi:return t=ct(t,e.internalContextTag,n),t.return=e,t;case xi:return n=ft(t,e.internalContextTag,n),n.type=t.value,n.return=e,n;case wi:return t=pt(t,e.internalContextTag,n),t.return=e,t}if(Ti(t)||St(t))return t=ut(t,e.internalContextTag,n,null),t.return=e,t;At(e,t)}return null}function v(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _i:return n.key===i?n.type===Ei?h(e,t,n.props.children,r,i):l(e,t,n,r):null;case bi:return n.key===i?c(e,t,n,r):null;case xi:return null===i?f(e,t,n,r):null;case wi:return n.key===i?p(e,t,n,r):null}if(Ti(n)||St(n))return null!==i?null:h(e,t,n,r,null);At(e,n)}return null}function m(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return e=e.get(n)||null,u(t,e,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _i:return e=e.get(null===r.key?n:r.key)||null,r.type===Ei?h(t,e,r.props.children,i,r.key):l(t,e,r,i);case bi:return e=e.get(null===r.key?n:r.key)||null,c(t,e,r,i);case xi:return e=e.get(n)||null,f(t,e,r,i);case wi:return e=e.get(null===r.key?n:r.key)||null,p(t,e,r,i)}if(Ti(r)||St(r))return e=e.get(n)||null,h(t,e,r,i,null);At(t,r)}return null}function y(r,o,s,u){for(var l=null,c=null,f=o,p=o=0,h=null;null!==f&&p<s.length;p++){f.index>p?(h=f,f=null):h=f.sibling;var y=v(r,f,s[p],u);if(null===y){null===f&&(f=h);break}e&&f&&null===y.alternate&&t(r,f),o=a(y,o,p),null===c?l=y:c.sibling=y,c=y,f=h}if(p===s.length)return n(r,f),l;if(null===f){for(;p<s.length;p++)(f=d(r,s[p],u))&&(o=a(f,o,p),null===c?l=f:c.sibling=f,c=f);return l}for(f=i(r,f);p<s.length;p++)(h=m(f,r,p,s[p],u))&&(e&&null!==h.alternate&&f.delete(null===h.key?p:h.key),o=a(h,o,p),null===c?l=h:c.sibling=h,c=h);return e&&f.forEach(function(e){return t(r,e)}),l}function g(o,s,u,l){var c=St(u);"function"!==typeof c&&r("150"),null==(u=c.call(u))&&r("151");for(var f=c=null,p=s,h=s=0,y=null,g=u.next();null!==p&&!g.done;h++,g=u.next()){p.index>h?(y=p,p=null):y=p.sibling;var _=v(o,p,g.value,l);if(null===_){p||(p=y);break}e&&p&&null===_.alternate&&t(o,p),s=a(_,s,h),null===f?c=_:f.sibling=_,f=_,p=y}if(g.done)return n(o,p),c;if(null===p){for(;!g.done;h++,g=u.next())null!==(g=d(o,g.value,l))&&(s=a(g,s,h),null===f?c=g:f.sibling=g,f=g);return c}for(p=i(o,p);!g.done;h++,g=u.next())null!==(g=m(p,o,h,g.value,l))&&(e&&null!==g.alternate&&p.delete(null===g.key?h:g.key),s=a(g,s,h),null===f?c=g:f.sibling=g,f=g);return e&&p.forEach(function(e){return t(o,e)}),c}return function(e,i,a,u){"object"===typeof a&&null!==a&&a.type===Ei&&null===a.key&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case _i:e:{var c=a.key;for(l=i;null!==l;){if(l.key===c){if(10===l.tag?a.type===Ei:l.type===a.type){n(e,l.sibling),i=o(l,a.type===Ei?a.props.children:a.props,u),i.ref=Tt(l,a),i.return=e,e=i;break e}n(e,l);break}t(e,l),l=l.sibling}a.type===Ei?(i=ut(a.props.children,e.internalContextTag,u,a.key),i.return=e,e=i):(u=st(a,e.internalContextTag,u),u.ref=Tt(i,a),u.return=e,e=u)}return s(e);case bi:e:{for(l=a.key;null!==i;){if(i.key===l){if(7===i.tag){n(e,i.sibling),i=o(i,a,u),i.return=e,e=i;break e}n(e,i);break}t(e,i),i=i.sibling}i=ct(a,e.internalContextTag,u),i.return=e,e=i}return s(e);case xi:e:{if(null!==i){if(9===i.tag){n(e,i.sibling),i=o(i,null,u),i.type=a.value,i.return=e,e=i;break e}n(e,i)}i=ft(a,e.internalContextTag,u),i.type=a.value,i.return=e,e=i}return s(e);case wi:e:{for(l=a.key;null!==i;){if(i.key===l){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(e,i.sibling),i=o(i,a.children||[],u),i.return=e,e=i;break e}n(e,i);break}t(e,i),i=i.sibling}i=pt(a,e.internalContextTag,u),i.return=e,e=i}return s(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==i&&6===i.tag?(n(e,i.sibling),i=o(i,a,u)):(n(e,i),i=lt(a,e.internalContextTag,u)),i.return=e,e=i,s(e);if(Ti(a))return y(e,i,a,u);if(St(a))return g(e,i,a,u);if(l&&At(e,a),"undefined"===typeof a)switch(e.tag){case 2:case 1:u=e.type,r("152",u.displayName||u.name||"Component")}return n(e,i)}}function Pt(e,t,n,i,o){function a(e,t,n){var r=t.expirationTime;t.child=null===e?Oi(t,null,n,r):Ai(t,e.child,n,r)}function s(e,t){var n=t.ref;null===n||e&&e.ref===n||(t.effectTag|=128)}function u(e,t,n,r){if(s(e,t),!n)return r&&it(t,!1),c(e,t);n=t.stateNode,Ur.current=t;var i=n.render();return t.effectTag|=1,a(e,t,i),t.memoizedState=n.state,t.memoizedProps=n.props,r&&it(t,!0),t.child}function l(e){var t=e.stateNode;t.pendingContext?tt(e,t.pendingContext,t.pendingContext!==t.context):t.context&&tt(e,t.context,!1),m(e,t.containerInfo)}function c(e,t){if(null!==e&&t.child!==e.child&&r("153"),null!==t.child){e=t.child;var n=at(e,e.pendingProps,e.expirationTime);for(t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,n=n.sibling=at(e,e.pendingProps,e.expirationTime),n.return=t;n.sibling=null}return t.child}function f(e,t){switch(t.tag){case 3:l(t);break;case 2:rt(t);break;case 4:m(t,t.stateNode.containerInfo)}return null}var p=e.shouldSetTextContent,h=e.useSyncScheduling,d=e.shouldDeprioritizeSubtree,v=t.pushHostContext,m=t.pushHostContainer,y=n.enterHydrationState,g=n.resetHydrationState,_=n.tryToClaimNextHydratableInstance;e=Et(i,o,function(e,t){e.memoizedProps=t},function(e,t){e.memoizedState=t});var b=e.adoptClassInstance,x=e.constructClassInstance,w=e.mountClassInstance,E=e.updateClassInstance;return{beginWork:function(e,t,n){if(0===t.expirationTime||t.expirationTime>n)return f(e,t);switch(t.tag){case 0:null!==e&&r("155");var i=t.type,o=t.pendingProps,S=Qe(t);return S=Je(t,S),i=i(o,S),t.effectTag|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render?(t.tag=2,o=rt(t),b(t,i),w(t,n),t=u(e,t,!0,o)):(t.tag=1,a(e,t,i),t.memoizedProps=o,t=t.child),t;case 1:e:{if(o=t.type,n=t.pendingProps,i=t.memoizedProps,di.current)null===n&&(n=i);else if(null===n||i===n){t=c(e,t);break e}i=Qe(t),i=Je(t,i),o=o(n,i),t.effectTag|=1,a(e,t,o),t.memoizedProps=n,t=t.child}return t;case 2:return o=rt(t),i=void 0,null===e?t.stateNode?r("153"):(x(t,t.pendingProps),w(t,n),i=!0):i=E(e,t,n),u(e,t,i,o);case 3:return l(t),o=t.updateQueue,null!==o?(i=t.memoizedState,o=xt(e,t,o,null,null,n),i===o?(g(),t=c(e,t)):(i=o.element,S=t.stateNode,(null===e||null===e.child)&&S.hydrate&&y(t)?(t.effectTag|=2,t.child=Oi(t,null,i,n)):(g(),a(e,t,i)),t.memoizedState=o,t=t.child)):(g(),t=c(e,t)),t;case 5:v(t),null===e&&_(t),o=t.type;var T=t.memoizedProps;return i=t.pendingProps,null===i&&null===(i=T)&&r("154"),S=null!==e?e.memoizedProps:null,di.current||null!==i&&T!==i?(T=i.children,p(o,i)?T=null:S&&p(o,S)&&(t.effectTag|=16),s(e,t),2147483647!==n&&!h&&d(o,i)?(t.expirationTime=2147483647,t=null):(a(e,t,T),t.memoizedProps=i,t=t.child)):t=c(e,t),t;case 6:return null===e&&_(t),e=t.pendingProps,null===e&&(e=t.memoizedProps),t.memoizedProps=e,null;case 8:t.tag=7;case 7:return o=t.pendingProps,di.current?null===o&&null===(o=e&&e.memoizedProps)&&r("154"):null!==o&&t.memoizedProps!==o||(o=t.memoizedProps),i=o.children,t.stateNode=null===e?Oi(t,t.stateNode,i,n):Ai(t,t.stateNode,i,n),t.memoizedProps=o,t.stateNode;case 9:return null;case 4:e:{if(m(t,t.stateNode.containerInfo),o=t.pendingProps,di.current)null===o&&null==(o=e&&e.memoizedProps)&&r("154");else if(null===o||t.memoizedProps===o){t=c(e,t);break e}null===e?t.child=Ai(t,null,o,n):a(e,t,o),t.memoizedProps=o,t=t.child}return t;case 10:e:{if(n=t.pendingProps,di.current)null===n&&(n=t.memoizedProps);else if(null===n||t.memoizedProps===n){t=c(e,t);break e}a(e,t,n),t.memoizedProps=n,t=t.child}return t;default:r("156")}},beginFailedWork:function(e,t,n){switch(t.tag){case 2:rt(t);break;case 3:l(t);break;default:r("157")}return t.effectTag|=64,null===e?t.child=null:t.child!==e.child&&(t.child=e.child),0===t.expirationTime||t.expirationTime>n?f(e,t):(t.firstEffect=null,t.lastEffect=null,t.child=null===e?Oi(t,null,null,n):Ai(t,e.child,null,n),2===t.tag&&(e=t.stateNode,t.memoizedProps=e.props,t.memoizedState=e.state),t.child)}}}function Ct(e,t,n){function i(e){e.effectTag|=4}var o=e.createInstance,a=e.createTextInstance,s=e.appendInitialChild,u=e.finalizeInitialChildren,l=e.prepareUpdate,c=e.persistence,f=t.getRootHostContainer,p=t.popHostContext,h=t.getHostContext,d=t.popHostContainer,v=n.prepareToHydrateHostInstance,m=n.prepareToHydrateHostTextInstance,y=n.popHydrationState,g=void 0,_=void 0,b=void 0;return e.mutation?(g=function(){},_=function(e,t,n){(t.updateQueue=n)&&i(t)},b=function(e,t,n,r){n!==r&&i(t)}):r(c?"235":"236"),{completeWork:function(e,t,n){var c=t.pendingProps;switch(null===c?c=t.memoizedProps:2147483647===t.expirationTime&&2147483647!==n||(t.pendingProps=null),t.tag){case 1:return null;case 2:return et(t),null;case 3:return d(t),Ze(di,t),Ze(hi,t),c=t.stateNode,c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),null!==e&&null!==e.child||(y(t),t.effectTag&=-3),g(t),null;case 5:p(t),n=f();var x=t.type;if(null!==e&&null!=t.stateNode){var w=e.memoizedProps,E=t.stateNode,S=h();E=l(E,x,w,c,n,S),_(e,t,E,x,w,c,n),e.ref!==t.ref&&(t.effectTag|=128)}else{if(!c)return null===t.stateNode&&r("166"),null;if(e=h(),y(t))v(t,n,e)&&i(t);else{e=o(x,c,n,e,t);e:for(w=t.child;null!==w;){if(5===w.tag||6===w.tag)s(e,w.stateNode);else if(4!==w.tag&&null!==w.child){w.child.return=w,w=w.child;continue}if(w===t)break;for(;null===w.sibling;){if(null===w.return||w.return===t)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}u(e,x,c,n)&&i(t),t.stateNode=e}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)b(e,t,e.memoizedProps,c);else{if("string"!==typeof c)return null===t.stateNode&&r("166"),null;e=f(),n=h(),y(t)?m(t)&&i(t):t.stateNode=a(c,e,n,t)}return null;case 7:(c=t.memoizedProps)||r("165"),t.tag=8,x=[];e:for((w=t.stateNode)&&(w.return=t);null!==w;){if(5===w.tag||6===w.tag||4===w.tag)r("247");else if(9===w.tag)x.push(w.type);else if(null!==w.child){w.child.return=w,w=w.child;continue}for(;null===w.sibling;){if(null===w.return||w.return===t)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}return w=c.handler,c=w(c.props,x),t.child=Ai(t,null!==e?e.child:null,c,n),t.child;case 8:return t.tag=7,null;case 9:case 10:return null;case 4:return d(t),g(t),null;case 0:r("167");default:r("156")}}}}function kt(e,t){function n(e){var n=e.ref;if(null!==n)try{n(null)}catch(n){t(e,n)}}function i(e){switch("function"===typeof mt&&mt(e),e.tag){case 2:n(e);var r=e.stateNode;if("function"===typeof r.componentWillUnmount)try{r.props=e.memoizedProps,r.state=e.memoizedState,r.componentWillUnmount()}catch(n){t(e,n)}break;case 5:n(e);break;case 7:o(e.stateNode);break;case 4:l&&s(e)}}function o(e){for(var t=e;;)if(i(t),null===t.child||l&&4===t.tag){if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}else t.child.return=t,t=t.child}function a(e){return 5===e.tag||3===e.tag||4===e.tag}function s(e){for(var t=e,n=!1,a=void 0,s=void 0;;){if(!n){n=t.return;e:for(;;){switch(null===n&&r("160"),n.tag){case 5:a=n.stateNode,s=!1;break e;case 3:case 4:a=n.stateNode.containerInfo,s=!0;break e}n=n.return}n=!0}if(5===t.tag||6===t.tag)o(t),s?_(a,t.stateNode):g(a,t.stateNode);else if(4===t.tag?a=t.stateNode.containerInfo:i(t),null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;t=t.return,4===t.tag&&(n=!1)}t.sibling.return=t.return,t=t.sibling}}var u=e.getPublicInstance,l=e.mutation;e=e.persistence,l||r(e?"235":"236");var c=l.commitMount,f=l.commitUpdate,p=l.resetTextContent,h=l.commitTextUpdate,d=l.appendChild,v=l.appendChildToContainer,m=l.insertBefore,y=l.insertInContainerBefore,g=l.removeChild,_=l.removeChildFromContainer;return{commitResetTextContent:function(e){p(e.stateNode)},commitPlacement:function(e){e:{for(var t=e.return;null!==t;){if(a(t)){var n=t;break e}t=t.return}r("160"),n=void 0}var i=t=void 0;switch(n.tag){case 5:t=n.stateNode,i=!1;break;case 3:case 4:t=n.stateNode.containerInfo,i=!0;break;default:r("161")}16&n.effectTag&&(p(t),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||a(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var o=e;;){if(5===o.tag||6===o.tag)n?i?y(t,o.stateNode,n):m(t,o.stateNode,n):i?v(t,o.stateNode):d(t,o.stateNode);else if(4!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===e)break;for(;null===o.sibling;){if(null===o.return||o.return===e)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},commitDeletion:function(e){s(e),e.return=null,e.child=null,e.alternate&&(e.alternate.child=null,e.alternate.return=null)},commitWork:function(e,t){switch(t.tag){case 2:break;case 5:var n=t.stateNode;if(null!=n){var i=t.memoizedProps;e=null!==e?e.memoizedProps:i;var o=t.type,a=t.updateQueue;t.updateQueue=null,null!==a&&f(n,a,o,e,i,t)}break;case 6:null===t.stateNode&&r("162"),n=t.memoizedProps,h(t.stateNode,null!==e?e.memoizedProps:n,n);break;case 3:break;default:r("163")}},commitLifeCycles:function(e,t){switch(t.tag){case 2:var n=t.stateNode;if(4&t.effectTag)if(null===e)n.props=t.memoizedProps,n.state=t.memoizedState,n.componentDidMount();else{var i=e.memoizedProps;e=e.memoizedState,n.props=t.memoizedProps,n.state=t.memoizedState,n.componentDidUpdate(i,e)}t=t.updateQueue,null!==t&&wt(t,n);break;case 3:n=t.updateQueue,null!==n&&wt(n,null!==t.child?t.child.stateNode:null);break;case 5:n=t.stateNode,null===e&&4&t.effectTag&&c(n,t.type,t.memoizedProps,t);break;case 6:case 4:break;default:r("163")}},commitAttachRef:function(e){var t=e.ref;if(null!==t){var n=e.stateNode;switch(e.tag){case 5:t(u(n));break;default:t(n)}}},commitDetachRef:function(e){null!==(e=e.ref)&&e(null)}}}function Rt(e){function t(e){return e===Pi&&r("174"),e}var n=e.getChildHostContext,i=e.getRootHostContext,o={current:Pi},a={current:Pi},s={current:Pi};return{getHostContext:function(){return t(o.current)},getRootHostContainer:function(){return t(s.current)},popHostContainer:function(e){Ze(o,e),Ze(a,e),Ze(s,e)},popHostContext:function(e){a.current===e&&(Ze(o,e),Ze(a,e))},pushHostContainer:function(e,t){Ke(s,t,e),t=i(t),Ke(a,e,e),Ke(o,t,e)},pushHostContext:function(e){var r=t(s.current),i=t(o.current);r=n(i,e.type,r),i!==r&&(Ke(a,e,e),Ke(o,r,e))},resetHostContainer:function(){o.current=Pi,s.current=Pi}}}function Mt(e){function t(e,t){var n=new ot(5,null,0);n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function n(e,t){switch(e.tag){case 5:return null!==(t=a(t,e.type,e.pendingProps))&&(e.stateNode=t,!0);case 6:return null!==(t=s(t,e.pendingProps))&&(e.stateNode=t,!0);default:return!1}}function i(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag;)e=e.return;p=e}var o=e.shouldSetTextContent;if(!(e=e.hydration))return{enterHydrationState:function(){return!1},resetHydrationState:function(){},tryToClaimNextHydratableInstance:function(){},prepareToHydrateHostInstance:function(){r("175")},prepareToHydrateHostTextInstance:function(){r("176")},popHydrationState:function(){return!1}};var a=e.canHydrateInstance,s=e.canHydrateTextInstance,u=e.getNextHydratableSibling,l=e.getFirstHydratableChild,c=e.hydrateInstance,f=e.hydrateTextInstance,p=null,h=null,d=!1;return{enterHydrationState:function(e){return h=l(e.stateNode.containerInfo),p=e,d=!0},resetHydrationState:function(){h=p=null,d=!1},tryToClaimNextHydratableInstance:function(e){if(d){var r=h;if(r){if(!n(e,r)){if(!(r=u(r))||!n(e,r))return e.effectTag|=2,d=!1,void(p=e);t(p,h)}p=e,h=l(r)}else e.effectTag|=2,d=!1,p=e}},prepareToHydrateHostInstance:function(e,t,n){return t=c(e.stateNode,e.type,e.memoizedProps,t,n,e),e.updateQueue=t,null!==t},prepareToHydrateHostTextInstance:function(e){return f(e.stateNode,e.memoizedProps,e)},popHydrationState:function(e){if(e!==p)return!1;if(!d)return i(e),d=!0,!1;var n=e.type;if(5!==e.tag||"head"!==n&&"body"!==n&&!o(n,e.memoizedProps))for(n=h;n;)t(e,n),n=u(n);return i(e),h=p?u(e.stateNode):null,!0}}}function It(e){function t(e){oe=Z=!0;var t=e.stateNode;if(t.current===e&&r("177"),t.isReadyForCommit=!1,Ur.current=null,1<e.effectTag)if(null!==e.lastEffect){e.lastEffect.nextEffect=e;var n=e.firstEffect}else n=e;else n=e.firstEffect;for(W(),$=n;null!==$;){var i=!1,o=void 0;try{for(;null!==$;){var a=$.effectTag;if(16&a&&I($),128&a){var s=$.alternate;null!==s&&B(s)}switch(-242&a){case 2:L($),$.effectTag&=-3;break;case 6:L($),$.effectTag&=-3,N($.alternate,$);break;case 4:N($.alternate,$);break;case 8:ae=!0,D($),ae=!1}$=$.nextEffect}}catch(e){i=!0,o=e}i&&(null===$&&r("178"),u($,o),null!==$&&($=$.nextEffect))}for(H(),t.current=e,$=n;null!==$;){n=!1,i=void 0;try{for(;null!==$;){var l=$.effectTag;if(36&l&&F($.alternate,$),128&l&&j($),64&l)switch(o=$,a=void 0,null!==ee&&(a=ee.get(o),ee.delete(o),null==a&&null!==o.alternate&&(o=o.alternate,a=ee.get(o),ee.delete(o))),null==a&&r("184"),o.tag){case 2:o.stateNode.componentDidCatch(a.error,{componentStack:a.componentStack});break;case 3:null===re&&(re=a.error);break;default:r("157")}var c=$.nextEffect;$.nextEffect=null,$=c}}catch(e){n=!0,i=e}n&&(null===$&&r("178"),u($,i),null!==$&&($=$.nextEffect))}return Z=oe=!1,"function"===typeof vt&&vt(e.stateNode),ne&&(ne.forEach(v),ne=null),null!==re&&(e=re,re=null,E(e)),t=t.current.expirationTime,0===t&&(te=ee=null),t}function n(e){for(;;){var t=M(e.alternate,e,J),n=e.return,r=e.sibling,i=e;if(2147483647===J||2147483647!==i.expirationTime){if(2!==i.tag&&3!==i.tag)var o=0;else o=i.updateQueue,o=null===o?0:o.expirationTime;for(var a=i.child;null!==a;)0!==a.expirationTime&&(0===o||o>a.expirationTime)&&(o=a.expirationTime),a=a.sibling;i.expirationTime=o}if(null!==t)return t;if(null!==n&&(null===n.firstEffect&&(n.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),1<e.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e)),null!==r)return r;if(null===n){e.stateNode.isReadyForCommit=!0;break}e=n}return null}function i(e){var t=k(e.alternate,e,J);return null===t&&(t=n(e)),Ur.current=null,t}function o(e){var t=R(e.alternate,e,J);return null===t&&(t=n(e)),Ur.current=null,t}function a(e){if(null!==ee){if(!(0===J||J>e))if(J<=q)for(;null!==K;)K=l(K)?o(K):i(K);else for(;null!==K&&!w();)K=l(K)?o(K):i(K)}else if(!(0===J||J>e))if(J<=q)for(;null!==K;)K=i(K);else for(;null!==K&&!w();)K=i(K)}function s(e,t){if(Z&&r("243"),Z=!0,e.isReadyForCommit=!1,e!==Q||t!==J||null===K){for(;-1<pi;)fi[pi]=null,pi--;vi=Pn,hi.current=Pn,di.current=!1,P(),Q=e,J=t,K=at(Q.current,null,t)}var n=!1,i=null;try{a(t)}catch(e){n=!0,i=e}for(;n;){if(ie){re=i;break}var s=K;if(null===s)ie=!0;else{var l=u(s,i);if(null===l&&r("183"),!ie){try{for(n=l,i=t,l=n;null!==s;){switch(s.tag){case 2:et(s);break;case 5:O(s);break;case 3:A(s);break;case 4:A(s)}if(s===l||s.alternate===l)break;s=s.return}K=o(n),a(i)}catch(e){n=!0,i=e;continue}break}}}return t=re,ie=Z=!1,re=null,null!==t&&E(t),e.isReadyForCommit?e.current.alternate:null}function u(e,t){var n=Ur.current=null,r=!1,i=!1,o=null;if(3===e.tag)n=e,c(e)&&(ie=!0);else for(var a=e.return;null!==a&&null===n;){if(2===a.tag?"function"===typeof a.stateNode.componentDidCatch&&(r=!0,o=xe(a),n=a,i=!0):3===a.tag&&(n=a),c(a)){if(ae||null!==ne&&(ne.has(a)||null!==a.alternate&&ne.has(a.alternate)))return null;n=null,i=!1}a=a.return}if(null!==n){null===te&&(te=new Set),te.add(n);var s="";a=e;do{e:switch(a.tag){case 0:case 1:case 2:case 5:var u=a._debugOwner,l=a._debugSource,f=xe(a),p=null;u&&(p=xe(u)),u=l,f="\n    in "+(f||"Unknown")+(u?" (at "+u.fileName.replace(/^.*[\\\/]/,"")+":"+u.lineNumber+")":p?" (created by "+p+")":"");break e;default:f=""}s+=f,a=a.return}while(a);a=s,e=xe(e),null===ee&&(ee=new Map),t={componentName:e,componentStack:a,error:t,errorBoundary:r?n.stateNode:null,errorBoundaryFound:r,errorBoundaryName:o,willRetry:i},ee.set(n,t);try{var h=t.error;h&&h.suppressReactErrorLogging||console.error(h)}catch(e){e&&e.suppressReactErrorLogging||console.error(e)}return oe?(null===ne&&(ne=new Set),ne.add(n)):v(n),n}return null===re&&(re=t),null}function l(e){return null!==ee&&(ee.has(e)||null!==e.alternate&&ee.has(e.alternate))}function c(e){return null!==te&&(te.has(e)||null!==e.alternate&&te.has(e.alternate))}function f(){return 20*(1+((m()+100)/20|0))}function p(e){return 0!==Y?Y:Z?oe?1:J:!G||1&e.internalContextTag?f():1}function h(e,t){return d(e,t,!1)}function d(e,t){for(;null!==e;){if((0===e.expirationTime||e.expirationTime>t)&&(e.expirationTime=t),null!==e.alternate&&(0===e.alternate.expirationTime||e.alternate.expirationTime>t)&&(e.alternate.expirationTime=t),null===e.return){if(3!==e.tag)break;var n=e.stateNode;!Z&&n===Q&&t<J&&(K=Q=null,J=0);var i=n,o=t;if(we>be&&r("185"),null===i.nextScheduledRoot)i.remainingExpirationTime=o,null===ue?(se=ue=i,i.nextScheduledRoot=i):(ue=ue.nextScheduledRoot=i,ue.nextScheduledRoot=se);else{var a=i.remainingExpirationTime;(0===a||o<a)&&(i.remainingExpirationTime=o)}fe||(ge?_e&&(pe=i,he=1,x(pe,he)):1===o?b(1,null):y(o)),!Z&&n===Q&&t<J&&(K=Q=null,J=0)}e=e.return}}function v(e){d(e,1,!0)}function m(){return q=2+((z()-X)/10|0)}function y(e){if(0!==le){if(e>le)return;V(ce)}var t=z()-X;le=e,ce=U(_,{timeout:10*(e-2)-t})}function g(){var e=0,t=null;if(null!==ue)for(var n=ue,i=se;null!==i;){var o=i.remainingExpirationTime;if(0===o){if((null===n||null===ue)&&r("244"),i===i.nextScheduledRoot){se=ue=i.nextScheduledRoot=null;break}if(i===se)se=o=i.nextScheduledRoot,ue.nextScheduledRoot=o,i.nextScheduledRoot=null;else{if(i===ue){ue=n,ue.nextScheduledRoot=se,i.nextScheduledRoot=null;break}n.nextScheduledRoot=i.nextScheduledRoot,i.nextScheduledRoot=null}i=n.nextScheduledRoot}else{if((0===e||o<e)&&(e=o,t=i),i===ue)break;n=i,i=i.nextScheduledRoot}}n=pe,null!==n&&n===t?we++:we=0,pe=t,he=e}function _(e){b(0,e)}function b(e,t){for(ye=t,g();null!==pe&&0!==he&&(0===e||he<=e)&&!de;)x(pe,he),g();if(null!==ye&&(le=0,ce=-1),0!==he&&y(he),ye=null,de=!1,we=0,ve)throw e=me,me=null,ve=!1,e}function x(e,n){if(fe&&r("245"),fe=!0,n<=m()){var i=e.finishedWork;null!==i?(e.finishedWork=null,e.remainingExpirationTime=t(i)):(e.finishedWork=null,null!==(i=s(e,n))&&(e.remainingExpirationTime=t(i)))}else i=e.finishedWork,null!==i?(e.finishedWork=null,e.remainingExpirationTime=t(i)):(e.finishedWork=null,null!==(i=s(e,n))&&(w()?e.finishedWork=i:e.remainingExpirationTime=t(i)));fe=!1}function w(){return!(null===ye||ye.timeRemaining()>Ee)&&(de=!0)}function E(e){null===pe&&r("246"),pe.remainingExpirationTime=0,ve||(ve=!0,me=e)}var S=Rt(e),T=Mt(e),A=S.popHostContainer,O=S.popHostContext,P=S.resetHostContainer,C=Pt(e,S,T,h,p),k=C.beginWork,R=C.beginFailedWork,M=Ct(e,S,T).completeWork;S=kt(e,u);var I=S.commitResetTextContent,L=S.commitPlacement,D=S.commitDeletion,N=S.commitWork,F=S.commitLifeCycles,j=S.commitAttachRef,B=S.commitDetachRef,z=e.now,U=e.scheduleDeferredCallback,V=e.cancelDeferredCallback,G=e.useSyncScheduling,W=e.prepareForCommit,H=e.resetAfterCommit,X=z(),q=2,Y=0,Z=!1,K=null,Q=null,J=0,$=null,ee=null,te=null,ne=null,re=null,ie=!1,oe=!1,ae=!1,se=null,ue=null,le=0,ce=-1,fe=!1,pe=null,he=0,de=!1,ve=!1,me=null,ye=null,ge=!1,_e=!1,be=1e3,we=0,Ee=1;return{computeAsyncExpiration:f,computeExpirationForFiber:p,scheduleWork:h,batchedUpdates:function(e,t){var n=ge;ge=!0;try{return e(t)}finally{(ge=n)||fe||b(1,null)}},unbatchedUpdates:function(e){if(ge&&!_e){_e=!0;try{return e()}finally{_e=!1}}return e()},flushSync:function(e){var t=ge;ge=!0;try{e:{var n=Y;Y=1;try{var i=e();break e}finally{Y=n}i=void 0}return i}finally{ge=t,fe&&r("187"),b(1,null)}},deferredUpdates:function(e){var t=Y;Y=f();try{return e()}finally{Y=t}}}}function Lt(e){function t(e){return e=Ae(e),null===e?null:e.stateNode}var n=e.getPublicInstance;e=It(e);var i=e.computeAsyncExpiration,o=e.computeExpirationForFiber,a=e.scheduleWork;return{createContainer:function(e,t){var n=new ot(3,null,0);return e={current:n,containerInfo:e,pendingChildren:null,remainingExpirationTime:0,isReadyForCommit:!1,finishedWork:null,context:null,pendingContext:null,hydrate:t,nextScheduledRoot:null},n.stateNode=e},updateContainer:function(e,t,n,s){var u=t.current;if(n){n=n._reactInternalFiber;var l;e:{for(2===we(n)&&2===n.tag||r("170"),l=n;3!==l.tag;){if($e(l)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}(l=l.return)||r("171")}l=l.stateNode.context}n=$e(n)?nt(n,l):l}else n=Pn;null===t.context?t.context=n:t.pendingContext=n,t=s,t=void 0===t?null:t,s=null!=e&&null!=e.type&&null!=e.type.prototype&&!0===e.type.prototype.unstable_isAsyncReactComponent?i():o(u),_t(u,{expirationTime:s,partialState:{element:e},callback:t,isReplace:!1,isForced:!1,nextCallback:null,next:null}),a(u,s)},batchedUpdates:e.batchedUpdates,unbatchedUpdates:e.unbatchedUpdates,deferredUpdates:e.deferredUpdates,flushSync:e.flushSync,getPublicRootInstance:function(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return n(e.child.stateNode);default:return e.child.stateNode}},findHostInstance:t,findHostInstanceWithNoPortals:function(e){return e=Oe(e),null===e?null:e.stateNode},injectIntoDevTools:function(e){var n=e.findFiberByHostInstance;return dt(xn({},e,{findHostInstanceByFiber:function(e){return t(e)},findFiberByHostInstance:function(e){return n?n(e):null}}))}}}function Dt(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:wi,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Nt(e){return!!Yi.hasOwnProperty(e)||!qi.hasOwnProperty(e)&&(Xi.test(e)?Yi[e]=!0:(qi[e]=!0,!1))}function Ft(e,t,n){var r=a(t);if(r&&o(t,n)){var i=r.mutationMethod;i?i(e,n):null==n||r.hasBooleanValue&&!n||r.hasNumericValue&&isNaN(n)||r.hasPositiveNumericValue&&1>n||r.hasOverloadedBooleanValue&&!1===n?Bt(e,t):r.mustUseProperty?e[r.propertyName]=n:(t=r.attributeName,(i=r.attributeNamespace)?e.setAttributeNS(i,t,""+n):r.hasBooleanValue||r.hasOverloadedBooleanValue&&!0===n?e.setAttribute(t,""):e.setAttribute(t,""+n))}else jt(e,t,o(t,n)?n:null)}function jt(e,t,n){Nt(t)&&(null==n?e.removeAttribute(t):e.setAttribute(t,""+n))}function Bt(e,t){var n=a(t);n?(t=n.mutationMethod)?t(e,void 0):n.mustUseProperty?e[n.propertyName]=!n.hasBooleanValue&&"":e.removeAttribute(n.attributeName):e.removeAttribute(t)}function zt(e,t){var n=t.value,r=t.checked;return xn({type:void 0,step:void 0,min:void 0,max:void 0},t,{defaultChecked:void 0,defaultValue:void 0,value:null!=n?n:e._wrapperState.initialValue,checked:null!=r?r:e._wrapperState.initialChecked})}function Ut(e,t){var n=t.defaultValue;e._wrapperState={initialChecked:null!=t.checked?t.checked:t.defaultChecked,initialValue:null!=t.value?t.value:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Vt(e,t){null!=(t=t.checked)&&Ft(e,"checked",t)}function Gt(e,t){Vt(e,t);var n=t.value;null!=n?0===n&&""===e.value?e.value="0":"number"===t.type?(t=parseFloat(e.value)||0,(n!=t||n==t&&e.value!=n)&&(e.value=""+n)):e.value!==""+n&&(e.value=""+n):(null==t.value&&null!=t.defaultValue&&e.defaultValue!==""+t.defaultValue&&(e.defaultValue=""+t.defaultValue),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked))}function Wt(e,t){switch(t.type){case"submit":case"reset":break;case"color":case"date":case"datetime":case"datetime-local":case"month":case"time":case"week":e.value="",e.value=e.defaultValue;break;default:e.value=e.value}t=e.name,""!==t&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!e.defaultChecked,""!==t&&(e.name=t)}function Ht(e){var t="";return _n.Children.forEach(e,function(e){null==e||"string"!==typeof e&&"number"!==typeof e||(t+=e)}),t}function Xt(e,t){return e=xn({children:void 0},t),(t=Ht(t.children))&&(e.children=t),e}function qt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+n,t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Yt(e,t){var n=t.value;e._wrapperState={initialValue:null!=n?n:t.defaultValue,wasMultiple:!!t.multiple}}function Zt(e,t){return null!=t.dangerouslySetInnerHTML&&r("91"),xn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Kt(e,t){var n=t.value;null==n&&(n=t.defaultValue,t=t.children,null!=t&&(null!=n&&r("92"),Array.isArray(t)&&(1>=t.length||r("93"),t=t[0]),n=""+t),null==n&&(n="")),e._wrapperState={initialValue:""+n}}function Qt(e,t){var n=t.value;null!=n&&(n=""+n,n!==e.value&&(e.value=n),null==t.defaultValue&&(e.defaultValue=n)),null!=t.defaultValue&&(e.defaultValue=t.defaultValue)}function Jt(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)}function $t(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function en(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?$t(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}function tn(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function nn(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=n,o=t[n];i=null==o||"boolean"===typeof o||""===o?"":r||"number"!==typeof o||0===o||Ji.hasOwnProperty(i)&&Ji[i]?(""+o).trim():o+"px","float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}function rn(e,t,n){t&&(eo[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&r("137",e,n()),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&r("60"),"object"===typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML||r("61")),null!=t.style&&"object"!==typeof t.style&&r("62",n()))}function on(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function an(e,t){e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument;var n=De(e);t=Kn[t];for(var r=0;r<t.length;r++){var i=t[r];n.hasOwnProperty(i)&&n[i]||("topScroll"===i?Re("topScroll","scroll",e):"topFocus"===i||"topBlur"===i?(Re("topFocus","focus",e),Re("topBlur","blur",e),n.topBlur=!0,n.topFocus=!0):"topCancel"===i?(ne("cancel",!0)&&Re("topCancel","cancel",e),n.topCancel=!0):"topClose"===i?(ne("close",!0)&&Re("topClose","close",e),n.topClose=!0):Zr.hasOwnProperty(i)&&ke(i,Zr[i],e),n[i]=!0)}}function sn(e,t,n,r){return n=9===n.nodeType?n:n.ownerDocument,r===to&&(r=$t(e)),r===to?"script"===e?(e=n.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):e="string"===typeof t.is?n.createElement(e,{is:t.is}):n.createElement(e):e=n.createElementNS(r,e),e}function un(e,t){return(9===t.nodeType?t:t.ownerDocument).createTextNode(e)}function ln(e,t,n,r){var i=on(t,n);switch(t){case"iframe":case"object":ke("topLoad","load",e);var o=n;break;case"video":case"audio":for(o in ro)ro.hasOwnProperty(o)&&ke(o,ro[o],e);o=n;break;case"source":ke("topError","error",e),o=n;break;case"img":case"image":ke("topError","error",e),ke("topLoad","load",e),o=n;break;case"form":ke("topReset","reset",e),ke("topSubmit","submit",e),o=n;break;case"details":ke("topToggle","toggle",e),o=n;break;case"input":Ut(e,n),o=zt(e,n),ke("topInvalid","invalid",e),an(r,"onChange");break;case"option":o=Xt(e,n);break;case"select":Yt(e,n),o=xn({},n,{value:void 0}),ke("topInvalid","invalid",e),an(r,"onChange");break;case"textarea":Kt(e,n),o=Zt(e,n),ke("topInvalid","invalid",e),an(r,"onChange");break;default:o=n}rn(t,o,no);var a,s=o;for(a in s)if(s.hasOwnProperty(a)){var u=s[a];"style"===a?nn(e,u,no):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&Qi(e,u):"children"===a?"string"===typeof u?("textarea"!==t||""!==u)&&tn(e,u):"number"===typeof u&&tn(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(Zn.hasOwnProperty(a)?null!=u&&an(r,a):i?jt(e,a,u):null!=u&&Ft(e,a,u))}switch(t){case"input":oe(e),Wt(e,n);break;case"textarea":oe(e),Jt(e,n);break;case"option":null!=n.value&&e.setAttribute("value",n.value);break;case"select":e.multiple=!!n.multiple,t=n.value,null!=t?qt(e,!!n.multiple,t,!1):null!=n.defaultValue&&qt(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=wn)}}function cn(e,t,n,r,i){var o=null;switch(t){case"input":n=zt(e,n),r=zt(e,r),o=[];break;case"option":n=Xt(e,n),r=Xt(e,r),o=[];break;case"select":n=xn({},n,{value:void 0}),r=xn({},r,{value:void 0}),o=[];break;case"textarea":n=Zt(e,n),r=Zt(e,r),o=[];break;default:"function"!==typeof n.onClick&&"function"===typeof r.onClick&&(e.onclick=wn)}rn(t,r,no);var a,s;e=null;for(a in n)if(!r.hasOwnProperty(a)&&n.hasOwnProperty(a)&&null!=n[a])if("style"===a)for(s in t=n[a])t.hasOwnProperty(s)&&(e||(e={}),e[s]="");else"dangerouslySetInnerHTML"!==a&&"children"!==a&&"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(Zn.hasOwnProperty(a)?o||(o=[]):(o=o||[]).push(a,null));for(a in r){var u=r[a];if(t=null!=n?n[a]:void 0,r.hasOwnProperty(a)&&u!==t&&(null!=u||null!=t))if("style"===a)if(t){for(s in t)!t.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(e||(e={}),e[s]="");for(s in u)u.hasOwnProperty(s)&&t[s]!==u[s]&&(e||(e={}),e[s]=u[s])}else e||(o||(o=[]),o.push(a,e)),e=u;else"dangerouslySetInnerHTML"===a?(u=u?u.__html:void 0,t=t?t.__html:void 0,null!=u&&t!==u&&(o=o||[]).push(a,""+u)):"children"===a?t===u||"string"!==typeof u&&"number"!==typeof u||(o=o||[]).push(a,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&(Zn.hasOwnProperty(a)?(null!=u&&an(i,a),o||t===u||(o=[])):(o=o||[]).push(a,u))}return e&&(o=o||[]).push("style",e),o}function fn(e,t,n,r,i){"input"===n&&"radio"===i.type&&null!=i.name&&Vt(e,i),on(n,r),r=on(n,i);for(var o=0;o<t.length;o+=2){var a=t[o],s=t[o+1];"style"===a?nn(e,s,no):"dangerouslySetInnerHTML"===a?Qi(e,s):"children"===a?tn(e,s):r?null!=s?jt(e,a,s):e.removeAttribute(a):null!=s?Ft(e,a,s):Bt(e,a)}switch(n){case"input":Gt(e,i);break;case"textarea":Qt(e,i);break;case"select":e._wrapperState.initialValue=void 0,t=e._wrapperState.wasMultiple,e._wrapperState.wasMultiple=!!i.multiple,n=i.value,null!=n?qt(e,!!i.multiple,n,!1):t!==!!i.multiple&&(null!=i.defaultValue?qt(e,!!i.multiple,i.defaultValue,!0):qt(e,!!i.multiple,i.multiple?[]:"",!1))}}function pn(e,t,n,r,i){switch(t){case"iframe":case"object":ke("topLoad","load",e);break;case"video":case"audio":for(var o in ro)ro.hasOwnProperty(o)&&ke(o,ro[o],e);break;case"source":ke("topError","error",e);break;case"img":case"image":ke("topError","error",e),ke("topLoad","load",e);break;case"form":ke("topReset","reset",e),ke("topSubmit","submit",e);break;case"details":ke("topToggle","toggle",e);break;case"input":Ut(e,n),ke("topInvalid","invalid",e),an(i,"onChange");break;case"select":Yt(e,n),ke("topInvalid","invalid",e),an(i,"onChange");break;case"textarea":Kt(e,n),ke("topInvalid","invalid",e),an(i,"onChange")}rn(t,n,no),r=null;for(var a in n)n.hasOwnProperty(a)&&(o=n[a],"children"===a?"string"===typeof o?e.textContent!==o&&(r=["children",o]):"number"===typeof o&&e.textContent!==""+o&&(r=["children",""+o]):Zn.hasOwnProperty(a)&&null!=o&&an(i,a));switch(t){case"input":oe(e),Wt(e,n);break;case"textarea":oe(e),Jt(e,n);break;case"select":case"option":break;default:"function"===typeof n.onClick&&(e.onclick=wn)}return r}function hn(e,t){return e.nodeValue!==t}function dn(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function vn(e){return!(!(e=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))}function mn(e,t,n,i,o){dn(n)||r("200");var a=n._reactRootContainer;if(a)so.updateContainer(t,a,e,o);else{if(!(i=i||vn(n)))for(a=void 0;a=n.lastChild;)n.removeChild(a);var s=so.createContainer(n,i);a=n._reactRootContainer=s,so.unbatchedUpdates(function(){so.updateContainer(t,s,e,o)})}return so.getPublicRootInstance(a)}function yn(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return dn(t)||r("200"),Dt(e,t,null,n)}function gn(e,t){this._reactRootContainer=so.createContainer(e,t)}var _n=n(0),bn=n(270),xn=n(137),wn=n(54),En=n(271),Sn=n(272),Tn=n(139),An=n(273),On=n(276),Pn=n(138);_n||r("227");var Cn={children:!0,dangerouslySetInnerHTML:!0,defaultValue:!0,defaultChecked:!0,innerHTML:!0,suppressContentEditableWarning:!0,suppressHydrationWarning:!0,style:!0},kn={MUST_USE_PROPERTY:1,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:24,HAS_OVERLOADED_BOOLEAN_VALUE:32,HAS_STRING_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(e){var t=kn,n=e.Properties||{},o=e.DOMAttributeNamespaces||{},a=e.DOMAttributeNames||{};e=e.DOMMutationMethods||{};for(var s in n){Rn.hasOwnProperty(s)&&r("48",s);var u=s.toLowerCase(),l=n[s];u={attributeName:u,attributeNamespace:null,propertyName:s,mutationMethod:null,mustUseProperty:i(l,t.MUST_USE_PROPERTY),hasBooleanValue:i(l,t.HAS_BOOLEAN_VALUE),hasNumericValue:i(l,t.HAS_NUMERIC_VALUE),hasPositiveNumericValue:i(l,t.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:i(l,t.HAS_OVERLOADED_BOOLEAN_VALUE),hasStringBooleanValue:i(l,t.HAS_STRING_BOOLEAN_VALUE)},1>=u.hasBooleanValue+u.hasNumericValue+u.hasOverloadedBooleanValue||r("50",s),a.hasOwnProperty(s)&&(u.attributeName=a[s]),o.hasOwnProperty(s)&&(u.attributeNamespace=o[s]),e.hasOwnProperty(s)&&(u.mutationMethod=e[s]),Rn[s]=u}}},Rn={},Mn=kn,In=Mn.MUST_USE_PROPERTY,Ln=Mn.HAS_BOOLEAN_VALUE,Dn=Mn.HAS_NUMERIC_VALUE,Nn=Mn.HAS_POSITIVE_NUMERIC_VALUE,Fn=Mn.HAS_OVERLOADED_BOOLEAN_VALUE,jn=Mn.HAS_STRING_BOOLEAN_VALUE,Bn={Properties:{allowFullScreen:Ln,async:Ln,autoFocus:Ln,autoPlay:Ln,capture:Fn,checked:In|Ln,cols:Nn,contentEditable:jn,controls:Ln,default:Ln,defer:Ln,disabled:Ln,download:Fn,draggable:jn,formNoValidate:Ln,hidden:Ln,loop:Ln,multiple:In|Ln,muted:In|Ln,noValidate:Ln,open:Ln,playsInline:Ln,readOnly:Ln,required:Ln,reversed:Ln,rows:Nn,rowSpan:Dn,scoped:Ln,seamless:Ln,selected:In|Ln,size:Nn,start:Dn,span:Nn,spellCheck:jn,style:0,tabIndex:0,itemScope:Ln,acceptCharset:0,className:0,htmlFor:0,httpEquiv:0,value:jn},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMMutationMethods:{value:function(e,t){if(null==t)return e.removeAttribute("value");"number"!==e.type||!1===e.hasAttribute("value")?e.setAttribute("value",""+t):e.validity&&!e.validity.badInput&&e.ownerDocument.activeElement!==e&&e.setAttribute("value",""+t)}}},zn=Mn.HAS_STRING_BOOLEAN_VALUE,Un={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},Vn={Properties:{autoReverse:zn,externalResourcesRequired:zn,preserveAlpha:zn},DOMAttributeNames:{autoReverse:"autoReverse",externalResourcesRequired:"externalResourcesRequired",preserveAlpha:"preserveAlpha"},DOMAttributeNamespaces:{xlinkActuate:Un.xlink,xlinkArcrole:Un.xlink,xlinkHref:Un.xlink,xlinkRole:Un.xlink,xlinkShow:Un.xlink,xlinkTitle:Un.xlink,xlinkType:Un.xlink,xmlBase:Un.xml,xmlLang:Un.xml,xmlSpace:Un.xml}},Gn=/[\-\:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode x-height xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type xml:base xmlns:xlink xml:lang xml:space".split(" ").forEach(function(e){var t=e.replace(Gn,s);Vn.Properties[t]=0,Vn.DOMAttributeNames[t]=e}),Mn.injectDOMPropertyConfig(Bn),Mn.injectDOMPropertyConfig(Vn);var Wn={_caughtError:null,_hasCaughtError:!1,_rethrowError:null,_hasRethrowError:!1,injection:{injectErrorUtils:function(e){"function"!==typeof e.invokeGuardedCallback&&r("197"),u=e.invokeGuardedCallback}},invokeGuardedCallback:function(e,t,n,r,i,o,a,s,l){u.apply(Wn,arguments)},invokeGuardedCallbackAndCatchFirstError:function(e,t,n,r,i,o,a,s,u){if(Wn.invokeGuardedCallback.apply(this,arguments),Wn.hasCaughtError()){var l=Wn.clearCaughtError();Wn._hasRethrowError||(Wn._hasRethrowError=!0,Wn._rethrowError=l)}},rethrowCaughtError:function(){return l.apply(Wn,arguments)},hasCaughtError:function(){return Wn._hasCaughtError},clearCaughtError:function(){if(Wn._hasCaughtError){var e=Wn._caughtError;return Wn._caughtError=null,Wn._hasCaughtError=!1,e}r("198")}},Hn=null,Xn={},qn=[],Yn={},Zn={},Kn={},Qn=Object.freeze({plugins:qn,eventNameDispatchConfigs:Yn,registrationNameModules:Zn,registrationNameDependencies:Kn,possibleRegistrationNames:null,injectEventPluginOrder:p,injectEventPluginsByName:h}),Jn=null,$n=null,er=null,tr=null,nr={injectEventPluginOrder:p,injectEventPluginsByName:h},rr=Object.freeze({injection:nr,getListener:b,extractEvents:x,enqueueEvents:w,processEventQueue:E}),ir=Math.random().toString(36).slice(2),or="__reactInternalInstance$"+ir,ar="__reactEventHandlers$"+ir,sr=Object.freeze({precacheFiberNode:function(e,t){t[or]=e},getClosestInstanceFromNode:S,getInstanceFromNode:function(e){return e=e[or],!e||5!==e.tag&&6!==e.tag?null:e},getNodeFromInstance:T,getFiberCurrentPropsFromNode:A,updateFiberProps:function(e,t){e[ar]=t}}),ur=Object.freeze({accumulateTwoPhaseDispatches:L,accumulateTwoPhaseDispatchesSkipTarget:function(e){m(e,R)},accumulateEnterLeaveDispatches:D,accumulateDirectDispatches:function(e){m(e,I)}}),lr=null,cr={_root:null,_startText:null,_fallbackText:null},fr="dispatchConfig _targetInst nativeEvent isDefaultPrevented isPropagationStopped _dispatchListeners _dispatchInstances".split(" "),pr={type:null,target:null,currentTarget:wn.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};xn(B.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=wn.thatReturnsTrue)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=wn.thatReturnsTrue)},persist:function(){this.isPersistent=wn.thatReturnsTrue},isPersistent:wn.thatReturnsFalse,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;for(t=0;t<fr.length;t++)this[fr[t]]=null}}),B.Interface=pr,B.augmentClass=function(e,t){function n(){}n.prototype=this.prototype;var r=new n;xn(r,e.prototype),e.prototype=r,e.prototype.constructor=e,e.Interface=xn({},this.Interface,t),e.augmentClass=this.augmentClass,V(e)},V(B),B.augmentClass(G,{data:null}),B.augmentClass(W,{data:null});var hr=[9,13,27,32],dr=bn.canUseDOM&&"CompositionEvent"in window,vr=null;bn.canUseDOM&&"documentMode"in document&&(vr=document.documentMode);var mr;if(mr=bn.canUseDOM&&"TextEvent"in window&&!vr){var yr=window.opera;mr=!("object"===typeof yr&&"function"===typeof yr.version&&12>=parseInt(yr.version(),10))}var gr,_r=mr,br=bn.canUseDOM&&(!dr||vr&&8<vr&&11>=vr),xr=String.fromCharCode(32),wr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["topCompositionEnd","topKeyPress","topTextInput","topPaste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"topBlur topCompositionEnd topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"topBlur topCompositionStart topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"topBlur topCompositionUpdate topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")}},Er=!1,Sr=!1,Tr={eventTypes:wr,extractEvents:function(e,t,n,r){var i;if(dr)e:{switch(e){case"topCompositionStart":var o=wr.compositionStart;break e;case"topCompositionEnd":o=wr.compositionEnd;break e;case"topCompositionUpdate":o=wr.compositionUpdate;break e}o=void 0}else Sr?H(e,n)&&(o=wr.compositionEnd):"topKeyDown"===e&&229===n.keyCode&&(o=wr.compositionStart);return o?(br&&(Sr||o!==wr.compositionStart?o===wr.compositionEnd&&Sr&&(i=F()):(cr._root=r,cr._startText=j(),Sr=!0)),o=G.getPooled(o,t,n,r),i?o.data=i:null!==(i=X(n))&&(o.data=i),L(o),i=o):i=null,(e=_r?q(e,n):Y(e,n))?(t=W.getPooled(wr.beforeInput,t,n,r),t.data=e,L(t)):t=null,[i,t]}},Ar=null,Or=null,Pr=null,Cr={injectFiberControlledHostComponent:function(e){Ar=e}},kr=Object.freeze({injection:Cr,enqueueStateRestore:K,restoreStateIfNeeded:Q}),Rr=!1,Mr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};bn.canUseDOM&&(gr=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("",""));var Ir={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"topBlur topChange topClick topFocus topInput topKeyDown topKeyUp topSelectionChange".split(" ")}},Lr=null,Dr=null,Nr=!1;bn.canUseDOM&&(Nr=ne("input")&&(!document.documentMode||9<document.documentMode));var Fr={eventTypes:Ir,_isInputEventSupported:Nr,extractEvents:function(e,t,n,r){var i=t?T(t):window,o=i.nodeName&&i.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===i.type)var a=ce;else if(ee(i))if(Nr)a=me;else{a=de;var s=he}else!(o=i.nodeName)||"input"!==o.toLowerCase()||"checkbox"!==i.type&&"radio"!==i.type||(a=ve);if(a&&(a=a(e,t)))return se(a,n,r);s&&s(e,i,t),"topBlur"===e&&null!=t&&(e=t._wrapperState||i._wrapperState)&&e.controlled&&"number"===i.type&&(e=""+i.value,i.getAttribute("value")!==e&&i.setAttribute("value",e))}};B.augmentClass(ye,{view:null,detail:null});var jr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};ye.augmentClass(be,{screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:_e,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)}});var Br={mouseEnter:{registrationName:"onMouseEnter",dependencies:["topMouseOut","topMouseOver"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["topMouseOut","topMouseOver"]}},zr={eventTypes:Br,extractEvents:function(e,t,n,r){if("topMouseOver"===e&&(n.relatedTarget||n.fromElement)||"topMouseOut"!==e&&"topMouseOver"!==e)return null;var i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window;if("topMouseOut"===e?(e=t,t=(t=n.relatedTarget||n.toElement)?S(t):null):e=null,e===t)return null;var o=null==e?i:T(e);i=null==t?i:T(t);var a=be.getPooled(Br.mouseLeave,e,n,r);return a.type="mouseleave",a.target=o,a.relatedTarget=i,n=be.getPooled(Br.mouseEnter,t,n,r),n.type="mouseenter",n.target=i,n.relatedTarget=o,D(a,n,e,t),[a,n]}},Ur=_n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Vr=[],Gr=!0,Wr=void 0,Hr=Object.freeze({get _enabled(){return Gr},get _handleTopLevel(){return Wr},setHandleTopLevel:function(e){Wr=e},setEnabled:Ce,isEnabled:function(){return Gr},trapBubbledEvent:ke,trapCapturedEvent:Re,dispatchEvent:Me}),Xr={animationend:Ie("Animation","AnimationEnd"),animationiteration:Ie("Animation","AnimationIteration"),animationstart:Ie("Animation","AnimationStart"),transitionend:Ie("Transition","TransitionEnd")},qr={},Yr={};bn.canUseDOM&&(Yr=document.createElement("div").style,"AnimationEvent"in window||(delete Xr.animationend.animation,delete Xr.animationiteration.animation,delete Xr.animationstart.animation),"TransitionEvent"in window||delete Xr.transitionend.transition);var Zr={topAbort:"abort",topAnimationEnd:Le("animationend")||"animationend",topAnimationIteration:Le("animationiteration")||"animationiteration",topAnimationStart:Le("animationstart")||"animationstart",topBlur:"blur",topCancel:"cancel",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topClose:"close",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoad:"load",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topToggle:"toggle",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:Le("transitionend")||"transitionend",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},Kr={},Qr=0,Jr="_reactListenersID"+(""+Math.random()).slice(2),$r=bn.canUseDOM&&"documentMode"in document&&11>=document.documentMode,ei={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"topBlur topContextMenu topFocus topKeyDown topKeyUp topMouseDown topMouseUp topSelectionChange".split(" ")}},ti=null,ni=null,ri=null,ii=!1,oi={eventTypes:ei,extractEvents:function(e,t,n,r){var i,o=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!o)){e:{o=De(o),i=Kn.onSelect;for(var a=0;a<i.length;a++){var s=i[a];if(!o.hasOwnProperty(s)||!o[s]){o=!1;break e}}o=!0}i=!o}if(i)return null;switch(o=t?T(t):window,e){case"topFocus":(ee(o)||"true"===o.contentEditable)&&(ti=o,ni=t,ri=null);break;case"topBlur":ri=ni=ti=null;break;case"topMouseDown":ii=!0;break;case"topContextMenu":case"topMouseUp":return ii=!1,Be(n,r);case"topSelectionChange":if($r)break;case"topKeyDown":case"topKeyUp":return Be(n,r)}return null}};B.augmentClass(ze,{animationName:null,elapsedTime:null,pseudoElement:null}),B.augmentClass(Ue,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ye.augmentClass(Ve,{relatedTarget:null});var ai={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},si={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};ye.augmentClass(We,{key:function(e){if(e.key){var t=ai[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?(e=Ge(e),13===e?"Enter":String.fromCharCode(e)):"keydown"===e.type||"keyup"===e.type?si[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:_e,charCode:function(e){return"keypress"===e.type?Ge(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Ge(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),be.augmentClass(He,{dataTransfer:null}),ye.augmentClass(Xe,{touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:_e}),B.augmentClass(qe,{propertyName:null,elapsedTime:null,pseudoElement:null}),be.augmentClass(Ye,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null});var ui={},li={};"abort animationEnd animationIteration animationStart blur cancel canPlay canPlayThrough click close contextMenu copy cut doubleClick drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error focus input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing progress rateChange reset scroll seeked seeking stalled submit suspend timeUpdate toggle touchCancel touchEnd touchMove touchStart transitionEnd volumeChange waiting wheel".split(" ").forEach(function(e){var t=e[0].toUpperCase()+e.slice(1),n="on"+t;t="top"+t,n={phasedRegistrationNames:{bubbled:n,captured:n+"Capture"},dependencies:[t]},ui[e]=n,li[t]=n});var ci={eventTypes:ui,extractEvents:function(e,t,n,r){var i=li[e];if(!i)return null;switch(e){case"topKeyPress":if(0===Ge(n))return null;case"topKeyDown":case"topKeyUp":e=We;break;case"topBlur":case"topFocus":e=Ve;break;case"topClick":if(2===n.button)return null;case"topDoubleClick":case"topMouseDown":case"topMouseMove":case"topMouseUp":case"topMouseOut":case"topMouseOver":case"topContextMenu":e=be;break;case"topDrag":case"topDragEnd":case"topDragEnter":case"topDragExit":case"topDragLeave":case"topDragOver":case"topDragStart":case"topDrop":e=He;break;case"topTouchCancel":case"topTouchEnd":case"topTouchMove":case"topTouchStart":e=Xe;break;case"topAnimationEnd":case"topAnimationIteration":case"topAnimationStart":e=ze;break;case"topTransitionEnd":e=qe;break;case"topScroll":e=ye;break;case"topWheel":e=Ye;break;case"topCopy":case"topCut":case"topPaste":e=Ue;break;default:e=B}return t=e.getPooled(i,t,n,r),L(t),t}};Wr=function(e,t,n,r){e=x(e,t,n,r),w(e),E(!1)},nr.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin TapEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),Jn=sr.getFiberCurrentPropsFromNode,$n=sr.getInstanceFromNode,er=sr.getNodeFromInstance,nr.injectEventPluginsByName({SimpleEventPlugin:ci,EnterLeaveEventPlugin:zr,ChangeEventPlugin:Fr,SelectEventPlugin:oi,BeforeInputEventPlugin:Tr});var fi=[],pi=-1;new Set;var hi={current:Pn},di={current:!1},vi=Pn,mi=null,yi=null,gi="function"===typeof Symbol&&Symbol.for,_i=gi?Symbol.for("react.element"):60103,bi=gi?Symbol.for("react.call"):60104,xi=gi?Symbol.for("react.return"):60105,wi=gi?Symbol.for("react.portal"):60106,Ei=gi?Symbol.for("react.fragment"):60107,Si="function"===typeof Symbol&&Symbol.iterator,Ti=Array.isArray,Ai=Ot(!0),Oi=Ot(!1),Pi={},Ci=Object.freeze({default:Lt}),ki=Ci&&Lt||Ci,Ri=ki.default?ki.default:ki,Mi="object"===typeof performance&&"function"===typeof performance.now,Ii=void 0;Ii=Mi?function(){return performance.now()}:function(){return Date.now()};var Li=void 0,Di=void 0;if(bn.canUseDOM)if("function"!==typeof requestIdleCallback||"function"!==typeof cancelIdleCallback){var Ni,Fi=null,ji=!1,Bi=-1,zi=!1,Ui=0,Vi=33,Gi=33;Ni=Mi?{didTimeout:!1,timeRemaining:function(){var e=Ui-performance.now();return 0<e?e:0}}:{didTimeout:!1,timeRemaining:function(){var e=Ui-Date.now();return 0<e?e:0}};var Wi="__reactIdleCallback$"+Math.random().toString(36).slice(2);window.addEventListener("message",function(e){if(e.source===window&&e.data===Wi){if(ji=!1,e=Ii(),0>=Ui-e){if(!(-1!==Bi&&Bi<=e))return void(zi||(zi=!0,requestAnimationFrame(Hi)));Ni.didTimeout=!0}else Ni.didTimeout=!1;Bi=-1,e=Fi,Fi=null,null!==e&&e(Ni)}},!1);var Hi=function(e){zi=!1;var t=e-Ui+Gi;t<Gi&&Vi<Gi?(8>t&&(t=8),Gi=t<Vi?Vi:t):Vi=t,Ui=e+Gi,ji||(ji=!0,window.postMessage(Wi,"*"))};Li=function(e,t){return Fi=e,null!=t&&"number"===typeof t.timeout&&(Bi=Ii()+t.timeout),zi||(zi=!0,requestAnimationFrame(Hi)),0},Di=function(){Fi=null,ji=!1,Bi=-1}}else Li=window.requestIdleCallback,Di=window.cancelIdleCallback;else Li=function(e){return setTimeout(function(){e({timeRemaining:function(){return 1/0}})})},Di=function(e){clearTimeout(e)};var Xi=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,qi={},Yi={},Zi={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"},Ki=void 0,Qi=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n)})}:e}(function(e,t){if(e.namespaceURI!==Zi.svg||"innerHTML"in e)e.innerHTML=t;else{for(Ki=Ki||document.createElement("div"),Ki.innerHTML="<svg>"+t+"</svg>",t=Ki.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}),Ji={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$i=["Webkit","ms","Moz","O"];Object.keys(Ji).forEach(function(e){$i.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ji[t]=Ji[e]})});var eo=xn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),to=Zi.html,no=wn.thatReturns(""),ro={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},io=Object.freeze({createElement:sn,createTextNode:un,setInitialProperties:ln,diffProperties:cn,updateProperties:fn,diffHydratedProperties:pn,diffHydratedText:hn,warnForUnmatchedText:function(){},warnForDeletedHydratableElement:function(){},warnForDeletedHydratableText:function(){},warnForInsertedHydratedElement:function(){},warnForInsertedHydratedText:function(){},restoreControlledState:function(e,t,n){switch(t){case"input":if(Gt(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var o=A(i);o||r("90"),ae(i),Gt(i,o)}}}break;case"textarea":Qt(e,n);break;case"select":null!=(t=n.value)&&qt(e,!!n.multiple,t,!1)}}});Cr.injectFiberControlledHostComponent(io);var oo=null,ao=null,so=Ri({getRootHostContext:function(e){var t=e.nodeType;switch(t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:en(null,"");break;default:t=8===t?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=en(e,t)}return e},getChildHostContext:function(e,t){return en(e,t)},getPublicInstance:function(e){return e},prepareForCommit:function(){oo=Gr;var e=Sn();if(je(e)){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{var n=window.getSelection&&window.getSelection();if(n&&0!==n.rangeCount){t=n.anchorNode;var r=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{t.nodeType,i.nodeType}catch(e){t=null;break e}var o=0,a=-1,s=-1,u=0,l=0,c=e,f=null;t:for(;;){for(var p;c!==t||0!==r&&3!==c.nodeType||(a=o+r),c!==i||0!==n&&3!==c.nodeType||(s=o+n),3===c.nodeType&&(o+=c.nodeValue.length),null!==(p=c.firstChild);)f=c,c=p;for(;;){if(c===e)break t;if(f===t&&++u===r&&(a=o),f===i&&++l===n&&(s=o),null!==(p=c.nextSibling))break;c=f,f=c.parentNode}c=p}t=-1===a||-1===s?null:{start:a,end:s}}else t=null}t=t||{start:0,end:0}}else t=null;ao={focusedElem:e,selectionRange:t},Ce(!1)},resetAfterCommit:function(){var e=ao,t=Sn(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&An(document.documentElement,n)){if(je(n))if(t=r.start,e=r.end,void 0===e&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(window.getSelection){t=window.getSelection();var i=n[N()].length;e=Math.min(r.start,i),r=void 0===r.end?e:Math.min(r.end,i),!t.extend&&e>r&&(i=r,r=e,e=i),i=Fe(n,e);var o=Fe(n,r);if(i&&o&&(1!==t.rangeCount||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)){var a=document.createRange();a.setStart(i.node,i.offset),t.removeAllRanges(),e>r?(t.addRange(a),t.extend(o.node,o.offset)):(a.setEnd(o.node,o.offset),t.addRange(a))}}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(On(n),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}ao=null,Ce(oo),oo=null},createInstance:function(e,t,n,r,i){return e=sn(e,t,n,r),e[or]=i,e[ar]=t,e},appendInitialChild:function(e,t){e.appendChild(t)},finalizeInitialChildren:function(e,t,n,r){ln(e,t,n,r);e:{switch(t){case"button":case"input":case"select":case"textarea":e=!!n.autoFocus;break e}e=!1}return e},prepareUpdate:function(e,t,n,r,i){return cn(e,t,n,r,i)},shouldSetTextContent:function(e,t){return"textarea"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&"string"===typeof t.dangerouslySetInnerHTML.__html},shouldDeprioritizeSubtree:function(e,t){return!!t.hidden},createTextInstance:function(e,t,n,r){return e=un(e,t),e[or]=r,e},now:Ii,mutation:{commitMount:function(e){e.focus()},commitUpdate:function(e,t,n,r,i){e[ar]=i,fn(e,t,n,r,i)},resetTextContent:function(e){e.textContent=""},commitTextUpdate:function(e,t,n){e.nodeValue=n},appendChild:function(e,t){e.appendChild(t)},appendChildToContainer:function(e,t){8===e.nodeType?e.parentNode.insertBefore(t,e):e.appendChild(t)},insertBefore:function(e,t,n){e.insertBefore(t,n)},insertInContainerBefore:function(e,t,n){8===e.nodeType?e.parentNode.insertBefore(t,n):e.insertBefore(t,n)},removeChild:function(e,t){e.removeChild(t)},removeChildFromContainer:function(e,t){8===e.nodeType?e.parentNode.removeChild(t):e.removeChild(t)}},hydration:{canHydrateInstance:function(e,t){return 1!==e.nodeType||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e},canHydrateTextInstance:function(e,t){return""===t||3!==e.nodeType?null:e},getNextHydratableSibling:function(e){for(e=e.nextSibling;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e},getFirstHydratableChild:function(e){for(e=e.firstChild;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e},hydrateInstance:function(e,t,n,r,i,o){return e[or]=o,e[ar]=n,pn(e,t,n,i,r)},hydrateTextInstance:function(e,t,n){return e[or]=n,hn(e,t)},didNotMatchHydratedContainerTextInstance:function(){},didNotMatchHydratedTextInstance:function(){},didNotHydrateContainerInstance:function(){},didNotHydrateInstance:function(){},didNotFindHydratableContainerInstance:function(){},didNotFindHydratableContainerTextInstance:function(){},didNotFindHydratableInstance:function(){},didNotFindHydratableTextInstance:function(){}},scheduleDeferredCallback:Li,cancelDeferredCallback:Di,useSyncScheduling:!0});J=so.batchedUpdates,gn.prototype.render=function(e,t){so.updateContainer(e,this._reactRootContainer,null,t)},gn.prototype.unmount=function(e){so.updateContainer(null,this._reactRootContainer,null,e)};var uo={createPortal:yn,findDOMNode:function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(t)return so.findHostInstance(t);"function"===typeof e.render?r("188"):r("213",Object.keys(e))},hydrate:function(e,t,n){return mn(null,e,t,!0,n)},render:function(e,t,n){return mn(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,i){return(null==e||void 0===e._reactInternalFiber)&&r("38"),mn(e,t,n,!1,i)},unmountComponentAtNode:function(e){return dn(e)||r("40"),!!e._reactRootContainer&&(so.unbatchedUpdates(function(){mn(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},unstable_createPortal:yn,unstable_batchedUpdates:$,unstable_deferredUpdates:so.deferredUpdates,flushSync:so.flushSync,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{EventPluginHub:rr,EventPluginRegistry:Qn,EventPropagators:ur,ReactControlledComponent:kr,ReactDOMComponentTree:sr,ReactDOMEventListener:Hr}};so.injectIntoDevTools({findFiberByHostInstance:S,bundleType:0,version:"16.2.0",rendererPackageName:"react-dom"});var lo=Object.freeze({default:uo}),co=lo&&uo||lo;e.exports=co.default?co.default:co},function(e,t,n){"use strict";function r(e){for(var t=arguments.length-1,n="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);throw t=Error(n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."),t.name="Invariant Violation",t.framesToPop=1,t}function i(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||P}function o(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||P}function a(){}function s(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||P}function u(e,t,n){var r,i={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)M.call(t,r)&&!I.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:w,type:e,key:o,ref:a,props:i,_owner:R.current}}function l(e){return"object"===typeof e&&null!==e&&e.$$typeof===w}function c(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}function f(e,t,n,r){if(D.length){var i=D.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function p(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>D.length&&D.push(e)}function h(e,t,n,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var a=!1;if(null===e)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case w:case E:case S:case T:a=!0}}if(a)return n(i,e,""===t?"."+d(e,0):t),1;if(a=0,t=""===t?".":t+":",Array.isArray(e))for(var s=0;s<e.length;s++){o=e[s];var u=t+d(o,s);a+=h(o,u,n,i)}else if(null===e||"undefined"===typeof e?u=null:(u=O&&e[O]||e["@@iterator"],u="function"===typeof u?u:null),"function"===typeof u)for(e=u.call(e),s=0;!(o=e.next()).done;)o=o.value,u=t+d(o,s++),a+=h(o,u,n,i);else"object"===o&&(n=""+e,r("31","[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return a}function d(e,t){return"object"===typeof e&&null!==e&&null!=e.key?c(e.key):t.toString(36)}function v(e,t){e.func.call(e.context,t,e.count++)}function m(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?y(e,r,n,b.thatReturnsArgument):null!=e&&(l(e)&&(t=i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(L,"$&/")+"/")+n,e={$$typeof:w,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}),r.push(e))}function y(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(L,"$&/")+"/"),t=f(t,o,r,i),null==e||h(e,"",m,t),p(t)}var g=n(137),_=n(138),b=n(54),x="function"===typeof Symbol&&Symbol.for,w=x?Symbol.for("react.element"):60103,E=x?Symbol.for("react.call"):60104,S=x?Symbol.for("react.return"):60105,T=x?Symbol.for("react.portal"):60106,A=x?Symbol.for("react.fragment"):60107,O="function"===typeof Symbol&&Symbol.iterator,P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}};i.prototype.isReactComponent={},i.prototype.setState=function(e,t){"object"!==typeof e&&"function"!==typeof e&&null!=e&&r("85"),this.updater.enqueueSetState(this,e,t,"setState")},i.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},a.prototype=i.prototype;var C=o.prototype=new a;C.constructor=o,g(C,i.prototype),C.isPureReactComponent=!0;var k=s.prototype=new a;k.constructor=s,g(k,i.prototype),k.unstable_isAsyncReactComponent=!0,k.render=function(){return this.props.children};var R={current:null},M=Object.prototype.hasOwnProperty,I={key:!0,ref:!0,__self:!0,__source:!0},L=/\/+/g,D=[],N={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return y(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;t=f(null,null,t,n),null==e||h(e,"",v,t),p(t)},count:function(e){return null==e?0:h(e,"",b.thatReturnsNull,null)},toArray:function(e){var t=[];return y(e,t,null,b.thatReturnsArgument),t},only:function(e){return l(e)||r("143"),e}},Component:i,PureComponent:o,unstable_AsyncComponent:s,Fragment:A,createElement:u,cloneElement:function(e,t,n){var r=g({},e.props),i=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=R.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(u in t)M.call(t,u)&&!I.hasOwnProperty(u)&&(r[u]=void 0===t[u]&&void 0!==s?s[u]:t[u])}var u=arguments.length-2;if(1===u)r.children=n;else if(1<u){s=Array(u);for(var l=0;l<u;l++)s[l]=arguments[l+2];r.children=s}return{$$typeof:w,type:e.type,key:i,ref:o,props:r,_owner:a}},createFactory:function(e){var t=u.bind(null,e);return t.type=e,t},isValidElement:l,version:"16.2.0",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:R,assign:g}},F=Object.freeze({default:N}),j=F&&N||F;e.exports=j.default?j.default:j},function(e,t,n){"use strict";var r=!("undefined"===typeof window||!window.document||!window.document.createElement),i={canUseDOM:r,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};e.exports=i},function(e,t,n){"use strict";var r=n(54),i={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!0),{remove:function(){e.removeEventListener(t,n,!0)}}):{remove:r}},registerDefault:function(){}};e.exports=i},function(e,t,n){"use strict";function r(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}e.exports=r},function(e,t,n){"use strict";function r(e,t){return!(!e||!t)&&(e===t||!i(e)&&(i(t)?r(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}var i=n(274);e.exports=r},function(e,t,n){"use strict";function r(e){return i(e)&&3==e.nodeType}var i=n(275);e.exports=r},function(e,t,n){"use strict";function r(e){var t=e?e.ownerDocument||e:document,n=t.defaultView||window;return!(!e||!("function"===typeof n.Node?e instanceof n.Node:"object"===typeof e&&"number"===typeof e.nodeType&&"string"===typeof e.nodeName))}e.exports=r},function(e,t,n){"use strict";function r(e){try{e.focus()}catch(e){}}e.exports=r},function(e,t,n){"use strict";function r(e,t){var n=new Array(t);return n.tag=e,n}function i(e){for(var t=0|e.length,n=new Array(t),r=0,i=t-1|0;r<=i;++r)n[r]=e[r];return n.tag=0|e.tag,n}function o(e,t){var n=0|e.length;if(t<=0||t>n)throw[w.invalid_argument,"Obj.truncate"];if(n!==t){for(var r=t,i=n-1|0;r<=i;++r)e[r]=0;return e.length=t,0}return 0}function a(e){return b.__(250,[e])}function s(e,t){for(var n=0|t.length,r=0,i=n-1|0;r<=i;++r)e[r]=t[r];var o=0|t.tag;return 0!==o?(e.tag=o,0):0}function u(e,t){for(;;){var n=t,r=e;if(r===n)return 0;var i=typeof r,o=typeof n;if("string"===i)return x.caml_string_compare(r,n);var a=+("number"===i),s=+("number"===o);if(0!==a)return 0!==s?x.caml_int_compare(r,n):-1;if(0!==s)return 1;if("boolean"===i||"undefined"===i||null===r){var l=r,c=n;return l===c?0:l<c?-1:1}if("function"===i||"function"===o)throw[w.invalid_argument,"compare: functional value"];var f=0|r.tag,p=0|n.tag;if(250!==f)if(250!==p){if(248===f)return x.caml_int_compare(r[1],n[1]);if(251===f)throw[w.invalid_argument,"equal: abstract value"];if(f!==p)return f<p?-1:1;var h=0|r.length,d=0|n.length;if(h===d)for(var v=r,m=n,y=0,g=h;;){var _=y;if(_===g)return 0;var b=u(v[_],m[_]);if(0!==b)return b;y=_+1|0}else if(h<d)for(var E=r,S=n,T=0,A=h;;){var O=T;if(O===A)return-1;var P=u(E[O],S[O]);if(0!==P)return P;T=O+1|0}else for(var C=r,k=n,R=0,M=d;;){var I=R;if(I===M)return 1;var L=u(C[I],k[I]);if(0!==L)return L;R=I+1|0}}else t=n[0];else e=r[0]}}function l(e,t){for(;;){var n=t,r=e;if(r===n)return 1;var i=typeof r;if("string"===i||"number"===i||"boolean"===i||"undefined"===i||null===r)return 0;var o=typeof n;if("function"===i||"function"===o)throw[w.invalid_argument,"equal: functional value"];if("number"===o||"undefined"===o||null===n)return 0;var a=0|r.tag,s=0|n.tag;if(250!==a)if(250!==s){if(248===a)return+(r[1]===n[1]);if(251===a)throw[w.invalid_argument,"equal: abstract value"];if(a!==s)return 0;var u=0|r.length,c=0|n.length;if(u!==c)return 0;for(var f=r,p=n,h=0,d=u;;){var v=h;if(v===d)return 1;{if(!l(f[v],p[v]))return 0;h=v+1|0}}}else t=n[0];else e=r[0]}}function c(e,t){return null!==t?l(e,t):+(e===t)}function f(e,t){return void 0!==t?l(e,t):+(e===t)}function p(e,t){return null==t?+(e===t):l(e,t)}function h(e,t){return 1-l(e,t)}function d(e,t){return+(u(e,t)>=0)}function v(e,t){return+(u(e,t)>0)}function m(e,t){return+(u(e,t)<=0)}function y(e,t){return+(u(e,t)<0)}function g(e,t){return u(e,t)<=0?e:t}function _(e,t){return u(e,t)>=0?e:t}var b=n(96),x=n(141),w=n(14);t.caml_obj_block=r,t.caml_obj_dup=i,t.caml_obj_truncate=o,t.caml_lazy_make_forward=a,t.caml_update_dummy=s,t.caml_compare=u,t.caml_equal=l,t.caml_equal_null=c,t.caml_equal_undefined=f,t.caml_equal_nullable=p,t.caml_notequal=h,t.caml_greaterequal=d,t.caml_greaterthan=v,t.caml_lessthan=y,t.caml_lessequal=m,t.caml_min=g,t.caml_max=_},function(e,t,n){"use strict";(function(e){function r(e,t){return e+t}function i(){throw[h.failure,"caml_ml_open_descriptor_in not implemented"]}function o(){throw[h.failure,"caml_ml_open_descriptor_out not implemented"]}function a(e){return""!==e[0]?(p._2(e[1],e,e[0]),e[0]="",0):0}function s(t,n,r,i){var o=0===r&&i===n.length?n:n.slice(r,i);if("undefined"!==typeof e&&e.stdout&&e.stdout.write&&t===d)return e.stdout.write(o);var s=o.lastIndexOf("\n");return s<0?(t[0]=t[0]+o,0):(t[0]=t[0]+o.slice(0,s+1|0),a(t),t[0]=t[0]+o.slice(s+1|0),0)}function u(e,t){return s(e,String.fromCharCode(t),0,1)}function l(e,t,n,r){throw[h.failure,"caml_ml_input ic not implemented"]}function c(){throw[h.failure,"caml_ml_input_char not implemnted"]}function f(){return[d,[v,0]]}var p=n(35),h=n(14),d=["",function(t,n){var r=n.length-1|0;return"undefined"!==typeof e&&e.stdout&&e.stdout.write?e.stdout.write(n):"\n"===n[r]?(console.log(n.slice(0,r)),0):(console.log(n),0)}],v=["",function(e,t){var n=t.length-1|0;return"\n"===t[n]?(console.log(t.slice(0,n)),0):(console.log(t),0)}],m=function(t){return"undefined"!==typeof e&&e.stdout&&(e.stdout.write(t),!0)};t.$caret=r,t.stdin=void 0,t.stdout=d,t.stderr=v,t.caml_ml_open_descriptor_in=i,t.caml_ml_open_descriptor_out=o,t.caml_ml_flush=a,t.node_std_output=m,t.caml_ml_output=s,t.caml_ml_output_char=u,t.caml_ml_input=l,t.caml_ml_input_char=c,t.caml_ml_out_channels_list=f}).call(t,n(27))},function(e,t,n){"use strict";(function(e){function r(t){var n="undefined"===typeof e?void 0:e;if(void 0!==n){var r=n.env[t];if(void 0!==r)return r;throw p.not_found}throw p.not_found}function i(){var t="undefined"===typeof e?void 0:e;return void 0!==t?t.uptime():-1}function o(){return[(4294967295^(0|Date.now()))*Math.random()|0]}function a(){return 127}function s(){var t="undefined"===typeof e?void 0:e;return void 0!==t?t.cwd():"/"}function u(){var t="undefined"===typeof e?void 0:e;return void 0!==t?null==t.argv?["",[""]]:[t.argv[0],t.argv]:["",[""]]}function l(t){var n="undefined"===typeof e?void 0:e;return void 0!==n?n.exit(t):0}function c(){throw[p.failure,"caml_sys_is_directory not implemented"]}function f(){throw[p.failure,"caml_sys_file_exists not implemented"]}var p=n(14);t.caml_sys_getenv=r,t.caml_sys_time=i,t.caml_sys_random_seed=o,t.caml_sys_system_command=a,t.caml_sys_getcwd=s,t.caml_sys_get_argv=u,t.caml_sys_exit=l,t.caml_sys_is_directory=c,t.caml_sys_file_exists=f}).call(t,n(27))},function(e,t,n){"use strict";function r(e){throw[x.failure,e]}function i(e){return e>=65?e>=97?e>=123?-1:e-87|0:e>=91?-1:e-55|0:e>57||e<48?-1:e-48|0}function o(e){switch(e){case 0:return 8;case 1:return 16;case 2:return 10;case 3:return 2}}function a(e){var t=1,n=2,r=0;"-"===e[r]&&(t=-1,r=r+1|0);var i=e.charCodeAt(r),o=e.charCodeAt(r+1|0);return 48===i&&(o>=89?98!==o?111!==o?120===o&&(n=1,r=r+2|0):(n=0,r=r+2|0):(n=3,r=r+2|0):66!==o?79!==o?o>=88&&(n=1,r=r+2|0):(n=0,r=r+2|0):(n=3,r=r+2|0)),[r,t,n]}function s(e){var t=a(e),n=t[0],r=o(t[2]),s=e.length,u=n<s?e.charCodeAt(n):0,l=i(u);if(l<0||l>=r)throw[x.failure,"int_of_string"];var c=t[1]*function(t,n){for(;;){var o=n,a=t;if(o===s)return a;var u=e.charCodeAt(o);if(95!==u){var l=i(u);if(l<0||l>=r)throw[x.failure,"int_of_string"];var c=r*a+l;if(c>4294967295)throw[x.failure,"int_of_string"];n=o+1|0,t=c}else n=o+1|0}}(l,n+1|0),f=0|c;if(10===r&&c!==f)throw[x.failure,"int_of_string"];return f}function u(e){var t,n=a(e),r=n[2],s=n[0],u=_.of_int32(o(r)),l=_.of_int32(n[1]);switch(r){case 0:t=[536870911,4294967295];break;case 1:t=[268435455,4294967295];break;case 2:t=[429496729,2576980377];break;case 3:t=[2147483647,4294967295]}var c=e.length,f=s<c?e.charCodeAt(s):0,p=_.of_int32(i(f));if(_.lt(p,[0,0])||_.ge(p,u))throw[x.failure,"int64_of_string"];var h=_.mul(l,function(n,r){for(;;){var o=r,a=n;if(o===c)return a;var s=e.charCodeAt(o);if(95!==s){var l=_.of_int32(i(s));if(_.lt(l,[0,0])||_.ge(l,u)||_.gt(a,t))throw[x.failure,"int64_of_string"];var f=_.add(_.mul(u,a),l);r=o+1|0,n=f}else r=o+1|0}}(p,s+1|0)),d=_.or_(h,[0,0]);if(_.eq(u,[0,10])&&_.neq(h,d))throw[x.failure,"int64_of_string"];return d}function l(e){switch(e){case 0:return 8;case 1:return 16;case 2:return 10}}function c(e){return e>=65&&e<=90||e>=192&&e<=214||e>=216&&e<=222?e+32|0:e}function f(e){var t=e.length;if(t>31)throw[x.invalid_argument,"format_int: format too long"];for(var n=["+","-"," ",0,2,0,0,0,1,-1,"f"],r=0;;){var i=r;if(i>=t)return n;var o=e.charCodeAt(i),a=0;if(o>=69)if(o>=88)if(o>=121)a=1;else switch(o-88|0){case 0:n[4]=1,n[7]=1,r=i+1|0;continue;case 13:case 14:case 15:a=5;break;case 12:case 17:a=4;break;case 23:n[4]=0,r=i+1|0;continue;case 29:n[4]=2,r=i+1|0;continue;case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 16:case 18:case 19:case 20:case 21:case 22:case 24:case 25:case 26:case 27:case 28:case 30:case 31:a=1;break;case 32:n[4]=1,r=i+1|0;continue}else{if(!(o>=72)){n[5]=1,n[7]=1,n[10]=String.fromCharCode(c(o)),r=i+1|0;continue}a=1}else{var s=o-32|0;if(s>25||s<0)a=1;else switch(s){case 3:n[3]=1,r=i+1|0;continue;case 0:case 11:a=2;break;case 13:n[0]="-",r=i+1|0;continue;case 14:n[9]=0;for(var u=i+1|0;function(t){return function(){var n=e.charCodeAt(t)-48|0;return+(n>=0&&n<=9)}}(u)();)n[9]=(g.imul(n[9],10)+e.charCodeAt(u)|0)-48|0,u=u+1|0;r=u;continue;case 1:case 2:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 12:case 15:a=1;break;case 16:n[2]="0",r=i+1|0;continue;case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:a=3}}switch(a){case 1:r=i+1|0;continue;case 2:n[1]=String.fromCharCode(o),r=i+1|0;continue;case 3:n[6]=0;for(var l=i;function(t){return function(){var n=e.charCodeAt(t)-48|0;return+(n>=0&&n<=9)}}(l)();)n[6]=(g.imul(n[6],10)+e.charCodeAt(l)|0)-48|0,l=l+1|0;r=l;continue;case 4:n[5]=1,n[4]=2,r=i+1|0;continue;case 5:n[5]=1,n[10]=String.fromCharCode(o),r=i+1|0;continue}}}function p(e,t){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],f=t.length;s&&(c<0||"-"!==r)&&(f=f+1|0),o&&(a?1===a&&(f=f+2|0):f=f+1|0);var p="";if("+"===n&&" "===i)for(var h=f,d=u-1|0;h<=d;++h)p+=i;if(s&&(c<0?p+="-":"-"!==r&&(p+=r)),o&&0===a&&(p+="0"),o&&1===a&&(p+="0x"),"+"===n&&"0"===i)for(var v=f,m=u-1|0;v<=m;++v)p+=i;if(p=l?p+t.toUpperCase():p+t,"-"===n)for(var y=f,g=u-1|0;y<=g;++y)p+=" ";return p}function h(e,t){if("%d"===e)return String(t);var n=f(e),r=n,i=t,o=i<0?r[5]?(r[8]=-1,-i):i>>>0:i,a=o.toString(l(r[4]));if(r[9]>=0){r[2]=" ";var s=r[9]-a.length|0;s>0&&(a=b.repeat(s,"0")+a)}return p(r,a)}function d(e,t){var n=f(e),r=n[5]&&_.lt(t,[0,0])?(n[8]=-1,_.neg(t)):t,i="";switch(n[4]){case 0:var o=[0,8],a="01234567";if(_.lt(r,[0,0])){var s=_.discard_sign(r),u=_.div_mod(s,o),l=_.add([268435456,0],u[0]),c=u[1];for(i=String.fromCharCode(a.charCodeAt(0|c[1]))+i;_.neq(l,[0,0]);){var h=_.div_mod(l,o);l=h[0],c=h[1],i=String.fromCharCode(a.charCodeAt(0|c[1]))+i}}else{var d=_.div_mod(r,o),v=d[0],m=d[1];for(i=String.fromCharCode(a.charCodeAt(0|m[1]))+i;_.neq(v,[0,0]);){var y=_.div_mod(v,o);v=y[0],m=y[1],i=String.fromCharCode(a.charCodeAt(0|m[1]))+i}}break;case 1:i=_.to_hex(r)+i;break;case 2:var g=[0,10],x="0123456789";if(_.lt(r,[0,0])){var w=_.discard_sign(r),E=_.div_mod(w,g),S=_.div_mod(_.add([0,8],E[1]),g),T=_.add(_.add([214748364,3435973836],E[0]),S[0]),A=S[1];for(i=String.fromCharCode(x.charCodeAt(0|A[1]))+i;_.neq(T,[0,0]);){var O=_.div_mod(T,g);T=O[0],A=O[1],i=String.fromCharCode(x.charCodeAt(0|A[1]))+i}}else{var P=_.div_mod(r,g),C=P[0],k=P[1];for(i=String.fromCharCode(x.charCodeAt(0|k[1]))+i;_.neq(C,[0,0]);){var R=_.div_mod(C,g);C=R[0],k=R[1],i=String.fromCharCode(x.charCodeAt(0|k[1]))+i}}}if(n[9]>=0){n[2]=" ";var M=n[9]-i.length|0;M>0&&(i=b.repeat(M,"0")+i)}return p(n,i)}function v(e,t){var n=f(e),r=n[9]<0?6:n[9],i=t<0?(n[8]=-1,-t):t,o="";if(isNaN(i))o="nan",n[2]=" ";else if(isFinite(i)){var a=n[10];switch(a){case"e":o=i.toExponential(r);var s=o.length;"e"===o[s-3|0]&&(o=o.slice(0,s-1|0)+"0"+o.slice(s-1|0));break;case"f":o=i.toFixed(r);break;case"g":var u=0!==r?r:1;o=i.toExponential(u-1|0);var l=o.indexOf("e"),c=0|Number(o.slice(l+1|0));if(c<-4||i>=1e21||i.toFixed().length>u){for(var h=l-1|0;"0"===o[h];)h=h-1|0;"."===o[h]&&(h=h-1|0),o=o.slice(0,h+1|0)+o.slice(l);var d=o.length;"e"===o[d-3|0]&&(o=o.slice(0,d-1|0)+"0"+o.slice(d-1|0))}else{var v=u;if(c<0)v=v-(c+1|0)|0,o=i.toFixed(v);else for(;function(){return o=i.toFixed(v),+(o.length>(u+1|0))}();)v=v-1|0;if(0!==v){for(var m=o.length-1|0;"0"===o[m];)m=m-1|0;"."===o[m]&&(m=m-1|0),o=o.slice(0,m+1|0)}}}}else o="inf",n[2]=" ";return p(n,o)}function m(e){return y._2(w,e,r)}var y=n(35),g=n(143),_=n(281),b=n(144),x=n(14),w=function(e,t){var n=+e;if(e.length>0&&n===n)return n;if(e=e.replace(/_/g,""),n=+e,e.length>0&&n===n||/^[+-]?nan$/i.test(e))return n;if(/^ *0x[0-9a-f_]+p[+-]?[0-9_]+/i.test(e)){var r=e.indexOf("p");r=-1==r?e.indexOf("P"):r;var i=+e.substring(r+1);return(n=+e.substring(0,r))*Math.pow(2,i)}return/^\+?inf(inity)?$/i.test(e)?1/0:/^-inf(inity)?$/i.test(e)?-1/0:void t("float_of_string")},E=h,S=h,T=s,A=s;t.caml_format_float=v,t.caml_format_int=h,t.caml_nativeint_format=E,t.caml_int32_format=S,t.caml_float_of_string=m,t.caml_int64_format=d,t.caml_int_of_string=s,t.caml_int32_of_string=T,t.caml_int64_of_string=u,t.caml_nativeint_of_string=A},function(e,t,n){"use strict";function r(e){return+(0!==(2147483648&e))}function i(e,t){var n=t[1],i=e[1],o=i+n&4294967295,a=r(i)&&(r(n)||!r(o))||r(n)&&!r(o)?1:0;return[e[0]+t[0]+a&4294967295,o>>>0]}function o(e){return[-1^e[0],(-1^e[1])>>>0]}function a(e,t){return e[0]===t[0]?+(e[1]===t[1]):0}function s(e,t){return null!==t?a(e,t):0}function u(e,t){return void 0!==t?a(e,t):0}function l(e,t){return null==t?0:a(e,t)}function c(e){return a(e,H)?H:i(o(e),q)}function f(e,t){return i(e,c(t))}function p(e,t){if(t){var n=e[1];if(t>=32)return[n<<(t-32|0),0];return[n>>>(32-t|0)|e[0]<<t,n<<t>>>0]}return e}function h(e,t){if(t){var n=e[0],r=t-32|0;if(r){if(r>0){return[0,n>>>r>>>0]}return[n>>>t,(n<<(0|-r)|e[1]>>>t)>>>0]}return[0,n>>>0]}return e}function d(e,t){if(t){var n=e[0];if(t<32){return[n>>t,(n<<(32-t|0)|e[1]>>>t)>>>0]}var r=n>>(t-32|0);return[n>=0?0:-1,r>>>0]}return e}function v(e){return 0!==e[0]||0!==e[1]?0:1}function m(e,t){for(;;){var n,r=t,i=e,o=0,a=i[0],s=0,u=0,l=0;if(0!==a)l=4;else{if(0===i[1])return Y;l=4}if(4===l)if(0!==r[0])u=3;else{if(0===r[1])return Y;u=3}if(3===u&&(-2147483648!==a?s=2:0!==i[1]?s=2:(n=r[1],o=1)),2===s){var f=r[0],p=i[1],h=0;if(-2147483648!==f?h=3:0!==r[1]?h=3:(n=p,o=1),3===h){var d=r[1];if(a<0){if(f<0){t=c(r),e=c(i);continue}return c(m(c(i),r))}if(f<0)return c(m(i,c(r)));var v=a>>>16,y=65535&a,g=p>>>16,_=65535&p,b=f>>>16,x=65535&f,w=d>>>16,E=65535&d,S=0,T=0,A=0,O=_*E;A=(O>>>16)+g*E,T=A>>>16,A=(65535&A)+_*w,T=T+(A>>>16)+y*E,S=T>>>16,T=(65535&T)+g*w,S+=T>>>16,T=(65535&T)+_*x,S+=T>>>16,T&=65535,S=S+(v*E+y*w+g*x+_*b)&65535;return[T|S<<16,(65535&O|(65535&A)<<16)>>>0]}}if(1===o)return 0===(1&n)?Y:H}}function y(e){return[U.caml_int32_bswap(e[1]),U.caml_int32_bswap(e[0])>>>0]}function g(e,t){return[e[0]^t[0],(e[1]^t[1])>>>0]}function _(e,t){return[e[0]|t[0],(e[1]|t[1])>>>0]}function b(e,t){return[e[0]&t[0],(e[1]&t[1])>>>0]}function x(e,t){var n=t[0],r=e[0];return r>n?1:r<n?0:+(e[1]>=t[1])}function w(e,t){return 1-a(e,t)}function E(e,t){return 1-x(e,t)}function S(e,t){return e[0]>t[0]?1:e[0]<t[0]?0:+(e[1]>t[1])}function T(e,t){return 1-S(e,t)}function A(e,t){return x(e,t)?t:e}function O(e,t){return S(e,t)?e:t}function P(e){return 4294967296*e[0]+e[1]}function C(e){return isNaN(e)||!isFinite(e)?Y:e<=J?H:e+1>=Q?X:e<0?c(C(-e)):[e/K|0,(e%K|0)>>>0]}function k(e,t){for(;;){var n=t,r=e,o=r[0],s=0,u=0;if(0!==n[0])u=2;else{if(0===n[1])throw W.division_by_zero;u=2}if(2===u)if(-2147483648!==o)if(0!==o)s=1;else{if(0===r[1])return Y;s=1}else if(0!==r[1])s=1;else{if(a(n,q)||a(n,Z))return r;if(a(n,H))return q;var l=n[0],f=d(r,1),h=p(k(f,n),1),y=0;if(0!==h[0])y=3;else{if(0===h[1])return l<0?q:c(q);y=3}if(3===y){var g=m(n,h),_=i(r,c(g));return i(h,k(_,n))}}if(1===s){var b=n[0],w=0;if(-2147483648!==b)w=2;else{if(0===n[1])return Y;w=2}if(2===w){if(o<0){if(b<0){t=c(n),e=c(r);continue}return c(k(c(r),n))}if(b<0)return c(k(r,c(n)));for(var E=Y,T=r;x(T,n);){for(var A=G.caml_float_max(1,Math.floor(P(T)/P(n))),O=Math.ceil(Math.log(A)/Math.LN2),R=O<=48?1:Math.pow(2,O-48),M=C(A),I=m(M,n);I[0]<0||S(I,T);)A-=R,M=C(A),I=m(M,n);v(M)&&(M=q),E=i(E,M),T=i(T,c(I))}return E}}}}function R(e,t){return i(e,c(m(k(e,t),t)))}function M(e,t){var n=k(e,t);return[n,i(e,c(m(n,t)))]}function I(e,t){var n=G.caml_nativeint_compare(e[0],t[0]);return n||G.caml_nativeint_compare(e[1],t[1])}function L(e){return[e<0?-1:0,e>>>0]}function D(e){return 0|e[1]}function N(e){var t=function(e){return(e>>>0).toString(16)},n=e[0],r=e[1],i=0;if(0!==n)i=1;else{if(0===r)return"0";i=1}if(1===i){if(0!==r){if(0!==n){var o=t(e[1]),a=8-o.length|0;return a<=0?t(e[0])+o:t(e[0])+(V.repeat(a,"0")+o)}return t(e[1])}return t(e[0])+"00000000"}}function F(e){return[2147483647&e[0],e[1]]}function j(e){var t=new Int32Array([e[1],e[0]]);return new Float64Array(t.buffer)[0]}function B(e){var t=new Float64Array([e]),n=new Int32Array(t.buffer);return[n[1],n[0]>>>0]}function z(e,t){return[e.charCodeAt(t+4|0)<<32|e.charCodeAt(t+5|0)<<40|e.charCodeAt(t+6|0)<<48|e.charCodeAt(t+7|0)<<56,(e.charCodeAt(t)|e.charCodeAt(t+1|0)<<8|e.charCodeAt(t+2|0)<<16|e.charCodeAt(t+3|0)<<24)>>>0]}var U=n(143),V=n(144),G=n(141),W=n(14),H=[-2147483648,0],X=[2147483647,1],q=[0,1],Y=[0,0],Z=[-1,4294967295],K=Math.pow(2,32),Q=Math.pow(2,63),J=-Math.pow(2,63);t.min_int=H,t.max_int=X,t.one=q,t.zero=Y,t.not=o,t.of_int32=L,t.to_int32=D,t.add=i,t.neg=c,t.sub=f,t.lsl_=p,t.lsr_=h,t.asr_=d,t.is_zero=v,t.mul=m,t.xor=g,t.or_=_,t.and_=b,t.swap=y,t.ge=x,t.eq=a,t.neq=w,t.lt=E,t.gt=S,t.le=T,t.equal_null=s,t.equal_undefined=u,t.equal_nullable=l,t.min=A,t.max=O,t.to_float=P,t.of_float=C,t.div=k,t.mod_=R,t.div_mod=M,t.compare=I,t.to_hex=N,t.discard_sign=F,t.float_of_bits=j,t.bits_of_float=B,t.get64=z},function(e,t,n){"use strict";function r(e){return String.fromCharCode(e)}function i(e,t){if(t>=e.length||t<0)throw[m.invalid_argument,"index out of bounds"];return e.charCodeAt(t)}function o(e){if(e<0)throw[m.invalid_argument,"String.create"];return new Array(e)}function a(e,t,n,r){if(n>0){for(var i=t,o=(n+t|0)-1|0;i<=o;++i)e[i]=r;return 0}return 0}function s(e,t,n,r,i){if(i>0){var o=e.length-t|0;if(i<=o){for(var a=0,s=i-1|0;a<=s;++a)n[r+a|0]=e.charCodeAt(t+a|0);return 0}for(var u=0,l=o-1|0;u<=l;++u)n[r+u|0]=e.charCodeAt(t+u|0);for(var c=o,f=i-1|0;c<=f;++c)n[r+c|0]=0;return 0}return 0}function u(e,t,n,r,i){if(i>0){if(e===n){var o=e,a=t,s=r,u=i;if(a<s){for(var l=(o.length-s|0)-1|0,c=u-1|0,f=l>c?c:l,p=f;p>=0;--p)o[s+p|0]=o[a+p|0];return 0}if(a>s){for(var h=(o.length-a|0)-1|0,d=u-1|0,v=h>d?d:h,m=0;m<=v;++m)o[s+m|0]=o[a+m|0];return 0}return 0}var y=e.length-t|0;if(i<=y){for(var g=0,_=i-1|0;g<=_;++g)n[r+g|0]=e[t+g|0];return 0}for(var b=0,x=y-1|0;b<=x;++b)n[r+b|0]=e[t+b|0];for(var w=y,E=i-1|0;w<=E;++w)n[r+w|0]=0;return 0}return 0}function l(e){for(var t=e.length,n=new Array(t),r=0,i=t-1|0;r<=i;++r)n[r]=e.charCodeAt(r);return n}function c(e){var t=e,n=e.length,r="",i=n;if(n<=4096&&n===t.length)return String.fromCharCode.apply(null,t);for(var o=0;i>0;){var a=i<1024?i:1024,s=new Array(a);u(t,o,s,0,a),r+=String.fromCharCode.apply(null,s),i=i-a|0,o=o+a|0}return r}function f(e){for(var t=e.length,n=new Array(t),r=0,i=t-1|0;r<=i;++r)n[r]=e[r];return c(n)}function p(e){return e>31?+(e<127):0}function h(e,t){return e.charCodeAt(t)+(e.charCodeAt(t+1|0)<<8)|0}function d(e,t){return((e.charCodeAt(t)+(e.charCodeAt(t+1|0)<<8)|0)+(e.charCodeAt(t+2|0)<<16)|0)+(e.charCodeAt(t+3|0)<<24)|0}function v(e,t){if(t<0||t>=e.length)throw[m.invalid_argument,"index out of bounds"];return e.charCodeAt(t)}var m=n(14);t.bytes_of_string=l,t.bytes_to_string=c,t.caml_is_printable=p,t.caml_string_of_char_array=f,t.caml_string_get=i,t.caml_create_string=o,t.caml_fill_string=a,t.caml_blit_string=s,t.caml_blit_bytes=u,t.caml_string_get16=h,t.caml_string_get32=d,t.string_of_char=r,t.get=v},function(e,t,n){"use strict";var r=function(e){throw new Error(e)};t.not_implemented=r},function(e,t,n){"use strict";function r(e){if("number"===typeof e)return 0;switch(0|e.tag){case 0:return a.__(0,[r(e[0])]);case 1:return a.__(1,[r(e[0])]);case 2:return a.__(2,[r(e[0])]);case 3:return a.__(3,[r(e[0])]);case 4:return a.__(4,[r(e[0])]);case 5:return a.__(5,[r(e[0])]);case 6:return a.__(6,[r(e[0])]);case 7:return a.__(7,[r(e[0])]);case 8:return a.__(8,[e[0],r(e[1])]);case 9:var t=e[0];return a.__(9,[t,t,r(e[2])]);case 10:return a.__(10,[r(e[0])]);case 11:return a.__(11,[r(e[0])]);case 12:return a.__(12,[r(e[0])]);case 13:return a.__(13,[r(e[0])]);case 14:return a.__(14,[r(e[0])])}}function i(e,t){if("number"===typeof e)return t;switch(0|e.tag){case 0:return a.__(0,[i(e[0],t)]);case 1:return a.__(1,[i(e[0],t)]);case 2:return a.__(2,[i(e[0],t)]);case 3:return a.__(3,[i(e[0],t)]);case 4:return a.__(4,[i(e[0],t)]);case 5:return a.__(5,[i(e[0],t)]);case 6:return a.__(6,[i(e[0],t)]);case 7:return a.__(7,[i(e[0],t)]);case 8:return a.__(8,[e[0],i(e[1],t)]);case 9:return a.__(9,[e[0],e[1],i(e[2],t)]);case 10:return a.__(10,[i(e[0],t)]);case 11:return a.__(11,[i(e[0],t)]);case 12:return a.__(12,[i(e[0],t)]);case 13:return a.__(13,[i(e[0],t)]);case 14:return a.__(14,[i(e[0],t)])}}function o(e,t){if("number"===typeof e)return t;switch(0|e.tag){case 0:return a.__(0,[o(e[0],t)]);case 1:return a.__(1,[o(e[0],t)]);case 2:return a.__(2,[e[0],o(e[1],t)]);case 3:return a.__(3,[e[0],o(e[1],t)]);case 4:return a.__(4,[e[0],e[1],e[2],o(e[3],t)]);case 5:return a.__(5,[e[0],e[1],e[2],o(e[3],t)]);case 6:return a.__(6,[e[0],e[1],e[2],o(e[3],t)]);case 7:return a.__(7,[e[0],e[1],e[2],o(e[3],t)]);case 8:return a.__(8,[e[0],e[1],e[2],o(e[3],t)]);case 9:return a.__(9,[o(e[0],t)]);case 10:return a.__(10,[o(e[0],t)]);case 11:return a.__(11,[e[0],o(e[1],t)]);case 12:return a.__(12,[e[0],o(e[1],t)]);case 13:return a.__(13,[e[0],e[1],o(e[2],t)]);case 14:return a.__(14,[e[0],e[1],o(e[2],t)]);case 15:return a.__(15,[o(e[0],t)]);case 16:return a.__(16,[o(e[0],t)]);case 17:return a.__(17,[e[0],o(e[1],t)]);case 18:return a.__(18,[e[0],o(e[1],t)]);case 19:return a.__(19,[o(e[0],t)]);case 20:return a.__(20,[e[0],e[1],o(e[2],t)]);case 21:return a.__(21,[e[0],o(e[1],t)]);case 22:return a.__(22,[o(e[0],t)]);case 23:return a.__(23,[e[0],o(e[1],t)]);case 24:return a.__(24,[e[0],e[1],o(e[2],t)])}}var a=n(96);t.concat_fmtty=i,t.erase_rel=r,t.concat_fmt=o},function(e,t,n){"use strict";function r(e){return f.isCamlExceptionOrOpenVariant(e)?e:[p,e]}function i(e){throw new Error(e)}function o(e){throw new EvalError(e)}function a(e){throw new RangeError(e)}function s(e){throw new ReferenceError(e)}function u(e){throw new SyntaxError(e)}function l(e){throw new TypeError(e)}function c(e){throw new URIError(e)}var f=n(97),p=f.create("Js_exn.Error");t.$$Error=p,t.internalToOCamlException=r,t.raiseError=i,t.raiseEvalError=o,t.raiseRangeError=a,t.raiseReferenceError=s,t.raiseSyntaxError=u,t.raiseTypeError=l,t.raiseUriError=c},function(e,t,n){"use strict";function r(e,t){return Object.assign(e,t)}function i(e){return e}var o=n(0),a={},s="mixins";var u=function(e,t,n){function o(e,t){y.hasOwnProperty(t)&&y[t];x.hasOwnProperty(t)}function u(e,t){if(t){var n=e.prototype,r=n.__reactAutoBindPairs;t.hasOwnProperty(s)&&g.mixins(e,t.mixins);for(var i in t)if(t.hasOwnProperty(i)&&i!==s){var a=t[i],u=n.hasOwnProperty(i);if(o(u,i),g.hasOwnProperty(i))g[i](e,a);else{var l=y.hasOwnProperty(i),c="function"===typeof a,h=c&&!l&&!u&&!1!==t.autobind;if(h)r.push(i,a),n[i]=a;else if(u){var d=y[i];"DEFINE_MANY_MERGED"===d?n[i]=f(n[i],a):"DEFINE_MANY"===d&&(n[i]=p(n[i],a))}else n[i]=a}}}}function l(e,t){if(t)for(var n in t){var r=t[n];if(t.hasOwnProperty(n)){e[n]=r}}}function c(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function f(e,t){return function(){var n=e.apply(this,arguments),r=t.apply(this,arguments);if(null==n)return r;if(null==r)return n;var i={};return c(i,n),c(i,r),i}}function p(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function h(e,t){return t.bind(e)}function d(e){for(var t=e.__reactAutoBindPairs,n=0;n<t.length;n+=2){var r=t[n],i=t[n+1];e[r]=h(e,i)}}function v(e){var t=i(function(e,t,r){this.__reactAutoBindPairs.length&&d(this),this.props=e,this.context=t,this.refs=a,this.updater=r||n,this.state=null;var i=this.getInitialState?this.getInitialState():null;this.state=i});t.prototype=new w,t.prototype.constructor=t,t.prototype.__reactAutoBindPairs=[],m.forEach(u.bind(null,t)),u(t,_),u(t,e),u(t,b),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps());for(var r in y)t.prototype[r]||(t.prototype[r]=null);return t}var m=[],y={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},g={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)u(e,t[n])},childContextTypes:function(e,t){e.childContextTypes=r({},e.childContextTypes)},contextTypes:function(e,t){e.contextTypes=r({},e.contextTypes)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=f(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=r({},e.propTypes)},statics:function(e,t){l(e,t)},autobind:function(){}},_={componentDidMount:function(){this.__isMounted=!0}},b={componentWillUnmount:function(){this.__isMounted=!1}},x={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e,t)},isMounted:function(){return!!this.__isMounted}},w=function(){};return r(w.prototype,e.prototype),v},l=(new o.Component).updater,c=u(o.Component,o.isValidElement,l);t._assign=r,t.emptyObject=a,t.factory=u,t.reactNoopUpdateQueue=l,t.createClass=c},function(e,t,n){"use strict";function r(){if("serviceWorker"in navigator){if(new URL("/isotransit",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="/isotransit/service-worker.js";s?o(e):i(e)})}}function i(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}function o(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):i(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}function a(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,t.unregister=a;var s=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))},function(e,t,n){"use strict";function r(e,t,n){return 0!==+(e>t)?0:[e,r(e+n|0,t,n)]}function i(e,t,n){return u.of_list(s.map(function(e){return{value:e,label:d.string_of_int(e)+" minutes"}},r(e,t,n)))}function o(e,t){var n,r=t?t[0]:e[0],i=e[3],o=2===i||1===i?0:-18e6,a=e[3],u=e[3];switch(u){case 1:case 2:n="driving";break;case 0:case 3:n="transit"}var l,c=e[3];switch(c){case 1:case 2:l="timeWithTraffic";break;case 0:case 3:l="time"}var p={waypoint:d.string_of_float(r[0])+","+d.string_of_float(r[1]),maxTime:2!==a?e[4]:e[5],timeUnit:"minute",dateTime:new Date(e[1]+o).toUTCString(),travelMode:n,optimize:l};return f.post("https://dev.virtualearth.net/REST/v1/Routes/Isochrones?key=AtVkKGv4bwzxrZD4WGdKDwPH3We4IJfA_TrzRWJbRMgrHxtT0nSqPFL4JN9TFEID",p).then(function(e){return Promise.resolve(s.nth(s.nth(e.data.resourceSets,0).resources,0).polygons)}).catch(function(){return Promise.resolve(0)})}function a(){var e=w.slice();return e[9]=function(e){var t=e[2][3];return p.createElement("div",{className:"app-container"},p.createElement("div",{className:"options-control"},p.createElement("div",{className:"search-location"},v.element(0,0,y.make(function(t){return c._1(e[4],l.__(0,[[t.location.lat,t.location.lng]]))},[]))),p.createElement("h3",void 0,"Departure Time"),v.element(0,0,_.make(e[2][1],function(t){return c._1(e[4],l.__(2,[t]))},[])),p.createElement("h3",void 0,"Transportation Mode"),v.element(0,0,g.make(0,function(t){return c._1(e[4],l.__(1,[t.value]))},b,e[2][3],[])),p.createElement("h3",void 0,"Total Trip Duration"),v.element(0,0,g.make(0,function(t){return c._1(e[4],l.__(3,[t.value]))},i(5,60,5),e[2][4],[])),p.createElement("h3",void 0,"Max Duration of Ridesharing"),v.element(0,0,g.make([2!==t?1:0],function(t){return c._1(e[4],l.__(4,[t.value]))},i(1,15,1),e[2][5],[])),p.createElement("button",{onClick:function(){var t=e[2][3];return Promise.all(t>=2?u.map(function(t){return o(e[2],[[h.caml_array_get(t,1),h.caml_array_get(t,0)]])},x):[o(e[2],0)]).then(function(t){return console.log(t),Promise.resolve(c._1(e[4],l.__(5,[t.reduce(function(e,t){return t?(e.push(t[0]),e):e},[])])))}).catch(function(e){return Promise.resolve((console.log(e),0))}),0}},p.createElement("h2",void 0,"Generate Isochrone"))),p.createElement("div",{className:"map"},v.element(0,0,m.make({lat:e[2][0][0],lng:e[2][0][1]},e[2][7],[]))))},e[10]=function(){return[[43.4684405,-80.5418298],Date.now(),1,0,20,10,0,[]]},e[12]=function(e,t){switch(0|e.tag){case 0:var n=t.slice();return l.__(0,[(n[0]=e[0],n)]);case 1:var r=t.slice();return l.__(0,[(r[3]=e[0],r)]);case 2:var i=t.slice();return l.__(0,[(i[1]=e[0],i)]);case 3:var o=t.slice();return l.__(0,[(o[4]=e[0],o)]);case 4:var a=t.slice();return l.__(0,[(a[5]=e[0],a)]);case 5:var s=t.slice();return l.__(0,[(s[7]=u.append(t[7],e[0]),s)])}},e}var s=n(140),u=n(145),l=n(96),c=n(35),f=n(289),p=n(0),h=n(68),d=n(142),v=n(44),m=n(308),y=n(535),g=n(544),_=n(557);n(611);var b=[{value:0,label:"Transit"},{value:1,label:"Driving"},{value:2,label:"ION LRT + Rideshare"},{value:3,label:" ION LRT + Transit"}],x=[[-80.52945144,43.49813693],[-80.54321203,43.49721126],[-80.54515806,43.48162357],[-80.5411648,43.4732381],[-80.53440443,43.46885718],[-80.52298867,43.46414138],[-80.52336904,43.462144],[-80.51836079,43.45983591],[-80.49913146,43.45317562],[-80.48734599,43.44964771],[-80.49370802,43.4501848],[-80.4894232,43.448626],[-80.4753731,43.44240342],[-80.48359184,43.4462947],[-80.47787648,43.43358158],[-80.44180343,43.42232678],[-80.49080288,43.45192775],[-80.46308195,43.42282486],[-80.51205622,43.45728346]],w=v.reducerComponent("App");t.selectOptions=b,t.makeTimeIntervals=r,t.selectTimeIntervalOptions=i,t.ionStops=x,t.getIsochrone=o,t.component=w,t.make=a},function(e,t,n){e.exports=n(290)},function(e,t,n){"use strict";function r(e){var t=new a(e),n=o(a.prototype.request,t);return i.extend(n,a.prototype,t),i.extend(n,t),n}var i=n(16),o=n(146),a=n(292),s=n(98),u=r(s);u.Axios=a,u.create=function(e){return r(i.merge(s,e))},u.Cancel=n(150),u.CancelToken=n(306),u.isCancel=n(149),u.all=function(e){return Promise.all(e)},u.spread=n(307),e.exports=u,e.exports.default=u},function(e,t){function n(e){return!!e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function r(e){return"function"===typeof e.readFloatLE&&"function"===typeof e.slice&&n(e.slice(0,0))}e.exports=function(e){return null!=e&&(n(e)||r(e)||!!e._isBuffer)}},function(e,t,n){"use strict";function r(e){this.defaults=e,this.interceptors={request:new a,response:new a}}var i=n(98),o=n(16),a=n(301),s=n(302);r.prototype.request=function(e){"string"===typeof e&&(e=o.merge({url:arguments[0]},arguments[1])),e=o.merge(i,{method:"get"},this.defaults,e),e.method=e.method.toLowerCase();var t=[s,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},o.forEach(["delete","get","head","options"],function(e){r.prototype[e]=function(t,n){return this.request(o.merge(n||{},{method:e,url:t}))}}),o.forEach(["post","put","patch"],function(e){r.prototype[e]=function(t,n,r){return this.request(o.merge(r||{},{method:e,url:t,data:n}))}}),e.exports=r},function(e,t,n){"use strict";var r=n(16);e.exports=function(e,t){r.forEach(e,function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])})}},function(e,t,n){"use strict";var r=n(148);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e}},function(e,t,n){"use strict";function r(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var i=n(16);e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(i.isURLSearchParams(t))o=t.toString();else{var a=[];i.forEach(t,function(e,t){null!==e&&"undefined"!==typeof e&&(i.isArray(e)?t+="[]":e=[e],i.forEach(e,function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),a.push(r(t)+"="+r(e))}))}),o=a.join("&")}return o&&(e+=(-1===e.indexOf("?")?"?":"&")+o),e}},function(e,t,n){"use strict";var r=n(16),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,a={};return e?(r.forEach(e.split("\n"),function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(a[t]&&i.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}}),a):a}},function(e,t,n){"use strict";var r=n(16);e.exports=r.isStandardBrowserEnv()?function(){function e(e){var t=e;return n&&(i.setAttribute("href",t),t=i.href),i.setAttribute("href",t),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}var t,n=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");return t=e(window.location.href),function(n){var i=r.isString(n)?e(n):n;return i.protocol===t.protocol&&i.host===t.host}}():function(){return function(){return!0}}()},function(e,t,n){"use strict";function r(){this.message="String contains an invalid character"}function i(e){for(var t,n,i=String(e),a="",s=0,u=o;i.charAt(0|s)||(u="=",s%1);a+=u.charAt(63&t>>8-s%1*8)){if((n=i.charCodeAt(s+=.75))>255)throw new r;t=t<<8|n}return a}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.prototype=new Error,r.prototype.code=5,r.prototype.name="InvalidCharacterError",e.exports=i},function(e,t,n){"use strict";var r=n(16);e.exports=r.isStandardBrowserEnv()?function(){return{write:function(e,t,n,i,o,a){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(e,t,n){"use strict";function r(){this.handlers=[]}var i=n(16);r.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){i.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=r},function(e,t,n){"use strict";function r(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var i=n(16),o=n(303),a=n(149),s=n(98),u=n(304),l=n(305);e.exports=function(e){return r(e),e.baseURL&&!u(e.url)&&(e.url=l(e.baseURL,e.url)),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),i.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||s.adapter)(e).then(function(t){return r(e),t.data=o(t.data,t.headers,e.transformResponse),t},function(t){return a(t)||(r(e),t&&t.response&&(t.response.data=o(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,n){"use strict";var r=n(16);e.exports=function(e,t,n){return r.forEach(n,function(n){e=n(e,t)}),e}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";function r(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new i(e),t(n.reason))})}var i=n(150);r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var e;return{token:new r(function(t){e=t}),cancel:e}},e.exports=r},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";function r(e,t,n){return i.wrapJsForReason(o.default,{selectedLocation:e,layers:t},n)}var i=n(44),o=n(309);t.make=r},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(310),u=n.n(s),l=n(0),c=n.n(l),f=n(311),p=n(399),h=n(531),d=(n.n(h),n(532)),v=(n.n(d),n(533)),m=n.n(v),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=n(534),_=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={viewport:{width:window.innerWidth,height:window.innerHeight,zoom:12,pitch:0,bearing:0},settings:{dragPan:!0,minZoom:0,maxZoom:20,minPitch:0,maxPitch:85}},e}return a(t,e),y(t,[{key:"componentWillMount",value:function(){this.selectedRoutes=new Set,this.resizeMap(),window.addEventListener("resize",this.resizeMap.bind(this))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resizeMap.bind(this))}},{key:"resizeMap",value:function(){this.setState({viewport:Object.assign(this.state.viewport,{width:window.innerWidth,height:window.innerHeight})})}},{key:"render",value:function(){var e=this,t=this.props,n=t.selectedLocation,i=t.layers,o=function(t){n.lat=t.latitude,n.lng=t.longitude,e.setState({viewport:t})},a=this.state.viewport;i=u.a.flatten(i),i=i.map(function(e){return[e.coordinates]}),i=i.map(function(e){return e.map(function(e){return e.map(function(e){return e.map(function(e){return[e[1],e[0]]})})})}),console.log(i);var s={marker:{x:0,y:0,width:128,height:128,mask:!0}};console.log(m.a);var l=new p.a({id:"ion-stops-layer",data:m.a.map(function(e){return{position:[e[0],e[1]],icon:"marker",size:72,color:[20,50,250]}}),iconAtlas:g,iconMapping:s});return console.log(l),console.log(n),c.a.createElement(f.a,Object.assign({},a,{longitude:n.lng,latitude:n.lat,mapStyle:h.MAP_STYLE,mapboxApiAccessToken:h.MAPBOX_ACCESS_TOKEN,onViewportChange:o}),c.a.createElement(p.c,Object.assign({longitude:n.lng,latitude:n.lat},a,{layers:[].concat(r(i.length?[new p.b({id:"polygon-layer",data:i.map(function(e){return{polygon:e[0][0],fillColor:[12,200,190]}}),filled:!0,stroked:!1})]:[]),[l])})))}}]),t}(l.Component);t.default=_},function(e,t,n){(function(e,r){var i;(function(){function o(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function a(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function s(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function u(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function l(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function c(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function f(e,t){return!!(null==e?0:e.length)&&w(e,t,0)>-1}function p(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function h(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function d(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function v(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function m(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function y(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function g(e){return e.split("")}function _(e){return e.match(jt)||[]}function b(e,t,n){var r;return n(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}function x(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function w(e,t,n){return t===t?K(e,t,n):x(e,S,n)}function E(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function S(e){return e!==e}function T(e,t){var n=null==e?0:e.length;return n?k(e,t)/n:Le}function A(e){return function(t){return null==t?re:t[e]}}function O(e){return function(t){return null==e?re:e[t]}}function P(e,t,n,r,i){return i(e,function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)}),n}function C(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function k(e,t){for(var n,r=-1,i=e.length;++r<i;){var o=t(e[r]);o!==re&&(n=n===re?o:n+o)}return n}function R(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function M(e,t){return h(t,function(t){return[t,e[t]]})}function I(e){return function(t){return e(t)}}function L(e,t){return h(t,function(t){return e[t]})}function D(e,t){return e.has(t)}function N(e,t){for(var n=-1,r=e.length;++n<r&&w(t,e[n],0)>-1;);return n}function F(e,t){for(var n=e.length;n--&&w(t,e[n],0)>-1;);return n}function j(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}function B(e){return"\\"+An[e]}function z(e,t){return null==e?re:e[t]}function U(e){return yn.test(e)}function V(e){return gn.test(e)}function G(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function W(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function H(e,t){return function(n){return e(t(n))}}function X(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n];a!==t&&a!==le||(e[n]=le,o[i++]=n)}return o}function q(e,t){return"__proto__"==t?re:e[t]}function Y(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function Z(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function K(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}function Q(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}function J(e){return U(e)?ee(e):Gn(e)}function $(e){return U(e)?te(e):g(e)}function ee(e){for(var t=vn.lastIndex=0;vn.test(e);)++t;return t}function te(e){return e.match(vn)||[]}function ne(e){return e.match(mn)||[]}var re,ie=200,oe="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",ae="Expected a function",se="__lodash_hash_undefined__",ue=500,le="__lodash_placeholder__",ce=1,fe=2,pe=4,he=1,de=2,ve=1,me=2,ye=4,ge=8,_e=16,be=32,xe=64,we=128,Ee=256,Se=512,Te=30,Ae="...",Oe=800,Pe=16,Ce=1,ke=2,Re=1/0,Me=9007199254740991,Ie=1.7976931348623157e308,Le=NaN,De=4294967295,Ne=De-1,Fe=De>>>1,je=[["ary",we],["bind",ve],["bindKey",me],["curry",ge],["curryRight",_e],["flip",Se],["partial",be],["partialRight",xe],["rearg",Ee]],Be="[object Arguments]",ze="[object Array]",Ue="[object AsyncFunction]",Ve="[object Boolean]",Ge="[object Date]",We="[object DOMException]",He="[object Error]",Xe="[object Function]",qe="[object GeneratorFunction]",Ye="[object Map]",Ze="[object Number]",Ke="[object Null]",Qe="[object Object]",Je="[object Proxy]",$e="[object RegExp]",et="[object Set]",tt="[object String]",nt="[object Symbol]",rt="[object Undefined]",it="[object WeakMap]",ot="[object WeakSet]",at="[object ArrayBuffer]",st="[object DataView]",ut="[object Float32Array]",lt="[object Float64Array]",ct="[object Int8Array]",ft="[object Int16Array]",pt="[object Int32Array]",ht="[object Uint8Array]",dt="[object Uint8ClampedArray]",vt="[object Uint16Array]",mt="[object Uint32Array]",yt=/\b__p \+= '';/g,gt=/\b(__p \+=) '' \+/g,_t=/(__e\(.*?\)|\b__t\)) \+\n'';/g,bt=/&(?:amp|lt|gt|quot|#39);/g,xt=/[&<>"']/g,wt=RegExp(bt.source),Et=RegExp(xt.source),St=/<%-([\s\S]+?)%>/g,Tt=/<%([\s\S]+?)%>/g,At=/<%=([\s\S]+?)%>/g,Ot=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Pt=/^\w*$/,Ct=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,kt=/[\\^$.*+?()[\]{}|]/g,Rt=RegExp(kt.source),Mt=/^\s+|\s+$/g,It=/^\s+/,Lt=/\s+$/,Dt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Nt=/\{\n\/\* \[wrapped with (.+)\] \*/,Ft=/,? & /,jt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Bt=/\\(\\)?/g,zt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ut=/\w*$/,Vt=/^[-+]0x[0-9a-f]+$/i,Gt=/^0b[01]+$/i,Wt=/^\[object .+?Constructor\]$/,Ht=/^0o[0-7]+$/i,Xt=/^(?:0|[1-9]\d*)$/,qt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Yt=/($^)/,Zt=/['\n\r\u2028\u2029\\]/g,Kt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Qt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Jt="["+Qt+"]",$t="["+Kt+"]",en="[a-z\\xdf-\\xf6\\xf8-\\xff]",tn="[^\\ud800-\\udfff"+Qt+"\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",nn="\\ud83c[\\udffb-\\udfff]",rn="(?:\\ud83c[\\udde6-\\uddff]){2}",on="[\\ud800-\\udbff][\\udc00-\\udfff]",an="[A-Z\\xc0-\\xd6\\xd8-\\xde]",sn="(?:"+en+"|"+tn+")",un="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",ln="(?:\\u200d(?:"+["[^\\ud800-\\udfff]",rn,on].join("|")+")[\\ufe0e\\ufe0f]?"+un+")*",cn="[\\ufe0e\\ufe0f]?"+un+ln,fn="(?:"+["[\\u2700-\\u27bf]",rn,on].join("|")+")"+cn,pn="(?:"+["[^\\ud800-\\udfff]"+$t+"?",$t,rn,on,"[\\ud800-\\udfff]"].join("|")+")",hn=RegExp("['\u2019]","g"),dn=RegExp($t,"g"),vn=RegExp(nn+"(?="+nn+")|"+pn+cn,"g"),mn=RegExp([an+"?"+en+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?="+[Jt,an,"$"].join("|")+")","(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?="+[Jt,an+sn,"$"].join("|")+")",an+"?"+sn+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?",an+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",fn].join("|"),"g"),yn=RegExp("[\\u200d\\ud800-\\udfff"+Kt+"\\ufe0e\\ufe0f]"),gn=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,_n=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],bn=-1,xn={};xn[ut]=xn[lt]=xn[ct]=xn[ft]=xn[pt]=xn[ht]=xn[dt]=xn[vt]=xn[mt]=!0,xn[Be]=xn[ze]=xn[at]=xn[Ve]=xn[st]=xn[Ge]=xn[He]=xn[Xe]=xn[Ye]=xn[Ze]=xn[Qe]=xn[$e]=xn[et]=xn[tt]=xn[it]=!1;var wn={};wn[Be]=wn[ze]=wn[at]=wn[st]=wn[Ve]=wn[Ge]=wn[ut]=wn[lt]=wn[ct]=wn[ft]=wn[pt]=wn[Ye]=wn[Ze]=wn[Qe]=wn[$e]=wn[et]=wn[tt]=wn[nt]=wn[ht]=wn[dt]=wn[vt]=wn[mt]=!0,wn[He]=wn[Xe]=wn[it]=!1;var En={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"},Sn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Tn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},An={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},On=parseFloat,Pn=parseInt,Cn="object"==typeof e&&e&&e.Object===Object&&e,kn="object"==typeof self&&self&&self.Object===Object&&self,Rn=Cn||kn||Function("return this")(),Mn="object"==typeof t&&t&&!t.nodeType&&t,In=Mn&&"object"==typeof r&&r&&!r.nodeType&&r,Ln=In&&In.exports===Mn,Dn=Ln&&Cn.process,Nn=function(){try{return Dn&&Dn.binding&&Dn.binding("util")}catch(e){}}(),Fn=Nn&&Nn.isArrayBuffer,jn=Nn&&Nn.isDate,Bn=Nn&&Nn.isMap,zn=Nn&&Nn.isRegExp,Un=Nn&&Nn.isSet,Vn=Nn&&Nn.isTypedArray,Gn=A("length"),Wn=O(En),Hn=O(Sn),Xn=O(Tn),qn=function e(t){function n(e){if(tu(e)&&!hp(e)&&!(e instanceof g)){if(e instanceof i)return e;if(pc.call(e,"__wrapped__"))return Jo(e)}return new i(e)}function r(){}function i(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=re}function g(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=De,this.__views__=[]}function O(){var e=new g(this.__wrapped__);return e.__actions__=Ii(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ii(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ii(this.__views__),e}function K(){if(this.__filtered__){var e=new g(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function ee(){var e=this.__wrapped__.value(),t=this.__dir__,n=hp(e),r=t<0,i=n?e.length:0,o=Eo(0,i,this.__views__),a=o.start,s=o.end,u=s-a,l=r?s:a-1,c=this.__iteratees__,f=c.length,p=0,h=Vc(u,this.__takeCount__);if(!n||!r&&i==u&&h==u)return mi(e,this.__actions__);var d=[];e:for(;u--&&p<h;){l+=t;for(var v=-1,m=e[l];++v<f;){var y=c[v],g=y.iteratee,_=y.type,b=g(m);if(_==ke)m=b;else if(!b){if(_==Ce)continue e;break e}}d[p++]=m}return d}function te(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function jt(){this.__data__=Jc?Jc(null):{},this.size=0}function Kt(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function Qt(e){var t=this.__data__;if(Jc){var n=t[e];return n===se?re:n}return pc.call(t,e)?t[e]:re}function Jt(e){var t=this.__data__;return Jc?t[e]!==re:pc.call(t,e)}function $t(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Jc&&t===re?se:t,this}function en(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function tn(){this.__data__=[],this.size=0}function nn(e){var t=this.__data__,n=Yn(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ac.call(t,n,1),--this.size,!0)}function rn(e){var t=this.__data__,n=Yn(t,e);return n<0?re:t[n][1]}function on(e){return Yn(this.__data__,e)>-1}function an(e,t){var n=this.__data__,r=Yn(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function sn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function un(){this.size=0,this.__data__={hash:new te,map:new(Yc||en),string:new te}}function ln(e){var t=_o(this,e).delete(e);return this.size-=t?1:0,t}function cn(e){return _o(this,e).get(e)}function fn(e){return _o(this,e).has(e)}function pn(e,t){var n=_o(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function vn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new sn;++t<n;)this.add(e[t])}function mn(e){return this.__data__.set(e,se),this}function yn(e){return this.__data__.has(e)}function gn(e){var t=this.__data__=new en(e);this.size=t.size}function En(){this.__data__=new en,this.size=0}function Sn(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function Tn(e){return this.__data__.get(e)}function An(e){return this.__data__.has(e)}function Cn(e,t){var n=this.__data__;if(n instanceof en){var r=n.__data__;if(!Yc||r.length<ie-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new sn(r)}return n.set(e,t),this.size=n.size,this}function kn(e,t){var n=hp(e),r=!n&&pp(e),i=!n&&!r&&vp(e),o=!n&&!r&&!i&&bp(e),a=n||r||i||o,s=a?R(e.length,oc):[],u=s.length;for(var l in e)!t&&!pc.call(e,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Ro(l,u))||s.push(l);return s}function Mn(e){var t=e.length;return t?e[Qr(0,t-1)]:re}function In(e,t){return Yo(Ii(e),er(t,0,e.length))}function Dn(e){return Yo(Ii(e))}function Nn(e,t,n){(n===re||Us(e[t],n))&&(n!==re||t in e)||Jn(e,t,n)}function Gn(e,t,n){var r=e[t];pc.call(e,t)&&Us(r,n)&&(n!==re||t in e)||Jn(e,t,n)}function Yn(e,t){for(var n=e.length;n--;)if(Us(e[n][0],t))return n;return-1}function Zn(e,t,n,r){return ff(e,function(e,i,o){t(r,e,n(e),o)}),r}function Kn(e,t){return e&&Li(t,Nu(t),e)}function Qn(e,t){return e&&Li(t,Fu(t),e)}function Jn(e,t,n){"__proto__"==t&&kc?kc(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function $n(e,t){for(var n=-1,r=t.length,i=Jl(r),o=null==e;++n<r;)i[n]=o?re:Iu(e,t[n]);return i}function er(e,t,n){return e===e&&(n!==re&&(e=e<=n?e:n),t!==re&&(e=e>=t?e:t)),e}function tr(e,t,n,r,i,o){var a,u=t&ce,l=t&fe,c=t&pe;if(n&&(a=i?n(e,r,i,o):n(e)),a!==re)return a;if(!eu(e))return e;var f=hp(e);if(f){if(a=Ao(e),!u)return Ii(e,a)}else{var p=Ef(e),h=p==Xe||p==qe;if(vp(e))return Ei(e,u);if(p==Qe||p==Be||h&&!i){if(a=l||h?{}:Oo(e),!u)return l?Ni(e,Qn(a,e)):Di(e,Kn(a,e))}else{if(!wn[p])return i?e:{};a=Po(e,p,u)}}o||(o=new gn);var d=o.get(e);if(d)return d;if(o.set(e,a),_p(e))return e.forEach(function(r){a.add(tr(r,t,n,r,e,o))}),a;if(yp(e))return e.forEach(function(r,i){a.set(i,tr(r,t,n,i,e,o))}),a;var v=c?l?vo:ho:l?Fu:Nu,m=f?re:v(e);return s(m||e,function(r,i){m&&(i=r,r=e[i]),Gn(a,i,tr(r,t,n,i,e,o))}),a}function nr(e){var t=Nu(e);return function(n){return rr(n,e,t)}}function rr(e,t,n){var r=n.length;if(null==e)return!r;for(e=rc(e);r--;){var i=n[r],o=t[i],a=e[i];if(a===re&&!(i in e)||!o(a))return!1}return!0}function ir(e,t,n){if("function"!=typeof e)throw new ac(ae);return Af(function(){e.apply(re,n)},t)}function or(e,t,n,r){var i=-1,o=f,a=!0,s=e.length,u=[],l=t.length;if(!s)return u;n&&(t=h(t,I(n))),r?(o=p,a=!1):t.length>=ie&&(o=D,a=!1,t=new vn(t));e:for(;++i<s;){var c=e[i],d=null==n?c:n(c);if(c=r||0!==c?c:0,a&&d===d){for(var v=l;v--;)if(t[v]===d)continue e;u.push(c)}else o(t,d,r)||u.push(c)}return u}function ar(e,t){var n=!0;return ff(e,function(e,r,i){return n=!!t(e,r,i)}),n}function sr(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],a=t(o);if(null!=a&&(s===re?a===a&&!pu(a):n(a,s)))var s=a,u=o}return u}function ur(e,t,n,r){var i=e.length;for(n=gu(n),n<0&&(n=-n>i?0:i+n),r=r===re||r>i?i:gu(r),r<0&&(r+=i),r=n>r?0:_u(r);n<r;)e[n++]=t;return e}function lr(e,t){var n=[];return ff(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function cr(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=ko),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?cr(s,t-1,n,r,i):d(i,s):r||(i[i.length]=s)}return i}function fr(e,t){return e&&hf(e,t,Nu)}function pr(e,t){return e&&df(e,t,Nu)}function hr(e,t){return c(t,function(t){return Qs(e[t])})}function dr(e,t){t=xi(t,e);for(var n=0,r=t.length;null!=e&&n<r;)e=e[Zo(t[n++])];return n&&n==r?e:re}function vr(e,t,n){var r=t(e);return hp(e)?r:d(r,n(e))}function mr(e){return null==e?e===re?rt:Ke:Cc&&Cc in rc(e)?wo(e):Vo(e)}function yr(e,t){return e>t}function gr(e,t){return null!=e&&pc.call(e,t)}function _r(e,t){return null!=e&&t in rc(e)}function br(e,t,n){return e>=Vc(t,n)&&e<Uc(t,n)}function xr(e,t,n){for(var r=n?p:f,i=e[0].length,o=e.length,a=o,s=Jl(o),u=1/0,l=[];a--;){var c=e[a];a&&t&&(c=h(c,I(t))),u=Vc(c.length,u),s[a]=!n&&(t||i>=120&&c.length>=120)?new vn(a&&c):re}c=e[0];var d=-1,v=s[0];e:for(;++d<i&&l.length<u;){var m=c[d],y=t?t(m):m;if(m=n||0!==m?m:0,!(v?D(v,y):r(l,y,n))){for(a=o;--a;){var g=s[a];if(!(g?D(g,y):r(e[a],y,n)))continue e}v&&v.push(y),l.push(m)}}return l}function wr(e,t,n,r){return fr(e,function(e,i,o){t(r,n(e),i,o)}),r}function Er(e,t,n){t=xi(t,e),e=Wo(e,t);var r=null==e?e:e[Zo(ya(t))];return null==r?re:o(r,e,n)}function Sr(e){return tu(e)&&mr(e)==Be}function Tr(e){return tu(e)&&mr(e)==at}function Ar(e){return tu(e)&&mr(e)==Ge}function Or(e,t,n,r,i){return e===t||(null==e||null==t||!tu(e)&&!tu(t)?e!==e&&t!==t:Pr(e,t,n,r,Or,i))}function Pr(e,t,n,r,i,o){var a=hp(e),s=hp(t),u=a?ze:Ef(e),l=s?ze:Ef(t);u=u==Be?Qe:u,l=l==Be?Qe:l;var c=u==Qe,f=l==Qe,p=u==l;if(p&&vp(e)){if(!vp(t))return!1;a=!0,c=!1}if(p&&!c)return o||(o=new gn),a||bp(e)?lo(e,t,n,r,i,o):co(e,t,u,n,r,i,o);if(!(n&he)){var h=c&&pc.call(e,"__wrapped__"),d=f&&pc.call(t,"__wrapped__");if(h||d){var v=h?e.value():e,m=d?t.value():t;return o||(o=new gn),i(v,m,n,r,o)}}return!!p&&(o||(o=new gn),fo(e,t,n,r,i,o))}function Cr(e){return tu(e)&&Ef(e)==Ye}function kr(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=rc(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){s=n[i];var u=s[0],l=e[u],c=s[1];if(a&&s[2]){if(l===re&&!(u in e))return!1}else{var f=new gn;if(r)var p=r(l,c,u,e,t,f);if(!(p===re?Or(c,l,he|de,r,f):p))return!1}}return!0}function Rr(e){return!(!eu(e)||No(e))&&(Qs(e)?gc:Wt).test(Ko(e))}function Mr(e){return tu(e)&&mr(e)==$e}function Ir(e){return tu(e)&&Ef(e)==et}function Lr(e){return tu(e)&&$s(e.length)&&!!xn[mr(e)]}function Dr(e){return"function"==typeof e?e:null==e?Al:"object"==typeof e?hp(e)?Ur(e[0],e[1]):zr(e):Ll(e)}function Nr(e){if(!Fo(e))return zc(e);var t=[];for(var n in rc(e))pc.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Fr(e){if(!eu(e))return Uo(e);var t=Fo(e),n=[];for(var r in e)("constructor"!=r||!t&&pc.call(e,r))&&n.push(r);return n}function jr(e,t){return e<t}function Br(e,t){var n=-1,r=Vs(e)?Jl(e.length):[];return ff(e,function(e,i,o){r[++n]=t(e,i,o)}),r}function zr(e){var t=bo(e);return 1==t.length&&t[0][2]?Bo(t[0][0],t[0][1]):function(n){return n===e||kr(n,e,t)}}function Ur(e,t){return Io(e)&&jo(t)?Bo(Zo(e),t):function(n){var r=Iu(n,e);return r===re&&r===t?Du(n,e):Or(t,r,he|de)}}function Vr(e,t,n,r,i){e!==t&&hf(t,function(o,a){if(eu(o))i||(i=new gn),Gr(e,t,a,n,Vr,r,i);else{var s=r?r(q(e,a),o,a+"",e,t,i):re;s===re&&(s=o),Nn(e,a,s)}},Fu)}function Gr(e,t,n,r,i,o,a){var s=q(e,n),u=q(t,n),l=a.get(u);if(l)return void Nn(e,n,l);var c=o?o(s,u,n+"",e,t,a):re,f=c===re;if(f){var p=hp(u),h=!p&&vp(u),d=!p&&!h&&bp(u);c=u,p||h||d?hp(s)?c=s:Gs(s)?c=Ii(s):h?(f=!1,c=Ei(u,!0)):d?(f=!1,c=Pi(u,!0)):c=[]:lu(u)||pp(u)?(c=s,pp(s)?c=xu(s):(!eu(s)||r&&Qs(s))&&(c=Oo(u))):f=!1}f&&(a.set(u,c),i(c,u,r,o,a),a.delete(u)),Nn(e,n,c)}function Wr(e,t){var n=e.length;if(n)return t+=t<0?n:0,Ro(t,n)?e[t]:re}function Hr(e,t,n){var r=-1;return t=h(t.length?t:[Al],I(go())),C(Br(e,function(e,n,i){return{criteria:h(t,function(t){return t(e)}),index:++r,value:e}}),function(e,t){return ki(e,t,n)})}function Xr(e,t){return qr(e,t,function(t,n){return Du(e,n)})}function qr(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=dr(e,a);n(s,a)&&ri(o,xi(a,e),s)}return o}function Yr(e){return function(t){return dr(t,e)}}function Zr(e,t,n,r){var i=r?E:w,o=-1,a=t.length,s=e;for(e===t&&(t=Ii(t)),n&&(s=h(e,I(n)));++o<a;)for(var u=0,l=t[o],c=n?n(l):l;(u=i(s,c,u,r))>-1;)s!==e&&Ac.call(s,u,1),Ac.call(e,u,1);return e}function Kr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;Ro(i)?Ac.call(e,i,1):hi(e,i)}}return e}function Qr(e,t){return e+Dc(Hc()*(t-e+1))}function Jr(e,t,n,r){for(var i=-1,o=Uc(Lc((t-e)/(n||1)),0),a=Jl(o);o--;)a[r?o:++i]=e,e+=n;return a}function $r(e,t){var n="";if(!e||t<1||t>Me)return n;do{t%2&&(n+=e),(t=Dc(t/2))&&(e+=e)}while(t);return n}function ei(e,t){return Of(Go(e,t,Al),e+"")}function ti(e){return Mn(Zu(e))}function ni(e,t){var n=Zu(e);return Yo(n,er(t,0,n.length))}function ri(e,t,n,r){if(!eu(e))return e;t=xi(t,e);for(var i=-1,o=t.length,a=o-1,s=e;null!=s&&++i<o;){var u=Zo(t[i]),l=n;if(i!=a){var c=s[u];l=r?r(c,u,s):re,l===re&&(l=eu(c)?c:Ro(t[i+1])?[]:{})}Gn(s,u,l),s=s[u]}return e}function ii(e){return Yo(Zu(e))}function oi(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Jl(i);++r<i;)o[r]=e[r+t];return o}function ai(e,t){var n;return ff(e,function(e,r,i){return!(n=t(e,r,i))}),!!n}function si(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t===t&&i<=Fe){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!pu(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return ui(e,t,Al,n)}function ui(e,t,n,r){t=n(t);for(var i=0,o=null==e?0:e.length,a=t!==t,s=null===t,u=pu(t),l=t===re;i<o;){var c=Dc((i+o)/2),f=n(e[c]),p=f!==re,h=null===f,d=f===f,v=pu(f);if(a)var m=r||d;else m=l?d&&(r||p):s?d&&p&&(r||!h):u?d&&p&&!h&&(r||!v):!h&&!v&&(r?f<=t:f<t);m?i=c+1:o=c}return Vc(o,Ne)}function li(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!Us(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function ci(e){return"number"==typeof e?e:pu(e)?Le:+e}function fi(e){if("string"==typeof e)return e;if(hp(e))return h(e,fi)+"";if(pu(e))return lf?lf.call(e):"";var t=e+"";return"0"==t&&1/e==-Re?"-0":t}function pi(e,t,n){var r=-1,i=f,o=e.length,a=!0,s=[],u=s;if(n)a=!1,i=p;else if(o>=ie){var l=t?null:_f(e);if(l)return Y(l);a=!1,i=D,u=new vn}else u=t?[]:s;e:for(;++r<o;){var c=e[r],h=t?t(c):c;if(c=n||0!==c?c:0,a&&h===h){for(var d=u.length;d--;)if(u[d]===h)continue e;t&&u.push(h),s.push(c)}else i(u,h,n)||(u!==s&&u.push(h),s.push(c))}return s}function hi(e,t){return t=xi(t,e),null==(e=Wo(e,t))||delete e[Zo(ya(t))]}function di(e,t,n,r){return ri(e,t,n(dr(e,t)),r)}function vi(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?oi(e,r?0:o,r?o+1:i):oi(e,r?o+1:0,r?i:o)}function mi(e,t){var n=e;return n instanceof g&&(n=n.value()),v(t,function(e,t){return t.func.apply(t.thisArg,d([e],t.args))},n)}function yi(e,t,n){var r=e.length;if(r<2)return r?pi(e[0]):[];for(var i=-1,o=Jl(r);++i<r;)for(var a=e[i],s=-1;++s<r;)s!=i&&(o[i]=or(o[i]||a,e[s],t,n));return pi(cr(o,1),t,n)}function gi(e,t,n){for(var r=-1,i=e.length,o=t.length,a={};++r<i;){var s=r<o?t[r]:re;n(a,e[r],s)}return a}function _i(e){return Gs(e)?e:[]}function bi(e){return"function"==typeof e?e:Al}function xi(e,t){return hp(e)?e:Io(e,t)?[e]:Pf(Eu(e))}function wi(e,t,n){var r=e.length;return n=n===re?r:n,!t&&n>=r?e:oi(e,t,n)}function Ei(e,t){if(t)return e.slice();var n=e.length,r=wc?wc(n):new e.constructor(n);return e.copy(r),r}function Si(e){var t=new e.constructor(e.byteLength);return new xc(t).set(new xc(e)),t}function Ti(e,t){var n=t?Si(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function Ai(e){var t=new e.constructor(e.source,Ut.exec(e));return t.lastIndex=e.lastIndex,t}function Oi(e){return uf?rc(uf.call(e)):{}}function Pi(e,t){var n=t?Si(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Ci(e,t){if(e!==t){var n=e!==re,r=null===e,i=e===e,o=pu(e),a=t!==re,s=null===t,u=t===t,l=pu(t);if(!s&&!l&&!o&&e>t||o&&a&&u&&!s&&!l||r&&a&&u||!n&&u||!i)return 1;if(!r&&!o&&!l&&e<t||l&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!u)return-1}return 0}function ki(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;++r<a;){var u=Ci(i[r],o[r]);if(u){if(r>=s)return u;return u*("desc"==n[r]?-1:1)}}return e.index-t.index}function Ri(e,t,n,r){for(var i=-1,o=e.length,a=n.length,s=-1,u=t.length,l=Uc(o-a,0),c=Jl(u+l),f=!r;++s<u;)c[s]=t[s];for(;++i<a;)(f||i<o)&&(c[n[i]]=e[i]);for(;l--;)c[s++]=e[i++];return c}function Mi(e,t,n,r){for(var i=-1,o=e.length,a=-1,s=n.length,u=-1,l=t.length,c=Uc(o-s,0),f=Jl(c+l),p=!r;++i<c;)f[i]=e[i];for(var h=i;++u<l;)f[h+u]=t[u];for(;++a<s;)(p||i<o)&&(f[h+n[a]]=e[i++]);return f}function Ii(e,t){var n=-1,r=e.length;for(t||(t=Jl(r));++n<r;)t[n]=e[n];return t}function Li(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],u=r?r(n[s],e[s],s,n,e):re;u===re&&(u=e[s]),i?Jn(n,s,u):Gn(n,s,u)}return n}function Di(e,t){return Li(e,xf(e),t)}function Ni(e,t){return Li(e,wf(e),t)}function Fi(e,t){return function(n,r){var i=hp(n)?a:Zn,o=t?t():{};return i(n,e,go(r,2),o)}}function ji(e){return ei(function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:re,a=i>2?n[2]:re;for(o=e.length>3&&"function"==typeof o?(i--,o):re,a&&Mo(n[0],n[1],a)&&(o=i<3?re:o,i=1),t=rc(t);++r<i;){var s=n[r];s&&e(t,s,r,o)}return t})}function Bi(e,t){return function(n,r){if(null==n)return n;if(!Vs(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=rc(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function zi(e){return function(t,n,r){for(var i=-1,o=rc(t),a=r(t),s=a.length;s--;){var u=a[e?s:++i];if(!1===n(o[u],u,o))break}return t}}function Ui(e,t,n){function r(){return(this&&this!==Rn&&this instanceof r?o:e).apply(i?n:this,arguments)}var i=t&ve,o=Wi(e);return r}function Vi(e){return function(t){t=Eu(t);var n=U(t)?$(t):re,r=n?n[0]:t.charAt(0),i=n?wi(n,1).join(""):t.slice(1);return r[e]()+i}}function Gi(e){return function(t){return v(xl(tl(t).replace(hn,"")),e,"")}}function Wi(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=cf(e.prototype),r=e.apply(n,t);return eu(r)?r:n}}function Hi(e,t,n){function r(){for(var a=arguments.length,s=Jl(a),u=a,l=yo(r);u--;)s[u]=arguments[u];var c=a<3&&s[0]!==l&&s[a-1]!==l?[]:X(s,l);return(a-=c.length)<n?no(e,t,Yi,r.placeholder,re,s,c,re,re,n-a):o(this&&this!==Rn&&this instanceof r?i:e,this,s)}var i=Wi(e);return r}function Xi(e){return function(t,n,r){var i=rc(t);if(!Vs(t)){var o=go(n,3);t=Nu(t),n=function(e){return o(i[e],e,i)}}var a=e(t,n,r);return a>-1?i[o?t[a]:a]:re}}function qi(e){return po(function(t){var n=t.length,r=n,o=i.prototype.thru;for(e&&t.reverse();r--;){var a=t[r];if("function"!=typeof a)throw new ac(ae);if(o&&!s&&"wrapper"==mo(a))var s=new i([],!0)}for(r=s?r:n;++r<n;){a=t[r];var u=mo(a),l="wrapper"==u?bf(a):re;s=l&&Do(l[0])&&l[1]==(we|ge|be|Ee)&&!l[4].length&&1==l[9]?s[mo(l[0])].apply(s,l[3]):1==a.length&&Do(a)?s[u]():s.thru(a)}return function(){var e=arguments,r=e[0];if(s&&1==e.length&&hp(r))return s.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}})}function Yi(e,t,n,r,i,o,a,s,u,l){function c(){for(var y=arguments.length,g=Jl(y),_=y;_--;)g[_]=arguments[_];if(d)var b=yo(c),x=j(g,b);if(r&&(g=Ri(g,r,i,d)),o&&(g=Mi(g,o,a,d)),y-=x,d&&y<l){var w=X(g,b);return no(e,t,Yi,c.placeholder,n,g,w,s,u,l-y)}var E=p?n:this,S=h?E[e]:e;return y=g.length,s?g=Ho(g,s):v&&y>1&&g.reverse(),f&&u<y&&(g.length=u),this&&this!==Rn&&this instanceof c&&(S=m||Wi(S)),S.apply(E,g)}var f=t&we,p=t&ve,h=t&me,d=t&(ge|_e),v=t&Se,m=h?re:Wi(e);return c}function Zi(e,t){return function(n,r){return wr(n,e,t(r),{})}}function Ki(e,t){return function(n,r){var i;if(n===re&&r===re)return t;if(n!==re&&(i=n),r!==re){if(i===re)return r;"string"==typeof n||"string"==typeof r?(n=fi(n),r=fi(r)):(n=ci(n),r=ci(r)),i=e(n,r)}return i}}function Qi(e){return po(function(t){return t=h(t,I(go())),ei(function(n){var r=this;return e(t,function(e){return o(e,r,n)})})})}function Ji(e,t){t=t===re?" ":fi(t);var n=t.length;if(n<2)return n?$r(t,e):t;var r=$r(t,Lc(e/J(t)));return U(t)?wi($(r),0,e).join(""):r.slice(0,e)}function $i(e,t,n,r){function i(){for(var t=-1,u=arguments.length,l=-1,c=r.length,f=Jl(c+u),p=this&&this!==Rn&&this instanceof i?s:e;++l<c;)f[l]=r[l];for(;u--;)f[l++]=arguments[++t];return o(p,a?n:this,f)}var a=t&ve,s=Wi(e);return i}function eo(e){return function(t,n,r){return r&&"number"!=typeof r&&Mo(t,n,r)&&(n=r=re),t=yu(t),n===re?(n=t,t=0):n=yu(n),r=r===re?t<n?1:-1:yu(r),Jr(t,n,r,e)}}function to(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=bu(t),n=bu(n)),e(t,n)}}function no(e,t,n,r,i,o,a,s,u,l){var c=t&ge,f=c?a:re,p=c?re:a,h=c?o:re,d=c?re:o;t|=c?be:xe,(t&=~(c?xe:be))&ye||(t&=~(ve|me));var v=[e,t,i,h,f,d,p,s,u,l],m=n.apply(re,v);return Do(e)&&Tf(m,v),m.placeholder=r,Xo(m,e,t)}function ro(e){var t=nc[e];return function(e,n){if(e=bu(e),n=null==n?0:Vc(gu(n),292)){var r=(Eu(e)+"e").split("e");return r=(Eu(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"),+(r[0]+"e"+(+r[1]-n))}return t(e)}}function io(e){return function(t){var n=Ef(t);return n==Ye?W(t):n==et?Z(t):M(t,e(t))}}function oo(e,t,n,r,i,o,a,s){var u=t&me;if(!u&&"function"!=typeof e)throw new ac(ae);var l=r?r.length:0;if(l||(t&=~(be|xe),r=i=re),a=a===re?a:Uc(gu(a),0),s=s===re?s:gu(s),l-=i?i.length:0,t&xe){var c=r,f=i;r=i=re}var p=u?re:bf(e),h=[e,t,n,r,i,c,f,o,a,s];if(p&&zo(h,p),e=h[0],t=h[1],n=h[2],r=h[3],i=h[4],s=h[9]=h[9]===re?u?0:e.length:Uc(h[9]-l,0),!s&&t&(ge|_e)&&(t&=~(ge|_e)),t&&t!=ve)d=t==ge||t==_e?Hi(e,t,s):t!=be&&t!=(ve|be)||i.length?Yi.apply(re,h):$i(e,t,n,r);else var d=Ui(e,t,n);return Xo((p?vf:Tf)(d,h),e,t)}function ao(e,t,n,r){return e===re||Us(e,lc[n])&&!pc.call(r,n)?t:e}function so(e,t,n,r,i,o){return eu(e)&&eu(t)&&(o.set(t,e),Vr(e,t,re,so,o),o.delete(t)),e}function uo(e){return lu(e)?re:e}function lo(e,t,n,r,i,o){var a=n&he,s=e.length,u=t.length;if(s!=u&&!(a&&u>s))return!1;var l=o.get(e);if(l&&o.get(t))return l==t;var c=-1,f=!0,p=n&de?new vn:re;for(o.set(e,t),o.set(t,e);++c<s;){var h=e[c],d=t[c];if(r)var v=a?r(d,h,c,t,e,o):r(h,d,c,e,t,o);if(v!==re){if(v)continue;f=!1;break}if(p){if(!y(t,function(e,t){if(!D(p,t)&&(h===e||i(h,e,n,r,o)))return p.push(t)})){f=!1;break}}else if(h!==d&&!i(h,d,n,r,o)){f=!1;break}}return o.delete(e),o.delete(t),f}function co(e,t,n,r,i,o,a){switch(n){case st:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case at:return!(e.byteLength!=t.byteLength||!o(new xc(e),new xc(t)));case Ve:case Ge:case Ze:return Us(+e,+t);case He:return e.name==t.name&&e.message==t.message;case $e:case tt:return e==t+"";case Ye:var s=W;case et:var u=r&he;if(s||(s=Y),e.size!=t.size&&!u)return!1;var l=a.get(e);if(l)return l==t;r|=de,a.set(e,t);var c=lo(s(e),s(t),r,i,o,a);return a.delete(e),c;case nt:if(uf)return uf.call(e)==uf.call(t)}return!1}function fo(e,t,n,r,i,o){var a=n&he,s=ho(e),u=s.length;if(u!=ho(t).length&&!a)return!1;for(var l=u;l--;){var c=s[l];if(!(a?c in t:pc.call(t,c)))return!1}var f=o.get(e);if(f&&o.get(t))return f==t;var p=!0;o.set(e,t),o.set(t,e);for(var h=a;++l<u;){c=s[l];var d=e[c],v=t[c];if(r)var m=a?r(v,d,c,t,e,o):r(d,v,c,e,t,o);if(!(m===re?d===v||i(d,v,n,r,o):m)){p=!1;break}h||(h="constructor"==c)}if(p&&!h){var y=e.constructor,g=t.constructor;y!=g&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof g&&g instanceof g)&&(p=!1)}return o.delete(e),o.delete(t),p}function po(e){return Of(Go(e,re,la),e+"")}function ho(e){return vr(e,Nu,xf)}function vo(e){return vr(e,Fu,wf)}function mo(e){for(var t=e.name+"",n=ef[t],r=pc.call(ef,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function yo(e){return(pc.call(n,"placeholder")?n:e).placeholder}function go(){var e=n.iteratee||Ol;return e=e===Ol?Dr:e,arguments.length?e(arguments[0],arguments[1]):e}function _o(e,t){var n=e.__data__;return Lo(t)?n["string"==typeof t?"string":"hash"]:n.map}function bo(e){for(var t=Nu(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,jo(i)]}return t}function xo(e,t){var n=z(e,t);return Rr(n)?n:re}function wo(e){var t=pc.call(e,Cc),n=e[Cc];try{e[Cc]=re;var r=!0}catch(e){}var i=vc.call(e);return r&&(t?e[Cc]=n:delete e[Cc]),i}function Eo(e,t,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=Vc(t,e+a);break;case"takeRight":e=Uc(e,t-a)}}return{start:e,end:t}}function So(e){var t=e.match(Nt);return t?t[1].split(Ft):[]}function To(e,t,n){t=xi(t,e);for(var r=-1,i=t.length,o=!1;++r<i;){var a=Zo(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&$s(i)&&Ro(a,i)&&(hp(e)||pp(e))}function Ao(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&pc.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Oo(e){return"function"!=typeof e.constructor||Fo(e)?{}:cf(Ec(e))}function Po(e,t,n){var r=e.constructor;switch(t){case at:return Si(e);case Ve:case Ge:return new r(+e);case st:return Ti(e,n);case ut:case lt:case ct:case ft:case pt:case ht:case dt:case vt:case mt:return Pi(e,n);case Ye:return new r;case Ze:case tt:return new r(e);case $e:return Ai(e);case et:return new r;case nt:return Oi(e)}}function Co(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Dt,"{\n/* [wrapped with "+t+"] */\n")}function ko(e){return hp(e)||pp(e)||!!(Oc&&e&&e[Oc])}function Ro(e,t){var n=typeof e;return!!(t=null==t?Me:t)&&("number"==n||"symbol"!=n&&Xt.test(e))&&e>-1&&e%1==0&&e<t}function Mo(e,t,n){if(!eu(n))return!1;var r=typeof t;return!!("number"==r?Vs(n)&&Ro(t,n.length):"string"==r&&t in n)&&Us(n[t],e)}function Io(e,t){if(hp(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!pu(e))||(Pt.test(e)||!Ot.test(e)||null!=t&&e in rc(t))}function Lo(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function Do(e){var t=mo(e),r=n[t];if("function"!=typeof r||!(t in g.prototype))return!1;if(e===r)return!0;var i=bf(r);return!!i&&e===i[0]}function No(e){return!!dc&&dc in e}function Fo(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||lc)}function jo(e){return e===e&&!eu(e)}function Bo(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==re||e in rc(n)))}}function zo(e,t){var n=e[1],r=t[1],i=n|r,o=i<(ve|me|we),a=r==we&&n==ge||r==we&&n==Ee&&e[7].length<=t[8]||r==(we|Ee)&&t[7].length<=t[8]&&n==ge;if(!o&&!a)return e;r&ve&&(e[2]=t[2],i|=n&ve?0:ye);var s=t[3];if(s){var u=e[3];e[3]=u?Ri(u,s,t[4]):s,e[4]=u?X(e[3],le):t[4]}return s=t[5],s&&(u=e[5],e[5]=u?Mi(u,s,t[6]):s,e[6]=u?X(e[5],le):t[6]),s=t[7],s&&(e[7]=s),r&we&&(e[8]=null==e[8]?t[8]:Vc(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e}function Uo(e){var t=[];if(null!=e)for(var n in rc(e))t.push(n);return t}function Vo(e){return vc.call(e)}function Go(e,t,n){return t=Uc(t===re?e.length-1:t,0),function(){for(var r=arguments,i=-1,a=Uc(r.length-t,0),s=Jl(a);++i<a;)s[i]=r[t+i];i=-1;for(var u=Jl(t+1);++i<t;)u[i]=r[i];return u[t]=n(s),o(e,this,u)}}function Wo(e,t){return t.length<2?e:dr(e,oi(t,0,-1))}function Ho(e,t){for(var n=e.length,r=Vc(t.length,n),i=Ii(e);r--;){var o=t[r];e[r]=Ro(o,n)?i[o]:re}return e}function Xo(e,t,n){var r=t+"";return Of(e,Co(r,Qo(So(r),n)))}function qo(e){var t=0,n=0;return function(){var r=Gc(),i=Pe-(r-n);if(n=r,i>0){if(++t>=Oe)return arguments[0]}else t=0;return e.apply(re,arguments)}}function Yo(e,t){var n=-1,r=e.length,i=r-1;for(t=t===re?r:t;++n<t;){var o=Qr(n,i),a=e[o];e[o]=e[n],e[n]=a}return e.length=t,e}function Zo(e){if("string"==typeof e||pu(e))return e;var t=e+"";return"0"==t&&1/e==-Re?"-0":t}function Ko(e){if(null!=e){try{return fc.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Qo(e,t){return s(je,function(n){var r="_."+n[0];t&n[1]&&!f(e,r)&&e.push(r)}),e.sort()}function Jo(e){if(e instanceof g)return e.clone();var t=new i(e.__wrapped__,e.__chain__);return t.__actions__=Ii(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function $o(e,t,n){t=(n?Mo(e,t,n):t===re)?1:Uc(gu(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var i=0,o=0,a=Jl(Lc(r/t));i<r;)a[o++]=oi(e,i,i+=t);return a}function ea(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i}function ta(){var e=arguments.length;if(!e)return[];for(var t=Jl(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return d(hp(n)?Ii(n):[n],cr(t,1))}function na(e,t,n){var r=null==e?0:e.length;return r?(t=n||t===re?1:gu(t),oi(e,t<0?0:t,r)):[]}function ra(e,t,n){var r=null==e?0:e.length;return r?(t=n||t===re?1:gu(t),t=r-t,oi(e,0,t<0?0:t)):[]}function ia(e,t){return e&&e.length?vi(e,go(t,3),!0,!0):[]}function oa(e,t){return e&&e.length?vi(e,go(t,3),!0):[]}function aa(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&Mo(e,t,n)&&(n=0,r=i),ur(e,t,n,r)):[]}function sa(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:gu(n);return i<0&&(i=Uc(r+i,0)),x(e,go(t,3),i)}function ua(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return n!==re&&(i=gu(n),i=n<0?Uc(r+i,0):Vc(i,r-1)),x(e,go(t,3),i,!0)}function la(e){return(null==e?0:e.length)?cr(e,1):[]}function ca(e){return(null==e?0:e.length)?cr(e,Re):[]}function fa(e,t){return(null==e?0:e.length)?(t=t===re?1:gu(t),cr(e,t)):[]}function pa(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r}function ha(e){return e&&e.length?e[0]:re}function da(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:gu(n);return i<0&&(i=Uc(r+i,0)),w(e,t,i)}function va(e){return(null==e?0:e.length)?oi(e,0,-1):[]}function ma(e,t){return null==e?"":Bc.call(e,t)}function ya(e){var t=null==e?0:e.length;return t?e[t-1]:re}function ga(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return n!==re&&(i=gu(n),i=i<0?Uc(r+i,0):Vc(i,r-1)),t===t?Q(e,t,i):x(e,S,i,!0)}function _a(e,t){return e&&e.length?Wr(e,gu(t)):re}function ba(e,t){return e&&e.length&&t&&t.length?Zr(e,t):e}function xa(e,t,n){return e&&e.length&&t&&t.length?Zr(e,t,go(n,2)):e}function wa(e,t,n){return e&&e.length&&t&&t.length?Zr(e,t,re,n):e}function Ea(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=go(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return Kr(e,i),n}function Sa(e){return null==e?e:Xc.call(e)}function Ta(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&Mo(e,t,n)?(t=0,n=r):(t=null==t?0:gu(t),n=n===re?r:gu(n)),oi(e,t,n)):[]}function Aa(e,t){return si(e,t)}function Oa(e,t,n){return ui(e,t,go(n,2))}function Pa(e,t){var n=null==e?0:e.length;if(n){var r=si(e,t);if(r<n&&Us(e[r],t))return r}return-1}function Ca(e,t){return si(e,t,!0)}function ka(e,t,n){return ui(e,t,go(n,2),!0)}function Ra(e,t){if(null==e?0:e.length){var n=si(e,t,!0)-1;if(Us(e[n],t))return n}return-1}function Ma(e){return e&&e.length?li(e):[]}function Ia(e,t){return e&&e.length?li(e,go(t,2)):[]}function La(e){var t=null==e?0:e.length;return t?oi(e,1,t):[]}function Da(e,t,n){return e&&e.length?(t=n||t===re?1:gu(t),oi(e,0,t<0?0:t)):[]}function Na(e,t,n){var r=null==e?0:e.length;return r?(t=n||t===re?1:gu(t),t=r-t,oi(e,t<0?0:t,r)):[]}function Fa(e,t){return e&&e.length?vi(e,go(t,3),!1,!0):[]}function ja(e,t){return e&&e.length?vi(e,go(t,3)):[]}function Ba(e){return e&&e.length?pi(e):[]}function za(e,t){return e&&e.length?pi(e,go(t,2)):[]}function Ua(e,t){return t="function"==typeof t?t:re,e&&e.length?pi(e,re,t):[]}function Va(e){if(!e||!e.length)return[];var t=0;return e=c(e,function(e){if(Gs(e))return t=Uc(e.length,t),!0}),R(t,function(t){return h(e,A(t))})}function Ga(e,t){if(!e||!e.length)return[];var n=Va(e);return null==t?n:h(n,function(e){return o(t,re,e)})}function Wa(e,t){return gi(e||[],t||[],Gn)}function Ha(e,t){return gi(e||[],t||[],ri)}function Xa(e){var t=n(e);return t.__chain__=!0,t}function qa(e,t){return t(e),e}function Ya(e,t){return t(e)}function Za(){return Xa(this)}function Ka(){return new i(this.value(),this.__chain__)}function Qa(){this.__values__===re&&(this.__values__=mu(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?re:this.__values__[this.__index__++]}}function Ja(){return this}function $a(e){for(var t,n=this;n instanceof r;){var i=Jo(n);i.__index__=0,i.__values__=re,t?o.__wrapped__=i:t=i;var o=i;n=n.__wrapped__}return o.__wrapped__=e,t}function es(){var e=this.__wrapped__;if(e instanceof g){var t=e;return this.__actions__.length&&(t=new g(this)),t=t.reverse(),t.__actions__.push({func:Ya,args:[Sa],thisArg:re}),new i(t,this.__chain__)}return this.thru(Sa)}function ts(){return mi(this.__wrapped__,this.__actions__)}function ns(e,t,n){var r=hp(e)?l:ar;return n&&Mo(e,t,n)&&(t=re),r(e,go(t,3))}function rs(e,t){return(hp(e)?c:lr)(e,go(t,3))}function is(e,t){return cr(cs(e,t),1)}function os(e,t){return cr(cs(e,t),Re)}function as(e,t,n){return n=n===re?1:gu(n),cr(cs(e,t),n)}function ss(e,t){return(hp(e)?s:ff)(e,go(t,3))}function us(e,t){return(hp(e)?u:pf)(e,go(t,3))}function ls(e,t,n,r){e=Vs(e)?e:Zu(e),n=n&&!r?gu(n):0;var i=e.length;return n<0&&(n=Uc(i+n,0)),fu(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&w(e,t,n)>-1}function cs(e,t){return(hp(e)?h:Br)(e,go(t,3))}function fs(e,t,n,r){return null==e?[]:(hp(t)||(t=null==t?[]:[t]),n=r?re:n,hp(n)||(n=null==n?[]:[n]),Hr(e,t,n))}function ps(e,t,n){var r=hp(e)?v:P,i=arguments.length<3;return r(e,go(t,4),n,i,ff)}function hs(e,t,n){var r=hp(e)?m:P,i=arguments.length<3;return r(e,go(t,4),n,i,pf)}function ds(e,t){return(hp(e)?c:lr)(e,Ps(go(t,3)))}function vs(e){return(hp(e)?Mn:ti)(e)}function ms(e,t,n){return t=(n?Mo(e,t,n):t===re)?1:gu(t),(hp(e)?In:ni)(e,t)}function ys(e){return(hp(e)?Dn:ii)(e)}function gs(e){if(null==e)return 0;if(Vs(e))return fu(e)?J(e):e.length;var t=Ef(e);return t==Ye||t==et?e.size:Nr(e).length}function _s(e,t,n){var r=hp(e)?y:ai;return n&&Mo(e,t,n)&&(t=re),r(e,go(t,3))}function bs(e,t){if("function"!=typeof t)throw new ac(ae);return e=gu(e),function(){if(--e<1)return t.apply(this,arguments)}}function xs(e,t,n){return t=n?re:t,t=e&&null==t?e.length:t,oo(e,we,re,re,re,re,t)}function ws(e,t){var n;if("function"!=typeof t)throw new ac(ae);return e=gu(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=re),n}}function Es(e,t,n){t=n?re:t;var r=oo(e,ge,re,re,re,re,re,t);return r.placeholder=Es.placeholder,r}function Ss(e,t,n){t=n?re:t;var r=oo(e,_e,re,re,re,re,re,t);return r.placeholder=Ss.placeholder,r}function Ts(e,t,n){function r(t){var n=p,r=h;return p=h=re,g=t,v=e.apply(r,n)}function i(e){return g=e,m=Af(s,t),_?r(e):v}function o(e){var n=e-y,r=e-g,i=t-n;return b?Vc(i,d-r):i}function a(e){var n=e-y,r=e-g;return y===re||n>=t||n<0||b&&r>=d}function s(){var e=tp();if(a(e))return u(e);m=Af(s,o(e))}function u(e){return m=re,x&&p?r(e):(p=h=re,v)}function l(){m!==re&&gf(m),g=0,p=y=h=m=re}function c(){return m===re?v:u(tp())}function f(){var e=tp(),n=a(e);if(p=arguments,h=this,y=e,n){if(m===re)return i(y);if(b)return m=Af(s,t),r(y)}return m===re&&(m=Af(s,t)),v}var p,h,d,v,m,y,g=0,_=!1,b=!1,x=!0;if("function"!=typeof e)throw new ac(ae);return t=bu(t)||0,eu(n)&&(_=!!n.leading,b="maxWait"in n,d=b?Uc(bu(n.maxWait)||0,t):d,x="trailing"in n?!!n.trailing:x),f.cancel=l,f.flush=c,f}function As(e){return oo(e,Se)}function Os(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new ac(ae);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Os.Cache||sn),n}function Ps(e){if("function"!=typeof e)throw new ac(ae);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Cs(e){return ws(2,e)}function ks(e,t){if("function"!=typeof e)throw new ac(ae);return t=t===re?t:gu(t),ei(e,t)}function Rs(e,t){if("function"!=typeof e)throw new ac(ae);return t=null==t?0:Uc(gu(t),0),ei(function(n){var r=n[t],i=wi(n,0,t);return r&&d(i,r),o(e,this,i)})}function Ms(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new ac(ae);return eu(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ts(e,t,{leading:r,maxWait:t,trailing:i})}function Is(e){return xs(e,1)}function Ls(e,t){return sp(bi(t),e)}function Ds(){if(!arguments.length)return[];var e=arguments[0];return hp(e)?e:[e]}function Ns(e){return tr(e,pe)}function Fs(e,t){return t="function"==typeof t?t:re,tr(e,pe,t)}function js(e){return tr(e,ce|pe)}function Bs(e,t){return t="function"==typeof t?t:re,tr(e,ce|pe,t)}function zs(e,t){return null==t||rr(e,t,Nu(t))}function Us(e,t){return e===t||e!==e&&t!==t}function Vs(e){return null!=e&&$s(e.length)&&!Qs(e)}function Gs(e){return tu(e)&&Vs(e)}function Ws(e){return!0===e||!1===e||tu(e)&&mr(e)==Ve}function Hs(e){return tu(e)&&1===e.nodeType&&!lu(e)}function Xs(e){if(null==e)return!0;if(Vs(e)&&(hp(e)||"string"==typeof e||"function"==typeof e.splice||vp(e)||bp(e)||pp(e)))return!e.length;var t=Ef(e);if(t==Ye||t==et)return!e.size;if(Fo(e))return!Nr(e).length;for(var n in e)if(pc.call(e,n))return!1;return!0}function qs(e,t){return Or(e,t)}function Ys(e,t,n){n="function"==typeof n?n:re;var r=n?n(e,t):re;return r===re?Or(e,t,re,n):!!r}function Zs(e){if(!tu(e))return!1;var t=mr(e);return t==He||t==We||"string"==typeof e.message&&"string"==typeof e.name&&!lu(e)}function Ks(e){return"number"==typeof e&&jc(e)}function Qs(e){if(!eu(e))return!1;var t=mr(e);return t==Xe||t==qe||t==Ue||t==Je}function Js(e){return"number"==typeof e&&e==gu(e)}function $s(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Me}function eu(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function tu(e){return null!=e&&"object"==typeof e}function nu(e,t){return e===t||kr(e,t,bo(t))}function ru(e,t,n){return n="function"==typeof n?n:re,kr(e,t,bo(t),n)}function iu(e){return uu(e)&&e!=+e}function ou(e){if(Sf(e))throw new ec(oe);return Rr(e)}function au(e){return null===e}function su(e){return null==e}function uu(e){return"number"==typeof e||tu(e)&&mr(e)==Ze}function lu(e){if(!tu(e)||mr(e)!=Qe)return!1;var t=Ec(e);if(null===t)return!0;var n=pc.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&fc.call(n)==mc}function cu(e){return Js(e)&&e>=-Me&&e<=Me}function fu(e){return"string"==typeof e||!hp(e)&&tu(e)&&mr(e)==tt}function pu(e){return"symbol"==typeof e||tu(e)&&mr(e)==nt}function hu(e){return e===re}function du(e){return tu(e)&&Ef(e)==it}function vu(e){return tu(e)&&mr(e)==ot}function mu(e){if(!e)return[];if(Vs(e))return fu(e)?$(e):Ii(e);if(Pc&&e[Pc])return G(e[Pc]());var t=Ef(e);return(t==Ye?W:t==et?Y:Zu)(e)}function yu(e){if(!e)return 0===e?e:0;if((e=bu(e))===Re||e===-Re){return(e<0?-1:1)*Ie}return e===e?e:0}function gu(e){var t=yu(e),n=t%1;return t===t?n?t-n:t:0}function _u(e){return e?er(gu(e),0,De):0}function bu(e){if("number"==typeof e)return e;if(pu(e))return Le;if(eu(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=eu(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Mt,"");var n=Gt.test(e);return n||Ht.test(e)?Pn(e.slice(2),n?2:8):Vt.test(e)?Le:+e}function xu(e){return Li(e,Fu(e))}function wu(e){return e?er(gu(e),-Me,Me):0===e?e:0}function Eu(e){return null==e?"":fi(e)}function Su(e,t){var n=cf(e);return null==t?n:Kn(n,t)}function Tu(e,t){return b(e,go(t,3),fr)}function Au(e,t){return b(e,go(t,3),pr)}function Ou(e,t){return null==e?e:hf(e,go(t,3),Fu)}function Pu(e,t){return null==e?e:df(e,go(t,3),Fu)}function Cu(e,t){return e&&fr(e,go(t,3))}function ku(e,t){return e&&pr(e,go(t,3))}function Ru(e){return null==e?[]:hr(e,Nu(e))}function Mu(e){return null==e?[]:hr(e,Fu(e))}function Iu(e,t,n){var r=null==e?re:dr(e,t);return r===re?n:r}function Lu(e,t){return null!=e&&To(e,t,gr)}function Du(e,t){return null!=e&&To(e,t,_r)}function Nu(e){return Vs(e)?kn(e):Nr(e)}function Fu(e){return Vs(e)?kn(e,!0):Fr(e)}function ju(e,t){var n={};return t=go(t,3),fr(e,function(e,r,i){Jn(n,t(e,r,i),e)}),n}function Bu(e,t){var n={};return t=go(t,3),fr(e,function(e,r,i){Jn(n,r,t(e,r,i))}),n}function zu(e,t){return Uu(e,Ps(go(t)))}function Uu(e,t){if(null==e)return{};var n=h(vo(e),function(e){return[e]});return t=go(t),qr(e,n,function(e,n){return t(e,n[0])})}function Vu(e,t,n){t=xi(t,e);var r=-1,i=t.length;for(i||(i=1,e=re);++r<i;){var o=null==e?re:e[Zo(t[r])];o===re&&(r=i,o=n),e=Qs(o)?o.call(e):o}return e}function Gu(e,t,n){return null==e?e:ri(e,t,n)}function Wu(e,t,n,r){return r="function"==typeof r?r:re,null==e?e:ri(e,t,n,r)}function Hu(e,t,n){var r=hp(e),i=r||vp(e)||bp(e);if(t=go(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:eu(e)&&Qs(o)?cf(Ec(e)):{}}return(i?s:fr)(e,function(e,r,i){return t(n,e,r,i)}),n}function Xu(e,t){return null==e||hi(e,t)}function qu(e,t,n){return null==e?e:di(e,t,bi(n))}function Yu(e,t,n,r){return r="function"==typeof r?r:re,null==e?e:di(e,t,bi(n),r)}function Zu(e){return null==e?[]:L(e,Nu(e))}function Ku(e){return null==e?[]:L(e,Fu(e))}function Qu(e,t,n){return n===re&&(n=t,t=re),n!==re&&(n=bu(n),n=n===n?n:0),t!==re&&(t=bu(t),t=t===t?t:0),er(bu(e),t,n)}function Ju(e,t,n){return t=yu(t),n===re?(n=t,t=0):n=yu(n),e=bu(e),br(e,t,n)}function $u(e,t,n){if(n&&"boolean"!=typeof n&&Mo(e,t,n)&&(t=n=re),n===re&&("boolean"==typeof t?(n=t,t=re):"boolean"==typeof e&&(n=e,e=re)),e===re&&t===re?(e=0,t=1):(e=yu(e),t===re?(t=e,e=0):t=yu(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=Hc();return Vc(e+i*(t-e+On("1e-"+((i+"").length-1))),t)}return Qr(e,t)}function el(e){return Xp(Eu(e).toLowerCase())}function tl(e){return(e=Eu(e))&&e.replace(qt,Wn).replace(dn,"")}function nl(e,t,n){e=Eu(e),t=fi(t);var r=e.length;n=n===re?r:er(gu(n),0,r);var i=n;return(n-=t.length)>=0&&e.slice(n,i)==t}function rl(e){return e=Eu(e),e&&Et.test(e)?e.replace(xt,Hn):e}function il(e){return e=Eu(e),e&&Rt.test(e)?e.replace(kt,"\\$&"):e}function ol(e,t,n){e=Eu(e),t=gu(t);var r=t?J(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Ji(Dc(i),n)+e+Ji(Lc(i),n)}function al(e,t,n){e=Eu(e),t=gu(t);var r=t?J(e):0;return t&&r<t?e+Ji(t-r,n):e}function sl(e,t,n){e=Eu(e),t=gu(t);var r=t?J(e):0;return t&&r<t?Ji(t-r,n)+e:e}function ul(e,t,n){return n||null==t?t=0:t&&(t=+t),Wc(Eu(e).replace(It,""),t||0)}function ll(e,t,n){return t=(n?Mo(e,t,n):t===re)?1:gu(t),$r(Eu(e),t)}function cl(){var e=arguments,t=Eu(e[0]);return e.length<3?t:t.replace(e[1],e[2])}function fl(e,t,n){return n&&"number"!=typeof n&&Mo(e,t,n)&&(t=n=re),(n=n===re?De:n>>>0)?(e=Eu(e),e&&("string"==typeof t||null!=t&&!gp(t))&&!(t=fi(t))&&U(e)?wi($(e),0,n):e.split(t,n)):[]}function pl(e,t,n){return e=Eu(e),n=null==n?0:er(gu(n),0,e.length),t=fi(t),e.slice(n,n+t.length)==t}function hl(e,t,r){var i=n.templateSettings;r&&Mo(e,t,r)&&(t=re),e=Eu(e),t=Tp({},t,i,ao);var o,a,s=Tp({},t.imports,i.imports,ao),u=Nu(s),l=L(s,u),c=0,f=t.interpolate||Yt,p="__p += '",h=ic((t.escape||Yt).source+"|"+f.source+"|"+(f===At?zt:Yt).source+"|"+(t.evaluate||Yt).source+"|$","g"),d="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++bn+"]")+"\n";e.replace(h,function(t,n,r,i,s,u){return r||(r=i),p+=e.slice(c,u).replace(Zt,B),n&&(o=!0,p+="' +\n__e("+n+") +\n'"),s&&(a=!0,p+="';\n"+s+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+t.length,t}),p+="';\n";var v=t.variable;v||(p="with (obj) {\n"+p+"\n}\n"),p=(a?p.replace(yt,""):p).replace(gt,"$1").replace(_t,"$1;"),p="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var m=qp(function(){return tc(u,d+"return "+p).apply(re,l)});if(m.source=p,Zs(m))throw m;return m}function dl(e){return Eu(e).toLowerCase()}function vl(e){return Eu(e).toUpperCase()}function ml(e,t,n){if((e=Eu(e))&&(n||t===re))return e.replace(Mt,"");if(!e||!(t=fi(t)))return e;var r=$(e),i=$(t);return wi(r,N(r,i),F(r,i)+1).join("")}function yl(e,t,n){if((e=Eu(e))&&(n||t===re))return e.replace(Lt,"");if(!e||!(t=fi(t)))return e;var r=$(e);return wi(r,0,F(r,$(t))+1).join("")}function gl(e,t,n){if((e=Eu(e))&&(n||t===re))return e.replace(It,"");if(!e||!(t=fi(t)))return e;var r=$(e);return wi(r,N(r,$(t))).join("")}function _l(e,t){var n=Te,r=Ae;if(eu(t)){var i="separator"in t?t.separator:i;n="length"in t?gu(t.length):n,r="omission"in t?fi(t.omission):r}e=Eu(e);var o=e.length;if(U(e)){var a=$(e);o=a.length}if(n>=o)return e;var s=n-J(r);if(s<1)return r;var u=a?wi(a,0,s).join(""):e.slice(0,s);if(i===re)return u+r;if(a&&(s+=u.length-s),gp(i)){if(e.slice(s).search(i)){var l,c=u;for(i.global||(i=ic(i.source,Eu(Ut.exec(i))+"g")),i.lastIndex=0;l=i.exec(c);)var f=l.index;u=u.slice(0,f===re?s:f)}}else if(e.indexOf(fi(i),s)!=s){var p=u.lastIndexOf(i);p>-1&&(u=u.slice(0,p))}return u+r}function bl(e){return e=Eu(e),e&&wt.test(e)?e.replace(bt,Xn):e}function xl(e,t,n){return e=Eu(e),t=n?re:t,t===re?V(e)?ne(e):_(e):e.match(t)||[]}function wl(e){var t=null==e?0:e.length,n=go();return e=t?h(e,function(e){if("function"!=typeof e[1])throw new ac(ae);return[n(e[0]),e[1]]}):[],ei(function(n){for(var r=-1;++r<t;){var i=e[r];if(o(i[0],this,n))return o(i[1],this,n)}})}function El(e){return nr(tr(e,ce))}function Sl(e){return function(){return e}}function Tl(e,t){return null==e||e!==e?t:e}function Al(e){return e}function Ol(e){return Dr("function"==typeof e?e:tr(e,ce))}function Pl(e){return zr(tr(e,ce))}function Cl(e,t){return Ur(e,tr(t,ce))}function kl(e,t,n){var r=Nu(t),i=hr(t,r);null!=n||eu(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=hr(t,Nu(t)));var o=!(eu(n)&&"chain"in n)||!!n.chain,a=Qs(e);return s(i,function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__);return(n.__actions__=Ii(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,d([this.value()],arguments))})}),e}function Rl(){return Rn._===this&&(Rn._=yc),this}function Ml(){}function Il(e){return e=gu(e),ei(function(t){return Wr(t,e)})}function Ll(e){return Io(e)?A(Zo(e)):Yr(e)}function Dl(e){return function(t){return null==e?re:dr(e,t)}}function Nl(){return[]}function Fl(){return!1}function jl(){return{}}function Bl(){return""}function zl(){return!0}function Ul(e,t){if((e=gu(e))<1||e>Me)return[];var n=De,r=Vc(e,De);t=go(t),e-=De;for(var i=R(r,t);++n<e;)t(n);return i}function Vl(e){return hp(e)?h(e,Zo):pu(e)?[e]:Ii(Pf(Eu(e)))}function Gl(e){var t=++hc;return Eu(e)+t}function Wl(e){return e&&e.length?sr(e,Al,yr):re}function Hl(e,t){return e&&e.length?sr(e,go(t,2),yr):re}function Xl(e){return T(e,Al)}function ql(e,t){return T(e,go(t,2))}function Yl(e){return e&&e.length?sr(e,Al,jr):re}function Zl(e,t){return e&&e.length?sr(e,go(t,2),jr):re}function Kl(e){return e&&e.length?k(e,Al):0}function Ql(e,t){return e&&e.length?k(e,go(t,2)):0}t=null==t?Rn:qn.defaults(Rn.Object(),t,qn.pick(Rn,_n));var Jl=t.Array,$l=t.Date,ec=t.Error,tc=t.Function,nc=t.Math,rc=t.Object,ic=t.RegExp,oc=t.String,ac=t.TypeError,sc=Jl.prototype,uc=tc.prototype,lc=rc.prototype,cc=t["__core-js_shared__"],fc=uc.toString,pc=lc.hasOwnProperty,hc=0,dc=function(){var e=/[^.]+$/.exec(cc&&cc.keys&&cc.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),vc=lc.toString,mc=fc.call(rc),yc=Rn._,gc=ic("^"+fc.call(pc).replace(kt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_c=Ln?t.Buffer:re,bc=t.Symbol,xc=t.Uint8Array,wc=_c?_c.allocUnsafe:re,Ec=H(rc.getPrototypeOf,rc),Sc=rc.create,Tc=lc.propertyIsEnumerable,Ac=sc.splice,Oc=bc?bc.isConcatSpreadable:re,Pc=bc?bc.iterator:re,Cc=bc?bc.toStringTag:re,kc=function(){try{var e=xo(rc,"defineProperty");return e({},"",{}),e}catch(e){}}(),Rc=t.clearTimeout!==Rn.clearTimeout&&t.clearTimeout,Mc=$l&&$l.now!==Rn.Date.now&&$l.now,Ic=t.setTimeout!==Rn.setTimeout&&t.setTimeout,Lc=nc.ceil,Dc=nc.floor,Nc=rc.getOwnPropertySymbols,Fc=_c?_c.isBuffer:re,jc=t.isFinite,Bc=sc.join,zc=H(rc.keys,rc),Uc=nc.max,Vc=nc.min,Gc=$l.now,Wc=t.parseInt,Hc=nc.random,Xc=sc.reverse,qc=xo(t,"DataView"),Yc=xo(t,"Map"),Zc=xo(t,"Promise"),Kc=xo(t,"Set"),Qc=xo(t,"WeakMap"),Jc=xo(rc,"create"),$c=Qc&&new Qc,ef={},tf=Ko(qc),nf=Ko(Yc),rf=Ko(Zc),of=Ko(Kc),af=Ko(Qc),sf=bc?bc.prototype:re,uf=sf?sf.valueOf:re,lf=sf?sf.toString:re,cf=function(){function e(){}return function(t){if(!eu(t))return{};if(Sc)return Sc(t);e.prototype=t;var n=new e;return e.prototype=re,n}}();n.templateSettings={escape:St,evaluate:Tt,interpolate:At,variable:"",imports:{_:n}},n.prototype=r.prototype,n.prototype.constructor=n,i.prototype=cf(r.prototype),i.prototype.constructor=i,g.prototype=cf(r.prototype),g.prototype.constructor=g,te.prototype.clear=jt,te.prototype.delete=Kt,te.prototype.get=Qt,te.prototype.has=Jt,te.prototype.set=$t,en.prototype.clear=tn,en.prototype.delete=nn,en.prototype.get=rn,en.prototype.has=on,en.prototype.set=an,sn.prototype.clear=un,sn.prototype.delete=ln,sn.prototype.get=cn,sn.prototype.has=fn,sn.prototype.set=pn,vn.prototype.add=vn.prototype.push=mn,vn.prototype.has=yn,gn.prototype.clear=En,gn.prototype.delete=Sn,gn.prototype.get=Tn,gn.prototype.has=An,gn.prototype.set=Cn;var ff=Bi(fr),pf=Bi(pr,!0),hf=zi(),df=zi(!0),vf=$c?function(e,t){return $c.set(e,t),e}:Al,mf=kc?function(e,t){return kc(e,"toString",{configurable:!0,enumerable:!1,value:Sl(t),writable:!0})}:Al,yf=ei,gf=Rc||function(e){return Rn.clearTimeout(e)},_f=Kc&&1/Y(new Kc([,-0]))[1]==Re?function(e){return new Kc(e)}:Ml,bf=$c?function(e){return $c.get(e)}:Ml,xf=Nc?function(e){return null==e?[]:(e=rc(e),c(Nc(e),function(t){return Tc.call(e,t)}))}:Nl,wf=Nc?function(e){for(var t=[];e;)d(t,xf(e)),e=Ec(e);return t}:Nl,Ef=mr;(qc&&Ef(new qc(new ArrayBuffer(1)))!=st||Yc&&Ef(new Yc)!=Ye||Zc&&"[object Promise]"!=Ef(Zc.resolve())||Kc&&Ef(new Kc)!=et||Qc&&Ef(new Qc)!=it)&&(Ef=function(e){var t=mr(e),n=t==Qe?e.constructor:re,r=n?Ko(n):"";if(r)switch(r){case tf:return st;case nf:return Ye;case rf:return"[object Promise]";case of:return et;case af:return it}return t});var Sf=cc?Qs:Fl,Tf=qo(vf),Af=Ic||function(e,t){return Rn.setTimeout(e,t)},Of=qo(mf),Pf=function(e){var t=Os(e,function(e){return n.size===ue&&n.clear(),e}),n=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Ct,function(e,n,r,i){t.push(r?i.replace(Bt,"$1"):n||e)}),t}),Cf=ei(function(e,t){return Gs(e)?or(e,cr(t,1,Gs,!0)):[]}),kf=ei(function(e,t){var n=ya(t);return Gs(n)&&(n=re),Gs(e)?or(e,cr(t,1,Gs,!0),go(n,2)):[]}),Rf=ei(function(e,t){var n=ya(t);return Gs(n)&&(n=re),Gs(e)?or(e,cr(t,1,Gs,!0),re,n):[]}),Mf=ei(function(e){var t=h(e,_i);return t.length&&t[0]===e[0]?xr(t):[]}),If=ei(function(e){var t=ya(e),n=h(e,_i);return t===ya(n)?t=re:n.pop(),n.length&&n[0]===e[0]?xr(n,go(t,2)):[]}),Lf=ei(function(e){var t=ya(e),n=h(e,_i);return t="function"==typeof t?t:re,t&&n.pop(),n.length&&n[0]===e[0]?xr(n,re,t):[]}),Df=ei(ba),Nf=po(function(e,t){var n=null==e?0:e.length,r=$n(e,t);return Kr(e,h(t,function(e){return Ro(e,n)?+e:e}).sort(Ci)),r}),Ff=ei(function(e){return pi(cr(e,1,Gs,!0))}),jf=ei(function(e){var t=ya(e);return Gs(t)&&(t=re),pi(cr(e,1,Gs,!0),go(t,2))}),Bf=ei(function(e){var t=ya(e);return t="function"==typeof t?t:re,pi(cr(e,1,Gs,!0),re,t)}),zf=ei(function(e,t){return Gs(e)?or(e,t):[]}),Uf=ei(function(e){return yi(c(e,Gs))}),Vf=ei(function(e){var t=ya(e);return Gs(t)&&(t=re),yi(c(e,Gs),go(t,2))}),Gf=ei(function(e){var t=ya(e);return t="function"==typeof t?t:re,yi(c(e,Gs),re,t)}),Wf=ei(Va),Hf=ei(function(e){var t=e.length,n=t>1?e[t-1]:re;return n="function"==typeof n?(e.pop(),n):re,Ga(e,n)}),Xf=po(function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,o=function(t){return $n(t,e)};return!(t>1||this.__actions__.length)&&r instanceof g&&Ro(n)?(r=r.slice(n,+n+(t?1:0)),r.__actions__.push({func:Ya,args:[o],thisArg:re}),new i(r,this.__chain__).thru(function(e){return t&&!e.length&&e.push(re),e})):this.thru(o)}),qf=Fi(function(e,t,n){pc.call(e,n)?++e[n]:Jn(e,n,1)}),Yf=Xi(sa),Zf=Xi(ua),Kf=Fi(function(e,t,n){pc.call(e,n)?e[n].push(t):Jn(e,n,[t])}),Qf=ei(function(e,t,n){var r=-1,i="function"==typeof t,a=Vs(e)?Jl(e.length):[];return ff(e,function(e){a[++r]=i?o(t,e,n):Er(e,t,n)}),a}),Jf=Fi(function(e,t,n){Jn(e,n,t)}),$f=Fi(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),ep=ei(function(e,t){if(null==e)return[];var n=t.length;return n>1&&Mo(e,t[0],t[1])?t=[]:n>2&&Mo(t[0],t[1],t[2])&&(t=[t[0]]),Hr(e,cr(t,1),[])}),tp=Mc||function(){return Rn.Date.now()},np=ei(function(e,t,n){var r=ve;if(n.length){var i=X(n,yo(np));r|=be}return oo(e,r,t,n,i)}),rp=ei(function(e,t,n){var r=ve|me;if(n.length){var i=X(n,yo(rp));r|=be}return oo(t,r,e,n,i)}),ip=ei(function(e,t){return ir(e,1,t)}),op=ei(function(e,t,n){return ir(e,bu(t)||0,n)});Os.Cache=sn;var ap=yf(function(e,t){t=1==t.length&&hp(t[0])?h(t[0],I(go())):h(cr(t,1),I(go()));var n=t.length;return ei(function(r){for(var i=-1,a=Vc(r.length,n);++i<a;)r[i]=t[i].call(this,r[i]);return o(e,this,r)})}),sp=ei(function(e,t){var n=X(t,yo(sp));return oo(e,be,re,t,n)}),up=ei(function(e,t){var n=X(t,yo(up));return oo(e,xe,re,t,n)}),lp=po(function(e,t){return oo(e,Ee,re,re,re,t)}),cp=to(yr),fp=to(function(e,t){return e>=t}),pp=Sr(function(){return arguments}())?Sr:function(e){return tu(e)&&pc.call(e,"callee")&&!Tc.call(e,"callee")},hp=Jl.isArray,dp=Fn?I(Fn):Tr,vp=Fc||Fl,mp=jn?I(jn):Ar,yp=Bn?I(Bn):Cr,gp=zn?I(zn):Mr,_p=Un?I(Un):Ir,bp=Vn?I(Vn):Lr,xp=to(jr),wp=to(function(e,t){return e<=t}),Ep=ji(function(e,t){if(Fo(t)||Vs(t))return void Li(t,Nu(t),e);for(var n in t)pc.call(t,n)&&Gn(e,n,t[n])}),Sp=ji(function(e,t){Li(t,Fu(t),e)}),Tp=ji(function(e,t,n,r){Li(t,Fu(t),e,r)}),Ap=ji(function(e,t,n,r){Li(t,Nu(t),e,r)}),Op=po($n),Pp=ei(function(e,t){e=rc(e);var n=-1,r=t.length,i=r>2?t[2]:re;for(i&&Mo(t[0],t[1],i)&&(r=1);++n<r;)for(var o=t[n],a=Fu(o),s=-1,u=a.length;++s<u;){var l=a[s],c=e[l];(c===re||Us(c,lc[l])&&!pc.call(e,l))&&(e[l]=o[l])}return e}),Cp=ei(function(e){return e.push(re,so),o(Lp,re,e)}),kp=Zi(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=vc.call(t)),e[t]=n},Sl(Al)),Rp=Zi(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=vc.call(t)),pc.call(e,t)?e[t].push(n):e[t]=[n]},go),Mp=ei(Er),Ip=ji(function(e,t,n){Vr(e,t,n)}),Lp=ji(function(e,t,n,r){Vr(e,t,n,r)}),Dp=po(function(e,t){var n={};if(null==e)return n;var r=!1;t=h(t,function(t){return t=xi(t,e),r||(r=t.length>1),t}),Li(e,vo(e),n),r&&(n=tr(n,ce|fe|pe,uo));for(var i=t.length;i--;)hi(n,t[i]);return n}),Np=po(function(e,t){return null==e?{}:Xr(e,t)}),Fp=io(Nu),jp=io(Fu),Bp=Gi(function(e,t,n){return t=t.toLowerCase(),e+(n?el(t):t)}),zp=Gi(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Up=Gi(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Vp=Vi("toLowerCase"),Gp=Gi(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Wp=Gi(function(e,t,n){return e+(n?" ":"")+Xp(t)}),Hp=Gi(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),Xp=Vi("toUpperCase"),qp=ei(function(e,t){try{return o(e,re,t)}catch(e){return Zs(e)?e:new ec(e)}}),Yp=po(function(e,t){return s(t,function(t){t=Zo(t),Jn(e,t,np(e[t],e))}),e}),Zp=qi(),Kp=qi(!0),Qp=ei(function(e,t){return function(n){return Er(n,e,t)}}),Jp=ei(function(e,t){return function(n){return Er(e,n,t)}}),$p=Qi(h),eh=Qi(l),th=Qi(y),nh=eo(),rh=eo(!0),ih=Ki(function(e,t){return e+t},0),oh=ro("ceil"),ah=Ki(function(e,t){return e/t},1),sh=ro("floor"),uh=Ki(function(e,t){return e*t},1),lh=ro("round"),ch=Ki(function(e,t){return e-t},0);return n.after=bs,n.ary=xs,n.assign=Ep,n.assignIn=Sp,n.assignInWith=Tp,n.assignWith=Ap,n.at=Op,n.before=ws,n.bind=np,n.bindAll=Yp,n.bindKey=rp,n.castArray=Ds,n.chain=Xa,n.chunk=$o,n.compact=ea,n.concat=ta,n.cond=wl,n.conforms=El,n.constant=Sl,n.countBy=qf,n.create=Su,n.curry=Es,n.curryRight=Ss,n.debounce=Ts,n.defaults=Pp,n.defaultsDeep=Cp,n.defer=ip,n.delay=op,n.difference=Cf,n.differenceBy=kf,n.differenceWith=Rf,n.drop=na,n.dropRight=ra,n.dropRightWhile=ia,n.dropWhile=oa,n.fill=aa,n.filter=rs,n.flatMap=is,n.flatMapDeep=os,n.flatMapDepth=as,n.flatten=la,n.flattenDeep=ca,n.flattenDepth=fa,n.flip=As,n.flow=Zp,n.flowRight=Kp,n.fromPairs=pa,n.functions=Ru,n.functionsIn=Mu,n.groupBy=Kf,n.initial=va,n.intersection=Mf,n.intersectionBy=If,n.intersectionWith=Lf,n.invert=kp,n.invertBy=Rp,n.invokeMap=Qf,n.iteratee=Ol,n.keyBy=Jf,n.keys=Nu,n.keysIn=Fu,n.map=cs,n.mapKeys=ju,n.mapValues=Bu,n.matches=Pl,n.matchesProperty=Cl,n.memoize=Os,n.merge=Ip,n.mergeWith=Lp,n.method=Qp,n.methodOf=Jp,n.mixin=kl,n.negate=Ps,n.nthArg=Il,n.omit=Dp,n.omitBy=zu,n.once=Cs,n.orderBy=fs,n.over=$p,n.overArgs=ap,n.overEvery=eh,n.overSome=th,n.partial=sp,n.partialRight=up,n.partition=$f,n.pick=Np,n.pickBy=Uu,n.property=Ll,n.propertyOf=Dl,n.pull=Df,n.pullAll=ba,n.pullAllBy=xa,n.pullAllWith=wa,n.pullAt=Nf,n.range=nh,n.rangeRight=rh,n.rearg=lp,n.reject=ds,n.remove=Ea,n.rest=ks,n.reverse=Sa,n.sampleSize=ms,n.set=Gu,n.setWith=Wu,n.shuffle=ys,n.slice=Ta,n.sortBy=ep,n.sortedUniq=Ma,n.sortedUniqBy=Ia,n.split=fl,n.spread=Rs,n.tail=La,n.take=Da,n.takeRight=Na,n.takeRightWhile=Fa,n.takeWhile=ja,n.tap=qa,n.throttle=Ms,n.thru=Ya,n.toArray=mu,n.toPairs=Fp,n.toPairsIn=jp,n.toPath=Vl,n.toPlainObject=xu,n.transform=Hu,n.unary=Is,n.union=Ff,n.unionBy=jf,n.unionWith=Bf,n.uniq=Ba,n.uniqBy=za,n.uniqWith=Ua,n.unset=Xu,n.unzip=Va,n.unzipWith=Ga,n.update=qu,n.updateWith=Yu,n.values=Zu,n.valuesIn=Ku,n.without=zf,n.words=xl,n.wrap=Ls,n.xor=Uf,n.xorBy=Vf,n.xorWith=Gf,n.zip=Wf,n.zipObject=Wa,n.zipObjectDeep=Ha,n.zipWith=Hf,n.entries=Fp,n.entriesIn=jp,n.extend=Sp,n.extendWith=Tp,kl(n,n),n.add=ih,n.attempt=qp,n.camelCase=Bp,n.capitalize=el,n.ceil=oh,n.clamp=Qu,n.clone=Ns,n.cloneDeep=js,n.cloneDeepWith=Bs,n.cloneWith=Fs,n.conformsTo=zs,n.deburr=tl,n.defaultTo=Tl,n.divide=ah,n.endsWith=nl,n.eq=Us,n.escape=rl,n.escapeRegExp=il,n.every=ns,n.find=Yf,n.findIndex=sa,n.findKey=Tu,n.findLast=Zf,n.findLastIndex=ua,n.findLastKey=Au,n.floor=sh,n.forEach=ss,n.forEachRight=us,n.forIn=Ou,n.forInRight=Pu,n.forOwn=Cu,n.forOwnRight=ku,n.get=Iu,n.gt=cp,n.gte=fp,n.has=Lu,n.hasIn=Du,n.head=ha,n.identity=Al,n.includes=ls,n.indexOf=da,n.inRange=Ju,n.invoke=Mp,n.isArguments=pp,n.isArray=hp,n.isArrayBuffer=dp,n.isArrayLike=Vs,n.isArrayLikeObject=Gs,n.isBoolean=Ws,n.isBuffer=vp,n.isDate=mp,n.isElement=Hs,n.isEmpty=Xs,n.isEqual=qs,n.isEqualWith=Ys,n.isError=Zs,n.isFinite=Ks,n.isFunction=Qs,n.isInteger=Js,n.isLength=$s,n.isMap=yp,n.isMatch=nu,n.isMatchWith=ru,n.isNaN=iu,n.isNative=ou,n.isNil=su,n.isNull=au,n.isNumber=uu,n.isObject=eu,n.isObjectLike=tu,n.isPlainObject=lu,n.isRegExp=gp,n.isSafeInteger=cu,n.isSet=_p,n.isString=fu,n.isSymbol=pu,n.isTypedArray=bp,n.isUndefined=hu,n.isWeakMap=du,n.isWeakSet=vu,n.join=ma,n.kebabCase=zp,n.last=ya,n.lastIndexOf=ga,n.lowerCase=Up,n.lowerFirst=Vp,n.lt=xp,n.lte=wp,n.max=Wl,n.maxBy=Hl,n.mean=Xl,n.meanBy=ql,n.min=Yl,n.minBy=Zl,n.stubArray=Nl,n.stubFalse=Fl,n.stubObject=jl,n.stubString=Bl,n.stubTrue=zl,n.multiply=uh,n.nth=_a,n.noConflict=Rl,n.noop=Ml,n.now=tp,n.pad=ol,n.padEnd=al,n.padStart=sl,n.parseInt=ul,n.random=$u,n.reduce=ps,n.reduceRight=hs,n.repeat=ll,n.replace=cl,n.result=Vu,n.round=lh,n.runInContext=e,n.sample=vs,n.size=gs,n.snakeCase=Gp,n.some=_s,n.sortedIndex=Aa,n.sortedIndexBy=Oa,n.sortedIndexOf=Pa,n.sortedLastIndex=Ca,n.sortedLastIndexBy=ka,n.sortedLastIndexOf=Ra,n.startCase=Wp,n.startsWith=pl,n.subtract=ch,n.sum=Kl,n.sumBy=Ql,n.template=hl,n.times=Ul,n.toFinite=yu,n.toInteger=gu,n.toLength=_u,n.toLower=dl,n.toNumber=bu,n.toSafeInteger=wu,n.toString=Eu,n.toUpper=vl,n.trim=ml,n.trimEnd=yl,n.trimStart=gl,n.truncate=_l,n.unescape=bl,n.uniqueId=Gl,n.upperCase=Hp,n.upperFirst=Xp,n.each=ss,n.eachRight=us,n.first=ha,kl(n,function(){var e={};return fr(n,function(t,r){pc.call(n.prototype,r)||(e[r]=t)}),e}(),{chain:!1}),n.VERSION="4.17.5",s(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){n[e].placeholder=n}),s(["drop","take"],function(e,t){g.prototype[e]=function(n){n=n===re?1:Uc(gu(n),0);var r=this.__filtered__&&!t?new g(this):this.clone();return r.__filtered__?r.__takeCount__=Vc(n,r.__takeCount__):r.__views__.push({size:Vc(n,De),type:e+(r.__dir__<0?"Right":"")}),r},g.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),s(["filter","map","takeWhile"],function(e,t){var n=t+1,r=n==Ce||3==n;g.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:go(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),s(["head","last"],function(e,t){var n="take"+(t?"Right":"");g.prototype[e]=function(){return this[n](1).value()[0]}}),s(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");g.prototype[e]=function(){return this.__filtered__?new g(this):this[n](1)}}),g.prototype.compact=function(){return this.filter(Al)},g.prototype.find=function(e){return this.filter(e).head()},g.prototype.findLast=function(e){return this.reverse().find(e)},g.prototype.invokeMap=ei(function(e,t){return"function"==typeof e?new g(this):this.map(function(n){return Er(n,e,t)})}),g.prototype.reject=function(e){return this.filter(Ps(go(e)))},g.prototype.slice=function(e,t){e=gu(e);var n=this;return n.__filtered__&&(e>0||t<0)?new g(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==re&&(t=gu(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)},g.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},g.prototype.toArray=function(){return this.take(De)},fr(g.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),o=/^(?:head|last)$/.test(t),a=n[o?"take"+("last"==t?"Right":""):t],s=o||/^find/.test(t);a&&(n.prototype[t]=function(){var t=this.__wrapped__,u=o?[1]:arguments,l=t instanceof g,c=u[0],f=l||hp(t),p=function(e){var t=a.apply(n,d([e],u));return o&&h?t[0]:t};f&&r&&"function"==typeof c&&1!=c.length&&(l=f=!1);var h=this.__chain__,v=!!this.__actions__.length,m=s&&!h,y=l&&!v;if(!s&&f){t=y?t:new g(this);var _=e.apply(t,u);return _.__actions__.push({func:Ya,args:[p],thisArg:re}),new i(_,h)}return m&&y?e.apply(this,u):(_=this.thru(p),m?o?_.value()[0]:_.value():_)})}),s(["pop","push","shift","sort","splice","unshift"],function(e){var t=sc[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);n.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var n=this.value();return t.apply(hp(n)?n:[],e)}return this[r](function(n){return t.apply(hp(n)?n:[],e)})}}),fr(g.prototype,function(e,t){var r=n[t];if(r){var i=r.name+"";(ef[i]||(ef[i]=[])).push({name:t,func:r})}}),ef[Yi(re,me).name]=[{name:"wrapper",func:re}],g.prototype.clone=O,g.prototype.reverse=K,g.prototype.value=ee,n.prototype.at=Xf,n.prototype.chain=Za,n.prototype.commit=Ka,n.prototype.next=Qa,n.prototype.plant=$a,n.prototype.reverse=es,n.prototype.toJSON=n.prototype.valueOf=n.prototype.value=ts,n.prototype.first=n.prototype.head,Pc&&(n.prototype[Pc]=Ja),n}();Rn._=qn,(i=function(){return qn}.call(t,n,t,r))!==re&&(r.exports=i)}).call(this)}).call(t,n(20),n(151)(e))},function(e,t,n){"use strict";var r=n(152);n.d(t,"a",function(){return r.a});var i=(n(154),n(36),n(391),n(392),n(394),n(395),n(397),n(398),n(74),n(106),n(179)),o=n(45);i.a,o.a},function(e,t,n){"use strict";var r=n(54),i=n(153),o=n(313);e.exports=function(){function e(e,t,n,r,a,s){s!==o&&i(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";function r(e){var t=null;return Object(a.a)(e)&&e.has("layers")?t=e.get("layers").filter(function(e){return e.get("interactive")}).map(function(e){return e.get("id")}).toJS():Array.isArray(e.layers)&&(t=e.layers.filter(function(e){return e.interactive}).map(function(e){return e.id})),t}function i(e,t,n){function r(e){return e.map(function(){return!0}).delete("layers").delete("sources").toJS()}var i=e&&r(e)||{},a=r(t);if(!e||function(){var n=Object.keys(i),r=Object.keys(a);return n.length!==r.length||!!r.some(function(n){return e.get(n)!==t.get(n)})}())return void n.setStyle(t.toJS());var u=Object(s.a)(e,t),l=u.sourcesDiff,c=u.layersDiff;if(c.updates.some(function(e){return e.layer.get("ref")}))return void n.setStyle(t.toJS());var f=!0,p=!1,h=void 0;try{for(var d,v=l.enter[Symbol.iterator]();!(f=(d=v.next()).done);f=!0){var m=d.value;n.addSource(m.id,m.source.toJS())}}catch(e){p=!0,h=e}finally{try{!f&&v.return&&v.return()}finally{if(p)throw h}}var y=!0,g=!1,_=void 0;try{for(var b,x=l.update[Symbol.iterator]();!(y=(b=x.next()).done);y=!0){o(n,b.value)}}catch(e){g=!0,_=e}finally{try{!y&&x.return&&x.return()}finally{if(g)throw _}}var w=!0,E=!1,S=void 0;try{for(var T,A=l.exit[Symbol.iterator]();!(w=(T=A.next()).done);w=!0){var O=T.value;n.removeSource(O.id)}}catch(e){E=!0,S=e}finally{try{!w&&A.return&&A.return()}finally{if(E)throw S}}var P=!0,C=!1,k=void 0;try{for(var R,M=c.exiting[Symbol.iterator]();!(P=(R=M.next()).done);P=!0){var I=R.value;n.style.getLayer(I.id)&&n.removeLayer(I.id)}}catch(e){C=!0,k=e}finally{try{!P&&M.return&&M.return()}finally{if(C)throw k}}var L=!0,D=!1,N=void 0;try{for(var F,j=c.updates[Symbol.iterator]();!(L=(F=j.next()).done);L=!0){var B=F.value;B.enter||n.removeLayer(B.id),n.addLayer(B.layer.toJS(),B.before)}}catch(e){D=!0,N=e}finally{try{!L&&j.return&&j.return()}finally{if(D)throw N}}}function o(e,t){var n=t.source.toJS();if("geojson"===n.type){var r=e.getSource(t.id);if("geojson"===r.type){var i=r.workerOptions;if((void 0===n.maxzoom||n.maxzoom===i.geojsonVtOptions.maxZoom)&&(void 0===n.buffer||n.buffer===i.geojsonVtOptions.buffer)&&(void 0===n.tolerance||n.tolerance===i.geojsonVtOptions.tolerance)&&(void 0===n.cluster||n.cluster===i.cluster)&&(void 0===n.clusterRadius||n.clusterRadius===i.superclusterOptions.radius)&&(void 0===n.clusterMaxZoom||n.clusterMaxZoom===i.superclusterOptions.maxZoom))return void r.setData(n.data)}}e.removeSource(t.id),e.addSource(t.id,n)}t.a=r,t.b=i;var a=n(155),s=n(315)},function(e,t,n){"use strict";function r(e,t){var n=e.get("sources"),r=t.get("sources"),i=[],o=[],a=[],s=n.keySeq().toArray(),u=r.keySeq().toArray(),l=!0,c=!1,f=void 0;try{for(var p,h=s[Symbol.iterator]();!(l=(p=h.next()).done);l=!0){var d=p.value,v=r.get(d);v?v.equals(n.get(d))||o.push({id:d,source:r.get(d)}):a.push({id:d,source:n.get(d)})}}catch(e){c=!0,f=e}finally{try{!l&&h.return&&h.return()}finally{if(c)throw f}}var m=!0,y=!1,g=void 0;try{for(var _,b=u[Symbol.iterator]();!(m=(_=b.next()).done);m=!0){var x=_.value;n.get(x)||i.push({id:x,source:r.get(x)})}}catch(e){y=!0,g=e}finally{try{!m&&b.return&&b.return()}finally{if(y)throw g}}return{enter:i,update:o,exit:a}}function i(e,t){var n=e.get("layers"),r=t.get("layers"),i=[],o=[],a={},s={};r.forEach(function(e,t){var n=e.get("id"),i=r.get(t+1);s[n]={layer:e,id:n,before:i?i.get("id"):null,enter:!0}}),n.forEach(function(e,t){var r=e.get("id"),i=n.get(t+1);a[r]={layer:e,id:r,before:i?i.get("id"):null},s[r]?s[r].enter=!1:o.push(a[r])});var u=!0,l=!1,c=void 0;try{for(var f,p=r.reverse()[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var h=f.value,d=h.get("id");a[d]&&a[d].layer.equals(s[d].layer)&&a[d].before===s[d].before||i.push(s[d])}}catch(e){l=!0,c=e}finally{try{!u&&p.return&&p.return()}finally{if(l)throw c}}return{updates:i,exiting:o}}function o(e,t){return{sourcesDiff:r(e,t),layersDiff:i(e,t)}}t.a=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(9),o=n(72),a=n(60),s=n(57),u=n.n(s),l=n(58),c=n.n(l),f=n(56),p=n.n(f),h=n(104),d=n.n(h),v=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),y=Object(o.a)(),g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width,i=t.height,a=t.viewMatrix,s=void 0===a?y:a,l=t.projectionMatrix,f=void 0===l?y:l;r(this,e),this.width=n||1,this.height=i||1,this.scale=1,this.viewMatrix=s,this.projectionMatrix=f;var h=Object(o.a)();p()(h,h,this.projectionMatrix),p()(h,h,this.viewMatrix),this.viewProjectionMatrix=h;var v=Object(o.a)();u()(v,v,[this.width/2,-this.height/2,1]),c()(v,v,[1,-1,0]),p()(v,v,this.viewProjectionMatrix);var m=d()(Object(o.a)(),v);if(!m)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=v,this.pixelUnprojectionMatrix=m,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return m(e,[{key:"equals",value:function(t){return t instanceof e&&(t.width===this.width&&t.height===this.height&&Object(i.d)(t.projectionMatrix,this.projectionMatrix)&&Object(i.d)(t.viewMatrix,this.viewMatrix))}},{key:"project",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.topLeft,r=void 0===n||n,i=v(e,3),o=i[0],s=i[1],u=i[2],l=this.projectFlat([o,s]),c=v(l,2),f=c[0],p=c[1],h=Object(a.j)([f,p,u],this.pixelProjectionMatrix),d=v(h,2),m=d[0],y=d[1],g=r?y:this.height-y;return 2===e.length?[m,g]:[m,g,h[2]]}},{key:"unproject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.topLeft,r=void 0===n||n,i=t.targetZ,o=v(e,3),s=o[0],u=o[1],l=o[2],c=r?u:this.height-u,f=Object(a.g)([s,c,l],this.pixelUnprojectionMatrix,i),p=this.unprojectFlat(f),h=v(p,2),d=h[0],m=h[1];return Number.isFinite(l)?[d,m,f[2]]:Number.isFinite(i)?[d,m,i]:[d,m]}},{key:"projectFlat",value:function(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return e}},{key:"unprojectFlat",value:function(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return e}}]),e}();t.a=g},function(e,t){function n(e,t,n){return e[0]=t,e[1]=n,e}e.exports=n},function(e,t){function n(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}e.exports=n},function(e,t){function n(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e}e.exports=n},function(e,t){function n(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e}e.exports=n},function(e,t){function n(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}e.exports=n},function(e,t){function n(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e}e.exports=n},function(e,t){function n(e,t){var n=t[0],r=t[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i),e}e.exports=n},function(e,t){function n(e,t){return e[0]*t[0]+e[1]*t[1]}e.exports=n},function(e,t){function n(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e}e.exports=n},function(e,t){function n(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}e.exports=n},function(e,t,n){function r(e,t){var n=i(e[0],e[1],e[2]),r=i(t[0],t[1],t[2]);o(n,n),o(r,r);var s=a(n,r);return s>1?0:Math.acos(s)}e.exports=r;var i=n(328),o=n(158),a=n(159)},function(e,t){function n(e,t,n){var r=new Float32Array(3);return r[0]=e,r[1]=t,r[2]=n,r}e.exports=n},function(e,t){function n(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}e.exports=n},function(e,t){function n(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}e.exports=n},function(e,t){function n(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}e.exports=n},function(e,t){function n(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}e.exports=n},function(e,t){function n(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}e.exports=n},function(e,t){function n(e,t,n,r){var i=[],o=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e}e.exports=n},function(e,t){function n(e,t,n,r){var i=[],o=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e}e.exports=n},function(e,t){function n(e,t,n,r){var i=[],o=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e}e.exports=n},function(e,t){function n(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],o=t[3]-e[3];return Math.sqrt(n*n+r*r+i*i+o*o)}e.exports=n},function(e,t){function n(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}e.exports=n},function(e,t){function n(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e}e.exports=n},function(e,t){function n(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e}e.exports=n},function(e,t){function n(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}e.exports=n},function(e,t){function n(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}e.exports=n},function(e,t,n){(function(e,r){function i(e,n){var r={seen:[],stylize:a};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),v(n)?r.showHidden=n:n&&t._extend(r,n),x(r.showHidden)&&(r.showHidden=!1),x(r.depth)&&(r.depth=2),x(r.colors)&&(r.colors=!1),x(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),u(r,e,r.depth)}function o(e,t){var n=i.styles[t];return n?"\x1b["+i.colors[n][0]+"m"+e+"\x1b["+i.colors[n][1]+"m":e}function a(e,t){return e}function s(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function u(e,n,r){if(e.customInspect&&n&&A(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return _(i)||(i=u(e,i,r)),i}var o=l(e,n);if(o)return o;var a=Object.keys(n),v=s(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(n)),T(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return c(n);if(0===a.length){if(A(n)){var m=n.name?": "+n.name:"";return e.stylize("[Function"+m+"]","special")}if(w(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(S(n))return e.stylize(Date.prototype.toString.call(n),"date");if(T(n))return c(n)}var y="",g=!1,b=["{","}"];if(d(n)&&(g=!0,b=["[","]"]),A(n)){y=" [Function"+(n.name?": "+n.name:"")+"]"}if(w(n)&&(y=" "+RegExp.prototype.toString.call(n)),S(n)&&(y=" "+Date.prototype.toUTCString.call(n)),T(n)&&(y=" "+c(n)),0===a.length&&(!g||0==n.length))return b[0]+y+b[1];if(r<0)return w(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special");e.seen.push(n);var x;return x=g?f(e,n,r,v,a):a.map(function(t){return p(e,n,r,v,t,g)}),e.seen.pop(),h(x,y,b)}function l(e,t){if(x(t))return e.stylize("undefined","undefined");if(_(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return g(t)?e.stylize(""+t,"number"):v(t)?e.stylize(""+t,"boolean"):m(t)?e.stylize("null","null"):void 0}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,n,r,i){for(var o=[],a=0,s=t.length;a<s;++a)R(t,String(a))?o.push(p(e,t,n,r,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(p(e,t,n,r,i,!0))}),o}function p(e,t,n,r,i,o){var a,s,l;if(l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},l.get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),R(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(l.value)<0?(s=m(n)?u(e,l.value,null):u(e,l.value,n-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),x(a)){if(o&&i.match(/^\d+$/))return s;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function h(e,t,n){var r=0;return e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function d(e){return Array.isArray(e)}function v(e){return"boolean"===typeof e}function m(e){return null===e}function y(e){return null==e}function g(e){return"number"===typeof e}function _(e){return"string"===typeof e}function b(e){return"symbol"===typeof e}function x(e){return void 0===e}function w(e){return E(e)&&"[object RegExp]"===P(e)}function E(e){return"object"===typeof e&&null!==e}function S(e){return E(e)&&"[object Date]"===P(e)}function T(e){return E(e)&&("[object Error]"===P(e)||e instanceof Error)}function A(e){return"function"===typeof e}function O(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e}function P(e){return Object.prototype.toString.call(e)}function C(e){return e<10?"0"+e.toString(10):e.toString(10)}function k(){var e=new Date,t=[C(e.getHours()),C(e.getMinutes()),C(e.getSeconds())].join(":");return[e.getDate(),D[e.getMonth()],t].join(" ")}function R(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var M=/%[sdj%]/g;t.format=function(e){if(!_(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,o=r.length,a=String(e).replace(M,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),s=r[n];n<o;s=r[++n])m(s)||!E(s)?a+=" "+s:a+=" "+i(s);return a},t.deprecate=function(n,i){function o(){if(!a){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?console.trace(i):console.error(i),a=!0}return n.apply(this,arguments)}if(x(e.process))return function(){return t.deprecate(n,i).apply(this,arguments)};if(!0===r.noDeprecation)return n;var a=!1;return o};var I,L={};t.debuglog=function(e){if(x(I)&&(I=Object({NODE_ENV:"production",PUBLIC_URL:"/isotransit"}).NODE_DEBUG||""),e=e.toUpperCase(),!L[e])if(new RegExp("\\b"+e+"\\b","i").test(I)){var n=r.pid;L[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else L[e]=function(){};return L[e]},t.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=d,t.isBoolean=v,t.isNull=m,t.isNullOrUndefined=y,t.isNumber=g,t.isString=_,t.isSymbol=b,t.isUndefined=x,t.isRegExp=w,t.isObject=E,t.isDate=S,t.isError=T,t.isFunction=A,t.isPrimitive=O,t.isBuffer=n(344);var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",k(),t.format.apply(t,arguments))},t.inherits=n(345),t._extend=function(e,t){if(!t||!E(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(t,n(20),n(27))},function(e,t){e.exports=function(e){return e&&"object"===typeof e&&"function"===typeof e.copy&&"function"===typeof e.fill&&"function"===typeof e.readUInt8}},function(e,t){"function"===typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t){function n(e){var t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=e[9],f=e[10],p=e[11],h=e[12],d=e[13],v=e[14],m=e[15];return(t*a-n*o)*(f*m-p*v)-(t*s-r*o)*(c*m-p*d)+(t*u-i*o)*(c*v-f*d)+(n*s-r*a)*(l*m-p*h)-(n*u-i*a)*(l*v-f*h)+(r*u-i*s)*(l*d-c*h)}e.exports=n},function(e,t){function n(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n+n,s=r+r,u=i+i,l=n*a,c=r*a,f=r*s,p=i*a,h=i*s,d=i*u,v=o*a,m=o*s,y=o*u;return e[0]=1-f-d,e[1]=c+y,e[2]=p-m,e[3]=0,e[4]=c-y,e[5]=1-l-d,e[6]=h+v,e[7]=0,e[8]=p+m,e[9]=h-v,e[10]=1-l-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}e.exports=n},function(e,t){function n(e,t,n,r,i,o,a){var s=1/(n-t),u=1/(i-r),l=1/(o-a);return e[0]=2*o*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*u,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(i+r)*u,e[10]=(a+o)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*l,e[15]=0,e}e.exports=n},function(e,t){function n(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}e.exports=n},function(e,t){function n(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],o=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=o,e[11]=t[14],e[12]=i,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}e.exports=n},function(e,t){function n(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e}e.exports=n},function(e,t){function n(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,e[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,e[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,e[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,e}e.exports=n},function(e,t){function n(e,t){var n,r=t[0]+t[4]+t[8];if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[3*i+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;n=Math.sqrt(t[3*i+i]-t[3*o+o]-t[3*a+a]+1),e[i]=.5*n,n=.5/n,e[3]=(t[3*o+a]-t[3*a+o])*n,e[o]=(t[3*o+i]+t[3*i+o])*n,e[a]=(t[3*a+i]+t[3*i+a])*n}return e}e.exports=n},function(e,t){function n(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}e.exports=n},function(e,t,n){e.exports=n(356)},function(e,t){function n(e){var t=e[0],n=e[1],r=e[2],i=e[3];return Math.sqrt(t*t+n*n+r*r+i*i)}e.exports=n},function(e,t,n){e.exports=n(358)},function(e,t){function n(e){var t=e[0],n=e[1],r=e[2],i=e[3];return t*t+n*n+r*r+i*i}e.exports=n},function(e,t,n){e.exports=n(167)},function(e,t,n){function r(e,t,n){var r=i(t,n);return r<-.999999?(o(c,f,t),a(c)<1e-6&&o(c,p,t),s(c,c),l(e,c,Math.PI),e):r>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(o(c,t,n),e[0]=c[0],e[1]=c[1],e[2]=c[2],e[3]=1+r,u(e,e))}var i=n(159),o=n(161),a=n(172),s=n(158),u=n(173),l=n(174);e.exports=r;var c=[0,0,0],f=[1,0,0],p=[0,1,0]},function(e,t,n){e.exports=n(164)},function(e,t){function n(e,t){var n=t[0],r=t[1],i=t[2];return e[0]=n,e[1]=r,e[2]=i,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),e}e.exports=n},function(e,t){function n(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}e.exports=n},function(e,t){function n(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*n+r*r+i*i+o*o,s=a?1/a:0;return e[0]=-n*s,e[1]=-r*s,e[2]=-i*s,e[3]=o*s,e}e.exports=n},function(e,t,n){e.exports=n(168)},function(e,t){function n(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=n[0],u=n[1],l=n[2],c=n[3];return e[0]=r*c+a*s+i*l-o*u,e[1]=i*c+a*u+o*s-r*l,e[2]=o*c+a*l+r*u-i*s,e[3]=a*c-r*s-i*u-o*l,e}e.exports=n},function(e,t){function n(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u+a*s,e[1]=i*u+o*s,e[2]=o*u-i*s,e[3]=a*u-r*s,e}e.exports=n},function(e,t){function n(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u-o*s,e[1]=i*u+a*s,e[2]=o*u+r*s,e[3]=a*u-i*s,e}e.exports=n},function(e,t){function n(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u+i*s,e[1]=i*u-r*s,e[2]=o*u+a*s,e[3]=a*u-o*s,e}e.exports=n},function(e,t,n){e.exports=n(102)},function(e,t,n){e.exports=n(163)},function(e,t){function n(e,t,n,r){var i,o,a,s,u,l=t[0],c=t[1],f=t[2],p=t[3],h=n[0],d=n[1],v=n[2],m=n[3];return o=l*h+c*d+f*v+p*m,o<0&&(o=-o,h=-h,d=-d,v=-v,m=-m),1-o>1e-6?(i=Math.acos(o),a=Math.sin(i),s=Math.sin((1-r)*i)/a,u=Math.sin(r*i)/a):(s=1-r,u=r),e[0]=s*l+u*h,e[1]=s*c+u*d,e[2]=s*f+u*v,e[3]=s*p+u*m,e}e.exports=n},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return e>=0&&e<6}function s(e){if(e<0&&e>=6)throw new Error(d);return e}var u=n(69),l=n(18),c=n(169),f=n(171),p=n(70),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d="Unknown Euler angle order",v=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.DefaultOrder;r(this,t);var s=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return arguments.length>0&&Array.isArray(arguments[0])?s.fromVector3.apply(s,arguments):s.set(e,n,o,a),s}return o(t,e),h(t,[{key:"ELEMENTS",get:function(){return 4}}],[{key:"rotationOrder",value:function(e){return t.RotationOrders[e]}},{key:"ZYX",get:function(){return 0}},{key:"YXZ",get:function(){return 1}},{key:"XZY",get:function(){return 2}},{key:"ZXY",get:function(){return 3}},{key:"YZX",get:function(){return 4}},{key:"XYZ",get:function(){return 5}},{key:"RollPitchYaw",get:function(){return 0}},{key:"DefaultOrder",get:function(){return t.ZYX}},{key:"RotationOrders",get:function(){return["ZYX","YXZ","XZY","ZXY","YZX","XYZ"]}}]),h(t,[{key:"copy",value:function(e){for(var t=0;t<3;++t)this[t]=e[t];return this[3]=Number.isFinite(e[3])||this.order,this.check(),this}},{key:"set",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments[3];return this[0]=e,this[1]=t,this[2]=n,this[3]=Number.isFinite(r)?r:this[3],this.check(),this}},{key:"validate",value:function(){return a(this[3])&&Number.isFinite(this[0])&&Number.isFinite(this[1])&&Number.isFinite(this[2])}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e}},{key:"toArray4",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e[t+3]=this[3],e}},{key:"toVector3",value:function(e){return e?e.set(this[0],this[1],this[2]):new p.a(this[0],this[1],this[2])}},{key:"fromVector3",value:function(e,t){return this.set(e[0],e[1],e[2],Number.isFinite(t)?t:this[3])}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this[0]=e[0+t],this[1]=e[1+t],this[2]=e[2+t],void 0!==e[3]&&(this[3]=e[3]),this.check(),this}},{key:"fromRollPitchYaw",value:function(e,n,r){return this.set(e,n,r,t.ZYX)}},{key:"fromQuaternion",value:function(e,t){return this._fromRotationMatrix(c.a.fromQuaternion(e),t),this.check(),this}},{key:"fromRotationMatrix",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.DefaultOrder;return this._fromRotationMatrix(e,n),this.check(),this}},{key:"getRotationMatrix",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c.a;return this._getRotationMatrix(e),e}},{key:"getQuaternion",value:function(){var e=new f.a;switch(this[4]){case t.XYZ:return e.rotateX(this[0]).rotateY(this[1]).rotateZ(this[2]);case t.YXZ:return e.rotateY(this[0]).rotateX(this[1]).rotateZ(this[2]);case t.ZXY:return e.rotateZ(this[0]).rotateX(this[1]).rotateY(this[2]);case t.ZYX:return e.rotateZ(this[0]).rotateY(this[1]).rotateX(this[2]);case t.YZX:return e.rotateY(this[0]).rotateZ(this[1]).rotateX(this[2]);case t.XZY:return e.rotateX(this[0]).rotateZ(this[1]).rotateY(this[2]);default:throw new Error(d)}}},{key:"_fromRotationMatrix",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.DefaultOrder,r=e.elements,i=r[0],o=r[4],a=r[8],s=r[1],u=r[5],c=r[9],f=r[2],p=r[6],h=r[10];switch(n=n||this[3]){case t.XYZ:this[1]=Math.asin(Object(l.b)(a,-1,1)),Math.abs(a)<.99999?(this[0]=Math.atan2(-c,h),this[2]=Math.atan2(-o,i)):(this[0]=Math.atan2(p,u),this[2]=0);break;case t.YXZ:this[0]=Math.asin(-Object(l.b)(c,-1,1)),Math.abs(c)<.99999?(this[1]=Math.atan2(a,h),this[2]=Math.atan2(s,u)):(this[1]=Math.atan2(-f,i),this[2]=0);break;case t.ZXY:this[0]=Math.asin(Object(l.b)(p,-1,1)),Math.abs(p)<.99999?(this[1]=Math.atan2(-f,h),this[2]=Math.atan2(-o,u)):(this[1]=0,this[2]=Math.atan2(s,i));break;case t.ZYX:this[1]=Math.asin(-Object(l.b)(f,-1,1)),Math.abs(f)<.99999?(this[0]=Math.atan2(p,h),this[2]=Math.atan2(s,i)):(this[0]=0,this[2]=Math.atan2(-o,u));break;case t.YZX:this[2]=Math.asin(Object(l.b)(s,-1,1)),Math.abs(s)<.99999?(this[0]=Math.atan2(-c,u),this[1]=Math.atan2(-f,i)):(this[0]=0,this[1]=Math.atan2(a,h));break;case t.XZY:this[2]=Math.asin(-Object(l.b)(o,-1,1)),Math.abs(o)<.99999?(this[0]=Math.atan2(p,u),this[1]=Math.atan2(a,i)):(this[0]=Math.atan2(-c,h),this[1]=0);break;default:throw new Error(d)}return this[3]=n,this}},{key:"_getRotationMatrix",value:function(){var e=new c.a,n=this.x,r=this.y,i=this.z,o=Math.cos(n),a=Math.cos(r),s=Math.cos(i),u=Math.sin(n),l=Math.sin(r),f=Math.sin(i);switch(this[3]){case t.XYZ:var p=o*s,h=o*f,v=u*s,m=u*f;e[0]=a*s,e[4]=-a*f,e[8]=l,e[1]=h+v*l,e[5]=p-m*l,e[9]=-u*a,e[2]=m-p*l,e[6]=v+h*l,e[10]=o*a;break;case t.YXZ:var y=a*s,g=a*f,_=l*s,b=l*f;e[0]=y+b*u,e[4]=_*u-g,e[8]=o*l,e[1]=o*f,e[5]=o*s,e[9]=-u,e[2]=g*u-_,e[6]=b+y*u,e[10]=o*a;break;case t.ZXY:var x=a*s,w=a*f,E=l*s,S=l*f;e[0]=x-S*u,e[4]=-o*f,e[8]=E+w*u,e[1]=w+E*u,e[5]=o*s,e[9]=S-x*u,e[2]=-o*l,e[6]=u,e[10]=o*a;break;case t.ZYX:var T=o*s,A=o*f,O=u*s,P=u*f;e[0]=a*s,e[4]=O*l-A,e[8]=T*l+P,e[1]=a*f,e[5]=P*l+T,e[9]=A*l-O,e[2]=-l,e[6]=u*a,e[10]=o*a;break;case t.YZX:var C=o*a,k=o*l,R=u*a,M=u*l;e[0]=a*s,e[4]=M-C*f,e[8]=R*f+k,e[1]=f,e[5]=o*s,e[9]=-u*s,e[2]=-l*s,e[6]=k*f+R,e[10]=C-M*f;break;case t.XZY:var I=o*a,L=o*l,D=u*a,N=u*l;e[0]=a*s,e[4]=-f,e[8]=l*s,e[1]=I*f+N,e[5]=o*s,e[9]=L*f-D,e[2]=D*f-L,e[6]=u*s,e[10]=N*f+I;break;default:throw new Error(d)}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}},{key:"x",get:function(){return this[0]},set:function(e){return this[0]=Object(l.a)(e)}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=Object(l.a)(e)}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=Object(l.a)(e)}},{key:"alpha",get:function(){return this[0]},set:function(e){return this[0]=Object(l.a)(e)}},{key:"beta",get:function(){return this[1]},set:function(e){return this[1]=Object(l.a)(e)}},{key:"gamma",get:function(){return this[2]},set:function(e){return this[2]=Object(l.a)(e)}},{key:"phi",get:function(){return this[0]},set:function(e){return this[0]=Object(l.a)(e)}},{key:"theta",get:function(){return this[1]},set:function(e){return this[1]=Object(l.a)(e)}},{key:"psi",get:function(){return this[2]},set:function(e){return this[2]=Object(l.a)(e)}},{key:"roll",get:function(){return this[0]},set:function(e){return this[0]=Object(l.a)(e)}},{key:"pitch",get:function(){return this[1]},set:function(e){return this[1]=Object(l.a)(e)}},{key:"yaw",get:function(){return this[2]},set:function(e){return this[2]=Object(l.a)(e)}},{key:"order",get:function(){return this[3]},set:function(e){return this[3]=s(e)}}]),t}(u.a);t.a=v},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(18),o=n(70),a=n(172),s=n.n(a),u=n(1),l=n.n(u),c=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=6371e3,h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.phi,i=t.theta,o=t.radius,a=t.bearing,s=t.pitch,u=(t.altitude,t.radiusScale),l=void 0===u?p:u;r(this,e),0===arguments.length?(this.phi=0,this.theta=0,this.radius=1):Number.isFinite(n)||Number.isFinite(i)?(this.phi=n||0,this.theta=i||0):(Number.isFinite(a)||Number.isFinite(s))&&(this.bearing=a||0,this.pitch=s||0),this.radius=o||1,this.radiusScale=l||1,this.check()}return f(e,[{key:"toString",value:function(){return this.formatString(i.c)}},{key:"formatString",value:function(e){var t=e.printTypes,n=(e.printDegrees,i.f);return(t?"Spherical":"")+"[rho:"+n(this.radius)+",theta:"+n(this.theta)+",phi:"+n(this.phi)+"]"}},{key:"equals",value:function(e){return Object(i.e)(this.radius,e.radius)&&Object(i.e)(this.theta,e.theta)&&Object(i.e)(this.phi,e.phi)}},{key:"exactEquals",value:function(e){return this.radius===e.radius&&this.theta===e.theta&&this.phi===e.phi}},{key:"set",value:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this.check()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this.check()}},{key:"fromLngLatZ",value:function(e){var t=c(e,3),n=t[0],r=t[1],o=t[2];this.radius=1+o/this.radiusScale,this.phi=Object(i.g)(r),this.theta=Object(i.g)(n)}},{key:"fromVector3",value:function(e){return this.radius=s()(e),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e[0],e[1]),this.phi=Math.acos(Object(i.b)(e[2]/this.radius,-1,1))),this.check()}},{key:"toVector3",value:function(){return new o.a(0,0,this.radius).rotateX({radians:this.theta}).rotateZ({radians:this.phi})}},{key:"makeSafe",value:function(){this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi))}},{key:"check",value:function(){return l()(Number.isFinite(this.phi)&&Number.isFinite(this.theta)&&this.radius>0),this}},{key:"bearing",get:function(){return 180-Object(i.d)(this.phi)},set:function(e){this.phi=Math.PI-Object(i.g)(e)}},{key:"pitch",get:function(){return Object(i.d)(this.theta)},set:function(e){this.theta=Object(i.g)(e)}},{key:"longitude",get:function(){return Object(i.d)(this.phi)}},{key:"latitude",get:function(){return Object(i.d)(this.theta)}},{key:"lng",get:function(){return Object(i.d)(this.phi)}},{key:"lat",get:function(){return Object(i.d)(this.theta)}},{key:"z",get:function(){return(this.radius-1)*this.radiusScale}}]),e}();t.a=h},function(e,t,n){"use strict";function r(e){var t=e.width,n=e.height,r=e.longitude,u=e.latitude,l=e.zoom,c=e.pitch,f=void 0===c?0:c,p=e.bearing,h=void 0===p?0:p;(r<-180||r>180)&&(r=Object(o.c)(r+180,360)-180),(h<-180||h>180)&&(h=Object(o.c)(h+180,360)-180);var d=new i.a({width:t,height:n,longitude:r,latitude:u,zoom:l}),v=d.project([r,a])[1],m=d.project([r,s])[1],y=0;return m-v<n&&(l+=Math.log2(n/(m-v)),d=new i.a({width:t,height:n,longitude:r,latitude:u,zoom:l}),v=d.project([r,a])[1],m=d.project([r,s])[1]),v>0?y=v:m<n&&(y=m-n),y&&(u=d.unproject([t/2,n/2+y])[1]),{width:t,height:n,longitude:r,latitude:u,zoom:l,pitch:f,bearing:h}}t.a=r;var i=n(55),o=n(72),a=85.05113,s=-85.05113},function(e,t,n){"use strict";function r(e,t,n){var r={},l=e.zoom,c=[e.longitude,e.latitude],f=Object(a.k)(l),p=t.zoom,h=[t.longitude,t.latitude],d=Object(a.k)(p-l),v=new i.b(Object(a.f)(c,f)),m=new i.b(Object(a.f)(h,f)),y=m.subtract(v),g=Math.max(e.width,e.height),_=g/d,b=Math.sqrt(y.x*y.x+y.y*y.y);if(Math.abs(b)<s){var x=!0,w=!1,E=void 0;try{for(var S,T=u[Symbol.iterator]();!(x=(S=T.next()).done);x=!0){var A=S.value,O=e[A],P=t[A];r[A]=Object(o.b)(O,P,n)}}catch(e){w=!0,E=e}finally{try{!x&&T.return&&T.return()}finally{if(w)throw E}}return r}var C=1.414*1.414,k=(_*_-g*g+C*C*b*b)/(2*g*C*b),R=(_*_-g*g-C*C*b*b)/(2*_*C*b),M=Math.log(Math.sqrt(k*k+1)-k),I=Math.log(Math.sqrt(R*R+1)-R),L=(I-M)/1.414,D=n*L,N=Math.cosh(M)/Math.cosh(M+1.414*D),F=g*((Math.cosh(M)*Math.tanh(M+1.414*D)-Math.sinh(M))/C)/b,j=1/N,B=l+Object(a.h)(j),z=Object(a.i)(v.add(y.scale(F)).scale(j),Object(a.k)(B));return r.longitude=z[0],r.latitude=z[1],r.zoom=B,r}t.a=r;var i=n(9),o=n(72),a=n(60),s=.01,u=["longitude","latitude","zoom"]},function(e,t,n){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"component";e.debug&&s.a.checkPropTypes(p,e,"prop",t)}var a=n(2),s=n.n(a),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=!("object"===("undefined"===typeof e?"undefined":l(e))&&"[object process]"===String(e)&&!e.browser),f=c?n(378):null,p={container:s.a.object,mapboxApiAccessToken:s.a.string,attributionControl:s.a.bool,preserveDrawingBuffer:s.a.bool,onLoad:s.a.func,onError:s.a.func,reuseMaps:s.a.bool,transformRequest:s.a.func,mapStyle:s.a.string,visible:s.a.bool,width:s.a.number.isRequired,height:s.a.number.isRequired,longitude:s.a.number.isRequired,latitude:s.a.number.isRequired,zoom:s.a.number.isRequired,bearing:s.a.number,pitch:s.a.number,altitude:s.a.number},h={mapboxApiAccessToken:function(){var t=null;if("undefined"!==typeof window&&window.location){var n=window.location.search.match(/access_token=([^&\/]*)/);t=n&&n[1]}return t||"undefined"===typeof e||(t=t||Object({NODE_ENV:"production",PUBLIC_URL:"/isotransit"}).MapboxAccessToken),t||null}(),preserveDrawingBuffer:!1,attributionControl:!0,preventStyleDiffing:!1,onLoad:i,onError:i,reuseMaps:!1,transformRequest:null,mapStyle:"mapbox://styles/mapbox/light-v8",visible:!0,bearing:0,pitch:0,altitude:1.5},d=function(){function e(t){if(r(this,e),!f)throw new Error("Mapbox not supported");!e.initialized&&console.debug&&(e.initialized=!0,console.debug("react-map-gl: using mapbox-gl v"+f.version)),this.props={},this._initialize(t)}return u(e,null,[{key:"supported",value:function(){return f&&f.supported()}}]),u(e,[{key:"finalize",value:function(){return f&&this._map?(this._destroy(),this):this}},{key:"setProps",value:function(e){return f&&this._map?(this._update(this.props,e),this):this}},{key:"resize",value:function(){return f&&this._map?(this._map.resize(),this):this}},{key:"getMap",value:function(){return this._map}},{key:"_create",value:function(t){if(t.reuseMaps&&e.savedMap){this._map=this.map=e.savedMap;var n=this._map.getContainer(),r=t.container;for(r.classList.add("mapboxgl-map");n.childNodes.length>0;)r.appendChild(n.childNodes[0]);this._map._container=r,e.savedMap=null,t.onLoad()}else{var i={container:t.container||document.body,center:[t.longitude,t.latitude],zoom:t.zoom,pitch:t.pitch,bearing:t.bearing,style:t.mapStyle,interactive:!1,attributionControl:t.attributionControl,preserveDrawingBuffer:t.preserveDrawingBuffer};t.transformRequest&&(i.transformRequest=t.transformRequest),this._map=this.map=new f.Map(i),this.map.once("load",t.onLoad),this.map.on("error",t.onError)}return this}},{key:"_destroy",value:function(){e.savedMap?this._map.remove():e.savedMap=this._map}},{key:"_initialize",value:function(e){e=Object.assign({},h,e),o(e,"Mapbox"),this.accessToken=e.mapboxApiAccessToken||h.mapboxApiAccessToken,f&&(this.accessToken?f.accessToken=this.accessToken:f.accessToken="no-token"),this._create(e);var t=this.map.getCanvas();t&&(t.style.outline="none"),this._updateMapViewport({},e),this._updateMapSize({},e),this.props=e}},{key:"_update",value:function(e,t){t=Object.assign({},this.props,t),o(t,"Mapbox"),this._updateMapViewport(e,t),this._updateMapSize(e,t),this.props=t}},{key:"_updateMapViewport",value:function(e,t){(t.latitude!==e.latitude||t.longitude!==e.longitude||t.zoom!==e.zoom||t.pitch!==e.pitch||t.bearing!==e.bearing||t.altitude!==e.altitude)&&(this._map.jumpTo({center:[t.longitude,t.latitude],zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.altitude!==e.altitude&&(this._map.transform.altitude=t.altitude))}},{key:"_updateMapSize",value:function(e,t){(e.width!==t.width||e.height!==t.height)&&this._map.resize()}}]),e}();t.a=d,d.propTypes=p,d.defaultProps=h}).call(t,n(27))},function(e,t,n){var r,r;!function(t){e.exports=t()}(function(){var e;return function e(t,n,i){function o(s,u){if(!n[s]){if(!t[s]){var l="function"==typeof r&&r;if(!u&&l)return r(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[s]={exports:{}};t[s][0].call(f.exports,function(e){var n=t[s][1][e];return o(n||e)},f,f.exports,e,t,n,i)}return n[s].exports}for(var a="function"==typeof r&&r,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,t,n){function r(e){var t,n=0;switch(e.type){case"Polygon":return i(e.coordinates);case"MultiPolygon":for(t=0;t<e.coordinates.length;t++)n+=i(e.coordinates[t]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(t=0;t<e.geometries.length;t++)n+=r(e.geometries[t]);return n}}function i(e){var t=0;if(e&&e.length>0){t+=Math.abs(o(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(o(e[n]))}return t}function o(e){var t,n,r,i,o,u,l,c=0,f=e.length;if(f>2){for(l=0;l<f;l++)l===f-2?(i=f-2,o=f-1,u=0):l===f-1?(i=f-1,o=0,u=1):(i=l,o=l+1,u=l+2),t=e[i],n=e[o],r=e[u],c+=(a(r[0])-a(t[0]))*Math.sin(a(n[1]));c=c*s.RADIUS*s.RADIUS/2}return c}function a(e){return e*Math.PI/180}var s=e("wgs84");t.exports.geometry=r,t.exports.ring=o},{wgs84:37}],2:[function(t,n,r){!function(t,i){"object"==typeof r&&"undefined"!=typeof n?n.exports=i():"function"==typeof e&&e.amd?e(i):t.glMatrix=i()}(this,function(){"use strict";function e(e,t,n){var r=t[0],i=t[1],o=t[2];return e[0]=r*n[0]+i*n[3]+o*n[6],e[1]=r*n[1]+i*n[4]+o*n[7],e[2]=r*n[2]+i*n[5]+o*n[8],e}function t(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,e}function n(){var e=new Float32Array(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e}function r(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u+o*s,e[1]=i*u+a*s,e[2]=r*-s+o*u,e[3]=i*-s+a*u,e}function i(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=n[0],u=n[1];return e[0]=r*s,e[1]=i*s,e[2]=o*u,e[3]=a*u,e}function o(){var e=new Float32Array(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function a(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function s(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function u(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function l(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],l=t[7],c=t[8],f=t[9],p=t[10],h=t[11],d=t[12],v=t[13],m=t[14],y=t[15],g=n*s-r*a,_=n*u-i*a,b=n*l-o*a,x=r*u-i*s,w=r*l-o*s,E=i*l-o*u,S=c*v-f*d,T=c*m-p*d,A=c*y-h*d,O=f*m-p*v,P=f*y-h*v,C=p*y-h*m,k=g*C-_*P+b*O+x*A-w*T+E*S;return k?(k=1/k,e[0]=(s*C-u*P+l*O)*k,e[1]=(i*P-r*C-o*O)*k,e[2]=(v*E-m*w+y*x)*k,e[3]=(p*w-f*E-h*x)*k,e[4]=(u*A-a*C-l*T)*k,e[5]=(n*C-i*A+o*T)*k,e[6]=(m*b-d*E-y*_)*k,e[7]=(c*E-p*b+h*_)*k,e[8]=(a*P-s*A+l*S)*k,e[9]=(r*A-n*P-o*S)*k,e[10]=(d*w-v*b+y*g)*k,e[11]=(f*b-c*w-h*g)*k,e[12]=(s*T-a*O-u*S)*k,e[13]=(n*O-r*T+i*S)*k,e[14]=(v*_-d*x-m*g)*k,e[15]=(c*x-f*_+p*g)*k,e):null}function c(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=t[8],p=t[9],h=t[10],d=t[11],v=t[12],m=t[13],y=t[14],g=t[15],_=n[0],b=n[1],x=n[2],w=n[3];return e[0]=_*r+b*s+x*f+w*v,e[1]=_*i+b*u+x*p+w*m,e[2]=_*o+b*l+x*h+w*y,e[3]=_*a+b*c+x*d+w*g,_=n[4],b=n[5],x=n[6],w=n[7],e[4]=_*r+b*s+x*f+w*v,e[5]=_*i+b*u+x*p+w*m,e[6]=_*o+b*l+x*h+w*y,e[7]=_*a+b*c+x*d+w*g,_=n[8],b=n[9],x=n[10],w=n[11],e[8]=_*r+b*s+x*f+w*v,e[9]=_*i+b*u+x*p+w*m,e[10]=_*o+b*l+x*h+w*y,e[11]=_*a+b*c+x*d+w*g,_=n[12],b=n[13],x=n[14],w=n[15],e[12]=_*r+b*s+x*f+w*v,e[13]=_*i+b*u+x*p+w*m,e[14]=_*o+b*l+x*h+w*y,e[15]=_*a+b*c+x*d+w*g,e}function f(e,t,n){var r,i,o,a,s,u,l,c,f,p,h,d,v=n[0],m=n[1],y=n[2];return t===e?(e[12]=t[0]*v+t[4]*m+t[8]*y+t[12],e[13]=t[1]*v+t[5]*m+t[9]*y+t[13],e[14]=t[2]*v+t[6]*m+t[10]*y+t[14],e[15]=t[3]*v+t[7]*m+t[11]*y+t[15]):(r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=t[8],p=t[9],h=t[10],d=t[11],e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=u,e[6]=l,e[7]=c,e[8]=f,e[9]=p,e[10]=h,e[11]=d,e[12]=r*v+s*m+f*y+t[12],e[13]=i*v+u*m+p*y+t[13],e[14]=o*v+l*m+h*y+t[14],e[15]=a*v+c*m+d*y+t[15]),e}function p(e,t,n){var r=n[0],i=n[1],o=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function h(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[4],a=t[5],s=t[6],u=t[7],l=t[8],c=t[9],f=t[10],p=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+l*r,e[5]=a*i+c*r,e[6]=s*i+f*r,e[7]=u*i+p*r,e[8]=l*i-o*r,e[9]=c*i-a*r,e[10]=f*i-s*r,e[11]=p*i-u*r,e}function d(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],u=t[3],l=t[4],c=t[5],f=t[6],p=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+l*r,e[1]=a*i+c*r,e[2]=s*i+f*r,e[3]=u*i+p*r,e[4]=l*i-o*r,e[5]=c*i-a*r,e[6]=f*i-s*r,e[7]=p*i-u*r,e}function v(e,t,n,r,i){var o=1/Math.tan(t/2),a=1/(r-i);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*a,e[15]=0,e}function m(e,t,n,r,i,o,a){var s=1/(t-n),u=1/(r-i),l=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*u,e[14]=(a+o)*l,e[15]=1,e}return function(){var e=new Float32Array(3);e[0]=0,e[1]=0,e[2]=0}(),function(){var e=new Float32Array(4);e[0]=0,e[1]=0,e[2]=0,e[3]=0}(),{vec3:{transformMat3:e},vec4:{transformMat4:t},mat2:{create:n,rotate:r,scale:i},mat3:{create:o,fromRotation:a},mat4:{create:s,identity:u,translate:f,scale:p,multiply:c,perspective:v,rotateX:h,rotateZ:d,invert:l,ortho:m}}})},{}],3:[function(e,t,n){"use strict";function r(e){return!!(i()&&o()&&a()&&s()&&u()&&l()&&c()&&f(e&&e.failIfMajorPerformanceCaveat))}function i(){return"undefined"!=typeof window&&"undefined"!=typeof document}function o(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function a(){return Function.prototype&&Function.prototype.bind}function s(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function u(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function l(){if(!("Worker"in window&&"Blob"in window))return!1;var e,t,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{t=new Worker(r),e=!0}catch(t){e=!1}return t&&t.terminate(),URL.revokeObjectURL(r),e}function c(){return"Uint8ClampedArray"in window}function f(e){return void 0===h[e]&&(h[e]=p(e)),h[e]}function p(e){var t=document.createElement("canvas"),n=Object.create(r.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=e,t.probablySupportsContext?t.probablySupportsContext("webgl",n)||t.probablySupportsContext("experimental-webgl",n):t.supportsContext?t.supportsContext("webgl",n)||t.supportsContext("experimental-webgl",n):t.getContext("webgl",n)||t.getContext("experimental-webgl",n)}"undefined"!=typeof t&&t.exports?t.exports=r:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=r);var h={};r.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}},{}],4:[function(e,t,n){"use strict";function r(e,t){this.x=e,this.y=t}t.exports=r,r.prototype={clone:function(){return new r(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,n=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=n,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=t*this.x-n*this.y,i=n*this.x+t*this.y;return this.x=r,this.y=i,this},_rotateAround:function(e,t){var n=Math.cos(e),r=Math.sin(e),i=t.x+n*(this.x-t.x)-r*(this.y-t.y),o=t.y+r*(this.x-t.x)+n*(this.y-t.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},r.convert=function(e){return e instanceof r?e:Array.isArray(e)?new r(e[0],e[1]):e}},{}],5:[function(t,n,r){!function(t,i){"object"==typeof r&&"undefined"!=typeof n?n.exports=i():"function"==typeof e&&e.amd?e(i):t.ShelfPack=i()}(this,function(){function e(e,t,n){n=n||{},this.w=e||64,this.h=t||64,this.autoResize=!!n.autoResize,this.shelves=[],this.freebins=[],this.stats={},this.bins={},this.maxId=0}function t(e,t,n){this.x=0,this.y=e,this.w=this.free=t,this.h=n}function n(e,t,n,r,i,o,a){this.id=e,this.x=t,this.y=n,this.w=r,this.h=i,this.maxw=o||r,this.maxh=a||i,this.refcount=0}return e.prototype.pack=function(e,t){e=[].concat(e),t=t||{};for(var n,r,i,o,a=[],s=0;s<e.length;s++)if(n=e[s].w||e[s].width,r=e[s].h||e[s].height,i=e[s].id,n&&r){if(!(o=this.packOne(n,r,i)))continue;t.inPlace&&(e[s].x=o.x,e[s].y=o.y,e[s].id=o.id),a.push(o)}return this.shrink(),a},e.prototype.packOne=function(e,n,r){var i,o,a,s,u={freebin:-1,shelf:-1,waste:1/0},l=0;if("string"==typeof r||"number"==typeof r){if(i=this.getBin(r))return this.ref(i),i;"number"==typeof r&&(this.maxId=Math.max(r,this.maxId))}else r=++this.maxId;for(s=0;s<this.freebins.length;s++){if(i=this.freebins[s],n===i.maxh&&e===i.maxw)return this.allocFreebin(s,e,n,r);n>i.maxh||e>i.maxw||n<=i.maxh&&e<=i.maxw&&(a=i.maxw*i.maxh-e*n)<u.waste&&(u.waste=a,u.freebin=s)}for(s=0;s<this.shelves.length;s++)if(o=this.shelves[s],l+=o.h,!(e>o.free)){if(n===o.h)return this.allocShelf(s,e,n,r);n>o.h||n<o.h&&(a=(o.h-n)*e)<u.waste&&(u.freebin=-1,u.waste=a,u.shelf=s)}if(-1!==u.freebin)return this.allocFreebin(u.freebin,e,n,r);if(-1!==u.shelf)return this.allocShelf(u.shelf,e,n,r);if(n<=this.h-l&&e<=this.w)return o=new t(l,this.w,n),this.allocShelf(this.shelves.push(o)-1,e,n,r);if(this.autoResize){var c,f,p,h;return c=f=this.h,p=h=this.w,(p<=c||e>p)&&(h=2*Math.max(e,p)),(c<p||n>c)&&(f=2*Math.max(n,c)),this.resize(h,f),this.packOne(e,n,r)}return null},e.prototype.allocFreebin=function(e,t,n,r){var i=this.freebins.splice(e,1)[0];return i.id=r,i.w=t,i.h=n,i.refcount=0,this.bins[r]=i,this.ref(i),i},e.prototype.allocShelf=function(e,t,n,r){var i=this.shelves[e],o=i.alloc(t,n,r);return this.bins[r]=o,this.ref(o),o},e.prototype.shrink=function(){if(this.shelves.length>0){for(var e=0,t=0,n=0;n<this.shelves.length;n++){var r=this.shelves[n];t+=r.h,e=Math.max(r.w-r.free,e)}this.resize(e,t)}},e.prototype.getBin=function(e){return this.bins[e]},e.prototype.ref=function(e){if(1==++e.refcount){var t=e.h;this.stats[t]=1+(0|this.stats[t])}return e.refcount},e.prototype.unref=function(e){return 0===e.refcount?0:(0==--e.refcount&&(this.stats[e.h]--,delete this.bins[e.id],this.freebins.push(e)),e.refcount)},e.prototype.clear=function(){this.shelves=[],this.freebins=[],this.stats={},this.bins={},this.maxId=0},e.prototype.resize=function(e,t){this.w=e,this.h=t;for(var n=0;n<this.shelves.length;n++)this.shelves[n].resize(e);return!0},t.prototype.alloc=function(e,t,r){if(e>this.free||t>this.h)return null;var i=this.x;return this.x+=e,this.free-=e,new n(r,i,this.y,e,t,e,this.h)},t.prototype.resize=function(e){return this.free+=e-this.w,this.w=e,!0},e})},{}],6:[function(e,t,n){"use strict";function r(e,t,n,r,i,o){this.fontSize=e||24,this.buffer=void 0===t?3:t,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function i(e,t,n,r,i,a,s){for(var u=0;u<t;u++){for(var l=0;l<n;l++)r[l]=e[l*t+u];for(o(r,i,a,s,n),l=0;l<n;l++)e[l*t+u]=i[l]}for(l=0;l<n;l++){for(u=0;u<t;u++)r[u]=e[l*t+u];for(o(r,i,a,s,t),u=0;u<t;u++)e[l*t+u]=Math.sqrt(i[u])}}function o(e,t,n,r,i){n[0]=0,r[0]=-a,r[1]=+a;for(var o=1,s=0;o<i;o++){for(var u=(e[o]+o*o-(e[n[s]]+n[s]*n[s]))/(2*o-2*n[s]);u<=r[s];)s--,u=(e[o]+o*o-(e[n[s]]+n[s]*n[s]))/(2*o-2*n[s]);s++,n[s]=o,r[s]=u,r[s+1]=+a}for(o=0,s=0;o<i;o++){for(;r[s+1]<o;)s++;t[o]=(o-n[s])*(o-n[s])+e[n[s]]}}t.exports=r;var a=1e20;r.prototype.draw=function(e){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(e,this.buffer,this.middle);for(var t=this.ctx.getImageData(0,0,this.size,this.size),n=new Uint8ClampedArray(this.size*this.size),r=0;r<this.size*this.size;r++){var o=t.data[4*r+3]/255;this.gridOuter[r]=1===o?0:0===o?a:Math.pow(Math.max(0,.5-o),2),this.gridInner[r]=1===o?a:0===o?0:Math.pow(Math.max(0,o-.5),2)}for(i(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),i(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),r=0;r<this.size*this.size;r++){var s=this.gridOuter[r]-this.gridInner[r];n[r]=Math.max(0,Math.min(255,Math.round(255-255*(s/this.radius+this.cutoff))))}return n}},{}],7:[function(e,t,n){function r(e,t,n,r){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=r,this.p2x=n,this.p2y=r}t.exports=r,r.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},r.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},r.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},r.prototype.solveCurveX=function(e,t){void 0===t&&(t=1e-6);var n,r,i,o,a;for(i=e,a=0;a<8;a++){if(o=this.sampleCurveX(i)-e,Math.abs(o)<t)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if(n=0,r=1,(i=e)<n)return n;if(i>r)return r;for(;n<r;){if(o=this.sampleCurveX(i),Math.abs(o-e)<t)return i;e>o?n=i:r=i,i=.5*(r-n)+n}return i},r.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},{}],8:[function(e,t,n){t.exports.VectorTile=e("./lib/vectortile.js"),t.exports.VectorTileFeature=e("./lib/vectortilefeature.js"),t.exports.VectorTileLayer=e("./lib/vectortilelayer.js")},{"./lib/vectortile.js":9,"./lib/vectortilefeature.js":10,"./lib/vectortilelayer.js":11}],9:[function(e,t,n){"use strict";function r(e,t){this.layers=e.readFields(i,{},t)}function i(e,t,n){if(3===e){var r=new o(n,n.readVarint()+n.pos);r.length&&(t[r.name]=r)}}var o=e("./vectortilelayer");t.exports=r},{"./vectortilelayer":11}],10:[function(e,t,n){"use strict";function r(e,t,n,r,o){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=r,this._values=o,e.readFields(i,this,t)}function i(e,t,n){1==e?t.id=n.readVarint():2==e?o(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}function o(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var r=t._keys[e.readVarint()],i=t._values[e.readVarint()];t.properties[r]=i}}function a(e){var t=e.length;if(t<=1)return[e];for(var n,r,i=[],o=0;o<t;o++){var a=s(e[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[e[o]]):n.push(e[o]))}return n&&i.push(n),i}function s(e){for(var t,n,r=0,i=0,o=e.length,a=o-1;i<o;a=i++)t=e[i],n=e[a],r+=(n.x-t.x)*(t.y+n.y);return r}var u=e("@mapbox/point-geometry");t.exports=r,r.types=["Unknown","Point","LineString","Polygon"],r.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,r=1,i=0,o=0,a=0,s=[];e.pos<n;){if(!i){var l=e.readVarint();r=7&l,i=l>>3}if(i--,1===r||2===r)o+=e.readSVarint(),a+=e.readSVarint(),1===r&&(t&&s.push(t),t=[]),t.push(new u(o,a));else{if(7!==r)throw new Error("unknown command "+r);t&&t.push(t[0].clone())}}return t&&s.push(t),s},r.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,r=0,i=0,o=0,a=1/0,s=-1/0,u=1/0,l=-1/0;e.pos<t;){if(!r){var c=e.readVarint();n=7&c,r=c>>3}if(r--,1===n||2===n)i+=e.readSVarint(),o+=e.readSVarint(),i<a&&(a=i),i>s&&(s=i),o<u&&(u=o),o>l&&(l=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,u,s,l]},r.prototype.toGeoJSON=function(e,t,n){function i(e){for(var t=0;t<e.length;t++){var n=e[t],r=180-360*(n.y+c)/u;e[t]=[360*(n.x+l)/u-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}}var o,s,u=this.extent*Math.pow(2,n),l=this.extent*e,c=this.extent*t,f=this.loadGeometry(),p=r.types[this.type];switch(this.type){case 1:var h=[];for(o=0;o<f.length;o++)h[o]=f[o][0];f=h,i(f);break;case 2:for(o=0;o<f.length;o++)i(f[o]);break;case 3:for(f=a(f),o=0;o<f.length;o++)for(s=0;s<f[o].length;s++)i(f[o][s])}1===f.length?f=f[0]:p="Multi"+p;var d={type:"Feature",geometry:{type:p,coordinates:f},properties:this.properties};return"id"in this&&(d.id=this.id),d}},{"@mapbox/point-geometry":4}],11:[function(e,t,n){"use strict";function r(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(i,this,t),this.length=this._features.length}function i(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(o(n))}function o(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;){var r=e.readVarint()>>3;t=1===r?e.readString():2===r?e.readFloat():3===r?e.readDouble():4===r?e.readVarint64():5===r?e.readVarint():6===r?e.readSVarint():7===r?e.readBoolean():null}return t}var a=e("./vectortilefeature.js");t.exports=r,r.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new a(this._pbf,t,this.extent,this._keys,this._values)}},{"./vectortilefeature.js":10}],12:[function(t,n,r){!function(t,i){"object"==typeof r&&"undefined"!=typeof n?i(r):"function"==typeof e&&e.amd?e(["exports"],i):i(t.WhooTS=t.WhooTS||{})}(this,function(e){function t(e,t,r,i,o,a){return a=a||{},e+"?"+["bbox="+n(r,i,o),"format="+(a.format||"image/png"),"service="+(a.service||"WMS"),"version="+(a.version||"1.1.1"),"request="+(a.request||"GetMap"),"srs="+(a.srs||"EPSG:3857"),"width="+(a.width||256),"height="+(a.height||256),"layers="+t].join("&")}function n(e,t,n){t=Math.pow(2,n)-t-1;var i=r(256*e,256*t,n),o=r(256*(e+1),256*(t+1),n);return i[0]+","+i[1]+","+o[0]+","+o[1]}function r(e,t,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[e*r-2*Math.PI*6378137/2,t*r-2*Math.PI*6378137/2]}e.getURL=t,e.getTileBBox=n,e.getMercCoords=r,Object.defineProperty(e,"__esModule",{value:!0})})},{}],13:[function(e,t,n){function r(e){return e=Math.round(e),e<0?0:e>255?255:e}function i(e){return e<0?0:e>1?1:e}function o(e){return r("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))}function a(e){return i("%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))}function s(e,t,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}function u(e){var t=e.replace(/ /g,"").toLowerCase();if(t in l)return l[t].slice();if("#"===t[0]){if(4===t.length){var n=parseInt(t.substr(1),16);return n>=0&&n<=4095?[(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1]:null}if(7===t.length){var n=parseInt(t.substr(1),16);return n>=0&&n<=16777215?[(16711680&n)>>16,(65280&n)>>8,255&n,1]:null}return null}var i=t.indexOf("("),u=t.indexOf(")");if(-1!==i&&u+1===t.length){var c=t.substr(0,i),f=t.substr(i+1,u-(i+1)).split(","),p=1;switch(c){case"rgba":if(4!==f.length)return null;p=a(f.pop());case"rgb":return 3!==f.length?null:[o(f[0]),o(f[1]),o(f[2]),p];case"hsla":if(4!==f.length)return null;p=a(f.pop());case"hsl":if(3!==f.length)return null;var h=(parseFloat(f[0])%360+360)%360/360,d=a(f[1]),v=a(f[2]),m=v<=.5?v*(d+1):v+d-v*d,y=2*v-m;return[r(255*s(y,m,h+1/3)),r(255*s(y,m,h)),r(255*s(y,m,h-1/3)),p];default:return null}}return null}var l={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{n.parseCSSColor=u}catch(e){}},{}],14:[function(e,t,n){"use strict";function r(e,t,n){n=n||2;var r=t&&t.length,o=r?t[0]*n:e.length,s=i(e,0,o,n,!0),u=[];if(!s)return u;var l,c,p,h,d,v,m;if(r&&(s=f(e,t,s,n)),e.length>80*n){l=p=e[0],c=h=e[1];for(var y=n;y<o;y+=n)d=e[y],v=e[y+1],d<l&&(l=d),v<c&&(c=v),d>p&&(p=d),v>h&&(h=v);m=Math.max(p-l,h-c),m=0!==m?1/m:0}return a(s,u,n,l,c,m),u}function i(e,t,n,r,i){var o,a;if(i===R(e,t,n,r)>0)for(o=t;o<n;o+=r)a=P(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=P(o,e[o],e[o+1],a);return a&&w(a,a.next)&&(C(a),a=a.next),a}function o(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!w(r,r.next)&&0!==x(r.prev,r,r.next))r=r.next;else{if(C(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function a(e,t,n,r,i,f,p){if(e){!p&&f&&v(e,r,i,f);for(var h,d,m=e;e.prev!==e.next;)if(h=e.prev,d=e.next,f?u(e,r,i,f):s(e))t.push(h.i/n),t.push(e.i/n),t.push(d.i/n),C(e),e=d.next,m=d.next;else if((e=d)===m){p?1===p?(e=l(e,t,n),a(e,t,n,r,i,f,2)):2===p&&c(e,t,n,r,i,f):a(o(e),t,n,r,i,f,1);break}}}function s(e){var t=e.prev,n=e,r=e.next;if(x(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(_(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&x(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function u(e,t,n,r){var i=e.prev,o=e,a=e.next;if(x(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,l=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,f=y(s,u,t,n,r),p=y(l,c,t,n,r),h=e.prevZ,d=e.nextZ;h&&h.z>=f&&d&&d.z<=p;){if(h!==e.prev&&h!==e.next&&_(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&x(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,d!==e.prev&&d!==e.next&&_(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&x(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;h&&h.z>=f;){if(h!==e.prev&&h!==e.next&&_(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&x(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;d&&d.z<=p;){if(d!==e.prev&&d!==e.next&&_(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&x(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function l(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;!w(i,o)&&E(i,r,r.next,o)&&T(i,o)&&T(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),C(r),C(r.next),r=e=o),r=r.next}while(r!==e);return r}function c(e,t,n,r,i,s){var u=e;do{for(var l=u.next.next;l!==u.prev;){if(u.i!==l.i&&b(u,l)){var c=O(u,l);return u=o(u,u.next),c=o(c,c.next),a(u,t,n,r,i,s),void a(c,t,n,r,i,s)}l=l.next}u=u.next}while(u!==e)}function f(e,t,n,r){var a,s,u,l,c,f=[];for(a=0,s=t.length;a<s;a++)u=t[a]*r,l=a<s-1?t[a+1]*r:e.length,c=i(e,u,l,r,!1),c===c.next&&(c.steiner=!0),f.push(g(c));for(f.sort(p),a=0;a<f.length;a++)h(f[a],n),n=o(n,n.next);return n}function p(e,t){return e.x-t.x}function h(e,t){if(t=d(e,t)){var n=O(t,e);o(n,n.next)}}function d(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===a)return n.prev;var u,l=n,c=n.x,f=n.y,p=1/0;for(r=n.next;r!==l;)i>=r.x&&r.x>=c&&i!==r.x&&_(o<f?i:a,o,c,f,o<f?a:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<p||u===p&&r.x>n.x)&&T(r,e)&&(n=r,p=u),r=r.next;return n}function v(e,t,n,r){var i=e;do{null===i.z&&(i.z=y(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,m(i)}function m(e){var t,n,r,i,o,a,s,u,l=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<l&&(s++,r=r.nextZ);t++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1);return e}function y(e,t,n,r,i){return e=32767*(e-n)*i,t=32767*(t-r)*i,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1}function g(e){var t=e,n=e;do{t.x<n.x&&(n=t),t=t.next}while(t!==e);return n}function _(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function b(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!S(e,t)&&T(e,t)&&T(t,e)&&A(e,t)}function x(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function w(e,t){return e.x===t.x&&e.y===t.y}function E(e,t,n,r){return!!(w(e,t)&&w(n,r)||w(e,r)&&w(n,t))||x(e,t,n)>0!=x(e,t,r)>0&&x(n,r,e)>0!=x(n,r,t)>0}function S(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&E(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function T(e,t){return x(e.prev,e,e.next)<0?x(e,t,e.next)>=0&&x(e,e.prev,t)>=0:x(e,t,e.prev)<0||x(e,e.next,t)<0}function A(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}function O(e,t){var n=new k(e.i,e.x,e.y),r=new k(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function P(e,t,n,r){var i=new k(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function C(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function k(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function R(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}t.exports=r,t.exports.default=r,r.deviation=function(e,t,n,r){var i=t&&t.length,o=i?t[0]*n:e.length,a=Math.abs(R(e,0,o,n));if(i)for(var s=0,u=t.length;s<u;s++){var l=t[s]*n,c=s<u-1?t[s+1]*n:e.length;a-=Math.abs(R(e,l,c,n))}var f=0;for(s=0;s<r.length;s+=3){var p=r[s]*n,h=r[s+1]*n,d=r[s+2]*n;f+=Math.abs((e[p]-e[d])*(e[h+1]-e[p+1])-(e[p]-e[h])*(e[d+1]-e[p+1]))}return 0===a&&0===f?0:Math.abs((f-a)/a)},r.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)n.vertices.push(e[i][o][a]);i>0&&(r+=e[i-1].length,n.holes.push(r))}return n}},{}],15:[function(e,t,n){function r(e,t){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.map(i(r,t)),e;case"Feature":return e.geometry=r(e.geometry,t),e;case"Polygon":case"MultiPolygon":return o(e,t);default:return e}}function i(e,t){return function(n){return e(n,t)}}function o(e,t){return"Polygon"===e.type?e.coordinates=a(e.coordinates,t):"MultiPolygon"===e.type&&(e.coordinates=e.coordinates.map(i(a,t))),e}function a(e,t){t=!!t,e[0]=s(e[0],t);for(var n=1;n<e.length;n++)e[n]=s(e[n],!t);return e}function s(e,t){return u(e)===t?e:e.reverse()}function u(e){return l.ring(e)>=0}var l=e("@mapbox/geojson-area");t.exports=r},{"@mapbox/geojson-area":1}],16:[function(e,t,n){"use strict";function r(e,t,n,r,s,u,l){if(n/=t,r/=t,u>=n&&l<=r)return e;if(u>r||l<n)return null;for(var f=[],p=0;p<e.length;p++){var h=e[p],d=h.geometry,v=h.type,m=0===s?h.minX:h.minY,y=0===s?h.maxX:h.maxY;if(m>=n&&y<=r)f.push(h);else if(!(m>r||y<n)){var g=[];if("Point"===v||"MultiPoint"===v)i(d,g,n,r,s);else if("LineString"===v)o(d,g,n,r,s,!1);else if("MultiLineString"===v)a(d,g,n,r,s,!1);else if("Polygon"===v)a(d,g,n,r,s,!0);else if("MultiPolygon"===v)for(var _=0;_<d.length;_++){var b=[];a(d[_],b,n,r,s,!0),b.length&&g.push(b)}g.length&&("LineString"!==v&&"MultiLineString"!==v||(1===g.length?(v="LineString",g=g[0]):v="MultiLineString"),"Point"!==v&&"MultiPoint"!==v||(v=3===g.length?"Point":"MultiPoint"),f.push(c(h.id,v,g,h.tags)))}}return f.length?f:null}function i(e,t,n,r,i){for(var o=0;o<e.length;o+=3){var a=e[o+i];a>=n&&a<=r&&(t.push(e[o]),t.push(e[o+1]),t.push(e[o+2]))}}function o(e,t,n,r,i,o){for(var a=[],c=0===i?u:l,f=0;f<e.length-3;f+=3){var p=e[f],h=e[f+1],d=e[f+2],v=e[f+3],m=e[f+4],y=0===i?p:h,g=0===i?v:m,_=!1;y<n?g>=n&&c(a,p,h,v,m,n):y>r?g<=r&&c(a,p,h,v,m,r):s(a,p,h,d),g<n&&y>=n&&(c(a,p,h,v,m,n),_=!0),g>r&&y<=r&&(c(a,p,h,v,m,r),_=!0),!o&&_&&(a.size=e.size,t.push(a),a=[])}var b=e.length-3;p=e[b],h=e[b+1],d=e[b+2],y=0===i?p:h,y>=n&&y<=r&&s(a,p,h,d),b=a.length-3,o&&b>=3&&(a[b]!==a[0]||a[b+1]!==a[1])&&s(a,a[0],a[1],a[2]),a.length&&(a.size=e.size,t.push(a))}function a(e,t,n,r,i,a){for(var s=0;s<e.length;s++)o(e[s],t,n,r,i,a)}function s(e,t,n,r){e.push(t),e.push(n),e.push(r)}function u(e,t,n,r,i,o){e.push(o),e.push(n+(o-t)*(i-n)/(r-t)),e.push(1)}function l(e,t,n,r,i,o){e.push(t+(o-n)*(r-t)/(i-n)),e.push(o),e.push(1)}t.exports=r;var c=e("./feature")},{"./feature":18}],17:[function(e,t,n){"use strict";function r(e,t){var n=[];if("FeatureCollection"===e.type)for(var r=0;r<e.features.length;r++)i(n,e.features[r],t);else"Feature"===e.type?i(n,e,t):i(n,{geometry:e},t);return n}function i(e,t,n){if(t.geometry){var r=t.geometry.coordinates,u=t.geometry.type,l=n*n,c=[];if("Point"===u)o(r,c);else if("MultiPoint"===u)for(var p=0;p<r.length;p++)o(r[p],c);else if("LineString"===u)a(r,c,l,!1);else if("MultiLineString"===u)s(r,c,l,!1);else if("Polygon"===u)s(r,c,l,!0);else{if("MultiPolygon"!==u){if("GeometryCollection"===u){for(p=0;p<t.geometry.geometries.length;p++)i(e,{geometry:t.geometry.geometries[p],properties:t.properties},n);return}throw new Error("Input data is not a valid GeoJSON object.")}for(p=0;p<r.length;p++){var h=[];s(r[p],h,l,!0),c.push(h)}}e.push(f(t.id,u,c,t.properties))}}function o(e,t){t.push(u(e[0])),t.push(l(e[1])),t.push(0)}function a(e,t,n,r){for(var i,o,a=0,s=0;s<e.length;s++){var f=u(e[s][0]),p=l(e[s][1]);t.push(f),t.push(p),t.push(0),s>0&&(a+=r?(i*p-f*o)/2:Math.sqrt(Math.pow(f-i,2)+Math.pow(p-o,2))),i=f,o=p}var h=t.length-3;t[2]=1,c(t,0,h,n),t[h+2]=1,t.size=Math.abs(a)}function s(e,t,n,r){for(var i=0;i<e.length;i++){var o=[];a(e[i],o,n,r),t.push(o)}}function u(e){return e/360+.5}function l(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}t.exports=r;var c=e("./simplify"),f=e("./feature")},{"./feature":18,"./simplify":20}],18:[function(e,t,n){"use strict";function r(e,t,n,r){var o={id:e||null,type:t,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return i(o),o}function i(e){var t=e.geometry,n=e.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)o(e,t);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<t.length;r++)o(e,t[r]);else if("MultiPolygon"===n)for(r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)o(e,t[r][i])}function o(e,t){for(var n=0;n<t.length;n+=3)e.minX=Math.min(e.minX,t[n]),e.minY=Math.min(e.minY,t[n+1]),e.maxX=Math.max(e.maxX,t[n]),e.maxY=Math.max(e.maxY,t[n+1])}t.exports=r},{}],19:[function(e,t,n){"use strict";function r(e,t){return new i(e,t)}function i(e,t){t=this.options=a(Object.create(this.options),t);var n=t.debug;if(n&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");var r=1<<t.maxZoom,i=s(e,t.tolerance/(r*t.extent));this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),i=c(i,t.buffer/t.extent),i.length&&this.splitTile(i,0,0,0),n&&(i.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function o(e,t,n){return 32*((1<<e)*n+t)+e}function a(e,t){for(var n in t)e[n]=t[n];return e}t.exports=r;var s=e("./convert"),u=e("./transform"),l=e("./clip"),c=e("./wrap"),f=e("./tile");i.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,debug:0},i.prototype.splitTile=function(e,t,n,r,i,a,s){for(var u=[e,t,n,r],c=this.options,p=c.debug;u.length;){r=u.pop(),n=u.pop(),t=u.pop(),e=u.pop();var h=1<<t,d=o(t,n,r),v=this.tiles[d],m=t===c.maxZoom?0:c.tolerance/(h*c.extent);if(!v&&(p>1&&console.time("creation"),v=this.tiles[d]=f(e,h,n,r,m,t===c.maxZoom),this.tileCoords.push({z:t,x:n,y:r}),p)){p>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,n,r,v.numFeatures,v.numPoints,v.numSimplified),console.timeEnd("creation"));var y="z"+t;this.stats[y]=(this.stats[y]||0)+1,this.total++}if(v.source=e,i){if(t===c.maxZoom||t===i)continue;var g=1<<i-t;if(n!==Math.floor(a/g)||r!==Math.floor(s/g))continue}else if(t===c.indexMaxZoom||v.numPoints<=c.indexMaxPoints)continue;if(v.source=null,0!==e.length){p>1&&console.time("clipping");var _,b,x,w,E,S,T=.5*c.buffer/c.extent,A=.5-T,O=.5+T,P=1+T;_=b=x=w=null,E=l(e,h,n-T,n+O,0,v.minX,v.maxX),S=l(e,h,n+A,n+P,0,v.minX,v.maxX),e=null,E&&(_=l(E,h,r-T,r+O,1,v.minY,v.maxY),b=l(E,h,r+A,r+P,1,v.minY,v.maxY),E=null),S&&(x=l(S,h,r-T,r+O,1,v.minY,v.maxY),w=l(S,h,r+A,r+P,1,v.minY,v.maxY),S=null),p>1&&console.timeEnd("clipping"),u.push(_||[],t+1,2*n,2*r),u.push(b||[],t+1,2*n,2*r+1),u.push(x||[],t+1,2*n+1,2*r),u.push(w||[],t+1,2*n+1,2*r+1)}}},i.prototype.getTile=function(e,t,n){var r=this.options,i=r.extent,a=r.debug;if(e<0||e>24)return null;var s=1<<e;t=(t%s+s)%s;var l=o(e,t,n);if(this.tiles[l])return u.tile(this.tiles[l],i);a>1&&console.log("drilling down to z%d-%d-%d",e,t,n);for(var c,f=e,p=t,h=n;!c&&f>0;)f--,p=Math.floor(p/2),h=Math.floor(h/2),c=this.tiles[o(f,p,h)];return c&&c.source?(a>1&&console.log("found parent tile z%d-%d-%d",f,p,h),a>1&&console.time("drilling down"),this.splitTile(c.source,f,p,h,e,t,n),a>1&&console.timeEnd("drilling down"),this.tiles[l]?u.tile(this.tiles[l],i):null):null}},{"./clip":16,"./convert":17,"./tile":21,"./transform":22,"./wrap":23}],20:[function(e,t,n){"use strict";function r(e,t,n,o){for(var a,s=o,u=e[t],l=e[t+1],c=e[n],f=e[n+1],p=t+3;p<n;p+=3){var h=i(e[p],e[p+1],u,l,c,f);h>s&&(a=p,s=h)}s>o&&(a-t>3&&r(e,t,a,o),e[a+2]=s,n-a>3&&r(e,a,n,o))}function i(e,t,n,r,i,o){var a=i-n,s=o-r;if(0!==a||0!==s){var u=((e-n)*a+(t-r)*s)/(a*a+s*s);u>1?(n=i,r=o):u>0&&(n+=a*u,r+=s*u)}return a=e-n,s=t-r,a*a+s*s}t.exports=r},{}],21:[function(e,t,n){"use strict";function r(e,t,n,r,o,a){for(var s={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z2:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},u=0;u<e.length;u++){s.numFeatures++,i(s,e[u],o,a);var l=e[u].minX,c=e[u].minY,f=e[u].maxX,p=e[u].maxY;l<s.minX&&(s.minX=l),c<s.minY&&(s.minY=c),f>s.maxX&&(s.maxX=f),p>s.maxY&&(s.maxY=p)}return s}function i(e,t,n,r){var i=t.geometry,a=t.type,s=[];if("Point"===a||"MultiPoint"===a)for(var u=0;u<i.length;u+=3)s.push(i[u]),s.push(i[u+1]),e.numPoints++,e.numSimplified++;else if("LineString"===a)o(s,i,e,n,r,!1,!1);else if("MultiLineString"===a||"Polygon"===a)for(u=0;u<i.length;u++)o(s,i[u],e,n,r,"Polygon"===a,0===u);else if("MultiPolygon"===a)for(var l=0;l<i.length;l++){var c=i[l];for(u=0;u<c.length;u++)o(s,c[u],e,n,r,!0,0===u)}if(s.length){var f={geometry:s,type:"Polygon"===a||"MultiPolygon"===a?3:"LineString"===a||"MultiLineString"===a?2:1,tags:t.tags||null};null!==t.id&&(f.id=t.id),e.features.push(f)}}function o(e,t,n,r,i,o,s){var u=r*r;if(!i&&t.size<(o?u:r))return void(n.numPoints+=t.length/3);for(var l=[],c=0;c<t.length;c+=3)(i||t[c+2]>u)&&(n.numSimplified++,l.push(t[c]),l.push(t[c+1])),n.numPoints++;o&&a(l,s),e.push(l)}function a(e,t){for(var n=0,r=0,i=e.length,o=i-2;r<i;o=r,r+=2)n+=(e[r]-e[o])*(e[r+1]+e[o+1]);if(n>0===t)for(r=0,i=e.length;r<i/2;r+=2){var a=e[r],s=e[r+1];e[r]=e[i-2-r],e[r+1]=e[i-1-r],e[i-2-r]=a,e[i-1-r]=s}}t.exports=r},{}],22:[function(e,t,n){"use strict";function r(e,t){if(e.transformed)return e;var n,r,o,a=e.z2,s=e.x,u=e.y;for(n=0;n<e.features.length;n++){var l=e.features[n],c=l.geometry,f=l.type;if(l.geometry=[],1===f)for(r=0;r<c.length;r+=2)l.geometry.push(i(c[r],c[r+1],t,a,s,u));else for(r=0;r<c.length;r++){var p=[];for(o=0;o<c[r].length;o+=2)p.push(i(c[r][o],c[r][o+1],t,a,s,u));l.geometry.push(p)}}return e.transformed=!0,e}function i(e,t,n,r,i,o){return[Math.round(n*(e*r-i)),Math.round(n*(t*r-o))]}n.tile=r,n.point=i},{}],23:[function(e,t,n){"use strict";function r(e,t){var n=e,r=a(e,1,-1-t,t,0,-1,2),o=a(e,1,1-t,2+t,0,-1,2);return(r||o)&&(n=a(e,1,-t,1+t,0,-1,2)||[],r&&(n=i(r,1).concat(n)),o&&(n=n.concat(i(o,-1)))),n}function i(e,t){for(var n=[],r=0;r<e.length;r++){var i,a=e[r],u=a.type;if("Point"===u||"MultiPoint"===u||"LineString"===u)i=o(a.geometry,t);else if("MultiLineString"===u||"Polygon"===u){i=[];for(var l=0;l<a.geometry.length;l++)i.push(o(a.geometry[l],t))}else if("MultiPolygon"===u)for(i=[],l=0;l<a.geometry.length;l++){for(var c=[],f=0;f<a.geometry[l].length;f++)c.push(o(a.geometry[l][f],t));i.push(c)}n.push(s(a.id,u,i,a.tags))}return n}function o(e,t){var n=[];n.size=e.size;for(var r=0;r<e.length;r+=3)n.push(e[r]+t,e[r+1],e[r+2]);return n}var a=e("./clip"),s=e("./feature");t.exports=r},{"./clip":16,"./feature":18}],24:[function(e,t,n){"use strict";function r(e,t,n){var r=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var o=new Int32Array(this.arrayBuffer);e=o[0],t=o[1],n=o[2],this.d=t+2*n;for(var a=0;a<this.d*this.d;a++){var s=o[i+a],u=o[i+a+1];r.push(s===u?null:o.subarray(s,u))}var l=o[i+r.length],c=o[i+r.length+1];this.keys=o.subarray(l,c),this.bboxes=o.subarray(c),this.insert=this._insertReadonly}else{this.d=t+2*n;for(var f=0;f<this.d*this.d;f++)r.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=n,this.scale=t/e,this.uid=0;var p=n/t*e;this.min=-p,this.max=e+p}t.exports=r;var i=3;r.prototype.insert=function(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},r.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},r.prototype._insertCell=function(e,t,n,r,i,o){this.cells[i].push(o)},r.prototype.query=function(e,t,n,r){var i=this.min,o=this.max;if(e<=i&&t<=i&&o<=n&&o<=r)return Array.prototype.slice.call(this.keys);var a=[],s={};return this._forEachCell(e,t,n,r,this._queryCell,a,s),a},r.prototype._queryCell=function(e,t,n,r,i,o,a){var s=this.cells[i];if(null!==s)for(var u=this.keys,l=this.bboxes,c=0;c<s.length;c++){var f=s[c];if(void 0===a[f]){var p=4*f;e<=l[p+2]&&t<=l[p+3]&&n>=l[p+0]&&r>=l[p+1]?(a[f]=!0,o.push(u[f])):a[f]=!1}}},r.prototype._forEachCell=function(e,t,n,r,i,o,a){for(var s=this._convertToCellCoord(e),u=this._convertToCellCoord(t),l=this._convertToCellCoord(n),c=this._convertToCellCoord(r),f=s;f<=l;f++)for(var p=u;p<=c;p++){var h=this.d*p+f;if(i.call(this,e,t,n,r,h,o,a))return}},r.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},r.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=i+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var o=new Int32Array(t+n+this.keys.length+this.bboxes.length);o[0]=this.extent,o[1]=this.n,o[2]=this.padding;for(var a=t,s=0;s<e.length;s++){var u=e[s];o[i+s]=a,o.set(u,a),a+=u.length}return o[i+e.length]=a,o.set(this.keys,a),a+=this.keys.length,o[i+e.length+1]=a,o.set(this.bboxes,a),a+=this.bboxes.length,o.buffer}},{}],25:[function(e,t,n){n.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,f=n?i-1:0,p=n?-1:1,h=e[t+f];for(f+=p,o=h&(1<<-c)-1,h>>=-c,c+=s;c>0;o=256*o+e[t+f],f+=p,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+e[t+f],f+=p,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=l}return(h?-1:1)*a*Math.pow(2,o-r)},n.write=function(e,t,n,r,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,f=c>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,d=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),t+=a+f>=1?p/u:p*Math.pow(2,1-f),t*u>=2&&(a++,u/=2),a+f>=c?(s=0,a=c):a+f>=1?(s=(t*u-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[n+h]=255&s,h+=d,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;e[n+h]=255&a,h+=d,a/=256,l-=8);e[n+h-d]|=128*v}},{}],26:[function(e,t,n){"use strict";function r(e,t,n,r,o){return new i(e,t,n,r,o)}function i(e,t,n,r,i){t=t||o,n=n||a,i=i||Array,this.nodeSize=r||64,this.points=e,this.ids=new i(e.length),this.coords=new i(2*e.length);for(var u=0;u<e.length;u++)this.ids[u]=u,this.coords[2*u]=t(e[u]),this.coords[2*u+1]=n(e[u]);s(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function o(e){return e[0]}function a(e){return e[1]}var s=e("./sort"),u=e("./range"),l=e("./within");t.exports=r,i.prototype={range:function(e,t,n,r){return u(this.ids,this.coords,e,t,n,r,this.nodeSize)},within:function(e,t,n){return l(this.ids,this.coords,e,t,n,this.nodeSize)}}},{"./range":27,"./sort":28,"./within":29}],27:[function(e,t,n){"use strict";function r(e,t,n,r,i,o,a){for(var s,u,l=[0,e.length-1,0],c=[];l.length;){var f=l.pop(),p=l.pop(),h=l.pop();if(p-h<=a)for(var d=h;d<=p;d++)s=t[2*d],u=t[2*d+1],s>=n&&s<=i&&u>=r&&u<=o&&c.push(e[d]);else{var v=Math.floor((h+p)/2);s=t[2*v],u=t[2*v+1],s>=n&&s<=i&&u>=r&&u<=o&&c.push(e[v]);var m=(f+1)%2;(0===f?n<=s:r<=u)&&(l.push(h),l.push(v-1),l.push(m)),(0===f?i>=s:o>=u)&&(l.push(v+1),l.push(p),l.push(m))}}return c}t.exports=r},{}],28:[function(e,t,n){"use strict";function r(e,t,n,o,a,s){if(!(a-o<=n)){var u=Math.floor((o+a)/2);i(e,t,u,o,a,s%2),r(e,t,n,o,u-1,s+1),r(e,t,n,u+1,a,s+1)}}function i(e,t,n,r,a,s){for(;a>r;){if(a-r>600){var u=a-r+1,l=n-r+1,c=Math.log(u),f=.5*Math.exp(2*c/3),p=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1);i(e,t,n,Math.max(r,Math.floor(n-l*f/u+p)),Math.min(a,Math.floor(n+(u-l)*f/u+p)),s)}var h=t[2*n+s],d=r,v=a;for(o(e,t,r,n),t[2*a+s]>h&&o(e,t,r,a);d<v;){for(o(e,t,d,v),d++,v--;t[2*d+s]<h;)d++;for(;t[2*v+s]>h;)v--}t[2*r+s]===h?o(e,t,r,v):(v++,o(e,t,v,a)),v<=n&&(r=v+1),n<=v&&(a=v-1)}}function o(e,t,n,r){a(e,n,r),a(t,2*n,2*r),a(t,2*n+1,2*r+1)}function a(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}t.exports=r},{}],29:[function(e,t,n){"use strict";function r(e,t,n,r,o,a){for(var s=[0,e.length-1,0],u=[],l=o*o;s.length;){var c=s.pop(),f=s.pop(),p=s.pop();if(f-p<=a)for(var h=p;h<=f;h++)i(t[2*h],t[2*h+1],n,r)<=l&&u.push(e[h]);else{var d=Math.floor((p+f)/2),v=t[2*d],m=t[2*d+1];i(v,m,n,r)<=l&&u.push(e[d]);var y=(c+1)%2;(0===c?n-o<=v:r-o<=m)&&(s.push(p),s.push(d-1),s.push(y)),(0===c?n+o>=v:r+o>=m)&&(s.push(d+1),s.push(f),s.push(y))}}return u}function i(e,t,n,r){var i=e-n,o=t-r;return i*i+o*o}t.exports=r},{}],30:[function(e,t,n){"use strict";function r(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}function i(e,t,n){var r,i,o=n.buf;if(i=o[n.pos++],r=(112&i)>>4,i<128)return a(e,r,t);if(i=o[n.pos++],r|=(127&i)<<3,i<128)return a(e,r,t);if(i=o[n.pos++],r|=(127&i)<<10,i<128)return a(e,r,t);if(i=o[n.pos++],r|=(127&i)<<17,i<128)return a(e,r,t);if(i=o[n.pos++],r|=(127&i)<<24,i<128)return a(e,r,t);if(i=o[n.pos++],r|=(1&i)<<31,i<128)return a(e,r,t);throw new Error("Expected varint not more than 10 bytes")}function o(e){return e.type===r.Bytes?e.readVarint()+e.pos:e.pos+1}function a(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function s(e,t){var n,r;if(e>=0?(n=e%4294967296|0,r=e/4294967296|0):(n=~(-e%4294967296),r=~(-e/4294967296),4294967295^n?n=n+1|0:(n=0,r=r+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),u(n,r,t),l(r,t)}function u(e,t,n){n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos]=127&e}function l(e,t){var n=(7&e)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}function c(e,t,n){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.ceil(Math.log(t)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=e;i--)n.buf[i+r]=n.buf[i]}function f(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function p(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function h(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function d(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function v(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function m(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function y(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function g(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function _(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function b(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function x(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function w(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function E(e,t,n){for(var r="",i=t;i<n;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s>n)break;var u,l,c;1===s?o<128&&(a=o):2===s?128==(192&(u=e[i+1]))&&(a=(31&o)<<6|63&u)<=127&&(a=null):3===s?(u=e[i+1],l=e[i+2],128==(192&u)&&128==(192&l)&&((a=(15&o)<<12|(63&u)<<6|63&l)<=2047||a>=55296&&a<=57343)&&(a=null)):4===s&&(u=e[i+1],l=e[i+2],c=e[i+3],128==(192&u)&&128==(192&l)&&128==(192&c)&&((a=(15&o)<<18|(63&u)<<12|(63&l)<<6|63&c)<=65535||a>=1114112)&&(a=null)),null===a?(a=65533,s=1):a>65535&&(a-=65536,r+=String.fromCharCode(a>>>10&1023|55296),a=56320|1023&a),r+=String.fromCharCode(a),i+=s}return r}function S(e,t,n){for(var r,i,o=0;o<t.length;o++){if((r=t.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):i=r;continue}if(r<56320){e[n++]=239,e[n++]=191,e[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(e[n++]=239,e[n++]=191,e[n++]=189,i=null);r<128?e[n++]=r:(r<2048?e[n++]=r>>6|192:(r<65536?e[n++]=r>>12|224:(e[n++]=r>>18|240,e[n++]=r>>12&63|128),e[n++]=r>>6&63|128),e[n++]=63&r|128)}return n}t.exports=r;var T=e("ieee754");r.Varint=0,r.Fixed64=1,r.Bytes=2,r.Fixed32=5;r.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,e(i,t,this),this.pos===o&&this.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=b(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=w(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=b(this.buf,this.pos)+4294967296*b(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=b(this.buf,this.pos)+4294967296*w(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=T.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=T.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,n,r=this.buf;return n=r[this.pos++],t=127&n,n<128?t:(n=r[this.pos++],t|=(127&n)<<7,n<128?t:(n=r[this.pos++],t|=(127&n)<<14,n<128?t:(n=r[this.pos++],t|=(127&n)<<21,n<128?t:(n=r[this.pos],t|=(15&n)<<28,i(t,e,this)))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=E(this.buf,this.pos,e);return this.pos=e,t},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){var n=o(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){var t=o(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){var t=o(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){var t=o(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){var t=o(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){var t=o(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){var t=o(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){var t=o(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){var t=o(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===r.Varint)for(;this.buf[this.pos++]>127;);else if(t===r.Bytes)this.pos=this.readVarint()+this.pos;else if(t===r.Fixed32)this.pos+=4;else{if(t!==r.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),x(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),x(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),x(this.buf,-1&e,this.pos),x(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),x(this.buf,-1&e,this.pos),x(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){if((e=+e||0)>268435455||e<0)return void s(e,this);this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127)))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=S(this.buf,e,this.pos);var n=this.pos-t;n>=128&&c(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),T.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),T.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var r=this.pos-n;r>=128&&c(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,t,n){this.writeTag(e,r.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){this.writeMessage(e,f,t)},writePackedSVarint:function(e,t){this.writeMessage(e,p,t)},writePackedBoolean:function(e,t){this.writeMessage(e,v,t)},writePackedFloat:function(e,t){this.writeMessage(e,h,t)},writePackedDouble:function(e,t){this.writeMessage(e,d,t)},writePackedFixed32:function(e,t){this.writeMessage(e,m,t)},writePackedSFixed32:function(e,t){this.writeMessage(e,y,t)},writePackedFixed64:function(e,t){this.writeMessage(e,g,t)},writePackedSFixed64:function(e,t){this.writeMessage(e,_,t)},writeBytesField:function(e,t){this.writeTag(e,r.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,r.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,r.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,r.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,r.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,r.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,r.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,r.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,r.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,r.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}}},{ieee754:25}],31:[function(e,t,n){"use strict";function r(e,t,n,a,s){for(n=n||0,a=a||e.length-1,s=s||o;a>n;){if(a-n>600){var u=a-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),p=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1);r(e,t,Math.max(n,Math.floor(t-l*f/u+p)),Math.min(a,Math.floor(t+(u-l)*f/u+p)),s)}var h=e[t],d=n,v=a;for(i(e,n,t),s(e[a],h)>0&&i(e,n,a);d<v;){for(i(e,d,v),d++,v--;s(e[d],h)<0;)d++;for(;s(e[v],h)>0;)v--}0===s(e[n],h)?i(e,n,v):(v++,i(e,v,a)),v<=t&&(n=v+1),t<=v&&(a=v-1)}}function i(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function o(e,t){return e<t?-1:e>t?1:0}t.exports=r},{}],32:[function(e,t,n){"use strict";function r(e){return new i(e)}function i(e){this.options=h(Object.create(this.options),e),this.trees=new Array(this.options.maxZoom+1)}function o(e,t,n,r,i){return{x:e,y:t,zoom:1/0,id:r,properties:i,parentId:-1,numPoints:n}}function a(e,t){var n=e.geometry.coordinates;return{x:l(n[0]),y:c(n[1]),zoom:1/0,id:t,parentId:-1}}function s(e){return{type:"Feature",properties:u(e),geometry:{type:"Point",coordinates:[f(e.x),p(e.y)]}}}function u(e){var t=e.numPoints,n=t>=1e4?Math.round(t/1e3)+"k":t>=1e3?Math.round(t/100)/10+"k":t;return h(h({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:n})}function l(e){return e/360+.5}function c(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function f(e){return 360*(e-.5)}function p(e){var t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function h(e,t){for(var n in t)e[n]=t[n];return e}function d(e){return e.x}function v(e){return e.y}var m=e("kdbush");t.exports=r,i.prototype={options:{minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,initial:function(){return{}},map:function(e){return e}},load:function(e){var t=this.options.log;t&&console.time("total time");var n="prepare "+e.length+" points";t&&console.time(n),this.points=e;var r=e.map(a);t&&console.timeEnd(n);for(var i=this.options.maxZoom;i>=this.options.minZoom;i--){var o=+Date.now();this.trees[i+1]=m(r,d,v,this.options.nodeSize,Float32Array),r=this._cluster(r,i),t&&console.log("z%d: %d clusters in %dms",i,r.length,+Date.now()-o)}return this.trees[this.options.minZoom]=m(r,d,v,this.options.nodeSize,Float32Array),t&&console.timeEnd("total time"),this},getClusters:function(e,t){for(var n=this.trees[this._limitZoom(t)],r=n.range(l(e[0]),c(e[3]),l(e[2]),c(e[1])),i=[],o=0;o<r.length;o++){var a=n.points[r[o]];i.push(a.numPoints?s(a):this.points[a.id])}return i},getChildren:function(e,t){for(var n=this.trees[t+1].points[e],r=this.options.radius/(this.options.extent*Math.pow(2,t)),i=this.trees[t+1].within(n.x,n.y,r),o=[],a=0;a<i.length;a++){var u=this.trees[t+1].points[i[a]];u.parentId===e&&o.push(u.numPoints?s(u):this.points[u.id])}return o},getLeaves:function(e,t,n,r){n=n||10,r=r||0;var i=[];return this._appendLeaves(i,e,t,n,r,0),i},getTile:function(e,t,n){var r=this.trees[this._limitZoom(e)],i=Math.pow(2,e),o=this.options.extent,a=this.options.radius,s=a/o,u=(n-s)/i,l=(n+1+s)/i,c={features:[]};return this._addTileFeatures(r.range((t-s)/i,u,(t+1+s)/i,l),r.points,t,n,i,c),0===t&&this._addTileFeatures(r.range(1-s/i,u,1,l),r.points,i,n,i,c),t===i-1&&this._addTileFeatures(r.range(0,u,s/i,l),r.points,-1,n,i,c),c.features.length?c:null},getClusterExpansionZoom:function(e,t){for(;t<this.options.maxZoom;){var n=this.getChildren(e,t);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t},_appendLeaves:function(e,t,n,r,i,o){for(var a=this.getChildren(t,n),s=0;s<a.length;s++){var u=a[s].properties;if(u.cluster?o+u.point_count<=i?o+=u.point_count:o=this._appendLeaves(e,u.cluster_id,n+1,r,i,o):o<i?o++:e.push(a[s]),e.length===r)break}return o},_addTileFeatures:function(e,t,n,r,i,o){for(var a=0;a<e.length;a++){var s=t[e[a]];o.features.push({type:1,geometry:[[Math.round(this.options.extent*(s.x*i-n)),Math.round(this.options.extent*(s.y*i-r))]],tags:s.numPoints?u(s):this.points[s.id].properties})}},_limitZoom:function(e){return Math.max(this.options.minZoom,Math.min(e,this.options.maxZoom+1))},_cluster:function(e,t){for(var n=[],r=this.options.radius/(this.options.extent*Math.pow(2,t)),i=0;i<e.length;i++){var a=e[i];if(!(a.zoom<=t)){a.zoom=t;var s=this.trees[t+1],u=s.within(a.x,a.y,r),l=a.numPoints||1,c=a.x*l,f=a.y*l,p=null;this.options.reduce&&(p=this.options.initial(),this._accumulate(p,a));for(var h=0;h<u.length;h++){var d=s.points[u[h]];if(t<d.zoom){var v=d.numPoints||1;d.zoom=t,c+=d.x*v,f+=d.y*v,l+=v,d.parentId=i,this.options.reduce&&this._accumulate(p,d)}}1===l?n.push(a):(a.parentId=i,n.push(o(c/l,f/l,l,i,p)))}}return n},_accumulate:function(e,t){var n=t.numPoints?t.properties:this.options.map(this.points[t.id].properties);this.options.reduce(e,n)}}},{kdbush:26}],33:[function(e,t,n){"use strict";function r(e,t){if(!(this instanceof r))return new r(e,t);if(this.data=e||[],this.length=this.data.length,this.compare=t||i,this.length>0)for(var n=this.length>>1;n>=0;n--)this._down(n)}function i(e,t){return e<t?-1:e>t?1:0}t.exports=r,r.prototype={push:function(e){this.data.push(e),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var e=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),e}},peek:function(){return this.data[0]},_up:function(e){for(var t=this.data,n=this.compare,r=t[e];e>0;){var i=e-1>>1,o=t[i];if(n(r,o)>=0)break;t[e]=o,e=i}t[e]=r},_down:function(e){for(var t=this.data,n=this.compare,r=this.length,i=r>>1,o=t[e];e<i;){var a=1+(e<<1),s=a+1,u=t[a];if(s<r&&n(t[s],u)<0&&(a=s,u=t[s]),n(u,o)>=0)break;t[e]=u,e=a}t[e]=o}}},{}],34:[function(e,t,n){function r(e){var t=new h;return o(e,t),t.finish()}function i(e){var t={};for(var n in e)t[n]=new d(e[n].features),t[n].name=n;return r({layers:t})}function o(e,t){for(var n in e.layers)t.writeMessage(3,a,e.layers[n])}function a(e,t){t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var n,r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<e.length;n++)r.feature=e.feature(n),t.writeMessage(2,s,r);var i=r.keys;for(n=0;n<i.length;n++)t.writeStringField(3,i[n]);var o=r.values;for(n=0;n<o.length;n++)t.writeMessage(4,p,o[n])}function s(e,t){var n=e.feature;void 0!==n.id&&t.writeVarintField(1,n.id),t.writeMessage(2,u,e),t.writeVarintField(3,n.type),t.writeMessage(4,f,n)}function u(e,t){var n=e.feature,r=e.keys,i=e.values,o=e.keycache,a=e.valuecache;for(var s in n.properties){var u=o[s];void 0===u&&(r.push(s),u=r.length-1,o[s]=u),t.writeVarint(u);var l=n.properties[s],c=typeof l;"string"!==c&&"boolean"!==c&&"number"!==c&&(l=JSON.stringify(l));var f=c+":"+l,p=a[f];void 0===p&&(i.push(l),p=i.length-1,a[f]=p),t.writeVarint(p)}}function l(e,t){return(t<<3)+(7&e)}function c(e){return e<<1^e>>31}function f(e,t){for(var n=e.loadGeometry(),r=e.type,i=0,o=0,a=n.length,s=0;s<a;s++){var u=n[s],f=1;1===r&&(f=u.length),t.writeVarint(l(1,f));for(var p=0;p<u.length;p++){1===p&&1!==r&&t.writeVarint(l(2,u.length-1));var h=u[p].x-i,d=u[p].y-o;t.writeVarint(c(h)),t.writeVarint(c(d)),i+=h,o+=d}}}function p(e,t){var n=typeof e;"string"===n?t.writeStringField(1,e):"boolean"===n?t.writeBooleanField(7,e):"number"===n&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}var h=e("pbf"),d=e("./lib/geojson_wrapper");t.exports=r,t.exports.fromVectorTileJs=r,t.exports.fromGeojsonVt=i,t.exports.GeoJSONWrapper=d},{"./lib/geojson_wrapper":35,pbf:30}],35:[function(e,t,n){"use strict";function r(e){this.features=e,this.length=e.length}function i(e){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=4096}var o=e("@mapbox/point-geometry"),a=e("@mapbox/vector-tile").VectorTileFeature;t.exports=r,r.prototype.feature=function(e){return new i(this.features[e])},i.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var t=0;t<e.length;t++){for(var n=e[t],r=[],i=0;i<n.length;i++)r.push(new o(n[i][0],n[i][1]));this.geometry.push(r)}return this.geometry},i.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<e.length;o++)for(var a=e[o],s=0;s<a.length;s++){var u=a[s];t=Math.min(t,u.x),n=Math.max(n,u.x),r=Math.min(r,u.y),i=Math.max(i,u.y)}return[t,r,n,i]},i.prototype.toGeoJSON=a.prototype.toGeoJSON},{"@mapbox/point-geometry":4,"@mapbox/vector-tile":8}],36:[function(e,t,n){var r=arguments[3],i=arguments[4],o=arguments[5],a=JSON.stringify;t.exports=function(e,t){function n(e){m[e]=!0;for(var t in i[e][1]){var r=i[e][1][t];m[r]||n(r)}}for(var s,u=Object.keys(o),l=0,c=u.length;l<c;l++){var f=u[l],p=o[f].exports;if(p===e||p&&p.default===e){s=f;break}}if(!s){s=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var h={},l=0,c=u.length;l<c;l++){var f=u[l];h[f]=f}i[s]=["function(require,module,exports){"+e+"(self); }",h]}var d=Math.floor(Math.pow(16,8)*Math.random()).toString(16),v={};v[s]=s,i[d]=["function(require,module,exports){var f = require("+a(s)+");(f.default ? f.default : f)(self);}",v];var m={};n(d);var y="("+r+")({"+Object.keys(m).map(function(e){return a(e)+":["+i[e][0]+","+a(i[e][1])+"]"}).join(",")+"},{},["+a(d)+"])",g=window.URL||window.webkitURL||window.mozURL||window.msURL,_=new Blob([y],{type:"text/javascript"});if(t&&t.bare)return _;var b=g.createObjectURL(_),x=new Worker(b);return x.objectURL=b,x}},{}],37:[function(e,t,n){t.exports.RADIUS=6378137,t.exports.FLATTENING=1/298.257223563,t.exports.POLAR_RADIUS=6356752.3142},{}],38:[function(e,t,n){t.exports={version:"0.44.1"}},{}],39:[function(e,t,n){"use strict";var r=e("../util/struct_array"),i=r.StructArray,o=e("../util/struct_array"),a=o.Struct,s=e("../util/web_worker_transfer"),u=s.register,l=e("@mapbox/point-geometry"),c=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t){var n=this.length;this.resize(n+1);var r=2*n;return this.int16[r+0]=e,this.int16[r+1]=t,n},t}(i);c.prototype.bytesPerElement=4,u("StructArrayLayout2i4",c);var f=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r){var i=this.length;this.resize(i+1);var o=4*i;return this.int16[o+0]=e,this.int16[o+1]=t,this.int16[o+2]=n,this.int16[o+3]=r,i},t}(i);f.prototype.bytesPerElement=8,u("StructArrayLayout4i8",f);var p=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,i,o){var a=this.length;this.resize(a+1);var s=6*a;return this.int16[s+0]=e,this.int16[s+1]=t,this.int16[s+2]=n,this.int16[s+3]=r,this.int16[s+4]=i,this.int16[s+5]=o,a},t}(i);p.prototype.bytesPerElement=12,u("StructArrayLayout2i4i12",p);var h=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,i,o,a,s){var u=this.length;this.resize(u+1);var l=6*u,c=12*u;return this.int16[l+0]=e,this.int16[l+1]=t,this.int16[l+2]=n,this.int16[l+3]=r,this.uint8[c+8]=i,this.uint8[c+9]=o,this.uint8[c+10]=a,this.uint8[c+11]=s,u},t}(i);h.prototype.bytesPerElement=12,u("StructArrayLayout4i4ub12",h);var d=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,i,o,a,s){var u=this.length;this.resize(u+1);var l=8*u;return this.int16[l+0]=e,this.int16[l+1]=t,this.int16[l+2]=n,this.int16[l+3]=r,this.uint16[l+4]=i,this.uint16[l+5]=o,this.uint16[l+6]=a,this.uint16[l+7]=s,u},t}(i);d.prototype.bytesPerElement=16,u("StructArrayLayout4i4ui16",d);var v=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n){var r=this.length;this.resize(r+1);var i=3*r;return this.float32[i+0]=e,this.float32[i+1]=t,this.float32[i+2]=n,r},t}(i);v.prototype.bytesPerElement=12,u("StructArrayLayout3f12",v);var m=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e){var t=this.length;this.resize(t+1);var n=1*t;return this.uint32[n+0]=e,t},t}(i);m.prototype.bytesPerElement=4,u("StructArrayLayout1ul4",m);var y=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,i,o,a,s,u,l,c){var f=this.length;this.resize(f+1);var p=12*f,h=6*f;return this.int16[p+0]=e,this.int16[p+1]=t,this.int16[p+2]=n,this.int16[p+3]=r,this.int16[p+4]=i,this.int16[p+5]=o,this.uint32[h+3]=a,this.uint16[p+8]=s,this.uint16[p+9]=u,this.int16[p+10]=l,this.int16[p+11]=c,f},t}(i);y.prototype.bytesPerElement=24,u("StructArrayLayout6i1ul2ui2i24",y);var g=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,i,o){var a=this.length;this.resize(a+1);var s=6*a;return this.int16[s+0]=e,this.int16[s+1]=t,this.int16[s+2]=n,this.int16[s+3]=r,this.int16[s+4]=i,this.int16[s+5]=o,a},t}(i);g.prototype.bytesPerElement=12,u("StructArrayLayout2i2i2i12",g);var _=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t){var n=this.length;this.resize(n+1);var r=4*n;return this.uint8[r+0]=e,this.uint8[r+1]=t,n},t}(i);_.prototype.bytesPerElement=4,u("StructArrayLayout2ub4",_);var b=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,i,o,a,s,u,l,c,f,p,h){var d=this.length;this.resize(d+1);var v=20*d,m=10*d,y=40*d;return this.int16[v+0]=e,this.int16[v+1]=t,this.uint16[v+2]=n,this.uint16[v+3]=r,this.uint32[m+2]=i,this.uint32[m+3]=o,this.uint32[m+4]=a,this.uint16[v+10]=s,this.uint16[v+11]=u,this.uint16[v+12]=l,this.float32[m+7]=c,this.float32[m+8]=f,this.uint8[y+36]=p,this.uint8[y+37]=h,d},t}(i);b.prototype.bytesPerElement=40,u("StructArrayLayout2i2ui3ul3ui2f2ub40",b);var x=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e){var t=this.length;this.resize(t+1);var n=1*t;return this.float32[n+0]=e,t},t}(i);x.prototype.bytesPerElement=4,u("StructArrayLayout1f4",x);var w=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n){var r=this.length;this.resize(r+1);var i=3*r;return this.int16[i+0]=e,this.int16[i+1]=t,this.int16[i+2]=n,r},t}(i);w.prototype.bytesPerElement=6,u("StructArrayLayout3i6",w);var E=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n){var r=this.length;this.resize(r+1);var i=2*r,o=4*r;return this.uint32[i+0]=e,this.uint16[o+2]=t,this.uint16[o+3]=n,r},t}(i);E.prototype.bytesPerElement=8,u("StructArrayLayout1ul2ui8",E);var S=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n){var r=this.length;this.resize(r+1);var i=3*r;return this.uint16[i+0]=e,this.uint16[i+1]=t,this.uint16[i+2]=n,r},t}(i);S.prototype.bytesPerElement=6,u("StructArrayLayout3ui6",S);var T=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t){var n=this.length;this.resize(n+1);var r=2*n;return this.uint16[r+0]=e,this.uint16[r+1]=t,n},t}(i);T.prototype.bytesPerElement=4,u("StructArrayLayout2ui4",T);var A=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t){var n=this.length;this.resize(n+1);var r=2*n;return this.float32[r+0]=e,this.float32[r+1]=t,n},t}(i);A.prototype.bytesPerElement=8,u("StructArrayLayout2f8",A);var O=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r){var i=this.length;this.resize(i+1);var o=4*i;return this.float32[o+0]=e,this.float32[o+1]=t,this.float32[o+2]=n,this.float32[o+3]=r,i},t}(i);O.prototype.bytesPerElement=16,u("StructArrayLayout4f16",O);var P=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={anchorPointX:{},anchorPointY:{},x1:{},y1:{},x2:{},y2:{},featureIndex:{},sourceLayerIndex:{},bucketIndex:{},radius:{},signedDistanceFromAnchor:{},anchorPoint:{}};return n.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorPointX.set=function(e){this._structArray.int16[this._pos2+0]=e},n.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorPointY.set=function(e){this._structArray.int16[this._pos2+1]=e},n.x1.get=function(){return this._structArray.int16[this._pos2+2]},n.x1.set=function(e){this._structArray.int16[this._pos2+2]=e},n.y1.get=function(){return this._structArray.int16[this._pos2+3]},n.y1.set=function(e){this._structArray.int16[this._pos2+3]=e},n.x2.get=function(){return this._structArray.int16[this._pos2+4]},n.x2.set=function(e){this._structArray.int16[this._pos2+4]=e},n.y2.get=function(){return this._structArray.int16[this._pos2+5]},n.y2.set=function(e){this._structArray.int16[this._pos2+5]=e},n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.featureIndex.set=function(e){this._structArray.uint32[this._pos4+3]=e},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.sourceLayerIndex.set=function(e){this._structArray.uint16[this._pos2+8]=e},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.bucketIndex.set=function(e){this._structArray.uint16[this._pos2+9]=e},n.radius.get=function(){return this._structArray.int16[this._pos2+10]},n.radius.set=function(e){this._structArray.int16[this._pos2+10]=e},n.signedDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+11]},n.signedDistanceFromAnchor.set=function(e){this._structArray.int16[this._pos2+11]=e},n.anchorPoint.get=function(){return new l(this.anchorPointX,this.anchorPointY)},Object.defineProperties(t.prototype,n),t}(a);P.prototype.size=24;var C=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e){return new P(this,e)},t}(y);u("CollisionBoxArray",C);var k=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={anchorX:{},anchorY:{},glyphStartIndex:{},numGlyphs:{},vertexStartIndex:{},lineStartIndex:{},lineLength:{},segment:{},lowerSize:{},upperSize:{},lineOffsetX:{},lineOffsetY:{},writingMode:{},hidden:{}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorX.set=function(e){this._structArray.int16[this._pos2+0]=e},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorY.set=function(e){this._structArray.int16[this._pos2+1]=e},n.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.glyphStartIndex.set=function(e){this._structArray.uint16[this._pos2+2]=e},n.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},n.numGlyphs.set=function(e){this._structArray.uint16[this._pos2+3]=e},n.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},n.vertexStartIndex.set=function(e){this._structArray.uint32[this._pos4+2]=e},n.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.lineStartIndex.set=function(e){this._structArray.uint32[this._pos4+3]=e},n.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},n.lineLength.set=function(e){this._structArray.uint32[this._pos4+4]=e},n.segment.get=function(){return this._structArray.uint16[this._pos2+10]},n.segment.set=function(e){this._structArray.uint16[this._pos2+10]=e},n.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},n.lowerSize.set=function(e){this._structArray.uint16[this._pos2+11]=e},n.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},n.upperSize.set=function(e){this._structArray.uint16[this._pos2+12]=e},n.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},n.lineOffsetX.set=function(e){this._structArray.float32[this._pos4+7]=e},n.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},n.lineOffsetY.set=function(e){this._structArray.float32[this._pos4+8]=e},n.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},n.writingMode.set=function(e){this._structArray.uint8[this._pos1+36]=e},n.hidden.get=function(){return this._structArray.uint8[this._pos1+37]},n.hidden.set=function(e){this._structArray.uint8[this._pos1+37]=e},Object.defineProperties(t.prototype,n),t}(a);k.prototype.size=40;var R=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e){return new k(this,e)},t}(b);u("PlacedSymbolArray",R);var M=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={offsetX:{}};return n.offsetX.get=function(){return this._structArray.float32[this._pos4+0]},n.offsetX.set=function(e){this._structArray.float32[this._pos4+0]=e},Object.defineProperties(t.prototype,n),t}(a);M.prototype.size=4;var I=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getoffsetX=function(e){return this.float32[1*e+0]},t.prototype.get=function(e){return new M(this,e)},t}(x);u("GlyphOffsetArray",I);var L=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={x:{},y:{},tileUnitDistanceFromAnchor:{}};return n.x.get=function(){return this._structArray.int16[this._pos2+0]},n.x.set=function(e){this._structArray.int16[this._pos2+0]=e},n.y.get=function(){return this._structArray.int16[this._pos2+1]},n.y.set=function(e){this._structArray.int16[this._pos2+1]=e},n.tileUnitDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+2]},n.tileUnitDistanceFromAnchor.set=function(e){this._structArray.int16[this._pos2+2]=e},Object.defineProperties(t.prototype,n),t}(a);L.prototype.size=6;var D=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getx=function(e){return this.int16[3*e+0]},t.prototype.gety=function(e){return this.int16[3*e+1]},t.prototype.gettileUnitDistanceFromAnchor=function(e){return this.int16[3*e+2]},t.prototype.get=function(e){return new L(this,e)},t}(w);u("SymbolLineVertexArray",D);var N=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={featureIndex:{},sourceLayerIndex:{},bucketIndex:{}};return n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},n.featureIndex.set=function(e){this._structArray.uint32[this._pos4+0]=e},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.sourceLayerIndex.set=function(e){this._structArray.uint16[this._pos2+2]=e},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},n.bucketIndex.set=function(e){this._structArray.uint16[this._pos2+3]=e},Object.defineProperties(t.prototype,n),t}(a);N.prototype.size=8;var F=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e){return new N(this,e)},t}(E);u("FeatureIndexArray",F),t.exports={StructArrayLayout2i4:c,StructArrayLayout4i8:f,StructArrayLayout2i4i12:p,StructArrayLayout4i4ub12:h,StructArrayLayout4i4ui16:d,StructArrayLayout3f12:v,StructArrayLayout1ul4:m,StructArrayLayout6i1ul2ui2i24:y,StructArrayLayout2i2i2i12:g,StructArrayLayout2ub4:_,StructArrayLayout2i2ui3ul3ui2f2ub40:b,StructArrayLayout1f4:x,StructArrayLayout3i6:w,StructArrayLayout1ul2ui8:E,StructArrayLayout3ui6:S,StructArrayLayout2ui4:T,StructArrayLayout2f8:A,StructArrayLayout4f16:O,PosArray:c,RasterBoundsArray:f,CircleLayoutArray:c,FillLayoutArray:c,FillExtrusionLayoutArray:p,HeatmapLayoutArray:c,LineLayoutArray:h,SymbolLayoutArray:d,SymbolDynamicLayoutArray:v,SymbolOpacityArray:m,CollisionBoxLayoutArray:g,CollisionCircleLayoutArray:g,CollisionVertexArray:_,TriangleIndexArray:S,LineIndexArray:T,CollisionBoxArray:C,PlacedSymbolArray:R,GlyphOffsetArray:I,SymbolLineVertexArray:D,FeatureIndexArray:F}},{"../util/struct_array":271,"../util/web_worker_transfer":278,"@mapbox/point-geometry":4}],40:[function(e,t,n){"use strict";t.exports={deserialize:function(e,t){var n={};if(!t)return n;for(var r=0,i=e;r<i.length;r+=1){var o=i[r],a=o.layerIds.map(function(e){return t.getLayer(e)}).filter(Boolean);if(0!==a.length){o.layers=a;for(var s=0,u=a;s<u.length;s+=1)n[u[s].id]=o}}return n}}},{}],41:[function(e,t,n){"use strict";var r=e("../../util/struct_array"),i=r.createLayout;t.exports=i([{name:"a_pos",components:2,type:"Int16"}],4)},{"../../util/struct_array":271}],42:[function(e,t,n){"use strict";function r(e,t,n,r,i){e.emplaceBack(2*t+(r+1)/2,2*n+(i+1)/2)}var i=e("../array_types"),o=i.CircleLayoutArray,a=e("./circle_attributes").members,s=e("../segment"),u=s.SegmentVector,l=e("../program_configuration"),c=l.ProgramConfigurationSet,f=e("../index_array_type"),p=f.TriangleIndexArray,h=e("../load_geometry"),d=e("../extent"),v=e("../../util/web_worker_transfer"),m=v.register,y=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.layoutVertexArray=new o,this.indexArray=new p,this.segments=new u,this.programConfigurations=new c(a,e.layers,e.zoom)};y.prototype.populate=function(e,t){for(var n=this,r=0,i=e;r<i.length;r+=1){var o=i[r],a=o.feature,s=o.index,u=o.sourceLayerIndex;if(n.layers[0]._featureFilter({zoom:n.zoom},a)){var l=h(a);n.addFeature(a,l),t.featureIndex.insert(a,l,s,u,n.index)}}},y.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},y.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,a),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.programConfigurations.upload(e)},y.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},y.prototype.addFeature=function(e,t){for(var n=this,i=0,o=t;i<o.length;i+=1)for(var a=o[i],s=0,u=a;s<u.length;s+=1){var l=u[s],c=l.x,f=l.y;if(!(c<0||c>=d||f<0||f>=d)){var p=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),h=p.vertexLength;r(n.layoutVertexArray,c,f,-1,-1),r(n.layoutVertexArray,c,f,1,-1),r(n.layoutVertexArray,c,f,1,1),r(n.layoutVertexArray,c,f,-1,1),n.indexArray.emplaceBack(h,h+1,h+2),n.indexArray.emplaceBack(h,h+3,h+2),p.vertexLength+=4,p.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e)},m("CircleBucket",y,{omit:["layers"]}),t.exports=y},{"../../util/web_worker_transfer":278,"../array_types":39,"../extent":53,"../index_array_type":55,"../load_geometry":56,"../program_configuration":58,"../segment":60,"./circle_attributes":41}],43:[function(e,t,n){arguments[4][41][0].apply(n,arguments)},{"../../util/struct_array":271,dup:41}],44:[function(e,t,n){"use strict";var r=e("../array_types"),i=r.FillLayoutArray,o=e("./fill_attributes").members,a=e("../segment"),s=a.SegmentVector,u=e("../program_configuration"),l=u.ProgramConfigurationSet,c=e("../index_array_type"),f=c.LineIndexArray,p=c.TriangleIndexArray,h=e("../load_geometry"),d=e("earcut"),v=e("../../util/classify_rings"),m=e("../../util/web_worker_transfer"),y=m.register,g=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.layoutVertexArray=new i,this.indexArray=new p,this.indexArray2=new f,this.programConfigurations=new l(o,e.layers,e.zoom),this.segments=new s,this.segments2=new s};g.prototype.populate=function(e,t){for(var n=this,r=0,i=e;r<i.length;r+=1){var o=i[r],a=o.feature,s=o.index,u=o.sourceLayerIndex;if(n.layers[0]._featureFilter({zoom:n.zoom},a)){var l=h(a);n.addFeature(a,l),t.featureIndex.insert(a,l,s,u,n.index)}}},g.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},g.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,o),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2),this.programConfigurations.upload(e)},g.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},g.prototype.addFeature=function(e,t){for(var n=this,r=0,i=v(t,500);r<i.length;r+=1){for(var o=i[r],a=0,s=0,u=o;s<u.length;s+=1)a+=u[s].length;for(var l=n.segments.prepareSegment(a,n.layoutVertexArray,n.indexArray),c=l.vertexLength,f=[],p=[],h=0,m=o;h<m.length;h+=1){var y=m[h];if(0!==y.length){y!==o[0]&&p.push(f.length/2);var g=n.segments2.prepareSegment(y.length,n.layoutVertexArray,n.indexArray2),_=g.vertexLength;n.layoutVertexArray.emplaceBack(y[0].x,y[0].y),n.indexArray2.emplaceBack(_+y.length-1,_),f.push(y[0].x),f.push(y[0].y);for(var b=1;b<y.length;b++)n.layoutVertexArray.emplaceBack(y[b].x,y[b].y),n.indexArray2.emplaceBack(_+b-1,_+b),f.push(y[b].x),f.push(y[b].y);g.vertexLength+=y.length,g.primitiveLength+=y.length}}for(var x=d(f,p),w=0;w<x.length;w+=3)n.indexArray.emplaceBack(c+x[w],c+x[w+1],c+x[w+2]);l.vertexLength+=a,l.primitiveLength+=x.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e)},y("FillBucket",g,{omit:["layers"]}),t.exports=g},{"../../util/classify_rings":255,"../../util/web_worker_transfer":278,"../array_types":39,"../index_array_type":55,"../load_geometry":56,"../program_configuration":58,"../segment":60,"./fill_attributes":43,earcut:14}],45:[function(e,t,n){"use strict";var r=e("../../util/struct_array"),i=r.createLayout;t.exports=i([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4)},{"../../util/struct_array":271}],46:[function(e,t,n){"use strict";function r(e,t,n,r,i,o,a,s){e.emplaceBack(t,n,2*Math.floor(r*w)+a,i*w*2,o*w*2,Math.round(s))}function i(e,t){return e.x===t.x&&(e.x<0||e.x>y)||e.y===t.y&&(e.y<0||e.y>y)}function o(e){return e.every(function(e){return e.x<0})||e.every(function(e){return e.x>y})||e.every(function(e){return e.y<0})||e.every(function(e){return e.y>y})}var a=e("../array_types"),s=a.FillExtrusionLayoutArray,u=e("./fill_extrusion_attributes").members,l=e("../segment"),c=l.SegmentVector,f=l.MAX_VERTEX_ARRAY_LENGTH,p=e("../program_configuration"),h=p.ProgramConfigurationSet,d=e("../index_array_type"),v=d.TriangleIndexArray,m=e("../load_geometry"),y=e("../extent"),g=e("earcut"),_=e("../../util/classify_rings"),b=e("../../util/web_worker_transfer"),x=b.register,w=Math.pow(2,13),E=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.layoutVertexArray=new s,this.indexArray=new v,this.programConfigurations=new h(u,e.layers,e.zoom),this.segments=new c};E.prototype.populate=function(e,t){for(var n=this,r=0,i=e;r<i.length;r+=1){var o=i[r],a=o.feature,s=o.index,u=o.sourceLayerIndex;if(n.layers[0]._featureFilter({zoom:n.zoom},a)){var l=m(a);n.addFeature(a,l),t.featureIndex.insert(a,l,s,u,n.index)}}},E.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},E.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,u),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.programConfigurations.upload(e)},E.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},E.prototype.addFeature=function(e,t){for(var n=this,a=0,s=_(t,500);a<s.length;a+=1){for(var u=s[a],l=0,c=0,p=u;c<p.length;c+=1)l+=p[c].length;for(var h=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),d=0,v=u;d<v.length;d+=1){var m=v[d];if(0!==m.length&&!o(m))for(var y=0,b=0;b<m.length;b++){var x=m[b];if(b>=1){var w=m[b-1];if(!i(x,w)){h.vertexLength+4>f&&(h=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray));var E=x.sub(w)._perp()._unit(),S=w.dist(x);y+S>32768&&(y=0),r(n.layoutVertexArray,x.x,x.y,E.x,E.y,0,0,y),r(n.layoutVertexArray,x.x,x.y,E.x,E.y,0,1,y),y+=S,r(n.layoutVertexArray,w.x,w.y,E.x,E.y,0,0,y),r(n.layoutVertexArray,w.x,w.y,E.x,E.y,0,1,y);var T=h.vertexLength;n.indexArray.emplaceBack(T,T+1,T+2),n.indexArray.emplaceBack(T+1,T+2,T+3),h.vertexLength+=4,h.primitiveLength+=2}}}}h.vertexLength+l>f&&(h=n.segments.prepareSegment(l,n.layoutVertexArray,n.indexArray));for(var A=[],O=[],P=h.vertexLength,C=0,k=u;C<k.length;C+=1){var R=k[C];if(0!==R.length){R!==u[0]&&O.push(A.length/2);for(var M=0;M<R.length;M++){var I=R[M];r(n.layoutVertexArray,I.x,I.y,0,0,1,1,0),A.push(I.x),A.push(I.y)}}}for(var L=g(A,O),D=0;D<L.length;D+=3)n.indexArray.emplaceBack(P+L[D],P+L[D+1],P+L[D+2]);h.primitiveLength+=L.length/3,h.vertexLength+=l}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e)},x("FillExtrusionBucket",E,{omit:["layers"]}),t.exports=E},{"../../util/classify_rings":255,"../../util/web_worker_transfer":278,"../array_types":39,"../extent":53,"../index_array_type":55,"../load_geometry":56,"../program_configuration":58,"../segment":60,"./fill_extrusion_attributes":45,earcut:14}],47:[function(e,t,n){"use strict";var r=e("./circle_bucket"),i=e("../../util/web_worker_transfer"),o=i.register,a=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(r);o("HeatmapBucket",a,{omit:["layers"]}),t.exports=a},{"../../util/web_worker_transfer":278,"./circle_bucket":42}],48:[function(e,t,n){"use strict";var r=e("../../util/struct_array"),i=r.createLayout;t.exports=i([{name:"a_pos_normal",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4)},{"../../util/struct_array":271}],49:[function(e,t,n){"use strict";function r(e,t,n,r,i,o,a){e.emplaceBack(t.x,t.y,r?1:0,i?1:-1,Math.round(g*n.x)+128,Math.round(g*n.y)+128,1+(0===o?0:o<0?-1:1)|(a*b&63)<<2,a*b>>6)}var i=e("../array_types"),o=i.LineLayoutArray,a=e("./line_attributes").members,s=e("../segment"),u=s.SegmentVector,l=e("../program_configuration"),c=l.ProgramConfigurationSet,f=e("../index_array_type"),p=f.TriangleIndexArray,h=e("../load_geometry"),d=e("../extent"),v=e("@mapbox/vector-tile").VectorTileFeature.types,m=e("../../util/web_worker_transfer"),y=m.register,g=63,_=Math.cos(Math.PI/180*37.5),b=.5,x=Math.pow(2,14)/b,w=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.layoutVertexArray=new o,this.indexArray=new p,this.programConfigurations=new c(a,e.layers,e.zoom),this.segments=new u};w.prototype.populate=function(e,t){for(var n=this,r=0,i=e;r<i.length;r+=1){var o=i[r],a=o.feature,s=o.index,u=o.sourceLayerIndex;if(n.layers[0]._featureFilter({zoom:n.zoom},a)){var l=h(a);n.addFeature(a,l),t.featureIndex.insert(a,l,s,u,n.index)}}},w.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},w.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,a),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.programConfigurations.upload(e)},w.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},w.prototype.addFeature=function(e,t){for(var n=this,r=this.layers[0].layout,i=r.get("line-join").evaluate(e),o=r.get("line-cap"),a=r.get("line-miter-limit"),s=r.get("line-round-limit"),u=0,l=t;u<l.length;u+=1){var c=l[u];n.addLine(c,e,i,o,a,s)}},w.prototype.addLine=function(e,t,n,r,i,o){for(var a=this,s="Polygon"===v[t.type],u=e.length;u>=2&&e[u-1].equals(e[u-2]);)u--;for(var l=0;l<u-1&&e[l].equals(e[l+1]);)l++;if(!(u<(s?3:2))){"bevel"===n&&(i=1.05);var c=d/(512*this.overscaling)*15,f=e[l],p=this.segments.prepareSegment(10*u,this.layoutVertexArray,this.indexArray);this.distance=0;var h,m,y,g=r,b=s?"butt":r,x=!0,w=void 0,E=void 0,S=void 0,T=void 0;this.e1=this.e2=this.e3=-1,s&&(h=e[u-2],T=f.sub(h)._unit()._perp());for(var A=l;A<u;A++)if(!(E=s&&A===u-1?e[l+1]:e[A+1])||!e[A].equals(E)){T&&(S=T),h&&(w=h),h=e[A],T=E?E.sub(h)._unit()._perp():S,S=S||T;var O=S.add(T);0===O.x&&0===O.y||O._unit();var P=O.x*T.x+O.y*T.y,C=0!==P?1/P:1/0,k=P<_&&w&&E;if(k&&A>l){var R=h.dist(w);if(R>2*c){var M=h.sub(h.sub(w)._mult(c/R)._round());a.distance+=M.dist(w),a.addCurrentVertex(M,a.distance,S.mult(1),0,0,!1,p),w=M}}var I=w&&E,L=I?n:E?g:b;if(I&&"round"===L&&(C<o?L="miter":C<=2&&(L="fakeround")),"miter"===L&&C>i&&(L="bevel"),"bevel"===L&&(C>2&&(L="flipbevel"),C<i&&(L="miter")),w&&(a.distance+=h.dist(w)),"miter"===L)O._mult(C),a.addCurrentVertex(h,a.distance,O,0,0,!1,p);else if("flipbevel"===L){if(C>100)O=T.clone().mult(-1);else{var D=S.x*T.y-S.y*T.x>0?-1:1,N=C*S.add(T).mag()/S.sub(T).mag();O._perp()._mult(N*D)}a.addCurrentVertex(h,a.distance,O,0,0,!1,p),a.addCurrentVertex(h,a.distance,O.mult(-1),0,0,!1,p)}else if("bevel"===L||"fakeround"===L){var F=S.x*T.y-S.y*T.x>0,j=-Math.sqrt(C*C-1);if(F?(y=0,m=j):(m=0,y=j),x||a.addCurrentVertex(h,a.distance,S,m,y,!1,p),"fakeround"===L){for(var B=Math.floor(8*(.5-(P-.5))),z=void 0,U=0;U<B;U++)z=T.mult((U+1)/(B+1))._add(S)._unit(),a.addPieSliceVertex(h,a.distance,z,F,p);a.addPieSliceVertex(h,a.distance,O,F,p);for(var V=B-1;V>=0;V--)z=S.mult((V+1)/(B+1))._add(T)._unit(),a.addPieSliceVertex(h,a.distance,z,F,p)}E&&a.addCurrentVertex(h,a.distance,T,-m,-y,!1,p)}else"butt"===L?(x||a.addCurrentVertex(h,a.distance,S,0,0,!1,p),E&&a.addCurrentVertex(h,a.distance,T,0,0,!1,p)):"square"===L?(x||(a.addCurrentVertex(h,a.distance,S,1,1,!1,p),a.e1=a.e2=-1),E&&a.addCurrentVertex(h,a.distance,T,-1,-1,!1,p)):"round"===L&&(x||(a.addCurrentVertex(h,a.distance,S,0,0,!1,p),a.addCurrentVertex(h,a.distance,S,1,1,!0,p),a.e1=a.e2=-1),E&&(a.addCurrentVertex(h,a.distance,T,-1,-1,!0,p),a.addCurrentVertex(h,a.distance,T,0,0,!1,p)));if(k&&A<u-1){var G=h.dist(E);if(G>2*c){var W=h.add(E.sub(h)._mult(c/G)._round());a.distance+=W.dist(h),a.addCurrentVertex(W,a.distance,T.mult(1),0,0,!1,p),h=W}}x=!1}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t)}},w.prototype.addCurrentVertex=function(e,t,n,i,o,a,s){var u,l=this.layoutVertexArray,c=this.indexArray;u=n.clone(),i&&u._sub(n.perp()._mult(i)),r(l,e,u,a,!1,i,t),this.e3=s.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),s.primitiveLength++),this.e1=this.e2,this.e2=this.e3,u=n.mult(-1),o&&u._sub(n.perp()._mult(o)),r(l,e,u,a,!0,-o,t),this.e3=s.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),s.primitiveLength++),this.e1=this.e2,this.e2=this.e3,t>x/2&&(this.distance=0,this.addCurrentVertex(e,this.distance,n,i,o,a,s))},w.prototype.addPieSliceVertex=function(e,t,n,i,o){n=n.mult(i?-1:1);var a=this.layoutVertexArray,s=this.indexArray;r(a,e,n,!1,i,0,t),this.e3=o.vertexLength++,this.e1>=0&&this.e2>=0&&(s.emplaceBack(this.e1,this.e2,this.e3),o.primitiveLength++),i?this.e2=this.e3:this.e1=this.e3},y("LineBucket",w,{omit:["layers"]}),t.exports=w},{"../../util/web_worker_transfer":278,"../array_types":39,"../extent":53,"../index_array_type":55,"../load_geometry":56,"../program_configuration":58,"../segment":60,"./line_attributes":48,"@mapbox/vector-tile":8}],50:[function(e,t,n){"use strict";var r=e("../../util/struct_array"),i=r.createLayout,o=i([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"}]),a=i([{name:"a_projected_pos",components:3,type:"Float32"}],4),s=i([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),u=i([{name:"a_placed",components:2,type:"Uint8"}],4),l={symbolLayoutAttributes:o,dynamicLayoutAttributes:a,placementOpacityAttributes:s,collisionVertexAttributes:u,collisionBox:i([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]),collisionBoxLayout:i([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),collisionCircleLayout:i([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),placement:i([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"hidden"}]),glyphOffset:i([{type:"Float32",name:"offsetX"}]),lineVertex:i([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}])};t.exports=l},{"../../util/struct_array":271}],51:[function(e,t,n){"use strict";function r(e,t,n,r,i,o,a,s){e.emplaceBack(t,n,Math.round(64*r),Math.round(64*i),o,a,s?s[0]:0,s?s[1]:0)}function i(e,t,n){e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n)}var o=e("./symbol_attributes"),a=o.symbolLayoutAttributes,s=o.collisionVertexAttributes,u=o.collisionBoxLayout,l=o.collisionCircleLayout,c=o.dynamicLayoutAttributes,f=e("../array_types"),p=f.SymbolLayoutArray,h=f.SymbolDynamicLayoutArray,d=f.SymbolOpacityArray,v=f.CollisionBoxLayoutArray,m=f.CollisionCircleLayoutArray,y=f.CollisionVertexArray,g=f.PlacedSymbolArray,_=f.GlyphOffsetArray,b=f.SymbolLineVertexArray,x=e("@mapbox/point-geometry"),w=e("../segment"),E=w.SegmentVector,S=e("../program_configuration"),T=S.ProgramConfigurationSet,A=e("../index_array_type"),O=A.TriangleIndexArray,P=A.LineIndexArray,C=e("../../symbol/transform_text"),k=e("../../symbol/mergelines"),R=e("../../util/script_detection"),M=e("../load_geometry"),I=e("@mapbox/vector-tile").VectorTileFeature.types,L=e("../../util/verticalize_punctuation"),D=(e("../../symbol/anchor"),e("../../symbol/symbol_size")),N=D.getSizeData,F=e("../../util/web_worker_transfer"),j=F.register,B=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}],z=function(e){this.layoutVertexArray=new p,this.indexArray=new O,this.programConfigurations=e,this.segments=new E,this.dynamicLayoutVertexArray=new h,this.opacityVertexArray=new d,this.placedSymbolArray=new g};z.prototype.upload=function(e,t){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,a.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.programConfigurations.upload(e),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,c.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,B,!0),this.opacityVertexBuffer.itemSize=1},z.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},j("SymbolBuffers",z);var U=function(e,t,n){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new n,this.segments=new E,this.collisionVertexArray=new y};U.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,s.members,!0)},U.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},j("CollisionBuffers",U);var V=function(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.pixelRatio=e.pixelRatio;var t=this.layers[0],n=t._unevaluatedLayout._values;this.textSizeData=N(this.zoom,n["text-size"]),this.iconSizeData=N(this.zoom,n["icon-size"]);var r=this.layers[0].layout;this.sortFeaturesByY=r.get("text-allow-overlap")||r.get("icon-allow-overlap")||r.get("text-ignore-placement")||r.get("icon-ignore-placement")};V.prototype.createArrays=function(){this.text=new z(new T(a.members,this.layers,this.zoom,function(e){return/^text/.test(e)})),this.icon=new z(new T(a.members,this.layers,this.zoom,function(e){return/^icon/.test(e)})),this.collisionBox=new U(v,u.members,P),this.collisionCircle=new U(m,l.members,O),this.glyphOffsetArray=new _,this.lineVertexArray=new b},V.prototype.populate=function(e,t){var n=this,r=this.layers[0],i=r.layout,o=i.get("text-font"),a=i.get("text-field"),s=i.get("icon-image"),u=("constant"!==a.value.kind||a.value.value.length>0)&&("constant"!==o.value.kind||o.value.value.length>0),l="constant"!==s.value.kind||s.value.value&&s.value.value.length>0;if(this.features=[],u||l){for(var c=t.iconDependencies,f=t.glyphDependencies,p={zoom:this.zoom},h=0,d=e;h<d.length;h+=1){var v=d[h],m=v.feature,y=v.index,g=v.sourceLayerIndex;if(r._featureFilter(p,m)){var _=void 0;u&&(_=r.getValueAndResolveTokens("text-field",m),_=C(_,r,m));var b=void 0;if(l&&(b=r.getValueAndResolveTokens("icon-image",m)),_||b){var x={text:_,icon:b,index:y,sourceLayerIndex:g,geometry:M(m),properties:m.properties,type:I[m.type]};if(void 0!==m.id&&(x.id=m.id),n.features.push(x),b&&(c[b]=!0),_)for(var w=o.evaluate(m).join(","),E=f[w]=f[w]||{},S="map"===i.get("text-rotation-alignment")&&"line"===i.get("symbol-placement"),T=R.allowsVerticalWritingMode(_),A=0;A<_.length;A++)if(E[_.charCodeAt(A)]=!0,S&&T){var O=L.lookup[_.charAt(A)];O&&(E[O.charCodeAt(0)]=!0)}}}}"line"===i.get("symbol-placement")&&(this.features=k(this.features))}},V.prototype.isEmpty=function(){return 0===this.symbolInstances.length},V.prototype.upload=function(e){this.text.upload(e,this.sortFeaturesByY),this.icon.upload(e,this.sortFeaturesByY),this.collisionBox.upload(e),this.collisionCircle.upload(e)},V.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.collisionBox.destroy(),this.collisionCircle.destroy()},V.prototype.addToLineVertexArray=function(e,t){var n=this,r=this.lineVertexArray.length;if(void 0!==e.segment){for(var i=e.dist(t[e.segment+1]),o=e.dist(t[e.segment]),a={},s=e.segment+1;s<t.length;s++)a[s]={x:t[s].x,y:t[s].y,tileUnitDistanceFromAnchor:i},s<t.length-1&&(i+=t[s+1].dist(t[s]));for(var u=e.segment||0;u>=0;u--)a[u]={x:t[u].x,y:t[u].y,tileUnitDistanceFromAnchor:o},u>0&&(o+=t[u-1].dist(t[u]));for(var l=0;l<t.length;l++){var c=a[l];n.lineVertexArray.emplaceBack(c.x,c.y,c.tileUnitDistanceFromAnchor)}}return{lineStartIndex:r,lineLength:this.lineVertexArray.length-r}},V.prototype.addSymbols=function(e,t,n,o,a,s,u,l,c,f){for(var p=this,h=e.indexArray,d=e.layoutVertexArray,v=e.dynamicLayoutVertexArray,m=e.segments.prepareSegment(4*t.length,e.layoutVertexArray,e.indexArray),y=this.glyphOffsetArray.length,g=m.vertexLength,_=0,b=t;_<b.length;_+=1){var x=b[_],w=x.tl,E=x.tr,S=x.bl,T=x.br,A=x.tex,O=m.vertexLength,P=x.glyphOffset[1];r(d,l.x,l.y,w.x,P+w.y,A.x,A.y,n),r(d,l.x,l.y,E.x,P+E.y,A.x+A.w,A.y,n),r(d,l.x,l.y,S.x,P+S.y,A.x,A.y+A.h,n),r(d,l.x,l.y,T.x,P+T.y,A.x+A.w,A.y+A.h,n),i(v,l,0),h.emplaceBack(O,O+1,O+2),h.emplaceBack(O+1,O+2,O+3),m.vertexLength+=4,m.primitiveLength+=2,p.glyphOffsetArray.emplaceBack(x.glyphOffset[0])}e.placedSymbolArray.emplaceBack(l.x,l.y,y,this.glyphOffsetArray.length-y,g,c,f,l.segment,n?n[0]:0,n?n[1]:0,o[0],o[1],u,!1),e.programConfigurations.populatePaintArrays(e.layoutVertexArray.length,s)},V.prototype._addCollisionDebugVertex=function(e,t,n,r,i){return t.emplaceBack(0,0),e.emplaceBack(n.x,n.y,r.x,r.y,Math.round(i.x),Math.round(i.y))},V.prototype.addCollisionDebugVertices=function(e,t,n,r,i,o,a,s){var u=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),l=u.vertexLength,c=i.layoutVertexArray,f=i.collisionVertexArray;if(this._addCollisionDebugVertex(c,f,o,a.anchor,new x(e,t)),this._addCollisionDebugVertex(c,f,o,a.anchor,new x(n,t)),this._addCollisionDebugVertex(c,f,o,a.anchor,new x(n,r)),this._addCollisionDebugVertex(c,f,o,a.anchor,new x(e,r)),u.vertexLength+=4,s){var p=i.indexArray;p.emplaceBack(l,l+1,l+2),p.emplaceBack(l,l+2,l+3),u.primitiveLength+=2}else{var h=i.indexArray;h.emplaceBack(l,l+1),h.emplaceBack(l+1,l+2),h.emplaceBack(l+2,l+3),h.emplaceBack(l+3,l),u.primitiveLength+=4}},V.prototype.generateCollisionDebugBuffers=function(){for(var e=this,t=0,n=e.symbolInstances;t<n.length;t+=1){var r=n[t];r.textCollisionFeature={boxStartIndex:r.textBoxStartIndex,boxEndIndex:r.textBoxEndIndex},r.iconCollisionFeature={boxStartIndex:r.iconBoxStartIndex,boxEndIndex:r.iconBoxEndIndex};for(var i=0;i<2;i++){var o=r[0===i?"textCollisionFeature":"iconCollisionFeature"];if(o)for(var a=o.boxStartIndex;a<o.boxEndIndex;a++){var s=e.collisionBoxArray.get(a),u=s.x1,l=s.y1,c=s.x2,f=s.y2,p=s.radius>0;e.addCollisionDebugVertices(u,l,c,f,p?e.collisionCircle:e.collisionBox,s.anchorPoint,r,p)}}}},V.prototype.deserializeCollisionBoxes=function(e,t,n,r,i){for(var o={},a=t;a<n;a++){var s=e.get(a);if(0===s.radius){o.textBox={x1:s.x1,y1:s.y1,x2:s.x2,y2:s.y2,anchorPointX:s.anchorPointX,anchorPointY:s.anchorPointY};break}o.textCircles||(o.textCircles=[]),o.textCircles.push(s.anchorPointX,s.anchorPointY,s.radius,s.signedDistanceFromAnchor,1)}for(var u=r;u<i;u++){var l=e.get(u);if(0===l.radius){o.iconBox={x1:l.x1,y1:l.y1,x2:l.x2,y2:l.y2,anchorPointX:l.anchorPointX,anchorPointY:l.anchorPointY};break}}return o},V.prototype.hasTextData=function(){return this.text.segments.get().length>0},V.prototype.hasIconData=function(){return this.icon.segments.get().length>0},V.prototype.hasCollisionBoxData=function(){return this.collisionBox.segments.get().length>0},V.prototype.hasCollisionCircleData=function(){return this.collisionCircle.segments.get().length>0},V.prototype.sortFeatures=function(e){var t=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&(this.sortedAngle=e,!(this.text.segments.get().length>1||this.icon.segments.get().length>1))){for(var n=[],r=0;r<this.symbolInstances.length;r++)n.push(r);var i=Math.sin(e),o=Math.cos(e);n.sort(function(e,n){var r=t.symbolInstances[e],a=t.symbolInstances[n];return(i*r.anchor.x+o*r.anchor.y|0)-(i*a.anchor.x+o*a.anchor.y|0)||a.featureIndex-r.featureIndex}),this.text.indexArray.clear(),this.icon.indexArray.clear();for(var a=0,s=n;a<s.length;a+=1){for(var u=s[a],l=t.symbolInstances[u],c=0,f=l.placedTextSymbolIndices;c<f.length;c+=1)for(var p=f[c],h=t.text.placedSymbolArray.get(p),d=h.vertexStartIndex+4*h.numGlyphs,v=h.vertexStartIndex;v<d;v+=4)t.text.indexArray.emplaceBack(v,v+1,v+2),t.text.indexArray.emplaceBack(v+1,v+2,v+3);var m=t.icon.placedSymbolArray.get(u);if(m.numGlyphs){var y=m.vertexStartIndex;t.icon.indexArray.emplaceBack(y,y+1,y+2),t.icon.indexArray.emplaceBack(y+1,y+2,y+3)}}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},j("SymbolBucket",V,{omit:["layers","collisionBoxArray","features","compareText"],shallow:["symbolInstances"]}),V.MAX_GLYPHS=65535,V.addDynamicAttributes=i,t.exports=V},{"../../symbol/anchor":213,"../../symbol/mergelines":221,"../../symbol/symbol_size":228,"../../symbol/transform_text":229,"../../util/script_detection":269,"../../util/verticalize_punctuation":277,"../../util/web_worker_transfer":278,"../array_types":39,"../index_array_type":55,"../load_geometry":56,"../program_configuration":58,"../segment":60,"./symbol_attributes":50,"@mapbox/point-geometry":4,"@mapbox/vector-tile":8}],52:[function(e,t,n){"use strict";var r=e("../util/image"),i=r.RGBAImage,o=e("../util/util"),a=e("../util/web_worker_transfer"),s=a.register,u=function(e,t,n){if(e<=0)throw new RangeError("Level must have positive dimension");this.dim=e,this.border=t,this.stride=this.dim+2*this.border,this.data=n||new Int32Array((this.dim+2*this.border)*(this.dim+2*this.border))};u.prototype.set=function(e,t,n){this.data[this._idx(e,t)]=n+65536},u.prototype.get=function(e,t){return this.data[this._idx(e,t)]-65536},u.prototype._idx=function(e,t){if(e<-this.border||e>=this.dim+this.border||t<-this.border||t>=this.dim+this.border)throw new RangeError("out of range source coordinates for DEM data");return(t+this.border)*this.stride+(e+this.border)},s("Level",u);var l=function(e,t,n){this.uid=e,this.scale=t||1,this.level=n||new u(256,512),this.loaded=!!n};l.prototype.loadFromImage=function(e){var t=this;if(e.height!==e.width)throw new RangeError("DEM tiles must be square");for(var n=this.level=new u(e.width,e.width/2),r=e.data,i=0;i<n.dim;i++)for(var o=0;o<n.dim;o++){var a=i*n.dim+o,s=4*a;n.set(o,i,t.scale*((256*r[s]*256+256*r[s+1]+r[s+2])/10-1e4))}for(var l=0;l<n.dim;l++)n.set(-1,l,n.get(0,l)),n.set(n.dim,l,n.get(n.dim-1,l)),n.set(l,-1,n.get(l,0)),n.set(l,n.dim,n.get(l,n.dim-1));n.set(-1,-1,n.get(0,0)),n.set(n.dim,-1,n.get(n.dim-1,0)),n.set(-1,n.dim,n.get(0,n.dim-1)),n.set(n.dim,n.dim,n.get(n.dim-1,n.dim-1)),this.loaded=!0},l.prototype.getPixels=function(){return new i({width:this.level.dim+2*this.level.border,height:this.level.dim+2*this.level.border},new Uint8Array(this.level.data.buffer))},l.prototype.backfillBorder=function(e,t,n){var r=this.level,i=e.level;if(r.dim!==i.dim)throw new Error("level mismatch (dem dimension)");var a=t*r.dim,s=t*r.dim+r.dim,u=n*r.dim,l=n*r.dim+r.dim;switch(t){case-1:a=s-1;break;case 1:s=a+1}switch(n){case-1:u=l-1;break;case 1:l=u+1}for(var c=o.clamp(a,-r.border,r.dim+r.border),f=o.clamp(s,-r.border,r.dim+r.border),p=o.clamp(u,-r.border,r.dim+r.border),h=o.clamp(l,-r.border,r.dim+r.border),d=-t*r.dim,v=-n*r.dim,m=p;m<h;m++)for(var y=c;y<f;y++)r.set(y,m,i.get(y+d,m+v))},s("DEMData",l),t.exports={DEMData:l,Level:u}},{"../util/image":263,"../util/util":275,"../util/web_worker_transfer":278}],53:[function(e,t,n){"use strict";t.exports=8192},{}],54:[function(e,t,n){"use strict";function r(e,t){return t-e}var i=(e("@mapbox/point-geometry"),e("./load_geometry")),o=e("./extent"),a=e("../style-spec/feature_filter"),s=e("grid-index"),u=e("../util/dictionary_coder"),l=e("@mapbox/vector-tile"),c=e("pbf"),f=e("../util/vectortile_to_geojson"),p=e("../util/util").arraysIntersect,h=e("../source/tile_id"),d=(h.OverscaledTileID,e("../util/web_worker_transfer")),v=d.register,m=e("./array_types"),y=m.FeatureIndexArray,g=function(e,t,n,r){this.tileID=e,this.overscaling=t,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=n||new s(o,16,0),this.featureIndexArray=r||new y};g.prototype.insert=function(e,t,n,r,i){var o=this,a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i);for(var s=0;s<t.length;s++){for(var u=t[s],l=[1/0,1/0,-1/0,-1/0],c=0;c<u.length;c++){var f=u[c];l[0]=Math.min(l[0],f.x),l[1]=Math.min(l[1],f.y),l[2]=Math.max(l[2],f.x),l[3]=Math.max(l[3],f.y)}o.grid.insert(a,l[0],l[1],l[2],l[3])}},g.prototype.query=function(e,t){this.vtLayers||(this.vtLayers=new l.VectorTile(new c(this.rawTileData)).layers,this.sourceLayerCoder=new u(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]));for(var n={},i=e.params||{},s=o/e.tileSize/e.scale,f=a(i.filter),p=e.queryGeometry,h=e.additionalRadius*s,d=1/0,v=1/0,m=-1/0,y=-1/0,g=0;g<p.length;g++)for(var _=p[g],b=0;b<_.length;b++){var x=_[b];d=Math.min(d,x.x),v=Math.min(v,x.y),m=Math.max(m,x.x),y=Math.max(y,x.y)}var w=this.grid.query(d-h,v-h,m+h,y+h);w.sort(r),this.filterMatching(n,w,this.featureIndexArray,p,f,i.layers,t,e.bearing,s);var E=e.collisionIndex?e.collisionIndex.queryRenderedSymbols(p,this.tileID,o/e.tileSize,e.collisionBoxArray,e.sourceID,e.bucketInstanceIds):[];return E.sort(),this.filterMatching(n,E,e.collisionBoxArray,p,f,i.layers,t,e.bearing,s),n},g.prototype.filterMatching=function(e,t,n,r,o,a,s,u,l){for(var c,h=this,d=0;d<t.length;d++){var v=t[d];if(v!==c){c=v;var m=n.get(v),y=h.bucketLayerIDs[m.bucketIndex];if(!a||p(a,y)){var g=h.sourceLayerCoder.decode(m.sourceLayerIndex),_=h.vtLayers[g],b=_.feature(m.featureIndex);if(o({zoom:h.tileID.overscaledZ},b))for(var x=null,w=0;w<y.length;w++){var E=y[w];if(!(a&&a.indexOf(E)<0)){var S=s[E];if(S&&("symbol"===S.type||(x||(x=i(b)),S.queryIntersectsFeature(r,b,x,h.z,u,l)))){var T=new f(b,h.z,h.x,h.y);T.layer=S.serialize();var A=e[E];void 0===A&&(A=e[E]=[]),A.push({featureIndex:v,feature:T})}}}}}}},g.prototype.hasLayer=function(e){for(var t=this,n=0,r=t.bucketLayerIDs;n<r.length;n+=1)for(var i=r[n],o=0,a=i;o<a.length;o+=1){var s=a[o];if(e===s)return!0}return!1},v("FeatureIndex",g,{omit:["rawTileData","sourceLayerCoder"]}),t.exports=g},{"../source/tile_id":114,"../style-spec/feature_filter":148,"../util/dictionary_coder":257,"../util/util":275,"../util/vectortile_to_geojson":276,"../util/web_worker_transfer":278,"./array_types":39,"./extent":53,"./load_geometry":56,"@mapbox/point-geometry":4,"@mapbox/vector-tile":8,"grid-index":24,pbf:30}],55:[function(e,t,n){"use strict";t.exports={LineIndexArray:e("./array_types").LineIndexArray,TriangleIndexArray:e("./array_types").TriangleIndexArray}},{"./array_types":39}],56:[function(e,t,n){"use strict";var r=e("../util/util"),i=e("./extent"),o=function(e){return{min:-1*Math.pow(2,e-1),max:Math.pow(2,e-1)-1}}(16);t.exports=function(e){for(var t=i/e.extent,n=e.loadGeometry(),a=0;a<n.length;a++)for(var s=n[a],u=0;u<s.length;u++){var l=s[u];l.x=Math.round(l.x*t),l.y=Math.round(l.y*t),(l.x<o.min||l.x>o.max||l.y<o.min||l.y>o.max)&&r.warnOnce("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return n}},{"../util/util":275,"./extent":53}],57:[function(e,t,n){"use strict";var r=e("../util/struct_array"),i=r.createLayout;t.exports=i([{name:"a_pos",type:"Int16",components:2}])},{"../util/struct_array":271}],58:[function(e,t,n){"use strict";function r(e){return[o(255*e.r,255*e.g),o(255*e.b,255*e.a)]}function i(e,t){return{"text-opacity":"opacity","icon-opacity":"opacity","text-color":"fill_color","icon-color":"fill_color","text-halo-color":"halo_color","icon-halo-color":"halo_color","text-halo-blur":"halo_blur","icon-halo-blur":"halo_blur","text-halo-width":"halo_width","icon-halo-width":"halo_width","line-gap-width":"gapwidth"}[e]||e.replace(t+"-","").replace(/-/g,"_")}var o=e("../shaders/encode_attribute").packUint8ToFloat,a=(e("../style-spec/util/color"),e("../util/web_worker_transfer")),s=a.register,u=e("../style/properties"),l=u.PossiblyEvaluatedPropertyValue,c=e("./array_types"),f=c.StructArrayLayout1f4,p=c.StructArrayLayout2f8,h=c.StructArrayLayout4f16,d=function(e,t,n){this.value=e,this.name=t,this.type=n,this.statistics={max:-1/0}};d.prototype.defines=function(){return["#define HAS_UNIFORM_u_"+this.name]},d.prototype.populatePaintArray=function(){},d.prototype.upload=function(){},d.prototype.destroy=function(){},d.prototype.setUniforms=function(e,t,n,r){var i=r.constantOr(this.value),o=e.gl;"color"===this.type?o.uniform4f(t.uniforms["u_"+this.name],i.r,i.g,i.b,i.a):o.uniform1f(t.uniforms["u_"+this.name],i)};var v=function(e,t,n){this.expression=e,this.name=t,this.type=n,this.statistics={max:-1/0};var r="color"===n?p:f;this.paintVertexAttributes=[{name:"a_"+t,type:"Float32",components:"color"===n?2:1,offset:0}],this.paintVertexArray=new r};v.prototype.defines=function(){return[]},v.prototype.populatePaintArray=function(e,t){var n=this.paintVertexArray,i=n.length;n.reserve(e);var o=this.expression.evaluate({zoom:0},t);if("color"===this.type)for(var a=r(o),s=i;s<e;s++)n.emplaceBack(a[0],a[1]);else{for(var u=i;u<e;u++)n.emplaceBack(o);this.statistics.max=Math.max(this.statistics.max,o)}},v.prototype.upload=function(e){this.paintVertexArray&&(this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes))},v.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},v.prototype.setUniforms=function(e,t){e.gl.uniform1f(t.uniforms["a_"+this.name+"_t"],0)};var m=function(e,t,n,r,i){this.expression=e,this.name=t,this.type=n,this.useIntegerZoom=r,this.zoom=i,this.statistics={max:-1/0};var o="color"===n?h:p;this.paintVertexAttributes=[{name:"a_"+t,type:"Float32",components:"color"===n?4:2,offset:0}],this.paintVertexArray=new o};m.prototype.defines=function(){return[]},m.prototype.populatePaintArray=function(e,t){var n=this.paintVertexArray,i=n.length;n.reserve(e);var o=this.expression.evaluate({zoom:this.zoom},t),a=this.expression.evaluate({zoom:this.zoom+1},t);if("color"===this.type)for(var s=r(o),u=r(a),l=i;l<e;l++)n.emplaceBack(s[0],s[1],u[0],u[1]);else{for(var c=i;c<e;c++)n.emplaceBack(o,a);this.statistics.max=Math.max(this.statistics.max,o,a)}},m.prototype.upload=function(e){this.paintVertexArray&&(this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes))},m.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},m.prototype.interpolationFactor=function(e){return this.useIntegerZoom?this.expression.interpolationFactor(Math.floor(e),this.zoom,this.zoom+1):this.expression.interpolationFactor(e,this.zoom,this.zoom+1)},m.prototype.setUniforms=function(e,t,n){e.gl.uniform1f(t.uniforms["a_"+this.name+"_t"],this.interpolationFactor(n.zoom))};var y=function(){this.binders={},this.cacheKey="",this._buffers=[]};y.createDynamic=function(e,t,n){var r=new y,o=[];for(var a in e.paint._values)if(n(a)){var s=e.paint.get(a);if(s instanceof l&&s.property.specification["property-function"]){var u=i(a,e.type),c=s.property.specification.type,f=s.property.useIntegerZoom;"constant"===s.value.kind?(r.binders[a]=new d(s.value,u,c),o.push("/u_"+u)):"source"===s.value.kind?(r.binders[a]=new v(s.value,u,c),o.push("/a_"+u)):(r.binders[a]=new m(s.value,u,c,f,t),o.push("/z_"+u))}}return r.cacheKey=o.sort().join(""),r},y.prototype.populatePaintArrays=function(e,t){var n=this;for(var r in n.binders)n.binders[r].populatePaintArray(e,t)},y.prototype.defines=function(){var e=this,t=[];for(var n in e.binders)t.push.apply(t,e.binders[n].defines());return t},y.prototype.setUniforms=function(e,t,n,r){var i=this;for(var o in i.binders)i.binders[o].setUniforms(e,t,r,n.get(o))},y.prototype.getPaintVertexBuffers=function(){return this._buffers},y.prototype.upload=function(e){var t=this;for(var n in t.binders)t.binders[n].upload(e);var r=[];for(var i in t.binders){var o=t.binders[i];(o instanceof v||o instanceof m)&&o.paintVertexBuffer&&r.push(o.paintVertexBuffer)}this._buffers=r},y.prototype.destroy=function(){var e=this;for(var t in e.binders)e.binders[t].destroy()};var g=function(e,t,n,r){var i=this;void 0===r&&(r=function(){return!0}),this.programConfigurations={};for(var o=0,a=t;o<a.length;o+=1){var s=a[o];i.programConfigurations[s.id]=y.createDynamic(s,n,r),i.programConfigurations[s.id].layoutAttributes=e}};g.prototype.populatePaintArrays=function(e,t){var n=this;for(var r in n.programConfigurations)n.programConfigurations[r].populatePaintArrays(e,t)},g.prototype.get=function(e){return this.programConfigurations[e]},g.prototype.upload=function(e){var t=this;for(var n in t.programConfigurations)t.programConfigurations[n].upload(e)},g.prototype.destroy=function(){var e=this;for(var t in e.programConfigurations)e.programConfigurations[t].destroy()},s("ConstantBinder",d),s("SourceExpressionBinder",v),s("CompositeExpressionBinder",m),s("ProgramConfiguration",y,{omit:["_buffers"]}),s("ProgramConfigurationSet",g),t.exports={ProgramConfiguration:y,ProgramConfigurationSet:g}},{"../shaders/encode_attribute":96,"../style-spec/util/color":153,"../style/properties":188,"../util/web_worker_transfer":278,"./array_types":39}],59:[function(e,t,n){"use strict";var r=e("../util/struct_array"),i=r.createLayout;t.exports=i([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}])},{"../util/struct_array":271}],60:[function(e,t,n){"use strict";var r=e("../util/util"),i=r.warnOnce,o=e("../util/web_worker_transfer"),a=o.register,s=Math.pow(2,16)-1,u=function(e){void 0===e&&(e=[]),this.segments=e};u.prototype.prepareSegment=function(e,n,r){var o=this.segments[this.segments.length-1];return e>s&&i("Max vertices per segment is "+s+": bucket requested "+e),(!o||o.vertexLength+e>t.exports.MAX_VERTEX_ARRAY_LENGTH)&&(o={vertexOffset:n.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0},this.segments.push(o)),o},u.prototype.get=function(){return this.segments},u.prototype.destroy=function(){for(var e=this,t=0,n=e.segments;t<n.length;t+=1){var r=n[t];for(var i in r.vaos)r.vaos[i].destroy()}},a("SegmentVector",u),t.exports={SegmentVector:u,MAX_VERTEX_ARRAY_LENGTH:s}},{"../util/util":275,"../util/web_worker_transfer":278}],61:[function(e,t,n){"use strict";var r=function(e,t,n){this.column=e,this.row=t,this.zoom=n};r.prototype.clone=function(){return new r(this.column,this.row,this.zoom)},r.prototype.zoomTo=function(e){return this.clone()._zoomTo(e)},r.prototype.sub=function(e){return this.clone()._sub(e)},r.prototype._zoomTo=function(e){var t=Math.pow(2,e-this.zoom);return this.column*=t,this.row*=t,this.zoom=e,this},r.prototype._sub=function(e){return e=e.zoomTo(this.zoom),this.column-=e.column,this.row-=e.row,this},t.exports=r},{}],62:[function(e,t,n){"use strict";var r=e("../util/util").wrap,i=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: ("+e+", "+t+")");if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};i.prototype.wrap=function(){return new i(r(this.lng,-180,180),this.lat)},i.prototype.toArray=function(){return[this.lng,this.lat]},i.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},i.prototype.toBounds=function(t){var n=360*t/40075017,r=n/Math.cos(Math.PI/180*this.lat);return new(e("./lng_lat_bounds"))(new i(this.lng-r,this.lat-n),new i(this.lng+r,this.lat+n))},i.convert=function(e){if(e instanceof i)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new i(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new i(Number(e.lng),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")},t.exports=i},{"../util/util":275,"./lng_lat_bounds":63}],63:[function(e,t,n){"use strict";var r=e("./lng_lat"),i=function(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))};i.prototype.setNorthEast=function(e){return this._ne=e instanceof r?new r(e.lng,e.lat):r.convert(e),this},i.prototype.setSouthWest=function(e){return this._sw=e instanceof r?new r(e.lng,e.lat):r.convert(e),this},i.prototype.extend=function(e){var t,n,o=this._sw,a=this._ne;if(e instanceof r)t=e,n=e;else{if(!(e instanceof i))return Array.isArray(e)?e.every(Array.isArray)?this.extend(i.convert(e)):this.extend(r.convert(e)):this;if(t=e._sw,n=e._ne,!t||!n)return this}return o||a?(o.lng=Math.min(t.lng,o.lng),o.lat=Math.min(t.lat,o.lat),a.lng=Math.max(n.lng,a.lng),a.lat=Math.max(n.lat,a.lat)):(this._sw=new r(t.lng,t.lat),this._ne=new r(n.lng,n.lat)),this},i.prototype.getCenter=function(){return new r((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},i.prototype.getSouthWest=function(){return this._sw},i.prototype.getNorthEast=function(){return this._ne},i.prototype.getNorthWest=function(){return new r(this.getWest(),this.getNorth())},i.prototype.getSouthEast=function(){return new r(this.getEast(),this.getSouth())},i.prototype.getWest=function(){return this._sw.lng},i.prototype.getSouth=function(){return this._sw.lat},i.prototype.getEast=function(){return this._ne.lng},i.prototype.getNorth=function(){return this._ne.lat},i.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},i.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},i.prototype.isEmpty=function(){return!(this._sw&&this._ne)},i.convert=function(e){return!e||e instanceof i?e:new i(e)},t.exports=i},{"./lng_lat":62}],64:[function(e,t,n){"use strict";var r=e("./lng_lat"),i=e("@mapbox/point-geometry"),o=e("./coordinate"),a=e("../util/util"),s=e("../style-spec/util/interpolate").number,u=e("../util/tile_cover"),l=e("../source/tile_id"),c=(l.CanonicalTileID,l.UnwrappedTileID),f=e("../data/extent"),p=e("@mapbox/gl-matrix"),h=p.vec4,d=p.mat4,v=p.mat2,m=function(e,t,n){this.tileSize=512,this._renderWorldCopies=void 0===n||n,this._minZoom=e||0,this._maxZoom=t||22,this.latRange=[-85.05113,85.05113],this.width=0,this.height=0,this._center=new r(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._posMatrixCache={},this._alignedPosMatrixCache={}},y={minZoom:{},maxZoom:{},renderWorldCopies:{},worldSize:{},centerPoint:{},size:{},bearing:{},pitch:{},fov:{},zoom:{},center:{},unmodified:{},x:{},y:{},point:{}};m.prototype.clone=function(){var e=new m(this._minZoom,this._maxZoom,this._renderWorldCopies);return e.tileSize=this.tileSize,e.latRange=this.latRange,e.width=this.width,e.height=this.height,e._center=this._center,e.zoom=this.zoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._unmodified=this._unmodified,e._calcMatrices(),e},y.minZoom.get=function(){return this._minZoom},y.minZoom.set=function(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))},y.maxZoom.get=function(){return this._maxZoom},y.maxZoom.set=function(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))},y.renderWorldCopies.get=function(){return this._renderWorldCopies},y.worldSize.get=function(){return this.tileSize*this.scale},y.centerPoint.get=function(){return this.size._div(2)},y.size.get=function(){return new i(this.width,this.height)},y.bearing.get=function(){return-this.angle/Math.PI*180},y.bearing.set=function(e){var t=-a.wrap(e,-180,180)*Math.PI/180;this.angle!==t&&(this._unmodified=!1,this.angle=t,this._calcMatrices(),this.rotationMatrix=v.create(),v.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},y.pitch.get=function(){return this._pitch/Math.PI*180},y.pitch.set=function(e){var t=a.clamp(e,0,60)/180*Math.PI;this._pitch!==t&&(this._unmodified=!1,this._pitch=t,this._calcMatrices())},y.fov.get=function(){return this._fov/Math.PI*180},y.fov.set=function(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())},y.zoom.get=function(){return this._zoom},y.zoom.set=function(e){var t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom,this._constrain(),this._calcMatrices())},y.center.get=function(){return this._center},y.center.set=function(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())},m.prototype.coveringZoomLevel=function(e){return(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize))},m.prototype.getVisibleUnwrappedCoordinates=function(e){var t=this.pointCoordinate(new i(0,0),0),n=this.pointCoordinate(new i(this.width,0),0),r=Math.floor(t.column),o=Math.floor(n.column),a=[new c(0,e)];if(this._renderWorldCopies)for(var s=r;s<=o;s++)0!==s&&a.push(new c(s,e));return a},m.prototype.coveringTiles=function(e){var t=this.coveringZoomLevel(e),n=t;if(void 0!==e.minzoom&&t<e.minzoom)return[];void 0!==e.maxzoom&&t>e.maxzoom&&(t=e.maxzoom);var r=this.pointCoordinate(this.centerPoint,t),o=new i(r.column-.5,r.row-.5),a=[this.pointCoordinate(new i(0,0),t),this.pointCoordinate(new i(this.width,0),t),this.pointCoordinate(new i(this.width,this.height),t),this.pointCoordinate(new i(0,this.height),t)];return u(t,a,e.reparseOverscaled?n:t,this._renderWorldCopies).sort(function(e,t){return o.dist(e.canonical)-o.dist(t.canonical)})},m.prototype.resize=function(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()},y.unmodified.get=function(){return this._unmodified},m.prototype.zoomScale=function(e){return Math.pow(2,e)},m.prototype.scaleZoom=function(e){return Math.log(e)/Math.LN2},m.prototype.project=function(e){return new i(this.lngX(e.lng),this.latY(e.lat))},m.prototype.unproject=function(e){return new r(this.xLng(e.x),this.yLat(e.y))},y.x.get=function(){return this.lngX(this.center.lng)},y.y.get=function(){return this.latY(this.center.lat)},y.point.get=function(){return new i(this.x,this.y)},m.prototype.lngX=function(e){return(180+e)*this.worldSize/360},m.prototype.latY=function(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))*this.worldSize/360},m.prototype.xLng=function(e){return 360*e/this.worldSize-180},m.prototype.yLat=function(e){var t=180-360*e/this.worldSize;return 360/Math.PI*Math.atan(Math.exp(t*Math.PI/180))-90},m.prototype.setLocationAtPoint=function(e,t){var n=this.pointCoordinate(t)._sub(this.pointCoordinate(this.centerPoint));this.center=this.coordinateLocation(this.locationCoordinate(e)._sub(n)),this._renderWorldCopies&&(this.center=this.center.wrap())},m.prototype.locationPoint=function(e){return this.coordinatePoint(this.locationCoordinate(e))},m.prototype.pointLocation=function(e){return this.coordinateLocation(this.pointCoordinate(e))},m.prototype.locationCoordinate=function(e){return new o(this.lngX(e.lng)/this.tileSize,this.latY(e.lat)/this.tileSize,this.zoom).zoomTo(this.tileZoom)},m.prototype.coordinateLocation=function(e){var t=e.zoomTo(this.zoom);return new r(this.xLng(t.column*this.tileSize),this.yLat(t.row*this.tileSize))},m.prototype.pointCoordinate=function(e,t){void 0===t&&(t=this.tileZoom);var n=[e.x,e.y,0,1],r=[e.x,e.y,1,1];h.transformMat4(n,n,this.pixelMatrixInverse),h.transformMat4(r,r,this.pixelMatrixInverse);var i=n[3],a=r[3],u=n[0]/i,l=r[0]/a,c=n[1]/i,f=r[1]/a,p=n[2]/i,d=r[2]/a,v=p===d?0:(0-p)/(d-p);return new o(s(u,l,v)/this.tileSize,s(c,f,v)/this.tileSize,this.zoom)._zoomTo(t)},m.prototype.coordinatePoint=function(e){var t=e.zoomTo(this.zoom),n=[t.column*this.tileSize,t.row*this.tileSize,0,1];return h.transformMat4(n,n,this.pixelMatrix),new i(n[0]/n[3],n[1]/n[3])},m.prototype.calculatePosMatrix=function(e,t){void 0===t&&(t=!1);var n=e.key,r=t?this._alignedPosMatrixCache:this._posMatrixCache;if(r[n])return r[n];var i=e.canonical,o=this.worldSize/this.zoomScale(i.z),a=i.x+Math.pow(2,i.z)*e.wrap,s=d.identity(new Float64Array(16));return d.translate(s,s,[a*o,i.y*o,0]),d.scale(s,s,[o/f,o/f,1]),d.multiply(s,t?this.alignedProjMatrix:this.projMatrix,s),r[n]=new Float32Array(s),r[n]},m.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,t,n,r,o=-90,a=90,s=-180,u=180,l=this.size,c=this._unmodified;if(this.latRange){var f=this.latRange;o=this.latY(f[1]),a=this.latY(f[0]),e=a-o<l.y?l.y/(a-o):0}if(this.lngRange){var p=this.lngRange;s=this.lngX(p[0]),u=this.lngX(p[1]),t=u-s<l.x?l.x/(u-s):0}var h=Math.max(t||0,e||0);if(h)return this.center=this.unproject(new i(t?(u+s)/2:this.x,e?(a+o)/2:this.y)),this.zoom+=this.scaleZoom(h),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var d=this.y,v=l.y/2;d-v<o&&(r=o+v),d+v>a&&(r=a-v)}if(this.lngRange){var m=this.x,y=l.x/2;m-y<s&&(n=s+y),m+y>u&&(n=u-y)}void 0===n&&void 0===r||(this.center=this.unproject(new i(void 0!==n?n:this.x,void 0!==r?r:this.y))),this._unmodified=c,this._constraining=!1}},m.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var e=this._fov/2,t=Math.PI/2+this._pitch,n=Math.sin(e)*this.cameraToCenterDistance/Math.sin(Math.PI-t-e),r=this.x,i=this.y,o=Math.cos(Math.PI/2-this._pitch)*n+this.cameraToCenterDistance,a=1.01*o,s=new Float64Array(16);d.perspective(s,this._fov,this.width/this.height,1,a),d.scale(s,s,[1,-1,1]),d.translate(s,s,[0,0,-this.cameraToCenterDistance]),d.rotateX(s,s,this._pitch),d.rotateZ(s,s,this.angle),d.translate(s,s,[-r,-i,0]);var u=this.worldSize/(2*Math.PI*6378137*Math.abs(Math.cos(this.center.lat*(Math.PI/180))));d.scale(s,s,[1,1,u,1]),this.projMatrix=s;var l=this.width%2/2,c=this.height%2/2,f=Math.cos(this.angle),p=Math.sin(this.angle),h=r-Math.round(r)+f*l+p*c,v=i-Math.round(i)+f*c+p*l,m=new Float64Array(s);if(d.translate(m,m,[h>.5?h-1:h,v>.5?v-1:v,0]),this.alignedProjMatrix=m,s=d.create(),d.scale(s,s,[this.width/2,-this.height/2,1]),d.translate(s,s,[1,-1,0]),this.pixelMatrix=d.multiply(new Float64Array(16),s,this.projMatrix),!(s=d.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=s,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Object.defineProperties(m.prototype,y),t.exports=m},{"../data/extent":53,"../source/tile_id":114,"../style-spec/util/interpolate":158,"../util/tile_cover":273,"../util/util":275,"./coordinate":61,"./lng_lat":62,"@mapbox/gl-matrix":2,"@mapbox/point-geometry":4}],65:[function(e,t,n){"use strict";var r=e("../style-spec/util/color"),i=function(e,t,n){this.blendFunction=e,this.blendColor=t,this.mask=n};i.Replace=[1,0],i.disabled=new i(i.Replace,r.transparent,[!1,!1,!1,!1]),i.unblended=new i(i.Replace,r.transparent,[!0,!0,!0,!0]),i.alphaBlended=new i([1,771],r.transparent,[!0,!0,!0,!0]),t.exports=i},{"../style-spec/util/color":153}],66:[function(e,t,n){"use strict";var r=e("./index_buffer"),i=e("./vertex_buffer"),o=e("./framebuffer"),a=(e("./depth_mode"),e("./stencil_mode"),e("./color_mode")),s=e("../util/util"),u=e("./value"),l=u.ClearColor,c=u.ClearDepth,f=u.ClearStencil,p=u.ColorMask,h=u.DepthMask,d=u.StencilMask,v=u.StencilFunc,m=u.StencilOp,y=u.StencilTest,g=u.DepthRange,_=u.DepthTest,b=u.DepthFunc,x=u.Blend,w=u.BlendFunc,E=u.BlendColor,S=u.Program,T=u.LineWidth,A=u.ActiveTextureUnit,O=u.Viewport,P=u.BindFramebuffer,C=u.BindRenderbuffer,k=u.BindTexture,R=u.BindVertexBuffer,M=u.BindElementBuffer,I=u.BindVertexArrayOES,L=u.PixelStoreUnpack,D=u.PixelStoreUnpackPremultiplyAlpha,N=function(e){this.gl=e,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.lineWidthRange=e.getParameter(e.ALIASED_LINE_WIDTH_RANGE),this.clearColor=new l(this),this.clearDepth=new c(this),this.clearStencil=new f(this),this.colorMask=new p(this),this.depthMask=new h(this),this.stencilMask=new d(this),this.stencilFunc=new v(this),this.stencilOp=new m(this),this.stencilTest=new y(this),this.depthRange=new g(this),this.depthTest=new _(this),this.depthFunc=new b(this),this.blend=new x(this),this.blendFunc=new w(this),this.blendColor=new E(this),this.program=new S(this),this.lineWidth=new T(this),this.activeTexture=new A(this),this.viewport=new O(this),this.bindFramebuffer=new P(this),this.bindRenderbuffer=new C(this),this.bindTexture=new k(this),this.bindVertexBuffer=new R(this),this.bindElementBuffer=new M(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new I(this),this.pixelStoreUnpack=new L(this),this.pixelStoreUnpackPremultiplyAlpha=new D(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=e.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&e.getExtension("OES_texture_half_float_linear")};N.prototype.createIndexBuffer=function(e,t){return new r(this,e,t)},N.prototype.createVertexBuffer=function(e,t,n){return new i(this,e,t,n)},N.prototype.createRenderbuffer=function(e,t,n){var r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,e,t,n),this.bindRenderbuffer.set(null),i},N.prototype.createFramebuffer=function(e,t){return new o(this,e,t)},N.prototype.clear=function(e){var t=e.color,n=e.depth,r=this.gl,i=0;t&&(i|=r.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(i|=r.DEPTH_BUFFER_BIT,this.clearDepth.set(n),this.depthMask.set(!0)),r.clear(i)},N.prototype.setDepthMode=function(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)},N.prototype.setStencilMode=function(e){e.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)},N.prototype.setColorMode=function(e){s.deepEqual(e.blendFunction,a.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)},t.exports=N},{"../util/util":275,"./color_mode":65,"./depth_mode":67,"./framebuffer":68,"./index_buffer":69,"./stencil_mode":70,"./value":71,"./vertex_buffer":72}],67:[function(e,t,n){"use strict";var r=function(e,t,n){this.func=e,this.mask=t,this.range=n};r.ReadOnly=!1,r.ReadWrite=!0,r.disabled=new r(519,r.ReadOnly,[0,1]),t.exports=r},{}],68:[function(e,t,n){"use strict";var r=e("./value"),i=r.ColorAttachment,o=r.DepthAttachment,a=function(e,t,n){this.context=e,this.width=t,this.height=n;var r=e.gl,a=this.framebuffer=r.createFramebuffer();this.colorAttachment=new i(e,a),this.depthAttachment=new o(e,a)};a.prototype.destroy=function(){var e=this.context.gl,t=this.colorAttachment.get();t&&e.deleteTexture(t);var n=this.depthAttachment.get();n&&e.deleteRenderbuffer(n),e.deleteFramebuffer(this.framebuffer)},t.exports=a},{"./value":71}],69:[function(e,t,n){"use strict";var r=function(e,t,n){this.context=e;var r=e.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(n),this.unbindVAO(),e.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer};r.prototype.unbindVAO=function(){this.context.extVertexArrayObject&&this.context.bindVertexArrayOES.set(null)},r.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},r.prototype.updateData=function(e){var t=this.context.gl;this.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)},r.prototype.destroy=function(){var e=this.context.gl;this.buffer&&(e.deleteBuffer(this.buffer),delete this.buffer)},t.exports=r},{}],70:[function(e,t,n){"use strict";var r=function(e,t,n,r,i,o){this.test=e,this.ref=t,this.mask=n,this.fail=r,this.depthFail=i,this.pass=o};r.disabled=new r({func:519,mask:0},0,0,7680,7680,7680),t.exports=r},{}],71:[function(e,t,n){"use strict";var r=e("../style-spec/util/color"),i=e("../util/util"),o=function(e){this.context=e,this.current=r.transparent};o.prototype.get=function(){return this.current},o.prototype.set=function(e){var t=this.current;e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a||(this.context.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e)};var a=function(e){this.context=e,this.current=1};a.prototype.get=function(){return this.current},a.prototype.set=function(e){this.current!==e&&(this.context.gl.clearDepth(e),this.current=e)};var s=function(e){this.context=e,this.current=0};s.prototype.get=function(){return this.current},s.prototype.set=function(e){this.current!==e&&(this.context.gl.clearStencil(e),this.current=e)};var u=function(e){this.context=e,this.current=[!0,!0,!0,!0]};u.prototype.get=function(){return this.current},u.prototype.set=function(e){var t=this.current;e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]||(this.context.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e)};var l=function(e){this.context=e,this.current=!0};l.prototype.get=function(){return this.current},l.prototype.set=function(e){this.current!==e&&(this.context.gl.depthMask(e),this.current=e)};var c=function(e){this.context=e,this.current=255};c.prototype.get=function(){return this.current},c.prototype.set=function(e){this.current!==e&&(this.context.gl.stencilMask(e),this.current=e)};var f=function(e){this.context=e,this.current={func:e.gl.ALWAYS,ref:0,mask:255}};f.prototype.get=function(){return this.current},f.prototype.set=function(e){var t=this.current;e.func===t.func&&e.ref===t.ref&&e.mask===t.mask||(this.context.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e)};var p=function(e){this.context=e;var t=this.context.gl;this.current=[t.KEEP,t.KEEP,t.KEEP]};p.prototype.get=function(){return this.current},p.prototype.set=function(e){var t=this.current;e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]||(this.context.gl.stencilOp(e[0],e[1],e[2]),this.current=e)};var h=function(e){this.context=e,this.current=!1};h.prototype.get=function(){return this.current},h.prototype.set=function(e){if(this.current!==e){var t=this.context.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e}};var d=function(e){this.context=e,this.current=[0,1]};d.prototype.get=function(){return this.current},d.prototype.set=function(e){var t=this.current;e[0]===t[0]&&e[1]===t[1]||(this.context.gl.depthRange(e[0],e[1]),this.current=e)};var v=function(e){this.context=e,this.current=!1};v.prototype.get=function(){return this.current},v.prototype.set=function(e){if(this.current!==e){var t=this.context.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e}};var m=function(e){this.context=e,this.current=e.gl.LESS};m.prototype.get=function(){return this.current},m.prototype.set=function(e){this.current!==e&&(this.context.gl.depthFunc(e),this.current=e)};var y=function(e){this.context=e,this.current=!1};y.prototype.get=function(){return this.current},y.prototype.set=function(e){if(this.current!==e){var t=this.context.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e}};var g=function(e){this.context=e;var t=this.context.gl;this.current=[t.ONE,t.ZERO]};g.prototype.get=function(){return this.current},g.prototype.set=function(e){var t=this.current;e[0]===t[0]&&e[1]===t[1]||(this.context.gl.blendFunc(e[0],e[1]),this.current=e)};var _=function(e){this.context=e,this.current=r.transparent};_.prototype.get=function(){return this.current},_.prototype.set=function(e){var t=this.current;e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a||(this.context.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e)};var b=function(e){this.context=e,this.current=null};b.prototype.get=function(){return this.current},b.prototype.set=function(e){this.current!==e&&(this.context.gl.useProgram(e),this.current=e)};var x=function(e){this.context=e,this.current=1};x.prototype.get=function(){return this.current},x.prototype.set=function(e){var t=this.context.lineWidthRange,n=i.clamp(e,t[0],t[1]);this.current!==n&&(this.context.gl.lineWidth(n),this.current=e)};var w=function(e){this.context=e,this.current=e.gl.TEXTURE0};w.prototype.get=function(){return this.current},w.prototype.set=function(e){this.current!==e&&(this.context.gl.activeTexture(e),this.current=e)};var E=function(e){this.context=e;var t=this.context.gl;this.current=[0,0,t.drawingBufferWidth,t.drawingBufferHeight]};E.prototype.get=function(){return this.current},E.prototype.set=function(e){var t=this.current;e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]||(this.context.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e)};var S=function(e){this.context=e,this.current=null};S.prototype.get=function(){return this.current},S.prototype.set=function(e){if(this.current!==e){var t=this.context.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e}};var T=function(e){this.context=e,this.current=null};T.prototype.get=function(){return this.current},T.prototype.set=function(e){if(this.current!==e){var t=this.context.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e}};var A=function(e){this.context=e,this.current=null};A.prototype.get=function(){return this.current},A.prototype.set=function(e){if(this.current!==e){var t=this.context.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e}};var O=function(e){this.context=e,this.current=null};O.prototype.get=function(){return this.current},O.prototype.set=function(e){if(this.current!==e){var t=this.context.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e}};var P=function(e){this.context=e,this.current=null};P.prototype.get=function(){return this.current},P.prototype.set=function(e){var t=this.context.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e};var C=function(e){this.context=e,this.current=null};C.prototype.get=function(){return this.current},C.prototype.set=function(e){this.current!==e&&this.context.extVertexArrayObject&&(this.context.extVertexArrayObject.bindVertexArrayOES(e),this.current=e)};var k=function(e){this.context=e,this.current=4};k.prototype.get=function(){return this.current},k.prototype.set=function(e){if(this.current!==e){var t=this.context.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e}};var R=function(e){this.context=e,this.current=!1};R.prototype.get=function(){return this.current},R.prototype.set=function(e){if(this.current!==e){var t=this.context.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e}};var M=function(e,t){this.context=e,this.current=null,this.parent=t};M.prototype.get=function(){return this.current};var I=function(e){function t(t,n){e.call(this,t,n),this.dirty=!1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.set=function(e){if(this.dirty||this.current!==e){var t=this.context.gl;this.context.bindFramebuffer.set(this.parent),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}},t.prototype.setDirty=function(){this.dirty=!0},t}(M),L=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.set=function(e){if(this.current!==e){var t=this.context.gl;this.context.bindFramebuffer.set(this.parent),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e),this.current=e}},t}(M);t.exports={ClearColor:o,ClearDepth:a,ClearStencil:s,ColorMask:u,DepthMask:l,StencilMask:c,StencilFunc:f,StencilOp:p,StencilTest:h,DepthRange:d,DepthTest:v,DepthFunc:m,Blend:y,BlendFunc:g,BlendColor:_,Program:b,LineWidth:x,ActiveTextureUnit:w,Viewport:E,BindFramebuffer:S,BindRenderbuffer:T,BindTexture:A,BindVertexBuffer:O,BindElementBuffer:P,BindVertexArrayOES:C,PixelStoreUnpack:k,PixelStoreUnpackPremultiplyAlpha:R,ColorAttachment:I,DepthAttachment:L}},{"../style-spec/util/color":153,"../util/util":275}],72:[function(e,t,n){"use strict";var r={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},i=function(e,t,n,r){this.length=t.length,this.attributes=n,this.itemSize=t.bytesPerElement,this.dynamicDraw=r,this.context=e;var i=e.gl;this.buffer=i.createBuffer(),e.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer};i.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},i.prototype.updateData=function(e){var t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)},i.prototype.enableAttributes=function(e,t){for(var n=this,r=0;r<this.attributes.length;r++){var i=n.attributes[r],o=t.attributes[i.name];void 0!==o&&e.enableVertexAttribArray(o)}},i.prototype.setVertexAttribPointers=function(e,t,n){for(var i=this,o=0;o<this.attributes.length;o++){var a=i.attributes[o],s=t.attributes[a.name];void 0!==s&&e.vertexAttribPointer(s,a.components,e[r[a.type]],!1,i.itemSize,a.offset+i.itemSize*(n||0))}},i.prototype.destroy=function(){var e=this.context.gl;this.buffer&&(e.deleteBuffer(this.buffer),delete this.buffer)},t.exports=i},{}],73:[function(e,t,n){"use strict";var r=e("@mapbox/mapbox-gl-supported"),i=e("./util/browser"),o=e("../package.json").version,a=e("./ui/map"),s=e("./ui/control/navigation_control"),u=e("./ui/control/geolocate_control"),l=e("./ui/control/attribution_control"),c=e("./ui/control/scale_control"),f=e("./ui/control/fullscreen_control"),p=e("./ui/popup"),h=e("./ui/marker"),d=e("./style/style"),v=e("./geo/lng_lat"),m=e("./geo/lng_lat_bounds"),y=e("@mapbox/point-geometry"),g=e("./util/evented"),_=e("./util/config"),b=e("./source/rtl_text_plugin");t.exports={version:o,supported:r,workerCount:Math.max(Math.floor(i.hardwareConcurrency/2),1),setRTLTextPlugin:b.setRTLTextPlugin,Map:a,NavigationControl:s,GeolocateControl:u,AttributionControl:l,ScaleControl:c,FullscreenControl:f,Popup:p,Marker:h,Style:d,LngLat:v,LngLatBounds:m,Point:y,Evented:g,config:_,get accessToken(){return _.ACCESS_TOKEN},set accessToken(e){_.ACCESS_TOKEN=e}}},{"../package.json":38,"./geo/lng_lat":62,"./geo/lng_lat_bounds":63,"./source/rtl_text_plugin":109,"./style/style":190,"./ui/control/attribution_control":232,"./ui/control/fullscreen_control":233,"./ui/control/geolocate_control":234,"./ui/control/navigation_control":236,"./ui/control/scale_control":237,"./ui/map":247,"./ui/marker":248,"./ui/popup":249,"./util/browser":252,"./util/config":256,"./util/evented":260,"@mapbox/mapbox-gl-supported":3,"@mapbox/point-geometry":4}],74:[function(e,t,n){"use strict";function r(e,t,n){var r=n.paint.get("background-color"),s=n.paint.get("background-opacity");if(0!==s){var u=e.context,l=u.gl,c=e.transform,f=c.tileSize,p=n.paint.get("background-pattern"),h=p||1!==r.a||1!==s?"translucent":"opaque";if(e.renderPass===h){u.setStencilMode(o.disabled),u.setDepthMode(e.depthModeForSublayer(0,"opaque"===h?a.ReadWrite:a.ReadOnly)),u.setColorMode(e.colorModeForRenderPass());var d;if(p){if(i.isPatternMissing(p,e))return;d=e.useProgram("backgroundPattern"),i.prepare(p,e,d),e.tileExtentPatternVAO.bind(u,d,e.tileExtentBuffer,[])}else d=e.useProgram("background"),l.uniform4fv(d.uniforms.u_color,[r.r,r.g,r.b,r.a]),e.tileExtentVAO.bind(u,d,e.tileExtentBuffer,[]);l.uniform1f(d.uniforms.u_opacity,s);for(var v=c.coveringTiles({tileSize:f}),m=0,y=v;m<y.length;m+=1){var g=y[m];p&&i.setTile({tileID:g,tileSize:f},e,d),l.uniformMatrix4fv(d.uniforms.u_matrix,!1,e.transform.calculatePosMatrix(g.toUnwrapped())),l.drawArrays(l.TRIANGLE_STRIP,0,e.tileExtentBuffer.length)}}}}var i=e("./pattern"),o=e("../gl/stencil_mode"),a=e("../gl/depth_mode");t.exports=r},{"../gl/depth_mode":67,"../gl/stencil_mode":70,"./pattern":91}],75:[function(e,t,n){"use strict";function r(e,t,n,r){if("translucent"===e.renderPass){var s=n.paint.get("circle-opacity"),u=n.paint.get("circle-stroke-width"),l=n.paint.get("circle-stroke-opacity");if(0!==s.constantOr(1)||0!==u.constantOr(1)&&0!==l.constantOr(1)){var c=e.context,f=c.gl;c.setDepthMode(e.depthModeForSublayer(0,a.ReadOnly)),c.setStencilMode(o.disabled),c.setColorMode(e.colorModeForRenderPass());for(var p=!0,h=0;h<r.length;h++){var d=r[h],v=t.getTile(d),m=v.getBucket(n);if(m){var y=e.context.program.get(),g=m.programConfigurations.get(n.id),_=e.useProgram("circle",g);if((p||_.program!==y)&&(g.setUniforms(c,_,n.paint,{zoom:e.transform.zoom}),p=!1),f.uniform1f(_.uniforms.u_camera_to_center_distance,e.transform.cameraToCenterDistance),f.uniform1i(_.uniforms.u_scale_with_map,"map"===n.paint.get("circle-pitch-scale")?1:0),"map"===n.paint.get("circle-pitch-alignment")){f.uniform1i(_.uniforms.u_pitch_with_map,1);var b=i(v,1,e.transform.zoom);f.uniform2f(_.uniforms.u_extrude_scale,b,b)}else f.uniform1i(_.uniforms.u_pitch_with_map,0),f.uniform2fv(_.uniforms.u_extrude_scale,e.transform.pixelsToGLUnits);f.uniformMatrix4fv(_.uniforms.u_matrix,!1,e.translatePosMatrix(d.posMatrix,v,n.paint.get("circle-translate"),n.paint.get("circle-translate-anchor"))),_.draw(c,f.TRIANGLES,n.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,g)}}}}}var i=e("../source/pixels_to_tile_units"),o=e("../gl/stencil_mode"),a=e("../gl/depth_mode");t.exports=r},{"../gl/depth_mode":67,"../gl/stencil_mode":70,"../source/pixels_to_tile_units":104}],76:[function(e,t,n){"use strict";function r(e,t,n,r,i){var u=e.context,l=u.gl,c=i?e.useProgram("collisionCircle"):e.useProgram("collisionBox");u.setDepthMode(a.disabled),u.setStencilMode(s.disabled),u.setColorMode(e.colorModeForRenderPass());for(var f=0;f<r.length;f++){var p=r[f],h=t.getTile(p),d=h.getBucket(n);if(d){var v=i?d.collisionCircle:d.collisionBox;if(v){l.uniformMatrix4fv(c.uniforms.u_matrix,!1,p.posMatrix),i||u.lineWidth.set(1),l.uniform1f(c.uniforms.u_camera_to_center_distance,e.transform.cameraToCenterDistance);var m=o(h,1,e.transform.zoom),y=Math.pow(2,e.transform.zoom-h.tileID.overscaledZ);l.uniform1f(c.uniforms.u_pixels_to_tile_units,m),l.uniform2f(c.uniforms.u_extrude_scale,e.transform.pixelsToGLUnits[0]/(m*y),e.transform.pixelsToGLUnits[1]/(m*y)),c.draw(u,i?l.TRIANGLES:l.LINES,n.id,v.layoutVertexBuffer,v.indexBuffer,v.segments,null,v.collisionVertexBuffer,null)}}}}function i(e,t,n,i){r(e,t,n,i,!1),r(e,t,n,i,!0)}var o=e("../source/pixels_to_tile_units"),a=e("../gl/depth_mode"),s=e("../gl/stencil_mode");t.exports=i},{"../gl/depth_mode":67,"../gl/stencil_mode":70,"../source/pixels_to_tile_units":104}],77:[function(e,t,n){"use strict";function r(e,t,n){for(var r=0;r<n.length;r++)i(e,t,n[r])}function i(e,t,n){var r=e.context,i=r.gl;r.lineWidth.set(1*a.devicePixelRatio);var c=n.posMatrix,v=e.useProgram("debug");r.setDepthMode(h.disabled),r.setStencilMode(d.disabled),r.setColorMode(e.colorModeForRenderPass()),i.uniformMatrix4fv(v.uniforms.u_matrix,!1,c),i.uniform4f(v.uniforms.u_color,1,0,0,1),e.debugVAO.bind(r,v,e.debugBuffer,[]),i.drawArrays(i.LINE_STRIP,0,e.debugBuffer.length);for(var m=o(n.toString(),50,200,5),y=new f,g=0;g<m.length;g+=2)y.emplaceBack(m[g],m[g+1]);var _=r.createVertexBuffer(y,p.members);(new l).bind(r,v,_,[]),i.uniform4f(v.uniforms.u_color,1,1,1,1);for(var b=t.getTile(n).tileSize,x=u/(Math.pow(2,e.transform.zoom-n.overscaledZ)*b),w=[[-1,-1],[-1,1],[1,-1],[1,1]],E=0;E<w.length;E++){var S=w[E];i.uniformMatrix4fv(v.uniforms.u_matrix,!1,s.translate([],c,[x*S[0],x*S[1],0])),i.drawArrays(i.LINES,0,_.length)}i.uniform4f(v.uniforms.u_color,0,0,0,1),i.uniformMatrix4fv(v.uniforms.u_matrix,!1,c),i.drawArrays(i.LINES,0,_.length)}function o(e,t,n,r){r=r||1;var i,o,a,s,u,l,c,f,p=[];for(i=0,o=e.length;i<o;i++)if(u=v[e[i]]){for(f=null,a=0,s=u[1].length;a<s;a+=2)-1===u[1][a]&&-1===u[1][a+1]?f=null:(l=t+u[1][a]*r,c=n-u[1][a+1]*r,f&&p.push(f.x,f.y,l,c),f={x:l,y:c});t+=u[0]*r}return p}var a=e("../util/browser"),s=e("@mapbox/gl-matrix").mat4,u=e("../data/extent"),l=e("./vertex_array_object"),c=e("../data/array_types"),f=c.PosArray,p=e("../data/pos_attributes"),h=e("../gl/depth_mode"),d=e("../gl/stencil_mode");t.exports=r;var v={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]}},{"../data/array_types":39,"../data/extent":53,"../data/pos_attributes":57,"../gl/depth_mode":67,"../gl/stencil_mode":70,"../util/browser":252,"./vertex_array_object":95,"@mapbox/gl-matrix":2}],78:[function(e,t,n){"use strict";function r(e,t,n,r){var s=n.paint.get("fill-color"),u=n.paint.get("fill-opacity");if(0!==u.constantOr(1)){var f=e.context;f.setColorMode(e.colorModeForRenderPass());var p=n.paint.get("fill-pattern")||1!==s.constantOr(l.transparent).a||1!==u.constantOr(0)?"translucent":"opaque";e.renderPass===p&&(f.setDepthMode(e.depthModeForSublayer(1,"opaque"===e.renderPass?c.ReadWrite:c.ReadOnly)),i(e,t,n,r,o)),"translucent"===e.renderPass&&n.paint.get("fill-antialias")&&(f.lineWidth.set(2),f.setDepthMode(e.depthModeForSublayer(n.getPaintProperty("fill-outline-color")?2:0,c.ReadOnly)),i(e,t,n,r,a))}}function i(e,t,n,r,i){if(!u.isPatternMissing(n.paint.get("fill-pattern"),e))for(var o=!0,a=0,s=r;a<s.length;a+=1){var l=s[a],c=t.getTile(l),f=c.getBucket(n);f&&(e.context.setStencilMode(e.stencilModeForClipping(l)),i(e,t,n,c,l,f,o),o=!1)}}function o(e,t,n,r,i,o,a){var u=e.context.gl,l=o.programConfigurations.get(n.id);s("fill",n.paint.get("fill-pattern"),e,l,n,r,i,a).draw(e.context,u.TRIANGLES,n.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,l)}function a(e,t,n,r,i,o,a){var u=e.context.gl,l=o.programConfigurations.get(n.id),c=n.getPaintProperty("fill-outline-color")?null:n.paint.get("fill-pattern"),f=s("fillOutline",c,e,l,n,r,i,a);u.uniform2f(f.uniforms.u_world,u.drawingBufferWidth,u.drawingBufferHeight),f.draw(e.context,u.LINES,n.id,o.layoutVertexBuffer,o.indexBuffer2,o.segments2,l)}function s(e,t,n,r,i,o,a,s){var l,c=n.context.program.get();return t?(l=n.useProgram(e+"Pattern",r),(s||l.program!==c)&&(r.setUniforms(n.context,l,i.paint,{zoom:n.transform.zoom}),u.prepare(t,n,l)),u.setTile(o,n,l)):(l=n.useProgram(e,r),(s||l.program!==c)&&r.setUniforms(n.context,l,i.paint,{zoom:n.transform.zoom})),n.context.gl.uniformMatrix4fv(l.uniforms.u_matrix,!1,n.translatePosMatrix(a.posMatrix,o,i.paint.get("fill-translate"),i.paint.get("fill-translate-anchor"))),l}var u=e("./pattern"),l=e("../style-spec/util/color"),c=e("../gl/depth_mode");t.exports=r},{"../gl/depth_mode":67,"../style-spec/util/color":153,"./pattern":91}],79:[function(e,t,n){"use strict";function r(e,t,n,r){if(0!==n.paint.get("fill-extrusion-opacity"))if("offscreen"===e.renderPass){i(e,n);for(var s=!0,u=0,l=r;u<l.length;u+=1){var c=l[u],f=t.getTile(c),p=f.getBucket(n);p&&(a(e,t,n,f,c,p,s),s=!1)}}else"translucent"===e.renderPass&&o(e,n)}function i(e,t){var n=e.context,r=n.gl,i=t.viewportFrame;if(e.depthRboNeedsClear&&e.setupOffscreenDepthRenderbuffer(),!i){var o=new c(n,{width:e.width,height:e.height,data:null},r.RGBA);o.bind(r.LINEAR,r.CLAMP_TO_EDGE),i=t.viewportFrame=n.createFramebuffer(e.width,e.height),i.colorAttachment.set(o.texture)}n.bindFramebuffer.set(i.framebuffer),i.depthAttachment.set(e.depthRbo),e.depthRboNeedsClear&&(n.clear({depth:1}),e.depthRboNeedsClear=!1),n.clear({color:f.transparent}),n.setStencilMode(m.disabled),n.setDepthMode(new p(r.LEQUAL,p.ReadWrite,[0,1])),n.setColorMode(e.colorModeForRenderPass())}function o(e,t){var n=t.viewportFrame;if(n){var r=e.context,i=r.gl,o=e.useProgram("extrusionTexture");r.setStencilMode(m.disabled),r.setDepthMode(p.disabled),r.setColorMode(e.colorModeForRenderPass()),r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,n.colorAttachment.get()),i.uniform1f(o.uniforms.u_opacity,t.paint.get("fill-extrusion-opacity")),i.uniform1i(o.uniforms.u_image,0);var a=d.create();d.ortho(a,0,e.width,e.height,0,0,1),i.uniformMatrix4fv(o.uniforms.u_matrix,!1,a),i.uniform2f(o.uniforms.u_world,i.drawingBufferWidth,i.drawingBufferHeight),e.viewportVAO.bind(r,o,e.viewportBuffer,[]),i.drawArrays(i.TRIANGLE_STRIP,0,4)}}function a(e,t,n,r,i,o,a){var u=e.context,c=u.gl,f=n.paint.get("fill-extrusion-pattern"),p=e.context.program.get(),h=o.programConfigurations.get(n.id),d=e.useProgram(f?"fillExtrusionPattern":"fillExtrusion",h);if((a||d.program!==p)&&h.setUniforms(u,d,n.paint,{zoom:e.transform.zoom}),f){if(l.isPatternMissing(f,e))return;l.prepare(f,e,d),l.setTile(r,e,d),c.uniform1f(d.uniforms.u_height_factor,-Math.pow(2,i.overscaledZ)/r.tileSize/8)}e.context.gl.uniformMatrix4fv(d.uniforms.u_matrix,!1,e.translatePosMatrix(i.posMatrix,r,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor"))),s(d,e),d.draw(u,c.TRIANGLES,n.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,h)}function s(e,t){var n=t.context.gl,r=t.style.light,i=r.properties.get("position"),o=[i.x,i.y,i.z],a=h.create();"viewport"===r.properties.get("anchor")&&h.fromRotation(a,-t.transform.angle),v.transformMat3(o,o,a);var s=r.properties.get("color");n.uniform3fv(e.uniforms.u_lightpos,o),n.uniform1f(e.uniforms.u_lightintensity,r.properties.get("intensity")),n.uniform3f(e.uniforms.u_lightcolor,s.r,s.g,s.b)}var u=e("@mapbox/gl-matrix"),l=e("./pattern"),c=e("./texture"),f=e("../style-spec/util/color"),p=e("../gl/depth_mode"),h=u.mat3,d=u.mat4,v=u.vec3,m=e("../gl/stencil_mode");t.exports=r},{"../gl/depth_mode":67,"../gl/stencil_mode":70,"../style-spec/util/color":153,"./pattern":91,"./texture":93,"@mapbox/gl-matrix":2}],80:[function(e,t,n){"use strict";function r(e,t,n,r){if(0!==n.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){var o=e.context,s=o.gl;o.setDepthMode(e.depthModeForSublayer(0,f.ReadOnly)),o.setStencilMode(p.disabled),i(o,e,n),o.clear({color:c.transparent}),o.setColorMode(new h([s.ONE,s.ONE],c.transparent,[!0,!0,!0,!0]));for(var u=!0,d=0;d<r.length;d++){var v=r[d];if(!t.hasRenderableParent(v)){var m=t.getTile(v),y=m.getBucket(n);if(y){var g=e.context.program.get(),_=y.programConfigurations.get(n.id),b=e.useProgram("heatmap",_),x=e.transform,w=x.zoom;(u||b.program!==g)&&(_.setUniforms(e.context,b,n.paint,{zoom:w}),u=!1),s.uniform1f(b.uniforms.u_extrude_scale,l(m,1,w)),s.uniform1f(b.uniforms.u_intensity,n.paint.get("heatmap-intensity")),s.uniformMatrix4fv(b.uniforms.u_matrix,!1,v.posMatrix),b.draw(o,s.TRIANGLES,n.id,y.layoutVertexBuffer,y.indexBuffer,y.segments,_)}}}o.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),a(e,n))}function i(e,t,n){var r=e.gl;e.activeTexture.set(r.TEXTURE1),e.viewport.set([0,0,t.width/4,t.height/4]);var i=n.heatmapFbo;if(i)r.bindTexture(r.TEXTURE_2D,i.colorAttachment.get()),e.bindFramebuffer.set(i.framebuffer);else{var a=r.createTexture();r.bindTexture(r.TEXTURE_2D,a),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),i=n.heatmapFbo=e.createFramebuffer(t.width/4,t.height/4),o(e,t,a,i)}}function o(e,t,n,r){var i=e.gl;i.texImage2D(i.TEXTURE_2D,0,i.RGBA,t.width/4,t.height/4,0,i.RGBA,e.extTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:i.UNSIGNED_BYTE,null),r.colorAttachment.set(n),e.extTextureHalfFloat&&i.checkFramebufferStatus(i.FRAMEBUFFER)!==i.FRAMEBUFFER_COMPLETE&&(e.extTextureHalfFloat=null,r.colorAttachment.setDirty(),o(e,t,n,r))}function a(e,t){var n=e.context,r=n.gl,i=t.heatmapFbo;if(i){n.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,i.colorAttachment.get()),n.activeTexture.set(r.TEXTURE1);var o=t.colorRampTexture;o||(o=t.colorRampTexture=new u(n,t.colorRamp,r.RGBA)),o.bind(r.LINEAR,r.CLAMP_TO_EDGE),n.setDepthMode(f.disabled);var a=e.useProgram("heatmapTexture"),l=t.paint.get("heatmap-opacity");r.uniform1f(a.uniforms.u_opacity,l),r.uniform1i(a.uniforms.u_image,0),r.uniform1i(a.uniforms.u_color_ramp,1);var c=s.create();s.ortho(c,0,e.width,e.height,0,0,1),r.uniformMatrix4fv(a.uniforms.u_matrix,!1,c),r.uniform2f(a.uniforms.u_world,r.drawingBufferWidth,r.drawingBufferHeight),e.viewportVAO.bind(e.context,a,e.viewportBuffer,[]),r.drawArrays(r.TRIANGLE_STRIP,0,4)}}var s=e("@mapbox/gl-matrix").mat4,u=e("./texture"),l=e("../source/pixels_to_tile_units"),c=e("../style-spec/util/color"),f=e("../gl/depth_mode"),p=e("../gl/stencil_mode"),h=e("../gl/color_mode");t.exports=r},{"../gl/color_mode":65,"../gl/depth_mode":67,"../gl/stencil_mode":70,"../source/pixels_to_tile_units":104,"../style-spec/util/color":153,"./texture":93,"@mapbox/gl-matrix":2}],81:[function(e,t,n){"use strict";function r(e,t,n,r){if("offscreen"===e.renderPass||"translucent"===e.renderPass){var i=e.context;i.setDepthMode(e.depthModeForSublayer(0,h.ReadOnly)),i.setStencilMode(p.disabled),i.setColorMode(e.colorModeForRenderPass());for(var o=0,u=r;o<u.length;o+=1){var l=u[o],c=t.getTile(l);c.needsHillshadePrepare&&"offscreen"===e.renderPass?s(e,c):"translucent"===e.renderPass&&a(e,c,n)}i.viewport.set([0,0,e.width,e.height])}}function i(e,t,n){var r=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(r-=t.transform.angle),t.context.gl.uniform2f(e.uniforms.u_light,n.paint.get("hillshade-exaggeration"),r)}function o(e,t){var n=t.toCoordinate(),r=new u(n.column,n.row+1,n.zoom);return[e.transform.coordinateLocation(n).lat,e.transform.coordinateLocation(r).lat]}function a(e,t,n){var r=e.context,a=r.gl,s=t.fbo;if(s){var u=e.useProgram("hillshade"),l=e.transform.calculatePosMatrix(t.tileID.toUnwrapped());i(u,e,n);var c=o(e,t.tileID);r.activeTexture.set(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,s.colorAttachment.get()),a.uniformMatrix4fv(u.uniforms.u_matrix,!1,l),a.uniform2fv(u.uniforms.u_latrange,c),a.uniform1i(u.uniforms.u_image,0);var f=n.paint.get("hillshade-shadow-color");a.uniform4f(u.uniforms.u_shadow,f.r,f.g,f.b,f.a);var p=n.paint.get("hillshade-highlight-color");a.uniform4f(u.uniforms.u_highlight,p.r,p.g,p.b,p.a);var h=n.paint.get("hillshade-accent-color");if(a.uniform4f(u.uniforms.u_accent,h.r,h.g,h.b,h.a),t.maskedBoundsBuffer&&t.maskedIndexBuffer&&t.segments)u.draw(r,a.TRIANGLES,n.id,t.maskedBoundsBuffer,t.maskedIndexBuffer,t.segments);else{var d=e.rasterBoundsBuffer;e.rasterBoundsVAO.bind(r,u,d,[]),a.drawArrays(a.TRIANGLE_STRIP,0,d.length)}}}function s(e,t){var n=e.context,r=n.gl;if(t.dem&&t.dem.level){var i=t.dem.level.dim,o=t.dem.getPixels();if(n.activeTexture.set(r.TEXTURE1),n.pixelStoreUnpackPremultiplyAlpha.set(!1),t.demTexture=t.demTexture||e.getTileTexture(t.tileSize),t.demTexture){var a=t.demTexture;a.update(o,!1),a.bind(r.NEAREST,r.CLAMP_TO_EDGE)}else t.demTexture=new l(n,o,r.RGBA,!1),t.demTexture.bind(r.NEAREST,r.CLAMP_TO_EDGE);n.activeTexture.set(r.TEXTURE0);var s=t.fbo;if(!s){var u=new l(n,{width:i,height:i,data:null},r.RGBA);u.bind(r.LINEAR,r.CLAMP_TO_EDGE),s=t.fbo=n.createFramebuffer(i,i),s.colorAttachment.set(u.texture)}n.bindFramebuffer.set(s.framebuffer),n.viewport.set([0,0,i,i]);var p=f.create();f.ortho(p,0,c,-c,0,0,1),f.translate(p,p,[0,-c,0]);var h=e.useProgram("hillshadePrepare");r.uniformMatrix4fv(h.uniforms.u_matrix,!1,p),r.uniform1f(h.uniforms.u_zoom,t.tileID.overscaledZ),r.uniform2fv(h.uniforms.u_dimension,[2*i,2*i]),r.uniform1i(h.uniforms.u_image,1);var d=e.rasterBoundsBuffer;e.rasterBoundsVAO.bind(n,h,d,[]),r.drawArrays(r.TRIANGLE_STRIP,0,d.length),t.needsHillshadePrepare=!1}}var u=e("../geo/coordinate"),l=e("./texture"),c=e("../data/extent"),f=e("@mapbox/gl-matrix").mat4,p=e("../gl/stencil_mode"),h=e("../gl/depth_mode");t.exports=r},{"../data/extent":53,"../geo/coordinate":61,"../gl/depth_mode":67,"../gl/stencil_mode":70,"./texture":93,"@mapbox/gl-matrix":2}],82:[function(e,t,n){"use strict";function r(e,t,n,r,a,s,u,l,c){var f,p,h,d,v=t.context,m=v.gl,y=a.paint.get("line-dasharray"),g=a.paint.get("line-pattern");if(l||c){var _=1/o(n,1,t.transform.tileZoom);if(y){f=t.lineAtlas.getDash(y.from,"round"===a.layout.get("line-cap")),p=t.lineAtlas.getDash(y.to,"round"===a.layout.get("line-cap"));var b=f.width*y.fromScale,x=p.width*y.toScale;m.uniform2f(e.uniforms.u_patternscale_a,_/b,-f.height/2),m.uniform2f(e.uniforms.u_patternscale_b,_/x,-p.height/2),m.uniform1f(e.uniforms.u_sdfgamma,t.lineAtlas.width/(256*Math.min(b,x)*i.devicePixelRatio)/2)}else if(g){if(h=t.imageManager.getPattern(g.from),d=t.imageManager.getPattern(g.to),!h||!d)return;m.uniform2f(e.uniforms.u_pattern_size_a,h.displaySize[0]*g.fromScale/_,d.displaySize[1]),m.uniform2f(e.uniforms.u_pattern_size_b,d.displaySize[0]*g.toScale/_,d.displaySize[1]);var w=t.imageManager.getPixelSize(),E=w.width,S=w.height;m.uniform2fv(e.uniforms.u_texsize,[E,S])}m.uniform2f(e.uniforms.u_gl_units_to_pixels,1/t.transform.pixelsToGLUnits[0],1/t.transform.pixelsToGLUnits[1])}l&&(y?(m.uniform1i(e.uniforms.u_image,0),v.activeTexture.set(m.TEXTURE0),t.lineAtlas.bind(v),m.uniform1f(e.uniforms.u_tex_y_a,f.y),m.uniform1f(e.uniforms.u_tex_y_b,p.y),m.uniform1f(e.uniforms.u_mix,y.t)):g&&(m.uniform1i(e.uniforms.u_image,0),v.activeTexture.set(m.TEXTURE0),t.imageManager.bind(v),m.uniform2fv(e.uniforms.u_pattern_tl_a,h.tl),m.uniform2fv(e.uniforms.u_pattern_br_a,h.br),m.uniform2fv(e.uniforms.u_pattern_tl_b,d.tl),m.uniform2fv(e.uniforms.u_pattern_br_b,d.br),m.uniform1f(e.uniforms.u_fade,g.t))),v.setStencilMode(t.stencilModeForClipping(s));var T=t.translatePosMatrix(s.posMatrix,n,a.paint.get("line-translate"),a.paint.get("line-translate-anchor"));m.uniformMatrix4fv(e.uniforms.u_matrix,!1,T),m.uniform1f(e.uniforms.u_ratio,1/o(n,1,t.transform.zoom)),e.draw(v,m.TRIANGLES,a.id,r.layoutVertexBuffer,r.indexBuffer,r.segments,u)}var i=e("../util/browser"),o=e("../source/pixels_to_tile_units"),a=e("../gl/depth_mode");t.exports=function(e,t,n,i){if("translucent"===e.renderPass&&0!==n.paint.get("line-opacity").constantOr(1)){var o=e.context;o.setDepthMode(e.depthModeForSublayer(0,a.ReadOnly)),o.setColorMode(e.colorModeForRenderPass());for(var s,u=n.paint.get("line-dasharray")?"lineSDF":n.paint.get("line-pattern")?"linePattern":"line",l=!0,c=0,f=i;c<f.length;c+=1){var p=f[c],h=t.getTile(p),d=h.getBucket(n);if(d){var v=d.programConfigurations.get(n.id),m=e.context.program.get(),y=e.useProgram(u,v),g=l||y.program!==m,_=s!==h.tileID.overscaledZ;g&&v.setUniforms(e.context,y,n.paint,{zoom:e.transform.zoom}),r(y,e,h,d,n,p,v,g,_),s=h.tileID.overscaledZ,l=!1}}}}},{"../gl/depth_mode":67,"../source/pixels_to_tile_units":104,"../util/browser":252}],83:[function(e,t,n){"use strict";function r(e,t,n,r){if("translucent"===e.renderPass&&0!==n.paint.get("raster-opacity")){var u=e.context,c=u.gl,h=t.getSource(),d=e.useProgram("raster");u.setStencilMode(f.disabled),u.setColorMode(e.colorModeForRenderPass()),c.uniform1f(d.uniforms.u_brightness_low,n.paint.get("raster-brightness-min")),c.uniform1f(d.uniforms.u_brightness_high,n.paint.get("raster-brightness-max")),c.uniform1f(d.uniforms.u_saturation_factor,a(n.paint.get("raster-saturation"))),c.uniform1f(d.uniforms.u_contrast_factor,o(n.paint.get("raster-contrast"))),c.uniform3fv(d.uniforms.u_spin_weights,i(n.paint.get("raster-hue-rotate"))),c.uniform1f(d.uniforms.u_buffer_scale,1),c.uniform1i(d.uniforms.u_image0,0),c.uniform1i(d.uniforms.u_image1,1);for(var v=r.length&&r[0].overscaledZ,m=0,y=r;m<y.length;m+=1){var g=y[m];u.setDepthMode(e.depthModeForSublayer(g.overscaledZ-v,1===n.paint.get("raster-opacity")?p.ReadWrite:p.ReadOnly,c.LESS));var _=t.getTile(g),b=e.transform.calculatePosMatrix(g.toUnwrapped(),!0);_.registerFadeDuration(n.paint.get("raster-fade-duration")),c.uniformMatrix4fv(d.uniforms.u_matrix,!1,b);var x=t.findLoadedParent(g,0,{}),w=s(_,x,t,n,e.transform),E=void 0,S=void 0;if(u.activeTexture.set(c.TEXTURE0),_.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE,c.LINEAR_MIPMAP_NEAREST),u.activeTexture.set(c.TEXTURE1),x?(x.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE,c.LINEAR_MIPMAP_NEAREST),E=Math.pow(2,x.tileID.overscaledZ-_.tileID.overscaledZ),S=[_.tileID.canonical.x*E%1,_.tileID.canonical.y*E%1]):_.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE,c.LINEAR_MIPMAP_NEAREST),c.uniform2fv(d.uniforms.u_tl_parent,S||[0,0]),c.uniform1f(d.uniforms.u_scale_parent,E||1),c.uniform1f(d.uniforms.u_fade_t,w.mix),c.uniform1f(d.uniforms.u_opacity,w.opacity*n.paint.get("raster-opacity")),h instanceof l){var T=h.boundsBuffer;h.boundsVAO.bind(u,d,T,[]),c.drawArrays(c.TRIANGLE_STRIP,0,T.length)}else if(_.maskedBoundsBuffer&&_.maskedIndexBuffer&&_.segments)d.draw(u,c.TRIANGLES,n.id,_.maskedBoundsBuffer,_.maskedIndexBuffer,_.segments);else{var A=e.rasterBoundsBuffer,O=e.rasterBoundsVAO;O.bind(u,d,A,[]),c.drawArrays(c.TRIANGLE_STRIP,0,A.length)}}}}function i(e){e*=Math.PI/180;var t=Math.sin(e),n=Math.cos(e);return[(2*n+1)/3,(-Math.sqrt(3)*t-n+1)/3,(Math.sqrt(3)*t-n+1)/3]}function o(e){return e>0?1/(1-e):1+e}function a(e){return e>0?1-1/(1.001-e):-e}function s(e,t,n,r,i){var o=r.paint.get("raster-fade-duration");if(o>0){var a=c.now(),s=(a-e.timeAdded)/o,l=t?(a-t.timeAdded)/o:-1,f=n.getSource(),p=i.coveringZoomLevel({tileSize:f.tileSize,roundZoom:f.roundZoom}),h=!t||Math.abs(t.tileID.overscaledZ-p)>Math.abs(e.tileID.overscaledZ-p),d=h&&e.refreshedUponExpiration?1:u.clamp(h?s:1-l,0,1);return e.refreshedUponExpiration&&s>=1&&(e.refreshedUponExpiration=!1),t?{opacity:1,mix:1-d}:{opacity:d,mix:0}}return{opacity:1,mix:0}}var u=e("../util/util"),l=e("../source/image_source"),c=e("../util/browser"),f=e("../gl/stencil_mode"),p=e("../gl/depth_mode");t.exports=r},{"../gl/depth_mode":67,"../gl/stencil_mode":70,"../source/image_source":102,"../util/browser":252,"../util/util":275}],84:[function(e,t,n){"use strict";function r(e,t,n,r){if("translucent"===e.renderPass){var o=e.context;o.setStencilMode(v.disabled),o.setColorMode(e.colorModeForRenderPass()),0!==n.paint.get("icon-opacity").constantOr(1)&&i(e,t,n,r,!1,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),n.layout.get("icon-rotation-alignment"),n.layout.get("icon-pitch-alignment"),n.layout.get("icon-keep-upright")),0!==n.paint.get("text-opacity").constantOr(1)&&i(e,t,n,r,!0,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),n.layout.get("text-keep-upright")),t.map.showCollisionBoxes&&u(e,t,n,r)}}function i(e,t,n,r,i,s,u,f,p,d){var v=e.context,y=v.gl,g=e.transform,_="map"===f,b="map"===p,x=_&&"line"===n.layout.get("symbol-placement"),w=_&&!b&&!x,E=b;v.setDepthMode(E?e.depthModeForSublayer(0,m.ReadOnly):m.disabled);for(var S,T=0,A=r;T<A.length;T+=1){var O=A[T],P=t.getTile(O),C=P.getBucket(n);if(C){var k=i?C.text:C.icon;if(k&&k.segments.get().length){var R=k.programConfigurations.get(n.id),M=i||C.sdfIcons,I=i?C.textSizeData:C.iconSizeData;if(S||(S=e.useProgram(M?"symbolSDF":"symbolIcon",R),R.setUniforms(e.context,S,n.paint,{zoom:e.transform.zoom}),o(S,e,n,i,w,b,I)),v.activeTexture.set(y.TEXTURE0),y.uniform1i(S.uniforms.u_texture,0),i)P.glyphAtlasTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE),y.uniform2fv(S.uniforms.u_texsize,P.glyphAtlasTexture.size);else{var L=1!==n.layout.get("icon-size").constantOr(0)||C.iconsNeedLinear,D=b||0!==g.pitch;P.iconAtlasTexture.bind(M||e.options.rotating||e.options.zooming||L||D?y.LINEAR:y.NEAREST,y.CLAMP_TO_EDGE),y.uniform2fv(S.uniforms.u_texsize,P.iconAtlasTexture.size)}y.uniformMatrix4fv(S.uniforms.u_matrix,!1,e.translatePosMatrix(O.posMatrix,P,s,u));var N=l(P,1,e.transform.zoom),F=c.getLabelPlaneMatrix(O.posMatrix,b,_,e.transform,N),j=c.getGlCoordMatrix(O.posMatrix,b,_,e.transform,N);y.uniformMatrix4fv(S.uniforms.u_gl_coord_matrix,!1,e.translatePosMatrix(j,P,s,u,!0)),x?(y.uniformMatrix4fv(S.uniforms.u_label_plane_matrix,!1,h),c.updateLineLabels(C,O.posMatrix,e,i,F,j,b,d)):y.uniformMatrix4fv(S.uniforms.u_label_plane_matrix,!1,F),y.uniform1f(S.uniforms.u_fade_change,e.options.fadeDuration?e.symbolFadeChange:1),a(S,R,e,n,P,k,i,M,b)}}}}function o(e,t,n,r,i,o,a){var s=t.context.gl,u=t.transform;s.uniform1i(e.uniforms.u_pitch_with_map,o?1:0),s.uniform1f(e.uniforms.u_is_text,r?1:0),s.uniform1f(e.uniforms.u_pitch,u.pitch/360*2*Math.PI);var l="constant"===a.functionType||"source"===a.functionType,c="constant"===a.functionType||"camera"===a.functionType;s.uniform1i(e.uniforms.u_is_size_zoom_constant,l?1:0),s.uniform1i(e.uniforms.u_is_size_feature_constant,c?1:0),s.uniform1f(e.uniforms.u_camera_to_center_distance,u.cameraToCenterDistance);var p=f.evaluateSizeForZoom(a,u.zoom,d.properties[r?"text-size":"icon-size"]);void 0!==p.uSizeT&&s.uniform1f(e.uniforms.u_size_t,p.uSizeT),void 0!==p.uSize&&s.uniform1f(e.uniforms.u_size,p.uSize),s.uniform1f(e.uniforms.u_aspect_ratio,u.width/u.height),s.uniform1i(e.uniforms.u_rotate_symbol,i?1:0)}function a(e,t,n,r,i,o,a,u,l){var c=n.context,f=c.gl,p=n.transform;if(u){var h=0!==r.paint.get(a?"text-halo-width":"icon-halo-width").constantOr(1),d=l?Math.cos(p._pitch)*p.cameraToCenterDistance:1;f.uniform1f(e.uniforms.u_gamma_scale,d),h&&(f.uniform1f(e.uniforms.u_is_halo,1),s(o,r,c,e)),f.uniform1f(e.uniforms.u_is_halo,0)}s(o,r,c,e)}function s(e,t,n,r){r.draw(n,n.gl.TRIANGLES,t.id,e.layoutVertexBuffer,e.indexBuffer,e.segments,e.programConfigurations.get(t.id),e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer)}var u=e("./draw_collision_debug"),l=e("../source/pixels_to_tile_units"),c=e("../symbol/projection"),f=e("../symbol/symbol_size"),p=e("@mapbox/gl-matrix").mat4,h=p.identity(new Float32Array(16)),d=e("../style/style_layer/symbol_style_layer_properties").layout,v=e("../gl/stencil_mode"),m=e("../gl/depth_mode");t.exports=r},{"../gl/depth_mode":67,"../gl/stencil_mode":70,"../source/pixels_to_tile_units":104,"../style/style_layer/symbol_style_layer_properties":209,"../symbol/projection":224,"../symbol/symbol_size":228,"./draw_collision_debug":76,"@mapbox/gl-matrix":2}],85:[function(e,t,n){"use strict";function r(e){var t=new a({width:0,height:0}),n={},r=new i(0,0,{autoResize:!0});for(var o in e){var u=e[o],l=n[o]={};for(var c in u){var f=u[+c];if(f&&0!==f.bitmap.width&&0!==f.bitmap.height){var p=r.packOne(f.bitmap.width+2*s,f.bitmap.height+2*s);t.resize({width:r.w,height:r.h}),a.copy(f.bitmap,t,{x:0,y:0},{x:p.x+s,y:p.y+s},f.bitmap),l[c]={rect:p,metrics:f.metrics}}}}return r.shrink(),t.resize({width:r.w,height:r.h}),{image:t,positions:n}}var i=e("@mapbox/shelf-pack"),o=e("../util/image"),a=o.AlphaImage,s=1;t.exports={makeGlyphAtlas:r}},{"../util/image":263,"@mapbox/shelf-pack":5}],86:[function(e,t,n){"use strict";var r=e("../style/load_glyph_range"),i=e("@mapbox/tiny-sdf"),o=e("../util/is_char_in_unicode_block"),a=e("../util/util"),s=a.asyncAll,u=e("../util/image"),l=u.AlphaImage,c=function(e,t){this.requestTransform=e,this.localIdeographFontFamily=t,this.entries={}};c.prototype.setURL=function(e){this.url=e},c.prototype.getGlyphs=function(e,t){var n=this,i=[];for(var o in e)for(var a=0,u=e[o];a<u.length;a+=1){var l=u[a];i.push({stack:o,id:l})}s(i,function(e,t){var i=e.stack,o=e.id,a=n.entries[i];a||(a=n.entries[i]={glyphs:{},requests:{}});var s=a.glyphs[o];if(void 0!==s)return void t(null,{stack:i,id:o,glyph:s});if(s=n._tinySDF(a,i,o))return void t(null,{stack:i,id:o,glyph:s});var u=Math.floor(o/256);if(256*u>65535)return void t(new Error("glyphs > 65535 not supported"));var l=a.requests[u];l||(l=a.requests[u]=[],r(i,u,n.url,n.requestTransform,function(e,t){if(t)for(var n in t)a.glyphs[+n]=t[+n];for(var r=0,i=l;r<i.length;r+=1)(0,i[r])(e,t);delete a.requests[u]})),l.push(function(e,n){e?t(e):n&&t(null,{stack:i,id:o,glyph:n[o]||null})})},function(e,n){if(e)t(e);else if(n){for(var r={},i=0,o=n;i<o.length;i+=1){var a=o[i],s=a.stack,u=a.id,l=a.glyph;(r[s]||(r[s]={}))[u]=l&&{id:l.id,bitmap:l.bitmap.clone(),metrics:l.metrics}}t(null,r)}})},c.prototype._tinySDF=function(e,t,n){var r=this.localIdeographFontFamily;if(r&&(o["CJK Unified Ideographs"](n)||o["Hangul Syllables"](n))){var a=e.tinySDF;if(!a){var s="400";/bold/i.test(t)?s="900":/medium/i.test(t)?s="500":/light/i.test(t)&&(s="200"),a=e.tinySDF=new i(24,3,8,.25,r,s)}return{id:n,bitmap:new l({width:30,height:30},a.draw(String.fromCharCode(n))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},t.exports=c},{"../style/load_glyph_range":184,"../util/image":263,"../util/is_char_in_unicode_block":265,"../util/util":275,"@mapbox/tiny-sdf":6}],87:[function(e,t,n){"use strict";function r(e,t){var n=t.pixelRatio,r={x:e.x+u,y:e.y+u,w:e.w-2*u,h:e.h-2*u};return{pixelRatio:n,textureRect:r,tl:[r.x,r.y],br:[r.x+r.w,r.y+r.h],displaySize:[r.w/n,r.h/n]}}function i(e){var t=new s({width:0,height:0}),n={},i=new o(0,0,{autoResize:!0});for(var a in e){var l=e[a],c=i.packOne(l.data.width+2*u,l.data.height+2*u);t.resize({width:i.w,height:i.h}),s.copy(l.data,t,{x:0,y:0},{x:c.x+u,y:c.y+u},l.data),n[a]=r(c,l)}return i.shrink(),t.resize({width:i.w,height:i.h}),{image:t,positions:n}}var o=e("@mapbox/shelf-pack"),a=e("../util/image"),s=a.RGBAImage,u=1;t.exports={imagePosition:r,makeImageAtlas:i}},{"../util/image":263,"@mapbox/shelf-pack":5}],88:[function(e,t,n){"use strict";var r=e("@mapbox/shelf-pack"),i=e("../util/image"),o=i.RGBAImage,a=e("./image_atlas"),s=a.imagePosition,u=e("./texture"),l=function(){this.images={},this.loaded=!1,this.requestors=[],this.shelfPack=new r(64,64,{autoResize:!0}),this.patterns={},this.atlasImage=new o({width:64,height:64}),this.dirty=!0};l.prototype.isLoaded=function(){return this.loaded},l.prototype.setLoaded=function(e){var t=this;if(this.loaded!==e&&(this.loaded=e,e)){for(var n=0,r=t.requestors;n<r.length;n+=1){var i=r[n],o=i.ids,a=i.callback;t._notify(o,a)}this.requestors=[]}},l.prototype.getImage=function(e){return this.images[e]},l.prototype.addImage=function(e,t){this.images[e]=t},l.prototype.removeImage=function(e){delete this.images[e];var t=this.patterns[e];t&&(this.shelfPack.unref(t.bin),delete this.patterns[e])},l.prototype.getImages=function(e,t){var n=this,r=!0;if(!this.isLoaded())for(var i=0,o=e;i<o.length;i+=1){var a=o[i];n.images[a]||(r=!1)}this.isLoaded()||r?this._notify(e,t):this.requestors.push({ids:e,callback:t})},l.prototype._notify=function(e,t){for(var n=this,r={},i=0,o=e;i<o.length;i+=1){var a=o[i],s=n.images[a];s&&(r[a]={data:s.data.clone(),pixelRatio:s.pixelRatio,sdf:s.sdf})}t(null,r)},l.prototype.getPixelSize=function(){return{width:this.shelfPack.w,height:this.shelfPack.h}},l.prototype.getPattern=function(e){var t=this.patterns[e];if(t)return t.position;var n=this.getImage(e);if(!n)return null;var r=n.data.width+2,i=n.data.height+2,a=this.shelfPack.packOne(r,i);if(!a)return null;this.atlasImage.resize(this.getPixelSize());var u=n.data,l=this.atlasImage,c=a.x+1,f=a.y+1,p=u.width,h=u.height;o.copy(u,l,{x:0,y:0},{x:c,y:f},{width:p,height:h}),o.copy(u,l,{x:0,y:h-1},{x:c,y:f-1},{width:p,height:1}),o.copy(u,l,{x:0,y:0},{x:c,y:f+h},{width:p,height:1}),o.copy(u,l,{x:p-1,y:0},{x:c-1,y:f},{width:1,height:h}),o.copy(u,l,{x:0,y:0},{x:c+p,y:f},{width:1,height:h}),this.dirty=!0;var d=s(a,n);return this.patterns[e]={bin:a,position:d},d},l.prototype.bind=function(e){var t=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new u(e,this.atlasImage,t.RGBA),this.atlasTexture.bind(t.LINEAR,t.CLAMP_TO_EDGE)},t.exports=l},{"../util/image":263,"./image_atlas":87,"./texture":93,"@mapbox/shelf-pack":5}],89:[function(e,t,n){"use strict";var r=e("../util/util"),i=function(e,t){this.width=e,this.height=t,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}};i.prototype.getDash=function(e,t){var n=e.join(",")+String(t);return this.positions[n]||(this.positions[n]=this.addDash(e,t)),this.positions[n]},i.prototype.addDash=function(e,t){var n=this,i=t?7:0,o=2*i+1;if(this.nextRow+o>this.height)return r.warnOnce("LineAtlas out of space"),null;for(var a=0,s=0;s<e.length;s++)a+=e[s];for(var u=this.width/a,l=u/2,c=e.length%2==1,f=-i;f<=i;f++)for(var p=n.nextRow+i+f,h=n.width*p,d=c?-e[e.length-1]:0,v=e[0],m=1,y=0;y<this.width;y++){for(;v<y/u;)d=v,v+=e[m],c&&m===e.length-1&&(v+=e[0]),m++;var g=Math.abs(y-d*u),_=Math.abs(y-v*u),b=Math.min(g,_),x=m%2==1,w=void 0;if(t){var E=i?f/i*(l+1):0;if(x){var S=l-Math.abs(E);w=Math.sqrt(b*b+S*S)}else w=l-Math.sqrt(b*b+E*E)}else w=(x?1:-1)*b;n.data[3+4*(h+y)]=Math.max(0,Math.min(255,w+128))}var T={y:(this.nextRow+i+.5)/this.height,height:2*i/this.height,width:a};return this.nextRow+=o,this.dirty=!0,T},i.prototype.bind=function(e){var t=e.gl;this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.RGBA,t.UNSIGNED_BYTE,this.data))):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width,this.height,0,t.RGBA,t.UNSIGNED_BYTE,this.data))},t.exports=i},{"../util/util":275}],90:[function(e,t,n){"use strict";var r=e("../util/browser"),i=e("@mapbox/gl-matrix").mat4,o=e("../source/source_cache"),a=e("../data/extent"),s=e("../source/pixels_to_tile_units"),u=e("../util/util"),l=e("./vertex_array_object"),c=e("../data/array_types"),f=c.RasterBoundsArray,p=c.PosArray,h=e("../data/raster_bounds_attributes"),d=e("../data/pos_attributes"),v=e("../data/program_configuration"),m=v.ProgramConfiguration,y=e("../symbol/cross_tile_symbol_index"),g=e("../shaders"),_=e("./program"),b=e("../gl/context"),x=e("../gl/depth_mode"),w=e("../gl/stencil_mode"),E=e("../gl/color_mode"),S=(e("./texture"),e("./tile_mask")),T=e("../style-spec/util/color"),A={symbol:e("./draw_symbol"),circle:e("./draw_circle"),heatmap:e("./draw_heatmap"),line:e("./draw_line"),fill:e("./draw_fill"),"fill-extrusion":e("./draw_fill_extrusion"),hillshade:e("./draw_hillshade"),raster:e("./draw_raster"),background:e("./draw_background"),debug:e("./draw_debug")},O=function(e,t){this.context=new b(e),this.transform=t,this._tileTextures={},this.setup(),this.numSublayers=o.maxUnderzooming+o.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.depthRboNeedsClear=!0,this.emptyProgramConfiguration=new m,this.crossTileSymbolIndex=new y};O.prototype.resize=function(e,t){var n=this,i=this.context.gl;if(this.width=e*r.devicePixelRatio,this.height=t*r.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var o=0,a=n.style._order;o<a.length;o+=1){var s=a[o];n.style._layers[s].resize()}this.depthRbo&&(i.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)},O.prototype.setup=function(){var e=this.context,t=new p;t.emplaceBack(0,0),t.emplaceBack(a,0),t.emplaceBack(0,a),t.emplaceBack(a,a),this.tileExtentBuffer=e.createVertexBuffer(t,d.members),this.tileExtentVAO=new l,this.tileExtentPatternVAO=new l;var n=new p;n.emplaceBack(0,0),n.emplaceBack(a,0),n.emplaceBack(a,a),n.emplaceBack(0,a),n.emplaceBack(0,0),this.debugBuffer=e.createVertexBuffer(n,d.members),this.debugVAO=new l;var r=new f;r.emplaceBack(0,0,0,0),r.emplaceBack(a,0,a,0),r.emplaceBack(0,a,0,a),r.emplaceBack(a,a,a,a),this.rasterBoundsBuffer=e.createVertexBuffer(r,h.members),this.rasterBoundsVAO=new l;var i=new p;i.emplaceBack(0,0),i.emplaceBack(1,0),i.emplaceBack(0,1),i.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(i,d.members),this.viewportVAO=new l},O.prototype.clearStencil=function(){var e=this.context,t=e.gl;e.setColorMode(E.disabled),e.setDepthMode(x.disabled),e.setStencilMode(new w({func:t.ALWAYS,mask:0},0,255,t.ZERO,t.ZERO,t.ZERO));var n=i.create();i.ortho(n,0,this.width,this.height,0,0,1),i.scale(n,n,[t.drawingBufferWidth,t.drawingBufferHeight,0]);var r=this.useProgram("clippingMask");t.uniformMatrix4fv(r.uniforms.u_matrix,!1,n),this.viewportVAO.bind(e,r,this.viewportBuffer,[]),t.drawArrays(t.TRIANGLE_STRIP,0,4)},O.prototype._renderTileClippingMasks=function(e){var t=this,n=this.context,r=n.gl;n.setColorMode(E.disabled),n.setDepthMode(x.disabled);var i=1;this._tileClippingMaskIDs={};for(var o=0,a=e;o<a.length;o+=1){var s=a[o],u=t._tileClippingMaskIDs[s.key]=i++;n.setStencilMode(new w({func:r.ALWAYS,mask:0},u,255,r.KEEP,r.KEEP,r.REPLACE));var l=t.useProgram("clippingMask");r.uniformMatrix4fv(l.uniforms.u_matrix,!1,s.posMatrix),t.tileExtentVAO.bind(t.context,l,t.tileExtentBuffer,[]),r.drawArrays(r.TRIANGLE_STRIP,0,t.tileExtentBuffer.length)}},O.prototype.stencilModeForClipping=function(e){var t=this.context.gl;return new w({func:t.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,t.KEEP,t.KEEP,t.REPLACE)},O.prototype.colorModeForRenderPass=function(){var e=this.context.gl;return this._showOverdrawInspector?new E([e.CONSTANT_COLOR,e.ONE],new T(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?E.unblended:E.alphaBlended},O.prototype.depthModeForSublayer=function(e,t,n){var r=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon,i=r-1+this.depthRange;return new x(n||this.context.gl.LEQUAL,t,[i,r])},O.prototype.render=function(e,t){var n=this;this.style=e,this.options=t,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(r.now());for(var i in e.sourceCaches){var o=n.style.sourceCaches[i];o.used&&o.prepare(n.context)}var a=this.style._order,s=u.filterObject(this.style.sourceCaches,function(e){return"raster"===e.getSource().type||"raster-dem"===e.getSource().type});for(var l in s)!function(e){var t=s[e],r=t.getVisibleCoordinates(),i=r.map(function(e){return t.getTile(e)});S(i,n.context)}(l);this.renderPass="offscreen";var c,f=[];this.depthRboNeedsClear=!0;for(var p=0;p<a.length;p++){var h=n.style._layers[a[p]];h.hasOffscreenPass()&&!h.isHidden(n.transform.zoom)&&(h.source!==(c&&c.id)&&(c=n.style.sourceCaches[h.source],f=[],c&&(f=c.getVisibleCoordinates(),f.reverse())),f.length&&n.renderLayer(n,c,h,f))}this.context.bindFramebuffer.set(null),this.context.clear({color:t.showOverdrawInspector?T.black:T.transparent,depth:1}),this._showOverdrawInspector=t.showOverdrawInspector,this.depthRange=(e._order.length+2)*this.numSublayers*this.depthEpsilon,this.renderPass="opaque";var d,v=[];for(this.currentLayer=a.length-1,this.currentLayer;this.currentLayer>=0;this.currentLayer--){var m=n.style._layers[a[n.currentLayer]];m.source!==(d&&d.id)&&(d=n.style.sourceCaches[m.source],v=[],d&&(n.clearStencil(),v=d.getVisibleCoordinates(),d.getSource().isTileClipped&&n._renderTileClippingMasks(v))),n.renderLayer(n,d,m,v)}this.renderPass="translucent";var y,g=[];for(this.currentLayer=0,this.currentLayer;this.currentLayer<a.length;this.currentLayer++){var _=n.style._layers[a[n.currentLayer]];_.source!==(y&&y.id)&&(y=n.style.sourceCaches[_.source],g=[],y&&(n.clearStencil(),g=y.getVisibleCoordinates(),y.getSource().isTileClipped&&n._renderTileClippingMasks(g)),g.reverse()),n.renderLayer(n,y,_,g)}if(this.options.showTileBoundaries){var b=this.style.sourceCaches[Object.keys(this.style.sourceCaches)[0]];b&&A.debug(this,b,b.getVisibleCoordinates())}},O.prototype.setupOffscreenDepthRenderbuffer=function(){var e=this.context;this.depthRbo||(this.depthRbo=e.createRenderbuffer(e.gl.DEPTH_COMPONENT16,this.width,this.height))},O.prototype.renderLayer=function(e,t,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||r.length)&&(this.id=n.id,A[n.type](e,t,n,r))},O.prototype.translatePosMatrix=function(e,t,n,r,o){if(!n[0]&&!n[1])return e;var a=o?"map"===r?this.transform.angle:0:"viewport"===r?-this.transform.angle:0;if(a){var u=Math.sin(a),l=Math.cos(a);n=[n[0]*l-n[1]*u,n[0]*u+n[1]*l]}var c=[o?n[0]:s(t,n[0],this.transform.zoom),o?n[1]:s(t,n[1],this.transform.zoom),0],f=new Float32Array(16);return i.translate(f,e,c),f},O.prototype.saveTileTexture=function(e){var t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]},O.prototype.getTileTexture=function(e){var t=this._tileTextures[e];return t&&t.length>0?t.pop():null},O.prototype._createProgramCached=function(e,t){this.cache=this.cache||{};var n=""+e+(t.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[n]||(this.cache[n]=new _(this.context,g[e],t,this._showOverdrawInspector)),this.cache[n]},O.prototype.useProgram=function(e,t){var n=this._createProgramCached(e,t||this.emptyProgramConfiguration);return this.context.program.set(n.program),n},t.exports=O},{"../data/array_types":39,"../data/extent":53,"../data/pos_attributes":57,"../data/program_configuration":58,"../data/raster_bounds_attributes":59,"../gl/color_mode":65,"../gl/context":66,"../gl/depth_mode":67,"../gl/stencil_mode":70,"../shaders":97,"../source/pixels_to_tile_units":104,"../source/source_cache":111,"../style-spec/util/color":153,"../symbol/cross_tile_symbol_index":218,"../util/browser":252,"../util/util":275,"./draw_background":74,"./draw_circle":75,"./draw_debug":77,"./draw_fill":78,"./draw_fill_extrusion":79,"./draw_heatmap":80,"./draw_hillshade":81,"./draw_line":82,"./draw_raster":83,"./draw_symbol":84,"./program":92,"./texture":93,"./tile_mask":94,"./vertex_array_object":95,"@mapbox/gl-matrix":2}],91:[function(e,t,n){"use strict";var r=e("../source/pixels_to_tile_units");n.isPatternMissing=function(e,t){if(!e)return!1;var n=t.imageManager.getPattern(e.from),r=t.imageManager.getPattern(e.to);return!n||!r},n.prepare=function(e,t,n){var r=t.context,i=r.gl,o=t.imageManager.getPattern(e.from),a=t.imageManager.getPattern(e.to);i.uniform1i(n.uniforms.u_image,0),i.uniform2fv(n.uniforms.u_pattern_tl_a,o.tl),i.uniform2fv(n.uniforms.u_pattern_br_a,o.br),i.uniform2fv(n.uniforms.u_pattern_tl_b,a.tl),i.uniform2fv(n.uniforms.u_pattern_br_b,a.br);var s=t.imageManager.getPixelSize(),u=s.width,l=s.height;i.uniform2fv(n.uniforms.u_texsize,[u,l]),i.uniform1f(n.uniforms.u_mix,e.t),i.uniform2fv(n.uniforms.u_pattern_size_a,o.displaySize),i.uniform2fv(n.uniforms.u_pattern_size_b,a.displaySize),i.uniform1f(n.uniforms.u_scale_a,e.fromScale),i.uniform1f(n.uniforms.u_scale_b,e.toScale),r.activeTexture.set(i.TEXTURE0),t.imageManager.bind(t.context)},n.setTile=function(e,t,n){var i=t.context.gl;i.uniform1f(n.uniforms.u_tile_units_to_pixels,1/r(e,1,t.transform.tileZoom));var o=Math.pow(2,e.tileID.overscaledZ),a=e.tileSize*Math.pow(2,t.transform.tileZoom)/o,s=a*(e.tileID.canonical.x+e.tileID.wrap*o),u=a*e.tileID.canonical.y;i.uniform2f(n.uniforms.u_pixel_coord_upper,s>>16,u>>16),i.uniform2f(n.uniforms.u_pixel_coord_lower,65535&s,65535&u)}},{"../source/pixels_to_tile_units":104}],92:[function(e,t,n){"use strict";var r=e("../util/browser"),i=e("../shaders"),o=e("../data/program_configuration"),a=(o.ProgramConfiguration,e("./vertex_array_object")),s=(e("../gl/context"),function(e,t,n,o){var a=this,s=e.gl;this.program=s.createProgram();var u=n.defines().concat("#define DEVICE_PIXEL_RATIO "+r.devicePixelRatio.toFixed(1));o&&u.push("#define OVERDRAW_INSPECTOR;");var l=u.concat(i.prelude.fragmentSource,t.fragmentSource).join("\n"),c=u.concat(i.prelude.vertexSource,t.vertexSource).join("\n"),f=s.createShader(s.FRAGMENT_SHADER);s.shaderSource(f,l),s.compileShader(f),s.attachShader(this.program,f);var p=s.createShader(s.VERTEX_SHADER);s.shaderSource(p,c),s.compileShader(p),s.attachShader(this.program,p);for(var h=n.layoutAttributes||[],d=0;d<h.length;d++)s.bindAttribLocation(a.program,d,h[d].name);s.linkProgram(this.program),this.numAttributes=s.getProgramParameter(this.program,s.ACTIVE_ATTRIBUTES),this.attributes={},this.uniforms={};for(var v=0;v<this.numAttributes;v++){var m=s.getActiveAttrib(a.program,v);m&&(a.attributes[m.name]=s.getAttribLocation(a.program,m.name))}for(var y=s.getProgramParameter(this.program,s.ACTIVE_UNIFORMS),g=0;g<y;g++){var _=s.getActiveUniform(a.program,g);_&&(a.uniforms[_.name]=s.getUniformLocation(a.program,_.name))}});s.prototype.draw=function(e,t,n,r,i,o,s,u,l){for(var c,f=this,p=e.gl,h=(c={},c[p.LINES]=2,c[p.TRIANGLES]=3,c)[t],d=0,v=o.get();d<v.length;d+=1){var m=v[d],y=m.vaos||(m.vaos={});(y[n]||(y[n]=new a)).bind(e,f,r,s?s.getPaintVertexBuffers():[],i,m.vertexOffset,u,l),p.drawElements(t,m.primitiveLength*h,p.UNSIGNED_SHORT,m.primitiveOffset*h*2)}},t.exports=s},{"../data/program_configuration":58,"../gl/context":66,"../shaders":97,"../util/browser":252,"./vertex_array_object":95}],93:[function(e,t,n){"use strict";var r=e("../util/window"),i=r.HTMLImageElement,o=r.HTMLCanvasElement,a=r.HTMLVideoElement,s=r.ImageData,u=function(e,t,n,r){this.context=e;var i=t.width,o=t.height;this.size=[i,o],this.format=n,this.texture=e.gl.createTexture(),this.update(t,r)};u.prototype.update=function(e,t){var n=e.width,r=e.height;this.size=[n,r];var u=this,l=u.context,c=l.gl;c.bindTexture(c.TEXTURE_2D,this.texture),l.pixelStoreUnpack.set(1),this.format===c.RGBA&&!1!==t&&l.pixelStoreUnpackPremultiplyAlpha.set(!0),e instanceof i||e instanceof o||e instanceof a||e instanceof s?c.texImage2D(c.TEXTURE_2D,0,this.format,this.format,c.UNSIGNED_BYTE,e):c.texImage2D(c.TEXTURE_2D,0,this.format,n,r,0,this.format,c.UNSIGNED_BYTE,e.data)},u.prototype.bind=function(e,t,n){var r=this,i=r.context,o=i.gl;o.bindTexture(o.TEXTURE_2D,this.texture),e!==this.filter&&(o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,e),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,n||e),this.filter=e),t!==this.wrap&&(o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,t),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,t),this.wrap=t)},u.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null},t.exports=u},{"../util/window":254}],94:[function(e,t,n){"use strict";function r(e,t,n,i,o){for(var s=0;s<n.length;s++){var u=n[s];if(i.isLessThan(u.tileID))break;if(t.key===u.tileID.key)return;if(u.tileID.isChildOf(t)){for(var l=t.children(1/0),c=0;c<l.length;c++)r(e,l[c],n.slice(s),i,o);return}}var f=t.overscaledZ-e.overscaledZ,p=new a(f,t.canonical.x-(e.canonical.x<<f),t.canonical.y-(e.canonical.y<<f));o[p.key]=o[p.key]||p}var i=e("../source/tile_id"),o=i.OverscaledTileID,a=i.CanonicalTileID;t.exports=function(e,t){for(var n=e.sort(function(e,t){return e.tileID.isLessThan(t.tileID)?-1:t.tileID.isLessThan(e.tileID)?1:0}),i=0;i<n.length;i++){var a={},s=n[i],u=n.slice(i+1);r(s.tileID.wrapped(),s.tileID,u,new o(0,s.tileID.wrap+1,0,0,0),a),s.setMask(a,t)}}},{"../source/tile_id":114}],95:[function(e,t,n){"use strict";var r=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};r.prototype.bind=function(e,t,n,r,i,o,a,s){var u=this;this.context=e;for(var l=this.boundPaintVertexBuffers.length!==r.length,c=0;!l&&c<r.length;c++)u.boundPaintVertexBuffers[c]!==r[c]&&(l=!0);var f=!this.vao||this.boundProgram!==t||this.boundLayoutVertexBuffer!==n||l||this.boundIndexBuffer!==i||this.boundVertexOffset!==o||this.boundDynamicVertexBuffer!==a||this.boundDynamicVertexBuffer2!==s;!e.extVertexArrayObject||f?this.freshBind(t,n,r,i,o,a,s):(e.bindVertexArrayOES.set(this.vao),a&&a.bind(),i&&i.dynamicDraw&&i.bind(),s&&s.bind())},r.prototype.freshBind=function(e,t,n,r,i,o,a){var s,u=e.numAttributes,l=this.context,c=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{s=l.currentNumAttributes||0;for(var f=u;f<s;f++)c.disableVertexAttribArray(f)}t.enableAttributes(c,e);for(var p=0,h=n;p<h.length;p+=1)h[p].enableAttributes(c,e);o&&o.enableAttributes(c,e),a&&a.enableAttributes(c,e),t.bind(),t.setVertexAttribPointers(c,e,i);for(var d=0,v=n;d<v.length;d+=1){var m=v[d];m.bind(),m.setVertexAttribPointers(c,e,i)}o&&(o.bind(),o.setVertexAttribPointers(c,e,i)),r&&r.bind(),a&&(a.bind(),a.setVertexAttribPointers(c,e,i)),l.currentNumAttributes=u},r.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)},t.exports=r},{}],96:[function(e,t,n){"use strict";var r=e("../util/util");n.packUint8ToFloat=function(e,t){return e=r.clamp(Math.floor(e),0,255),t=r.clamp(Math.floor(t),0,255),256*e+t}},{"../util/util":275}],97:[function(e,t,n){"use strict";var r={prelude:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n\n// Unpack a pair of values that have been packed into a single float.\n// The packed values are assumed to be 8-bit unsigned integers, and are\n// packed like so:\n// packedValue = floor(input[0]) * 256 + input[1],\nvec2 unpack_float(const float packedValue) {\n    int packedIntValue = int(packedValue);\n    int v0 = packedIntValue / 256;\n    return vec2(v0, packedIntValue - v0 * 256);\n}\n\nvec2 unpack_opacity(const float packedOpacity) {\n    int intOpacity = int(packedOpacity) / 2;\n    return vec2(float(intOpacity) / 127.0, mod(packedOpacity, 2.0));\n}\n\n// To minimize the number of attributes needed, we encode a 4-component\n// color into a pair of floats (i.e. a vec2) as follows:\n// [ floor(color.r * 255) * 256 + color.g * 255,\n//   floor(color.b * 255) * 256 + color.g * 255 ]\nvec4 decode_color(const vec2 encodedColor) {\n    return vec4(\n        unpack_float(encodedColor[0]) / 255.0,\n        unpack_float(encodedColor[1]) / 255.0\n    );\n}\n\n// Unpack a pair of paint values and interpolate between them.\nfloat unpack_mix_vec2(const vec2 packedValue, const float t) {\n    return mix(packedValue[0], packedValue[1], t);\n}\n\n// Unpack a pair of paint values and interpolate between them.\nvec4 unpack_mix_vec4(const vec4 packedColors, const float t) {\n    vec4 minColor = decode_color(vec2(packedColors[0], packedColors[1]));\n    vec4 maxColor = decode_color(vec2(packedColors[2], packedColors[3]));\n    return mix(minColor, maxColor, t);\n}\n\n// The offset depends on how many pixels are between the world origin and the edge of the tile:\n// vec2 offset = mod(pixel_coord, size)\n//\n// At high zoom levels there are a ton of pixels between the world origin and the edge of the tile.\n// The glsl spec only guarantees 16 bits of precision for highp floats. We need more than that.\n//\n// The pixel_coord is passed in as two 16 bit values:\n// pixel_coord_upper = floor(pixel_coord / 2^16)\n// pixel_coord_lower = mod(pixel_coord, 2^16)\n//\n// The offset is calculated in a series of steps that should preserve this precision:\nvec2 get_pattern_pos(const vec2 pixel_coord_upper, const vec2 pixel_coord_lower,\n    const vec2 pattern_size, const float tile_units_to_pixels, const vec2 pos) {\n\n    vec2 offset = mod(mod(mod(pixel_coord_upper, pattern_size) * 256.0, pattern_size) * 256.0 + pixel_coord_lower, pattern_size);\n    return (tile_units_to_pixels * pos + offset) / pattern_size;\n}\n"},background:{fragmentSource:"uniform vec4 u_color;\nuniform float u_opacity;\n\nvoid main() {\n    gl_FragColor = u_color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},backgroundPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\nuniform float u_opacity;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},circle:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    vec2 extrude = v_data.xy;\n    float extrude_length = length(extrude);\n\n    lowp float antialiasblur = v_data.z;\n    float antialiased_blur = -max(blur, antialiasblur);\n\n    float opacity_t = smoothstep(0.0, antialiased_blur, extrude_length - 1.0);\n\n    float color_t = stroke_width < 0.01 ? 0.0 : smoothstep(\n        antialiased_blur,\n        0.0,\n        extrude_length - radius / (radius + stroke_width)\n    );\n\n    gl_FragColor = opacity_t * mix(color * opacity, stroke_color * stroke_opacity, color_t);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform bool u_scale_with_map;\nuniform bool u_pitch_with_map;\nuniform vec2 u_extrude_scale;\nuniform highp float u_camera_to_center_distance;\n\nattribute vec2 a_pos;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main(void) {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec2 circle_center = floor(a_pos * 0.5);\n    if (u_pitch_with_map) {\n        vec2 corner_position = circle_center;\n        if (u_scale_with_map) {\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale;\n        } else {\n            // Pitching the circle with the map effectively scales it with the map\n            // To counteract the effect for pitch-scale: viewport, we rescale the\n            // whole circle based on the pitch scaling effect at its central point\n            vec4 projected_center = u_matrix * vec4(circle_center, 0, 1);\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale * (projected_center.w / u_camera_to_center_distance);\n        }\n\n        gl_Position = u_matrix * vec4(corner_position, 0, 1);\n    } else {\n        gl_Position = u_matrix * vec4(circle_center, 0, 1);\n\n        if (u_scale_with_map) {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * u_camera_to_center_distance;\n        } else {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * gl_Position.w;\n        }\n    }\n\n    // This is a minimum blur distance that serves as a faux-antialiasing for\n    // the circle. since blur is a ratio of the circle's size and the intent is\n    // to keep the blur at roughly 1px, the two are inversely related.\n    lowp float antialiasblur = 1.0 / DEVICE_PIXEL_RATIO / (radius + stroke_width);\n\n    v_data = vec3(extrude.x, extrude.y, antialiasblur);\n}\n"},clippingMask:{fragmentSource:"void main() {\n    gl_FragColor = vec4(1.0);\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},heatmap:{fragmentSource:"#pragma mapbox: define highp float weight\n\nuniform highp float u_intensity;\nvarying vec2 v_extrude;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main() {\n    #pragma mapbox: initialize highp float weight\n\n    // Kernel density estimation with a Gaussian kernel of size 5x5\n    float d = -0.5 * 3.0 * 3.0 * dot(v_extrude, v_extrude);\n    float val = weight * u_intensity * GAUSS_COEF * exp(d);\n\n    gl_FragColor = vec4(val, 1.0, 1.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\n\nuniform mat4 u_matrix;\nuniform float u_extrude_scale;\nuniform float u_opacity;\nuniform float u_intensity;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_extrude;\n\n// Effective \"0\" in the kernel density texture to adjust the kernel size to;\n// this empirically chosen number minimizes artifacts on overlapping kernels\n// for typical heatmap cases (assuming clustered source)\nconst highp float ZERO = 1.0 / 255.0 / 16.0;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main(void) {\n    #pragma mapbox: initialize highp float weight\n    #pragma mapbox: initialize mediump float radius\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 unscaled_extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // This 'extrude' comes in ranging from [-1, -1], to [1, 1].  We'll use\n    // it to produce the vertices of a square mesh framing the point feature\n    // we're adding to the kernel density texture.  We'll also pass it as\n    // a varying, so that the fragment shader can determine the distance of\n    // each fragment from the point feature.\n    // Before we do so, we need to scale it up sufficiently so that the\n    // kernel falls effectively to zero at the edge of the mesh.\n    // That is, we want to know S such that\n    // weight * u_intensity * GAUSS_COEF * exp(-0.5 * 3.0^2 * S^2) == ZERO\n    // Which solves to:\n    // S = sqrt(-2.0 * log(ZERO / (weight * u_intensity * GAUSS_COEF))) / 3.0\n    float S = sqrt(-2.0 * log(ZERO / weight / u_intensity / GAUSS_COEF)) / 3.0;\n\n    // Pass the varying in units of radius\n    v_extrude = S * unscaled_extrude;\n\n    // Scale by radius and the zoom-based scale factor to produce actual\n    // mesh position\n    vec2 extrude = v_extrude * radius * u_extrude_scale;\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec4 pos = vec4(floor(a_pos * 0.5) + extrude, 0, 1);\n\n    gl_Position = u_matrix * pos;\n}\n"},heatmapTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform sampler2D u_color_ramp;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    float t = texture2D(u_image, v_pos).r;\n    vec4 color = texture2D(u_color_ramp, vec2(t, 0.5));\n    gl_FragColor = color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"},collisionBox:{fragmentSource:"\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n\n    float alpha = 0.5;\n\n    // Red = collision, hide label\n    gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue = no collision, label is showing\n    if (v_placed > 0.5) {\n        gl_FragColor = vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed > 0.5) {\n        // This box not used, fade it out\n        gl_FragColor *= .1;\n    }\n}",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = 0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance);\n\n    gl_Position = u_matrix * vec4(a_pos, 0.0, 1.0);\n    gl_Position.xy += a_extrude * u_extrude_scale * gl_Position.w * collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n}\n"},collisionCircle:{fragmentSource:"\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    float alpha = 0.5;\n\n    // Red = collision, hide label\n    vec4 color = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue = no collision, label is showing\n    if (v_placed > 0.5) {\n        color = vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed > 0.5) {\n        // This box not used, fade it out\n        color *= .2;\n    }\n\n    float extrude_scale_length = length(v_extrude_scale);\n    float extrude_length = length(v_extrude) * extrude_scale_length;\n    float stroke_width = 15.0 * extrude_scale_length;\n    float radius = v_radius * extrude_scale_length;\n\n    float distance_to_edge = abs(extrude_length - radius);\n    float opacity_t = smoothstep(-stroke_width, 0.0, -distance_to_edge);\n\n    gl_FragColor = opacity_t * color;\n}\n",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\n\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = 0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance);\n\n    gl_Position = u_matrix * vec4(a_pos, 0.0, 1.0);\n\n    highp float padding_factor = 1.2; // Pad the vertices slightly to make room for anti-alias blur\n    gl_Position.xy += a_extrude * u_extrude_scale * padding_factor * gl_Position.w * collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n    v_radius = abs(a_extrude.y); // We don't pitch the circles, so both units of the extrusion vector are equal in magnitude to the radius\n\n    v_extrude = a_extrude * padding_factor;\n    v_extrude_scale = u_extrude_scale * u_camera_to_center_distance * collision_perspective_ratio;\n}\n"},debug:{fragmentSource:"uniform highp vec4 u_color;\n\nvoid main() {\n    gl_FragColor = u_color;\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fill:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_FragColor = color * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fillOutline:{fragmentSource:"#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_pos;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n    gl_FragColor = outline_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos;\n\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillOutlinePattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    // find distance to outline for alpha interpolation\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n\n\n    gl_FragColor = mix(color1, color2, u_mix) * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},fillExtrusion:{fragmentSource:"varying vec4 v_color;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    gl_FragColor = v_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec4 a_normal_ed;\n\nvarying vec4 v_color;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    vec3 normal = a_normal_ed.xyz;\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(normal.x, 2.0);\n\n    gl_Position = u_matrix * vec4(a_pos, t > 0.0 ? height : base, 1);\n\n    // Relative luminance (how dark/bright is the surface color?)\n    float colorvalue = color.r * 0.2126 + color.g * 0.7152 + color.b * 0.0722;\n\n    v_color = vec4(0.0, 0.0, 0.0, 1.0);\n\n    // Add slight ambient lighting so no extrusions are totally black\n    vec4 ambientlight = vec4(0.03, 0.03, 0.03, 1.0);\n    color += ambientlight;\n\n    // Calculate cos(theta), where theta is the angle between surface normal and diffuse light ray\n    float directional = clamp(dot(normal / 16384.0, u_lightpos), 0.0, 1.0);\n\n    // Adjust directional so that\n    // the range of values for highlight/shading is narrower\n    // with lower light intensity\n    // and with lighter/brighter surface colors\n    directional = mix((1.0 - u_lightintensity), max((1.0 - colorvalue + u_lightintensity), 1.0), directional);\n\n    // Add gradient along z axis of side surfaces\n    if (normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    // Assign final color based on surface + ambient light color, diffuse light directional, and light color\n    // with lower bounds adjusted to hue of light\n    // so that shading is tinted with the complementary (opposite) color to the light color\n    v_color.r += clamp(color.r * directional * u_lightcolor.r, mix(0.0, 0.3, 1.0 - u_lightcolor.r), 1.0);\n    v_color.g += clamp(color.g * directional * u_lightcolor.g, mix(0.0, 0.3, 1.0 - u_lightcolor.g), 1.0);\n    v_color.b += clamp(color.b * directional * u_lightcolor.b, mix(0.0, 0.3, 1.0 - u_lightcolor.b), 1.0);\n}\n"},fillExtrusionPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    vec4 mixedColor = mix(color1, color2, u_mix);\n\n    gl_FragColor = mixedColor * v_lighting;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\nuniform float u_height_factor;\n\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec4 a_normal_ed;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\nvarying float v_directional;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    vec3 normal = a_normal_ed.xyz;\n    float edgedistance = a_normal_ed.w;\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(normal.x, 2.0);\n    float z = t > 0.0 ? height : base;\n\n    gl_Position = u_matrix * vec4(a_pos, z, 1);\n\n    vec2 pos = normal.x == 1.0 && normal.y == 0.0 && normal.z == 16384.0\n        ? a_pos // extrusion top\n        : vec2(edgedistance, z * u_height_factor); // extrusion side\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, pos);\n\n    v_lighting = vec4(0.0, 0.0, 0.0, 1.0);\n    float directional = clamp(dot(normal / 16383.0, u_lightpos), 0.0, 1.0);\n    directional = mix((1.0 - u_lightintensity), max((0.5 + u_lightintensity), 1.0), directional);\n\n    if (normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    v_lighting.rgb += clamp(directional * u_lightcolor, mix(vec3(0.0), vec3(0.3), 1.0 - u_lightcolor), vec3(1.0));\n}\n"},extrusionTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_FragColor = texture2D(u_image, v_pos) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"},hillshadePrepare:{fragmentSource:"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D u_image;\nvarying vec2 v_pos;\nuniform vec2 u_dimension;\nuniform float u_zoom;\n\nfloat getElevation(vec2 coord, float bias) {\n    // Convert encoded elevation value to meters\n    vec4 data = texture2D(u_image, coord) * 255.0;\n    return (data.r + data.g * 256.0 + data.b * 256.0 * 256.0) / 4.0;\n}\n\nvoid main() {\n    vec2 epsilon = 1.0 / u_dimension;\n\n    // queried pixels:\n    // +-----------+\n    // |   |   |   |\n    // | a | b | c |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | d | e | f |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | g | h | i |\n    // |   |   |   |\n    // +-----------+\n\n    float a = getElevation(v_pos + vec2(-epsilon.x, -epsilon.y), 0.0);\n    float b = getElevation(v_pos + vec2(0, -epsilon.y), 0.0);\n    float c = getElevation(v_pos + vec2(epsilon.x, -epsilon.y), 0.0);\n    float d = getElevation(v_pos + vec2(-epsilon.x, 0), 0.0);\n    float e = getElevation(v_pos, 0.0);\n    float f = getElevation(v_pos + vec2(epsilon.x, 0), 0.0);\n    float g = getElevation(v_pos + vec2(-epsilon.x, epsilon.y), 0.0);\n    float h = getElevation(v_pos + vec2(0, epsilon.y), 0.0);\n    float i = getElevation(v_pos + vec2(epsilon.x, epsilon.y), 0.0);\n\n    // here we divide the x and y slopes by 8 * pixel size\n    // where pixel size (aka meters/pixel) is:\n    // circumference of the world / (pixels per tile * number of tiles)\n    // which is equivalent to: 8 * 40075016.6855785 / (512 * pow(2, u_zoom))\n    // which can be reduced to: pow(2, 19.25619978527 - u_zoom)\n    // we want to vertically exaggerate the hillshading though, because otherwise\n    // it is barely noticeable at low zooms. to do this, we multiply this by some\n    // scale factor pow(2, (u_zoom - 14) * a) where a is an arbitrary value and 14 is the\n    // maxzoom of the tile source. here we use a=0.3 which works out to the\n    // expression below. see nickidlugash's awesome breakdown for more info\n    // https://github.com/mapbox/mapbox-gl-js/pull/5286#discussion_r148419556\n    float exaggeration = u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;\n\n    vec2 deriv = vec2(\n        (c + f + f + i) - (a + d + d + g),\n        (g + h + h + i) - (a + b + b + c)\n    ) /  pow(2.0, (u_zoom - 14.0) * exaggeration + 19.2562 - u_zoom);\n\n    gl_FragColor = clamp(vec4(\n        deriv.x / 2.0 + 0.5,\n        deriv.y / 2.0 + 0.5,\n        1.0,\n        1.0), 0.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (a_texture_pos / 8192.0) / 2.0 + 0.25;\n}\n"},hillshade:{fragmentSource:"uniform sampler2D u_image;\nvarying vec2 v_pos;\n\nuniform vec2 u_latrange;\nuniform vec2 u_light;\nuniform vec4 u_shadow;\nuniform vec4 u_highlight;\nuniform vec4 u_accent;\n\n#define PI 3.141592653589793\n\nvoid main() {\n    vec4 pixel = texture2D(u_image, v_pos);\n\n    vec2 deriv = ((pixel.rg * 2.0) - 1.0);\n\n    // We divide the slope by a scale factor based on the cosin of the pixel's approximate latitude\n    // to account for mercator projection distortion. see #4807 for details\n    float scaleFactor = cos(radians((u_latrange[0] - u_latrange[1]) * (1.0 - v_pos.y) + u_latrange[1]));\n    // We also multiply the slope by an arbitrary z-factor of 1.25\n    float slope = atan(1.25 * length(deriv) / scaleFactor);\n    float aspect = deriv.x != 0.0 ? atan(deriv.y, -deriv.x) : PI / 2.0 * (deriv.y > 0.0 ? 1.0 : -1.0);\n\n    float intensity = u_light.x;\n    // We add PI to make this property match the global light object, which adds PI/2 to the light's azimuthal\n    // position property to account for 0deg corresponding to north/the top of the viewport in the style spec\n    // and the original shader was written to accept (-illuminationDirection - 90) as the azimuthal.\n    float azimuth = u_light.y + PI;\n\n    // We scale the slope exponentially based on intensity, using a calculation similar to\n    // the exponential interpolation function in the style spec:\n    // https://github.com/mapbox/mapbox-gl-js/blob/master/src/style-spec/expression/definitions/interpolate.js#L217-L228\n    // so that higher intensity values create more opaque hillshading.\n    float base = 1.875 - intensity * 1.75;\n    float maxValue = 0.5 * PI;\n    float scaledSlope = intensity != 0.5 ? ((pow(base, slope) - 1.0) / (pow(base, maxValue) - 1.0)) * maxValue : slope;\n\n    // The accent color is calculated with the cosine of the slope while the shade color is calculated with the sine\n    // so that the accent color's rate of change eases in while the shade color's eases out.\n    float accent = cos(scaledSlope);\n    // We multiply both the accent and shade color by a clamped intensity value\n    // so that intensities >= 0.5 do not additionally affect the color values\n    // while intensity values < 0.5 make the overall color more transparent.\n    vec4 accent_color = (1.0 - accent) * u_accent * clamp(intensity * 2.0, 0.0, 1.0);\n    float shade = abs(mod((aspect + azimuth) / PI + 0.5, 2.0) - 1.0);\n    vec4 shade_color = mix(u_shadow, u_highlight, shade) * sin(scaledSlope) * clamp(intensity * 2.0, 0.0, 1.0);\n    gl_FragColor = accent_color * (1.0 - shade_color.a) + shade_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = a_texture_pos / 8192.0;\n}\n"},line:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 = vec2(outset, inset);\n}\n"},linePattern:{fragmentSource:"uniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_fade;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float x_a = mod(v_linesofar / u_pattern_size_a.x, 1.0);\n    float x_b = mod(v_linesofar / u_pattern_size_b.x, 1.0);\n    float y_a = 0.5 + (v_normal.y * v_width2.s / u_pattern_size_a.y);\n    float y_b = 0.5 + (v_normal.y * v_width2.s / u_pattern_size_b.y);\n    vec2 pos_a = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, vec2(x_a, y_a));\n    vec2 pos_b = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, vec2(x_b, y_b));\n\n    vec4 color = mix(texture2D(u_image, pos_a), texture2D(u_image, pos_b), u_fade);\n\n    gl_FragColor = color * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_linesofar = a_linesofar;\n    v_width2 = vec2(outset, inset);\n}\n"},lineSDF:{fragmentSource:"\nuniform sampler2D u_image;\nuniform float u_sdfgamma;\nuniform float u_mix;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float sdfdist_a = texture2D(u_image, v_tex_a).a;\n    float sdfdist_b = texture2D(u_image, v_tex_b).a;\n    float sdfdist = mix(sdfdist_a, sdfdist_b, u_mix);\n    alpha *= smoothstep(0.5 - u_sdfgamma / floorwidth, 0.5 + u_sdfgamma / floorwidth, sdfdist);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_patternscale_a;\nuniform float u_tex_y_a;\nuniform vec2 u_patternscale_b;\nuniform float u_tex_y_b;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist =outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_tex_a = vec2(a_linesofar * u_patternscale_a.x / floorwidth, normal.y * u_patternscale_a.y + u_tex_y_a);\n    v_tex_b = vec2(a_linesofar * u_patternscale_b.x / floorwidth, normal.y * u_patternscale_b.y + u_tex_y_b);\n\n    v_width2 = vec2(outset, inset);\n}\n"},raster:{fragmentSource:"uniform float u_fade_t;\nuniform float u_opacity;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nuniform float u_brightness_low;\nuniform float u_brightness_high;\n\nuniform float u_saturation_factor;\nuniform float u_contrast_factor;\nuniform vec3 u_spin_weights;\n\nvoid main() {\n\n    // read and cross-fade colors from the main and parent tiles\n    vec4 color0 = texture2D(u_image0, v_pos0);\n    vec4 color1 = texture2D(u_image1, v_pos1);\n    if (color0.a > 0.0) {\n        color0.rgb = color0.rgb / color0.a;\n    }\n    if (color1.a > 0.0) {\n        color1.rgb = color1.rgb / color1.a;\n    }\n    vec4 color = mix(color0, color1, u_fade_t);\n    color.a *= u_opacity;\n    vec3 rgb = color.rgb;\n\n    // spin\n    rgb = vec3(\n        dot(rgb, u_spin_weights.xyz),\n        dot(rgb, u_spin_weights.zxy),\n        dot(rgb, u_spin_weights.yzx));\n\n    // saturation\n    float average = (color.r + color.g + color.b) / 3.0;\n    rgb += (average - rgb) * u_saturation_factor;\n\n    // contrast\n    rgb = (rgb - 0.5) * u_contrast_factor + 0.5;\n\n    // brightness\n    vec3 u_high_vec = vec3(u_brightness_low, u_brightness_low, u_brightness_low);\n    vec3 u_low_vec = vec3(u_brightness_high, u_brightness_high, u_brightness_high);\n\n    gl_FragColor = vec4(mix(u_high_vec, u_low_vec, rgb) * color.a, color.a);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_tl_parent;\nuniform float u_scale_parent;\nuniform float u_buffer_scale;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    // We are using Int16 for texture position coordinates to give us enough precision for\n    // fractional coordinates. We use 8192 to scale the texture coordinates in the buffer\n    // as an arbitrarily high number to preserve adequate precision when rendering.\n    // This is also the same value as the EXTENT we are using for our tile buffer pos coordinates,\n    // so math for modifying either is consistent.\n    v_pos0 = (((a_texture_pos / 8192.0) - 0.5) / u_buffer_scale ) + 0.5;\n    v_pos1 = (v_pos0 * u_scale_parent) + u_tl_parent;\n}\n"},symbolIcon:{fragmentSource:"uniform sampler2D u_texture;\n\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    lowp float alpha = opacity * v_fade_opacity;\n    gl_FragColor = texture2D(u_texture, v_tex) * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\nuniform highp float u_camera_to_center_distance;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform float u_fade_change;\n\n#pragma mapbox: define lowp float opacity\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp float segment_angle = -a_projected_pos[2];\n\n    float size;\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 10.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // See comments in symbol_sdf.vertex\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = 0.5 + 0.5 * distance_ratio;\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // See comments in symbol_sdf.vertex\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 64.0 * fontScale), 0.0, 1.0);\n\n    v_tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    v_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n}\n"},symbolSDF:{fragmentSource:"#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105/DEVICE_PIXEL_RATIO\n\nuniform bool u_is_halo;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform sampler2D u_texture;\nuniform highp float u_gamma_scale;\nuniform bool u_is_text;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 tex = v_data0.xy;\n    float gamma_scale = v_data1.x;\n    float size = v_data1.y;\n    float fade_opacity = v_data1[2];\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    lowp vec4 color = fill_color;\n    highp float gamma = EDGE_GAMMA / (fontScale * u_gamma_scale);\n    lowp float buff = (256.0 - 64.0) / 256.0;\n    if (u_is_halo) {\n        color = halo_color;\n        gamma = (halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (fontScale * u_gamma_scale);\n        buff = (6.0 - halo_width / fontScale) / SDF_PX;\n    }\n\n    lowp float dist = texture2D(u_texture, tex).a;\n    highp float gamma_scaled = gamma * gamma_scale;\n    highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);\n\n    gl_FragColor = color * (alpha * opacity * fade_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\n// contents of a_size vary based on the type of property value\n// used for {text,icon}-size.\n// For constants, a_size is disabled.\n// For source functions, we bind only one value per vertex: the value of {text,icon}-size evaluated for the current feature.\n// For composite functions:\n// [ text-size(lowerZoomStop, feature),\n//   text-size(upperZoomStop, feature) ]\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\n\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform highp float u_camera_to_center_distance;\nuniform float u_fade_change;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp float segment_angle = -a_projected_pos[2];\n    float size;\n\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 10.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // If the label is pitched with the map, layout is done in pitched space,\n    // which makes labels in the distance smaller relative to viewport space.\n    // We counteract part of that effect by multiplying by the perspective ratio.\n    // If the label isn't pitched with the map, we do layout in viewport space,\n    // which makes labels in the distance larger relative to the features around\n    // them. We counteract part of that effect by dividing by the perspective ratio.\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = 0.5 + 0.5 * distance_ratio;\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // Point labels with 'rotation-alignment: map' are horizontal with respect to tile units\n        // To figure out that angle in projected space, we draw a short horizontal line in tile\n        // space, project it, and measure its angle in projected space.\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 64.0 * fontScale), 0.0, 1.0);\n    float gamma_scale = gl_Position.w;\n\n    vec2 tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    float interpolated_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n\n    v_data0 = vec2(tex.x, tex.y);\n    v_data1 = vec3(gamma_scale, size, interpolated_fade_opacity);\n}\n"}},i=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g;for(var o in r)!function(e){var t=r[e],n={};t.fragmentSource=t.fragmentSource.replace(i,function(e,t,r,i,o){return n[o]=!0,"define"===t?"\n#ifndef HAS_UNIFORM_u_"+o+"\nvarying "+r+" "+i+" "+o+";\n#else\nuniform "+r+" "+i+" u_"+o+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+o+"\n    "+r+" "+i+" "+o+" = u_"+o+";\n#endif\n"}),t.vertexSource=t.vertexSource.replace(i,function(e,t,r,i,o){var a="float"===i?"vec2":"vec4";return n[o]?"define"===t?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float a_"+o+"_t;\nattribute "+r+" "+a+" a_"+o+";\nvarying "+r+" "+i+" "+o+";\n#else\nuniform "+r+" "+i+" u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+o+" = unpack_mix_"+a+"(a_"+o+", a_"+o+"_t);\n#else\n    "+r+" "+i+" "+o+" = u_"+o+";\n#endif\n":"define"===t?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float a_"+o+"_t;\nattribute "+r+" "+a+" a_"+o+";\n#else\nuniform "+r+" "+i+" u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+r+" "+i+" "+o+" = unpack_mix_"+a+"(a_"+o+", a_"+o+"_t);\n#else\n    "+r+" "+i+" "+o+" = u_"+o+";\n#endif\n"})}(o);t.exports=r},{}],98:[function(e,t,n){"use strict";var r=e("./image_source"),i=e("../util/window"),o=e("../data/raster_bounds_attributes"),a=e("../render/vertex_array_object"),s=e("../render/texture"),u=function(e){function t(t,n,r,i){e.call(this,t,n,r,i),this.options=n,this.animate=void 0===n.animate||n.animate}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){if(this.canvas=this.canvas||i.document.getElementById(this.options.canvas),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions())return void this.fire("error",new Error("Canvas dimensions cannot be less than or equal to zero."));this.play=function(){this._playing=!0,this.map._rerender()},this.pause=function(){this._playing=!1},this._finishLoading()},t.prototype.getCanvas=function(){return this.canvas},t.prototype.onAdd=function(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()},t.prototype.onRemove=function(){this.pause()},t.prototype.prepare=function(){var e=this,t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var n=this.map.painter.context,r=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,o.members)),this.boundsVAO||(this.boundsVAO=new a),this.texture?t?this.texture.update(this.canvas):this._playing&&(this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE),r.texSubImage2D(r.TEXTURE_2D,0,0,0,r.RGBA,r.UNSIGNED_BYTE,this.canvas)):(this.texture=new s(n,this.canvas,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE));for(var i in e.tiles){var u=e.tiles[i];"loaded"!==u.state&&(u.state="loaded",u.texture=e.texture)}}},t.prototype.serialize=function(){return{type:"canvas",canvas:this.canvas,coordinates:this.coordinates}},t.prototype.hasTransition=function(){return this._playing},t.prototype._hasInvalidDimensions=function(){for(var e=this,t=0,n=[e.canvas.width,e.canvas.height];t<n.length;t+=1){var r=n[t];if(isNaN(r)||r<=0)return!0}return!1},t}(r);t.exports=u},{"../data/raster_bounds_attributes":59,"../render/texture":93,"../render/vertex_array_object":95,"../util/window":254,"./image_source":102}],99:[function(e,t,n){"use strict";function r(e){var t=a.document.createElement("a");return t.href=e,t.href}var i=e("../util/evented"),o=e("../util/util"),a=e("../util/window"),s=e("../data/extent"),u=e("../util/ajax").ResourceType,l=e("../util/browser"),c=function(e){function t(t,n,r,i){e.call(this),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this.dispatcher=r,this.setEventedParent(i),this._data=n.data,this._options=o.extend({},n),this._collectResourceTiming=n.collectResourceTiming,this._resourceTiming=[],void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type);var a=s/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*a,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*a,extent:s,maxZoom:this.maxzoom},superclusterOptions:{maxZoom:void 0!==n.clusterMaxZoom?Math.min(n.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:s,radius:(n.clusterRadius||50)*a,log:!1}},n.workerOptions)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){var e=this;this.fire("dataloading",{dataType:"source"}),this._updateWorkerData(function(t){if(t)return void e.fire("error",{error:t});var n={dataType:"source",sourceDataType:"metadata"};e._collectResourceTiming&&e._resourceTiming&&e._resourceTiming.length>0&&(n.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire("data",n)})},t.prototype.onAdd=function(e){this.map=e,this.load()},t.prototype.setData=function(e){var t=this;return this._data=e,this.fire("dataloading",{dataType:"source"}),this._updateWorkerData(function(e){if(e)return t.fire("error",{error:e});var n={dataType:"source",sourceDataType:"content"};t._collectResourceTiming&&t._resourceTiming&&t._resourceTiming.length>0&&(n.resourceTiming=t._resourceTiming,t._resourceTiming=[]),t.fire("data",n)}),this},t.prototype._updateWorkerData=function(e){var t=this,n=o.extend({},this.workerOptions),i=this._data;"string"==typeof i?(n.request=this.map._transformRequest(r(i),u.Source),n.request.collectResourceTiming=this._collectResourceTiming):n.data=JSON.stringify(i),this.workerID=this.dispatcher.send(this.type+".loadData",n,function(n,r){t._loaded=!0,r&&r.resourceTiming&&r.resourceTiming[t.id]&&(t._resourceTiming=r.resourceTiming[t.id].slice(0)),e(n)},this.workerID)},t.prototype.loadTile=function(e,t){var n=this,r=void 0===e.workerID||"expired"===e.state?"loadTile":"reloadTile",i={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:l.devicePixelRatio,overscaling:e.tileID.overscaleFactor(),showCollisionBoxes:this.map.showCollisionBoxes};e.workerID=this.dispatcher.send(r,i,function(i,o){return e.unloadVectorData(),e.aborted?t(null):i?t(i):(e.loadVectorData(o,n.map.painter,"reloadTile"===r),t(null))},this.workerID)},t.prototype.abortTile=function(e){e.aborted=!0},t.prototype.unloadTile=function(e){e.unloadVectorData(),this.dispatcher.send("removeTile",{uid:e.uid,type:this.type,source:this.id},null,e.workerID)},t.prototype.onRemove=function(){this.dispatcher.broadcast("removeSource",{type:this.type,source:this.id})},t.prototype.serialize=function(){return o.extend({},this._options,{type:this.type,data:this._data})},t.prototype.hasTransition=function(){return!1},t}(i);t.exports=c},{"../data/extent":53,"../util/ajax":251,"../util/browser":252,"../util/evented":260,"../util/util":275,"../util/window":254}],100:[function(e,t,n){"use strict";function r(e,t){var n=e.source,r=e.tileID.canonical;if(!this._geoJSONIndexes[n])return t(null,null);var i=this._geoJSONIndexes[n].getTile(r.z,r.x,r.y);if(!i)return t(null,null);var o=new s(i.features),a=u(o);0===a.byteOffset&&a.byteLength===a.buffer.byteLength||(a=new Uint8Array(a)),t(null,{vectorTile:o,rawData:a.buffer})}var i=e("../util/ajax"),o=e("../util/performance"),a=e("geojson-rewind"),s=e("./geojson_wrapper"),u=e("vt-pbf"),l=e("supercluster"),c=e("geojson-vt"),f=e("./vector_tile_worker_source"),p=function(e){function t(t,n,i){e.call(this,t,n,r),i&&(this.loadGeoJSON=i),this._geoJSONIndexes={}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.loadData=function(e,t){var n=this;this.loadGeoJSON(e,function(r,i){if(r||!i)return t(r);if("object"!=typeof i)return t(new Error("Input data is not a valid GeoJSON object."));a(i,!0);try{n._geoJSONIndexes[e.source]=e.cluster?l(e.superclusterOptions).load(i.features):c(i,e.geojsonVtOptions)}catch(r){return t(r)}n.loaded[e.source]={};var s={};if(e.request&&e.request.collectResourceTiming){var u=o.getEntriesByName(e.request.url);u&&(s.resourceTiming={},s.resourceTiming[e.source]=JSON.parse(JSON.stringify(u)))}t(null,s)})},t.prototype.reloadTile=function(t,n){var r=this.loaded[t.source],i=t.uid;return r&&r[i]?e.prototype.reloadTile.call(this,t,n):this.loadTile(t,n)},t.prototype.loadGeoJSON=function(e,t){if(e.request)i.getJSON(e.request,t);else{if("string"!=typeof e.data)return t(new Error("Input data is not a valid GeoJSON object."));try{return t(null,JSON.parse(e.data))}catch(e){return t(new Error("Input data is not a valid GeoJSON object."))}}},t.prototype.removeSource=function(e,t){this._geoJSONIndexes[e.source]&&delete this._geoJSONIndexes[e.source],t()},t}(f);t.exports=p},{"../util/ajax":251,"../util/performance":268,"./geojson_wrapper":101,"./vector_tile_worker_source":116,"geojson-rewind":15,"geojson-vt":19,supercluster:32,"vt-pbf":34}],101:[function(e,t,n){"use strict";var r=e("@mapbox/point-geometry"),i=e("@mapbox/vector-tile").VectorTileFeature.prototype.toGeoJSON,o=e("../data/extent"),a=function(e){this._feature=e,this.extent=o,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))};a.prototype.loadGeometry=function(){var e=this;if(1===this._feature.type){for(var t=[],n=0,i=e._feature.geometry;n<i.length;n+=1){var o=i[n];t.push([new r(o[0],o[1])])}return t}for(var a=[],s=0,u=e._feature.geometry;s<u.length;s+=1){for(var l=u[s],c=[],f=0,p=l;f<p.length;f+=1){var h=p[f];c.push(new r(h[0],h[1]))}a.push(c)}return a},a.prototype.toGeoJSON=function(e,t,n){return i.call(this,e,t,n)};var s=function(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o,this.length=e.length,this._features=e};s.prototype.feature=function(e){return new a(this._features[e])},t.exports=s},{"../data/extent":53,"@mapbox/point-geometry":4,"@mapbox/vector-tile":8}],102:[function(e,t,n){"use strict";var r=e("../util/util"),i=e("./tile_id"),o=i.CanonicalTileID,a=e("../geo/lng_lat"),s=e("@mapbox/point-geometry"),u=e("../util/evented"),l=e("../util/ajax"),c=e("../util/browser"),f=e("../data/extent"),p=e("../data/array_types"),h=p.RasterBoundsArray,d=e("../data/raster_bounds_attributes"),v=e("../render/vertex_array_object"),m=e("../render/texture"),y=function(e){function t(t,n,r,i){e.call(this),this.id=t,this.dispatcher=r,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this.setEventedParent(i),this.options=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){var e=this;this.fire("dataloading",{dataType:"source"}),this.url=this.options.url,l.getImage(this.map._transformRequest(this.url,l.ResourceType.Image),function(t,n){t?e.fire("error",{error:t}):n&&(e.image=c.getImageData(n),e._finishLoading())})},t.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire("data",{dataType:"source",sourceDataType:"metadata"}))},t.prototype.onAdd=function(e){this.map=e,this.load()},t.prototype.setCoordinates=function(e){this.coordinates=e;var t=this.map,n=e.map(function(e){return t.transform.locationCoordinate(a.convert(e)).zoomTo(0)}),i=this.centerCoord=r.getCoordinatesCenter(n);i.column=Math.floor(i.column),i.row=Math.floor(i.row),this.tileID=new o(i.zoom,i.column,i.row),this.minzoom=this.maxzoom=i.zoom;var u=n.map(function(e){var t=e.zoomTo(i.zoom);return new s(Math.round((t.column-i.column)*f),Math.round((t.row-i.row)*f))});return this._boundsArray=new h,this._boundsArray.emplaceBack(u[0].x,u[0].y,0,0),this._boundsArray.emplaceBack(u[1].x,u[1].y,f,0),this._boundsArray.emplaceBack(u[3].x,u[3].y,0,f),this._boundsArray.emplaceBack(u[2].x,u[2].y,f,f),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire("data",{dataType:"source",sourceDataType:"content"}),this},t.prototype.prepare=function(){var e=this;if(0!==Object.keys(this.tiles).length&&this.image){var t=this.map.painter.context,n=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,d.members)),this.boundsVAO||(this.boundsVAO=new v),this.texture||(this.texture=new m(t,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));for(var r in e.tiles){var i=e.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=e.texture)}}},t.prototype.loadTile=function(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},t(null)):(e.state="errored",t(null))},t.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},t.prototype.hasTransition=function(){return!1},t}(u);t.exports=y},{"../data/array_types":39,"../data/extent":53,"../data/raster_bounds_attributes":59,"../geo/lng_lat":62,"../render/texture":93,"../render/vertex_array_object":95,"../util/ajax":251,"../util/browser":252,"../util/evented":260,"../util/util":275,"./tile_id":114,"@mapbox/point-geometry":4}],103:[function(e,t,n){"use strict";var r=e("../util/util"),i=e("../util/ajax"),o=e("../util/browser"),a=e("../util/mapbox").normalizeSourceURL;t.exports=function(e,t,n){var s=function(e,t){if(e)return n(e);if(t){var i=r.pick(t,["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds"]);t.vector_layers&&(i.vectorLayers=t.vector_layers,i.vectorLayerIds=i.vectorLayers.map(function(e){return e.id})),n(null,i)}};e.url?i.getJSON(t(a(e.url),i.ResourceType.Source),s):o.frame(function(){return s(null,e)})}},{"../util/ajax":251,"../util/browser":252,"../util/mapbox":267,"../util/util":275}],104:[function(e,t,n){"use strict";var r=e("../data/extent");t.exports=function(e,t,n){return t*(r/(e.tileSize*Math.pow(2,n-e.tileID.overscaledZ)))}},{"../data/extent":53}],105:[function(e,t,n){"use strict";function r(e,t){var n=e.tileID,r=t.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}function i(e){for(var t={},n={},r=0,i=e;r<i.length;r+=1){var o=i[r],a=o.queryResults,s=o.wrappedTileID,u=n[s]=n[s]||{};for(var l in a)for(var c=a[l],f=u[l]=u[l]||{},p=t[l]=t[l]||[],h=0,d=c;h<d.length;h+=1){var v=d[h];f[v.featureIndex]||(f[v.featureIndex]=!0,p.push(v.feature))}}return t}n.rendered=function(e,t,n,o,a,s,u){var l=e.tilesIn(n);l.sort(r);for(var c=[],f=0,p=l;f<p.length;f+=1){var h=p[f];c.push({wrappedTileID:h.tileID.wrapped().key,queryResults:h.tile.queryRenderedFeatures(t,h.queryGeometry,h.scale,o,s,e.id,u)})}return i(c)},n.source=function(e,t){for(var n=e.getRenderableIds().map(function(t){return e.getTileByID(t)}),r=[],i={},o=0;o<n.length;o++){var a=n[o],s=a.tileID.canonical.key;i[s]||(i[s]=!0,a.querySourceFeatures(r,t))}return r}},{}],106:[function(e,t,n){"use strict";var r=e("../util/ajax"),i=e("../util/util"),o=(e("../util/evented"),e("../util/mapbox").normalizeTileURL),a=e("../util/browser"),s=e("./tile_id"),u=s.OverscaledTileID,l=e("./raster_tile_source"),c=function(e){function t(t,n,r,o){e.call(this,t,n,r,o),this.type="raster-dem",this.maxzoom=22,this._options=i.extend({},n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds}},t.prototype.loadTile=function(e,t){function n(n,r){if(delete e.request,e.aborted)e.state="unloaded",t(null);else if(n)e.state="errored",t(n);else if(r){this.map._refreshExpiredTiles&&e.setExpiryData(r),delete r.cacheControl,delete r.expires;var o=a.getImageData(r),s={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:o};e.workerID&&"expired"!==e.state||(e.workerID=this.dispatcher.send("loadDEMTile",s,i.bind(this)))}}function i(n,r){n&&(e.state="errored",t(n)),r&&(e.dem=r,e.needsHillshadePrepare=!0,e.state="loaded",t(null))}var s=o(e.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);e.request=r.getImage(this.map._transformRequest(s,r.ResourceType.Tile),n.bind(this)),e.neighboringTiles=this._getNeighboringTiles(e.tileID)},t.prototype._getNeighboringTiles=function(e){var t=e.canonical,n=Math.pow(2,t.z),r=(t.x-1+n)%n,i=0===t.x?e.wrap-1:e.wrap,o=(t.x+1+n)%n,a=t.x+1===n?e.wrap+1:e.wrap,s={};return s[new u(e.overscaledZ,i,t.z,r,t.y).key]={backfilled:!1},s[new u(e.overscaledZ,a,t.z,o,t.y).key]={backfilled:!1},t.y>0&&(s[new u(e.overscaledZ,i,t.z,r,t.y-1).key]={backfilled:!1},s[new u(e.overscaledZ,e.wrap,t.z,t.x,t.y-1).key]={backfilled:!1},s[new u(e.overscaledZ,a,t.z,o,t.y-1).key]={backfilled:!1}),t.y+1<n&&(s[new u(e.overscaledZ,i,t.z,r,t.y+1).key]={backfilled:!1},s[new u(e.overscaledZ,e.wrap,t.z,t.x,t.y+1).key]={backfilled:!1},s[new u(e.overscaledZ,a,t.z,o,t.y+1).key]={backfilled:!1}),s},t.prototype.unloadTile=function(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",this.dispatcher.send("removeDEMTile",{uid:e.uid,source:this.id},void 0,e.workerID)},t}(l);t.exports=c},{"../util/ajax":251,"../util/browser":252,"../util/evented":260,"../util/mapbox":267,"../util/util":275,"./raster_tile_source":108,"./tile_id":114}],107:[function(e,t,n){"use strict";var r=e("../data/dem_data"),i=r.DEMData,o=function(){this.loading={},this.loaded={}};o.prototype.loadTile=function(e,t){var n=e.source,r=e.uid;this.loading[n]||(this.loading[n]={});var o=new i(r);this.loading[n][r]=o,o.loadFromImage(e.rawImageData),delete this.loading[n][r],this.loaded[n]=this.loaded[n]||{},this.loaded[n][r]=o,t(null,o)},o.prototype.removeTile=function(e){var t=this.loaded[e.source],n=e.uid;t&&t[n]&&delete t[n]},t.exports=o},{"../data/dem_data":52}],108:[function(e,t,n){"use strict";var r=e("../util/util"),i=e("../util/ajax"),o=e("../util/evented"),a=e("./load_tilejson"),s=e("../util/mapbox").normalizeTileURL,u=e("./tile_bounds"),l=e("../render/texture"),c=function(e){function t(t,n,i,o){e.call(this),this.id=t,this.dispatcher=i,this.setEventedParent(o),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=r.extend({},n),r.extend(this,r.pick(n,["url","scheme","tileSize"]))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){var e=this;this.fire("dataloading",{dataType:"source"}),a(this._options,this.map._transformRequest,function(t,n){t?e.fire("error",t):n&&(r.extend(e,n),n.bounds&&(e.tileBounds=new u(n.bounds,e.minzoom,e.maxzoom)),e.fire("data",{dataType:"source",sourceDataType:"metadata"}),e.fire("data",{dataType:"source",sourceDataType:"content"}))})},t.prototype.onAdd=function(e){this.map=e,this.load()},t.prototype.serialize=function(){return r.extend({},this._options)},t.prototype.hasTile=function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)},t.prototype.loadTile=function(e,t){var n=this,r=s(e.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);e.request=i.getImage(this.map._transformRequest(r,i.ResourceType.Tile),function(r,i){if(delete e.request,e.aborted)e.state="unloaded",t(null);else if(r)e.state="errored",t(r);else if(i){n.map._refreshExpiredTiles&&e.setExpiryData(i),delete i.cacheControl,delete i.expires;var o=n.map.painter.context,a=o.gl;e.texture=n.map.painter.getTileTexture(i.width),e.texture?(e.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,i)):(e.texture=new l(o,i,a.RGBA),e.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),o.extTextureFilterAnisotropic&&a.texParameterf(a.TEXTURE_2D,o.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,o.extTextureFilterAnisotropicMax)),a.generateMipmap(a.TEXTURE_2D),e.state="loaded",t(null)}})},t.prototype.abortTile=function(e,t){e.request&&(e.request.abort(),delete e.request),t()},t.prototype.unloadTile=function(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()},t.prototype.hasTransition=function(){return!1},t}(o);t.exports=c},{"../render/texture":93,"../util/ajax":251,"../util/evented":260,"../util/mapbox":267,"../util/util":275,"./load_tilejson":103,"./tile_bounds":113}],109:[function(e,t,n){"use strict";var r=e("../util/ajax"),i=e("../util/evented"),o=e("../util/window"),a=!1,s=null;t.exports.evented=new i,t.exports.registerForPluginAvailability=function(e){return s?e({pluginBlobURL:s,errorCallback:t.exports.errorCallback}):t.exports.evented.once("pluginAvailable",e),e},t.exports.createBlobURL=function(e){return o.URL.createObjectURL(new o.Blob([e.data],{type:"text/javascript"}))},t.exports.clearRTLTextPlugin=function(){a=!1,s=null},t.exports.setRTLTextPlugin=function(e,n){if(a)throw new Error("setRTLTextPlugin cannot be called multiple times.");a=!0,t.exports.errorCallback=n,r.getArrayBuffer({url:e},function(e,r){e?n(e):r&&(s=t.exports.createBlobURL(r),t.exports.evented.fire("pluginAvailable",{pluginBlobURL:s,errorCallback:n}))})},t.exports.applyArabicShaping=null,t.exports.processBidirectionalText=null},{"../util/ajax":251,"../util/evented":260,"../util/window":254}],110:[function(e,t,n){"use strict";var r=e("../util/util"),i={vector:e("../source/vector_tile_source"),raster:e("../source/raster_tile_source"),"raster-dem":e("../source/raster_dem_tile_source"),geojson:e("../source/geojson_source"),video:e("../source/video_source"),image:e("../source/image_source"),canvas:e("../source/canvas_source")};n.create=function(e,t,n,o){var a=new i[t.type](e,t,n,o);if(a.id!==e)throw new Error("Expected Source id to be "+e+" instead of "+a.id);return r.bindAll(["load","abort","unload","serialize","prepare"],a),a},n.getType=function(e){return i[e]},n.setType=function(e,t){i[e]=t}},{"../source/canvas_source":98,"../source/geojson_source":99,"../source/image_source":102,"../source/raster_dem_tile_source":106,"../source/raster_tile_source":108,"../source/vector_tile_source":115,"../source/video_source":117,"../util/util":275}],111:[function(e,t,n){"use strict";function r(e,t){var n=t.zoomTo(e.canonical.z);return new p((n.column-(e.canonical.x+e.wrap*Math.pow(2,e.canonical.z)))*f,(n.row-e.canonical.y)*f)}function i(e){return"raster"===e||"image"===e||"video"===e}var o=e("./source").create,a=e("./tile"),s=e("../util/evented"),u=e("../util/lru_cache"),l=e("../geo/coordinate"),c=e("../util/util"),f=e("../data/extent"),p=(e("../gl/context"),e("@mapbox/point-geometry")),h=e("../util/browser"),d=e("./tile_id"),v=d.OverscaledTileID,m=function(e){function t(t,n,r){var i=this;e.call(this),this.id=t,this.dispatcher=r,this.on("data",function(e){"source"===e.dataType&&"metadata"===e.sourceDataType&&(i._sourceLoaded=!0),i._sourceLoaded&&!i._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(i.reload(),i.transform&&i.update(i.transform))}),this.on("error",function(){i._sourceErrored=!0}),this._source=o(t,n,r,this),this._tiles={},this._cache=new u(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._isIdRenderable=this._isIdRenderable.bind(this),this._coveredTiles={}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.onAdd=function(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(e)},t.prototype.onRemove=function(e){this._source&&this._source.onRemove&&this._source.onRemove(e)},t.prototype.loaded=function(){var e=this;if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var t in e._tiles){var n=e._tiles[t];if("loaded"!==n.state&&"errored"!==n.state)return!1}return!0},t.prototype.getSource=function(){return this._source},t.prototype.pause=function(){this._paused=!0},t.prototype.resume=function(){if(this._paused){var e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}},t.prototype._loadTile=function(e,t){return this._source.loadTile(e,t)},t.prototype._unloadTile=function(e){if(this._source.unloadTile)return this._source.unloadTile(e,function(){})},t.prototype._abortTile=function(e){if(this._source.abortTile)return this._source.abortTile(e,function(){})},t.prototype.serialize=function(){return this._source.serialize()},t.prototype.prepare=function(e){var t=this;this._source.prepare&&this._source.prepare();for(var n in t._tiles)t._tiles[n].upload(e)},t.prototype.getIds=function(){var e=this,t=function(t,n){var r=e._tiles[t].tileID,i=e._tiles[n].tileID,o=new p(r.canonical.x,r.canonical.y).rotate(e.transform.angle),a=new p(i.canonical.x,i.canonical.y).rotate(e.transform.angle);return r.overscaledZ-i.overscaledZ||a.y-o.y||a.x-o.x};return Object.keys(this._tiles).map(Number).sort(t)},t.prototype.getRenderableIds=function(){return this.getIds().filter(this._isIdRenderable)},t.prototype.hasRenderableParent=function(e){var t=this.findLoadedParent(e,0,{});return!!t&&this._isIdRenderable(t.tileID.key)},t.prototype._isIdRenderable=function(e){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]},t.prototype.reload=function(){var e=this;if(this._paused)return void(this._shouldReloadOnResume=!0);this._resetCache();for(var t in e._tiles)e._reloadTile(t,"reloading")},t.prototype._reloadTile=function(e,t){var n=this._tiles[e];n&&("loading"!==n.state&&(n.state=t),this._loadTile(n,this._tileLoaded.bind(this,n,e,t)))},t.prototype._tileLoaded=function(e,t,n,r){if(r)return e.state="errored",void(404!==r.status?this._source.fire("error",{tile:e,error:r}):this.update(this.transform));e.timeAdded=h.now(),"expired"===n&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(t,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._source.fire("data",{dataType:"source",tile:e,coord:e.tileID}),this.map&&(this.map.painter.tileExtentVAO.vao=null)},t.prototype._backfillDEM=function(e){function t(e,t){e.needsHillshadePrepare=!0;var n=t.tileID.canonical.x-e.tileID.canonical.x,r=t.tileID.canonical.y-e.tileID.canonical.y,i=Math.pow(2,e.tileID.canonical.z),o=t.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,n,r),e.neighboringTiles&&e.neighboringTiles[o]&&(e.neighboringTiles[o].backfilled=!0)))}for(var n=this,r=this.getRenderableIds(),i=0;i<r.length;i++){var o=r[i];if(e.neighboringTiles&&e.neighboringTiles[o]){var a=n.getTileByID(o);t(e,a),t(a,e)}}},t.prototype.getTile=function(e){return this.getTileByID(e.key)},t.prototype.getTileByID=function(e){return this._tiles[e]},t.prototype.getZoom=function(e){return e.zoom+e.scaleZoom(e.tileSize/this._source.tileSize)},t.prototype._findLoadedChildren=function(e,t,n){var r=this,i=!1;for(var o in r._tiles){var a=r._tiles[o];if(!(n[o]||!a.hasData()||a.tileID.overscaledZ<=e.overscaledZ||a.tileID.overscaledZ>t)){var s=Math.pow(2,a.tileID.canonical.z-e.canonical.z);if(Math.floor(a.tileID.canonical.x/s)===e.canonical.x&&Math.floor(a.tileID.canonical.y/s)===e.canonical.y)for(n[o]=a.tileID,i=!0;a&&a.tileID.overscaledZ-1>e.overscaledZ;){var u=a.tileID.scaledTo(a.tileID.overscaledZ-1);if(!u)break;(a=r._tiles[u.key])&&a.hasData()&&(delete n[o],n[u.key]=u)}}}return i},t.prototype.findLoadedParent=function(e,t,n){for(var r=this,i=e.overscaledZ-1;i>=t;i--){var o=e.scaledTo(i);if(!o)return;var a=String(o.key),s=r._tiles[a];if(s&&s.hasData())return n[a]=o,s;if(r._cache.has(a))return n[a]=o,r._cache.get(a)}},t.prototype.updateCacheSize=function(e){var t=Math.ceil(e.width/this._source.tileSize)+1,n=Math.ceil(e.height/this._source.tileSize)+1,r=t*n,i=Math.floor(5*r),o="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,i):i;this._cache.setMaxSize(o)},t.prototype.update=function(e){var n=this;if(this.transform=e,this._sourceLoaded&&!this._paused){this.updateCacheSize(e),this._coveredTiles={};var r;this.used?this._source.tileID?r=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(e){return new v(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)}):(r=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(r=r.filter(function(e){return n._source.hasTile(e)}))):r=[];var o=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(e)),a=Math.max(o-t.maxOverzooming,this._source.minzoom),s=Math.max(o+t.maxUnderzooming,this._source.minzoom),u=this._updateRetainedTiles(r,o),l={};if(i(this._source.type))for(var f=Object.keys(u),p=0;p<f.length;p++){var d=f[p],m=u[d],y=n._tiles[d];if(y&&(void 0===y.fadeEndTime||y.fadeEndTime>=h.now())){n._findLoadedChildren(m,s,u)&&(u[d]=m);var g=n.findLoadedParent(m,a,l);g&&n._addTile(g.tileID)}}var _;for(_ in l)u[_]||(n._coveredTiles[_]=!0);for(_ in l)u[_]=l[_];for(var b=c.keysDifference(this._tiles,u),x=0;x<b.length;x++)n._removeTile(b[x])}},t.prototype._updateRetainedTiles=function(e,n){for(var r=this,i={},o={},a=Math.max(n-t.maxOverzooming,this._source.minzoom),s=Math.max(n+t.maxUnderzooming,this._source.minzoom),u=0;u<e.length;u++){var l=e[u],c=r._addTile(l),f=!1;if(c.hasData())i[l.key]=l;else{f=c.wasRequested(),i[l.key]=l;var p=!0;if(n+1>r._source.maxzoom){var h=l.children(r._source.maxzoom)[0],d=r.getTile(h);d&&d.hasData()?i[h.key]=h:p=!1}else{r._findLoadedChildren(l,s,i);for(var v=l.children(r._source.maxzoom),m=0;m<v.length;m++)if(!i[v[m].key]){p=!1;break}}if(!p)for(var y=l.overscaledZ-1;y>=a;--y){var g=l.scaledTo(y);if(o[g.key])break;if(o[g.key]=!0,c=r.getTile(g),!c&&f&&(c=r._addTile(g)),c&&(i[g.key]=g,f=c.wasRequested(),c.hasData()))break}}}return i},t.prototype._addTile=function(e){var t=this._tiles[e.key];if(t)return t;(t=this._cache.getAndRemove(e.key))&&this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,t));var n=Boolean(t);return n||(t=new a(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(t,this._tileLoaded.bind(this,t,e.key,t.state))),t?(t.uses++,this._tiles[e.key]=t,n||this._source.fire("dataloading",{tile:t,coord:t.tileID,dataType:"source"}),t):null},t.prototype._setTileReloadTimer=function(e,t){var n=this;e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);var r=t.getExpiryTimeout();r&&(this._timers[e]=setTimeout(function(){n._reloadTile(e,"expired"),delete n._timers[e]},r))},t.prototype._setCacheInvalidationTimer=function(e,t){var n=this;e in this._cacheTimers&&(clearTimeout(this._cacheTimers[e]),delete this._cacheTimers[e]);var r=t.getExpiryTimeout();r&&(this._cacheTimers[e]=setTimeout(function(){n._cache.remove(e),delete n._cacheTimers[e]},r))},t.prototype._removeTile=function(e){var t=this._tiles[e];if(t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),!(t.uses>0)))if(t.hasData()){t.tileID=t.tileID.wrapped();var n=t.tileID.key;this._cache.add(n,t),this._setCacheInvalidationTimer(n,t)}else t.aborted=!0,this._abortTile(t),this._unloadTile(t)},t.prototype.clearTiles=function(){var e=this;this._shouldReloadOnResume=!1,this._paused=!1;for(var t in e._tiles)e._removeTile(t);this._resetCache()},t.prototype._resetCache=function(){var e=this;for(var t in e._cacheTimers)clearTimeout(e._cacheTimers[t]);this._cacheTimers={},this._cache.reset()},t.prototype.tilesIn=function(e){for(var t=this,n=[],i=this.getIds(),o=1/0,a=1/0,s=-1/0,u=-1/0,c=e[0].zoom,p=0;p<e.length;p++){var h=e[p];o=Math.min(o,h.column),a=Math.min(a,h.row),s=Math.max(s,h.column),u=Math.max(u,h.row)}for(var d=0;d<i.length;d++){var v=t._tiles[i[d]],m=v.tileID,y=[r(m,new l(o,a,c)),r(m,new l(s,u,c))];if(y[0].x<f&&y[0].y<f&&y[1].x>=0&&y[1].y>=0){for(var g=[],_=0;_<e.length;_++)g.push(r(m,e[_]));n.push({tile:v,tileID:m,queryGeometry:[g],scale:Math.pow(2,t.transform.zoom-v.tileID.overscaledZ)})}}return n},t.prototype.getVisibleCoordinates=function(){for(var e=this,t=this.getRenderableIds().map(function(t){return e._tiles[t].tileID}),n=0,r=t;n<r.length;n+=1){var i=r[n];i.posMatrix=e.transform.calculatePosMatrix(i.toUnwrapped())}return t},t.prototype.hasTransition=function(){var e=this;if(this._source.hasTransition())return!0;if(i(this._source.type))for(var t in e._tiles){var n=e._tiles[t];if(void 0!==n.fadeEndTime&&n.fadeEndTime>=h.now())return!0}return!1},t}(s);m.maxOverzooming=10,m.maxUnderzooming=3,t.exports=m},{"../data/extent":53,"../geo/coordinate":61,"../gl/context":66,"../util/browser":252,"../util/evented":260,"../util/lru_cache":266,"../util/util":275,"./source":110,"./tile":112,"./tile_id":114,"@mapbox/point-geometry":4}],112:[function(e,t,n){"use strict";var r=e("../util/util"),i=e("../data/bucket").deserialize,o=(e("../data/feature_index"),e("@mapbox/vector-tile")),a=e("pbf"),s=e("../util/vectortile_to_geojson"),u=e("../style-spec/feature_filter"),l=(e("../symbol/collision_index"),e("../data/bucket/symbol_bucket")),c=e("../data/array_types"),f=c.RasterBoundsArray,p=c.CollisionBoxArray,h=e("../data/raster_bounds_attributes"),d=e("../data/extent"),v=e("@mapbox/point-geometry"),m=e("../render/texture"),y=e("../data/segment"),g=y.SegmentVector,_=e("../data/index_array_type"),b=_.TriangleIndexArray,x=e("../util/browser"),w=function(e,t){this.tileID=e,this.uid=r.uniqueId(),this.uses=0,this.tileSize=t,this.buckets={},this.expirationTime=null,this.expiredRequestCount=0,this.state="loading"};w.prototype.registerFadeDuration=function(e){var t=e+this.timeAdded;t<x.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)},w.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},w.prototype.loadVectorData=function(e,t,n){var r=this;if(this.hasData()&&this.unloadVectorData(),this.state="loaded",!e)return void(this.collisionBoxArray=new p);if(e.rawTileData&&(this.rawTileData=e.rawTileData),this.collisionBoxArray=e.collisionBoxArray,this.featureIndex=e.featureIndex,this.featureIndex.rawTileData=this.rawTileData,this.buckets=i(e.buckets,t.style),n)for(var o in r.buckets){var a=r.buckets[o];a instanceof l&&(a.justReloaded=!0)}e.iconAtlasImage&&(this.iconAtlasImage=e.iconAtlasImage),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)},w.prototype.unloadVectorData=function(){var e=this;for(var t in e.buckets)e.buckets[t].destroy();this.buckets={},this.iconAtlasTexture&&this.iconAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.collisionBoxArray=null,this.featureIndex=null,this.state="unloaded"},w.prototype.unloadDEMData=function(){this.dem=null,this.neighboringTiles=null,this.state="unloaded"},w.prototype.getBucket=function(e){return this.buckets[e.id]},w.prototype.upload=function(e){var t=this;for(var n in t.buckets){var r=t.buckets[n];r.uploaded||(r.upload(e),r.uploaded=!0)}var i=e.gl;this.iconAtlasImage&&(this.iconAtlasTexture=new m(e,this.iconAtlasImage,i.RGBA),this.iconAtlasImage=null),this.glyphAtlasImage&&(this.glyphAtlasTexture=new m(e,this.glyphAtlasImage,i.ALPHA),this.glyphAtlasImage=null)},w.prototype.queryRenderedFeatures=function(e,t,n,r,i,o,a){var s=this;if(!this.featureIndex||!this.collisionBoxArray)return{};var u=0,c={};for(var f in e){var p=s.getBucket(e[f]);p&&(u=Math.max(u,e[f].queryRadius(p)),p instanceof l&&void 0!==p.bucketInstanceId&&(c[p.bucketInstanceId]=!0))}return this.featureIndex.query({queryGeometry:t,scale:n,tileSize:this.tileSize,bearing:i,params:r,additionalRadius:u,collisionBoxArray:this.collisionBoxArray,sourceID:o,collisionIndex:a,bucketInstanceIds:c},e)},w.prototype.querySourceFeatures=function(e,t){var n=this;if(this.rawTileData){this.vtLayers||(this.vtLayers=new o.VectorTile(new a(this.rawTileData)).layers);var r=t?t.sourceLayer:"",i=this.vtLayers._geojsonTileLayer||this.vtLayers[r];if(i)for(var l=u(t&&t.filter),c={z:this.tileID.overscaledZ,x:this.tileID.canonical.x,y:this.tileID.canonical.y},f=0;f<i.length;f++){var p=i.feature(f);if(l({zoom:n.tileID.overscaledZ},p)){var h=new s(p,c.z,c.x,c.y);h.tile=c,e.push(h)}}}},w.prototype.clearMask=function(){this.segments&&(this.segments.destroy(),delete this.segments),this.maskedBoundsBuffer&&(this.maskedBoundsBuffer.destroy(),delete this.maskedBoundsBuffer),this.maskedIndexBuffer&&(this.maskedIndexBuffer.destroy(),delete this.maskedIndexBuffer)},w.prototype.setMask=function(e,t){var n=this;if(!r.deepEqual(this.mask,e)&&(this.mask=e,this.clearMask(),!r.deepEqual(e,{0:!0}))){var i=new f,o=new b;this.segments=new g,this.segments.prepareSegment(0,i,o);for(var a=Object.keys(e),s=0;s<a.length;s++){var u=e[a[s]],l=d>>u.z,c=new v(u.x*l,u.y*l),p=new v(c.x+l,c.y+l),m=n.segments.prepareSegment(4,i,o);i.emplaceBack(c.x,c.y,c.x,c.y),i.emplaceBack(p.x,c.y,p.x,c.y),i.emplaceBack(c.x,p.y,c.x,p.y),i.emplaceBack(p.x,p.y,p.x,p.y);var y=m.vertexLength;o.emplaceBack(y,y+1,y+2),o.emplaceBack(y+1,y+2,y+3),m.vertexLength+=4,m.primitiveLength+=2}this.maskedBoundsBuffer=t.createVertexBuffer(i,h.members),this.maskedIndexBuffer=t.createIndexBuffer(o)}},w.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},w.prototype.setExpiryData=function(e){var t=this.expirationTime;if(e.cacheControl){var n=r.parseCacheControl(e.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var i=Date.now(),o=!1;if(this.expirationTime>i)o=!1;else if(t)if(this.expirationTime<t)o=!0;else{var a=this.expirationTime-t;a?this.expirationTime=i+Math.max(a,3e4):o=!0}else o=!0;o?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},w.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},t.exports=w},{"../data/array_types":39,"../data/bucket":40,"../data/bucket/symbol_bucket":51,"../data/extent":53,"../data/feature_index":54,"../data/index_array_type":55,"../data/raster_bounds_attributes":59,"../data/segment":60,"../render/texture":93,"../style-spec/feature_filter":148,"../symbol/collision_index":217,"../util/browser":252,"../util/util":275,"../util/vectortile_to_geojson":276,"@mapbox/point-geometry":4,"@mapbox/vector-tile":8,pbf:30}],113:[function(e,t,n){"use strict";var r=e("../geo/lng_lat_bounds"),i=e("../util/util").clamp,o=function(e,t,n){this.bounds=r.convert(this.validateBounds(e)),this.minzoom=t||0,this.maxzoom=n||24};o.prototype.validateBounds=function(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]},o.prototype.contains=function(e){var t={minX:Math.floor(this.lngX(this.bounds.getWest(),e.z)),minY:Math.floor(this.latY(this.bounds.getNorth(),e.z)),maxX:Math.ceil(this.lngX(this.bounds.getEast(),e.z)),maxY:Math.ceil(this.latY(this.bounds.getSouth(),e.z))};return e.x>=t.minX&&e.x<t.maxX&&e.y>=t.minY&&e.y<t.maxY},o.prototype.lngX=function(e,t){return(e+180)*(Math.pow(2,t)/360)},o.prototype.latY=function(e,t){var n=i(Math.sin(Math.PI/180*e),-.9999,.9999),r=Math.pow(2,t)/(2*Math.PI);return Math.pow(2,t-1)+.5*Math.log((1+n)/(1-n))*-r},t.exports=o},{"../geo/lng_lat_bounds":63,"../util/util":275}],114:[function(e,t,n){"use strict";function r(e,t,n,r){(e*=2)<0&&(e=-1*e-1);var i=1<<t;return 32*(i*i*e+i*r+n)+t}function i(e,t,n){for(var r,i="",o=e;o>0;o--)r=1<<o-1,i+=(t&r?1:0)+(n&r?2:0);return i}var o=e("@mapbox/whoots-js"),a=e("../util/web_worker_transfer"),s=a.register,u=e("../geo/coordinate"),l=function(e,t,n){this.z=e,this.x=t,this.y=n,this.key=r(0,e,t,n)};l.prototype.equals=function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},l.prototype.url=function(e,t){var n=o.getTileBBox(this.x,this.y,this.z),r=i(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===t?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",r).replace("{bbox-epsg-3857}",n)};var c=function(e,t){this.wrap=e,this.canonical=t,this.key=r(e,t.z,t.x,t.y)},f=function(e,t,n,i,o){this.overscaledZ=e,this.wrap=t,this.canonical=new l(n,+i,+o),this.key=r(t,e,i,o)};f.prototype.scaledTo=function(e){var t=this.canonical.z-e;return e>this.canonical.z?new f(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new f(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)},f.prototype.isChildOf=function(e){var t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t},f.prototype.children=function(e){if(this.overscaledZ>=e)return[new f(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var t=this.canonical.z+1,n=2*this.canonical.x,r=2*this.canonical.y;return[new f(t,this.wrap,t,n,r),new f(t,this.wrap,t,n+1,r),new f(t,this.wrap,t,n,r+1),new f(t,this.wrap,t,n+1,r+1)]},f.prototype.isLessThan=function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},f.prototype.wrapped=function(){return new f(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},f.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},f.prototype.toUnwrapped=function(){return new c(this.wrap,this.canonical)},f.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},f.prototype.toCoordinate=function(){return new u(this.canonical.x+Math.pow(2,this.wrap),this.canonical.y,this.canonical.z)},s("CanonicalTileID",l),s("OverscaledTileID",f,{omit:["posMatrix"]}),t.exports={CanonicalTileID:l,OverscaledTileID:f,UnwrappedTileID:c}},{"../geo/coordinate":61,"../util/web_worker_transfer":278,"@mapbox/whoots-js":12}],115:[function(e,t,n){"use strict";var r=e("../util/evented"),i=e("../util/util"),o=e("./load_tilejson"),a=e("../util/mapbox").normalizeTileURL,s=e("./tile_bounds"),u=e("../util/ajax").ResourceType,l=e("../util/browser"),c=function(e){function t(t,n,r,o){if(e.call(this),this.id=t,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,i.extend(this,i.pick(n,["url","scheme","tileSize"])),this._options=i.extend({type:"vector"},n),this._collectResourceTiming=n.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(o)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){var e=this;this.fire("dataloading",{dataType:"source"}),o(this._options,this.map._transformRequest,function(t,n){t?e.fire("error",t):n&&(i.extend(e,n),n.bounds&&(e.tileBounds=new s(n.bounds,e.minzoom,e.maxzoom)),e.fire("data",{dataType:"source",sourceDataType:"metadata"}),e.fire("data",{dataType:"source",sourceDataType:"content"}))})},t.prototype.hasTile=function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)},t.prototype.onAdd=function(e){this.map=e,this.load()},t.prototype.serialize=function(){return i.extend({},this._options)},t.prototype.loadTile=function(e,t){function n(n,r){return e.aborted?t(null):n?t(n):(r&&r.resourceTiming&&(e.resourceTiming=r.resourceTiming),this.map._refreshExpiredTiles&&e.setExpiryData(r),e.loadVectorData(r,this.map.painter),t(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}var r=e.tileID.overscaleFactor(),i=a(e.tileID.canonical.url(this.tiles,this.scheme),this.url),o={request:this.map._transformRequest(i,u.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*r,type:this.type,source:this.id,pixelRatio:l.devicePixelRatio,overscaling:r,showCollisionBoxes:this.map.showCollisionBoxes};o.request.collectResourceTiming=this._collectResourceTiming,void 0===e.workerID||"expired"===e.state?e.workerID=this.dispatcher.send("loadTile",o,n.bind(this)):"loading"===e.state?e.reloadCallback=t:this.dispatcher.send("reloadTile",o,n.bind(this),e.workerID)},t.prototype.abortTile=function(e){this.dispatcher.send("abortTile",{uid:e.uid,type:this.type,source:this.id},void 0,e.workerID)},t.prototype.unloadTile=function(e){e.unloadVectorData(),this.dispatcher.send("removeTile",{uid:e.uid,type:this.type,source:this.id},void 0,e.workerID)},t.prototype.hasTransition=function(){return!1},t}(r);t.exports=c},{"../util/ajax":251,"../util/browser":252,"../util/evented":260,"../util/mapbox":267,"../util/util":275,"./load_tilejson":103,"./tile_bounds":113}],116:[function(e,t,n){"use strict";function r(e,t){var n=i.getArrayBuffer(e.request,function(e,n){e?t(e):n&&t(null,{vectorTile:new o.VectorTile(new a(n.data)),rawData:n.data,cacheControl:n.cacheControl,expires:n.expires})});return function(){n.abort(),t()}}var i=e("../util/ajax"),o=e("@mapbox/vector-tile"),a=e("pbf"),s=e("./worker_tile"),u=e("../util/util"),l=e("../util/performance"),c=function(e,t,n){this.actor=e,this.layerIndex=t,this.loadVectorData=n||r,this.loading={},this.loaded={}};c.prototype.loadTile=function(e,t){var n=this,r=e.source,i=e.uid;this.loading[r]||(this.loading[r]={});var o=this.loading[r][i]=new s(e);o.abort=this.loadVectorData(e,function(a,s){if(delete n.loading[r][i],a||!s)return t(a);var c=s.rawData,f={};s.expires&&(f.expires=s.expires),s.cacheControl&&(f.cacheControl=s.cacheControl);var p={};if(e.request&&e.request.collectResourceTiming){var h=l.getEntriesByName(e.request.url);h&&(p.resourceTiming=JSON.parse(JSON.stringify(h)))}o.vectorTile=s.vectorTile,o.parse(s.vectorTile,n.layerIndex,n.actor,function(e,n){if(e||!n)return t(e);t(null,u.extend({rawTileData:c.slice(0)},n,f,p))}),n.loaded[r]=n.loaded[r]||{},n.loaded[r][i]=o})},c.prototype.reloadTile=function(e,t){function n(e,n){if(this.reloadCallback){var r=this.reloadCallback;delete this.reloadCallback,this.parse(this.vectorTile,o.layerIndex,o.actor,r)}t(e,n)}var r=this.loaded[e.source],i=e.uid,o=this;if(r&&r[i]){var a=r[i];a.showCollisionBoxes=e.showCollisionBoxes,"parsing"===a.status?a.reloadCallback=t:"done"===a.status&&a.parse(a.vectorTile,this.layerIndex,this.actor,n.bind(a))}},c.prototype.abortTile=function(e,t){var n=this.loading[e.source],r=e.uid;n&&n[r]&&n[r].abort&&(n[r].abort(),delete n[r]),t()},c.prototype.removeTile=function(e,t){var n=this.loaded[e.source],r=e.uid;n&&n[r]&&delete n[r],t()},t.exports=c},{"../util/ajax":251,"../util/performance":268,"../util/util":275,"./worker_tile":119,"@mapbox/vector-tile":8,pbf:30}],117:[function(e,t,n){"use strict";var r=e("../util/ajax"),i=e("./image_source"),o=e("../data/raster_bounds_attributes"),a=e("../render/vertex_array_object"),s=e("../render/texture"),u=function(e){function t(t,n,r,i){e.call(this,t,n,r,i),this.roundZoom=!0,this.type="video",this.options=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){var e=this,t=this.options;this.urls=t.urls,r.getVideo(t.urls,function(t,n){t?e.fire("error",{error:t}):n&&(e.video=n,e.video.loop=!0,e.video.addEventListener("playing",function(){e.map._rerender()}),e.map&&e.video.play(),e._finishLoading())})},t.prototype.getVideo=function(){return this.video},t.prototype.onAdd=function(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},t.prototype.prepare=function(){var e=this;if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var t=this.map.painter.context,n=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,o.members)),this.boundsVAO||(this.boundsVAO=new a),this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new s(t,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));for(var r in e.tiles){var i=e.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=e.texture)}}},t.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},t.prototype.hasTransition=function(){return this.video&&!this.video.paused},t}(i);t.exports=u},{"../data/raster_bounds_attributes":59,"../render/texture":93,"../render/vertex_array_object":95,"../util/ajax":251,"./image_source":102}],118:[function(e,t,n){"use strict";var r=e("../util/actor"),i=e("../style/style_layer_index"),o=e("./vector_tile_worker_source"),a=e("./raster_dem_tile_worker_source"),s=e("./geojson_worker_source"),u=e("./rtl_text_plugin"),l=function(e){var t=this;this.self=e,this.actor=new r(e,this),this.layerIndexes={},this.workerSourceTypes={vector:o,geojson:s},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(e,n){if(t.workerSourceTypes[e])throw new Error('Worker source with name "'+e+'" already registered.');t.workerSourceTypes[e]=n},this.self.registerRTLTextPlugin=function(e){if(u.applyArabicShaping||u.processBidirectionalText)throw new Error("RTL text plugin already registered.");u.applyArabicShaping=e.applyArabicShaping,u.processBidirectionalText=e.processBidirectionalText}};l.prototype.setLayers=function(e,t,n){this.getLayerIndex(e).replace(t),n()},l.prototype.updateLayers=function(e,t,n){this.getLayerIndex(e).update(t.layers,t.removedIds),n()},l.prototype.loadTile=function(e,t,n){this.getWorkerSource(e,t.type).loadTile(t,n)},l.prototype.loadDEMTile=function(e,t,n){this.getDEMWorkerSource(e).loadTile(t,n)},l.prototype.reloadTile=function(e,t,n){this.getWorkerSource(e,t.type).reloadTile(t,n)},l.prototype.abortTile=function(e,t,n){this.getWorkerSource(e,t.type).abortTile(t,n)},l.prototype.removeTile=function(e,t,n){this.getWorkerSource(e,t.type).removeTile(t,n)},l.prototype.removeDEMTile=function(e,t){this.getDEMWorkerSource(e).removeTile(t)},l.prototype.removeSource=function(e,t,n){var r=this.getWorkerSource(e,t.type);void 0!==r.removeSource?r.removeSource(t,n):n()},l.prototype.loadWorkerSource=function(e,t,n){try{this.self.importScripts(t.url),n()}catch(e){n(e)}},l.prototype.loadRTLTextPlugin=function(e,t,n){try{u.applyArabicShaping||u.processBidirectionalText||(this.self.importScripts(t),u.applyArabicShaping&&u.processBidirectionalText||n(new Error("RTL Text Plugin failed to import scripts from "+t)))}catch(e){n(e)}},l.prototype.getLayerIndex=function(e){var t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new i),t},l.prototype.getWorkerSource=function(e,t){var n=this;if(this.workerSources[e]||(this.workerSources[e]={}),!this.workerSources[e][t]){var r={send:function(t,r,i){n.actor.send(t,r,i,e)}};this.workerSources[e][t]=new this.workerSourceTypes[t](r,this.getLayerIndex(e))}return this.workerSources[e][t]},l.prototype.getDEMWorkerSource=function(e){return this.demWorkerSources[e]||(this.demWorkerSources[e]=new a),this.demWorkerSources[e]},t.exports=function(e){return new l(e)}},{"../style/style_layer_index":210,"../util/actor":250,"./geojson_worker_source":100,"./raster_dem_tile_worker_source":107,"./rtl_text_plugin":109,"./vector_tile_worker_source":116}],119:[function(e,t,n){"use strict";function r(e,t){for(var n=new m(t),r=0,i=e;r<i.length;r+=1)i[r].recalculate(n)}var i=e("../data/feature_index"),o=e("../symbol/symbol_layout"),a=o.performSymbolLayout,s=e("../data/array_types"),u=s.CollisionBoxArray,l=e("../util/dictionary_coder"),c=e("../data/bucket/symbol_bucket"),f=e("../util/util"),p=e("../render/image_atlas"),h=p.makeImageAtlas,d=e("../render/glyph_atlas"),v=d.makeGlyphAtlas,m=e("../style/evaluation_parameters"),y=e("./tile_id"),g=y.OverscaledTileID,_=function(e){this.tileID=new g(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=e.overscaling,this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming};_.prototype.parse=function(e,t,n,o){function s(){var e=this;if(k)return o(k);if(R&&M){var t=v(R),n=h(M);for(var i in y){var s=y[i];s instanceof c&&(r(s.layers,e.zoom),a(s,R,t.positions,M,n.positions,e.showCollisionBoxes))}this.status="done",o(null,{buckets:f.values(y).filter(function(e){return!e.isEmpty()}),featureIndex:m,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:t.image,iconAtlasImage:n.image})}}var p=this;this.status="parsing",this.data=e,this.collisionBoxArray=new u;var d=new l(Object.keys(e.layers).sort()),m=new i(this.tileID,this.overscaling);m.bucketLayerIDs=[];var y={},g={featureIndex:m,iconDependencies:{},glyphDependencies:{}},_=t.familiesBySource[this.source];for(var b in _){var x=e.layers[b];if(x){1===x.version&&f.warnOnce('Vector tile source "'+p.source+'" layer "'+b+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var w=d.encode(b),E=[],S=0;S<x.length;S++){var T=x.feature(S);E.push({feature:T,index:S,sourceLayerIndex:w})}for(var A=0,O=_[b];A<O.length;A+=1){var P=O[A],C=P[0];C.minzoom&&p.zoom<Math.floor(C.minzoom)||C.maxzoom&&p.zoom>=C.maxzoom||"none"===C.visibility||(r(P,p.zoom),(y[C.id]=C.createBucket({index:m.bucketLayerIDs.length,layers:P,zoom:p.zoom,pixelRatio:p.pixelRatio,overscaling:p.overscaling,collisionBoxArray:p.collisionBoxArray})).populate(E,g),m.bucketLayerIDs.push(P.map(function(e){return e.id})))}}}var k,R,M,I=f.mapObject(g.glyphDependencies,function(e){return Object.keys(e).map(Number)});Object.keys(I).length?n.send("getGlyphs",{uid:this.uid,stacks:I},function(e,t){k||(k=e,R=t,s.call(p))}):R={};var L=Object.keys(g.iconDependencies);L.length?n.send("getImages",{icons:L},function(e,t){k||(k=e,M=t,s.call(p))}):M={},s.call(this)},t.exports=_},{"../data/array_types":39,"../data/bucket/symbol_bucket":51,"../data/feature_index":54,"../render/glyph_atlas":85,"../render/image_atlas":87,"../style/evaluation_parameters":182,"../symbol/symbol_layout":227,"../util/dictionary_coder":257,"../util/util":275,"./tile_id":114}],120:[function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)"ref"!==r&&(n[r]=e[r]);return o.forEach(function(e){e in t&&(n[e]=t[e])}),n}function i(e){e=e.slice();for(var t=Object.create(null),n=0;n<e.length;n++)t[e[n].id]=e[n];for(var i=0;i<e.length;i++)"ref"in e[i]&&(e[i]=r(e[i],t[e[i].ref]));return e}var o=e("./util/ref_properties");t.exports=i},{"./util/ref_properties":159}],121:[function(e,t,n){"use strict";function r(e,t,n){n.push({command:d.addSource,args:[e,t[e]]})}function i(e,t,n){t.push({command:d.removeSource,args:[e]}),n[e]=!0}function o(e,t,n,o){i(e,n,o),r(e,t,n)}function a(e,t,n){var r;for(r in e[n])if(e[n].hasOwnProperty(r)&&"data"!==r&&!h(e[n][r],t[n][r]))return!1;for(r in t[n])if(t[n].hasOwnProperty(r)&&"data"!==r&&!h(e[n][r],t[n][r]))return!1;return!0}function s(e,t,n,s){e=e||{},t=t||{};var u;for(u in e)e.hasOwnProperty(u)&&(t.hasOwnProperty(u)||i(u,n,s));for(u in t)t.hasOwnProperty(u)&&(e.hasOwnProperty(u)?h(e[u],t[u])||("geojson"===e[u].type&&"geojson"===t[u].type&&a(e,t,u)?n.push({command:d.setGeoJSONSourceData,args:[u,t[u].data]}):o(u,t,n,s)):r(u,t,n))}function u(e,t,n,r,i,o){e=e||{},t=t||{};var a;for(a in e)e.hasOwnProperty(a)&&(h(e[a],t[a])||n.push({command:o,args:[r,a,t[a],i]}));for(a in t)t.hasOwnProperty(a)&&!e.hasOwnProperty(a)&&(h(e[a],t[a])||n.push({command:o,args:[r,a,t[a],i]}))}function l(e){return e.id}function c(e,t){return e[t.id]=t,e}function f(e,t,n){e=e||[],t=t||[];var r,i,o,a,s,f,p,v=e.map(l),m=t.map(l),y=e.reduce(c,{}),g=t.reduce(c,{}),_=v.slice(),b=Object.create(null);for(r=0,i=0;r<v.length;r++)o=v[r],g.hasOwnProperty(o)?i++:(n.push({command:d.removeLayer,args:[o]}),_.splice(_.indexOf(o,i),1));for(r=0,i=0;r<m.length;r++)o=m[m.length-1-r],_[_.length-1-r]!==o&&(y.hasOwnProperty(o)?(n.push({command:d.removeLayer,args:[o]}),_.splice(_.lastIndexOf(o,_.length-i),1)):i++,f=_[_.length-r],n.push({command:d.addLayer,args:[g[o],f]}),_.splice(_.length-r,0,o),b[o]=!0);for(r=0;r<m.length;r++)if(o=m[r],a=y[o],s=g[o],!b[o]&&!h(a,s))if(h(a.source,s.source)&&h(a["source-layer"],s["source-layer"])&&h(a.type,s.type)){u(a.layout,s.layout,n,o,null,d.setLayoutProperty),u(a.paint,s.paint,n,o,null,d.setPaintProperty),h(a.filter,s.filter)||n.push({command:d.setFilter,args:[o,s.filter]}),h(a.minzoom,s.minzoom)&&h(a.maxzoom,s.maxzoom)||n.push({command:d.setLayerZoomRange,args:[o,s.minzoom,s.maxzoom]});for(p in a)a.hasOwnProperty(p)&&"layout"!==p&&"paint"!==p&&"filter"!==p&&"metadata"!==p&&"minzoom"!==p&&"maxzoom"!==p&&(0===p.indexOf("paint.")?u(a[p],s[p],n,o,p.slice(6),d.setPaintProperty):h(a[p],s[p])||n.push({command:d.setLayerProperty,args:[o,p,s[p]]}));for(p in s)s.hasOwnProperty(p)&&!a.hasOwnProperty(p)&&"layout"!==p&&"paint"!==p&&"filter"!==p&&"metadata"!==p&&"minzoom"!==p&&"maxzoom"!==p&&(0===p.indexOf("paint.")?u(a[p],s[p],n,o,p.slice(6),d.setPaintProperty):h(a[p],s[p])||n.push({command:d.setLayerProperty,args:[o,p,s[p]]}))}else n.push({command:d.removeLayer,args:[o]}),f=_[_.lastIndexOf(o)+1],n.push({command:d.addLayer,args:[s,f]})}function p(e,t){if(!e)return[{command:d.setStyle,args:[t]}];var n=[];try{if(!h(e.version,t.version))return[{command:d.setStyle,args:[t]}];h(e.center,t.center)||n.push({command:d.setCenter,args:[t.center]}),h(e.zoom,t.zoom)||n.push({command:d.setZoom,args:[t.zoom]}),h(e.bearing,t.bearing)||n.push({command:d.setBearing,args:[t.bearing]}),h(e.pitch,t.pitch)||n.push({command:d.setPitch,args:[t.pitch]}),h(e.sprite,t.sprite)||n.push({command:d.setSprite,args:[t.sprite]}),h(e.glyphs,t.glyphs)||n.push({command:d.setGlyphs,args:[t.glyphs]}),h(e.transition,t.transition)||n.push({command:d.setTransition,args:[t.transition]}),h(e.light,t.light)||n.push({command:d.setLight,args:[t.light]});var r={},i=[];s(e.sources,t.sources,i,r);var o=[];e.layers&&e.layers.forEach(function(e){r[e.source]?n.push({command:d.removeLayer,args:[e.id]}):o.push(e)}),n=n.concat(i),f(o,t.layers,n)}catch(e){console.warn("Unable to compute style diff:",e),n=[{command:d.setStyle,args:[t]}]}return n}var h=e("./util/deep_equal"),d={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};t.exports=p,t.exports.operations=d},{"./util/deep_equal":155}],122:[function(e,t,n){"use strict";function r(e,t,n){this.message=(e?e+": ":"")+n,null!==t&&void 0!==t&&t.__line__&&(this.line=t.__line__)}t.exports=r},{}],123:[function(e,t,n){"use strict";function r(e){return{type:e}}function i(e){return Array.isArray(e)?"("+e.map(a).join(", ")+")":"("+a(e.type)+"...)"}var o=e("./types"),a=o.toString,s=e("./parsing_context"),u=(e("./evaluation_context"),function(e,t,n,r){this.name=e,this.type=t,this._evaluate=n,this.args=r});u.prototype.evaluate=function(e){return this._evaluate(e,this.args)},u.prototype.eachChild=function(e){this.args.forEach(e)},u.prototype.possibleOutputs=function(){return[void 0]},u.parse=function(e,t){var n=e[0],r=u.definitions[n];if(!r)return t.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0);for(var o=Array.isArray(r)?r[0]:r.type,l=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,c=l.filter(function(t){var n=t[0];return!Array.isArray(n)||n.length===e.length-1}),f=[],p=1;p<e.length;p++){var h=e[p],d=void 0;if(1===c.length){var v=c[0][0];d=Array.isArray(v)?v[p-1]:v.type}var m=t.parse(h,1+f.length,d);if(!m)return null;f.push(m)}for(var y=null,g=0,_=c;g<_.length;g+=1){var b=_[g],x=b[0],w=b[1];if(y=new s(t.registry,t.path,null,t.scope),Array.isArray(x)&&x.length!==f.length)y.error("Expected "+x.length+" arguments, but found "+f.length+" instead.");else{for(var E=0;E<f.length;E++){var S=Array.isArray(x)?x[E]:x.type,T=f[E];y.concat(E+1).checkSubtype(S,T.type)}if(0===y.errors.length)return new u(n,o,w,f)}}if(1===c.length)t.errors.push.apply(t.errors,y.errors);else{var A=c.length?c:l,O=A.map(function(e){return i(e[0])}).join(" | "),P=f.map(function(e){return a(e.type)}).join(", ");t.error("Expected arguments of type "+O+", but found ("+P+") instead.")}return null},u.register=function(e,t){u.definitions=t;for(var n in t)e[n]=u},t.exports={CompoundExpression:u,varargs:r}},{"./evaluation_context":138,"./parsing_context":141,"./types":146}],124:[function(e,t,n){"use strict";var r=e("../types"),i=r.toString,o=r.array,a=r.ValueType,s=r.StringType,u=r.NumberType,l=r.BooleanType,c=r.checkSubtype,f=e("../values"),p=f.typeOf,h=e("../runtime_error"),d={string:s,number:u,boolean:l},v=function(e,t){this.type=e,this.input=t};v.parse=function(e,t){if(e.length<2||e.length>4)return t.error("Expected 1, 2, or 3 arguments, but found "+(e.length-1)+" instead.");var n,r;if(e.length>2){var i=e[1];if("string"!=typeof i||!(i in d))return t.error('The item type argument of "array" must be one of string, number, boolean',1);n=d[i]}else n=a;if(e.length>3){if("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2]))return t.error('The length argument to "array" must be a positive integer literal',2);r=e[2]}var s=o(n,r),u=t.parse(e[e.length-1],e.length-1,a);return u?new v(s,u):null},v.prototype.evaluate=function(e){var t=this.input.evaluate(e);if(c(this.type,p(t)))throw new h("Expected value to be of type "+i(this.type)+", but found "+i(p(t))+" instead.");return t},v.prototype.eachChild=function(e){e(this.input)},v.prototype.possibleOutputs=function(){return this.input.possibleOutputs()},t.exports=v},{"../runtime_error":143,"../types":146,"../values":147}],125:[function(e,t,n){"use strict";var r=e("../types"),i=r.ObjectType,o=r.ValueType,a=r.StringType,s=r.NumberType,u=r.BooleanType,l=e("../runtime_error"),c=e("../types"),f=c.checkSubtype,p=c.toString,h=e("../values"),d=h.typeOf,v={string:a,number:s,boolean:u,object:i},m=function(e,t){this.type=e,this.args=t};m.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");for(var n=e[0],r=v[n],i=[],a=1;a<e.length;a++){var s=t.parse(e[a],a,o);if(!s)return null;i.push(s)}return new m(r,i)},m.prototype.evaluate=function(e){for(var t=this,n=0;n<this.args.length;n++){var r=t.args[n].evaluate(e);if(!f(t.type,d(r)))return r;if(n===t.args.length-1)throw new l("Expected value to be of type "+p(t.type)+", but found "+p(d(r))+" instead.")}return null},m.prototype.eachChild=function(e){this.args.forEach(e)},m.prototype.possibleOutputs=function(){return(e=[]).concat.apply(e,this.args.map(function(e){return e.possibleOutputs()}));var e},t.exports=m},{"../runtime_error":143,"../types":146,"../values":147}],126:[function(e,t,n){"use strict";var r=e("../types"),i=r.array,o=r.ValueType,a=r.NumberType,s=e("../runtime_error"),u=function(e,t,n){this.type=e,this.index=t,this.input=n};u.parse=function(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1,a),r=t.parse(e[2],2,i(t.expectedType||o));if(!n||!r)return null;var s=r.type;return new u(s.itemType,n,r)},u.prototype.evaluate=function(e){var t=this.index.evaluate(e),n=this.input.evaluate(e);if(t<0||t>=n.length)throw new s("Array index out of bounds: "+t+" > "+n.length+".");if(t!==Math.floor(t))throw new s("Array index must be an integer, but found "+t+" instead.");return n[t]},u.prototype.eachChild=function(e){e(this.index),e(this.input)},u.prototype.possibleOutputs=function(){return[void 0]},t.exports=u},{"../runtime_error":143,"../types":146}],127:[function(e,t,n){"use strict";var r=e("../types"),i=r.BooleanType,o=function(e,t,n){this.type=e,this.branches=t,this.otherwise=n};o.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return t.error("Expected an odd number of arguments.");var n;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);for(var r=[],a=1;a<e.length-1;a+=2){var s=t.parse(e[a],a,i);if(!s)return null;var u=t.parse(e[a+1],a+1,n);if(!u)return null;r.push([s,u]),n=n||u.type}var l=t.parse(e[e.length-1],e.length-1,n);return l?new o(n,r,l):null},o.prototype.evaluate=function(e){for(var t=this,n=0,r=t.branches;n<r.length;n+=1){var i=r[n],o=i[0],a=i[1];if(o.evaluate(e))return a.evaluate(e)}return this.otherwise.evaluate(e)},o.prototype.eachChild=function(e){for(var t=this,n=0,r=t.branches;n<r.length;n+=1){var i=r[n],o=i[0],a=i[1];e(o),e(a)}e(this.otherwise)},o.prototype.possibleOutputs=function(){return(e=[]).concat.apply(e,this.branches.map(function(e){return e[0],e[1].possibleOutputs()})).concat(this.otherwise.possibleOutputs());var e},t.exports=o},{"../types":146}],128:[function(e,t,n){"use strict";var r=e("../types"),i=r.checkSubtype,o=r.ValueType,a=function(e,t){this.type=e,this.args=t};a.parse=function(e,t){if(e.length<2)return t.error("Expectected at least one argument.");var n=null,r=t.expectedType;r&&"value"!==r.kind&&(n=r);for(var s=[],u=0,l=e.slice(1);u<l.length;u+=1){var c=l[u],f=t.parse(c,1+s.length,n,void 0,{omitTypeAnnotations:!0});if(!f)return null;n=n||f.type,s.push(f)}return r&&s.some(function(e){return i(r,e.type)})?new a(o,s):new a(n,s)},a.prototype.evaluate=function(e){for(var t=this,n=null,r=0,i=t.args;r<i.length&&null===(n=i[r].evaluate(e));r+=1);return n},a.prototype.eachChild=function(e){this.args.forEach(e)},a.prototype.possibleOutputs=function(){return(e=[]).concat.apply(e,this.args.map(function(e){return e.possibleOutputs()}));var e},t.exports=a},{"../types":146}],129:[function(e,t,n){"use strict";var r=e("../types"),i=r.ColorType,o=r.ValueType,a=r.NumberType,s=e("../values"),u=s.Color,l=s.validateRGBA,c=e("../runtime_error"),f={"to-number":a,"to-color":i},p=function(e,t){this.type=e,this.args=t};p.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");for(var n=e[0],r=f[n],i=[],a=1;a<e.length;a++){var s=t.parse(e[a],a,o);if(!s)return null;i.push(s)}return new p(r,i)},p.prototype.evaluate=function(e){var t=this;if("color"===this.type.kind){for(var n,r,i=0,o=t.args;i<o.length;i+=1)if(n=o[i].evaluate(e),r=null,"string"==typeof n){var a=e.parseColor(n);if(a)return a}else if(Array.isArray(n)&&!(r=n.length<3||n.length>4?"Invalid rbga value "+JSON.stringify(n)+": expected an array containing either three or four numeric values.":l(n[0],n[1],n[2],n[3])))return new u(n[0]/255,n[1]/255,n[2]/255,n[3]);throw new c(r||"Could not parse color from value '"+("string"==typeof n?n:JSON.stringify(n))+"'")}for(var s=null,f=0,p=t.args;f<p.length;f+=1)if(null!==(s=p[f].evaluate(e))){var h=Number(s);if(!isNaN(h))return h}throw new c("Could not convert "+JSON.stringify(s)+" to number.")},p.prototype.eachChild=function(e){this.args.forEach(e)},p.prototype.possibleOutputs=function(){return(e=[]).concat.apply(e,this.args.map(function(e){return e.possibleOutputs()}));var e},t.exports=p},{"../runtime_error":143,"../types":146,"../values":147}],130:[function(e,t,n){"use strict";function r(e){return"string"===e.kind||"number"===e.kind||"boolean"===e.kind||"null"===e.kind}function i(e){return function(){function t(e,t){this.type=s,this.lhs=e,this.rhs=t}return t.parse=function(e,n){if(3!==e.length)return n.error("Expected two arguments.");var i=n.parse(e[1],1,a);if(!i)return null;var o=n.parse(e[2],2,a);return o?r(i.type)||r(o.type)?i.type.kind!==o.type.kind&&"value"!==i.type.kind&&"value"!==o.type.kind?n.error("Cannot compare "+l(i.type)+" and "+l(o.type)+"."):new t(i,o):n.error("Expected at least one argument to be a string, number, boolean, or null, but found ("+l(i.type)+", "+l(o.type)+") instead."):null},t.prototype.evaluate=function(t){return e(this.lhs.evaluate(t),this.rhs.evaluate(t))},t.prototype.eachChild=function(e){e(this.lhs),e(this.rhs)},t.prototype.possibleOutputs=function(){return[!0,!1]},t}()}var o=e("../types"),a=o.ValueType,s=o.BooleanType,u=e("../types"),l=u.toString;t.exports={Equals:i(function(e,t){return e===t}),NotEquals:i(function(e,t){return e!==t})}},{"../types":146}],131:[function(e,t,n){"use strict";function r(e,t){var n=t[0],r=t[1],i=t[2],o=t[3];n=n.evaluate(e),r=r.evaluate(e),i=i.evaluate(e);var a=o?o.evaluate(e):1,s=T(n,r,i,a);if(s)throw new C(s);return new S(n/255*a,r/255*a,i/255*a,a)}function i(e,t){return e in t}function o(e,t){var n=t[e];return void 0===n?null:n}function a(e,t){return t[0].evaluate(e).length}function s(e,t){var n=t[0],r=t[1];return n.evaluate(e)<r.evaluate(e)}function u(e,t){var n=t[0],r=t[1];return n.evaluate(e)>r.evaluate(e)}function l(e,t){var n=t[0],r=t[1];return n.evaluate(e)<=r.evaluate(e)}function c(e,t){var n=t[0],r=t[1];return n.evaluate(e)>=r.evaluate(e)}function f(e,t,n,r){for(;n<=r;){var i=n+r>>1;if(t[i]===e)return!0;t[i]>e?r=i-1:n=i+1}return!1}var p=e("../types"),h=p.NumberType,d=p.StringType,v=p.BooleanType,m=p.ColorType,y=p.ObjectType,g=p.ValueType,_=p.ErrorType,b=p.array,x=p.toString,w=e("../values"),E=w.typeOf,S=w.Color,T=w.validateRGBA,A=e("../compound_expression"),O=A.CompoundExpression,P=A.varargs,C=e("../runtime_error"),k=e("./let"),R=e("./var"),M=e("./literal"),I=e("./assertion"),L=e("./array"),D=e("./coercion"),N=e("./at"),F=e("./match"),j=e("./case"),B=e("./step"),z=e("./interpolate"),U=e("./coalesce"),V=e("./equals"),G=V.Equals,W=V.NotEquals,H={"==":G,"!=":W,array:L,at:N,boolean:I,case:j,coalesce:U,interpolate:z,let:k,literal:M,match:F,number:I,object:I,step:B,string:I,"to-color":D,"to-number":D,var:R};O.register(H,{error:[_,[d],function(e,t){var n=t[0];throw new C(n.evaluate(e))}],typeof:[d,[g],function(e,t){var n=t[0];return x(E(n.evaluate(e)))}],"to-string":[d,[g],function(e,t){var n=t[0];n=n.evaluate(e);var r=typeof n;return null===n||"string"===r||"number"===r||"boolean"===r?String(n):n instanceof S?n.toString():JSON.stringify(n)}],"to-boolean":[v,[g],function(e,t){var n=t[0];return Boolean(n.evaluate(e))}],"to-rgba":[b(h,4),[m],function(e,t){var n=t[0],r=n.evaluate(e),i=r.r,o=r.g,a=r.b,s=r.a;return[255*i/s,255*o/s,255*a/s,s]}],rgb:[m,[h,h,h],r],rgba:[m,[h,h,h,h],r],length:{type:h,overloads:[[[d],a],[[b(g)],a]]},has:{type:v,overloads:[[[d],function(e,t){return i(t[0].evaluate(e),e.properties())}],[[d,y],function(e,t){var n=t[0],r=t[1];return i(n.evaluate(e),r.evaluate(e))}]]},get:{type:g,overloads:[[[d],function(e,t){return o(t[0].evaluate(e),e.properties())}],[[d,y],function(e,t){var n=t[0],r=t[1];return o(n.evaluate(e),r.evaluate(e))}]]},properties:[y,[],function(e){return e.properties()}],"geometry-type":[d,[],function(e){return e.geometryType()}],id:[g,[],function(e){return e.id()}],zoom:[h,[],function(e){return e.globals.zoom}],"heatmap-density":[h,[],function(e){return e.globals.heatmapDensity||0}],"+":[h,P(h),function(e,t){for(var n=0,r=0,i=t;r<i.length;r+=1)n+=i[r].evaluate(e);return n}],"*":[h,P(h),function(e,t){for(var n=1,r=0,i=t;r<i.length;r+=1)n*=i[r].evaluate(e);return n}],"-":{type:h,overloads:[[[h,h],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)-r.evaluate(e)}],[[h],function(e,t){return-t[0].evaluate(e)}]]},"/":[h,[h,h],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)/r.evaluate(e)}],"%":[h,[h,h],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)%r.evaluate(e)}],ln2:[h,[],function(){return Math.LN2}],pi:[h,[],function(){return Math.PI}],e:[h,[],function(){return Math.E}],"^":[h,[h,h],function(e,t){var n=t[0],r=t[1];return Math.pow(n.evaluate(e),r.evaluate(e))}],sqrt:[h,[h],function(e,t){var n=t[0];return Math.sqrt(n.evaluate(e))}],log10:[h,[h],function(e,t){var n=t[0];return Math.log10(n.evaluate(e))}],ln:[h,[h],function(e,t){var n=t[0];return Math.log(n.evaluate(e))}],log2:[h,[h],function(e,t){var n=t[0];return Math.log2(n.evaluate(e))}],sin:[h,[h],function(e,t){var n=t[0];return Math.sin(n.evaluate(e))}],cos:[h,[h],function(e,t){var n=t[0];return Math.cos(n.evaluate(e))}],tan:[h,[h],function(e,t){var n=t[0];return Math.tan(n.evaluate(e))}],asin:[h,[h],function(e,t){var n=t[0];return Math.asin(n.evaluate(e))}],acos:[h,[h],function(e,t){var n=t[0];return Math.acos(n.evaluate(e))}],atan:[h,[h],function(e,t){var n=t[0];return Math.atan(n.evaluate(e))}],min:[h,P(h),function(e,t){return Math.min.apply(Math,t.map(function(t){return t.evaluate(e)}))}],max:[h,P(h),function(e,t){return Math.max.apply(Math,t.map(function(t){return t.evaluate(e)}))}],"filter-==":[v,[d,g],function(e,t){var n=t[0],r=t[1];return e.properties()[n.value]===r.value}],"filter-id-==":[v,[g],function(e,t){var n=t[0];return e.id()===n.value}],"filter-type-==":[v,[d],function(e,t){var n=t[0];return e.geometryType()===n.value}],"filter-<":[v,[d,g],function(e,t){var n=t[0],r=t[1],i=e.properties()[n.value],o=r.value;return typeof i==typeof o&&i<o}],"filter-id-<":[v,[g],function(e,t){var n=t[0],r=e.id(),i=n.value;return typeof r==typeof i&&r<i}],"filter->":[v,[d,g],function(e,t){var n=t[0],r=t[1],i=e.properties()[n.value],o=r.value;return typeof i==typeof o&&i>o}],"filter-id->":[v,[g],function(e,t){var n=t[0],r=e.id(),i=n.value;return typeof r==typeof i&&r>i}],"filter-<=":[v,[d,g],function(e,t){var n=t[0],r=t[1],i=e.properties()[n.value],o=r.value;return typeof i==typeof o&&i<=o}],"filter-id-<=":[v,[g],function(e,t){var n=t[0],r=e.id(),i=n.value;return typeof r==typeof i&&r<=i}],"filter->=":[v,[d,g],function(e,t){var n=t[0],r=t[1],i=e.properties()[n.value],o=r.value;return typeof i==typeof o&&i>=o}],"filter-id->=":[v,[g],function(e,t){var n=t[0],r=e.id(),i=n.value;return typeof r==typeof i&&r>=i}],"filter-has":[v,[g],function(e,t){return t[0].value in e.properties()}],"filter-has-id":[v,[],function(e){return null!==e.id()}],"filter-type-in":[v,[b(d)],function(e,t){return t[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[v,[b(g)],function(e,t){return t[0].value.indexOf(e.id())>=0}],"filter-in-small":[v,[d,b(g)],function(e,t){var n=t[0];return t[1].value.indexOf(e.properties()[n.value])>=0}],"filter-in-large":[v,[d,b(g)],function(e,t){var n=t[0],r=t[1];return f(e.properties()[n.value],r.value,0,r.value.length-1)}],">":{type:v,overloads:[[[h,h],u],[[d,d],u]]},"<":{type:v,overloads:[[[h,h],s],[[d,d],s]]},">=":{type:v,overloads:[[[h,h],c],[[d,d],c]]},"<=":{type:v,overloads:[[[h,h],l],[[d,d],l]]},all:{type:v,overloads:[[[v,v],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)&&r.evaluate(e)}],[P(v),function(e,t){for(var n=0,r=t;n<r.length;n+=1)if(!r[n].evaluate(e))return!1;return!0}]]},any:{type:v,overloads:[[[v,v],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)||r.evaluate(e)}],[P(v),function(e,t){for(var n=0,r=t;n<r.length;n+=1)if(r[n].evaluate(e))return!0;return!1}]]},"!":[v,[v],function(e,t){return!t[0].evaluate(e)}],upcase:[d,[d],function(e,t){return t[0].evaluate(e).toUpperCase()}],downcase:[d,[d],function(e,t){return t[0].evaluate(e).toLowerCase()}],concat:[d,P(d),function(e,t){return t.map(function(t){return t.evaluate(e)}).join("")}]}),t.exports=H},{"../compound_expression":123,"../runtime_error":143,"../types":146,"../values":147,"./array":124,"./assertion":125,"./at":126,"./case":127,"./coalesce":128,"./coercion":129,"./equals":130,"./interpolate":132,"./let":133,"./literal":134,"./match":135,"./step":136,"./var":137}],132:[function(e,t,n){"use strict";function r(e,t,n,r){var i=r-n,o=e-n;return 0===i?0:1===t?o/i:(Math.pow(t,o)-1)/(Math.pow(t,i)-1)}var i=e("@mapbox/unitbezier"),o=e("../../util/interpolate"),a=e("../types"),s=a.toString,u=a.NumberType,l=e("../stops"),c=l.findStopLessThanOrEqualTo,f=function(e,t,n,r){var i=this;this.type=e,this.interpolation=t,this.input=n,this.labels=[],this.outputs=[];for(var o=0,a=r;o<a.length;o+=1){var s=a[o],u=s[0],l=s[1];i.labels.push(u),i.outputs.push(l)}};f.interpolationFactor=function(e,t,n,o){var a=0;if("exponential"===e.name)a=r(t,e.base,n,o);else if("linear"===e.name)a=r(t,1,n,o);else if("cubic-bezier"===e.name){var s=e.controlPoints,u=new i(s[0],s[1],s[2],s[3]);a=u.solve(r(t,1,n,o))}return a},f.parse=function(e,t){var n=e[1],r=e[2],i=e.slice(3);if(!Array.isArray(n)||0===n.length)return t.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){var o=n[1];if("number"!=typeof o)return t.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:o}}else{if("cubic-bezier"!==n[0])return t.error("Unknown interpolation type "+String(n[0]),1,0);var a=n.slice(1);if(4!==a.length||a.some(function(e){return"number"!=typeof e||e<0||e>1}))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:a}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(r=t.parse(r,2,u)))return null;var l=[],c=null;t.expectedType&&"value"!==t.expectedType.kind&&(c=t.expectedType);for(var p=0;p<i.length;p+=2){var h=i[p],d=i[p+1],v=p+3,m=p+4;if("number"!=typeof h)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',v);if(l.length&&l[l.length-1][0]>=h)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',v);var y=t.parse(d,m,c);if(!y)return null;c=c||y.type,l.push([h,y])}return"number"===c.kind||"color"===c.kind||"array"===c.kind&&"number"===c.itemType.kind&&"number"==typeof c.N?new f(c,n,r,l):t.error("Type "+s(c)+" is not interpolatable.")},f.prototype.evaluate=function(e){var t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);var r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);var i=t.length;if(r>=t[i-1])return n[i-1].evaluate(e);var a=c(t,r),s=t[a],u=t[a+1],l=f.interpolationFactor(this.interpolation,r,s,u),p=n[a].evaluate(e),h=n[a+1].evaluate(e);return o[this.type.kind.toLowerCase()](p,h,l)},f.prototype.eachChild=function(e){var t=this;e(this.input);for(var n=0,r=t.outputs;n<r.length;n+=1)e(r[n])},f.prototype.possibleOutputs=function(){return(e=[]).concat.apply(e,this.outputs.map(function(e){return e.possibleOutputs()}));var e},t.exports=f},{"../../util/interpolate":158,"../stops":145,"../types":146,"@mapbox/unitbezier":7}],133:[function(e,t,n){"use strict";var r=function(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t};r.prototype.evaluate=function(e){e.pushScope(this.bindings);var t=this.result.evaluate(e);return e.popScope(),t},r.prototype.eachChild=function(e){for(var t=this,n=0,r=t.bindings;n<r.length;n+=1)e(r[n][1]);e(this.result)},r.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var n=[],i=1;i<e.length-1;i+=2){var o=e[i];if("string"!=typeof o)return t.error("Expected string, but found "+typeof o+" instead.",i);if(/[^a-zA-Z0-9_]/.test(o))return t.error("Variable names must contain only alphanumeric characters or '_'.",i);var a=t.parse(e[i+1],i+1);if(!a)return null;n.push([o,a])}var s=t.parse(e[e.length-1],e.length-1,void 0,n);return s?new r(n,s):null},r.prototype.possibleOutputs=function(){return this.result.possibleOutputs()},t.exports=r},{}],134:[function(e,t,n){"use strict";var r=e("../values"),i=r.isValue,o=r.typeOf,a=function(e,t){this.type=e,this.value=t};a.parse=function(e,t){if(2!==e.length)return t.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!i(e[1]))return t.error("invalid value");var n=e[1],r=o(n),s=t.expectedType;return"array"!==r.kind||0!==r.N||!s||"array"!==s.kind||"number"==typeof s.N&&0!==s.N||(r=s),new a(r,n)},a.prototype.evaluate=function(){return this.value},a.prototype.eachChild=function(){},a.prototype.possibleOutputs=function(){return[this.value]},t.exports=a},{"../values":147}],135:[function(e,t,n){"use strict";var r=e("../values"),i=r.typeOf,o=function(e,t,n,r,i,o){this.inputType=e,this.type=t,this.input=n,this.cases=r,this.outputs=i,this.otherwise=o};o.parse=function(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return t.error("Expected an even number of arguments.");var n,r;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);for(var a={},s=[],u=2;u<e.length-1;u+=2){var l=e[u],c=e[u+1];Array.isArray(l)||(l=[l]);var f=t.concat(u);if(0===l.length)return f.error("Expected at least one branch label.");for(var p=0,h=l;p<h.length;p+=1){var d=h[p];if("number"!=typeof d&&"string"!=typeof d)return f.error("Branch labels must be numbers or strings.");if("number"==typeof d&&Math.abs(d)>Number.MAX_SAFE_INTEGER)return f.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof d&&Math.floor(d)!==d)return f.error("Numeric branch labels must be integer values.");if(n){if(f.checkSubtype(n,i(d)))return null}else n=i(d);if(void 0!==a[String(d)])return f.error("Branch labels must be unique.");a[String(d)]=s.length}var v=t.parse(c,u,r);if(!v)return null;r=r||v.type,s.push(v)}var m=t.parse(e[1],1,n);if(!m)return null;var y=t.parse(e[e.length-1],e.length-1,r);return y?new o(n,r,m,a,s,y):null},o.prototype.evaluate=function(e){var t=this.input.evaluate(e);return(this.outputs[this.cases[t]]||this.otherwise).evaluate(e)},o.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},o.prototype.possibleOutputs=function(){return(e=[]).concat.apply(e,this.outputs.map(function(e){return e.possibleOutputs()})).concat(this.otherwise.possibleOutputs());var e},t.exports=o},{"../values":147}],136:[function(e,t,n){"use strict";var r=e("../types"),i=r.NumberType,o=e("../stops"),a=o.findStopLessThanOrEqualTo,s=function(e,t,n){var r=this;this.type=e,this.input=t,this.labels=[],this.outputs=[];for(var i=0,o=n;i<o.length;i+=1){var a=o[i],s=a[0],u=a[1];r.labels.push(s),r.outputs.push(u)}};s.parse=function(e,t){var n=e[1],r=e.slice(2);if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(n=t.parse(n,1,i)))return null;var o=[],a=null;t.expectedType&&"value"!==t.expectedType.kind&&(a=t.expectedType),r.unshift(-1/0);for(var u=0;u<r.length;u+=2){var l=r[u],c=r[u+1],f=u+1,p=u+2;if("number"!=typeof l)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',f);if(o.length&&o[o.length-1][0]>=l)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',f);var h=t.parse(c,p,a);if(!h)return null;a=a||h.type,o.push([l,h])}return new s(a,n,o)},s.prototype.evaluate=function(e){var t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);var r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);var i=t.length;return r>=t[i-1]?n[i-1].evaluate(e):n[a(t,r)].evaluate(e)},s.prototype.eachChild=function(e){var t=this;e(this.input);for(var n=0,r=t.outputs;n<r.length;n+=1)e(r[n])},s.prototype.possibleOutputs=function(){return(e=[]).concat.apply(e,this.outputs.map(function(e){return e.possibleOutputs()}));var e},t.exports=s},{"../stops":145,"../types":146}],137:[function(e,t,n){"use strict";var r=function(e,t){this.type=t,this.name=e};r.parse=function(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");var n=e[1];return t.scope.has(n)?new r(n,t.scope.get(n).type):t.error('Unknown variable "'+n+'". Make sure "'+n+'" has been bound in an enclosing "let" expression before using it.',1)},r.prototype.evaluate=function(e){return e.scope.get(this.name).evaluate(e)},r.prototype.eachChild=function(){},r.prototype.possibleOutputs=function(){return[void 0]},t.exports=r},{}],138:[function(e,t,n){"use strict";var r=e("./scope"),i=e("./values"),o=i.Color,a=["Unknown","Point","LineString","Polygon"],s=function(){this.scope=new r,this._parseColorCache={}};s.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},s.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?a[this.feature.type]:this.feature.type:null},s.prototype.properties=function(){return this.feature&&this.feature.properties||{}},s.prototype.pushScope=function(e){this.scope=this.scope.concat(e)},s.prototype.popScope=function(){this.scope=this.scope.parent},s.prototype.parseColor=function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=o.parse(e)),t},t.exports=s},{"./scope":144,"./values":147}],139:[function(e,t,n){"use strict";function r(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in b}function i(e,t,n){void 0===n&&(n={});var r=new p(b,[],u(t)),i=r.parse(e);return i?S(!1===n.handleErrors?new A(i):new O(i,t)):T(r.errors)}function o(e,t,n){if(void 0===n&&(n={}),e=i(e,t,n),"error"===e.result)return e;var r=e.value.expression,o=x.isFeatureConstant(r);if(!o&&!t["property-function"])return T([new f("","property expressions not supported")]);var a=x.isGlobalPropertyConstant(r,["zoom"]);if(!a&&!1===t["zoom-function"])return T([new f("","zoom expressions not supported")]);var u=s(r);return u||a?u instanceof f?T([u]):u instanceof y&&"piecewise-constant"===t.function?T([new f("",'"interpolate" expressions cannot be used with this property')]):S(u?o?new C("camera",e.value,u):new C("composite",e.value,u):o?new P("constant",e.value):new P("source",e.value)):T([new f("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}function a(e,t){if(R(e))return new D(e,t);if(r(e)){var n=o(e,t);if("error"===n.result)throw new Error(n.value.map(function(e){return e.key+": "+e.message}).join(", "));return n.value}var i=e;return"string"==typeof e&&"color"===t.type&&(i=L.parse(e)),{kind:"constant",evaluate:function(){return i}}}function s(e){var t=null;if(e instanceof _)t=s(e.result);else if(e instanceof g)for(var n=0,r=e.args;n<r.length;n+=1){var i=r[n];if(t=s(i))break}else(e instanceof m||e instanceof y)&&e.input instanceof v&&"zoom"===e.input.name&&(t=e);return t instanceof f?t:(e.eachChild(function(e){var n=s(e);n instanceof f?t=n:!t&&n?t=new f("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&n&&t!==n&&(t=new f("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t)}function u(e){var t={color:F,string:j,number:B,enum:j,boolean:z};return"array"===e.type?V(t[e.value]||U,e.length):t[e.type]||null}function l(e){return"color"===e.type&&R(e.default)?new L(0,0,0,0):"color"===e.type?L.parse(e.default)||null:void 0===e.default?null:e.default}var c=e("../util/extend"),f=e("./parsing_error"),p=e("./parsing_context"),h=e("./evaluation_context"),d=e("./compound_expression"),v=d.CompoundExpression,m=e("./definitions/step"),y=e("./definitions/interpolate"),g=e("./definitions/coalesce"),_=e("./definitions/let"),b=e("./definitions"),x=e("./is_constant"),w=e("./runtime_error"),E=e("../util/result"),S=E.success,T=E.error,A=function(e){this.expression=e};A.prototype.evaluate=function(e,t){return this._evaluator||(this._evaluator=new h),this._evaluator.globals=e,this._evaluator.feature=t,this.expression.evaluate(this._evaluator)};var O=function(e){function t(t,n){e.call(this,t),this._warningHistory={},this._defaultValue=l(n),"enum"===n.type&&(this._enumValues=n.values)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.evaluate=function(e,t){this._evaluator||(this._evaluator=new h),this._evaluator.globals=e,this._evaluator.feature=t;try{var n=this.expression.evaluate(this._evaluator);if(null===n||void 0===n)return this._defaultValue;if(this._enumValues&&!(n in this._enumValues))throw new w("Expected value to be one of "+Object.keys(this._enumValues).map(function(e){return JSON.stringify(e)}).join(", ")+", but found "+JSON.stringify(n)+" instead.");return n}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}},t}(A),P=function(e,t){this.kind=e,this._styleExpression=t};P.prototype.evaluate=function(e,t){return this._styleExpression.evaluate(e,t)};var C=function(e,t,n){this.kind=e,this.zoomStops=n.labels,this._styleExpression=t,n instanceof y&&(this._interpolationType=n.interpolation)};C.prototype.evaluate=function(e,t){return this._styleExpression.evaluate(e,t)},C.prototype.interpolationFactor=function(e,t,n){return this._interpolationType?y.interpolationFactor(this._interpolationType,e,t,n):0};var k=e("../function"),R=k.isFunction,M=k.createFunction,I=e("./values"),L=I.Color,D=function(e,t){this._parameters=e,this._specification=t,c(this,M(this._parameters,this._specification))};D.deserialize=function(e){return new D(e._parameters,e._specification)},D.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}},t.exports={StyleExpression:A,StyleExpressionWithErrorHandling:O,isExpression:r,createExpression:i,createPropertyExpression:o,normalizePropertyExpression:a,ZoomConstantExpression:P,ZoomDependentExpression:C,StylePropertyFunction:D};var N=e("./types"),F=N.ColorType,j=N.StringType,B=N.NumberType,z=N.BooleanType,U=N.ValueType,V=N.array},{"../function":149,"../util/extend":156,"../util/result":160,"./compound_expression":123,"./definitions":131,"./definitions/coalesce":128,"./definitions/interpolate":132,"./definitions/let":133,"./definitions/step":136,"./evaluation_context":138,"./is_constant":140,"./parsing_context":141,"./parsing_error":142,"./runtime_error":143,"./types":146,"./values":147}],140:[function(e,t,n){"use strict";function r(e){if(e instanceof a){if("get"===e.name&&1===e.args.length)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}var t=!0;return e.eachChild(function(e){t&&!r(e)&&(t=!1)}),t}function i(e,t){if(e instanceof a&&t.indexOf(e.name)>=0)return!1;var n=!0;return e.eachChild(function(e){n&&!i(e,t)&&(n=!1)}),n}var o=e("./compound_expression"),a=o.CompoundExpression;t.exports={isFeatureConstant:r,isGlobalPropertyConstant:i}},{"./compound_expression":123}],141:[function(e,t,n){"use strict";function r(t){var n=e("./compound_expression"),r=n.CompoundExpression,i=e("./is_constant"),o=i.isGlobalPropertyConstant,a=i.isFeatureConstant;if(t instanceof e("./definitions/var"))return!1;if(t instanceof r&&"error"===t.name)return!1;var s=!0;return t.eachChild(function(e){e instanceof u||(s=!1)}),!!s&&a(t)&&o(t,["zoom","heatmap-density"])}var i=e("./scope"),o=e("./types"),a=o.checkSubtype,s=e("./parsing_error"),u=e("./definitions/literal"),l=e("./definitions/assertion"),c=e("./definitions/array"),f=e("./definitions/coercion"),p=function(e,t,n,r,o){void 0===t&&(t=[]),void 0===r&&(r=new i),void 0===o&&(o=[]),this.registry=e,this.path=t,this.key=t.map(function(e){return"["+e+"]"}).join(""),this.scope=r,this.errors=o,this.expectedType=n};p.prototype.parse=function(t,n,i,o,a){void 0===a&&(a={});var s=this;if(n&&(s=s.concat(n,i,o)),null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return s.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var p=t[0];if("string"!=typeof p)return s.error("Expression name must be a string, but found "+typeof p+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var h=s.registry[p];if(h){var d=h.parse(t,s);if(!d)return null;if(s.expectedType){var v=s.expectedType,m=d.type;if("string"!==v.kind&&"number"!==v.kind&&"boolean"!==v.kind||"value"!==m.kind)if("array"===v.kind&&"value"===m.kind)a.omitTypeAnnotations||(d=new c(v,d));else if("color"!==v.kind||"value"!==m.kind&&"string"!==m.kind){if(s.checkSubtype(s.expectedType,d.type))return null}else a.omitTypeAnnotations||(d=new f(v,[d]));else a.omitTypeAnnotations||(d=new l(v,[d]))}if(!(d instanceof u)&&r(d)){var y=new(e("./evaluation_context"));try{d=new u(d.type,d.evaluate(y))}catch(t){return s.error(t.message),null}}return d}return s.error('Unknown expression "'+p+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===t?s.error("'undefined' value invalid. Use null instead."):"object"==typeof t?s.error('Bare objects invalid. Use ["literal", {...}] instead.'):s.error("Expected an array, but found "+typeof t+" instead.")},p.prototype.concat=function(e,t,n){var r="number"==typeof e?this.path.concat(e):this.path,i=n?this.scope.concat(n):this.scope;return new p(this.registry,r,t||null,i,this.errors)},p.prototype.error=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];var r=""+this.key+t.map(function(e){return"["+e+"]"}).join("");this.errors.push(new s(r,e))},p.prototype.checkSubtype=function(e,t){var n=a(e,t);return n&&this.error(n),n},t.exports=p},{"./compound_expression":123,"./definitions/array":124,"./definitions/assertion":125,"./definitions/coercion":129,"./definitions/literal":134,"./definitions/var":137,"./evaluation_context":138,"./is_constant":140,"./parsing_error":142,"./scope":144,"./types":146}],142:[function(e,t,n){"use strict";var r=function(e){function t(t,n){e.call(this,n),this.message=n,this.key=t}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error);t.exports=r},{}],143:[function(e,t,n){"use strict";var r=function(e){this.name="ExpressionEvaluationError",this.message=e};r.prototype.toJSON=function(){return this.message},t.exports=r},{}],144:[function(e,t,n){"use strict";var r=function(e,t){var n=this;void 0===t&&(t=[]),this.parent=e,this.bindings={};for(var r=0,i=t;r<i.length;r+=1){var o=i[r],a=o[0],s=o[1];n.bindings[a]=s}};r.prototype.concat=function(e){return new r(this,e)},r.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},r.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)},t.exports=r},{}],145:[function(e,t,n){"use strict";function r(e,t){for(var n,r,o=e.length,a=0,s=o-1,u=0;a<=s;){if(u=Math.floor((a+s)/2),n=e[u],r=e[u+1],t===n||t>n&&t<r)return u;if(n<t)a=u+1;else{if(!(n>t))throw new i("Input is not a number.");s=u-1}}return Math.max(u-1,0)}var i=e("./runtime_error");t.exports={findStopLessThanOrEqualTo:r}},{"./runtime_error":143}],146:[function(e,t,n){"use strict";function r(e,t){return{kind:"array",itemType:e,N:t}}function i(e){if("array"===e.kind){var t=i(e.itemType);return"number"==typeof e.N?"array<"+t+", "+e.N+">":"value"===e.itemType.kind?"array":"array<"+t+">"}return e.kind}function o(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&!o(e.itemType,t.itemType)&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(var n=0,r=d;n<r.length;n+=1){var a=r[n];if(!o(a,t))return null}}return"Expected "+i(e)+" but found "+i(t)+" instead."}var a={kind:"null"},s={kind:"number"},u={kind:"string"},l={kind:"boolean"},c={kind:"color"},f={kind:"object"},p={kind:"value"},h={kind:"error"},d=[a,s,u,l,c,f,r(p)];t.exports={NullType:a,NumberType:s,StringType:u,BooleanType:l,ColorType:c,ObjectType:f,ValueType:p,array:r,ErrorType:h,toString:i,checkSubtype:o}},{}],147:[function(e,t,n){"use strict";function r(e,t,n,r){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value ["+[e,t,n,r].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof r?[e,t,n,r]:[e,t,n]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function i(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof a)return!0;if(Array.isArray(e)){for(var t=0,n=e;t<n.length;t+=1)if(!i(n[t]))return!1;return!0}if("object"==typeof e){for(var r in e)if(!i(e[r]))return!1;return!0}return!1}function o(e){if(null===e)return u;if("string"==typeof e)return c;if("boolean"==typeof e)return f;if("number"==typeof e)return l;if(e instanceof a)return p;if(Array.isArray(e)){for(var t,n=e.length,r=0,i=e;r<i.length;r+=1){var s=i[r],m=o(s);if(t){if(t===m)continue;t=d;break}t=m}return v(t||d,n)}return h}var a=e("../util/color"),s=e("./types"),u=s.NullType,l=s.NumberType,c=s.StringType,f=s.BooleanType,p=s.ColorType,h=s.ObjectType,d=s.ValueType,v=s.array;t.exports={Color:a,validateRGBA:r,isValue:i,typeOf:o}},{"../util/color":153,"./types":146}],148:[function(e,t,n){"use strict";function r(e){if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3===e.length&&(Array.isArray(e[1])||Array.isArray(e[2]));case"any":case"all":for(var t=0,n=e.slice(1);t<n.length;t+=1){var i=n[t];if(!r(i)&&"boolean"!=typeof i)return!1}return!0;default:return!0}}function i(e){if(!e)return function(){return!0};r(e)||(e=a(e));var t=h(e,d);if("error"===t.result)throw new Error(t.value.map(function(e){return e.key+": "+e.message}).join(", "));return function(e,n){return t.value.evaluate(e,n)}}function o(e,t){return e<t?-1:e>t?1:0}function a(e){if(!e)return!0;var t=e[0];return e.length<=1?"any"!==t:"=="===t?s(e[1],e[2],"=="):"!="===t?f(s(e[1],e[2],"==")):"<"===t||">"===t||"<="===t||">="===t?s(e[1],e[2],t):"any"===t?u(e.slice(1)):"all"===t?["all"].concat(e.slice(1).map(a)):"none"===t?["all"].concat(e.slice(1).map(a).map(f)):"in"===t?l(e[1],e.slice(2)):"!in"===t?f(l(e[1],e.slice(2))):"has"===t?c(e[1]):"!has"!==t||f(c(e[1]))}function s(e,t,n){switch(e){case"$type":return["filter-type-"+n,t];case"$id":return["filter-id-"+n,t];default:return["filter-"+n,e,t]}}function u(e){return["any"].concat(e.map(a))}function l(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(function(e){return typeof e!=typeof t[0]})?["filter-in-large",e,["literal",t.sort(o)]]:["filter-in-small",e,["literal",t]]}}function c(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function f(e){return["!",e]}var p=e("../expression"),h=p.createExpression;t.exports=i,t.exports.isExpressionFilter=r;var d={type:"boolean",default:!1,function:!0,"property-function":!0,"zoom-function":!0}},{"../expression":139}],149:[function(e,t,n){"use strict";function r(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function i(e){return e}function o(e,t){var n="color"===t.type,r=e.stops&&"object"==typeof e.stops[0][0],i=r||void 0!==e.property,f=r||!i,p=e.type||("interpolated"===t.function?"exponential":"interval");if(n&&(e=v({},e),e.stops&&(e.stops=e.stops.map(function(e){return[e[0],d.parse(e[1])]})),e.default?e.default=d.parse(e.default):e.default=d.parse(t.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!h[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);var m,y,_;if("exponential"===p)m=l;else if("interval"===p)m=u;else if("categorical"===p){m=s,y=Object.create(null);for(var b=0,x=e.stops;b<x.length;b+=1){var w=x[b];y[w[0]]=w[1]}_=typeof e.stops[0][0]}else{if("identity"!==p)throw new Error('Unknown function type "'+p+'"');m=c}if(r){for(var E={},S=[],T=0;T<e.stops.length;T++){var A=e.stops[T],O=A[0].zoom;void 0===E[O]&&(E[O]={zoom:O,type:e.type,property:e.property,default:e.default,stops:[]},S.push(O)),E[O].stops.push([A[0].value,A[1]])}for(var P=[],C=0,k=S;C<k.length;C+=1){var R=k[C];P.push([E[R].zoom,o(E[R],t)])}return{kind:"composite",interpolationFactor:g.interpolationFactor.bind(void 0,{name:"linear"}),zoomStops:P.map(function(e){return e[0]}),evaluate:function(n,r){var i=n.zoom;return l({stops:P,base:e.base},t,i).evaluate(i,r)}}}return f?{kind:"camera",interpolationFactor:"exponential"===p?g.interpolationFactor.bind(void 0,{name:"exponential",base:void 0!==e.base?e.base:1}):function(){return 0},zoomStops:e.stops.map(function(e){return e[0]}),evaluate:function(n){var r=n.zoom;return m(e,t,r,y,_)}}:{kind:"source",evaluate:function(n,r){var i=r&&r.properties?r.properties[e.property]:void 0;return void 0===i?a(e.default,t.default):m(e,t,i,y,_)}}}function a(e,t,n){return void 0!==e?e:void 0!==t?t:void 0!==n?n:void 0}function s(e,t,n,r,i){return a(typeof n===i?r[n]:void 0,e.default,t.default)}function u(e,t,n){if("number"!==m(n))return a(e.default,t.default);var r=e.stops.length;if(1===r)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[r-1][0])return e.stops[r-1][1];var i=f(e.stops,n);return e.stops[i][1]}function l(e,t,n){var r=void 0!==e.base?e.base:1;if("number"!==m(n))return a(e.default,t.default);var o=e.stops.length;if(1===o)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[o-1][0])return e.stops[o-1][1];var s=f(e.stops,n),u=p(n,r,e.stops[s][0],e.stops[s+1][0]),l=e.stops[s][1],c=e.stops[s+1][1],d=y[t.type]||i;if(e.colorSpace&&"rgb"!==e.colorSpace){var v=h[e.colorSpace];d=function(e,t){return v.reverse(v.interpolate(v.forward(e),v.forward(t),u))}}return"function"==typeof l.evaluate?{evaluate:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=l.evaluate.apply(void 0,e),r=c.evaluate.apply(void 0,e);if(void 0!==n&&void 0!==r)return d(n,r,u)}}:d(l,c,u)}function c(e,t,n){return"color"===t.type?n=d.parse(n):m(n)===t.type||"enum"===t.type&&t.values[n]||(n=void 0),a(n,e.default,t.default)}function f(e,t){for(var n,r,i=e.length,o=0,a=i-1,s=0;o<=a;){if(s=Math.floor((o+a)/2),n=e[s][0],r=e[s+1][0],t===n||t>n&&t<r)return s;n<t?o=s+1:n>t&&(a=s-1)}return Math.max(s-1,0)}function p(e,t,n,r){var i=r-n,o=e-n;return 0===i?0:1===t?o/i:(Math.pow(t,o)-1)/(Math.pow(t,i)-1)}var h=e("../util/color_spaces"),d=e("../util/color"),v=e("../util/extend"),m=e("../util/get_type"),y=e("../util/interpolate"),g=e("../expression/definitions/interpolate");t.exports={createFunction:o,isFunction:r}},{"../expression/definitions/interpolate":132,"../util/color":153,"../util/color_spaces":154,"../util/extend":156,"../util/get_type":157,"../util/interpolate":158}],150:[function(e,t,n){"use strict";function r(e){var t=typeof e;if("number"===t||"boolean"===t||"string"===t||void 0===e||null===e)return JSON.stringify(e);if(Array.isArray(e)){for(var n="[",i=0,o=e;i<o.length;i+=1)n+=r(o[i])+",";return n+"]"}for(var a=Object.keys(e).sort(),s="{",u=0;u<a.length;u++)s+=JSON.stringify(a[u])+":"+r(e[a[u]])+",";return s+"}"}function i(e){for(var t="",n=0,i=a;n<i.length;n+=1)t+="/"+r(e[i[n]]);return t}function o(e){for(var t={},n=0;n<e.length;n++){var r=i(e[n]),o=t[r];o||(o=t[r]=[]),o.push(e[n])}var a=[];for(var s in t)a.push(t[s]);return a}var a=e("./util/ref_properties");t.exports=o},{"./util/ref_properties":159}],151:[function(e,t,n){"use strict";t.exports=e("./v8.json")},{"./v8.json":152}],152:[function(e,t,n){t.exports={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image","source_canvas"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_canvas:{type:{required:!0,type:"enum",values:{canvas:{}}},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}},animate:{type:"boolean",default:"true"},canvas:{type:"string",required:!0}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_fill:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_circle:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_line:{"line-cap":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{butt:{},round:{},square:{}},default:"butt"},"line-join":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{bevel:{},round:{},miter:{}},default:"miter"},"line-miter-limit":{type:"number",default:2,function:"interpolated","zoom-function":!0,requires:[{"line-join":"miter"}]},"line-round-limit":{type:"number",default:1.05,function:"interpolated","zoom-function":!0,requires:[{"line-join":"round"}]},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_symbol:{"symbol-placement":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{point:{},line:{}},default:"point"},"symbol-spacing":{type:"number",default:250,minimum:1,function:"interpolated","zoom-function":!0,units:"pixels",requires:[{"symbol-placement":"line"}]},"symbol-avoid-edges":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1},"icon-allow-overlap":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image"]},"icon-ignore-placement":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image"]},"icon-optional":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image","text-field"]},"icon-rotation-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"]},"icon-size":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,units:"factor of the original icon size",requires:["icon-image"]},"icon-text-fit":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"]},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",function:"interpolated","zoom-function":!0,requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}]},"icon-image":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,tokens:!0},"icon-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,"property-function":!0,units:"degrees",requires:["icon-image"]},"icon-padding":{type:"number",default:2,minimum:0,function:"interpolated","zoom-function":!0,units:"pixels",requires:["icon-image"]},"icon-keep-upright":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":"line"}]},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,"property-function":!0,requires:["icon-image"]},"icon-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"]},"icon-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"]},"text-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"]},"text-rotation-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"]},"text-field":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:"",tokens:!0},"text-font":{type:"array",value:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"]},"text-size":{type:"number",default:16,minimum:0,units:"pixels",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-line-height":{type:"number",default:1.2,units:"ems",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-letter-spacing":{type:"number",default:0,units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-justify":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{left:{},center:{},right:{}},default:"center",requires:["text-field"]},"text-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field"]},"text-max-angle":{type:"number",default:45,units:"degrees",function:"interpolated","zoom-function":!0,requires:["text-field",{"symbol-placement":"line"}]},"text-rotate":{type:"number",default:0,period:360,units:"degrees",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-keep-upright":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":"line"}]},"text-transform":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"]},"text-offset":{type:"array",value:"number",units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,length:2,default:[0,0],requires:["text-field"]},"text-allow-overlap":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field"]},"text-ignore-placement":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field"]},"text-optional":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field","icon-image"]},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},transition:!1,"zoom-function":!0,"property-function":!1,function:"piecewise-constant"},position:{type:"array",default:[1.15,210,30],length:3,value:"number",transition:!0,function:"interpolated","zoom-function":!0,"property-function":!1},color:{type:"color",default:"#ffffff",function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0},intensity:{type:"number",default:.5,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!0},"fill-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:1,minimum:0,maximum:1,transition:!0},"fill-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"}]},"fill-outline-color":{type:"color",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}]},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"fill-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["fill-translate"]},"fill-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!1,default:1,minimum:0,maximum:1,transition:!0},"fill-extrusion-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-extrusion-pattern"}]},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"fill-extrusion-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"]},"fill-extrusion-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0},"fill-extrusion-height":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:0,minimum:0,units:"meters",transition:!0},"fill-extrusion-base":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"]}},paint_line:{"line-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:1,minimum:0,maximum:1,transition:!0},"line-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"line-pattern"}]},"line-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"line-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["line-translate"]},"line-width":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-gap-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-offset":{type:"number",default:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-dasharray":{type:"array",value:"number",function:"piecewise-constant","zoom-function":!0,minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}]},"line-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-blur":{type:"number",default:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"circle-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["circle-translate"]},"circle-pitch-scale":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map"},"circle-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"viewport"},"circle-stroke-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-stroke-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"heatmap-weight":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!1},"heatmap-intensity":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],function:"interpolated","zoom-function":!1,"property-function":!1,transition:!1},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-halo-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"]},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-halo-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"]}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-hue-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,transition:!0,units:"degrees"},"raster-brightness-min":{type:"number",function:"interpolated","zoom-function":!0,default:0,minimum:0,maximum:1,transition:!0},"raster-brightness-max":{type:"number",function:"interpolated","zoom-function":!0,default:1,minimum:0,maximum:1,transition:!0},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-fade-duration":{type:"number",default:300,minimum:0,function:"interpolated","zoom-function":!0,transition:!1,units:"milliseconds"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,function:"interpolated","zoom-function":!0,transition:!1},"hillshade-illumination-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"viewport"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"hillshade-shadow-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",function:"interpolated","zoom-function":!0,transition:!0},"hillshade-accent-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0}},paint_background:{"background-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0,requires:[{"!":"background-pattern"}]},"background-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}}}},{}],153:[function(e,t,n){"use strict";var r=e("csscolorparser"),i=r.parseCSSColor,o=function(e,t,n,r){void 0===r&&(r=1),this.r=e,this.g=t,this.b=n,this.a=r};o.parse=function(e){if(e){if(e instanceof o)return e;if("string"==typeof e){var t=i(e);if(t)return new o(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}}},o.prototype.toString=function(){var e=this,t=function(t){return Math.round(255*t/e.a)};return"rgba("+[this.r,this.g,this.b].map(t).concat(this.a).join(",")+")"},o.black=new o(0,0,0,1),o.white=new o(1,1,1,1),o.transparent=new o(0,0,0,0),t.exports=o},{csscolorparser:13}],154:[function(e,t,n){"use strict";function r(e){return e>w?Math.pow(e,1/3):e/x+_}function i(e){return e>b?e*e*e:x*(e-_)}function o(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function a(e){return e/=255,e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function s(e){var t=a(e.r),n=a(e.g),i=a(e.b),o=r((.4124564*t+.3575761*n+.1804375*i)/m),s=r((.2126729*t+.7151522*n+.072175*i)/y);return{l:116*s-16,a:500*(o-s),b:200*(s-r((.0193339*t+.119192*n+.9503041*i)/g)),alpha:e.a}}function u(e){var t=(e.l+16)/116,n=isNaN(e.a)?t:t+e.a/500,r=isNaN(e.b)?t:t-e.b/200;return t=y*i(t),n=m*i(n),r=g*i(r),new d(o(3.2404542*n-1.5371385*t-.4985314*r),o(-.969266*n+1.8760108*t+.041556*r),o(.0556434*n-.2040259*t+1.0572252*r),e.alpha)}function l(e,t,n){return{l:v(e.l,t.l,n),a:v(e.a,t.a,n),b:v(e.b,t.b,n),alpha:v(e.alpha,t.alpha,n)}}function c(e){var t=s(e),n=t.l,r=t.a,i=t.b,o=Math.atan2(i,r)*S;return{h:o<0?o+360:o,c:Math.sqrt(r*r+i*i),l:n,alpha:e.a}}function f(e){var t=e.h*E,n=e.c;return u({l:e.l,a:Math.cos(t)*n,b:Math.sin(t)*n,alpha:e.alpha})}function p(e,t,n){var r=t-e;return e+n*(r>180||r<-180?r-360*Math.round(r/360):r)}function h(e,t,n){return{h:p(e.h,t.h,n),c:v(e.c,t.c,n),l:v(e.l,t.l,n),alpha:v(e.alpha,t.alpha,n)}}var d=e("./color"),v=e("./interpolate").number,m=.95047,y=1,g=1.08883,_=4/29,b=6/29,x=3*b*b,w=b*b*b,E=Math.PI/180,S=180/Math.PI;t.exports={lab:{forward:s,reverse:u,interpolate:l},hcl:{forward:c,reverse:f,interpolate:h}}},{"./color":153,"./interpolate":158}],155:[function(e,t,n){"use strict";function r(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!r(e[n],t[n]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==t){if("object"!=typeof t)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var i in e)if(!r(e[i],t[i]))return!1;return!0}return e===t}t.exports=r},{}],156:[function(e,t,n){"use strict";t.exports=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];for(var r=0,i=t;r<i.length;r+=1){var o=i[r];for(var a in o)e[a]=o[a]}return e}},{}],157:[function(e,t,n){"use strict";t.exports=function(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}},{}],158:[function(e,t,n){"use strict";function r(e,t,n){return e*(1-n)+t*n}function i(e,t,n){return new a(r(e.r,t.r,n),r(e.g,t.g,n),r(e.b,t.b,n),r(e.a,t.a,n))}function o(e,t,n){return e.map(function(e,i){return r(e,t[i],n)})}var a=e("./color");t.exports={number:r,color:i,array:o}},{"./color":153}],159:[function(e,t,n){"use strict";t.exports=["type","source","source-layer","minzoom","maxzoom","filter","layout"]},{}],160:[function(e,t,n){"use strict";function r(e){return{result:"success",value:e}}function i(e){return{result:"error",value:e}}t.exports={success:r,error:i}},{}],161:[function(e,t,n){"use strict";function r(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function i(e){return Array.isArray(e)?e.map(i):r(e)}t.exports=r,t.exports.deep=i},{}],162:[function(e,t,n){"use strict";var r=e("../util/extend"),i=e("../util/unbundle_jsonlint"),o=e("../expression"),a=o.isExpression,s=e("../function"),u=s.isFunction;t.exports=function(t){var n=e("./validate_function"),o=e("./validate_expression"),s=e("./validate_object"),l={"*":function(){return[]},array:e("./validate_array"),boolean:e("./validate_boolean"),number:e("./validate_number"),color:e("./validate_color"),constants:e("./validate_constants"),enum:e("./validate_enum"),filter:e("./validate_filter"),function:e("./validate_function"),layer:e("./validate_layer"),object:e("./validate_object"),source:e("./validate_source"),light:e("./validate_light"),string:e("./validate_string")},c=t.value,f=t.valueSpec,p=t.styleSpec;return f.function&&u(i(c))?n(t):f.function&&a(i.deep(c))?o(t):f.type&&l[f.type]?l[f.type](t):s(r({},t,{valueSpec:f.type?p[f.type]:f}))}},{"../expression":139,"../function":149,"../util/extend":156,"../util/unbundle_jsonlint":161,"./validate_array":163,"./validate_boolean":164,"./validate_color":165,"./validate_constants":166,"./validate_enum":167,"./validate_expression":168,"./validate_filter":169,"./validate_function":170,"./validate_layer":172,"./validate_light":174,"./validate_number":175,"./validate_object":176,"./validate_source":179,"./validate_string":180}],163:[function(e,t,n){"use strict";var r=e("../util/get_type"),i=e("./validate"),o=e("../error/validation_error");t.exports=function(e){var t=e.value,n=e.valueSpec,a=e.style,s=e.styleSpec,u=e.key,l=e.arrayElementValidator||i;if("array"!==r(t))return[new o(u,t,"array expected, "+r(t)+" found")];if(n.length&&t.length!==n.length)return[new o(u,t,"array length "+n.length+" expected, length "+t.length+" found")];if(n["min-length"]&&t.length<n["min-length"])return[new o(u,t,"array length at least "+n["min-length"]+" expected, length "+t.length+" found")];var c={type:n.value};s.$version<7&&(c.function=n.function),"object"===r(n.value)&&(c=n.value);for(var f=[],p=0;p<t.length;p++)f=f.concat(l({array:t,arrayIndex:p,value:t[p],valueSpec:c,style:a,styleSpec:s,key:u+"["+p+"]"}));return f}},{"../error/validation_error":122,"../util/get_type":157,"./validate":162}],164:[function(e,t,n){"use strict";var r=e("../util/get_type"),i=e("../error/validation_error");t.exports=function(e){var t=e.value,n=e.key,o=r(t);return"boolean"!==o?[new i(n,t,"boolean expected, "+o+" found")]:[]}},{"../error/validation_error":122,"../util/get_type":157}],165:[function(e,t,n){"use strict";var r=e("../error/validation_error"),i=e("../util/get_type"),o=e("csscolorparser").parseCSSColor;t.exports=function(e){var t=e.key,n=e.value,a=i(n);return"string"!==a?[new r(t,n,"color expected, "+a+" found")]:null===o(n)?[new r(t,n,'color expected, "'+n+'" found')]:[]}},{"../error/validation_error":122,"../util/get_type":157,csscolorparser:13}],166:[function(e,t,n){"use strict";var r=e("../error/validation_error");t.exports=function(e){var t=e.key,n=e.value;return n?[new r(t,n,"constants have been deprecated as of v8")]:[]}},{"../error/validation_error":122}],167:[function(e,t,n){"use strict";var r=e("../error/validation_error"),i=e("../util/unbundle_jsonlint");t.exports=function(e){var t=e.key,n=e.value,o=e.valueSpec,a=[];return Array.isArray(o.values)?-1===o.values.indexOf(i(n))&&a.push(new r(t,n,"expected one of ["+o.values.join(", ")+"], "+JSON.stringify(n)+" found")):-1===Object.keys(o.values).indexOf(i(n))&&a.push(new r(t,n,"expected one of ["+Object.keys(o.values).join(", ")+"], "+JSON.stringify(n)+" found")),a}},{"../error/validation_error":122,"../util/unbundle_jsonlint":161}],168:[function(e,t,n){"use strict";var r=e("../error/validation_error"),i=e("../expression"),o=i.createExpression,a=i.createPropertyExpression,s=e("../util/unbundle_jsonlint");t.exports=function(e){var t=("property"===e.expressionContext?a:o)(s.deep(e.value),e.valueSpec);return"error"===t.result?t.value.map(function(t){return new r(""+e.key+t.key,e.value,t.message)}):"property"===e.expressionContext&&"text-font"===e.propertyKey&&-1!==t.value._styleExpression.expression.possibleOutputs().indexOf(void 0)?[new r(e.key,e.value,'Invalid data expression for "text-font". Output values must be contained as literals within the expression.')]:[]}},{"../error/validation_error":122,"../expression":139,"../util/unbundle_jsonlint":161}],169:[function(e,t,n){"use strict";function r(e){var t=e.value,n=e.key;if("array"!==s(t))return[new i(n,t,"array expected, "+s(t)+" found")];var o,l=e.styleSpec,c=[];if(t.length<1)return[new i(n,t,"filter array must have at least 1 element")];switch(c=c.concat(a({key:n+"[0]",value:t[0],valueSpec:l.filter_operator,style:e.style,styleSpec:e.styleSpec})),u(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===u(t[1])&&c.push(new i(n,t,'"$type" cannot be use with operator "'+t[0]+'"'));case"==":case"!=":3!==t.length&&c.push(new i(n,t,'filter array for operator "'+t[0]+'" must have 3 elements'));case"in":case"!in":t.length>=2&&"string"!==(o=s(t[1]))&&c.push(new i(n+"[1]",t[1],"string expected, "+o+" found"));for(var f=2;f<t.length;f++)o=s(t[f]),"$type"===u(t[1])?c=c.concat(a({key:n+"["+f+"]",value:t[f],valueSpec:l.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==o&&"number"!==o&&"boolean"!==o&&c.push(new i(n+"["+f+"]",t[f],"string, number, or boolean expected, "+o+" found"));break;case"any":case"all":case"none":for(var p=1;p<t.length;p++)c=c.concat(r({key:n+"["+p+"]",value:t[p],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":o=s(t[1]),2!==t.length?c.push(new i(n,t,'filter array for "'+t[0]+'" operator must have 2 elements')):"string"!==o&&c.push(new i(n+"[1]",t[1],"string expected, "+o+" found"))}return c}var i=e("../error/validation_error"),o=e("./validate_expression"),a=e("./validate_enum"),s=e("../util/get_type"),u=e("../util/unbundle_jsonlint"),l=e("../util/extend"),c=e("../feature_filter"),f=c.isExpressionFilter;t.exports=function(e){return f(u.deep(e.value))?o(l({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):r(e)}},{"../error/validation_error":122,"../feature_filter":148,"../util/extend":156,"../util/get_type":157,"../util/unbundle_jsonlint":161,"./validate_enum":167,"./validate_expression":168}],170:[function(e,t,n){"use strict";var r=e("../error/validation_error"),i=e("../util/get_type"),o=e("./validate"),a=e("./validate_object"),s=e("./validate_array"),u=e("./validate_number"),l=e("../util/unbundle_jsonlint");t.exports=function(e){function t(e){if("identity"===m)return[new r(e.key,e.value,'identity function may not have a "stops" property')];var t=[],o=e.value;return t=t.concat(s({key:e.key,value:o,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:n})),"array"===i(o)&&0===o.length&&t.push(new r(e.key,o,"array must have at least one stop")),t}function n(e){var t=[],n=e.value,s=e.key;if("array"!==i(n))return[new r(s,n,"array expected, "+i(n)+" found")];if(2!==n.length)return[new r(s,n,"array length 2 expected, length "+n.length+" found")];if(b){if("object"!==i(n[0]))return[new r(s,n,"object expected, "+i(n[0])+" found")];if(void 0===n[0].zoom)return[new r(s,n,"object stop key must have zoom")];if(void 0===n[0].value)return[new r(s,n,"object stop key must have value")];if(d&&d>l(n[0].zoom))return[new r(s,n[0].zoom,"stop zoom values must appear in ascending order")];l(n[0].zoom)!==d&&(d=l(n[0].zoom),h=void 0,y={}),t=t.concat(a({key:s+"[0]",value:n[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:u,value:c}}))}else t=t.concat(c({key:s+"[0]",value:n[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},n));return t.concat(o({key:s+"[1]",value:n[1],valueSpec:v,style:e.style,styleSpec:e.styleSpec}))}function c(e,t){var n=i(e.value),o=l(e.value),a=null!==e.value?e.value:t;if(p){if(n!==p)return[new r(e.key,a,n+" stop domain type must match previous stop domain type "+p)]}else p=n;if("number"!==n&&"string"!==n&&"boolean"!==n)return[new r(e.key,a,"stop domain value must be a number, string, or boolean")];if("number"!==n&&"categorical"!==m){var s="number expected, "+n+" found";return v["property-function"]&&void 0===m&&(s+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new r(e.key,a,s)]}return"categorical"!==m||"number"!==n||isFinite(o)&&Math.floor(o)===o?"categorical"!==m&&"number"===n&&void 0!==h&&o<h?[new r(e.key,a,"stop domain values must appear in ascending order")]:(h=o,"categorical"===m&&o in y?[new r(e.key,a,"stop domain values must be unique")]:(y[o]=!0,[])):[new r(e.key,a,"integer expected, found "+o)]}function f(e){return o({key:e.key,value:e.value,valueSpec:v,style:e.style,styleSpec:e.styleSpec})}var p,h,d,v=e.valueSpec,m=l(e.value.type),y={},g="categorical"!==m&&void 0===e.value.property,_=!g,b="array"===i(e.value.stops)&&"array"===i(e.value.stops[0])&&"object"===i(e.value.stops[0][0]),x=a({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:t,default:f}});return"identity"===m&&g&&x.push(new r(e.key,e.value,'missing required property "property"')),"identity"===m||e.value.stops||x.push(new r(e.key,e.value,'missing required property "stops"')),"exponential"===m&&"piecewise-constant"===e.valueSpec.function&&x.push(new r(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(_&&!e.valueSpec["property-function"]?x.push(new r(e.key,e.value,"property functions not supported")):g&&!e.valueSpec["zoom-function"]&&"heatmap-color"!==e.objectKey&&x.push(new r(e.key,e.value,"zoom functions not supported"))),"categorical"!==m&&!b||void 0!==e.value.property||x.push(new r(e.key,e.value,'"property" property is required')),x}},{"../error/validation_error":122,"../util/get_type":157,"../util/unbundle_jsonlint":161,"./validate":162,"./validate_array":163,"./validate_number":175,"./validate_object":176}],171:[function(e,t,n){"use strict";var r=e("../error/validation_error"),i=e("./validate_string");t.exports=function(e){var t=e.value,n=e.key,o=i(e);return o.length?o:(-1===t.indexOf("{fontstack}")&&o.push(new r(n,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&o.push(new r(n,t,'"glyphs" url must include a "{range}" token')),o)}},{"../error/validation_error":122,"./validate_string":180}],172:[function(e,t,n){"use strict";var r=e("../error/validation_error"),i=e("../util/unbundle_jsonlint"),o=e("./validate_object"),a=e("./validate_filter"),s=e("./validate_paint_property"),u=e("./validate_layout_property"),l=e("./validate"),c=e("../util/extend");t.exports=function(e){var t=[],n=e.value,f=e.key,p=e.style,h=e.styleSpec;n.type||n.ref||t.push(new r(f,n,'either "type" or "ref" is required'));var d=i(n.type),v=i(n.ref);if(n.id)for(var m=i(n.id),y=0;y<e.arrayIndex;y++){var g=p.layers[y];i(g.id)===m&&t.push(new r(f,n.id,'duplicate layer id "'+n.id+'", previously used at line '+g.id.__line__))}if("ref"in n){["type","source","source-layer","filter","layout"].forEach(function(e){e in n&&t.push(new r(f,n[e],'"'+e+'" is prohibited for ref layers'))});var _;p.layers.forEach(function(e){i(e.id)===v&&(_=e)}),_?_.ref?t.push(new r(f,n.ref,"ref cannot reference another ref layer")):d=i(_.type):t.push(new r(f,n.ref,'ref layer "'+v+'" not found'))}else if("background"!==d)if(n.source){var b=p.sources&&p.sources[n.source],x=b&&i(b.type);b?"vector"===x&&"raster"===d?t.push(new r(f,n.source,'layer "'+n.id+'" requires a raster source')):"raster"===x&&"raster"!==d?t.push(new r(f,n.source,'layer "'+n.id+'" requires a vector source')):"vector"!==x||n["source-layer"]?"raster-dem"===x&&"hillshade"!==d&&t.push(new r(f,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):t.push(new r(f,n,'layer "'+n.id+'" must specify a "source-layer"')):t.push(new r(f,n.source,'source "'+n.source+'" not found'))}else t.push(new r(f,n,'missing required property "source"'));return t=t.concat(o({key:f,value:n,valueSpec:h.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return l({key:f+".type",value:n.type,valueSpec:h.layer.type,style:e.style,styleSpec:e.styleSpec,object:n,objectKey:"type"})},filter:a,layout:function(e){return o({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return u(c({layerType:d},e))}}})},paint:function(e){return o({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return s(c({layerType:d},e))}}})}}}))}},{"../error/validation_error":122,"../util/extend":156,"../util/unbundle_jsonlint":161,"./validate":162,"./validate_filter":169,"./validate_layout_property":173,"./validate_object":176,"./validate_paint_property":177}],173:[function(e,t,n){"use strict";var r=e("./validate_property");t.exports=function(e){return r(e,"layout")}},{"./validate_property":178}],174:[function(e,t,n){"use strict";var r=e("../error/validation_error"),i=e("../util/get_type"),o=e("./validate");t.exports=function(e){var t=e.value,n=e.styleSpec,a=n.light,s=e.style,u=[],l=i(t);if(void 0===t)return u;if("object"!==l)return u=u.concat([new r("light",t,"object expected, "+l+" found")]);for(var c in t){var f=c.match(/^(.*)-transition$/);u=f&&a[f[1]]&&a[f[1]].transition?u.concat(o({key:c,value:t[c],valueSpec:n.transition,style:s,styleSpec:n})):a[c]?u.concat(o({key:c,value:t[c],valueSpec:a[c],style:s,styleSpec:n})):u.concat([new r(c,t[c],'unknown property "'+c+'"')])}return u}},{"../error/validation_error":122,"../util/get_type":157,"./validate":162}],175:[function(e,t,n){"use strict";var r=e("../util/get_type"),i=e("../error/validation_error");t.exports=function(e){var t=e.key,n=e.value,o=e.valueSpec,a=r(n);return"number"!==a?[new i(t,n,"number expected, "+a+" found")]:"minimum"in o&&n<o.minimum?[new i(t,n,n+" is less than the minimum value "+o.minimum)]:"maximum"in o&&n>o.maximum?[new i(t,n,n+" is greater than the maximum value "+o.maximum)]:[]}},{"../error/validation_error":122,"../util/get_type":157}],176:[function(e,t,n){"use strict";var r=e("../error/validation_error"),i=e("../util/get_type"),o=e("./validate");t.exports=function(e){var t=e.key,n=e.value,a=e.valueSpec||{},s=e.objectElementValidators||{},u=e.style,l=e.styleSpec,c=[],f=i(n);if("object"!==f)return[new r(t,n,"object expected, "+f+" found")];for(var p in n){var h=p.split(".")[0],d=a[h]||a["*"],v=void 0;if(s[h])v=s[h];else if(a[h])v=o;else if(s["*"])v=s["*"];else{if(!a["*"]){c.push(new r(t,n[p],'unknown property "'+p+'"'));continue}v=o}c=c.concat(v({key:(t?t+".":t)+p,value:n[p],valueSpec:d,style:u,styleSpec:l,object:n,objectKey:p},n))}for(var m in a)s[m]||a[m].required&&void 0===a[m].default&&void 0===n[m]&&c.push(new r(t,n,'missing required property "'+m+'"'));return c}},{"../error/validation_error":122,"../util/get_type":157,"./validate":162}],177:[function(e,t,n){"use strict";var r=e("./validate_property");t.exports=function(e){return r(e,"paint")}},{"./validate_property":178}],178:[function(e,t,n){"use strict";var r=e("./validate"),i=e("../error/validation_error"),o=e("../util/get_type"),a=e("../function"),s=a.isFunction,u=e("../util/unbundle_jsonlint");t.exports=function(e,t){var n=e.key,a=e.style,l=e.styleSpec,c=e.value,f=e.objectKey,p=l[t+"_"+e.layerType];if(!p)return[];var h=f.match(/^(.*)-transition$/);if("paint"===t&&h&&p[h[1]]&&p[h[1]].transition)return r({key:n,value:c,valueSpec:l.transition,style:a,styleSpec:l});var d=e.valueSpec||p[f];if(!d)return[new i(n,c,'unknown property "'+f+'"')];var v;if("string"===o(c)&&d["property-function"]&&!d.tokens&&(v=/^{([^}]+)}$/.exec(c)))return[new i(n,c,'"'+f+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(v[1])+" }`.")];var m=[];return"symbol"===e.layerType&&("text-field"===f&&a&&!a.glyphs&&m.push(new i(n,c,'use of "text-field" requires a style "glyphs" property')),"text-font"===f&&s(u.deep(c))&&"identity"===u(c.type)&&m.push(new i(n,c,'"text-font" does not support identity functions'))),m.concat(r({key:e.key,value:c,valueSpec:d,style:a,styleSpec:l,expressionContext:"property",propertyKey:f}))}},{"../error/validation_error":122,"../function":149,"../util/get_type":157,"../util/unbundle_jsonlint":161,"./validate":162}],179:[function(e,t,n){"use strict";var r=e("../error/validation_error"),i=e("../util/unbundle_jsonlint"),o=e("./validate_object"),a=e("./validate_enum");t.exports=function(e){var t=e.value,n=e.key,s=e.styleSpec,u=e.style;if(!t.type)return[new r(n,t,'"type" is required')];var l=i(t.type),c=[];switch(l){case"vector":case"raster":case"raster-dem":if(c=c.concat(o({key:n,value:t,valueSpec:s["source_"+l.replace("-","_")],style:e.style,styleSpec:s})),"url"in t)for(var f in t)["type","url","tileSize"].indexOf(f)<0&&c.push(new r(n+"."+f,t[f],'a source with a "url" property may not include a "'+f+'" property'));return c;case"geojson":return o({key:n,value:t,valueSpec:s.source_geojson,style:u,styleSpec:s});case"video":return o({key:n,value:t,valueSpec:s.source_video,style:u,styleSpec:s});case"image":return o({key:n,value:t,valueSpec:s.source_image,style:u,styleSpec:s});case"canvas":return o({key:n,value:t,valueSpec:s.source_canvas,style:u,styleSpec:s});default:return a({key:n+".type",value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image","canvas"]},style:u,styleSpec:s})}}},{"../error/validation_error":122,"../util/unbundle_jsonlint":161,"./validate_enum":167,"./validate_object":176}],180:[function(e,t,n){"use strict";var r=e("../util/get_type"),i=e("../error/validation_error");t.exports=function(e){var t=e.value,n=e.key,o=r(t);return"string"!==o?[new i(n,t,"string expected, "+o+" found")]:[]}},{"../error/validation_error":122,"../util/get_type":157}],181:[function(e,t,n){"use strict";function r(e,t){t=t||u;var n=[];return n=n.concat(s({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:l,"*":function(){return[]}}})),e.constants&&(n=n.concat(a({key:"constants",value:e.constants,style:e,styleSpec:t}))),i(n)}function i(e){return[].concat(e).sort(function(e,t){return e.line-t.line})}function o(e){return function(){return i(e.apply(this,arguments))}}var a=e("./validate/validate_constants"),s=e("./validate/validate"),u=e("./reference/latest"),l=e("./validate/validate_glyphs_url");r.source=o(e("./validate/validate_source")),r.light=o(e("./validate/validate_light")),r.layer=o(e("./validate/validate_layer")),r.filter=o(e("./validate/validate_filter")),r.paintProperty=o(e("./validate/validate_paint_property")),r.layoutProperty=o(e("./validate/validate_layout_property")),t.exports=r},{"./reference/latest":151,"./validate/validate":162,"./validate/validate_constants":166,"./validate/validate_filter":169,"./validate/validate_glyphs_url":171,"./validate/validate_layer":172,"./validate/validate_layout_property":173,"./validate/validate_light":174,"./validate/validate_paint_property":177,"./validate/validate_source":179}],182:[function(e,t,n){"use strict";var r=e("./zoom_history"),i=function(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new r,this.transition={})};i.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},t.exports=i},{"./zoom_history":212}],183:[function(e,t,n){"use strict";var r=e("../style-spec/reference/latest"),i=e("../util/util"),o=e("../util/evented"),a=e("./validate_style"),s=e("../util/util"),u=s.sphericalToCartesian,l=(e("../style-spec/util/color"),e("../style-spec/util/interpolate")),c=e("./properties"),f=c.Properties,p=c.Transitionable,h=(c.Transitioning,c.PossiblyEvaluated,c.DataConstantProperty),d=function(){this.specification=r.light.position};d.prototype.possiblyEvaluate=function(e,t){return u(e.expression.evaluate(t))},d.prototype.interpolate=function(e,t,n){return{x:l.number(e.x,t.x,n),y:l.number(e.y,t.y,n),z:l.number(e.z,t.z,n)}};var v=new f({anchor:new h(r.light.anchor),position:new d,color:new h(r.light.color),intensity:new h(r.light.intensity)}),m=function(e){function t(t){e.call(this),this._transitionable=new p(v),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getLight=function(){return this._transitionable.serialize()},t.prototype.setLight=function(e){var t=this;if(!this._validate(a.light,e))for(var n in e){var r=e[n];i.endsWith(n,"-transition")?t._transitionable.setTransition(n.slice(0,-"-transition".length),r):t._transitionable.setValue(n,r)}},t.prototype.updateTransitions=function(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)},t.prototype.hasTransition=function(){return this._transitioning.hasTransition()},t.prototype.recalculate=function(e){this.properties=this._transitioning.possiblyEvaluate(e)},t.prototype._validate=function(e,t){return a.emitErrors(this,e.call(a,i.extend({value:t,style:{glyphs:!0,sprite:!0},styleSpec:r})))},t}(o);t.exports=m},{"../style-spec/reference/latest":151,"../style-spec/util/color":153,"../style-spec/util/interpolate":158,"../util/evented":260,"../util/util":275,"./properties":188,"./validate_style":211}],184:[function(e,t,n){"use strict";var r=e("../util/mapbox"),i=r.normalizeGlyphsURL,o=e("../util/ajax"),a=e("./parse_glyph_pbf");t.exports=function(e,t,n,r,s){var u=256*t,l=u+255,c=r(i(n).replace("{fontstack}",e).replace("{range}",u+"-"+l),o.ResourceType.Glyphs);o.getArrayBuffer(c,function(e,t){if(e)s(e);else if(t){for(var n={},r=0,i=a(t.data);r<i.length;r+=1){var o=i[r];n[o.id]=o}s(null,n)}})}},{"../util/ajax":251,"../util/mapbox":267,"./parse_glyph_pbf":186}],185:[function(e,t,n){"use strict";var r=e("../util/ajax"),i=e("../util/browser"),o=e("../util/mapbox"),a=o.normalizeSpriteURL,s=e("../util/image"),u=s.RGBAImage;t.exports=function(e,t,n){function o(){if(c)n(c);else if(s&&l){var e=i.getImageData(l),t={};for(var r in s){var o=s[r],a=o.width,f=o.height,p=o.x,h=o.y,d=o.sdf,v=o.pixelRatio,m=new u({width:a,height:f});u.copy(e,m,{x:p,y:h},{x:0,y:0},{width:a,height:f}),t[r]={data:m,pixelRatio:v,sdf:d}}n(null,t)}}var s,l,c,f=i.devicePixelRatio>1?"@2x":"";r.getJSON(t(a(e,f,".json"),r.ResourceType.SpriteJSON),function(e,t){c||(c=e,s=t,o())}),r.getImage(t(a(e,f,".png"),r.ResourceType.SpriteImage),function(e,t){c||(c=e,l=t,o())})}},{"../util/ajax":251,"../util/browser":252,"../util/image":263,"../util/mapbox":267}],186:[function(e,t,n){"use strict";function r(e,t,n){1===e&&n.readMessage(i,t)}function i(e,t,n){if(3===e){var r=n.readMessage(o,{}),i=r.id,a=r.bitmap,u=r.width,c=r.height,f=r.left,p=r.top,h=r.advance;t.push({id:i,bitmap:new s({width:u+2*l,height:c+2*l},a),metrics:{width:u,height:c,left:f,top:p,advance:h}})}}function o(e,t,n){1===e?t.id=n.readVarint():2===e?t.bitmap=n.readBytes():3===e?t.width=n.readVarint():4===e?t.height=n.readVarint():5===e?t.left=n.readSVarint():6===e?t.top=n.readSVarint():7===e&&(t.advance=n.readVarint())}var a=e("../util/image"),s=a.AlphaImage,u=e("pbf"),l=3;t.exports=function(e){return new u(e).readFields(r,[])},t.exports.GLYPH_PBF_BORDER=l},{"../util/image":263,pbf:30}],187:[function(e,t,n){"use strict";var r=e("../util/browser"),i=e("../symbol/placement"),o=function(){this._currentTileIndex=0,this._seenCrossTileIDs={}};o.prototype.continuePlacement=function(e,t,n,r,i){for(var o=this;this._currentTileIndex<e.length;){var a=e[o._currentTileIndex];if(t.placeLayerTile(r,a,n,o._seenCrossTileIDs),o._currentTileIndex++,i())return!0}};var a=function(e,t,n,r,o){this.placement=new i(e,o),this._currentPlacementIndex=t.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=r,this._done=!1};a.prototype.isDone=function(){return this._done},a.prototype.continuePlacement=function(e,t,n){for(var i=this,a=r.now(),s=function(){var e=r.now()-a;return!i._forceFullPlacement&&e>2};this._currentPlacementIndex>=0;){var u=e[i._currentPlacementIndex],l=t[u],c=i.placement.collisionIndex.transform.zoom;if("symbol"===l.type&&(!l.minzoom||l.minzoom<=c)&&(!l.maxzoom||l.maxzoom>c)){if(i._inProgressLayer||(i._inProgressLayer=new o),i._inProgressLayer.continuePlacement(n[l.source],i.placement,i._showCollisionBoxes,l,s))return;delete i._inProgressLayer}i._currentPlacementIndex--}this._done=!0},a.prototype.commit=function(e,t){return this.placement.commit(e,t),this.placement},t.exports=a},{"../symbol/placement":223,"../util/browser":252}],188:[function(e,t,n){"use strict";var r=e("../util/util"),i=r.clone,o=r.extend,a=r.easeCubicInOut,s=e("../style-spec/util/interpolate"),u=e("../style-spec/expression"),l=u.normalizePropertyExpression,c=(e("../style-spec/util/color"),e("../util/web_worker_transfer")),f=c.register,p=function(e,t){this.property=e,this.value=t,this.expression=l(void 0===t?e.specification.default:t,e.specification)};p.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},p.prototype.possiblyEvaluate=function(e){return this.property.possiblyEvaluate(this,e)};var h=function(e){this.property=e,this.value=new p(e,void 0)};h.prototype.transitioned=function(e,t){return new v(this.property,this.value,t,o({},e.transition,this.transition),e.now)},h.prototype.untransitioned=function(){return new v(this.property,this.value,null,{},0)};var d=function(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)};d.prototype.getValue=function(e){return i(this._values[e].value.value)},d.prototype.setValue=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new h(this._values[e].property)),this._values[e].value=new p(this._values[e].property,null===t?void 0:i(t))},d.prototype.getTransition=function(e){return i(this._values[e].transition)},d.prototype.setTransition=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new h(this._values[e].property)),this._values[e].transition=i(t)||void 0},d.prototype.serialize=function(){for(var e=this,t={},n=0,r=Object.keys(e._values);n<r.length;n+=1){var i=r[n],o=e.getValue(i);void 0!==o&&(t[i]=o);var a=e.getTransition(i);void 0!==a&&(t[i+"-transition"]=a)}return t},d.prototype.transitioned=function(e,t){for(var n=this,r=new m(this._properties),i=0,o=Object.keys(n._values);i<o.length;i+=1){var a=o[i];r._values[a]=n._values[a].transitioned(e,t._values[a])}return r},d.prototype.untransitioned=function(){for(var e=this,t=new m(this._properties),n=0,r=Object.keys(e._values);n<r.length;n+=1){var i=r[n];t._values[i]=e._values[i].untransitioned()}return t};var v=function(e,t,n,r,i){this.property=e,this.value=t,this.begin=i+r.delay||0,this.end=this.begin+r.duration||0,e.specification.transition&&(r.delay||r.duration)&&(this.prior=n)};v.prototype.possiblyEvaluate=function(e){var t=e.now||0,n=this.value.possiblyEvaluate(e),r=this.prior;if(r){if(t>this.end)return this.prior=null,n;if(this.value.isDataDriven())return this.prior=null,n;if(t<this.begin)return r.possiblyEvaluate(e);var i=(t-this.begin)/(this.end-this.begin);return this.property.interpolate(r.possiblyEvaluate(e),n,a(i))}return n};var m=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};m.prototype.possiblyEvaluate=function(e){for(var t=this,n=new _(this._properties),r=0,i=Object.keys(t._values);r<i.length;r+=1){var o=i[r];n._values[o]=t._values[o].possiblyEvaluate(e)}return n},m.prototype.hasTransition=function(){for(var e=this,t=0,n=Object.keys(e._values);t<n.length;t+=1){var r=n[t];if(e._values[r].prior)return!0}return!1};var y=function(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)};y.prototype.getValue=function(e){return i(this._values[e].value)},y.prototype.setValue=function(e,t){this._values[e]=new p(this._values[e].property,null===t?void 0:i(t))},y.prototype.serialize=function(){for(var e=this,t={},n=0,r=Object.keys(e._values);n<r.length;n+=1){var i=r[n],o=e.getValue(i);void 0!==o&&(t[i]=o)}return t},y.prototype.possiblyEvaluate=function(e){for(var t=this,n=new _(this._properties),r=0,i=Object.keys(t._values);r<i.length;r+=1){var o=i[r];n._values[o]=t._values[o].possiblyEvaluate(e)}return n};var g=function(e,t,n){this.property=e,this.value=t,this.globals=n};g.prototype.isConstant=function(){return"constant"===this.value.kind},g.prototype.constantOr=function(e){return"constant"===this.value.kind?this.value.value:e},g.prototype.evaluate=function(e){return this.property.evaluate(this.value,this.globals,e)};var _=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};_.prototype.get=function(e){return this._values[e]};var b=function(e){this.specification=e};b.prototype.possiblyEvaluate=function(e,t){return e.expression.evaluate(t)},b.prototype.interpolate=function(e,t,n){var r=s[this.specification.type];return r?r(e,t,n):e};var x=function(e){this.specification=e};x.prototype.possiblyEvaluate=function(e,t){return"constant"===e.expression.kind||"camera"===e.expression.kind?new g(this,{kind:"constant",value:e.expression.evaluate(t)},t):new g(this,e.expression,t)},x.prototype.interpolate=function(e,t,n){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0!==e.value.value&&void 0!==t.value.value){var r=s[this.specification.type];return r?new g(this,{kind:"constant",value:r(e.value.value,t.value.value,n)},e.globals):e}},x.prototype.evaluate=function(e,t,n){return"constant"===e.kind?e.value:e.evaluate(t,n)};var w=function(e){this.specification=e};w.prototype.possiblyEvaluate=function(e,t){if(void 0!==e.value){if("constant"===e.expression.kind){var n=e.expression.evaluate(t);return this._calculate(n,n,n,t)}return this._calculate(e.expression.evaluate({zoom:t.zoom-1}),e.expression.evaluate({zoom:t.zoom}),e.expression.evaluate({zoom:t.zoom+1}),t)}},w.prototype._calculate=function(e,t,n,r){var i=r.zoom,o=i-Math.floor(i),a=r.crossFadingFactor();return i>r.zoomHistory.lastIntegerZoom?{from:e,to:t,fromScale:2,toScale:1,t:o+(1-o)*a}:{from:n,to:t,fromScale:.5,toScale:1,t:1-(1-a)*o}},w.prototype.interpolate=function(e){return e};var E=function(e){this.specification=e};E.prototype.possiblyEvaluate=function(){},E.prototype.interpolate=function(){};var S=function(e){var t=this;this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={};for(var n in e){var r=e[n],i=t.defaultPropertyValues[n]=new p(r,void 0),o=t.defaultTransitionablePropertyValues[n]=new h(r);t.defaultTransitioningPropertyValues[n]=o.untransitioned(),t.defaultPossiblyEvaluatedValues[n]=i.possiblyEvaluate({})}};f("DataDrivenProperty",x),f("DataConstantProperty",b),f("CrossFadedProperty",w),f("HeatmapColorProperty",E),t.exports={PropertyValue:p,Transitionable:d,Transitioning:m,Layout:y,PossiblyEvaluatedPropertyValue:g,PossiblyEvaluated:_,DataConstantProperty:b,DataDrivenProperty:x,CrossFadedProperty:w,HeatmapColorProperty:E,Properties:S}},{"../style-spec/expression":139,"../style-spec/util/color":153,"../style-spec/util/interpolate":158,"../util/util":275,"../util/web_worker_transfer":278}],189:[function(e,t,n){"use strict";function r(e,t,n){var r=t.paint.get(e).value;return"constant"===r.kind?r.value:n.programConfigurations.get(t.id).binders[e].statistics.max}function i(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function o(e,t,n,r,i){if(!t[0]&&!t[1])return e;var o=a.convert(t);"viewport"===n&&o._rotate(-r);for(var s=[],u=0;u<e.length;u++){for(var l=e[u],c=[],f=0;f<l.length;f++)c.push(l[f].sub(o._mult(i)));s.push(c)}return s}var a=e("@mapbox/point-geometry");t.exports={getMaximumPaintValue:r,translateDistance:i,translate:o}},{"@mapbox/point-geometry":4}],190:[function(e,t,n){"use strict";var r=e("../util/evented"),i=e("./style_layer"),o=e("./load_sprite"),a=e("../render/image_manager"),s=e("../render/glyph_manager"),u=e("./light"),l=e("../render/line_atlas"),c=e("../util/util"),f=e("../util/ajax"),p=e("../util/mapbox"),h=e("../util/browser"),d=e("../util/dispatcher"),v=e("./validate_style"),m=e("../source/source").getType,y=e("../source/source").setType,g=e("../source/query_features"),_=e("../source/source_cache"),b=(e("../source/geojson_source"),e("../style-spec/reference/latest")),x=e("../util/global_worker_pool"),w=e("../style-spec/deref"),E=e("../style-spec/diff"),S=e("../source/rtl_text_plugin"),T=e("./pauseable_placement"),A=e("./zoom_history"),O=e("../symbol/cross_tile_symbol_index"),P=c.pick(E.operations,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),C=c.pick(E.operations,["setCenter","setZoom","setBearing","setPitch"]),k=function(e){function t(t,n){var r=this;void 0===n&&(n={}),e.call(this),this.map=t,this.dispatcher=new d(x(),this),this.imageManager=new a,this.glyphManager=new s(t._transformRequest,n.localIdeographFontFamily),this.lineAtlas=new l(256,512),this.crossTileSymbolIndex=new O,this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new A,this._loaded=!1,this._resetUpdates();var i=this;this._rtlTextPluginCallback=S.registerForPluginAvailability(function(e){i.dispatcher.broadcast("loadRTLTextPlugin",e.pluginBlobURL,e.errorCallback);for(var t in i.sourceCaches)i.sourceCaches[t].reload()}),this.on("data",function(e){if("source"===e.dataType&&"metadata"===e.sourceDataType){var t=r.sourceCaches[e.sourceId];if(t){var n=t.getSource();if(n&&n.vectorLayerIds)for(var i in r._layers){var o=r._layers[i];o.source===n.id&&r._validateLayer(o)}}}})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.loadURL=function(e,t){var n=this;void 0===t&&(t={}),this.fire("dataloading",{dataType:"style"});var r="boolean"==typeof t.validate?t.validate:!p.isMapboxURL(e);e=p.normalizeStyleURL(e,t.accessToken);var i=this.map._transformRequest(e,f.ResourceType.Style);f.getJSON(i,function(e,t){e?n.fire("error",{error:e}):t&&n._load(t,r)})},t.prototype.loadJSON=function(e,t){var n=this;void 0===t&&(t={}),this.fire("dataloading",{dataType:"style"}),h.frame(function(){n._load(e,!1!==t.validate)})},t.prototype._load=function(e,t){var n=this;if(!t||!v.emitErrors(this,v(e))){this._loaded=!0,this.stylesheet=e;for(var r in e.sources)n.addSource(r,e.sources[r],{validate:!1});e.sprite?o(e.sprite,this.map._transformRequest,function(e,t){if(e)n.fire("error",e);else if(t)for(var r in t)n.imageManager.addImage(r,t[r]);n.imageManager.setLoaded(!0),n.fire("data",{dataType:"style"})}):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);var a=w(this.stylesheet.layers);this._order=a.map(function(e){return e.id}),this._layers={};for(var s=0,l=a;s<l.length;s+=1){var c=l[s];c=i.create(c),c.setEventedParent(n,{layer:{id:c.id}}),n._layers[c.id]=c}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new u(this.stylesheet.light),this.fire("data",{dataType:"style"}),this.fire("style.load")}},t.prototype._validateLayer=function(e){var t=this.sourceCaches[e.source];if(t){var n=e.sourceLayer;if(n){var r=t.getSource();("geojson"===r.type||r.vectorLayerIds&&-1===r.vectorLayerIds.indexOf(n))&&this.fire("error",{error:new Error('Source layer "'+n+'" does not exist on source "'+r.id+'" as specified by style layer "'+e.id+'"')})}}},t.prototype.loaded=function(){var e=this;if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in e.sourceCaches)if(!e.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},t.prototype._serializeLayers=function(e){var t=this;return e.map(function(e){return t._layers[e].serialize()})},t.prototype.hasTransitions=function(){var e=this;if(this.light&&this.light.hasTransition())return!0;for(var t in e.sourceCaches)if(e.sourceCaches[t].hasTransition())return!0;for(var n in e._layers)if(e._layers[n].hasTransition())return!0;return!1},t.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},t.prototype.update=function(e){var t=this;if(this._loaded){if(this._changed){var n=Object.keys(this._updatedLayers),r=Object.keys(this._removedLayers);(n.length||r.length)&&this._updateWorkerLayers(n,r);for(var i in t._updatedSources){var o=t._updatedSources[i];"reload"===o?t._reloadSource(i):"clear"===o&&t._clearSource(i)}for(var a in t._updatedPaintProps)t._layers[a].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates(),this.fire("data",{dataType:"style"})}for(var s in t.sourceCaches)t.sourceCaches[s].used=!1;for(var u=0,l=t._order;u<l.length;u+=1){var c=l[u],f=t._layers[c];f.recalculate(e),!f.isHidden(e.zoom)&&f.source&&(t.sourceCaches[f.source].used=!0)}this.light.recalculate(e),this.z=e.zoom}},t.prototype._updateWorkerLayers=function(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})},t.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={}},t.prototype.setState=function(e){var t=this;if(this._checkLoaded(),v.emitErrors(this,v(e)))return!1;e=c.clone(e),e.layers=w(e.layers);var n=E(this.serialize(),e).filter(function(e){return!(e.command in C)});if(0===n.length)return!1;var r=n.filter(function(e){return!(e.command in P)});if(r.length>0)throw new Error("Unimplemented: "+r.map(function(e){return e.command}).join(", ")+".");return n.forEach(function(e){"setTransition"!==e.command&&t[e.command].apply(t,e.args)}),this.stylesheet=e,!0},t.prototype.addImage=function(e,t){if(this.getImage(e))return this.fire("error",{error:new Error("An image with this name already exists.")});this.imageManager.addImage(e,t),this.fire("data",{dataType:"style"})},t.prototype.getImage=function(e){return this.imageManager.getImage(e)},t.prototype.removeImage=function(e){if(!this.getImage(e))return this.fire("error",{error:new Error("No image with this name exists.")});this.imageManager.removeImage(e),this.fire("data",{dataType:"style"})},t.prototype.addSource=function(e,t,n){var r=this;if(this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error("There is already a source with this ID");if(!t.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(t).join(", ")+".");if(!(["vector","raster","geojson","video","image","canvas"].indexOf(t.type)>=0&&this._validate(v.source,"sources."+e,t,null,n))){this.map&&this.map._collectResourceTiming&&(t.collectResourceTiming=!0);var i=this.sourceCaches[e]=new _(e,t,this.dispatcher);i.style=this,i.setEventedParent(this,function(){return{isSourceLoaded:r.loaded(),source:i.serialize(),sourceId:e}}),i.onAdd(this.map),this._changed=!0}},t.prototype.removeSource=function(e){var t=this;if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(var n in t._layers)if(t._layers[n].source===e)return t.fire("error",{error:new Error('Source "'+e+'" cannot be removed while layer "'+n+'" is using it.')});var r=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],r.fire("data",{sourceDataType:"metadata",dataType:"source",sourceId:e}),r.setEventedParent(null),r.clearTiles(),r.onRemove&&r.onRemove(this.map),this._changed=!0},t.prototype.setGeoJSONSourceData=function(e,t){this._checkLoaded(),this.sourceCaches[e].getSource().setData(t),this._changed=!0},t.prototype.getSource=function(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()},t.prototype.addLayer=function(e,t,n){this._checkLoaded();var r=e.id;if("object"==typeof e.source&&(this.addSource(r,e.source),e=c.clone(e),e=c.extend(e,{source:r})),!this._validate(v.layer,"layers."+r,e,{arrayIndex:-1},n)){var o=i.create(e);this._validateLayer(o),o.setEventedParent(this,{layer:{id:r}});var a=t?this._order.indexOf(t):this._order.length;if(t&&-1===a)return void this.fire("error",{error:new Error('Layer with id "'+t+'" does not exist on this map.')});if(this._order.splice(a,0,r),this._layerOrderChanged=!0,this._layers[r]=o,this._removedLayers[r]&&o.source){var s=this._removedLayers[r];delete this._removedLayers[r],s.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())}this._updateLayer(o)}},t.prototype.moveLayer=function(e,t){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire("error",{error:new Error("The layer '"+e+"' does not exist in the map's style and cannot be moved.")});var n=this._order.indexOf(e);this._order.splice(n,1);var r=t?this._order.indexOf(t):this._order.length;if(t&&-1===r)return void this.fire("error",{error:new Error('Layer with id "'+t+'" does not exist on this map.')});this._order.splice(r,0,e),this._layerOrderChanged=!0},t.prototype.removeLayer=function(e){this._checkLoaded();var t=this._layers[e];if(!t)return void this.fire("error",{error:new Error("The layer '"+e+"' does not exist in the map's style and cannot be removed.")});t.setEventedParent(null);var n=this._order.indexOf(e);this._order.splice(n,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=t,delete this._layers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e]},t.prototype.getLayer=function(e){return this._layers[e]},t.prototype.setLayerZoomRange=function(e,t,n){this._checkLoaded();var r=this.getLayer(e);if(!r)return void this.fire("error",{error:new Error("The layer '"+e+"' does not exist in the map's style and cannot have zoom extent.")});r.minzoom===t&&r.maxzoom===n||(null!=t&&(r.minzoom=t),null!=n&&(r.maxzoom=n),this._updateLayer(r))},t.prototype.setFilter=function(e,t){this._checkLoaded();var n=this.getLayer(e);return n?c.deepEqual(n.filter,t)?void 0:null===t||void 0===t?(n.filter=void 0,void this._updateLayer(n)):void(this._validate(v.filter,"layers."+n.id+".filter",t)||(n.filter=c.clone(t),this._updateLayer(n))):void this.fire("error",{error:new Error("The layer '"+e+"' does not exist in the map's style and cannot be filtered.")})},t.prototype.getFilter=function(e){return c.clone(this.getLayer(e).filter)},t.prototype.setLayoutProperty=function(e,t,n){this._checkLoaded();var r=this.getLayer(e);if(!r)return void this.fire("error",{error:new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")});c.deepEqual(r.getLayoutProperty(t),n)||(r.setLayoutProperty(t,n),this._updateLayer(r))},t.prototype.getLayoutProperty=function(e,t){return this.getLayer(e).getLayoutProperty(t)},t.prototype.setPaintProperty=function(e,t,n){this._checkLoaded();var r=this.getLayer(e);if(!r)return void this.fire("error",{error:new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")});if(!c.deepEqual(r.getPaintProperty(t),n)){var i=r._transitionablePaint._values[t].value.isDataDriven();r.setPaintProperty(t,n),(r._transitionablePaint._values[t].value.isDataDriven()||i)&&this._updateLayer(r),this._changed=!0,this._updatedPaintProps[e]=!0}},t.prototype.getPaintProperty=function(e,t){return this.getLayer(e).getPaintProperty(t)},t.prototype.getTransition=function(){return c.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},t.prototype.serialize=function(){var e=this;return c.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:c.mapObject(this.sourceCaches,function(e){return e.serialize()}),layers:this._order.map(function(t){return e._layers[t].serialize()})},function(e){return void 0!==e})},t.prototype._updateLayer=function(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._changed=!0},t.prototype._flattenRenderedFeatures=function(e){for(var t=this,n=[],r=this._order.length-1;r>=0;r--)for(var i=t._order[r],o=0,a=e;o<a.length;o+=1){var s=a[o],u=s[i];if(u)for(var l=0,c=u;l<c.length;l+=1){var f=c[l];n.push(f)}}return n},t.prototype.queryRenderedFeatures=function(e,t,n,r){var i=this;t&&t.filter&&this._validate(v.filter,"queryRenderedFeatures.filter",t.filter);var o={};if(t&&t.layers){if(!Array.isArray(t.layers))return this.fire("error",{error:"parameters.layers must be an Array."}),[];for(var a=0,s=t.layers;a<s.length;a+=1){var u=s[a],l=i._layers[u];if(!l)return i.fire("error",{error:"The layer '"+u+"' does not exist in the map's style and cannot be queried for features."}),[];o[l.source]=!0}}var c=[];for(var f in i.sourceCaches)if(!t.layers||o[f]){var p=g.rendered(i.sourceCaches[f],i._layers,e,t,n,r,i.placement?i.placement.collisionIndex:null);c.push(p)}return this._flattenRenderedFeatures(c)},t.prototype.querySourceFeatures=function(e,t){t&&t.filter&&this._validate(v.filter,"querySourceFeatures.filter",t.filter);var n=this.sourceCaches[e];return n?g.source(n,t):[]},t.prototype.addSourceType=function(e,t,n){return m(e)?n(new Error('A source type called "'+e+'" already exists.')):(y(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},n):n(null,null))},t.prototype.getLight=function(){return this.light.getLight()},t.prototype.setLight=function(e){this._checkLoaded();var t=this.light.getLight(),n=!1;for(var r in e)if(!c.deepEqual(e[r],t[r])){n=!0;break}if(n){var i={now:h.now(),transition:c.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e),this.light.updateTransitions(i)}},t.prototype._validate=function(e,t,n,r,i){return(!i||!1!==i.validate)&&v.emitErrors(this,e.call(v,c.extend({key:t,style:this.serialize(),value:n,styleSpec:b},r)))},t.prototype._remove=function(){var e=this;S.evented.off("pluginAvailable",this._rtlTextPluginCallback);for(var t in e.sourceCaches)e.sourceCaches[t].clearTiles();this.dispatcher.remove()},t.prototype._clearSource=function(e){this.sourceCaches[e].clearTiles()},t.prototype._reloadSource=function(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()},t.prototype._updateSources=function(e){var t=this;for(var n in t.sourceCaches)t.sourceCaches[n].update(e)},t.prototype._generateCollisionBoxes=function(){var e=this;for(var t in e.sourceCaches)e._reloadSource(t)},t.prototype._updatePlacement=function(e,t,n){for(var r=this,i=!1,o=!1,a={},s=0,u=r._order;s<u.length;s+=1){var l=u[s],c=r._layers[l];if("symbol"===c.type){if(!a[c.source]){var f=r.sourceCaches[c.source];a[c.source]=f.getRenderableIds().map(function(e){return f.getTileByID(e)}).sort(function(e,t){return t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)})}var p=r.crossTileSymbolIndex.addLayer(c,a[c.source]);i=i||p}}this.crossTileSymbolIndex.pruneUnusedLayers(this._order);var d=this._layerOrderChanged;if((d||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(h.now()))&&(this.pauseablePlacement=new T(e,this._order,d,t,n),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,a),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(this.placement,h.now()),o=!0),i&&this.pauseablePlacement.placement.setStale()),o||i)for(var v=0,m=r._order;v<m.length;v+=1){var y=m[v],g=r._layers[y];"symbol"===g.type&&r.placement.updateLayerOpacities(g,a[g.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(h.now())},t.prototype.getImages=function(e,t,n){this.imageManager.getImages(t.icons,n)},t.prototype.getGlyphs=function(e,t,n){this.glyphManager.getGlyphs(t.stacks,n)},t}(r);t.exports=k},{"../render/glyph_manager":86,"../render/image_manager":88,"../render/line_atlas":89,"../source/geojson_source":99,"../source/query_features":105,"../source/rtl_text_plugin":109,"../source/source":110,"../source/source_cache":111,"../style-spec/deref":120,"../style-spec/diff":121,"../style-spec/reference/latest":151,"../symbol/cross_tile_symbol_index":218,"../util/ajax":251,"../util/browser":252,"../util/dispatcher":258,"../util/evented":260,"../util/global_worker_pool":262,"../util/mapbox":267,"../util/util":275,"./light":183,"./load_sprite":185,"./pauseable_placement":187,"./style_layer":191,"./validate_style":211,"./zoom_history":212}],191:[function(e,t,n){"use strict";var r=e("../util/util"),i=e("../style-spec/reference/latest"),o=e("./validate_style"),a=e("../util/evented"),s=e("./properties"),u=s.Layout,l=s.Transitionable,c=(s.Transitioning,s.Properties,function(e){function t(t,n){var r=this;e.call(this),this.id=t.id,this.metadata=t.metadata,this.type=t.type,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,this.visibility="visible","background"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),this._featureFilter=function(){return!0},n.layout&&(this._unevaluatedLayout=new u(n.layout)),this._transitionablePaint=new l(n.paint);for(var i in t.paint)r.setPaintProperty(i,t.paint[i],{validate:!1});for(var o in t.layout)r.setLayoutProperty(o,t.layout[o],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getLayoutProperty=function(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)},t.prototype.setLayoutProperty=function(e,t,n){if(null!==t&&void 0!==t){var r="layers."+this.id+".layout."+e;if(this._validate(o.layoutProperty,r,e,t,n))return}if("visibility"===e)return void(this.visibility="none"===t?t:"visible");this._unevaluatedLayout.setValue(e,t)},t.prototype.getPaintProperty=function(e){return r.endsWith(e,"-transition")?this._transitionablePaint.getTransition(e.slice(0,-"-transition".length)):this._transitionablePaint.getValue(e)},t.prototype.setPaintProperty=function(e,t,n){if(null!==t&&void 0!==t){var i="layers."+this.id+".paint."+e;if(this._validate(o.paintProperty,i,e,t,n))return}r.endsWith(e,"-transition")?this._transitionablePaint.setTransition(e.slice(0,-"-transition".length),t||void 0):this._transitionablePaint.setValue(e,t)},t.prototype.isHidden=function(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility},t.prototype.updateTransitions=function(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)},t.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},t.prototype.recalculate=function(e){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e)),this.paint=this._transitioningPaint.possiblyEvaluate(e)},t.prototype.serialize=function(){var e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return"none"===this.visibility&&(e.layout=e.layout||{},e.layout.visibility="none"),r.filterObject(e,function(e,t){return!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)})},t.prototype._validate=function(e,t,n,r,a){return(!a||!1!==a.validate)&&o.emitErrors(this,e.call(o,{key:t,layerType:this.type,objectKey:n,value:r,styleSpec:i,style:{glyphs:!0,sprite:!0}}))},t.prototype.hasOffscreenPass=function(){return!1},t.prototype.resize=function(){},t}(a));t.exports=c;var f={circle:e("./style_layer/circle_style_layer"),heatmap:e("./style_layer/heatmap_style_layer"),hillshade:e("./style_layer/hillshade_style_layer"),fill:e("./style_layer/fill_style_layer"),"fill-extrusion":e("./style_layer/fill_extrusion_style_layer"),line:e("./style_layer/line_style_layer"),symbol:e("./style_layer/symbol_style_layer"),background:e("./style_layer/background_style_layer"),raster:e("./style_layer/raster_style_layer")};c.create=function(e){return new f[e.type](e)}},{"../style-spec/reference/latest":151,"../util/evented":260,"../util/util":275,"./properties":188,"./style_layer/background_style_layer":192,"./style_layer/circle_style_layer":194,"./style_layer/fill_extrusion_style_layer":196,"./style_layer/fill_style_layer":198,"./style_layer/heatmap_style_layer":200,"./style_layer/hillshade_style_layer":202,"./style_layer/line_style_layer":204,"./style_layer/raster_style_layer":206,"./style_layer/symbol_style_layer":208,"./validate_style":211}],192:[function(e,t,n){"use strict";var r=e("../style_layer"),i=e("./background_style_layer_properties"),o=e("../properties"),a=(o.Transitionable,o.Transitioning,o.PossiblyEvaluated,function(e){function t(t){e.call(this,t,i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(r));t.exports=a},{"../properties":188,"../style_layer":191,"./background_style_layer_properties":193}],193:[function(e,t,n){"use strict";var r=e("../../style-spec/reference/latest"),i=e("../properties"),o=i.Properties,a=i.DataConstantProperty,s=(i.DataDrivenProperty,i.CrossFadedProperty),u=(i.HeatmapColorProperty,new o({"background-color":new a(r.paint_background["background-color"]),"background-pattern":new s(r.paint_background["background-pattern"]),"background-opacity":new a(r.paint_background["background-opacity"])}));t.exports={paint:u}},{"../../style-spec/reference/latest":151,"../properties":188}],194:[function(e,t,n){"use strict";var r=e("../style_layer"),i=e("../../data/bucket/circle_bucket"),o=e("../../util/intersection_tests"),a=o.multiPolygonIntersectsBufferedMultiPoint,s=e("../query_utils"),u=s.getMaximumPaintValue,l=s.translateDistance,c=s.translate,f=e("./circle_style_layer_properties"),p=e("../properties"),h=(p.Transitionable,p.Transitioning,p.PossiblyEvaluated,function(e){function t(t){e.call(this,t,f)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createBucket=function(e){return new i(e)},t.prototype.queryRadius=function(e){var t=e;return u("circle-radius",this,t)+u("circle-stroke-width",this,t)+l(this.paint.get("circle-translate"))},t.prototype.queryIntersectsFeature=function(e,t,n,r,i,o){var s=c(e,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),i,o),u=this.paint.get("circle-radius").evaluate(t)*o,l=this.paint.get("circle-stroke-width").evaluate(t)*o;return a(s,n,u+l)},t}(r));t.exports=h},{"../../data/bucket/circle_bucket":42,"../../util/intersection_tests":264,"../properties":188,"../query_utils":189,"../style_layer":191,"./circle_style_layer_properties":195}],195:[function(e,t,n){"use strict";var r=e("../../style-spec/reference/latest"),i=e("../properties"),o=i.Properties,a=i.DataConstantProperty,s=i.DataDrivenProperty,u=(i.CrossFadedProperty,i.HeatmapColorProperty,new o({"circle-radius":new s(r.paint_circle["circle-radius"]),"circle-color":new s(r.paint_circle["circle-color"]),"circle-blur":new s(r.paint_circle["circle-blur"]),"circle-opacity":new s(r.paint_circle["circle-opacity"]),"circle-translate":new a(r.paint_circle["circle-translate"]),"circle-translate-anchor":new a(r.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new a(r.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new a(r.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new s(r.paint_circle["circle-stroke-width"]),"circle-stroke-color":new s(r.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new s(r.paint_circle["circle-stroke-opacity"])}));t.exports={paint:u}},{"../../style-spec/reference/latest":151,"../properties":188}],196:[function(e,t,n){"use strict";var r=e("../style_layer"),i=e("../../data/bucket/fill_extrusion_bucket"),o=e("../../util/intersection_tests"),a=o.multiPolygonIntersectsMultiPolygon,s=e("../query_utils"),u=s.translateDistance,l=s.translate,c=e("./fill_extrusion_style_layer_properties"),f=e("../properties"),p=(f.Transitionable,f.Transitioning,f.PossiblyEvaluated,function(e){function t(t){e.call(this,t,c)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createBucket=function(e){return new i(e)},t.prototype.queryRadius=function(){return u(this.paint.get("fill-extrusion-translate"))},t.prototype.queryIntersectsFeature=function(e,t,n,r,i,o){var s=l(e,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),i,o);return a(s,n)},t.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("fill-extrusion-opacity")&&"none"!==this.visibility},t.prototype.resize=function(){this.viewportFrame&&(this.viewportFrame.destroy(),this.viewportFrame=null)},t}(r));t.exports=p},{"../../data/bucket/fill_extrusion_bucket":46,"../../util/intersection_tests":264,"../properties":188,"../query_utils":189,"../style_layer":191,"./fill_extrusion_style_layer_properties":197}],197:[function(e,t,n){"use strict";var r=e("../../style-spec/reference/latest"),i=e("../properties"),o=i.Properties,a=i.DataConstantProperty,s=i.DataDrivenProperty,u=i.CrossFadedProperty,l=(i.HeatmapColorProperty,new o({"fill-extrusion-opacity":new a(r["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new s(r["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new a(r["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new a(r["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new u(r["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new s(r["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new s(r["paint_fill-extrusion"]["fill-extrusion-base"])}));t.exports={paint:l}},{"../../style-spec/reference/latest":151,"../properties":188}],198:[function(e,t,n){"use strict";var r=e("../style_layer"),i=e("../../data/bucket/fill_bucket"),o=e("../../util/intersection_tests"),a=o.multiPolygonIntersectsMultiPolygon,s=e("../query_utils"),u=s.translateDistance,l=s.translate,c=e("./fill_style_layer_properties"),f=e("../properties"),p=(f.Transitionable,f.Transitioning,f.PossiblyEvaluated,function(e){function t(t){e.call(this,t,c)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.recalculate=function(e){this.paint=this._transitioningPaint.possiblyEvaluate(e),void 0===this._transitionablePaint.getValue("fill-outline-color")&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},t.prototype.createBucket=function(e){return new i(e)},t.prototype.queryRadius=function(){return u(this.paint.get("fill-translate"))},t.prototype.queryIntersectsFeature=function(e,t,n,r,i,o){var s=l(e,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),i,o);return a(s,n)},t}(r));t.exports=p},{"../../data/bucket/fill_bucket":44,"../../util/intersection_tests":264,"../properties":188,"../query_utils":189,"../style_layer":191,"./fill_style_layer_properties":199}],199:[function(e,t,n){"use strict";var r=e("../../style-spec/reference/latest"),i=e("../properties"),o=i.Properties,a=i.DataConstantProperty,s=i.DataDrivenProperty,u=i.CrossFadedProperty,l=(i.HeatmapColorProperty,new o({"fill-antialias":new a(r.paint_fill["fill-antialias"]),"fill-opacity":new s(r.paint_fill["fill-opacity"]),"fill-color":new s(r.paint_fill["fill-color"]),"fill-outline-color":new s(r.paint_fill["fill-outline-color"]),"fill-translate":new a(r.paint_fill["fill-translate"]),"fill-translate-anchor":new a(r.paint_fill["fill-translate-anchor"]),"fill-pattern":new u(r.paint_fill["fill-pattern"])}));t.exports={paint:l}},{"../../style-spec/reference/latest":151,"../properties":188}],200:[function(e,t,n){"use strict";var r=e("../style_layer"),i=e("../../data/bucket/heatmap_bucket"),o=e("../../util/image").RGBAImage,a=e("./heatmap_style_layer_properties"),s=e("../properties"),u=(s.Transitionable,s.Transitioning,s.PossiblyEvaluated,function(e){function t(t){e.call(this,t,a),this._updateColorRamp()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createBucket=function(e){return new i(e)},t.prototype.setPaintProperty=function(t,n,r){e.prototype.setPaintProperty.call(this,t,n,r),"heatmap-color"===t&&this._updateColorRamp()},t.prototype._updateColorRamp=function(){for(var e=this._transitionablePaint._values["heatmap-color"].value.expression,t=new Uint8Array(1024),n=t.length,r=4;r<n;r+=4){var i=e.evaluate({heatmapDensity:r/n});t[r+0]=Math.floor(255*i.r/i.a),t[r+1]=Math.floor(255*i.g/i.a),t[r+2]=Math.floor(255*i.b/i.a),t[r+3]=Math.floor(255*i.a)}this.colorRamp=new o({width:256,height:1},t),this.colorRampTexture=null},t.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},t}(r));t.exports=u},{"../../data/bucket/heatmap_bucket":47,"../../util/image":263,"../properties":188,"../style_layer":191,"./heatmap_style_layer_properties":201}],201:[function(e,t,n){"use strict";var r=e("../../style-spec/reference/latest"),i=e("../properties"),o=i.Properties,a=i.DataConstantProperty,s=i.DataDrivenProperty,u=(i.CrossFadedProperty,i.HeatmapColorProperty),l=new o({"heatmap-radius":new s(r.paint_heatmap["heatmap-radius"]),"heatmap-weight":new s(r.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new a(r.paint_heatmap["heatmap-intensity"]),"heatmap-color":new u(r.paint_heatmap["heatmap-color"]),"heatmap-opacity":new a(r.paint_heatmap["heatmap-opacity"])});t.exports={paint:l}},{"../../style-spec/reference/latest":151,"../properties":188}],202:[function(e,t,n){"use strict";var r=e("../style_layer"),i=e("./hillshade_style_layer_properties"),o=e("../properties"),a=(o.Transitionable,o.Transitioning,o.PossiblyEvaluated,function(e){function t(t){e.call(this,t,i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},t}(r));t.exports=a},{"../properties":188,"../style_layer":191,"./hillshade_style_layer_properties":203}],203:[function(e,t,n){"use strict";var r=e("../../style-spec/reference/latest"),i=e("../properties"),o=i.Properties,a=i.DataConstantProperty,s=(i.DataDrivenProperty,i.CrossFadedProperty,i.HeatmapColorProperty,new o({"hillshade-illumination-direction":new a(r.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new a(r.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new a(r.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new a(r.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new a(r.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new a(r.paint_hillshade["hillshade-accent-color"])}));t.exports={paint:s}},{"../../style-spec/reference/latest":151,"../properties":188}],204:[function(e,t,n){"use strict";function r(e,t){return t>0?t+2*e:e}function i(e,t){for(var n=[],r=new o(0,0),i=0;i<e.length;i++){for(var a=e[i],s=[],u=0;u<a.length;u++){var l=a[u-1],c=a[u],f=a[u+1],p=0===u?r:c.sub(l)._unit()._perp(),h=u===a.length-1?r:f.sub(c)._unit()._perp(),d=p._add(h)._unit(),v=d.x*h.x+d.y*h.y;d._mult(1/v),s.push(d._mult(t)._add(c))}n.push(s)}return n}var o=e("@mapbox/point-geometry"),a=e("../style_layer"),s=e("../../data/bucket/line_bucket"),u=e("../../util/intersection_tests"),l=u.multiPolygonIntersectsBufferedMultiLine,c=e("../query_utils"),f=c.getMaximumPaintValue,p=c.translateDistance,h=c.translate,d=e("./line_style_layer_properties"),v=e("../../util/util"),m=v.extend,y=e("../evaluation_parameters"),g=e("../properties"),_=(g.Transitionable,g.Transitioning,g.Layout,g.PossiblyEvaluated,g.DataDrivenProperty),b=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.possiblyEvaluate=function(t,n){return n=new y(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),e.prototype.possiblyEvaluate.call(this,t,n)},t.prototype.evaluate=function(t,n,r){return n=m({},n,{zoom:Math.floor(n.zoom)}),e.prototype.evaluate.call(this,t,n,r)},t}(_),x=new b(d.paint.properties["line-width"].specification);x.useIntegerZoom=!0;var w=function(e){function t(t){e.call(this,t,d)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.recalculate=function(t){e.prototype.recalculate.call(this,t),this.paint._values["line-floorwidth"]=x.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)},t.prototype.createBucket=function(e){return new s(e)},t.prototype.queryRadius=function(e){var t=e,n=r(f("line-width",this,t),f("line-gap-width",this,t)),i=f("line-offset",this,t);return n/2+Math.abs(i)+p(this.paint.get("line-translate"))},t.prototype.queryIntersectsFeature=function(e,t,n,o,a,s){var u=h(e,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a,s),c=s/2*r(this.paint.get("line-width").evaluate(t),this.paint.get("line-gap-width").evaluate(t)),f=this.paint.get("line-offset").evaluate(t);return f&&(n=i(n,f*s)),l(u,n,c)},t}(a);t.exports=w},{"../../data/bucket/line_bucket":49,"../../util/intersection_tests":264,"../../util/util":275,"../evaluation_parameters":182,"../properties":188,"../query_utils":189,"../style_layer":191,"./line_style_layer_properties":205,"@mapbox/point-geometry":4}],205:[function(e,t,n){"use strict";var r=e("../../style-spec/reference/latest"),i=e("../properties"),o=i.Properties,a=i.DataConstantProperty,s=i.DataDrivenProperty,u=i.CrossFadedProperty,l=(i.HeatmapColorProperty,new o({"line-cap":new a(r.layout_line["line-cap"]),"line-join":new s(r.layout_line["line-join"]),"line-miter-limit":new a(r.layout_line["line-miter-limit"]),"line-round-limit":new a(r.layout_line["line-round-limit"])})),c=new o({"line-opacity":new s(r.paint_line["line-opacity"]),"line-color":new s(r.paint_line["line-color"]),"line-translate":new a(r.paint_line["line-translate"]),"line-translate-anchor":new a(r.paint_line["line-translate-anchor"]),"line-width":new s(r.paint_line["line-width"]),"line-gap-width":new s(r.paint_line["line-gap-width"]),"line-offset":new s(r.paint_line["line-offset"]),"line-blur":new s(r.paint_line["line-blur"]),"line-dasharray":new u(r.paint_line["line-dasharray"]),"line-pattern":new u(r.paint_line["line-pattern"])});t.exports={paint:c,layout:l}},{"../../style-spec/reference/latest":151,"../properties":188}],206:[function(e,t,n){"use strict";var r=e("../style_layer"),i=e("./raster_style_layer_properties"),o=e("../properties"),a=(o.Transitionable,o.Transitioning,o.PossiblyEvaluated,function(e){function t(t){e.call(this,t,i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(r));t.exports=a},{"../properties":188,"../style_layer":191,"./raster_style_layer_properties":207}],207:[function(e,t,n){"use strict";var r=e("../../style-spec/reference/latest"),i=e("../properties"),o=i.Properties,a=i.DataConstantProperty,s=(i.DataDrivenProperty,i.CrossFadedProperty,i.HeatmapColorProperty,new o({"raster-opacity":new a(r.paint_raster["raster-opacity"]),"raster-hue-rotate":new a(r.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new a(r.paint_raster["raster-brightness-min"]),"raster-brightness-max":new a(r.paint_raster["raster-brightness-max"]),"raster-saturation":new a(r.paint_raster["raster-saturation"]),"raster-contrast":new a(r.paint_raster["raster-contrast"]),"raster-fade-duration":new a(r.paint_raster["raster-fade-duration"])}));t.exports={paint:s}},{"../../style-spec/reference/latest":151,"../properties":188}],208:[function(e,t,n){"use strict";var r=e("../style_layer"),i=e("../../data/bucket/symbol_bucket"),o=e("../../util/token"),a=e("../../style-spec/expression"),s=a.isExpression,u=e("./symbol_style_layer_properties"),l=e("../properties"),c=(l.Transitionable,l.Transitioning,l.Layout,l.PossiblyEvaluated,function(e){function t(t){e.call(this,t,u)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.recalculate=function(t){e.prototype.recalculate.call(this,t),"auto"===this.layout.get("icon-rotation-alignment")&&("line"===this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-rotation-alignment")&&("line"===this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"))},t.prototype.getValueAndResolveTokens=function(e,t){var n=this.layout.get(e).evaluate(t),r=this._unevaluatedLayout._values[e];return r.isDataDriven()||s(r.value)?n:o(t.properties,n)},t.prototype.createBucket=function(e){return new i(e)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t}(r));t.exports=c},{"../../data/bucket/symbol_bucket":51,"../../style-spec/expression":139,"../../util/token":274,"../properties":188,"../style_layer":191,"./symbol_style_layer_properties":209}],209:[function(e,t,n){"use strict";var r=e("../../style-spec/reference/latest"),i=e("../properties"),o=i.Properties,a=i.DataConstantProperty,s=i.DataDrivenProperty,u=(i.CrossFadedProperty,i.HeatmapColorProperty,new o({"symbol-placement":new a(r.layout_symbol["symbol-placement"]),"symbol-spacing":new a(r.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new a(r.layout_symbol["symbol-avoid-edges"]),"icon-allow-overlap":new a(r.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new a(r.layout_symbol["icon-ignore-placement"]),"icon-optional":new a(r.layout_symbol["icon-optional"]),"icon-rotation-alignment":new a(r.layout_symbol["icon-rotation-alignment"]),"icon-size":new s(r.layout_symbol["icon-size"]),"icon-text-fit":new a(r.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new a(r.layout_symbol["icon-text-fit-padding"]),"icon-image":new s(r.layout_symbol["icon-image"]),"icon-rotate":new s(r.layout_symbol["icon-rotate"]),"icon-padding":new a(r.layout_symbol["icon-padding"]),"icon-keep-upright":new a(r.layout_symbol["icon-keep-upright"]),"icon-offset":new s(r.layout_symbol["icon-offset"]),"icon-anchor":new s(r.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new a(r.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new a(r.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new a(r.layout_symbol["text-rotation-alignment"]),"text-field":new s(r.layout_symbol["text-field"]),"text-font":new s(r.layout_symbol["text-font"]),"text-size":new s(r.layout_symbol["text-size"]),"text-max-width":new s(r.layout_symbol["text-max-width"]),"text-line-height":new a(r.layout_symbol["text-line-height"]),"text-letter-spacing":new s(r.layout_symbol["text-letter-spacing"]),"text-justify":new s(r.layout_symbol["text-justify"]),"text-anchor":new s(r.layout_symbol["text-anchor"]),"text-max-angle":new a(r.layout_symbol["text-max-angle"]),"text-rotate":new s(r.layout_symbol["text-rotate"]),"text-padding":new a(r.layout_symbol["text-padding"]),"text-keep-upright":new a(r.layout_symbol["text-keep-upright"]),"text-transform":new s(r.layout_symbol["text-transform"]),"text-offset":new s(r.layout_symbol["text-offset"]),"text-allow-overlap":new a(r.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new a(r.layout_symbol["text-ignore-placement"]),"text-optional":new a(r.layout_symbol["text-optional"])})),l=new o({"icon-opacity":new s(r.paint_symbol["icon-opacity"]),"icon-color":new s(r.paint_symbol["icon-color"]),"icon-halo-color":new s(r.paint_symbol["icon-halo-color"]),"icon-halo-width":new s(r.paint_symbol["icon-halo-width"]),"icon-halo-blur":new s(r.paint_symbol["icon-halo-blur"]),"icon-translate":new a(r.paint_symbol["icon-translate"]),"icon-translate-anchor":new a(r.paint_symbol["icon-translate-anchor"]),"text-opacity":new s(r.paint_symbol["text-opacity"]),"text-color":new s(r.paint_symbol["text-color"]),"text-halo-color":new s(r.paint_symbol["text-halo-color"]),"text-halo-width":new s(r.paint_symbol["text-halo-width"]),"text-halo-blur":new s(r.paint_symbol["text-halo-blur"]),"text-translate":new a(r.paint_symbol["text-translate"]),"text-translate-anchor":new a(r.paint_symbol["text-translate-anchor"])});t.exports={paint:l,layout:u}},{"../../style-spec/reference/latest":151,"../properties":188}],210:[function(e,t,n){"use strict";var r=e("./style_layer"),i=e("../util/util"),o=e("../style-spec/feature_filter"),a=e("../style-spec/group_by_layout"),s=function(e){e&&this.replace(e)};s.prototype.replace=function(e){this._layerConfigs={},this._layers={},this.update(e,[])},s.prototype.update=function(e,t){for(var n=this,s=0,u=e;s<u.length;s+=1){var l=u[s];n._layerConfigs[l.id]=l;var c=n._layers[l.id]=r.create(l);c._featureFilter=o(c.filter)}for(var f=0,p=t;f<p.length;f+=1){var h=p[f];delete n._layerConfigs[h],delete n._layers[h]}this.familiesBySource={};for(var d=a(i.values(this._layerConfigs)),v=0,m=d;v<m.length;v+=1){var y=m[v],g=y.map(function(e){return n._layers[e.id]}),_=g[0];if("none"!==_.visibility){var b=_.source||"",x=n.familiesBySource[b];x||(x=n.familiesBySource[b]={});var w=_.sourceLayer||"_geojsonTileLayer",E=x[w];E||(E=x[w]=[]),E.push(g)}}},t.exports=s},{"../style-spec/feature_filter":148,"../style-spec/group_by_layout":150,"../util/util":275,"./style_layer":191}],211:[function(e,t,n){"use strict";t.exports=e("../style-spec/validate_style.min"),t.exports.emitErrors=function(e,t){if(t&&t.length){for(var n=0,r=t;n<r.length;n+=1){var i=r[n],o=i.message;e.fire("error",{error:new Error(o)})}return!0}return!1}},{"../style-spec/validate_style.min":181}],212:[function(e,t,n){"use strict";var r=function(){this.first=!0};r.prototype.update=function(e,t){var n=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=n,!0))},t.exports=r},{}],213:[function(e,t,n){"use strict";var r=e("@mapbox/point-geometry"),i=e("../util/web_worker_transfer"),o=i.register,a=function(e){function t(t,n,r,i){e.call(this,t,n),this.angle=r,void 0!==i&&(this.segment=i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.clone=function(){return new t(this.x,this.y,this.angle,this.segment)},t}(r);o("Anchor",a),t.exports=a},{"../util/web_worker_transfer":278,"@mapbox/point-geometry":4}],214:[function(e,t,n){"use strict";function r(e,t,n,r,i){if(void 0===t.segment)return!0;for(var o=t,a=t.segment+1,s=0;s>-n/2;){if(--a<0)return!1;s-=e[a].dist(o),o=e[a]}s+=e[a].dist(e[a+1]),a++;for(var u=[],l=0;s<n/2;){var c=e[a-1],f=e[a],p=e[a+1];if(!p)return!1;var h=c.angleTo(f)-f.angleTo(p);for(h=Math.abs((h+3*Math.PI)%(2*Math.PI)-Math.PI),u.push({distance:s,angleDelta:h}),l+=h;s-u[0].distance>r;)l-=u.shift().angleDelta;if(l>i)return!1;a++,s+=f.dist(p)}return!0}t.exports=r},{}],215:[function(e,t,n){"use strict";function r(e,t,n,r,o){for(var a=[],s=0;s<e.length;s++)for(var u=e[s],l=void 0,c=0;c<u.length-1;c++){var f=u[c],p=u[c+1];f.x<t&&p.x<t||(f.x<t?f=new i(t,f.y+(p.y-f.y)*((t-f.x)/(p.x-f.x)))._round():p.x<t&&(p=new i(t,f.y+(p.y-f.y)*((t-f.x)/(p.x-f.x)))._round()),f.y<n&&p.y<n||(f.y<n?f=new i(f.x+(p.x-f.x)*((n-f.y)/(p.y-f.y)),n)._round():p.y<n&&(p=new i(f.x+(p.x-f.x)*((n-f.y)/(p.y-f.y)),n)._round()),f.x>=r&&p.x>=r||(f.x>=r?f=new i(r,f.y+(p.y-f.y)*((r-f.x)/(p.x-f.x)))._round():p.x>=r&&(p=new i(r,f.y+(p.y-f.y)*((r-f.x)/(p.x-f.x)))._round()),f.y>=o&&p.y>=o||(f.y>=o?f=new i(f.x+(p.x-f.x)*((o-f.y)/(p.y-f.y)),o)._round():p.y>=o&&(p=new i(f.x+(p.x-f.x)*((o-f.y)/(p.y-f.y)),o)._round()),l&&f.equals(l[l.length-1])||(l=[f],a.push(l)),l.push(p)))))}return a}var i=e("@mapbox/point-geometry");t.exports=r},{"@mapbox/point-geometry":4}],216:[function(e,t,n){"use strict";var r=function(e,t,n,r,i,o,a,s,u,l,c){var f=a.top*s-u,p=a.bottom*s+u,h=a.left*s-u,d=a.right*s+u;if(this.boxStartIndex=e.length,l){var v=p-f,m=d-h;v>0&&(v=Math.max(10*s,v),this._addLineCollisionCircles(e,t,n,n.segment,m,v,r,i,o,c))}else e.emplaceBack(n.x,n.y,h,f,d,p,r,i,o,0,0);this.boxEndIndex=e.length};r.prototype._addLineCollisionCircles=function(e,t,n,r,i,o,a,s,u,l){var c=o/2,f=Math.floor(i/c),p=1+.4*Math.log(l)/Math.LN2,h=Math.floor(f*p/2),d=-o/2,v=n,m=r+1,y=d,g=-i/2,_=g-i/4;do{if(--m<0){if(y>g)return;m=0;break}y-=t[m].dist(v),v=t[m]}while(y>_);for(var b=t[m].dist(t[m+1]),x=-h;x<f+h;x++){var w=x*c,E=g+w;if(w<0&&(E+=w),w>i&&(E+=w-i),!(E<y)){for(;y+b<E;){if(y+=b,++m+1>=t.length)return;b=t[m].dist(t[m+1])}var S=E-y,T=t[m],A=t[m+1],O=A.sub(T)._unit()._mult(S)._add(T)._round(),P=Math.abs(E-d)<c?0:.8*(E-d);e.emplaceBack(O.x,O.y,-o/2,-o/2,o/2,o/2,a,s,u,o/2,P)}}},t.exports=r},{}],217:[function(e,t,n){"use strict";function r(e,t,n){e[t+4]=n?1:0}var i=e("@mapbox/point-geometry"),o=e("../util/intersection_tests"),a=e("./grid_index"),s=e("@mapbox/gl-matrix"),u=(s.mat4,e("../symbol/projection")),l=function(e,t,n){void 0===t&&(t=new a(e.width+200,e.height+200,25)),void 0===n&&(n=new a(e.width+200,e.height+200,25)),this.transform=e,this.grid=t,this.ignoredGrid=n,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+100,this.screenBottomBoundary=e.height+100};l.prototype.placeCollisionBox=function(e,t,n,r){var i=this.projectAndGetPerspectiveRatio(r,e.anchorPointX,e.anchorPointY),o=n*i.perspectiveRatio,a=e.x1*o+i.point.x,s=e.y1*o+i.point.y,u=e.x2*o+i.point.x,l=e.y2*o+i.point.y;return!t&&this.grid.hitTest(a,s,u,l)?{box:[],offscreen:!1}:{box:[a,s,u,l],offscreen:this.isOffscreen(a,s,u,l)}},l.prototype.approximateTileDistance=function(e,t,n,r,i){var o=i?1:r/this.pitchfactor,a=e.lastSegmentViewportDistance*n;return e.prevTileDistance+a+(o-1)*a*Math.abs(Math.sin(t))},l.prototype.placeCollisionCircles=function(e,t,n,o,a,s,l,c,f,p,h,d,v){var m=this,y=[],g=this.projectAnchor(p,s.anchorX,s.anchorY),_={},b=f/24,x=s.lineOffsetX*f,w=s.lineOffsetY*f,E=new i(s.anchorX,s.anchorY),S=u.project(E,h).point,T=u.placeFirstAndLastGlyph(b,c,x,w,!1,S,E,s,l,h,_,!0),A=!1,O=!0,P=g.perspectiveRatio*o,C=1/(o*n),k=0,R=0;T&&(k=this.approximateTileDistance(T.first.tileDistance,T.first.angle,C,g.cameraDistance,v),R=this.approximateTileDistance(T.last.tileDistance,T.last.angle,C,g.cameraDistance,v));for(var M=0;M<e.length;M+=5){var I=e[M],L=e[M+1],D=e[M+2],N=e[M+3];if(!T||N<-k||N>R)r(e,M,!1);else{var F=m.projectPoint(p,I,L),j=D*P;if(y.length>0){var B=F.x-y[y.length-4],z=F.y-y[y.length-3];if(j*j*2>B*B+z*z&&M+8<e.length){var U=e[M+8];if(U>-k&&U<R){r(e,M,!1);continue}}}var V=M/5;if(y.push(F.x,F.y,j,V),r(e,M,!0),O=O&&m.isOffscreen(F.x-j,F.y-j,F.x+j,F.y+j),!t&&m.grid.hitTestCircle(F.x,F.y,j)){if(!d)return{circles:[],offscreen:!1};A=!0}}}return{circles:A?[]:y,offscreen:O}},l.prototype.queryRenderedSymbols=function(e,t,n,r,a,s){var u=this,l={},c=[];if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return c;for(var f=this.transform.calculatePosMatrix(t.toUnwrapped()),p=[],h=1/0,d=1/0,v=-1/0,m=-1/0,y=0;y<e.length;y++)for(var g=e[y],_=0;_<g.length;_++){var b=u.projectPoint(f,g[_].x,g[_].y);h=Math.min(h,b.x),d=Math.min(d,b.y),v=Math.max(v,b.x),m=Math.max(m,b.y),p.push(b)}for(var x=t.key,w=[],E=this.grid.query(h,d,v,m),S=0;S<E.length;S++)E[S].sourceID===a&&E[S].tileID===x&&s[E[S].bucketInstanceId]&&w.push(E[S].boxIndex);for(var T=this.ignoredGrid.query(h,d,v,m),A=0;A<T.length;A++)T[A].sourceID===a&&T[A].tileID===x&&s[T[A].bucketInstanceId]&&w.push(T[A].boxIndex);for(var O=0;O<w.length;O++){var P=r.get(w[O]),C=P.sourceLayerIndex,k=P.featureIndex,R=P.bucketIndex;if(void 0===l[C]&&(l[C]={}),void 0===l[C][k]&&(l[C][k]={}),!l[C][k][R]){var M=u.projectAndGetPerspectiveRatio(f,P.anchorPointX,P.anchorPointY),I=n*M.perspectiveRatio,L=P.x1*I+M.point.x,D=P.y1*I+M.point.y,N=P.x2*I+M.point.x,F=P.y2*I+M.point.y,j=[new i(L,D),new i(N,D),new i(N,F),new i(L,F)];o.polygonIntersectsPolygon(p,j)&&(l[C][k][R]=!0,c.push(w[O]))}}return c},l.prototype.insertCollisionBox=function(e,t,n,r,i,o){var a=t?this.ignoredGrid:this.grid,s={tileID:n,sourceID:r,bucketInstanceId:i,boxIndex:o};a.insert(s,e[0],e[1],e[2],e[3])},l.prototype.insertCollisionCircles=function(e,t,n,r,i,o){for(var a=t?this.ignoredGrid:this.grid,s=0;s<e.length;s+=4){var u={tileID:n,sourceID:r,bucketInstanceId:i,boxIndex:o+e[s+3]};a.insertCircle(u,e[s],e[s+1],e[s+2])}},l.prototype.projectAnchor=function(e,t,n){var r=[t,n,0,1];return u.xyTransformMat4(r,r,e),{perspectiveRatio:.5+this.transform.cameraToCenterDistance/r[3]*.5,cameraDistance:r[3]}},l.prototype.projectPoint=function(e,t,n){var r=[t,n,0,1];return u.xyTransformMat4(r,r,e),new i((r[0]/r[3]+1)/2*this.transform.width+100,(-r[1]/r[3]+1)/2*this.transform.height+100)},l.prototype.projectAndGetPerspectiveRatio=function(e,t,n){var r=[t,n,0,1];return u.xyTransformMat4(r,r,e),{point:new i((r[0]/r[3]+1)/2*this.transform.width+100,(-r[1]/r[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/r[3]*.5}},l.prototype.isOffscreen=function(e,t,n,r){return n<100||e>=this.screenRightBoundary||r<100||t>this.screenBottomBoundary},t.exports=l},{"../symbol/projection":224,"../util/intersection_tests":264,"./grid_index":220,"@mapbox/gl-matrix":2,"@mapbox/point-geometry":4}],218:[function(e,t,n){"use strict";var r=e("../data/extent"),i=512/r/2,o=function(e,t,n){var r=this;this.tileID=e,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(var i=0,o=t;i<o.length;i+=1){var a=o[i],s=a.key;r.indexedSymbolInstances[s]||(r.indexedSymbolInstances[s]=[]),r.indexedSymbolInstances[s].push({crossTileID:a.crossTileID,coord:r.getScaledCoordinates(a,e)})}};o.prototype.getScaledCoordinates=function(e,t){var n=t.canonical.z-this.tileID.canonical.z,o=i/Math.pow(2,n),a=e.anchor;return{x:Math.floor((t.canonical.x*r+a.x)*o),y:Math.floor((t.canonical.y*r+a.y)*o)}},o.prototype.findMatches=function(e,t,n){for(var r=this,i=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z),o=0,a=e;o<a.length;o+=1){var s=a[o];if(!s.crossTileID){var u=r.indexedSymbolInstances[s.key];if(u)for(var l=r.getScaledCoordinates(s,t),c=0,f=u;c<f.length;c+=1){var p=f[c];if(Math.abs(p.coord.x-l.x)<=i&&Math.abs(p.coord.y-l.y)<=i&&!n[p.crossTileID]){n[p.crossTileID]=!0,s.crossTileID=p.crossTileID;break}}}}};var a=function(){this.maxCrossTileID=0};a.prototype.generate=function(){return++this.maxCrossTileID};var s=function(){this.indexes={},this.usedCrossTileIDs={}};s.prototype.addBucket=function(e,t,n){var r=this;if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(var i=0,a=t.symbolInstances;i<a.length;i+=1)a[i].crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});var s=this.usedCrossTileIDs[e.overscaledZ];for(var u in r.indexes){var l=r.indexes[u];if(Number(u)>e.overscaledZ)for(var c in l){var f=l[c];f.tileID.isChildOf(e)&&f.findMatches(t.symbolInstances,e,s)}else{var p=e.scaledTo(Number(u)),h=l[p.key];h&&h.findMatches(t.symbolInstances,e,s)}}for(var d=0,v=t.symbolInstances;d<v.length;d+=1){var m=v[d];m.crossTileID||(m.crossTileID=n.generate(),s[m.crossTileID]=!0)}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new o(e,t.symbolInstances,t.bucketInstanceId),!0},s.prototype.removeBucketCrossTileIDs=function(e,t){var n=this;for(var r in t.indexedSymbolInstances)for(var i=0,o=t.indexedSymbolInstances[r];i<o.length;i+=1){var a=o[i];delete n.usedCrossTileIDs[e][a.crossTileID]}},s.prototype.removeStaleBuckets=function(e){var t=this,n=!1;for(var r in t.indexes){var i=t.indexes[r];for(var o in i)e[i[o].bucketInstanceId]||(t.removeBucketCrossTileIDs(r,i[o]),delete i[o],n=!0)}return n};var u=function(){this.layerIndexes={},this.crossTileIDs=new a,this.maxBucketInstanceId=0};u.prototype.addLayer=function(e,t){var n=this,r=this.layerIndexes[e.id];void 0===r&&(r=this.layerIndexes[e.id]=new s);for(var i=!1,o={},a=0,u=t;a<u.length;a+=1){var l=u[a],c=l.getBucket(e);c&&(c.bucketInstanceId||(c.bucketInstanceId=++n.maxBucketInstanceId),r.addBucket(l.tileID,c,n.crossTileIDs)&&(i=!0),o[c.bucketInstanceId]=!0)}return r.removeStaleBuckets(o)&&(i=!0),i},u.prototype.pruneUnusedLayers=function(e){var t=this,n={};e.forEach(function(e){n[e]=!0});for(var r in t.layerIndexes)n[r]||delete t.layerIndexes[r]},t.exports=u},{"../data/extent":53}],219:[function(e,t,n){"use strict";function r(e,t,n,r,o,a,s,u,l){var c=r?.6*a*s:0,f=Math.max(r?r.right-r.left:0,o?o.right-o.left:0),p=0===e[0].x||e[0].x===l||0===e[0].y||e[0].y===l;t-f*s<t/4&&(t=f*s+t/4);var h=2*a;return i(e,p?t/2*u%t:(f/2+h)*s*u%t,t,c,n,f*s,p,!1,l)}function i(e,t,n,r,u,l,c,f,p){for(var h=l/2,d=0,v=0;v<e.length-1;v++)d+=e[v].dist(e[v+1]);for(var m=0,y=t-n,g=[],_=0;_<e.length-1;_++){for(var b=e[_],x=e[_+1],w=b.dist(x),E=x.angleTo(b);y+n<m+w;){y+=n;var S=(y-m)/w,T=o(b.x,x.x,S),A=o(b.y,x.y,S);if(T>=0&&T<p&&A>=0&&A<p&&y-h>=0&&y+h<=d){var O=new a(T,A,E,_);O._round(),r&&!s(e,O,l,r,u)||g.push(O)}}m+=w}return f||g.length||c||(g=i(e,m/2,n,r,u,l,c,!0,p)),g}var o=e("../style-spec/util/interpolate").number,a=e("../symbol/anchor"),s=e("./check_max_angle");t.exports=r},{"../style-spec/util/interpolate":158,"../symbol/anchor":213,"./check_max_angle":214}],220:[function(e,t,n){"use strict";var r=function(e,t,n){var r=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(e/n),this.yCellCount=Math.ceil(t/n);for(var o=0;o<this.xCellCount*this.yCellCount;o++)r.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0};r.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},r.prototype.insert=function(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},r.prototype.insertCircle=function(e,t,n,r){this._forEachCell(t-r,n-r,t+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(n),this.circles.push(r)},r.prototype._insertBoxCell=function(e,t,n,r,i,o){this.boxCells[i].push(o)},r.prototype._insertCircleCell=function(e,t,n,r,i,o){this.circleCells[i].push(o)},r.prototype._query=function(e,t,n,r,i){if(n<0||e>this.width||r<0||t>this.height)return!i&&[];var o=[];if(e<=0&&t<=0&&this.width<=n&&this.height<=r)o=Array.prototype.slice.call(this.boxKeys).concat(this.circleKeys);else{var a={hitTest:i,seenUids:{box:{},circle:{}}};this._forEachCell(e,t,n,r,this._queryCell,o,a)}return i?o.length>0:o},r.prototype._queryCircle=function(e,t,n,r){var i=e-n,o=e+n,a=t-n,s=t+n;if(o<0||i>this.width||s<0||a>this.height)return!r&&[];var u=[],l={hitTest:r,circle:{x:e,y:t,radius:n},seenUids:{box:{},circle:{}}};return this._forEachCell(i,a,o,s,this._queryCellCircle,u,l),r?u.length>0:u},r.prototype.query=function(e,t,n,r){return this._query(e,t,n,r,!1)},r.prototype.hitTest=function(e,t,n,r){return this._query(e,t,n,r,!0)},r.prototype.hitTestCircle=function(e,t,n){return this._queryCircle(e,t,n,!0)},r.prototype._queryCell=function(e,t,n,r,i,o,a){var s=this,u=a.seenUids,l=this.boxCells[i];if(null!==l)for(var c=this.bboxes,f=0,p=l;f<p.length;f+=1){var h=p[f];if(!u.box[h]){u.box[h]=!0;var d=4*h;if(e<=c[d+2]&&t<=c[d+3]&&n>=c[d+0]&&r>=c[d+1]){if(a.hitTest)return o.push(!0),!0;o.push(s.boxKeys[h])}}}var v=this.circleCells[i];if(null!==v)for(var m=this.circles,y=0,g=v;y<g.length;y+=1){var _=g[y];if(!u.circle[_]){u.circle[_]=!0;var b=3*_;if(s._circleAndRectCollide(m[b],m[b+1],m[b+2],e,t,n,r)){if(a.hitTest)return o.push(!0),!0;o.push(s.circleKeys[_])}}}},r.prototype._queryCellCircle=function(e,t,n,r,i,o,a){var s=this,u=a.circle,l=a.seenUids,c=this.boxCells[i];if(null!==c)for(var f=this.bboxes,p=0,h=c;p<h.length;p+=1){var d=h[p];if(!l.box[d]){l.box[d]=!0;var v=4*d;if(s._circleAndRectCollide(u.x,u.y,u.radius,f[v+0],f[v+1],f[v+2],f[v+3]))return o.push(!0),!0}}var m=this.circleCells[i];if(null!==m)for(var y=this.circles,g=0,_=m;g<_.length;g+=1){var b=_[g];if(!l.circle[b]){l.circle[b]=!0;var x=3*b;if(s._circlesCollide(y[x],y[x+1],y[x+2],u.x,u.y,u.radius))return o.push(!0),!0}}},r.prototype._forEachCell=function(e,t,n,r,i,o,a){for(var s=this,u=this._convertToXCellCoord(e),l=this._convertToYCellCoord(t),c=this._convertToXCellCoord(n),f=this._convertToYCellCoord(r),p=u;p<=c;p++)for(var h=l;h<=f;h++){var d=s.xCellCount*h+p;if(i.call(s,e,t,n,r,d,o,a))return}},r.prototype._convertToXCellCoord=function(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))},r.prototype._convertToYCellCoord=function(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))},r.prototype._circlesCollide=function(e,t,n,r,i,o){var a=r-e,s=i-t,u=n+o;return u*u>a*a+s*s},r.prototype._circleAndRectCollide=function(e,t,n,r,i,o,a){var s=(o-r)/2,u=Math.abs(e-(r+s));if(u>s+n)return!1;var l=(a-i)/2,c=Math.abs(t-(i+l));if(c>l+n)return!1;if(u<=s||c<=l)return!0;var f=u-s,p=c-l;return f*f+p*p<=n*n},t.exports=r},{}],221:[function(e,t,n){"use strict";t.exports=function(e){function t(t){s.push(e[t]),u++}function n(e,t,n){var r=a[e];return delete a[e],a[t]=r,s[r].geometry[0].pop(),s[r].geometry[0]=s[r].geometry[0].concat(n[0]),r}function r(e,t,n){var r=o[t];return delete o[t],o[e]=r,s[r].geometry[0].shift(),s[r].geometry[0]=n[0].concat(s[r].geometry[0]),r}function i(e,t,n){var r=n?t[0][t[0].length-1]:t[0][0];return e+":"+r.x+":"+r.y}for(var o={},a={},s=[],u=0,l=0;l<e.length;l++){var c=e[l],f=c.geometry,p=c.text;if(p){var h=i(p,f),d=i(p,f,!0);if(h in a&&d in o&&a[h]!==o[d]){var v=r(h,d,f),m=n(h,d,s[v].geometry);delete o[h],delete a[d],a[i(p,s[m].geometry,!0)]=m,s[v].geometry=null}else h in a?n(h,d,f):d in o?r(h,d,f):(t(l),o[h]=u-1,a[d]=u-1)}else t(l)}return s.filter(function(e){return e.geometry})}},{}],222:[function(e,t,n){"use strict";var r=e("../util/web_worker_transfer"),i=r.register,o=function(){this.opacity=0,this.targetOpacity=0,this.time=0};o.prototype.clone=function(){var e=new o;return e.opacity=this.opacity,e.targetOpacity=this.targetOpacity,e.time=this.time,e},i("OpacityState",o),t.exports=o},{"../util/web_worker_transfer":278}],223:[function(e,t,n){"use strict";function r(e,t,n){e.emplaceBack(t?1:0,n?1:0),e.emplaceBack(t?1:0,n?1:0),e.emplaceBack(t?1:0,n?1:0),e.emplaceBack(t?1:0,n?1:0)}function i(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;var t=e.placed?1:0,n=Math.floor(127*e.opacity);return n*v+t*m+n*y+t*g+n*_+t*b+n*x+t}var o=e("./collision_index"),a=e("../data/extent"),s=e("./symbol_size"),u=e("./projection"),l=e("../style/style_layer/symbol_style_layer_properties").layout,c=e("../source/pixels_to_tile_units"),f=function(e,t,n,r){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):r&&n?1:0,this.placed=n};f.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var p=function(e,t,n,r,i){this.text=new f(e?e.text:null,t,n,i),this.icon=new f(e?e.icon:null,t,r,i)};p.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var h=function(e,t,n){this.text=e,this.icon=t,this.skipFade=n},d=function(e,t){this.transform=e.clone(),this.collisionIndex=new o(this.transform),this.placements={},this.opacities={},this.stale=!1,this.fadeDuration=t};d.prototype.placeLayerTile=function(e,t,n,r){var i=t.getBucket(e);if(i){var o=i.layers[0].layout,s=Math.pow(2,this.transform.zoom-t.tileID.overscaledZ),l=t.tileSize/a,f=this.transform.calculatePosMatrix(t.tileID.toUnwrapped()),p=u.getLabelPlaneMatrix(f,"map"===o.get("text-pitch-alignment"),"map"===o.get("text-rotation-alignment"),this.transform,c(t,1,this.transform.zoom)),h=u.getLabelPlaneMatrix(f,"map"===o.get("icon-pitch-alignment"),"map"===o.get("icon-rotation-alignment"),this.transform,c(t,1,this.transform.zoom));this.placeLayerBucket(i,f,p,h,s,l,n,r,t.collisionBoxArray,t.tileID.key,e.source)}},d.prototype.placeLayerBucket=function(e,t,n,r,i,o,a,u,c,f,p){for(var d=this,v=e.layers[0].layout,m=s.evaluateSizeForZoom(e.textSizeData,this.transform.zoom,l.properties["text-size"]),y=!e.hasTextData()||v.get("text-optional"),g=!e.hasIconData()||v.get("icon-optional"),_=0,b=e.symbolInstances;_<b.length;_+=1){var x=b[_];if(!u[x.crossTileID]){var w=!1,E=!1,S=!0,T=null,A=null,O=null;x.collisionArrays||(x.collisionArrays=e.deserializeCollisionBoxes(c,x.textBoxStartIndex,x.textBoxEndIndex,x.iconBoxStartIndex,x.iconBoxEndIndex)),x.collisionArrays.textBox&&(T=d.collisionIndex.placeCollisionBox(x.collisionArrays.textBox,v.get("text-allow-overlap"),o,t),w=T.box.length>0,S=S&&T.offscreen);var P=x.collisionArrays.textCircles;if(P){var C=e.text.placedSymbolArray.get(x.placedTextSymbolIndices[0]),k=s.evaluateSizeForFeature(e.textSizeData,m,C);A=d.collisionIndex.placeCollisionCircles(P,v.get("text-allow-overlap"),i,o,x.key,C,e.lineVertexArray,e.glyphOffsetArray,k,t,n,a,"map"===v.get("text-pitch-alignment")),w=v.get("text-allow-overlap")||A.circles.length>0,S=S&&A.offscreen}x.collisionArrays.iconBox&&(O=d.collisionIndex.placeCollisionBox(x.collisionArrays.iconBox,v.get("icon-allow-overlap"),o,t),E=O.box.length>0,S=S&&O.offscreen),y||g?g?y||(E=E&&w):w=E&&w:E=w=E&&w,w&&T&&d.collisionIndex.insertCollisionBox(T.box,v.get("text-ignore-placement"),f,p,e.bucketInstanceId,x.textBoxStartIndex),E&&O&&d.collisionIndex.insertCollisionBox(O.box,v.get("icon-ignore-placement"),f,p,e.bucketInstanceId,x.iconBoxStartIndex),w&&A&&d.collisionIndex.insertCollisionCircles(A.circles,v.get("text-ignore-placement"),f,p,e.bucketInstanceId,x.textBoxStartIndex),d.placements[x.crossTileID]=new h(w,E,S||e.justReloaded),u[x.crossTileID]=!0}}e.justReloaded=!1},d.prototype.commit=function(e,t){var n=this;this.commitTime=t;var r=!1,i=e&&0!==this.fadeDuration?(this.commitTime-e.commitTime)/this.fadeDuration:1,o=e?e.opacities:{};for(var a in n.placements){var s=n.placements[a],u=o[a];u?(n.opacities[a]=new p(u,i,s.text,s.icon),r=r||s.text!==u.text.placed||s.icon!==u.icon.placed):(n.opacities[a]=new p(null,i,s.text,s.icon,s.skipFade),r=r||s.text||s.icon)}for(var l in o){var c=o[l];if(!n.opacities[l]){var f=new p(c,i,!1,!1);f.isHidden()||(n.opacities[l]=f,r=r||c.text.placed||c.icon.placed)}}r?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)},d.prototype.updateLayerOpacities=function(e,t){for(var n=this,r={},i=0,o=t;i<o.length;i+=1){var a=o[i],s=a.getBucket(e);s&&n.updateBucketOpacities(s,r,a.collisionBoxArray)}},d.prototype.updateBucketOpacities=function(e,t,n){var o=this;e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasCollisionBoxData()&&e.collisionBox.collisionVertexArray.clear(),e.hasCollisionCircleData()&&e.collisionCircle.collisionVertexArray.clear();for(var a=e.layers[0].layout,s=new p(null,0,a.get("text-allow-overlap"),a.get("icon-allow-overlap"),!0),u=0;u<e.symbolInstances.length;u++){var l=e.symbolInstances[u],c=t[l.crossTileID],f=o.opacities[l.crossTileID];f?c&&(f=s):(f=s,o.opacities[l.crossTileID]=f),t[l.crossTileID]=!0;var h=l.numGlyphVertices>0||l.numVerticalGlyphVertices>0,d=l.numIconVertices>0;if(h){for(var v=i(f.text),m=(l.numGlyphVertices+l.numVerticalGlyphVertices)/4,y=0;y<m;y++)e.text.opacityVertexArray.emplaceBack(v);for(var g=0,_=l.placedTextSymbolIndices;g<_.length;g+=1){var b=_[g];e.text.placedSymbolArray.get(b).hidden=f.text.isHidden()}}if(d){for(var x=i(f.icon),w=0;w<l.numIconVertices/4;w++)e.icon.opacityVertexArray.emplaceBack(x);e.icon.placedSymbolArray.get(u).hidden=f.icon.isHidden()}l.collisionArrays||(l.collisionArrays=e.deserializeCollisionBoxes(n,l.textBoxStartIndex,l.textBoxEndIndex,l.iconBoxStartIndex,l.iconBoxEndIndex));var E=l.collisionArrays;if(E){E.textBox&&e.hasCollisionBoxData()&&r(e.collisionBox.collisionVertexArray,f.text.placed,!1),E.iconBox&&e.hasCollisionBoxData()&&r(e.collisionBox.collisionVertexArray,f.icon.placed,!1);var S=E.textCircles;if(S&&e.hasCollisionCircleData())for(var T=0;T<S.length;T+=5){var A=c||0===S[T+4];r(e.collisionCircle.collisionVertexArray,f.text.placed,A)}}}e.sortFeatures(this.transform.angle),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasCollisionBoxData()&&e.collisionBox.collisionVertexBuffer&&e.collisionBox.collisionVertexBuffer.updateData(e.collisionBox.collisionVertexArray),e.hasCollisionCircleData()&&e.collisionCircle.collisionVertexBuffer&&e.collisionCircle.collisionVertexBuffer.updateData(e.collisionCircle.collisionVertexArray)},d.prototype.symbolFadeChange=function(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration},d.prototype.hasTransitions=function(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration},d.prototype.stillRecent=function(e){return"undefined"!==this.commitTime&&this.commitTime+this.fadeDuration>e},d.prototype.setStale=function(){this.stale=!0};var v=Math.pow(2,25),m=Math.pow(2,24),y=Math.pow(2,17),g=Math.pow(2,16),_=Math.pow(2,9),b=Math.pow(2,8),x=Math.pow(2,1);t.exports=d},{"../data/extent":53,"../source/pixels_to_tile_units":104,"../style/style_layer/symbol_style_layer_properties":209,"./collision_index":217,"./projection":224,"./symbol_size":228}],224:[function(e,t,n){"use strict";function r(e,t,n,r,i){var o=y.identity(new Float32Array(16));return t?(y.identity(o),y.scale(o,o,[1/i,1/i,1]),n||y.rotateZ(o,o,r.angle)):(y.scale(o,o,[r.width/2,-r.height/2,1]),y.translate(o,o,[1,-1,0]),y.multiply(o,o,e)),o}function i(e,t,n,r,i){var o=y.identity(new Float32Array(16));return t?(y.multiply(o,o,e),y.scale(o,o,[i,i,1]),n||y.rotateZ(o,o,-r.angle)):(y.scale(o,o,[1,-1,1]),y.translate(o,o,[-1,-1,0]),y.scale(o,o,[2/r.width,2/r.height,1])),o}function o(e,t){var n=[e.x,e.y,0,1];d(n,n,t);var r=n[3];return{point:new v(n[0]/r,n[1]/r),signedDistanceFromCamera:r}}function a(e,t){var n=e[0]/e[3],r=e[1]/e[3];return n>=-t[0]&&n<=t[0]&&r>=-t[1]&&r<=t[1]}function s(e,t,n,r,i,s,u,l){var f=r?e.textSizeData:e.iconSizeData,p=_.evaluateSizeForZoom(f,n.transform.zoom,w.properties[r?"text-size":"icon-size"]),d=[256/n.width*2+1,256/n.height*2+1],m=r?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;m.clear();for(var y=e.lineVertexArray,b=r?e.text.placedSymbolArray:e.icon.placedSymbolArray,x=n.transform.width/n.transform.height,S=!1,T=0;T<b.length;T++){var A=b.get(T);if(A.hidden||A.writingMode===E.vertical&&!S)h(A.numGlyphs,m);else{S=!1;var O=[A.anchorX,A.anchorY,0,1];if(g.transformMat4(O,O,t),a(O,d)){var P=O[3],C=.5+P/n.transform.cameraToCenterDistance*.5,k=_.evaluateSizeForFeature(f,p,A),R=u?k*C:k/C,M=new v(A.anchorX,A.anchorY),I=o(M,i).point,L={},D=c(A,R,!1,l,t,i,s,e.glyphOffsetArray,y,m,I,M,L,x);S=D.useVertical,(D.notEnoughRoom||S||D.needsFlipping&&c(A,R,!0,l,t,i,s,e.glyphOffsetArray,y,m,I,M,L,x).notEnoughRoom)&&h(A.numGlyphs,m)}else h(A.numGlyphs,m)}}r?e.text.dynamicLayoutVertexBuffer.updateData(m):e.icon.dynamicLayoutVertexBuffer.updateData(m)}function u(e,t,n,r,i,o,a,s,u,l,c,f){var h=s.glyphStartIndex+s.numGlyphs,d=s.lineStartIndex,v=s.lineStartIndex+s.lineLength,m=t.getoffsetX(s.glyphStartIndex),y=t.getoffsetX(h-1),g=p(e*m,n,r,i,o,a,s.segment,d,v,u,l,c,f);if(!g)return null;var _=p(e*y,n,r,i,o,a,s.segment,d,v,u,l,c,f);return _?{first:g,last:_}:null}function l(e,t,n,r){return e===E.horizontal&&Math.abs(n.y-t.y)>Math.abs(n.x-t.x)*r?{useVertical:!0}:(e===E.vertical?t.y<n.y:t.x>n.x)?{needsFlipping:!0}:null}function c(e,t,n,r,i,a,s,c,h,d,m,y,g,_){var b,w=t/24,E=e.lineOffsetX*t,S=e.lineOffsetY*t;if(e.numGlyphs>1){var T=e.glyphStartIndex+e.numGlyphs,A=e.lineStartIndex,O=e.lineStartIndex+e.lineLength,P=u(w,c,E,S,n,m,y,e,h,a,g,!1);if(!P)return{notEnoughRoom:!0};var C=o(P.first.point,s).point,k=o(P.last.point,s).point;if(r&&!n){var R=l(e.writingMode,C,k,_);if(R)return R}b=[P.first];for(var M=e.glyphStartIndex+1;M<T-1;M++)b.push(p(w*c.getoffsetX(M),E,S,n,m,y,e.segment,A,O,h,a,g,!1));b.push(P.last)}else{if(r&&!n){var I=o(y,i).point,L=e.lineStartIndex+e.segment+1,D=new v(h.getx(L),h.gety(L)),N=o(D,i),F=N.signedDistanceFromCamera>0?N.point:f(y,D,I,1,i),j=l(e.writingMode,I,F,_);if(j)return j}var B=p(w*c.getoffsetX(e.glyphStartIndex),E,S,n,m,y,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,h,a,g,!1);if(!B)return{notEnoughRoom:!0};b=[B]}for(var z=0,U=b;z<U.length;z+=1){var V=U[z];x(d,V.point,V.angle)}return{}}function f(e,t,n,r,i){var a=o(e.add(e.sub(t)._unit()),i).point,s=n.sub(a);return n.add(s._mult(r/s.mag()))}function p(e,t,n,r,i,a,s,u,l,c,p,h,d){var m=r?e-t:e+t,y=m>0?1:-1,g=0;r&&(y*=-1,g=Math.PI),y<0&&(g+=Math.PI);for(var _=y>0?u+s:u+s+1,b=_,x=i,w=i,E=0,S=0,T=Math.abs(m);E+S<=T;){if((_+=y)<u||_>=l)return null;if(w=x,void 0===(x=h[_])){var A=new v(c.getx(_),c.gety(_)),O=o(A,p);if(O.signedDistanceFromCamera>0)x=h[_]=O.point;else{var P=_-y;x=f(0===E?a:new v(c.getx(P),c.gety(P)),A,w,T-E+1,p)}}E+=S,S=w.dist(x)}var C=(T-E)/S,k=x.sub(w),R=k.mult(C)._add(w);return R._add(k._unit()._perp()._mult(n*y)),{point:R,angle:g+Math.atan2(x.y-w.y,x.x-w.x),tileDistance:d?{prevTileDistance:_-y===b?0:c.gettileUnitDistanceFromAnchor(_-y),lastSegmentViewportDistance:T-E}:null}}function h(e,t){for(var n=0;n<e;n++){var r=t.length;t.resize(r+4),t.float32.set(S,3*r)}}function d(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e[3]=n[3]*r+n[7]*i+n[15],e}var v=e("@mapbox/point-geometry"),m=e("@mapbox/gl-matrix"),y=m.mat4,g=m.vec4,_=e("./symbol_size"),b=e("../data/bucket/symbol_bucket"),x=b.addDynamicAttributes,w=e("../style/style_layer/symbol_style_layer_properties").layout,E=e("../symbol/shaping").WritingMode;t.exports={updateLineLabels:s,getLabelPlaneMatrix:r,getGlCoordMatrix:i,project:o,placeFirstAndLastGlyph:u,xyTransformMat4:d};var S=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0])},{"../data/bucket/symbol_bucket":51,"../style/style_layer/symbol_style_layer_properties":209,"../symbol/shaping":226,"./symbol_size":228,"@mapbox/gl-matrix":2,"@mapbox/point-geometry":4}],225:[function(e,t,n){"use strict";function r(e,t,n,r,i,a,s){var u,l,c,f,p=t.image,h=n.layout,d=t.top-1/p.pixelRatio,v=t.left-1/p.pixelRatio,m=t.bottom+1/p.pixelRatio,y=t.right+1/p.pixelRatio;if("none"!==h.get("icon-text-fit")&&i){var g=y-v,_=m-d,b=h.get("text-size").evaluate(s)/24,x=i.left*b,w=i.right*b,E=i.top*b,S=i.bottom*b,T=w-x,A=S-E,O=h.get("icon-text-fit-padding")[0],P=h.get("icon-text-fit-padding")[1],C=h.get("icon-text-fit-padding")[2],k=h.get("icon-text-fit-padding")[3],R="width"===h.get("icon-text-fit")?.5*(A-_):0,M="height"===h.get("icon-text-fit")?.5*(T-g):0,I="width"===h.get("icon-text-fit")||"both"===h.get("icon-text-fit")?T:g,L="height"===h.get("icon-text-fit")||"both"===h.get("icon-text-fit")?A:_;u=new o(x+M-k,E+R-O),l=new o(x+M+P+I,E+R-O),c=new o(x+M+P+I,E+R+C+L),f=new o(x+M-k,E+R+C+L)}else u=new o(v,d),l=new o(y,d),c=new o(y,m),f=new o(v,m);var D=n.layout.get("icon-rotate").evaluate(s)*Math.PI/180;if(D){var N=Math.sin(D),F=Math.cos(D),j=[F,-N,N,F];u._matMult(j),l._matMult(j),f._matMult(j),c._matMult(j)}return[{tl:u,tr:l,bl:f,br:c,tex:{x:p.textureRect.x-1,y:p.textureRect.y-1,w:p.textureRect.w+2,h:p.textureRect.h+2},writingMode:void 0,glyphOffset:[0,0]}]}function i(e,t,n,r,i,a,u){for(var l=n.layout.get("text-rotate").evaluate(a)*Math.PI/180,c=n.layout.get("text-offset").evaluate(a).map(function(e){return 24*e}),f=t.positionedGlyphs,p=[],h=0;h<f.length;h++){var d=f[h],v=u[d.glyph];if(v){var m=v.rect;if(m){var y=s+1,g=v.metrics.advance/2,_=r?[d.x+g,d.y]:[0,0],b=r?[0,0]:[d.x+g+c[0],d.y+c[1]],x=v.metrics.left-y-g+b[0],w=-v.metrics.top-y+b[1],E=x+m.w,S=w+m.h,T=new o(x,w),A=new o(E,w),O=new o(x,S),P=new o(E,S);if(r&&d.vertical){var C=new o(-g,g),k=-Math.PI/2,R=new o(5,0);T._rotateAround(k,C)._add(R),A._rotateAround(k,C)._add(R),O._rotateAround(k,C)._add(R),P._rotateAround(k,C)._add(R)}if(l){var M=Math.sin(l),I=Math.cos(l),L=[I,-M,M,I];T._matMult(L),A._matMult(L),O._matMult(L),P._matMult(L)}p.push({tl:T,tr:A,bl:O,br:P,tex:m,writingMode:t.writingMode,glyphOffset:_})}}}return p}var o=e("@mapbox/point-geometry"),a=e("../style/parse_glyph_pbf"),s=a.GLYPH_PBF_BORDER;t.exports={getIconQuads:r,getGlyphQuads:i}},{"../style/parse_glyph_pbf":186,"@mapbox/point-geometry":4}],226:[function(e,t,n){"use strict";function r(e,t){for(var n=[],r=0,i=0,o=t;i<o.length;i+=1){var a=o[i];n.push(e.substring(r,a)),r=a}return r<e.length&&n.push(e.substring(r,e.length)),n}function i(e,t,n,i,o,a,s,u,l,f){var h=e.trim();f===_.vertical&&(h=y(h));var d,v=[],m={positionedGlyphs:v,text:h,top:u[1],bottom:u[1],left:u[0],right:u[0],writingMode:f},b=g.processBidirectionalText;return d=b?b(h,c(h,s,n,t)):r(h,c(h,s,n,t)),p(m,t,d,i,o,a,f,s,l),!!v.length&&m}function o(e,t,n,r){for(var i=0,o=0;o<e.length;o++){var a=r[e.charCodeAt(o)];a&&(i+=a.metrics.advance+t)}return i/Math.max(1,Math.ceil(i/n))}function a(e,t,n,r){var i=Math.pow(e-t,2);return r?e<t?i/2:2*i:i+Math.abs(n)*n}function s(e,t){var n=0;return 10===e&&(n-=1e4),40!==e&&65288!==e||(n+=50),41!==t&&65289!==t||(n+=50),n}function u(e,t,n,r,i,o){for(var s=null,u=a(t,n,i,o),l=0,c=r;l<c.length;l+=1){var f=c[l],p=t-f.x,h=a(p,n,i,o)+f.badness;h<=u&&(s=f,u=h)}return{index:e,x:t,priorBreak:s,badness:u}}function l(e){return e?l(e.priorBreak).concat(e.index):[]}function c(e,t,n,r){if(!n)return[];if(!e)return[];for(var i=[],a=o(e,t,n,r),c=0,f=0;f<e.length;f++){var p=e.charCodeAt(f),h=r[p];h&&!b[p]&&(c+=h.metrics.advance+t),f<e.length-1&&(x[p]||m.charAllowsIdeographicBreaking(p))&&i.push(u(f+1,c,a,i,s(p,e.charCodeAt(f+1)),!1))}return l(u(e.length,c,a,i,0,!0))}function f(e){var t=.5,n=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}function p(e,t,n,r,i,o,a,s,u){for(var l=0,c=-17,p=0,v=e.positionedGlyphs,y="right"===o?1:"left"===o?0:.5,g=0,b=n;g<b.length;g+=1){var x=b[g];if(x=x.trim(),x.length){for(var w=v.length,E=0;E<x.length;E++){var S=x.charCodeAt(E),T=t[S];T&&(m.charHasUprightVerticalOrientation(S)&&a!==_.horizontal?(v.push({glyph:S,x:l,y:0,vertical:!0}),l+=u+s):(v.push({glyph:S,x:l,y:c,vertical:!1}),l+=T.metrics.advance+s))}if(v.length!==w){var A=l-s;p=Math.max(A,p),h(v,t,w,v.length-1,y)}l=0,c+=r}else c+=r}var O=f(i),P=O.horizontalAlign,C=O.verticalAlign;d(v,y,P,C,p,r,n.length);var k=n.length*r;e.top+=-C*k,e.bottom=e.top+k,e.left+=-P*p,e.right=e.left+p}function h(e,t,n,r,i){if(i){var o=t[e[r].glyph];if(o)for(var a=o.metrics.advance,s=(e[r].x+a)*i,u=n;u<=r;u++)e[u].x-=s}}function d(e,t,n,r,i,o,a){for(var s=(t-n)*i,u=(-r*a+.5)*o,l=0;l<e.length;l++)e[l].x+=s,e[l].y+=u}function v(e,t,n){var r=f(n),i=r.horizontalAlign,o=r.verticalAlign,a=t[0],s=t[1],u=a-e.displaySize[0]*i,l=u+e.displaySize[0],c=s-e.displaySize[1]*o;return{image:e,top:c,bottom:c+e.displaySize[1],left:u,right:l}}var m=e("../util/script_detection"),y=e("../util/verticalize_punctuation"),g=e("../source/rtl_text_plugin"),_={horizontal:1,vertical:2,horizontalOnly:3};t.exports={shapeText:i,shapeIcon:v,WritingMode:_};var b={};b[9]=!0,b[10]=!0,b[11]=!0,b[12]=!0,b[13]=!0,b[32]=!0;var x={};x[10]=!0,x[32]=!0,x[38]=!0,x[40]=!0,x[41]=!0,x[43]=!0,x[45]=!0,x[47]=!0,x[173]=!0,x[183]=!0,x[8203]=!0,x[8208]=!0,x[8211]=!0,x[8231]=!0},{"../source/rtl_text_plugin":109,"../util/script_detection":269,"../util/verticalize_punctuation":277}],227:[function(e,t,n){"use strict";function r(e,t,n,r,o,a){e.createArrays(),e.symbolInstances=[];var s=512*e.overscaling;e.tilePixelRatio=S/s,e.compareText={},e.iconsNeedLinear=!1;var u=e.layers[0].layout,l=e.layers[0]._unevaluatedLayout._values,c={};if("composite"===e.textSizeData.functionType){var f=e.textSizeData.zoomRange,p=f.min,m=f.max;c.compositeTextSizes=[l["text-size"].possiblyEvaluate(new A(p)),l["text-size"].possiblyEvaluate(new A(m))]}if("composite"===e.iconSizeData.functionType){var y=e.iconSizeData.zoomRange,g=y.min,_=y.max;c.compositeIconSizes=[l["icon-size"].possiblyEvaluate(new A(g)),l["icon-size"].possiblyEvaluate(new A(_))]}c.layoutTextSize=l["text-size"].possiblyEvaluate(new A(e.zoom+1)),c.layoutIconSize=l["icon-size"].possiblyEvaluate(new A(e.zoom+1)),c.textMaxSize=l["text-size"].possiblyEvaluate(new A(18));for(var w=24*u.get("text-line-height"),E="map"===u.get("text-rotation-alignment")&&"line"===u.get("symbol-placement"),T=u.get("text-keep-upright"),O=0,P=e.features;O<P.length;O+=1){var C=P[O],k=u.get("text-font").evaluate(C).join(","),R=t[k]||{},M=n[k]||{},I={},L=C.text;if(L){var D=x.allowsVerticalWritingMode(L),N=u.get("text-offset").evaluate(C).map(function(e){return 24*e}),F=24*u.get("text-letter-spacing").evaluate(C),j=x.allowsLetterSpacing(L)?F:0,B=u.get("text-anchor").evaluate(C),z=u.get("text-justify").evaluate(C),U="line"!==u.get("symbol-placement")?24*u.get("text-max-width").evaluate(C):0;I.horizontal=h(L,R,U,w,B,z,j,N,24,v.horizontal),D&&E&&T&&(I.vertical=h(L,R,U,w,B,z,j,N,24,v.vertical))}var V=void 0;if(C.icon){var G=r[C.icon];G&&(V=d(o[C.icon],u.get("icon-offset").evaluate(C),u.get("icon-anchor").evaluate(C)),void 0===e.sdfIcons?e.sdfIcons=G.sdf:e.sdfIcons!==G.sdf&&b.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),G.pixelRatio!==e.pixelRatio?e.iconsNeedLinear=!0:0!==u.get("icon-rotate").constantOr(1)&&(e.iconsNeedLinear=!0))}(I.horizontal||V)&&i(e,C,I,V,M,c)}a&&e.generateCollisionDebugBuffers()}function i(e,t,n,r,i,o){var f=o.layoutTextSize.evaluate(t),p=o.layoutIconSize.evaluate(t),h=o.textMaxSize.evaluate(t);void 0===h&&(h=f);var d=e.layers[0].layout,v=d.get("text-offset").evaluate(t),m=d.get("icon-offset").evaluate(t),y=f/24,g=e.tilePixelRatio*y,_=e.tilePixelRatio*h/24,b=e.tilePixelRatio*p,x=e.tilePixelRatio*d.get("symbol-spacing"),T=d.get("text-padding")*e.tilePixelRatio,A=d.get("icon-padding")*e.tilePixelRatio,O=d.get("text-max-angle")/180*Math.PI,P="map"===d.get("text-rotation-alignment")&&"line"===d.get("symbol-placement"),C="map"===d.get("icon-rotation-alignment")&&"line"===d.get("symbol-placement"),k=d.get("symbol-placement"),R=x/2,M=function(s,u){u.x<0||u.x>=S||u.y<0||u.y>=S||e.symbolInstances.push(a(e,u,s,n,r,e.layers[0],e.collisionBoxArray,t.index,t.sourceLayerIndex,e.index,g,T,P,v,b,A,C,m,{zoom:e.zoom},t,i,o))};if("line"===k)for(var I=0,L=c(t.geometry,0,0,S,S);I<L.length;I+=1)for(var D=L[I],N=l(D,x,O,n.vertical||n.horizontal,r,24,_,e.overscaling,S),F=0,j=N;F<j.length;F+=1){var B=j[F],z=n.horizontal;z&&s(e,z.text,R,B)||M(D,B)}else if("Polygon"===t.type)for(var U=0,V=E(t.geometry,0);U<V.length;U+=1){var G=V[U],W=w(G,16);M(G[0],new u(W.x,W.y,0))}else if("LineString"===t.type)for(var H=0,X=t.geometry;H<X.length;H+=1){var q=X[H];M(q,new u(q[0].x,q[0].y,0))}else if("Point"===t.type)for(var Y=0,Z=t.geometry;Y<Z.length;Y+=1)for(var K=Z[Y],Q=0,J=K;Q<J.length;Q+=1){var $=J[Q];M([$],new u($.x,$.y,0))}}function o(e,t,n,r,i,o,a,s,u,l,c,f,p){var h=y(t,n,r,i,o,a,f),d=e.textSizeData,v=null;return"source"===d.functionType?v=[10*r.layout.get("text-size").evaluate(a)]:"composite"===d.functionType&&(v=[10*p.compositeTextSizes[0].evaluate(a),10*p.compositeTextSizes[1].evaluate(a)]),e.addSymbols(e.text,h,v,s,i,a,l,t,u.lineStartIndex,u.lineLength),c.push(e.text.placedSymbolArray.length-1),4*h.length}function a(e,t,n,r,i,a,s,u,l,c,p,h,d,m,y,x,w,E,S,A,O,P){var C,k,R=e.addToLineVertexArray(t,n),M=0,I=0,L=0,D=r.horizontal?r.horizontal.text:"",N=[];r.horizontal&&(C=new _(s,n,t,u,l,c,r.horizontal,p,h,d,e.overscaling),I+=o(e,t,r.horizontal,a,d,S,A,m,R,r.vertical?v.horizontal:v.horizontalOnly,N,O,P),r.vertical&&(L+=o(e,t,r.vertical,a,d,S,A,m,R,v.vertical,N,O,P)));var F=C?C.boxStartIndex:e.collisionBoxArray.length,j=C?C.boxEndIndex:e.collisionBoxArray.length;if(i){var B=g(t,i,a,w,r.horizontal,S,A);k=new _(s,n,t,u,l,c,i,y,x,!1,e.overscaling),M=4*B.length;var z=e.iconSizeData,U=null;"source"===z.functionType?U=[10*a.layout.get("icon-size").evaluate(A)]:"composite"===z.functionType&&(U=[10*P.compositeIconSizes[0].evaluate(A),10*P.compositeIconSizes[1].evaluate(A)]),e.addSymbols(e.icon,B,U,E,w,A,!1,t,R.lineStartIndex,R.lineLength)}var V=k?k.boxStartIndex:e.collisionBoxArray.length,G=k?k.boxEndIndex:e.collisionBoxArray.length;return e.glyphOffsetArray.length>=T.MAX_GLYPHS&&b.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),{key:D,textBoxStartIndex:F,textBoxEndIndex:j,iconBoxStartIndex:V,iconBoxEndIndex:G,textOffset:m,iconOffset:E,anchor:t,line:n,featureIndex:u,feature:A,numGlyphVertices:I,numVerticalGlyphVertices:L,numIconVertices:M,textOpacityState:new f,iconOpacityState:new f,isDuplicate:!1,placedTextSymbolIndices:N,crossTileID:0}}function s(e,t,n,r){var i=e.compareText;if(t in i){for(var o=i[t],a=o.length-1;a>=0;a--)if(r.dist(o[a])<n)return!0}else i[t]=[];return i[t].push(r),!1}var u=e("./anchor"),l=e("./get_anchors"),c=e("./clip_line"),f=e("./opacity_state"),p=e("./shaping"),h=p.shapeText,d=p.shapeIcon,v=p.WritingMode,m=e("./quads"),y=m.getGlyphQuads,g=m.getIconQuads,_=e("./collision_feature"),b=e("../util/util"),x=e("../util/script_detection"),w=e("../util/find_pole_of_inaccessibility"),E=e("../util/classify_rings"),S=e("../data/extent"),T=e("../data/bucket/symbol_bucket"),A=e("../style/evaluation_parameters");e("@mapbox/point-geometry");t.exports={performSymbolLayout:r}},{"../data/bucket/symbol_bucket":51,"../data/extent":53,"../style/evaluation_parameters":182,"../util/classify_rings":255,"../util/find_pole_of_inaccessibility":261,"../util/script_detection":269,"../util/util":275,"./anchor":213,"./clip_line":215,"./collision_feature":216,"./get_anchors":219,"./opacity_state":222,"./quads":225,"./shaping":226,"@mapbox/point-geometry":4}],228:[function(e,t,n){"use strict";function r(e,t){var n=t.expression;if("constant"===n.kind)return{functionType:"constant",layoutSize:n.evaluate({zoom:e+1})};if("source"===n.kind)return{functionType:"source"};for(var r=n.zoomStops,i=0;i<r.length&&r[i]<=e;)i++;i=Math.max(0,i-1);for(var o=i;o<r.length&&r[o]<e+1;)o++;o=Math.min(r.length-1,o);var a={min:r[i],max:r[o]};return"composite"===n.kind?{functionType:"composite",zoomRange:a,propertyValue:t.value}:{functionType:"camera",layoutSize:n.evaluate({zoom:e+1}),zoomRange:a,sizeRange:{min:n.evaluate({zoom:a.min}),max:n.evaluate({zoom:a.max})},propertyValue:t.value}}function i(e,t,n){var r=t;return"source"===e.functionType?n.lowerSize/10:"composite"===e.functionType?u.number(n.lowerSize/10,n.upperSize/10,r.uSizeT):r.uSize}function o(e,t,n){if("constant"===e.functionType)return{uSizeT:0,uSize:e.layoutSize};if("source"===e.functionType)return{uSizeT:0,uSize:0};if("camera"===e.functionType){var r=e.propertyValue,i=e.zoomRange,o=e.sizeRange,a=s(r,n.specification),u=l.clamp(a.interpolationFactor(t,i.min,i.max),0,1);return{uSizeT:0,uSize:o.min+u*(o.max-o.min)}}var c=e.propertyValue,f=e.zoomRange,p=s(c,n.specification);return{uSizeT:l.clamp(p.interpolationFactor(t,f.min,f.max),0,1),uSize:0}}var a=e("../style-spec/expression"),s=a.normalizePropertyExpression,u=e("../style-spec/util/interpolate"),l=e("../util/util");t.exports={getSizeData:r,evaluateSizeForFeature:i,evaluateSizeForZoom:o}},{"../style-spec/expression":139,"../style-spec/util/interpolate":158,"../util/util":275}],229:[function(e,t,n){"use strict";var r=e("../source/rtl_text_plugin");t.exports=function(e,t,n){var i=t.layout.get("text-transform").evaluate(n);return"uppercase"===i?e=e.toLocaleUpperCase():"lowercase"===i&&(e=e.toLocaleLowerCase()),r.applyArabicShaping&&(e=r.applyArabicShaping(e)),e}},{"../source/rtl_text_plugin":109}],230:[function(e,t,n){"use strict";var r=e("../util/dom"),i=e("@mapbox/point-geometry"),o={scrollZoom:e("./handler/scroll_zoom"),boxZoom:e("./handler/box_zoom"),dragRotate:e("./handler/drag_rotate"),dragPan:e("./handler/drag_pan"),keyboard:e("./handler/keyboard"),doubleClickZoom:e("./handler/dblclick_zoom"),touchZoomRotate:e("./handler/touch_zoom_rotate")};t.exports=function(e,t){function n(e){g("mouseout",e)}function a(t){e.doubleClickZoom.isActive()||e.stop(),E=r.mousePos(b,t),g("mousedown",t),w=!0}function s(t){var n=e.dragRotate&&e.dragRotate.isActive();x&&!n&&g("contextmenu",x),x=null,w=!1,g("mouseup",t)}function u(t){if(!(e.dragPan&&e.dragPan.isActive()||e.dragRotate&&e.dragRotate.isActive())){for(var n=t.toElement||t.target;n&&n!==b;)n=n.parentNode;n===b&&g("mousemove",t)}}function l(e){for(var t=e.toElement||e.target;t&&t!==b;)t=t.parentNode;t===b&&g("mouseover",e)}function c(t){e.stop(),_("touchstart",t),!t.touches||t.touches.length>1||(S?(clearTimeout(S),S=null,g("dblclick",t)):S=setTimeout(d,300))}function f(e){_("touchmove",e)}function p(e){_("touchend",e)}function h(e){_("touchcancel",e)}function d(){S=null}function v(e){r.mousePos(b,e).equals(E)&&g("click",e)}function m(e){g("dblclick",e),e.preventDefault()}function y(t){var n=e.dragRotate&&e.dragRotate.isActive();w||n?w&&(x=t):g("contextmenu",t),t.preventDefault()}function g(t,n){var i=r.mousePos(b,n);return e.fire(t,{lngLat:e.unproject(i),point:i,originalEvent:n})}function _(t,n){var o=r.touchPos(b,n),a=o.reduce(function(e,t,n,r){return e.add(t.div(r.length))},new i(0,0));return e.fire(t,{lngLat:e.unproject(a),point:a,lngLats:o.map(function(t){return e.unproject(t)},this),points:o,originalEvent:n})}var b=e.getCanvasContainer(),x=null,w=!1,E=null,S=null;for(var T in o)e[T]=new o[T](e,t),t.interactive&&t[T]&&e[T].enable(t[T]);b.addEventListener("mouseout",n,!1),b.addEventListener("mousedown",a,!1),b.addEventListener("mouseup",s,!1),b.addEventListener("mousemove",u,!1),b.addEventListener("mouseover",l,!1),b.addEventListener("touchstart",c,!1),b.addEventListener("touchend",p,!1),b.addEventListener("touchmove",f,!1),b.addEventListener("touchcancel",h,!1),b.addEventListener("click",v,!1),b.addEventListener("dblclick",m,!1),b.addEventListener("contextmenu",y,!1)}},{"../util/dom":259,"./handler/box_zoom":239,"./handler/dblclick_zoom":240,"./handler/drag_pan":241,"./handler/drag_rotate":242,"./handler/keyboard":243,"./handler/scroll_zoom":244,"./handler/touch_zoom_rotate":245,"@mapbox/point-geometry":4}],231:[function(e,t,n){"use strict";var r=e("../util/util"),i=e("../style-spec/util/interpolate").number,o=e("../util/browser"),a=e("../geo/lng_lat"),s=e("../geo/lng_lat_bounds"),u=e("@mapbox/point-geometry"),l=e("../util/evented"),c=function(e){function t(t,n){e.call(this),this.moving=!1,this.transform=t,this._bearingSnap=n.bearingSnap}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getCenter=function(){return this.transform.center},t.prototype.setCenter=function(e,t){return this.jumpTo({center:e},t)},t.prototype.panBy=function(e,t,n){return e=u.convert(e).mult(-1),this.panTo(this.transform.center,r.extend({offset:e},t),n)},t.prototype.panTo=function(e,t,n){return this.easeTo(r.extend({center:e},t),n)},t.prototype.getZoom=function(){return this.transform.zoom},t.prototype.setZoom=function(e,t){return this.jumpTo({zoom:e},t),this},t.prototype.zoomTo=function(e,t,n){return this.easeTo(r.extend({zoom:e},t),n)},t.prototype.zoomIn=function(e,t){return this.zoomTo(this.getZoom()+1,e,t),this},t.prototype.zoomOut=function(e,t){return this.zoomTo(this.getZoom()-1,e,t),this},t.prototype.getBearing=function(){return this.transform.bearing},t.prototype.setBearing=function(e,t){return this.jumpTo({bearing:e},t),this},t.prototype.rotateTo=function(e,t,n){return this.easeTo(r.extend({bearing:e},t),n)},t.prototype.resetNorth=function(e,t){return this.rotateTo(0,r.extend({duration:1e3},e),t),this},t.prototype.snapToNorth=function(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this},t.prototype.getPitch=function(){return this.transform.pitch},t.prototype.setPitch=function(e,t){return this.jumpTo({pitch:e},t),this},t.prototype.fitBounds=function(e,t,n){if(t=r.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},t),"number"==typeof t.padding){var i=t.padding;t.padding={top:i,bottom:i,right:i,left:i}}if(!r.deepEqual(Object.keys(t.padding).sort(function(e,t){return e<t?-1:e>t?1:0}),["bottom","left","right","top"]))return r.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'"),this;e=s.convert(e);var o=[(t.padding.left-t.padding.right)/2,(t.padding.top-t.padding.bottom)/2],a=Math.min(t.padding.right,t.padding.left),l=Math.min(t.padding.top,t.padding.bottom);t.offset=[t.offset[0]+o[0],t.offset[1]+o[1]];var c=u.convert(t.offset),f=this.transform,p=f.project(e.getNorthWest()),h=f.project(e.getSouthEast()),d=h.sub(p),v=(f.width-2*a-2*Math.abs(c.x))/d.x,m=(f.height-2*l-2*Math.abs(c.y))/d.y;return m<0||v<0?(r.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset."),this):(t.center=f.unproject(p.add(h).div(2)),t.zoom=Math.min(f.scaleZoom(f.scale*Math.min(v,m)),t.maxZoom),t.bearing=0,t.linear?this.easeTo(t,n):this.flyTo(t,n))},t.prototype.jumpTo=function(e,t){this.stop();var n=this.transform,r=!1,i=!1,o=!1;return"zoom"in e&&n.zoom!==+e.zoom&&(r=!0,n.zoom=+e.zoom),void 0!==e.center&&(n.center=a.convert(e.center)),"bearing"in e&&n.bearing!==+e.bearing&&(i=!0,n.bearing=+e.bearing),"pitch"in e&&n.pitch!==+e.pitch&&(o=!0,n.pitch=+e.pitch),this.fire("movestart",t).fire("move",t),r&&this.fire("zoomstart",t).fire("zoom",t).fire("zoomend",t),i&&this.fire("rotate",t),o&&this.fire("pitchstart",t).fire("pitch",t).fire("pitchend",t),this.fire("moveend",t)},t.prototype.easeTo=function(e,t){var n=this;this.stop(),e=r.extend({offset:[0,0],duration:500,easing:r.ease},e),!1===e.animate&&(e.duration=0);var o=this.transform,s=this.getZoom(),l=this.getBearing(),c=this.getPitch(),f="zoom"in e?+e.zoom:s,p="bearing"in e?this._normalizeBearing(e.bearing,l):l,h="pitch"in e?+e.pitch:c,d=o.centerPoint.add(u.convert(e.offset)),v=o.pointLocation(d),m=a.convert(e.center||v);this._normalizeCenter(m);var y,g,_=o.project(v),b=o.project(m).sub(_),x=o.zoomScale(f-s);return e.around&&(y=a.convert(e.around),g=o.locationPoint(y)),this.zooming=f!==s,this.rotating=l!==p,this.pitching=h!==c,this._prepareEase(t,e.noMoveStart),clearTimeout(this._onEaseEnd),this._ease(function(e){if(n.zooming&&(o.zoom=i(s,f,e)),n.rotating&&(o.bearing=i(l,p,e)),n.pitching&&(o.pitch=i(c,h,e)),y)o.setLocationAtPoint(y,g);else{var r=o.zoomScale(o.zoom-s),a=f>s?Math.min(2,x):Math.max(.5,x),u=Math.pow(a,1-e),v=o.unproject(_.add(b.mult(e*u)).mult(r));o.setLocationAtPoint(o.renderWorldCopies?v.wrap():v,d)}n._fireMoveEvents(t)},function(){e.delayEndEvents?n._onEaseEnd=setTimeout(function(){return n._afterEase(t)},e.delayEndEvents):n._afterEase(t)},e),this},t.prototype._prepareEase=function(e,t){this.moving=!0,t||this.fire("movestart",e),this.zooming&&this.fire("zoomstart",e),this.pitching&&this.fire("pitchstart",e)},t.prototype._fireMoveEvents=function(e){this.fire("move",e),this.zooming&&this.fire("zoom",e),this.rotating&&this.fire("rotate",e),this.pitching&&this.fire("pitch",e)},t.prototype._afterEase=function(e){var t=this.zooming,n=this.pitching;this.moving=!1,this.zooming=!1,this.rotating=!1,this.pitching=!1,t&&this.fire("zoomend",e),n&&this.fire("pitchend",e),this.fire("moveend",e)},t.prototype.flyTo=function(e,t){function n(e){var t=(A*A-T*T+(e?-1:1)*k*k*O*O)/(2*(e?A:T)*k*O);return Math.log(Math.sqrt(t*t+1)-t)}function o(e){return(Math.exp(e)-Math.exp(-e))/2}function s(e){return(Math.exp(e)+Math.exp(-e))/2}function l(e){return o(e)/s(e)}var c=this;this.stop(),e=r.extend({offset:[0,0],speed:1.2,curve:1.42,easing:r.ease},e);var f=this.transform,p=this.getZoom(),h=this.getBearing(),d=this.getPitch(),v="zoom"in e?r.clamp(+e.zoom,f.minZoom,f.maxZoom):p,m="bearing"in e?this._normalizeBearing(e.bearing,h):h,y="pitch"in e?+e.pitch:d,g=f.zoomScale(v-p),_=f.centerPoint.add(u.convert(e.offset)),b=f.pointLocation(_),x=a.convert(e.center||b);this._normalizeCenter(x);var w=f.project(b),E=f.project(x).sub(w),S=e.curve,T=Math.max(f.width,f.height),A=T/g,O=E.mag();if("minZoom"in e){var P=r.clamp(Math.min(e.minZoom,p,v),f.minZoom,f.maxZoom),C=T/f.zoomScale(P-p);S=Math.sqrt(C/O*2)}var k=S*S,R=n(0),M=function(e){return s(R)/s(R+S*e)},I=function(e){return T*((s(R)*l(R+S*e)-o(R))/k)/O},L=(n(1)-R)/S;if(Math.abs(O)<1e-6||!isFinite(L)){if(Math.abs(T-A)<1e-6)return this.easeTo(e,t);var D=A<T?-1:1;L=Math.abs(Math.log(A/T))/S,I=function(){return 0},M=function(e){return Math.exp(D*S*e)}}if("duration"in e)e.duration=+e.duration;else{var N="screenSpeed"in e?+e.screenSpeed/S:+e.speed;e.duration=1e3*L/N}return e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this.zooming=!0,this.rotating=h!==m,this.pitching=y!==d,this._prepareEase(t,!1),this._ease(function(e){var n=e*L,r=1/M(n);f.zoom=p+f.scaleZoom(r),c.rotating&&(f.bearing=i(h,m,e)),c.pitching&&(f.pitch=i(d,y,e));var o=f.unproject(w.add(E.mult(I(n))).mult(r));f.setLocationAtPoint(f.renderWorldCopies?o.wrap():o,_),c._fireMoveEvents(t)},function(){return c._afterEase(t)},e),this},t.prototype.isEasing=function(){return!!this._isEasing},t.prototype.isMoving=function(){return this.moving},t.prototype.stop=function(){return this._onFrame&&this._finishAnimation(),this},t.prototype._ease=function(e,t,n){var r=this;!1===n.animate||0===n.duration?(e(1),t()):(this._easeStart=o.now(),this._isEasing=!0,this._easeOptions=n,this._startAnimation(function(t){var n=Math.min((o.now()-r._easeStart)/r._easeOptions.duration,1);e(r._easeOptions.easing(n)),1===n&&r.stop()},function(){r._isEasing=!1,t()}))},t.prototype._updateCamera=function(){this._onFrame&&this._onFrame(this.transform)},t.prototype._startAnimation=function(e,t){return void 0===t&&(t=function(){}),this.stop(),this._onFrame=e,this._finishFn=t,this._update(),this},t.prototype._finishAnimation=function(){delete this._onFrame;var e=this._finishFn;delete this._finishFn,e.call(this)},t.prototype._normalizeBearing=function(e,t){e=r.wrap(e,-180,180);var n=Math.abs(e-t);return Math.abs(e-360-t)<n&&(e-=360),Math.abs(e+360-t)<n&&(e+=360),e},t.prototype._normalizeCenter=function(e){var t=this.transform;if(t.renderWorldCopies&&!t.lngRange){var n=e.lng-t.center.lng;e.lng+=n>180?-360:n<-180?360:0}},t}(l);t.exports=c},{"../geo/lng_lat":62,"../geo/lng_lat_bounds":63,"../style-spec/util/interpolate":158,"../util/browser":252,"../util/evented":260,"../util/util":275,"@mapbox/point-geometry":4}],232:[function(e,t,n){"use strict";var r=e("../../util/dom"),i=e("../../util/util"),o=e("../../util/config"),a=function(e){this.options=e,i.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};a.prototype.getDefaultPosition=function(){return"bottom-right"},a.prototype.onAdd=function(e){var t=this.options&&this.options.compact;return this._map=e,this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),t&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},a.prototype.onRemove=function(){r.remove(this._container),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0},a.prototype._updateEditLink=function(){var e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));var t=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:o.ACCESS_TOKEN}];if(e){var n=t.reduce(function(e,n,r){return n.value&&(e+=n.key+"="+n.value+(r<t.length-1?"&":"")),e},"?");e.href="https://www.mapbox.com/feedback/"+n+(this._map._hash?this._map._hash.getHashString(!0):"")}},a.prototype._updateData=function(e){e&&"metadata"===e.sourceDataType&&(this._updateAttributions(),this._updateEditLink())},a.prototype._updateAttributions=function(){if(this._map.style){var e=[];if(this._map.style.stylesheet){var t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}var n=this._map.style.sourceCaches;for(var r in n){var i=n[r].getSource();i.attribution&&e.indexOf(i.attribution)<0&&e.push(i.attribution)}e.sort(function(e,t){return e.length-t.length}),e=e.filter(function(t,n){for(var r=n+1;r<e.length;r++)if(e[r].indexOf(t)>=0)return!1;return!0}),e.length?(this._container.innerHTML=e.join(" | "),this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null}},a.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")},t.exports=a},{"../../util/config":256,"../../util/dom":259,"../../util/util":275}],233:[function(e,t,n){"use strict";var r=e("../../util/dom"),i=e("../../util/util"),o=e("../../util/window"),a=function(){this._fullscreen=!1,i.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in o.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in o.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in o.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in o.document&&(this._fullscreenchange="MSFullscreenChange"),this._className="mapboxgl-ctrl"};a.prototype.onAdd=function(e){return this._map=e,this._mapContainer=this._map.getContainer(),this._container=r.create("div",this._className+" mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._container.style.display="none",i.warnOnce("This device does not support fullscreen mode.")),this._container},a.prototype.onRemove=function(){r.remove(this._container),this._map=null,o.document.removeEventListener(this._fullscreenchange,this._changeIcon)},a.prototype._checkFullscreenSupport=function(){return!!(o.document.fullscreenEnabled||o.document.mozFullScreenEnabled||o.document.msFullscreenEnabled||o.document.webkitFullscreenEnabled)},a.prototype._setupUI=function(){var e=this._fullscreenButton=r.create("button",this._className+"-icon "+this._className+"-fullscreen",this._container);e.setAttribute("aria-label","Toggle fullscreen"),e.type="button",this._fullscreenButton.addEventListener("click",this._onClickFullscreen),o.document.addEventListener(this._fullscreenchange,this._changeIcon)},a.prototype._isFullscreen=function(){return this._fullscreen},a.prototype._changeIcon=function(){(o.document.fullscreenElement||o.document.mozFullScreenElement||o.document.webkitFullscreenElement||o.document.msFullscreenElement)===this._mapContainer!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle(this._className+"-shrink"),this._fullscreenButton.classList.toggle(this._className+"-fullscreen"))},a.prototype._onClickFullscreen=function(){this._isFullscreen()?o.document.exitFullscreen?o.document.exitFullscreen():o.document.mozCancelFullScreen?o.document.mozCancelFullScreen():o.document.msExitFullscreen?o.document.msExitFullscreen():o.document.webkitCancelFullScreen&&o.document.webkitCancelFullScreen():this._mapContainer.requestFullscreen?this._mapContainer.requestFullscreen():this._mapContainer.mozRequestFullScreen?this._mapContainer.mozRequestFullScreen():this._mapContainer.msRequestFullscreen?this._mapContainer.msRequestFullscreen():this._mapContainer.webkitRequestFullscreen&&this._mapContainer.webkitRequestFullscreen()},t.exports=a},{"../../util/dom":259,"../../util/util":275,"../../util/window":254}],234:[function(e,t,n){"use strict";function r(e){void 0!==i?e(i):void 0!==s.navigator.permissions?s.navigator.permissions.query({name:"geolocation"}).then(function(t){i="denied"!==t.state,e(i)}):(i=!!s.navigator.geolocation,e(i))}var i,o=e("../../util/evented"),a=e("../../util/dom"),s=e("../../util/window"),u=e("../../util/util"),l=e("../../geo/lng_lat"),c=e("../marker"),f={positionOptions:{enableHighAccuracy:!1,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0},p=function(e){function t(t){e.call(this),this.options=u.extend({},f,t),u.bindAll(["_onSuccess","_onError","_finish","_setupUI","_updateCamera","_updateMarker","_onClickGeolocate"],this)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.onAdd=function(e){return this._map=e,this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),r(this._setupUI),this._container},t.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(s.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker.remove(),a.remove(this._container),this._map=void 0},t.prototype._onSuccess=function(e){if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire("geolocate",e),this._finish()},t.prototype._updateCamera=function(e){var t=new l(e.coords.longitude,e.coords.latitude),n=e.coords.accuracy;this._map.fitBounds(t.toBounds(n),this.options.fitBoundsOptions,{geolocateSource:!0})},t.prototype._updateMarker=function(e){e?this._userLocationDotMarker.setLngLat([e.coords.longitude,e.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove()},t.prototype._onError=function(e){if(this.options.trackUserLocation)if(1===e.code)this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),void 0!==this._geolocationWatchID&&this._clearWatch();else switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire("error",e),this._finish()},t.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},t.prototype._setupUI=function(e){var t=this;!1!==e&&(this._container.addEventListener("contextmenu",function(e){return e.preventDefault()}),this._geolocateButton=a.create("button","mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.setAttribute("aria-label","Geolocate"),this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=a.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new c(this._dotElement),this.options.trackUserLocation&&(this._watchState="OFF")),this._geolocateButton.addEventListener("click",this._onClickGeolocate.bind(this)),this.options.trackUserLocation&&this._map.on("movestart",function(e){e.geolocateSource||"ACTIVE_LOCK"!==t._watchState||(t._watchState="BACKGROUND",t._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),t._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),t.fire("trackuserlocationend"))}))},t.prototype._onClickGeolocate=function(){if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire("trackuserlocationstart");break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire("trackuserlocationend");break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire("trackuserlocationstart")}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}"OFF"===this._watchState&&void 0!==this._geolocationWatchID?this._clearWatch():void 0===this._geolocationWatchID&&(this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._geolocationWatchID=s.navigator.geolocation.watchPosition(this._onSuccess,this._onError,this.options.positionOptions))}else s.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4)},t.prototype._clearWatch=function(){s.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},t}(o);t.exports=p},{"../../geo/lng_lat":62,"../../util/dom":259,"../../util/evented":260,"../../util/util":275,"../../util/window":254,"../marker":248}],235:[function(e,t,n){"use strict";var r=e("../../util/dom"),i=e("../../util/util"),o=function(){i.bindAll(["_updateLogo"],this)};o.prototype.onAdd=function(e){this._map=e,this._container=r.create("div","mapboxgl-ctrl");var t=r.create("a","mapboxgl-ctrl-logo");return t.target="_blank",t.href="https://www.mapbox.com/",t.setAttribute("aria-label","Mapbox logo"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._container},o.prototype.onRemove=function(){r.remove(this._container),this._map.off("sourcedata",this._updateLogo)},o.prototype.getDefaultPosition=function(){return"bottom-left"},o.prototype._updateLogo=function(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},o.prototype._logoRequired=function(){if(this._map.style){var e=this._map.style.sourceCaches;for(var t in e)if(e[t].getSource().mapbox_logo)return!0;return!1}},t.exports=o},{"../../util/dom":259,"../../util/util":275}],236:[function(e,t,n){"use strict";var r=e("../../util/dom"),i=e("../../util/util"),o=e("../handler/drag_rotate"),a={showCompass:!0,showZoom:!0},s=function(e){var t=this;this.options=i.extend({},a,e),this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(e){return e.preventDefault()}),this.options.showZoom&&(this._zoomInButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in","Zoom In",function(){return t._map.zoomIn()}),this._zoomOutButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out","Zoom Out",function(){return t._map.zoomOut()})),this.options.showCompass&&(i.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-compass","Reset North",function(){return t._map.resetNorth()}),this._compassArrow=r.create("span","mapboxgl-ctrl-compass-arrow",this._compass))};s.prototype._rotateCompassArrow=function(){var e="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=e},s.prototype.onAdd=function(e){return this._map=e,this.options.showCompass&&(this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new o(e,{button:"left",element:this._compass}),this._handler.enable()),this._container},s.prototype.onRemove=function(){r.remove(this._container),this.options.showCompass&&(this._map.off("rotate",this._rotateCompassArrow),this._handler.disable(),delete this._handler),delete this._map},s.prototype._createButton=function(e,t,n){var i=r.create("button",e,this._container);return i.type="button",i.setAttribute("aria-label",t),i.addEventListener("click",n),i},t.exports=s},{"../../util/dom":259,"../../util/util":275,"../handler/drag_rotate":242}],237:[function(e,t,n){"use strict";function r(e,t,n){var r=n&&n.maxWidth||100,a=e._container.clientHeight/2,s=o(e.unproject([0,a]),e.unproject([r,a]));if(n&&"imperial"===n.unit){var u=3.2808*s;u>5280?i(t,r,u/5280,"mi"):i(t,r,u,"ft")}else if(n&&"nautical"===n.unit){var l=s/1852;i(t,r,l,"nm")}else i(t,r,s,"m")}function i(e,t,n,r){var i=a(n),o=i/n;"m"===r&&i>=1e3&&(i/=1e3,r="km"),e.style.width=t*o+"px",e.innerHTML=i+r}function o(e,t){var n=Math.PI/180,r=e.lat*n,i=t.lat*n,o=Math.sin(r)*Math.sin(i)+Math.cos(r)*Math.cos(i)*Math.cos((t.lng-e.lng)*n);return 6371e3*Math.acos(Math.min(o,1))}function a(e){var t=Math.pow(10,(""+Math.floor(e)).length-1),n=e/t;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,t*n}var s=e("../../util/dom"),u=e("../../util/util"),l=function(e){this.options=e,u.bindAll(["_onMove"],this)};l.prototype.getDefaultPosition=function(){return"bottom-left"},l.prototype._onMove=function(){r(this._map,this._container,this.options)},l.prototype.onAdd=function(e){return this._map=e,this._container=s.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},l.prototype.onRemove=function(){s.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},t.exports=l},{"../../util/dom":259,"../../util/util":275}],238:[function(e,t,n){"use strict"},{}],239:[function(e,t,n){"use strict";var r=e("../../util/dom"),i=e("../../geo/lng_lat_bounds"),o=e("../../util/util"),a=e("../../util/window"),s=function(e){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),o.bindAll(["_onMouseDown","_onMouseMove","_onMouseUp","_onKeyDown"],this)};s.prototype.isEnabled=function(){return!!this._enabled},s.prototype.isActive=function(){return!!this._active},s.prototype.enable=function(){this.isEnabled()||(this._map.dragPan&&this._map.dragPan.disable(),this._el.addEventListener("mousedown",this._onMouseDown,!1),this._map.dragPan&&this._map.dragPan.enable(),this._enabled=!0)},s.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onMouseDown),this._enabled=!1)},s.prototype._onMouseDown=function(e){e.shiftKey&&0===e.button&&(a.document.addEventListener("mousemove",this._onMouseMove,!1),a.document.addEventListener("keydown",this._onKeyDown,!1),a.document.addEventListener("mouseup",this._onMouseUp,!1),r.disableDrag(),this._startPos=r.mousePos(this._el,e),this._active=!0)},s.prototype._onMouseMove=function(e){var t=this._startPos,n=r.mousePos(this._el,e);this._box||(this._box=r.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));var i=Math.min(t.x,n.x),o=Math.max(t.x,n.x),a=Math.min(t.y,n.y),s=Math.max(t.y,n.y);r.setTransform(this._box,"translate("+i+"px,"+a+"px)"),this._box.style.width=o-i+"px",this._box.style.height=s-a+"px"},s.prototype._onMouseUp=function(e){if(0===e.button){var t=this._startPos,n=r.mousePos(this._el,e),o=(new i).extend(this._map.unproject(t)).extend(this._map.unproject(n));this._finish(),t.x===n.x&&t.y===n.y?this._fireEvent("boxzoomcancel",e):this._map.fitBounds(o,{linear:!0}).fire("boxzoomend",{originalEvent:e,boxZoomBounds:o})}},s.prototype._onKeyDown=function(e){27===e.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",e))},s.prototype._finish=function(){this._active=!1,a.document.removeEventListener("mousemove",this._onMouseMove,!1),a.document.removeEventListener("keydown",this._onKeyDown,!1),a.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(r.remove(this._box),this._box=null),r.enableDrag()},s.prototype._fireEvent=function(e,t){return this._map.fire(e,{originalEvent:t})},t.exports=s},{"../../geo/lng_lat_bounds":63,"../../util/dom":259,"../../util/util":275,"../../util/window":254}],240:[function(e,t,n){"use strict";var r=e("../../util/util"),i=function(e){this._map=e,r.bindAll(["_onDblClick","_onZoomEnd"],this)};i.prototype.isEnabled=function(){return!!this._enabled},i.prototype.isActive=function(){return!!this._active},i.prototype.enable=function(){this.isEnabled()||(this._map.on("dblclick",this._onDblClick),this._enabled=!0)},i.prototype.disable=function(){this.isEnabled()&&(this._map.off("dblclick",this._onDblClick),this._enabled=!1)},i.prototype._onDblClick=function(e){this._active=!0,this._map.on("zoomend",this._onZoomEnd),this._map.zoomTo(this._map.getZoom()+(e.originalEvent.shiftKey?-1:1),{around:e.lngLat},e)},i.prototype._onZoomEnd=function(){this._active=!1,this._map.off("zoomend",this._onZoomEnd)},t.exports=i},{"../../util/util":275}],241:[function(e,t,n){"use strict";var r=e("../../util/dom"),i=e("../../util/util"),o=e("../../util/window"),a=e("../../util/browser"),s=i.bezier(0,0,.3,1),u=function(e){this._map=e,this._el=e.getCanvasContainer(),i.bindAll(["_onDown","_onMove","_onUp","_onTouchEnd","_onMouseUp","_onDragFrame","_onDragFinished"],this)};u.prototype.isEnabled=function(){return!!this._enabled},u.prototype.isActive=function(){return!!this._active},u.prototype.enable=function(){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._el.addEventListener("mousedown",this._onDown),this._el.addEventListener("touchstart",this._onDown),this._enabled=!0)},u.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._el.removeEventListener("mousedown",this._onDown),this._el.removeEventListener("touchstart",this._onDown),this._enabled=!1)},u.prototype._onDown=function(e){this._ignoreEvent(e)||this.isActive()||(e.touches?(o.document.addEventListener("touchmove",this._onMove),o.document.addEventListener("touchend",this._onTouchEnd)):(o.document.addEventListener("mousemove",this._onMove),o.document.addEventListener("mouseup",this._onMouseUp)),o.addEventListener("blur",this._onMouseUp),this._active=!1,this._previousPos=r.mousePos(this._el,e),this._inertia=[[a.now(),this._previousPos]])},u.prototype._onMove=function(e){if(!this._ignoreEvent(e)){this._lastMoveEvent=e,e.preventDefault();var t=r.mousePos(this._el,e);if(this._drainInertiaBuffer(),this._inertia.push([a.now(),t]),!this._previousPos)return void(this._previousPos=t);this._pos=t,this.isActive()||(this._active=!0,this._map.moving=!0,this._fireEvent("dragstart",e),this._fireEvent("movestart",e),this._map._startAnimation(this._onDragFrame,this._onDragFinished)),this._map._update()}},u.prototype._onDragFrame=function(e){var t=this._lastMoveEvent;t&&(e.setLocationAtPoint(e.pointLocation(this._previousPos),this._pos),this._fireEvent("drag",t),this._fireEvent("move",t),this._previousPos=this._pos,delete this._lastMoveEvent)},u.prototype._onDragFinished=function(e){var t=this;if(this.isActive()){this._active=!1,delete this._lastMoveEvent,delete this._previousPos,delete this._pos,this._fireEvent("dragend",e),this._drainInertiaBuffer();var n=function(){t._map.moving=!1,t._fireEvent("moveend",e)},r=this._inertia;if(r.length<2)return void n();var i=r[r.length-1],o=r[0],a=i[1].sub(o[1]),u=(i[0]-o[0])/1e3;if(0===u||i[1].equals(o[1]))return void n();var l=a.mult(.3/u),c=l.mag();c>1400&&(c=1400,l._unit()._mult(c));var f=c/750,p=l.mult(-f/2);this._map.panBy(p,{duration:1e3*f,easing:s,noMoveStart:!0},{originalEvent:e})}},u.prototype._onUp=function(e){this._onDragFinished(e)},u.prototype._onMouseUp=function(e){this._ignoreEvent(e)||(this._onUp(e),o.document.removeEventListener("mousemove",this._onMove),o.document.removeEventListener("mouseup",this._onMouseUp),o.removeEventListener("blur",this._onMouseUp))},u.prototype._onTouchEnd=function(e){this._ignoreEvent(e)||(this._onUp(e),o.document.removeEventListener("touchmove",this._onMove),o.document.removeEventListener("touchend",this._onTouchEnd))},u.prototype._fireEvent=function(e,t){return this._map.fire(e,t?{originalEvent:t}:{})},u.prototype._ignoreEvent=function(e){var t=this._map;return!(!t.boxZoom||!t.boxZoom.isActive())||!(!t.dragRotate||!t.dragRotate.isActive())||(e.touches?e.touches.length>1:!!e.ctrlKey||"mousemove"!==e.type&&e.button&&0!==e.button)},u.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,t=a.now();e.length>0&&t-e[0][0]>160;)e.shift()},t.exports=u},{"../../util/browser":252,"../../util/dom":259,"../../util/util":275,"../../util/window":254}],242:[function(e,t,n){"use strict";var r=e("../../util/dom"),i=e("../../util/util"),o=e("../../util/window"),a=e("../../util/browser"),s=i.bezier(0,0,.25,1),u=function(e,t){this._map=e,this._el=t.element||e.getCanvasContainer(),this._button=t.button||"right",this._bearingSnap=t.bearingSnap||0,this._pitchWithRotate=!1!==t.pitchWithRotate,i.bindAll(["_onDown","_onMove","_onUp","_onDragFrame","_onDragFinished"],this)};u.prototype.isEnabled=function(){return!!this._enabled},u.prototype.isActive=function(){return!!this._active},u.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onDown),this._enabled=!0)},u.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onDown),this._enabled=!1)},u.prototype._onDown=function(e){if(!(this._map.boxZoom&&this._map.boxZoom.isActive()||this._map.dragPan&&this._map.dragPan.isActive()||this.isActive())){if("right"===this._button){var t=e.ctrlKey?0:2,n=e.button;if(void 0!==o.InstallTrigger&&2===e.button&&e.ctrlKey&&o.navigator.platform.toUpperCase().indexOf("MAC")>=0&&(n=0),n!==t)return}else if(e.ctrlKey||0!==e.button)return;r.disableDrag(),o.document.addEventListener("mousemove",this._onMove,{capture:!0}),o.document.addEventListener("mouseup",this._onUp),o.addEventListener("blur",this._onUp),this._active=!1,this._inertia=[[a.now(),this._map.getBearing()]],this._previousPos=r.mousePos(this._el,e),this._center=this._map.transform.centerPoint,e.preventDefault()}},u.prototype._onMove=function(e){this._lastMoveEvent=e;var t=r.mousePos(this._el,e);if(!this._previousPos)return void(this._previousPos=t);this._pos=t,this.isActive()||(this._active=!0,this._map.moving=!0,this._fireEvent("rotatestart",e),this._fireEvent("movestart",e),this._pitchWithRotate&&this._fireEvent("pitchstart",e),this._map._startAnimation(this._onDragFrame,this._onDragFinished)),this._map._update()},u.prototype._onUp=function(e){o.document.removeEventListener("mousemove",this._onMove,{capture:!0}),o.document.removeEventListener("mouseup",this._onUp),o.removeEventListener("blur",this._onUp),r.enableDrag(),this._onDragFinished(e)},u.prototype._onDragFrame=function(e){var t=this._lastMoveEvent;if(t){var n=this._previousPos,r=this._pos,i=.8*(n.x-r.x),o=-.5*(n.y-r.y),s=e.bearing-i,u=e.pitch-o,l=this._inertia,c=l[l.length-1];this._drainInertiaBuffer(),l.push([a.now(),this._map._normalizeBearing(s,c[1])]),e.bearing=s,this._pitchWithRotate&&(this._fireEvent("pitch",t),e.pitch=u),this._fireEvent("rotate",t),this._fireEvent("move",t),delete this._lastMoveEvent,this._previousPos=this._pos}},u.prototype._onDragFinished=function(e){var t=this;if(this.isActive()){this._active=!1,delete this._lastMoveEvent,delete this._previousPos,this._fireEvent("rotateend",e),this._drainInertiaBuffer();var n=this._map,r=n.getBearing(),i=this._inertia,o=function(){Math.abs(r)<t._bearingSnap?n.resetNorth({noMoveStart:!0},{originalEvent:e}):(t._map.moving=!1,t._fireEvent("moveend",e)),t._pitchWithRotate&&t._fireEvent("pitchend",e)};if(i.length<2)return void o();var a=i[0],u=i[i.length-1],l=i[i.length-2],c=n._normalizeBearing(r,l[1]),f=u[1]-a[1],p=f<0?-1:1,h=(u[0]-a[0])/1e3;if(0===f||0===h)return void o();var d=Math.abs(f*(.25/h));d>180&&(d=180);var v=d/180;c+=p*d*(v/2),Math.abs(n._normalizeBearing(c,0))<this._bearingSnap&&(c=n._normalizeBearing(0,c)),n.rotateTo(c,{duration:1e3*v,easing:s,noMoveStart:!0},{originalEvent:e})}},u.prototype._fireEvent=function(e,t){return this._map.fire(e,t?{originalEvent:t}:{})},u.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,t=a.now();e.length>0&&t-e[0][0]>160;)e.shift()},t.exports=u},{"../../util/browser":252,"../../util/dom":259,"../../util/util":275,"../../util/window":254}],243:[function(e,t,n){"use strict";function r(e){return e*(2-e)}var i=e("../../util/util"),o=function(e){this._map=e,this._el=e.getCanvasContainer(),i.bindAll(["_onKeyDown"],this)};o.prototype.isEnabled=function(){return!!this._enabled},o.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},o.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},o.prototype._onKeyDown=function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t=0,n=0,i=0,o=0,a=0;switch(e.keyCode){case 61:case 107:case 171:case 187:t=1;break;case 189:case 109:case 173:t=-1;break;case 37:e.shiftKey?n=-1:(e.preventDefault(),o=-1);break;case 39:e.shiftKey?n=1:(e.preventDefault(),o=1);break;case 38:e.shiftKey?i=1:(e.preventDefault(),a=-1);break;case 40:e.shiftKey?i=-1:(a=1,e.preventDefault());break;default:return}var s=this._map,u=s.getZoom(),l={duration:300,delayEndEvents:500,easing:r,zoom:t?Math.round(u)+t*(e.shiftKey?2:1):u,bearing:s.getBearing()+15*n,pitch:s.getPitch()+10*i,offset:[100*-o,100*-a],center:s.getCenter()};s.easeTo(l,{originalEvent:e})}},t.exports=o},{"../../util/util":275}],244:[function(e,t,n){"use strict";var r=e("../../util/dom"),i=e("../../util/util"),o=e("../../util/browser"),a=e("../../util/window"),s=e("../../style-spec/util/interpolate").number,u=e("../../geo/lng_lat"),l=a.navigator.userAgent.toLowerCase(),c=-1!==l.indexOf("firefox"),f=-1!==l.indexOf("safari")&&-1===l.indexOf("chrom"),p=function(e){this._map=e,this._el=e.getCanvasContainer(),this._delta=0,i.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};p.prototype.isEnabled=function(){return!!this._enabled},p.prototype.isActive=function(){return!!this._active},p.prototype.enable=function(e){this.isEnabled()||(this._el.addEventListener("wheel",this._onWheel,!1),this._el.addEventListener("mousewheel",this._onWheel,!1),this._enabled=!0,this._aroundCenter=e&&"center"===e.around)},p.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("wheel",this._onWheel),this._el.removeEventListener("mousewheel",this._onWheel),this._enabled=!1)},p.prototype._onWheel=function(e){var t=0;"wheel"===e.type?(t=e.deltaY,c&&e.deltaMode===a.WheelEvent.DOM_DELTA_PIXEL&&(t/=o.devicePixelRatio),e.deltaMode===a.WheelEvent.DOM_DELTA_LINE&&(t*=40)):"mousewheel"===e.type&&(t=-e.wheelDeltaY,f&&(t/=3));var n=o.now(),r=n-(this._lastWheelEventTime||0);this._lastWheelEventTime=n,0!==t&&t%4.000244140625==0?this._type="wheel":0!==t&&Math.abs(t)<4?this._type="trackpad":r>400?(this._type=null,this._lastValue=t,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(r*t)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,t+=this._lastValue)),e.shiftKey&&t&&(t/=4),this._type&&(this._lastWheelEvent=e,this._delta-=t,this.isActive()||this._start(e)),e.preventDefault()},p.prototype._onTimeout=function(e){this._type="wheel",this._delta-=this._lastValue,this.isActive()||this._start(e)},p.prototype._start=function(e){if(this._delta){this._active=!0,this._map.moving=!0,this._map.zooming=!0,this._map.fire("movestart",{originalEvent:e}),this._map.fire("zoomstart",{originalEvent:e}),clearTimeout(this._finishTimeout);var t=r.mousePos(this._el,e);this._around=u.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(t)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._map._startAnimation(this._onScrollFrame,this._onScrollFinished)}},p.prototype._onScrollFrame=function(e){if(this.isActive()){if(0!==this._delta){var t="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?1/450:.01,n=2/(1+Math.exp(-Math.abs(this._delta*t)));this._delta<0&&0!==n&&(n=1/n);var r="number"==typeof this._targetZoom?e.zoomScale(this._targetZoom):e.scale;this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom(r*n))),"wheel"===this._type&&(this._startZoom=e.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}if("wheel"===this._type){var i=Math.min((o.now()-this._lastWheelEventTime)/200,1),a=this._easing(i);e.zoom=s(this._startZoom,this._targetZoom,a),1===i&&this._map.stop()}else e.zoom=this._targetZoom,this._map.stop();e.setLocationAtPoint(this._around,this._aroundPoint),this._map.fire("move",{originalEvent:this._lastWheelEvent}),this._map.fire("zoom",{originalEvent:this._lastWheelEvent})}},p.prototype._onScrollFinished=function(){var e=this;this.isActive()&&(this._active=!1,this._finishTimeout=setTimeout(function(){e._map.moving=!1,e._map.zooming=!1,e._map.fire("zoomend"),e._map.fire("moveend"),delete e._targetZoom},200))},p.prototype._smoothOutEasing=function(e){var t=i.ease;if(this._prevEase){var n=this._prevEase,r=(o.now()-n.start)/n.duration,a=n.easing(r+.01)-n.easing(r),s=.27/Math.sqrt(a*a+1e-4)*.01,u=Math.sqrt(.0729-s*s);t=i.bezier(s,u,.25,1)}return this._prevEase={start:o.now(),duration:e,easing:t},t},t.exports=p},{"../../geo/lng_lat":62,"../../style-spec/util/interpolate":158,"../../util/browser":252,"../../util/dom":259,"../../util/util":275,"../../util/window":254}],245:[function(e,t,n){"use strict";var r=e("../../util/dom"),i=e("../../util/util"),o=e("../../util/window"),a=e("../../util/browser"),s=i.bezier(0,0,.15,1),u=function(e){this._map=e,this._el=e.getCanvasContainer(),i.bindAll(["_onStart","_onMove","_onEnd"],this)};u.prototype.isEnabled=function(){return!!this._enabled},u.prototype.enable=function(e){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._el.addEventListener("touchstart",this._onStart,!1),this._enabled=!0,this._aroundCenter=e&&"center"===e.around)},u.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._el.removeEventListener("touchstart",this._onStart),this._enabled=!1)},u.prototype.disableRotation=function(){this._rotationDisabled=!0},u.prototype.enableRotation=function(){this._rotationDisabled=!1},u.prototype._onStart=function(e){if(2===e.touches.length){var t=r.mousePos(this._el,e.touches[0]),n=r.mousePos(this._el,e.touches[1]);this._startVec=t.sub(n),this._startScale=this._map.transform.scale,this._startBearing=this._map.transform.bearing,this._gestureIntent=void 0,this._inertia=[],o.document.addEventListener("touchmove",this._onMove,!1),o.document.addEventListener("touchend",this._onEnd,!1)}},u.prototype._onMove=function(e){if(2===e.touches.length){var t=r.mousePos(this._el,e.touches[0]),n=r.mousePos(this._el,e.touches[1]),i=t.add(n).div(2),o=t.sub(n),s=o.mag()/this._startVec.mag(),u=this._rotationDisabled?0:180*o.angleWith(this._startVec)/Math.PI,l=this._map;if(this._gestureIntent){var c={duration:0,around:l.unproject(i)};"rotate"===this._gestureIntent&&(c.bearing=this._startBearing+u),"zoom"!==this._gestureIntent&&"rotate"!==this._gestureIntent||(c.zoom=l.transform.scaleZoom(this._startScale*s)),l.stop(),this._drainInertiaBuffer(),this._inertia.push([a.now(),s,i]),l.easeTo(c,{originalEvent:e})}else{var f=Math.abs(1-s)>.15;Math.abs(u)>10?this._gestureIntent="rotate":f&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._startVec=o,this._startScale=l.transform.scale,this._startBearing=l.transform.bearing)}e.preventDefault()}},u.prototype._onEnd=function(e){o.document.removeEventListener("touchmove",this._onMove),o.document.removeEventListener("touchend",this._onEnd),this._drainInertiaBuffer();var t=this._inertia,n=this._map;if(t.length<2)return void n.snapToNorth({},{originalEvent:e});var r=t[t.length-1],i=t[0],a=n.transform.scaleZoom(this._startScale*r[1]),u=n.transform.scaleZoom(this._startScale*i[1]),l=a-u,c=(r[0]-i[0])/1e3,f=r[2];if(0===c||a===u)return void n.snapToNorth({},{originalEvent:e});var p=.15*l/c;Math.abs(p)>2.5&&(p=p>0?2.5:-2.5);var h=1e3*Math.abs(p/(12*.15)),d=a+p*h/2e3;d<0&&(d=0),n.easeTo({zoom:d,duration:h,easing:s,around:this._aroundCenter?n.getCenter():n.unproject(f)},{originalEvent:e})},u.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,t=a.now();e.length>2&&t-e[0][0]>160;)e.shift()},t.exports=u},{"../../util/browser":252,"../../util/dom":259,"../../util/util":275,"../../util/window":254}],246:[function(e,t,n){"use strict";var r=e("../util/util"),i=e("../util/window"),o=e("../util/throttle"),a=function(){r.bindAll(["_onHashChange","_updateHash"],this),this._updateHash=o(this._updateHashUnthrottled.bind(this),300)};a.prototype.addTo=function(e){return this._map=e,i.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},a.prototype.remove=function(){return i.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),delete this._map,this},a.prototype.getHashString=function(e){var t=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,r=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),i=Math.pow(10,r),o=Math.round(t.lng*i)/i,a=Math.round(t.lat*i)/i,s=this._map.getBearing(),u=this._map.getPitch(),l="";return l+=e?"#/"+o+"/"+a+"/"+n:"#"+n+"/"+a+"/"+o,(s||u)&&(l+="/"+Math.round(10*s)/10),u&&(l+="/"+Math.round(u)),l},a.prototype._onHashChange=function(){var e=i.location.hash.replace("#","").split("/");return e.length>=3&&(this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:+(e[3]||0),pitch:+(e[4]||0)}),!0)},a.prototype._updateHashUnthrottled=function(){var e=this.getHashString();i.history.replaceState("","",e)},t.exports=a},{"../util/throttle":272,"../util/util":275,"../util/window":254}],247:[function(e,t,n){"use strict";function r(e){e.parentNode&&e.parentNode.removeChild(e)}var i=e("../util/util"),o=e("../util/browser"),a=e("../util/window"),s=e("../util/window"),u=s.HTMLImageElement,l=s.HTMLElement,c=e("../util/dom"),f=e("../util/ajax"),p=e("../style/style"),h=e("../style/evaluation_parameters"),d=e("../render/painter"),v=e("../geo/transform"),m=e("./hash"),y=e("./bind_handlers"),g=e("./camera"),_=e("../geo/lng_lat"),b=e("../geo/lng_lat_bounds"),x=e("@mapbox/point-geometry"),w=e("./control/attribution_control"),E=e("./control/logo_control"),S=e("@mapbox/mapbox-gl-supported"),T=e("../util/image"),A=T.RGBAImage;e("./events");var O={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:0,maxZoom:22,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,transformRequest:null,fadeDuration:300},P=function(e){function t(t){if(t=i.extend({},O,t),null!=t.minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than minZoom");var n=new v(t.minZoom,t.maxZoom,t.renderWorldCopies);e.call(this,n,t),this._interactive=t.interactive,this._maxTileCacheSize=t.maxTileCacheSize,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._trackResize=t.trackResize,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles,this._fadeDuration=t.fadeDuration,this._crossFadingFactor=1,this._collectResourceTiming=t.collectResourceTiming;var r=t.transformRequest;if(this._transformRequest=r?function(e,t){return r(e,t)||{url:e}}:function(e){return{url:e}},"string"==typeof t.container){var o=a.document.getElementById(t.container);if(!o)throw new Error("Container '"+t.container+"' not found.");this._container=o}else{if(!(t.container instanceof l))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=t.container}t.maxBounds&&this.setMaxBounds(t.maxBounds),i.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored","_update","_render","_onData","_onDataLoading"],this),this._setupContainer(),this._setupPainter(),this.on("move",this._update.bind(this,!1)),this.on("zoom",this._update.bind(this,!0)),void 0!==a&&(a.addEventListener("online",this._onWindowOnline,!1),a.addEventListener("resize",this._onWindowResize,!1)),y(this,t),this._hash=t.hash&&(new m).addTo(this),this._hash&&this._hash._onHashChange()||this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),this.resize(),t.style&&this.setStyle(t.style,{localIdeographFontFamily:t.localIdeographFontFamily}),t.attributionControl&&this.addControl(new w),this.addControl(new E,t.logoPosition),this.on("style.load",function(){this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",this._onData),this.on("dataloading",this._onDataLoading)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={showTileBoundaries:{},showCollisionBoxes:{},showOverdrawInspector:{},repaint:{},vertices:{}};return t.prototype.addControl=function(e,t){void 0===t&&e.getDefaultPosition&&(t=e.getDefaultPosition()),void 0===t&&(t="top-right");var n=e.onAdd(this),r=this._controlPositions[t];return-1!==t.indexOf("bottom")?r.insertBefore(n,r.firstChild):r.appendChild(n),this},t.prototype.removeControl=function(e){return e.onRemove(this),this},t.prototype.resize=function(){var e=this._containerDimensions(),t=e[0],n=e[1];return this._resizeCanvas(t,n),this.transform.resize(t,n),this.painter.resize(t,n),this.fire("movestart").fire("move").fire("resize").fire("moveend")},t.prototype.getBounds=function(){var e=new b(this.transform.pointLocation(new x(0,this.transform.height)),this.transform.pointLocation(new x(this.transform.width,0)));return(this.transform.angle||this.transform.pitch)&&(e.extend(this.transform.pointLocation(new x(this.transform.size.x,0))),e.extend(this.transform.pointLocation(new x(0,this.transform.size.y)))),e},t.prototype.getMaxBounds=function(){return this.transform.latRange&&2===this.transform.latRange.length&&this.transform.lngRange&&2===this.transform.lngRange.length?new b([this.transform.lngRange[0],this.transform.latRange[0]],[this.transform.lngRange[1],this.transform.latRange[1]]):null},t.prototype.setMaxBounds=function(e){if(e){var t=b.convert(e);this.transform.lngRange=[t.getWest(),t.getEast()],this.transform.latRange=[t.getSouth(),t.getNorth()],this.transform._constrain(),this._update()}else null!==e&&void 0!==e||(this.transform.lngRange=null,this.transform.latRange=null,this._update());return this},t.prototype.setMinZoom=function(e){if((e=null===e||void 0===e?0:e)>=0&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e&&this.setZoom(e),this;throw new Error("minZoom must be between 0 and the current maxZoom, inclusive")},t.prototype.getMinZoom=function(){return this.transform.minZoom},t.prototype.setMaxZoom=function(e){if((e=null===e||void 0===e?22:e)>=this.transform.minZoom)return this.transform.maxZoom=e,this._update(),this.getZoom()>e&&this.setZoom(e),this;throw new Error("maxZoom must be greater than the current minZoom")},t.prototype.getMaxZoom=function(){return this.transform.maxZoom},t.prototype.project=function(e){return this.transform.locationPoint(_.convert(e))},t.prototype.unproject=function(e){return this.transform.pointLocation(x.convert(e))},t.prototype.on=function(t,n,r){var o=this;if(void 0===r)return e.prototype.on.call(this,t,n);var a=function(){if("mouseenter"===t||"mouseover"===t){var e=!1;return{layer:n,listener:r,delegates:{mousemove:function(a){var s=o.getLayer(n)?o.queryRenderedFeatures(a.point,{layers:[n]}):[];s.length?e||(e=!0,r.call(o,i.extend({features:s},a,{type:t}))):e=!1},mouseout:function(){e=!1}}}}if("mouseleave"===t||"mouseout"===t){var a=!1;return{layer:n,listener:r,delegates:{mousemove:function(e){(o.getLayer(n)?o.queryRenderedFeatures(e.point,{layers:[n]}):[]).length?a=!0:a&&(a=!1,r.call(o,i.extend({},e,{type:t})))},mouseout:function(e){a&&(a=!1,r.call(o,i.extend({},e,{type:t})))}}}}var s=function(e){var t=o.getLayer(n)?o.queryRenderedFeatures(e.point,{layers:[n]}):[];t.length&&r.call(o,i.extend({features:t},e))};return{layer:n,listener:r,delegates:(u={},u[t]=s,u)};var u}();this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(a);for(var s in a.delegates)o.on(s,a.delegates[s]);return this},t.prototype.off=function(t,n,r){var i=this;if(void 0===r)return e.prototype.off.call(this,t,n);if(this._delegatedListeners&&this._delegatedListeners[t])for(var o=this._delegatedListeners[t],a=0;a<o.length;a++){var s=o[a];if(s.layer===n&&s.listener===r){for(var u in s.delegates)i.off(u,s.delegates[u]);return o.splice(a,1),i}}return this},t.prototype.queryRenderedFeatures=function(e,t){return 2===arguments.length?(e=arguments[0],t=arguments[1]):1===arguments.length&&function(e){return e instanceof x||Array.isArray(e)}(arguments[0])?(e=arguments[0],t={}):1===arguments.length?(e=void 0,t=arguments[0]):(e=void 0,t={}),this.style?this.style.queryRenderedFeatures(this._makeQueryGeometry(e),t,this.transform.zoom,this.transform.angle):[]},t.prototype._makeQueryGeometry=function(e){var t=this;void 0===e&&(e=[x.convert([0,0]),x.convert([this.transform.width,this.transform.height])]);var n;if(e instanceof x||"number"==typeof e[0])n=[x.convert(e)];else{var r=[x.convert(e[0]),x.convert(e[1])];n=[r[0],new x(r[1].x,r[0].y),r[1],new x(r[0].x,r[1].y),r[0]]}return n=n.map(function(e){return t.transform.pointCoordinate(e)})},t.prototype.querySourceFeatures=function(e,t){return this.style.querySourceFeatures(e,t)},t.prototype.setStyle=function(e,t){if((!t||!1!==t.diff&&!t.localIdeographFontFamily)&&this.style&&e&&"object"==typeof e)try{return this.style.setState(e)&&this._update(!0),this}catch(e){i.warnOnce("Unable to perform style diff: "+(e.message||e.error||e)+".  Rebuilding the style from scratch.")}return this.style&&(this.style.setEventedParent(null),this.style._remove()),e?(this.style=new p(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e),this):(delete this.style,this)},t.prototype.getStyle=function(){if(this.style)return this.style.serialize()},t.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():i.warnOnce("There is no style added to the map.")},t.prototype.addSource=function(e,t){return this.style.addSource(e,t),this._update(!0),this},t.prototype.isSourceLoaded=function(e){var t=this.style&&this.style.sourceCaches[e];return void 0===t?void this.fire("error",{error:new Error("There is no source with ID '"+e+"'")}):t.loaded()},t.prototype.areTilesLoaded=function(){var e=this.style&&this.style.sourceCaches;for(var t in e){var n=e[t],r=n._tiles;for(var i in r){var o=r[i];if("loaded"!==o.state&&"errored"!==o.state)return!1}}return!0},t.prototype.addSourceType=function(e,t,n){return this.style.addSourceType(e,t,n)},t.prototype.removeSource=function(e){return this.style.removeSource(e),this._update(!0),this},t.prototype.getSource=function(e){return this.style.getSource(e)},t.prototype.addImage=function(e,t,n){void 0===n&&(n={});var r=n.pixelRatio;void 0===r&&(r=1);var i=n.sdf;if(void 0===i&&(i=!1),t instanceof u){var a=o.getImageData(t),s=a.width,l=a.height,c=a.data;this.style.addImage(e,{data:new A({width:s,height:l},c),pixelRatio:r,sdf:i})}else{if(void 0===t.width||void 0===t.height)return this.fire("error",{error:new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")});var f=t.width,p=t.height,h=t.data;this.style.addImage(e,{data:new A({width:f,height:p},h.slice(0)),pixelRatio:r,sdf:i})}},t.prototype.hasImage=function(e){return e?!!this.style.getImage(e):(this.fire("error",{error:new Error("Missing required image id")}),!1)},t.prototype.removeImage=function(e){this.style.removeImage(e)},t.prototype.loadImage=function(e,t){f.getImage(this._transformRequest(e,f.ResourceType.Image),t)},t.prototype.addLayer=function(e,t){return this.style.addLayer(e,t),this._update(!0),this},t.prototype.moveLayer=function(e,t){return this.style.moveLayer(e,t),this._update(!0),this},t.prototype.removeLayer=function(e){return this.style.removeLayer(e),this._update(!0),this},t.prototype.getLayer=function(e){return this.style.getLayer(e)},t.prototype.setFilter=function(e,t){return this.style.setFilter(e,t),this._update(!0),this},t.prototype.setLayerZoomRange=function(e,t,n){return this.style.setLayerZoomRange(e,t,n),this._update(!0),this},t.prototype.getFilter=function(e){return this.style.getFilter(e)},t.prototype.setPaintProperty=function(e,t,n){return this.style.setPaintProperty(e,t,n),this._update(!0),this},t.prototype.getPaintProperty=function(e,t){return this.style.getPaintProperty(e,t)},t.prototype.setLayoutProperty=function(e,t,n){return this.style.setLayoutProperty(e,t,n),this._update(!0),this},t.prototype.getLayoutProperty=function(e,t){return this.style.getLayoutProperty(e,t)},t.prototype.setLight=function(e){return this.style.setLight(e),this._update(!0),this},t.prototype.getLight=function(){return this.style.getLight()},t.prototype.getContainer=function(){return this._container},t.prototype.getCanvasContainer=function(){return this._canvasContainer},t.prototype.getCanvas=function(){return this._canvas},t.prototype._containerDimensions=function(){var e=0,t=0;return this._container&&(e=this._container.offsetWidth||400,t=this._container.offsetHeight||300),[e,t]},t.prototype._setupContainer=function(){var e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSContainer=c.create("div","mapboxgl-missing-css",e)).innerHTML="Missing Mapbox GL JS CSS";var t=this._canvasContainer=c.create("div","mapboxgl-canvas-container",e);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=c.create("canvas","mapboxgl-canvas",t),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var n=this._containerDimensions();this._resizeCanvas(n[0],n[1]);var r=this._controlContainer=c.create("div","mapboxgl-control-container",e),i=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(e){i[e]=c.create("div","mapboxgl-ctrl-"+e,r)})},t.prototype._resizeCanvas=function(e,t){var n=a.devicePixelRatio||1;this._canvas.width=n*e,this._canvas.height=n*t,this._canvas.style.width=e+"px",this._canvas.style.height=t+"px"},t.prototype._setupPainter=function(){var e=i.extend({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer},S.webGLContextAttributes),t=this._canvas.getContext("webgl",e)||this._canvas.getContext("experimental-webgl",e);if(!t)return void this.fire("error",{error:new Error("Failed to initialize WebGL")});this.painter=new d(t,this.transform)},t.prototype._contextLost=function(e){e.preventDefault(),this._frameId&&(o.cancelFrame(this._frameId),this._frameId=null),this.fire("webglcontextlost",{originalEvent:e})},t.prototype._contextRestored=function(e){this._setupPainter(),this.resize(),this._update(),this.fire("webglcontextrestored",{originalEvent:e})},t.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!(!this.style||!this.style.loaded())},t.prototype._update=function(e){this.style&&(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this._rerender())},t.prototype._render=function(){this._updateCamera();var e=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var t=this.transform.zoom,n=o.now();this.style.zoomHistory.update(t,n);var r=new h(t,{now:n,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),i=r.crossFadingFactor();1===i&&i===this._crossFadingFactor||(e=!0,this._crossFadingFactor=i),this.style.update(r)}return this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.rotating,zooming:this.zooming,fadeDuration:this._fadeDuration}),this.fire("render"),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire("load")),this.style&&(this.style.hasTransitions()||e)&&(this._styleDirty=!0),(this._sourcesDirty||this._repaint||this._styleDirty||this._placementDirty)&&this._rerender(),this},t.prototype.remove=function(){this._hash&&this._hash.remove(),o.cancelFrame(this._frameId),this._frameId=null,this.setStyle(null),void 0!==a&&(a.removeEventListener("resize",this._onWindowResize,!1),a.removeEventListener("online",this._onWindowOnline,!1));var e=this.painter.context.gl.getExtension("WEBGL_lose_context");e&&e.loseContext(),r(this._canvasContainer),r(this._controlContainer),r(this._missingCSSContainer),this._container.classList.remove("mapboxgl-map"),this.fire("remove")},t.prototype._rerender=function(){var e=this;this.style&&!this._frameId&&(this._frameId=o.frame(function(){e._frameId=null,e._render()}))},t.prototype._onWindowOnline=function(){this._update()},t.prototype._onWindowResize=function(){this._trackResize&&this.stop().resize()._update()},n.showTileBoundaries.get=function(){return!!this._showTileBoundaries},n.showTileBoundaries.set=function(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())},n.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},n.showCollisionBoxes.set=function(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())},n.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},n.showOverdrawInspector.set=function(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())},n.repaint.get=function(){return!!this._repaint},n.repaint.set=function(e){this._repaint=e,this._update()},n.vertices.get=function(){return!!this._vertices},n.vertices.set=function(e){this._vertices=e,this._update()},t.prototype._onData=function(e){this._update("style"===e.dataType),this.fire(e.dataType+"data",e)},t.prototype._onDataLoading=function(e){this.fire(e.dataType+"dataloading",e)},Object.defineProperties(t.prototype,n),t}(g);t.exports=P},{"../geo/lng_lat":62,"../geo/lng_lat_bounds":63,"../geo/transform":64,"../render/painter":90,"../style/evaluation_parameters":182,"../style/style":190,"../util/ajax":251,"../util/browser":252,"../util/dom":259,"../util/image":263,"../util/util":275,"../util/window":254,"./bind_handlers":230,"./camera":231,"./control/attribution_control":232,"./control/logo_control":235,"./events":238,"./hash":246,"@mapbox/mapbox-gl-supported":3,"@mapbox/point-geometry":4}],248:[function(e,t,n){"use strict";var r=e("../util/dom"),i=e("../geo/lng_lat"),o=e("@mapbox/point-geometry"),a=e("../util/smart_wrap"),s=e("../util/util"),u=s.bindAll,l=function(e,t){if(u(["_update","_onMapClick"],this),!e){e=r.create("div");var n=r.createNS("http://www.w3.org/2000/svg","svg");n.setAttributeNS(null,"height","41px"),n.setAttributeNS(null,"width","27px"),n.setAttributeNS(null,"viewBox","0 0 27 41");var i=r.createNS("http://www.w3.org/2000/svg","g");i.setAttributeNS(null,"stroke","none"),i.setAttributeNS(null,"stroke-width","1"),i.setAttributeNS(null,"fill","none"),i.setAttributeNS(null,"fill-rule","evenodd");var a=r.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"fill-rule","nonzero");var s=r.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"transform","translate(3.0, 29.0)"),s.setAttributeNS(null,"fill","#000000");for(var l=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}],c=0,f=l;c<f.length;c+=1){var p=f[c],h=r.createNS("http://www.w3.org/2000/svg","ellipse");h.setAttributeNS(null,"opacity","0.04"),h.setAttributeNS(null,"cx","10.5"),h.setAttributeNS(null,"cy","5.80029008"),h.setAttributeNS(null,"rx",p.rx),h.setAttributeNS(null,"ry",p.ry),s.appendChild(h)}var d=r.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"fill","#3FB1CE");var v=r.createNS("http://www.w3.org/2000/svg","path");v.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),d.appendChild(v);var m=r.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"opacity","0.25"),m.setAttributeNS(null,"fill","#000000");var y=r.createNS("http://www.w3.org/2000/svg","path");y.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),m.appendChild(y);var g=r.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"transform","translate(6.0, 7.0)"),g.setAttributeNS(null,"fill","#FFFFFF");var _=r.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"transform","translate(8.0, 8.0)");var b=r.createNS("http://www.w3.org/2000/svg","circle");b.setAttributeNS(null,"fill","#000000"),b.setAttributeNS(null,"opacity","0.25"),b.setAttributeNS(null,"cx","5.5"),b.setAttributeNS(null,"cy","5.5"),b.setAttributeNS(null,"r","5.4999962");var x=r.createNS("http://www.w3.org/2000/svg","circle");x.setAttributeNS(null,"fill","#FFFFFF"),x.setAttributeNS(null,"cx","5.5"),x.setAttributeNS(null,"cy","5.5"),x.setAttributeNS(null,"r","5.4999962"),_.appendChild(b),_.appendChild(x),a.appendChild(s),a.appendChild(d),a.appendChild(m),a.appendChild(g),a.appendChild(_),n.appendChild(a),e.appendChild(n);var w=[0,-14];t&&t.offset||(t?t.offset=w:t={offset:w})}this._offset=o.convert(t&&t.offset||[0,0]),e.classList.add("mapboxgl-marker"),this._element=e,this._popup=null};l.prototype.addTo=function(e){return this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),this._update(),this._map.on("click",this._onMapClick),this},l.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),delete this._map),r.remove(this._element),this._popup&&this._popup.remove(),this},l.prototype.getLngLat=function(){return this._lngLat},l.prototype.setLngLat=function(e){return this._lngLat=i.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},l.prototype.getElement=function(){return this._element},l.prototype.setPopup=function(e){return this._popup&&(this._popup.remove(),this._popup=null),e&&("offset"in e.options||(e.options.offset=this._offset),this._popup=e,this._lngLat&&this._popup.setLngLat(this._lngLat)),this},l.prototype._onMapClick=function(e){var t=e.originalEvent.target,n=this._element;this._popup&&(t===n||n.contains(t))&&this.togglePopup()},l.prototype.getPopup=function(){return this._popup},l.prototype.togglePopup=function(){var e=this._popup;return e?(e.isOpen()?e.remove():e.addTo(this._map),this):this},l.prototype._update=function(e){this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=a(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset),e&&"moveend"!==e.type||(this._pos=this._pos.round()),r.setTransform(this._element,"translate(-50%, -50%) translate("+this._pos.x+"px, "+this._pos.y+"px)"))},l.prototype.getOffset=function(){return this._offset},l.prototype.setOffset=function(e){return this._offset=o.convert(e),this._update(),this},t.exports=l},{"../geo/lng_lat":62,"../util/dom":259,"../util/smart_wrap":270,"../util/util":275,"@mapbox/point-geometry":4}],249:[function(e,t,n){"use strict";function r(e){if(e){if("number"==typeof e){var t=Math.round(Math.sqrt(.5*Math.pow(e,2)));return{top:new u(0,e),"top-left":new u(t,t),"top-right":new u(-t,t),bottom:new u(0,-e),"bottom-left":new u(t,-t),"bottom-right":new u(-t,-t),left:new u(e,0),right:new u(-e,0)}}if(e instanceof u||Array.isArray(e)){var n=u.convert(e);return{top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{top:u.convert(e.top||[0,0]),"top-left":u.convert(e["top-left"]||[0,0]),"top-right":u.convert(e["top-right"]||[0,0]),bottom:u.convert(e.bottom||[0,0]),"bottom-left":u.convert(e["bottom-left"]||[0,0]),"bottom-right":u.convert(e["bottom-right"]||[0,0]),left:u.convert(e.left||[0,0]),right:u.convert(e.right||[0,0])}}return r(new u(0,0))}var i=e("../util/util"),o=e("../util/evented"),a=e("../util/dom"),s=e("../geo/lng_lat"),u=e("@mapbox/point-geometry"),l=e("../util/window"),c=e("../util/smart_wrap"),f={closeButton:!0,closeOnClick:!0},p=function(e){function t(t){e.call(this),this.options=i.extend(Object.create(f),t),i.bindAll(["_update","_onClickClose"],this)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.addTo=function(e){return this._map=e,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._update(),this},t.prototype.isOpen=function(){return!!this._map},t.prototype.remove=function(){return this._content&&a.remove(this._content),this._container&&(a.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),delete this._map),this.fire("close"),this},t.prototype.getLngLat=function(){return this._lngLat},t.prototype.setLngLat=function(e){return this._lngLat=s.convert(e),this._pos=null,this._update(),this},t.prototype.setText=function(e){return this.setDOMContent(l.document.createTextNode(e))},t.prototype.setHTML=function(e){var t,n=l.document.createDocumentFragment(),r=l.document.createElement("body");for(r.innerHTML=e;t=r.firstChild;)n.appendChild(t);return this.setDOMContent(n)},t.prototype.setDOMContent=function(e){return this._createContent(),this._content.appendChild(e),this._update(),this},t.prototype._createContent=function(){this._content&&a.remove(this._content),this._content=a.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=a.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},t.prototype._update=function(){if(this._map&&this._lngLat&&this._content){this._container||(this._container=a.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=a.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content)),this._map.transform.renderWorldCopies&&(this._lngLat=c(this._lngLat,this._pos,this._map.transform));var e=this._pos=this._map.project(this._lngLat),t=this.options.anchor,n=r(this.options.offset);if(!t){var i=this._container.offsetWidth,o=this._container.offsetHeight;t=e.y+n.bottom.y<o?["top"]:e.y>this._map.transform.height-o?["bottom"]:[],e.x<i/2?t.push("left"):e.x>this._map.transform.width-i/2&&t.push("right"),t=0===t.length?"bottom":t.join("-")}var s=e.add(n[t]).round(),u={top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},l=this._container.classList;for(var f in u)l.remove("mapboxgl-popup-anchor-"+f);l.add("mapboxgl-popup-anchor-"+t),a.setTransform(this._container,u[t]+" translate("+s.x+"px,"+s.y+"px)")}},t.prototype._onClickClose=function(){this.remove()},t}(o);t.exports=p},{"../geo/lng_lat":62,"../util/dom":259,"../util/evented":260,"../util/smart_wrap":270,"../util/util":275,"../util/window":254,"@mapbox/point-geometry":4}],250:[function(e,t,n){"use strict";var r=e("./util"),i=e("./web_worker_transfer"),o=i.serialize,a=i.deserialize,s=function(e,t,n){this.target=e,this.parent=t,this.mapId=n,this.callbacks={},this.callbackID=0,r.bindAll(["receive"],this),this.target.addEventListener("message",this.receive,!1)};s.prototype.send=function(e,t,n,r){var i=n?this.mapId+":"+this.callbackID++:null;n&&(this.callbacks[i]=n);var a=[];this.target.postMessage({targetMapId:r,sourceMapId:this.mapId,type:e,id:String(i),data:o(t,a)},a)},s.prototype.receive=function(e){var t,n=this,r=e.data,i=r.id;if(!r.targetMapId||this.mapId===r.targetMapId){var s=function(e,t){var r=[];n.target.postMessage({sourceMapId:n.mapId,type:"<response>",id:String(i),error:e?String(e):null,data:o(t,r)},r)};if("<response>"===r.type)t=this.callbacks[r.id],delete this.callbacks[r.id],t&&r.error?t(new Error(r.error)):t&&t(null,a(r.data));else if(void 0!==r.id&&this.parent[r.type])this.parent[r.type](r.sourceMapId,a(r.data),s);else if(void 0!==r.id&&this.parent.getWorkerSource){var u=r.type.split("."),l=this.parent.getWorkerSource(r.sourceMapId,u[0]);l[u[1]](a(r.data),s)}else this.parent[r.type](a(r.data))}},s.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)},t.exports=s},{"./util":275,"./web_worker_transfer":278}],251:[function(e,t,n){"use strict";function r(e){var t=new o.XMLHttpRequest;t.open("GET",e.url,!0);for(var n in e.headers)t.setRequestHeader(n,e.headers[n]);return t.withCredentials="include"===e.credentials,t}function i(e){var t=o.document.createElement("a");return t.href=e,t.protocol===o.document.location.protocol&&t.host===o.document.location.host}var o=e("./window"),a={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};n.ResourceType=a,"function"==typeof Object.freeze&&Object.freeze(a);var s=function(e){function t(t,n){e.call(this,t),this.status=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error);n.getJSON=function(e,t){var n=r(e);return n.setRequestHeader("Accept","application/json"),n.onerror=function(){t(new Error(n.statusText))},n.onload=function(){if(n.status>=200&&n.status<300&&n.response){var e;try{e=JSON.parse(n.response)}catch(e){return t(e)}t(null,e)}else t(new s(n.statusText,n.status))},n.send(),n},n.getArrayBuffer=function(e,t){var n=r(e);return n.responseType="arraybuffer",n.onerror=function(){t(new Error(n.statusText))},n.onload=function(){var e=n.response;if(0===e.byteLength&&200===n.status)return t(new Error("http status 200 returned without content."));n.status>=200&&n.status<300&&n.response?t(null,{data:e,cacheControl:n.getResponseHeader("Cache-Control"),expires:n.getResponseHeader("Expires")}):t(new s(n.statusText,n.status))},n.send(),n};n.getImage=function(e,t){return n.getArrayBuffer(e,function(e,n){if(e)t(e);else if(n){var r=new o.Image,i=o.URL||o.webkitURL;r.onload=function(){t(null,r),i.revokeObjectURL(r.src)};var a=new o.Blob([new Uint8Array(n.data)],{type:"image/png"});r.cacheControl=n.cacheControl,r.expires=n.expires,r.src=n.data.byteLength?i.createObjectURL(a):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}})},n.getVideo=function(e,t){var n=o.document.createElement("video");n.onloadstart=function(){t(null,n)};for(var r=0;r<e.length;r++){var a=o.document.createElement("source");i(e[r])||(n.crossOrigin="Anonymous"),a.src=e[r],n.appendChild(a)}return n}},{"./window":254}],252:[function(e,t,n){"use strict";var r=e("./window"),i=r.performance&&r.performance.now?r.performance.now.bind(r.performance):Date.now.bind(Date),o=r.requestAnimationFrame||r.mozRequestAnimationFrame||r.webkitRequestAnimationFrame||r.msRequestAnimationFrame,a=r.cancelAnimationFrame||r.mozCancelAnimationFrame||r.webkitCancelAnimationFrame||r.msCancelAnimationFrame;t.exports={now:i,frame:function(e){return o(e)},cancelFrame:function(e){return a(e)},getImageData:function(e){var t=r.document.createElement("canvas"),n=t.getContext("2d");if(!n)throw new Error("failed to create canvas 2d context");return t.width=e.width,t.height=e.height,n.drawImage(e,0,0,e.width,e.height),n.getImageData(0,0,e.width,e.height)},hardwareConcurrency:r.navigator.hardwareConcurrency||4,get devicePixelRatio(){return r.devicePixelRatio},supportsWebp:!1};var s=r.document.createElement("img");s.onload=function(){t.exports.supportsWebp=!0},s.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="},{"./window":254}],253:[function(e,t,n){"use strict";var r=e("webworkify"),i=e("../window"),o=i.URL.createObjectURL(new r(e("../../source/worker"),{bare:!0}));t.exports=function(){return new i.Worker(o)}},{"../../source/worker":118,"../window":254,webworkify:36}],254:[function(e,t,n){"use strict";t.exports=self},{}],255:[function(e,t,n){"use strict";function r(e,t){return t.area-e.area}var i=e("quickselect"),o=e("./util").calculateSignedArea;t.exports=function(e,t){var n=e.length;if(n<=1)return[e];for(var a,s,u=[],l=0;l<n;l++){var c=o(e[l]);0!==c&&(e[l].area=Math.abs(c),void 0===s&&(s=c<0),s===c<0?(a&&u.push(a),a=[e[l]]):a.push(e[l]))}if(a&&u.push(a),t>1)for(var f=0;f<u.length;f++)u[f].length<=t||(i(u[f],t,1,u[f].length-1,r),u[f]=u[f].slice(0,t));return u}},{"./util":275,quickselect:31}],256:[function(e,t,n){"use strict";var r={API_URL:"https://api.mapbox.com",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null};t.exports=r},{}],257:[function(e,t,n){"use strict";var r=function(e){var t=this;this._stringToNumber={},this._numberToString=[];for(var n=0;n<e.length;n++){var r=e[n];t._stringToNumber[r]=n,t._numberToString[n]=r}};r.prototype.encode=function(e){return this._stringToNumber[e]},r.prototype.decode=function(e){return this._numberToString[e]},t.exports=r},{}],258:[function(e,t,n){"use strict";var r=e("./util"),i=e("./actor"),o=function(e,t){var n=this;this.workerPool=e,this.actors=[],this.currentActor=0,this.id=r.uniqueId();for(var o=this.workerPool.acquire(this.id),a=0;a<o.length;a++){var s=o[a],u=new i(s,t,n.id);u.name="Worker "+a,n.actors.push(u)}};o.prototype.broadcast=function(e,t,n){n=n||function(){},r.asyncAll(this.actors,function(n,r){n.send(e,t,r)},n)},o.prototype.send=function(e,t,n,r){return("number"!=typeof r||isNaN(r))&&(r=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[r].send(e,t,n),r},o.prototype.remove=function(){this.actors.forEach(function(e){e.remove()}),this.actors=[],this.workerPool.release(this.id)},t.exports=o},{"./actor":250,"./util":275}],259:[function(e,t,n){"use strict";function r(e){for(var t=0;t<e.length;t++)if(e[t]in s)return e[t];return e[0]}var i=e("@mapbox/point-geometry"),o=e("./window");n.create=function(e,t,n){var r=o.document.createElement(e);return t&&(r.className=t),n&&n.appendChild(r),r},n.createNS=function(e,t){return o.document.createElementNS(e,t)};var a,s=o.document.documentElement.style,u=r(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);n.disableDrag=function(){u&&(a=s[u],s[u]="none")},n.enableDrag=function(){u&&(s[u]=a)};var l=r(["transform","WebkitTransform"]);n.setTransform=function(e,t){e.style[l]=t};var c=function(e){e.preventDefault(),e.stopPropagation(),o.removeEventListener("click",c,!0)};n.suppressClick=function(){o.addEventListener("click",c,!0),o.setTimeout(function(){o.removeEventListener("click",c,!0)},0)},n.mousePos=function(e,t){var n=e.getBoundingClientRect();return t=t.touches?t.touches[0]:t,new i(t.clientX-n.left-e.clientLeft,t.clientY-n.top-e.clientTop)},n.touchPos=function(e,t){for(var n=e.getBoundingClientRect(),r=[],o="touchend"===t.type?t.changedTouches:t.touches,a=0;a<o.length;a++)r.push(new i(o[a].clientX-n.left-e.clientLeft,o[a].clientY-n.top-e.clientTop));return r},n.remove=function(e){e.parentNode&&e.parentNode.removeChild(e)}},{"./window":254,"@mapbox/point-geometry":4}],260:[function(e,t,n){"use strict";function r(e,t,n){n[e]=n[e]||[],n[e].push(t)}function i(e,t,n){if(n&&n[e]){var r=n[e].indexOf(t);-1!==r&&n[e].splice(r,1)}}var o=e("./util"),a=function(){};a.prototype.on=function(e,t){return this._listeners=this._listeners||{},r(e,t,this._listeners),this},a.prototype.off=function(e,t){return i(e,t,this._listeners),i(e,t,this._oneTimeListeners),this},a.prototype.once=function(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},r(e,t,this._oneTimeListeners),this},a.prototype.fire=function(e,t){var n=this;if(this.listens(e)){t=o.extend({},t,{type:e,target:this});for(var r=this._listeners&&this._listeners[e]?this._listeners[e].slice():[],a=0,s=r;a<s.length;a+=1)s[a].call(n,t);for(var u=this._oneTimeListeners&&this._oneTimeListeners[e]?this._oneTimeListeners[e].slice():[],l=0,c=u;l<c.length;l+=1){var f=c[l];i(e,f,n._oneTimeListeners),f.call(n,t)}this._eventedParent&&this._eventedParent.fire(e,o.extend({},t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData))}else o.endsWith(e,"error")&&console.error(t&&t.error||t||"Empty error event");return this},a.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)},a.prototype.setEventedParent=function(e,t){return this._eventedParent=e,this._eventedParentData=t,this},t.exports=a},{"./util":275}],261:[function(e,t,n){"use strict";function r(e,t){return t.max-e.max}function i(e,t,n,r){this.p=new u(e,t),this.h=n,this.d=o(this.p,r),this.max=this.d+this.h*Math.SQRT2}function o(e,t){for(var n=!1,r=1/0,i=0;i<t.length;i++)for(var o=t[i],a=0,s=o.length,u=s-1;a<s;u=a++){var c=o[a],f=o[u];c.y>e.y!=f.y>e.y&&e.x<(f.x-c.x)*(e.y-c.y)/(f.y-c.y)+c.x&&(n=!n),r=Math.min(r,l(e,c,f))}return(n?1:-1)*Math.sqrt(r)}function a(e){for(var t=0,n=0,r=0,o=e[0],a=0,s=o.length,u=s-1;a<s;u=a++){var l=o[a],c=o[u],f=l.x*c.y-c.x*l.y;n+=(l.x+c.x)*f,r+=(l.y+c.y)*f,t+=3*f}return new i(n/t,r/t,0,e)}var s=e("tinyqueue"),u=e("@mapbox/point-geometry"),l=e("./intersection_tests").distToSegmentSquared;t.exports=function(e,t,n){void 0===t&&(t=1),void 0===n&&(n=!1);for(var o=1/0,l=1/0,c=-1/0,f=-1/0,p=e[0],h=0;h<p.length;h++){var d=p[h];(!h||d.x<o)&&(o=d.x),(!h||d.y<l)&&(l=d.y),(!h||d.x>c)&&(c=d.x),(!h||d.y>f)&&(f=d.y)}var v=c-o,m=f-l,y=Math.min(v,m),g=y/2,_=new s(null,r);if(0===y)return new u(o,l);for(var b=o;b<c;b+=y)for(var x=l;x<f;x+=y)_.push(new i(b+g,x+g,g,e));for(var w=a(e),E=_.length;_.length;){var S=_.pop();(S.d>w.d||!w.d)&&(w=S,n&&console.log("found best %d after %d probes",Math.round(1e4*S.d)/1e4,E)),S.max-w.d<=t||(g=S.h/2,_.push(new i(S.p.x-g,S.p.y-g,g,e)),_.push(new i(S.p.x+g,S.p.y-g,g,e)),_.push(new i(S.p.x-g,S.p.y+g,g,e)),_.push(new i(S.p.x+g,S.p.y+g,g,e)),E+=4)}return n&&(console.log("num probes: "+E),console.log("best distance: "+w.d)),w.p}},{"./intersection_tests":264,"@mapbox/point-geometry":4,tinyqueue:33}],262:[function(e,t,n){"use strict";var r,i=e("./worker_pool");t.exports=function(){return r||(r=new i),r}},{"./worker_pool":279}],263:[function(e,t,n){"use strict";function r(e,t,n,r){var i=t.width,o=t.height;if(r){if(r.length!==i*o*n)throw new RangeError("mismatched image size")}else r=new Uint8Array(i*o*n);return e.width=i,e.height=o,e.data=r,e}function i(e,t,n){var i=t.width,a=t.height;if(i!==e.width||a!==e.height){var s=r({},{width:i,height:a},n);o(e,s,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,i),height:Math.min(e.height,a)},n),e.width=i,e.height=a,e.data=s.data}}function o(e,t,n,r,i,o){if(0===i.width||0===i.height)return t;if(i.width>e.width||i.height>e.height||n.x>e.width-i.width||n.y>e.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>t.width||i.height>t.height||r.x>t.width-i.width||r.y>t.height-i.height)throw new RangeError("out of range destination coordinates for image copy");for(var a=e.data,s=t.data,u=0;u<i.height;u++)for(var l=((n.y+u)*e.width+n.x)*o,c=((r.y+u)*t.width+r.x)*o,f=0;f<i.width*o;f++)s[c+f]=a[l+f];return t}var a=e("./web_worker_transfer"),s=a.register,u=function(e,t){r(this,e,1,t)};u.prototype.resize=function(e){i(this,e,1)},u.prototype.clone=function(){return new u({width:this.width,height:this.height},new Uint8Array(this.data))},u.copy=function(e,t,n,r,i){o(e,t,n,r,i,1)};var l=function(e,t){r(this,e,4,t)};l.prototype.resize=function(e){i(this,e,4)},l.prototype.clone=function(){return new l({width:this.width,height:this.height},new Uint8Array(this.data))},l.copy=function(e,t,n,r,i){o(e,t,n,r,i,4)},s("AlphaImage",u),s("RGBAImage",l),t.exports={AlphaImage:u,RGBAImage:l}},{"./web_worker_transfer":278}],264:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<e.length;n++)if(h(t,e[n]))return!0;for(var r=0;r<t.length;r++)if(h(e,t[r]))return!0;return!!u(e,t)}function i(e,t,n){for(var r=0;r<e.length;r++)for(var i=e[r],o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var u=a[s];if(h(i,u))return!0;if(c(u,i,n))return!0}return!1}function o(e,t){if(1===e.length&&1===e[0].length)return p(t,e[0][0]);for(var n=0;n<t.length;n++)for(var r=t[n],i=0;i<r.length;i++)if(p(e,r[i]))return!0;for(var o=0;o<e.length;o++){for(var a=e[o],s=0;s<a.length;s++)if(p(t,a[s]))return!0;for(var l=0;l<t.length;l++)if(u(a,t[l]))return!0}return!1}function a(e,t,n){for(var r=0;r<t.length;r++)for(var i=t[r],o=0;o<e.length;o++){var a=e[o];if(a.length>=3)for(var u=0;u<i.length;u++)if(h(a,i[u]))return!0;if(s(a,i,n))return!0}return!1}function s(e,t,n){if(e.length>1){if(u(e,t))return!0;for(var r=0;r<t.length;r++)if(c(t[r],e,n))return!0}for(var i=0;i<e.length;i++)if(c(e[i],t,n))return!0;return!1}function u(e,t){if(0===e.length||0===t.length)return!1;for(var n=0;n<e.length-1;n++)for(var r=e[n],i=e[n+1],o=0;o<t.length-1;o++){var a=t[o],s=t[o+1];if(l(r,i,a,s))return!0}return!1}function l(e,t,n,r){return v(e,n,r)!==v(t,n,r)&&v(e,t,n)!==v(e,t,r)}function c(e,t,n){var r=n*n;if(1===t.length)return e.distSqr(t[0])<r;for(var i=1;i<t.length;i++)if(f(e,t[i-1],t[i])<r)return!0;return!1}function f(e,t,n){var r=t.distSqr(n);if(0===r)return e.distSqr(t);var i=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/r;return i<0?e.distSqr(t):i>1?e.distSqr(n):e.distSqr(n.sub(t)._mult(i)._add(t))}function p(e,t){for(var n,r,i,o=!1,a=0;a<e.length;a++){n=e[a];for(var s=0,u=n.length-1;s<n.length;u=s++)r=n[s],i=n[u],r.y>t.y!=i.y>t.y&&t.x<(i.x-r.x)*(t.y-r.y)/(i.y-r.y)+r.x&&(o=!o)}return o}function h(e,t){for(var n=!1,r=0,i=e.length-1;r<e.length;i=r++){var o=e[r],a=e[i];o.y>t.y!=a.y>t.y&&t.x<(a.x-o.x)*(t.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}var d=e("./util"),v=d.isCounterClockwise;t.exports={multiPolygonIntersectsBufferedMultiPoint:i,multiPolygonIntersectsMultiPolygon:o,multiPolygonIntersectsBufferedMultiLine:a,polygonIntersectsPolygon:r,distToSegmentSquared:f}},{"./util":275}],265:[function(e,t,n){"use strict";var r={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};t.exports=r},{}],266:[function(e,t,n){"use strict";var r=function(e,t){this.max=e,this.onRemove=t,this.reset()};r.prototype.reset=function(){var e=this;for(var t in e.data)e.onRemove(e.data[t]);return this.data={},this.order=[],this},r.prototype.add=function(e,t){if(this.has(e))this.order.splice(this.order.indexOf(e),1),this.data[e]=t,this.order.push(e);else if(this.data[e]=t,this.order.push(e),this.order.length>this.max){var n=this.getAndRemove(this.order[0]);n&&this.onRemove(n)}return this},r.prototype.has=function(e){return e in this.data},r.prototype.keys=function(){return this.order},r.prototype.getAndRemove=function(e){if(!this.has(e))return null;var t=this.data[e];return delete this.data[e],this.order.splice(this.order.indexOf(e),1),t},r.prototype.get=function(e){return this.has(e)?this.data[e]:null},r.prototype.remove=function(e){if(!this.has(e))return this;var t=this.data[e];return delete this.data[e],this.onRemove(t),this.order.splice(this.order.indexOf(e),1),this},r.prototype.setMaxSize=function(e){var t=this;for(this.max=e;this.order.length>this.max;){var n=t.getAndRemove(t.order[0]);n&&t.onRemove(n)}return this},t.exports=r},{}],267:[function(e,t,n){"use strict";function r(e,t){var n=a(u.API_URL);if(e.protocol=n.protocol,e.authority=n.authority,"/"!==n.path&&(e.path=""+n.path+e.path),!u.REQUIRE_ACCESS_TOKEN)return s(e);if(!(t=t||u.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+c);if("s"===t[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+c);return e.params.push("access_token="+t),s(e)}function i(e){return 0===e.indexOf("mapbox:")}function o(e){for(var t=0;t<e.length;t++)0===e[t].indexOf("access_token=tk.")&&(e[t]="access_token="+(u.ACCESS_TOKEN||""))}function a(e){var t=e.match(p);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function s(e){var t=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+t}var u=e("./config"),l=e("./browser"),c="See https://www.mapbox.com/api-documentation/#access-tokens";n.isMapboxURL=i,n.normalizeStyleURL=function(e,t){if(!i(e))return e;var n=a(e);return n.path="/styles/v1"+n.path,r(n,t)},n.normalizeGlyphsURL=function(e,t){if(!i(e))return e;var n=a(e);return n.path="/fonts/v1"+n.path,r(n,t)},n.normalizeSourceURL=function(e,t){if(!i(e))return e;var n=a(e);return n.path="/v4/"+n.authority+".json",n.params.push("secure"),r(n,t)},n.normalizeSpriteURL=function(e,t,n,o){var u=a(e);return i(e)?(u.path="/styles/v1"+u.path+"/sprite"+t+n,r(u,o)):(u.path+=""+t+n,s(u))};var f=/(\.(png|jpg)\d*)(?=$)/;n.normalizeTileURL=function(e,t,n){if(!t||!i(t))return e;var r=a(e),u=l.devicePixelRatio>=2||512===n?"@2x":"",c=l.supportsWebp?".webp":"$1";return r.path=r.path.replace(f,""+u+c),o(r.params),s(r)};var p=/^(\w+):\/\/([^\/?]*)(\/[^?]+)?\??(.+)?/},{"./browser":252,"./config":256}],268:[function(e,t,n){"use strict";t.exports={getEntriesByName:function(e){return!(!performance||!performance.getEntriesByName)&&performance.getEntriesByName(e)}}},{}],269:[function(e,t,n){"use strict";var r=e("./is_char_in_unicode_block");t.exports.allowsIdeographicBreaking=function(e){for(var t=0,r=e;t<r.length;t+=1){var i=r[t];if(!n.charAllowsIdeographicBreaking(i.charCodeAt(0)))return!1}return!0},t.exports.allowsVerticalWritingMode=function(e){for(var t=0,r=e;t<r.length;t+=1){var i=r[t];if(n.charHasUprightVerticalOrientation(i.charCodeAt(0)))return!0}return!1},t.exports.allowsLetterSpacing=function(e){for(var t=0,r=e;t<r.length;t+=1){var i=r[t];if(!n.charAllowsLetterSpacing(i.charCodeAt(0)))return!1}return!0},t.exports.charAllowsLetterSpacing=function(e){return!r.Arabic(e)&&!r["Arabic Supplement"](e)&&!r["Arabic Extended-A"](e)&&!r["Arabic Presentation Forms-A"](e)&&!r["Arabic Presentation Forms-B"](e)},t.exports.charAllowsIdeographicBreaking=function(e){return!(e<11904)&&(!!r["Bopomofo Extended"](e)||!!r.Bopomofo(e)||!!r["CJK Compatibility Forms"](e)||!!r["CJK Compatibility Ideographs"](e)||!!r["CJK Compatibility"](e)||!!r["CJK Radicals Supplement"](e)||!!r["CJK Strokes"](e)||!!r["CJK Symbols and Punctuation"](e)||!!r["CJK Unified Ideographs Extension A"](e)||!!r["CJK Unified Ideographs"](e)||!!r["Enclosed CJK Letters and Months"](e)||!!r["Halfwidth and Fullwidth Forms"](e)||!!r.Hiragana(e)||!!r["Ideographic Description Characters"](e)||!!r["Kangxi Radicals"](e)||!!r["Katakana Phonetic Extensions"](e)||!!r.Katakana(e)||!!r["Vertical Forms"](e)||!!r["Yi Radicals"](e)||!!r["Yi Syllables"](e))},n.charHasUprightVerticalOrientation=function(e){return 746===e||747===e||!(e<4352)&&(!!r["Bopomofo Extended"](e)||!!r.Bopomofo(e)||!(!r["CJK Compatibility Forms"](e)||e>=65097&&e<=65103)||!!r["CJK Compatibility Ideographs"](e)||!!r["CJK Compatibility"](e)||!!r["CJK Radicals Supplement"](e)||!!r["CJK Strokes"](e)||!(!r["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||!!r["CJK Unified Ideographs Extension A"](e)||!!r["CJK Unified Ideographs"](e)||!!r["Enclosed CJK Letters and Months"](e)||!!r["Hangul Compatibility Jamo"](e)||!!r["Hangul Jamo Extended-A"](e)||!!r["Hangul Jamo Extended-B"](e)||!!r["Hangul Jamo"](e)||!!r["Hangul Syllables"](e)||!!r.Hiragana(e)||!!r["Ideographic Description Characters"](e)||!!r.Kanbun(e)||!!r["Kangxi Radicals"](e)||!!r["Katakana Phonetic Extensions"](e)||!(!r.Katakana(e)||12540===e)||!(!r["Halfwidth and Fullwidth Forms"](e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!r["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||!!r["Unified Canadian Aboriginal Syllabics"](e)||!!r["Unified Canadian Aboriginal Syllabics Extended"](e)||!!r["Vertical Forms"](e)||!!r["Yijing Hexagram Symbols"](e)||!!r["Yi Syllables"](e)||!!r["Yi Radicals"](e))},n.charHasNeutralVerticalOrientation=function(e){return!(!r["Latin-1 Supplement"](e)||167!==e&&169!==e&&174!==e&&177!==e&&188!==e&&189!==e&&190!==e&&215!==e&&247!==e)||!(!r["General Punctuation"](e)||8214!==e&&8224!==e&&8225!==e&&8240!==e&&8241!==e&&8251!==e&&8252!==e&&8258!==e&&8263!==e&&8264!==e&&8265!==e&&8273!==e)||!!r["Letterlike Symbols"](e)||!!r["Number Forms"](e)||!(!r["Miscellaneous Technical"](e)||!(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215))||!(!r["Control Pictures"](e)||9251===e)||!!r["Optical Character Recognition"](e)||!!r["Enclosed Alphanumerics"](e)||!!r["Geometric Shapes"](e)||!(!r["Miscellaneous Symbols"](e)||e>=9754&&e<=9759)||!(!r["Miscellaneous Symbols and Arrows"](e)||!(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243))||!!r["CJK Symbols and Punctuation"](e)||!!r.Katakana(e)||!!r["Private Use Area"](e)||!!r["CJK Compatibility Forms"](e)||!!r["Small Form Variants"](e)||!!r["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e},n.charHasRotatedVerticalOrientation=function(e){return!(n.charHasUprightVerticalOrientation(e)||n.charHasNeutralVerticalOrientation(e))}},{"./is_char_in_unicode_block":265}],270:[function(e,t,n){"use strict";var r=e("../geo/lng_lat");t.exports=function(e,t,n){if(e=new r(e.lng,e.lat),t){var i=new r(e.lng-360,e.lat),o=new r(e.lng+360,e.lat),a=n.locationPoint(e).distSqr(t);n.locationPoint(i).distSqr(t)<a?e=i:n.locationPoint(o).distSqr(t)<a&&(e=o)}for(;Math.abs(e.lng-n.center.lng)>180;){var s=n.locationPoint(e);if(s.x>=0&&s.y>=0&&s.x<=n.width&&s.y<=n.height)break;e.lng>n.center.lng?e.lng-=360:e.lng+=360}return e}},{"../geo/lng_lat":62}],271:[function(e,t,n){"use strict";function r(e,t){void 0===t&&(t=1);var n=0,r=0;return{members:e.map(function(e){var a=i(e.type),s=n=o(n,Math.max(t,a)),u=e.components||1;return r=Math.max(r,a),n+=a*u,{name:e.name,type:e.type,components:u,offset:s}}),size:o(n,Math.max(r,t)),alignment:t}}function i(e){return a[e].BYTES_PER_ELEMENT}function o(e,t){return Math.ceil(e/t)*t}var a={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},s=function(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},u=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};u.serialize=function(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}},u.deserialize=function(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t},u.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},u.prototype.clear=function(){this.length=0},u.prototype.resize=function(e){this.reserve(e),this.length=e},u.prototype.reserve=function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}},u.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")},t.exports.StructArray=u,t.exports.Struct=s,t.exports.viewTypes=a,t.exports.createLayout=r},{}],272:[function(e,t,n){"use strict";t.exports=function(e,t){var n=!1,r=0,i=function(){r=0,n&&(e(),r=setTimeout(i,t),n=!1)};return function(){return n=!0,r||i(),r}}},{}],273:[function(e,t,n){"use strict";function r(e,t,n,r){function i(t,i,a){var l,c,f,p;if(a>=0&&a<=o)for(l=t;l<i;l++)c=Math.floor(l/o),f=(l%o+o)%o,0!==c&&!0!==r||(p=new u(n,c,e,f,a),s[p.key]=p)}void 0===r&&(r=!0);var o=1<<e,s={};return a(t[0],t[1],t[2],0,o,i),a(t[2],t[3],t[0],0,o,i),Object.keys(s).map(function(e){return s[e]})}function i(e,t){if(e.row>t.row){var n=e;e=t,t=n}return{x0:e.column,y0:e.row,x1:t.column,y1:t.row,dx:t.column-e.column,dy:t.row-e.row}}function o(e,t,n,r,i){var o=Math.max(n,Math.floor(t.y0)),a=Math.min(r,Math.ceil(t.y1));if(e.x0===t.x0&&e.y0===t.y0?e.x0+t.dy/e.dy*e.dx<t.x1:e.x1-t.dy/e.dy*e.dx<t.x0){var s=e;e=t,t=s}for(var u=e.dx/e.dy,l=t.dx/t.dy,c=e.dx>0,f=t.dx<0,p=o;p<a;p++){var h=u*Math.max(0,Math.min(e.dy,p+c-e.y0))+e.x0,d=l*Math.max(0,Math.min(t.dy,p+f-t.y0))+t.x0;i(Math.floor(d),Math.ceil(h),p)}}function a(e,t,n,r,a,s){var u,l=i(e,t),c=i(t,n),f=i(n,e);l.dy>c.dy&&(u=l,l=c,c=u),l.dy>f.dy&&(u=l,l=f,f=u),c.dy>f.dy&&(u=c,c=f,f=u),l.dy&&o(f,l,r,a,s),c.dy&&o(f,c,r,a,s)}var s=(e("../geo/coordinate"),e("../source/tile_id")),u=s.OverscaledTileID;t.exports=r},{"../geo/coordinate":61,"../source/tile_id":114}],274:[function(e,t,n){"use strict";function r(e,t){return t.replace(/{([^{}]+)}/g,function(t,n){return n in e?String(e[n]):""})}t.exports=r},{}],275:[function(e,t,n){"use strict";var r=e("@mapbox/unitbezier"),i=e("../geo/coordinate");e("@mapbox/point-geometry");n.easeCubicInOut=function(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)},n.bezier=function(e,t,n,i){var o=new r(e,t,n,i);return function(e){return o.solve(e)}},n.ease=n.bezier(.25,.1,.25,1),n.clamp=function(e,t,n){return Math.min(n,Math.max(t,e))},n.wrap=function(e,t,n){var r=n-t,i=((e-t)%r+r)%r+t;return i===t?n:i},n.asyncAll=function(e,t,n){if(!e.length)return n(null,[]);var r=e.length,i=new Array(e.length),o=null;e.forEach(function(e,a){t(e,function(e,t){e&&(o=e),i[a]=t,0==--r&&n(o,i)})})},n.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},n.keysDifference=function(e,t){var n=[];for(var r in e)r in t||n.push(r);return n},n.extend=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];for(var r=0,i=t;r<i.length;r+=1){var o=i[r];for(var a in o)e[a]=o[a]}return e},n.pick=function(e,t){for(var n={},r=0;r<t.length;r++){var i=t[r];i in e&&(n[i]=e[i])}return n};var o=1;n.uniqueId=function(){return o++},n.bindAll=function(e,t){e.forEach(function(e){t[e]&&(t[e]=t[e].bind(t))})},n.getCoordinatesCenter=function(e){for(var t=1/0,n=1/0,r=-1/0,o=-1/0,a=0;a<e.length;a++)t=Math.min(t,e[a].column),n=Math.min(n,e[a].row),r=Math.max(r,e[a].column),o=Math.max(o,e[a].row);var s=r-t,u=o-n,l=Math.max(s,u),c=Math.max(0,Math.floor(-Math.log(l)/Math.LN2));return new i((t+r)/2,(n+o)/2,0).zoomTo(c)},n.endsWith=function(e,t){return-1!==e.indexOf(t,e.length-t.length)},n.mapObject=function(e,t,n){var r=this,i={};for(var o in e)i[o]=t.call(n||r,e[o],o,e);return i},n.filterObject=function(e,t,n){var r=this,i={};for(var o in e)t.call(n||r,e[o],o,e)&&(i[o]=e[o]);return i},n.deepEqual=e("../style-spec/util/deep_equal"),n.clone=function(e){return Array.isArray(e)?e.map(n.clone):"object"==typeof e&&e?n.mapObject(e,n.clone):e},n.arraysIntersect=function(e,t){for(var n=0;n<e.length;n++)if(t.indexOf(e[n])>=0)return!0;return!1};var a={};n.warnOnce=function(e){a[e]||("undefined"!=typeof console&&console.warn(e),a[e]=!0)},n.isCounterClockwise=function(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)},n.calculateSignedArea=function(e){for(var t=0,n=0,r=e.length,i=r-1,o=void 0,a=void 0;n<r;i=n++)o=e[n],a=e[i],t+=(a.x-o.x)*(o.y+a.y);return t},n.isClosedPolygon=function(e){if(e.length<4)return!1;var t=e[0],r=e[e.length-1];return!(Math.abs(t.x-r.x)>0||Math.abs(t.y-r.y)>0)&&Math.abs(n.calculateSignedArea(e))>.01},n.sphericalToCartesian=function(e){var t=e[0],n=e[1],r=e[2];return n+=90,n*=Math.PI/180,r*=Math.PI/180,{x:t*Math.cos(n)*Math.sin(r),y:t*Math.sin(n)*Math.sin(r),z:t*Math.cos(r)}},n.parseCacheControl=function(e){var t=/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,n={};if(e.replace(t,function(e,t,r,i){var o=r||i;return n[t]=!o||o.toLowerCase(),""}),n["max-age"]){var r=parseInt(n["max-age"],10);isNaN(r)?delete n["max-age"]:n["max-age"]=r}return n}},{"../geo/coordinate":61,"../style-spec/util/deep_equal":155,"@mapbox/point-geometry":4,"@mapbox/unitbezier":7}],276:[function(e,t,n){"use strict";var r=function(e,t,n,r){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=n,e._y=r,this.properties=e.properties,null!=e.id&&(this.id=e.id)},i={geometry:{}};i.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},i.geometry.set=function(e){this._geometry=e},r.prototype.toJSON=function(){var e=this,t={geometry:this.geometry};for(var n in e)"_geometry"!==n&&"_vectorTileFeature"!==n&&(t[n]=e[n]);return t},Object.defineProperties(r.prototype,i),t.exports=r},{}],277:[function(e,t,n){"use strict";var r=e("./script_detection");t.exports=function(e){for(var n="",i=0;i<e.length;i++){var o=e.charCodeAt(i+1)||null,a=e.charCodeAt(i-1)||null;o&&r.charHasRotatedVerticalOrientation(o)&&!t.exports.lookup[e[i+1]]||a&&r.charHasRotatedVerticalOrientation(a)&&!t.exports.lookup[e[i-1]]||!t.exports.lookup[e[i]]?n+=e[i]:n+=t.exports.lookup[e[i]]}return n},t.exports.lookup={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"}},{"./script_detection":269}],278:[function(e,t,n){"use strict";function r(e,t,n){void 0===n&&(n={}),Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),_[e]={klass:t,omit:n.omit||[],shallow:n.shallow||[]}}function i(e,t){if(null===e||void 0===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(e instanceof ArrayBuffer)return t&&t.push(e),e;if(ArrayBuffer.isView(e)){var n=e;return t&&t.push(n.buffer),n}if(e instanceof g)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){for(var r=[],o=0,a=e;o<a.length;o+=1){var s=a[o];r.push(i(s,t))}return r}if("object"==typeof e){var u=e.constructor,l=u._classRegistryKey;if(!l)throw new Error("can't serialize object of unregistered class");var c={};if(u.serialize)c._serialized=u.serialize(e,t);else for(var f in e)if(e.hasOwnProperty(f)&&!(_[l].omit.indexOf(f)>=0)){var p=e[f];c[f]=_[l].shallow.indexOf(f)>=0?p:i(p,t)}return{name:l,properties:c}}throw new Error("can't serialize object of type "+typeof e)}function o(e){if(null===e||void 0===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||e instanceof ArrayBuffer||ArrayBuffer.isView(e)||e instanceof g)return e;if(Array.isArray(e))return e.map(function(e){return o(e)});if("object"==typeof e){var t=e,n=t.name,r=t.properties;if(!n)throw new Error("can't deserialize object of anonymous class");var i=_[n],a=i.klass;if(!a)throw new Error("can't deserialize unregistered class "+n);if(a.deserialize)return a.deserialize(r._serialized);for(var s=Object.create(a.prototype),u=0,l=Object.keys(r);u<l.length;u+=1){var c=l[u];s[c]=_[n].shallow.indexOf(c)>=0?r[c]:o(r[c])}return s}throw new Error("can't deserialize object of type "+typeof e)}var a=e("grid-index"),s=e("../style-spec/util/color"),u=e("../style-spec/expression"),l=u.StylePropertyFunction,c=u.StyleExpression,f=u.StyleExpressionWithErrorHandling,p=u.ZoomDependentExpression,h=u.ZoomConstantExpression,d=e("../style-spec/expression/compound_expression"),v=d.CompoundExpression,m=e("../style-spec/expression/definitions"),y=e("./window"),g=y.ImageData,_={};r("Object",Object),a.serialize=function(e,t){var n=e.toArrayBuffer();return t&&t.push(n),n},a.deserialize=function(e){return new a(e)},r("Grid",a),r("Color",s),r("StylePropertyFunction",l),r("StyleExpression",c,{omit:["_evaluator"]}),r("StyleExpressionWithErrorHandling",f,{omit:["_evaluator"]}),r("ZoomDependentExpression",p),r("ZoomConstantExpression",h),r("CompoundExpression",v,{omit:["_evaluate"]});for(var b in m)m[b]._classRegistryKey||r("Expression_"+b,m[b]);t.exports={register:r,serialize:i,deserialize:o}},{"../style-spec/expression":139,"../style-spec/expression/compound_expression":123,"../style-spec/expression/definitions":131,"../style-spec/util/color":153,"./window":254,"grid-index":24}],279:[function(e,t,n){"use strict";var r=e("./web_worker"),i=function(){this.active={}};i.prototype.acquire=function(t){var n=this;if(!this.workers){var i=e("../").workerCount;for(this.workers=[];this.workers.length<i;)n.workers.push(new r)}return this.active[t]=!0,this.workers.slice()},i.prototype.release=function(e){delete this.active[e],0===Object.keys(this.active).length&&(this.workers.forEach(function(e){e.terminate()}),this.workers=null)},t.exports=i},{"../":73,"./web_worker":253}]},{},[73])(73)})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),u=n(107),l=n(21),c=n(176),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=["longitude","latitude","zoom","bearing","pitch"],h=["latitude","longitude","zoom","width","height"],d=["bearing","pitch"];!function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.propNames=p,e}o(t,e),f(t,[{key:"initializeProps",value:function(e,t){var n={},r={},i=!0,o=!1,a=void 0;try{for(var u,l=h[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var f=u.value,p=e[f],v=t[f];s()(Object(c.b)(p)&&Object(c.b)(v),f+" must be supplied for transition"),n[f]=p,r[f]=Object(c.a)(f,p,v)}}catch(e){o=!0,a=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw a}}var m=!0,y=!1,g=void 0;try{for(var _,b=d[Symbol.iterator]();!(m=(_=b.next()).done);m=!0){var x=_.value,w=e[x]||0,E=t[x]||0;n[x]=w,r[x]=Object(c.a)(x,w,E)}}catch(e){y=!0,g=e}finally{try{!m&&b.return&&b.return()}finally{if(y)throw g}}return{start:n,end:r}}},{key:"interpolateProps",value:function(e,t,n){var r=Object(l.c)(e,t,n),i=!0,o=!1,a=void 0;try{for(var s,u=d[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var f=s.value;r[f]=Object(c.c)(e[f],t[f],n)}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}return r}}])}(u.a)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),u=n(107),l=n(176),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=["longitude","latitude","zoom","bearing","pitch"],p=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f;r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.propNames=e,n}return o(t,e),c(t,[{key:"initializeProps",value:function(e,t){var n={},r={},i=!0,o=!1,a=void 0;try{for(var u,c=this.propNames[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var f=u.value,p=e[f],h=t[f];s()(Object(l.b)(p)&&Object(l.b)(h),f+" must be supplied for transition"),n[f]=p,r[f]=Object(l.a)(f,p,h)}}catch(e){o=!0,a=e}finally{try{!i&&c.return&&c.return()}finally{if(o)throw a}}return{start:n,end:r}}},{key:"interpolateProps",value:function(e,t,n){var r={},i=!0,o=!1,a=void 0;try{for(var s,u=this.propNames[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;r[c]=Object(l.c)(e[c],t[c],n)}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}return r}}]),t}(u.a);t.a=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){e.preventDefault()}var o=n(177),a=n(384),s=n(385),u=n(386),l=n(75),c=n(387),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e),this.options=n,this.eventHandlers=[],this._onBasicInput=this._onBasicInput.bind(this),this._onOtherEvent=this._onOtherEvent.bind(this),this.setElement(t);var i=n.events;i&&this.on(i)}return f(e,[{key:"setElement",value:function(e){var t=this;if(this.element&&this.destroy(),this.element=e,e){var n=this.options,r=n.Manager||o.a;this.manager=new r(e,{recognizers:n.recognizers||l.e}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(l.f).forEach(function(e){var n=t.manager.get(e);n&&l.f[e].forEach(function(e){n.recognizeWith(e)})}),this.wheelInput=new a.a(e,this._onOtherEvent,{enable:!1}),this.moveInput=new s.a(e,this._onOtherEvent,{enable:!1}),this.keyInput=new u.a(e,this._onOtherEvent,{enable:!1}),n.rightButton&&e.addEventListener("contextmenu",i),this.eventHandlers.forEach(function(e){var n=e.recognizerName,r=e.eventAlias,i=e.wrappedHandler;t._toggleRecognizer(n,!0),t.manager.on(r,i)})}}},{key:"destroy",value:function(){this.element&&(this.element.removeEventListener("contextmenu",i),this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.manager=null,this.element=null)}},{key:"on",value:function(e,t,n){if("string"===typeof e)this._addEventHandler(e,t,n);else{n=t;for(var r in e)this._addEventHandler(r,e[r],n)}}},{key:"off",value:function(e,t){if("string"===typeof e)this._removeEventHandler(e,t);else for(var n in e)this._removeEventHandler(n,e[n])}},{key:"_toggleRecognizer",value:function(e,t){var n=this.manager;if(n){var r=n.get(e);if(r){r.set({enable:t});var i=l.g[e];i&&!this.options.recognizers&&i.forEach(function(r){var i=n.get(r);t?i.requireFailure(e):i.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,t),this.moveInput.enableEventType(e,t),this.keyInput.enableEventType(e,t)}}},{key:"_addEventHandler",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this.manager,i=this.eventHandlers,o=this._wrapEventHandler(e,t,n),a=l.c[e]||e,s=l.b[a]||a;this._toggleRecognizer(s,!0);var u=i.filter(function(e){return e.eventAlias===a&&e.srcElement!==n&&(!e.srcElement||e.srcElement.contains(n))});i.push({event:e,eventAlias:a,recognizerName:s,srcElement:n,handler:t,wrappedHandler:o}),u.forEach(function(e){return r.off(a,e.wrappedHandler)}),r&&r.on(a,o),u.forEach(function(e){return r.on(a,e.wrappedHandler)})}},{key:"_removeEventHandler",value:function(e,t){for(var n=this.manager,r=this.eventHandlers,i=!1,o=r.length;o--;){var a=r[o];a.event===e&&a.handler===t&&(n&&n.off(a.eventAlias,a.wrappedHandler),r.splice(o,1),i=!0)}if(i){var s=l.c[e]||e,u=l.b[s]||s;r.find(function(e){return e.recognizerName===u})||this._toggleRecognizer(u,!1)}}},{key:"_wrapEventHandler",value:function(e,t,n){var r=this;return function(i){var o=i.mjolnirEvent;(o||(o=r._normalizeEvent(i),i.mjolnirEvent=o),o.handled&&o.handled!==n)||(!n||n.contains(i.srcEvent.target))&&t(Object.assign({},o,{type:e,stopPropagation:function(){o.handled||(o.handled=n)}}))}}},{key:"_normalizeEvent",value:function(e){var t=this.element;return Object.assign({},e,Object(c.b)(e),Object(c.a)(e,t),{handled:!1,rootElement:t})}},{key:"_onBasicInput",value:function(e){var t=e.srcEvent,n=l.a[t.type];n&&this.manager.emit(n,e)}},{key:"_onOtherEvent",value:function(e){this.manager.emit(e.type,e)}}]),e}();t.a=p},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return!0;return!1}function i(e){var t=e.prototype.handler;e.prototype.handler=function(e){var n=this.store;e.button>0&&(r(n,function(t){return t.pointerId===e.pointerId})||n.push(e)),t.call(this,e)}}function o(e){e.prototype.handler=function(e){var t=l[e.type];t&a&&e.button>=0&&(this.pressed=!0),t&s&&0===e.which&&(t=u),this.pressed&&(t&u&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}}t.b=i,t.a=o;var a=1,s=2,u=4,l={mousedown:a,mousemove:s,mouseup:u}},function(e,t,n){var r;!function(i,o,a,s){"use strict";function u(e,t,n){return setTimeout(h(e,n),t)}function l(e,t,n){return!!Array.isArray(e)&&(c(e,n[t],n),!0)}function c(e,t,n){var r;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==s)for(r=0;r<e.length;)t.call(n,e[r],r,e),r++;else for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}function f(e,t,n){var r="DEPRECATED METHOD: "+t+"\n"+n+" AT \n";return function(){var t=new Error("get-stack-trace"),n=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=i.console&&(i.console.warn||i.console.log);return o&&o.call(i.console,r,n),e.apply(this,arguments)}}function p(e,t,n){var r,i=t.prototype;r=e.prototype=Object.create(i),r.constructor=e,r._super=i,n&&de(r,n)}function h(e,t){return function(){return e.apply(t,arguments)}}function d(e,t){return typeof e==ye?e.apply(t?t[0]||s:s,t):e}function v(e,t){return e===s?t:e}function m(e,t,n){c(b(t),function(t){e.addEventListener(t,n,!1)})}function y(e,t,n){c(b(t),function(t){e.removeEventListener(t,n,!1)})}function g(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function _(e,t){return e.indexOf(t)>-1}function b(e){return e.trim().split(/\s+/g)}function x(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var r=0;r<e.length;){if(n&&e[r][n]==t||!n&&e[r]===t)return r;r++}return-1}function w(e){return Array.prototype.slice.call(e,0)}function E(e,t,n){for(var r=[],i=[],o=0;o<e.length;){var a=t?e[o][t]:e[o];x(i,a)<0&&r.push(e[o]),i[o]=a,o++}return n&&(r=t?r.sort(function(e,n){return e[t]>n[t]}):r.sort()),r}function S(e,t){for(var n,r,i=t[0].toUpperCase()+t.slice(1),o=0;o<ve.length;){if(n=ve[o],(r=n?n+i:t)in e)return r;o++}return s}function T(){return Ee++}function A(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||i}function O(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){d(e.options.enable,[e])&&n.handler(t)},this.init()}function P(e){var t=e.options.inputClass;return new(t||(Ae?V:Oe?H:Te?q:U))(e,C)}function C(e,t,n){var r=n.pointers.length,i=n.changedPointers.length,o=t&Ce&&r-i===0,a=t&(Re|Me)&&r-i===0;n.isFirst=!!o,n.isFinal=!!a,o&&(e.session={}),n.eventType=t,k(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function k(e,t){var n=e.session,r=t.pointers,i=r.length;n.firstInput||(n.firstInput=I(t)),i>1&&!n.firstMultiple?n.firstMultiple=I(t):1===i&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,s=a?a.center:o.center,u=t.center=L(r);t.timeStamp=be(),t.deltaTime=t.timeStamp-o.timeStamp,t.angle=j(s,u),t.distance=F(s,u),R(n,t),t.offsetDirection=N(t.deltaX,t.deltaY);var l=D(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=l.x,t.overallVelocityY=l.y,t.overallVelocity=_e(l.x)>_e(l.y)?l.x:l.y,t.scale=a?z(a.pointers,r):1,t.rotation=a?B(a.pointers,r):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,M(n,t);var c=e.element;g(t.srcEvent.target,c)&&(c=t.srcEvent.target),t.target=c}function R(e,t){var n=t.center,r=e.offsetDelta||{},i=e.prevDelta||{},o=e.prevInput||{};t.eventType!==Ce&&o.eventType!==Re||(i=e.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=i.x+(n.x-r.x),t.deltaY=i.y+(n.y-r.y)}function M(e,t){var n,r,i,o,a=e.lastInterval||t,u=t.timeStamp-a.timeStamp;if(t.eventType!=Me&&(u>Pe||a.velocity===s)){var l=t.deltaX-a.deltaX,c=t.deltaY-a.deltaY,f=D(u,l,c);r=f.x,i=f.y,n=_e(f.x)>_e(f.y)?f.x:f.y,o=N(l,c),e.lastInterval=t}else n=a.velocity,r=a.velocityX,i=a.velocityY,o=a.direction;t.velocity=n,t.velocityX=r,t.velocityY=i,t.direction=o}function I(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:ge(e.pointers[n].clientX),clientY:ge(e.pointers[n].clientY)},n++;return{timeStamp:be(),pointers:t,center:L(t),deltaX:e.deltaX,deltaY:e.deltaY}}function L(e){var t=e.length;if(1===t)return{x:ge(e[0].clientX),y:ge(e[0].clientY)};for(var n=0,r=0,i=0;i<t;)n+=e[i].clientX,r+=e[i].clientY,i++;return{x:ge(n/t),y:ge(r/t)}}function D(e,t,n){return{x:t/e||0,y:n/e||0}}function N(e,t){return e===t?Ie:_e(e)>=_e(t)?e<0?Le:De:t<0?Ne:Fe}function F(e,t,n){n||(n=Ue);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return Math.sqrt(r*r+i*i)}function j(e,t,n){n||(n=Ue);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return 180*Math.atan2(i,r)/Math.PI}function B(e,t){return j(t[1],t[0],Ve)+j(e[1],e[0],Ve)}function z(e,t){return F(t[0],t[1],Ve)/F(e[0],e[1],Ve)}function U(){this.evEl=We,this.evWin=He,this.pressed=!1,O.apply(this,arguments)}function V(){this.evEl=Ye,this.evWin=Ze,O.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function G(){this.evTarget=Qe,this.evWin=Je,this.started=!1,O.apply(this,arguments)}function W(e,t){var n=w(e.touches),r=w(e.changedTouches);return t&(Re|Me)&&(n=E(n.concat(r),"identifier",!0)),[n,r]}function H(){this.evTarget=et,this.targetIds={},O.apply(this,arguments)}function X(e,t){var n=w(e.touches),r=this.targetIds;if(t&(Ce|ke)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,a=w(e.changedTouches),s=[],u=this.target;if(o=n.filter(function(e){return g(e.target,u)}),t===Ce)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<a.length;)r[a[i].identifier]&&s.push(a[i]),t&(Re|Me)&&delete r[a[i].identifier],i++;return s.length?[E(o.concat(s),"identifier",!0),s]:void 0}function q(){O.apply(this,arguments);var e=h(this.handler,this);this.touch=new H(this.manager,e),this.mouse=new U(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function Y(e,t){e&Ce?(this.primaryTouch=t.changedPointers[0].identifier,Z.call(this,t)):e&(Re|Me)&&Z.call(this,t)}function Z(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var r=this.lastTouches,i=function(){var e=r.indexOf(n);e>-1&&r.splice(e,1)};setTimeout(i,tt)}}function K(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(t-i.x),a=Math.abs(n-i.y);if(o<=nt&&a<=nt)return!0}return!1}function Q(e,t){this.manager=e,this.set(t)}function J(e){if(_(e,st))return st;var t=_(e,ut),n=_(e,lt);return t&&n?st:t||n?t?ut:lt:_(e,at)?at:ot}function $(e){this.options=de({},this.defaults,e||{}),this.id=T(),this.manager=null,this.options.enable=v(this.options.enable,!0),this.state=ft,this.simultaneous={},this.requireFail=[]}function ee(e){return e&mt?"cancel":e&dt?"end":e&ht?"move":e&pt?"start":""}function te(e){return e==Fe?"down":e==Ne?"up":e==Le?"left":e==De?"right":""}function ne(e,t){var n=t.manager;return n?n.get(e):e}function re(){$.apply(this,arguments)}function ie(){re.apply(this,arguments),this.pX=null,this.pY=null}function oe(){re.apply(this,arguments)}function ae(){$.apply(this,arguments),this._timer=null,this._input=null}function se(){re.apply(this,arguments)}function ue(){re.apply(this,arguments)}function le(){$.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ce(e,t){return t=t||{},t.recognizers=v(t.recognizers,ce.defaults.preset),new fe(e,t)}function fe(e,t){this.options=de({},ce.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=P(this),this.touchAction=new Q(this,this.options.touchAction),pe(this,!0),c(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function pe(e,t){var n=e.element;if(n.style){var r;c(e.options.cssProps,function(i,o){r=S(n.style,o),t?(e.oldCssProps[r]=n.style[r],n.style[r]=i):n.style[r]=e.oldCssProps[r]||""}),t||(e.oldCssProps={})}}function he(e,t){var n=o.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t,t.target.dispatchEvent(n)}var de,ve=["","webkit","Moz","MS","ms","o"],me=o.createElement("div"),ye="function",ge=Math.round,_e=Math.abs,be=Date.now;de="function"!==typeof Object.assign?function(e){if(e===s||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==s&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])}return t}:Object.assign;var xe=f(function(e,t,n){for(var r=Object.keys(t),i=0;i<r.length;)(!n||n&&e[r[i]]===s)&&(e[r[i]]=t[r[i]]),i++;return e},"extend","Use `assign`."),we=f(function(e,t){return xe(e,t,!0)},"merge","Use `assign`."),Ee=1,Se=/mobile|tablet|ip(ad|hone|od)|android/i,Te="ontouchstart"in i,Ae=S(i,"PointerEvent")!==s,Oe=Te&&Se.test(navigator.userAgent),Pe=25,Ce=1,ke=2,Re=4,Me=8,Ie=1,Le=2,De=4,Ne=8,Fe=16,je=Le|De,Be=Ne|Fe,ze=je|Be,Ue=["x","y"],Ve=["clientX","clientY"];O.prototype={handler:function(){},init:function(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(A(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&y(this.element,this.evEl,this.domHandler),this.evTarget&&y(this.target,this.evTarget,this.domHandler),this.evWin&&y(A(this.element),this.evWin,this.domHandler)}};var Ge={mousedown:Ce,mousemove:ke,mouseup:Re},We="mousedown",He="mousemove mouseup";p(U,O,{handler:function(e){var t=Ge[e.type];t&Ce&&0===e.button&&(this.pressed=!0),t&ke&&1!==e.which&&(t=Re),this.pressed&&(t&Re&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}});var Xe={pointerdown:Ce,pointermove:ke,pointerup:Re,pointercancel:Me,pointerout:Me},qe={2:"touch",3:"pen",4:"mouse",5:"kinect"},Ye="pointerdown",Ze="pointermove pointerup pointercancel";i.MSPointerEvent&&!i.PointerEvent&&(Ye="MSPointerDown",Ze="MSPointerMove MSPointerUp MSPointerCancel"),p(V,O,{handler:function(e){var t=this.store,n=!1,r=e.type.toLowerCase().replace("ms",""),i=Xe[r],o=qe[e.pointerType]||e.pointerType,a="touch"==o,s=x(t,e.pointerId,"pointerId");i&Ce&&(0===e.button||a)?s<0&&(t.push(e),s=t.length-1):i&(Re|Me)&&(n=!0),s<0||(t[s]=e,this.callback(this.manager,i,{pointers:t,changedPointers:[e],pointerType:o,srcEvent:e}),n&&t.splice(s,1))}});var Ke={touchstart:Ce,touchmove:ke,touchend:Re,touchcancel:Me},Qe="touchstart",Je="touchstart touchmove touchend touchcancel";p(G,O,{handler:function(e){var t=Ke[e.type];if(t===Ce&&(this.started=!0),this.started){var n=W.call(this,e,t);t&(Re|Me)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:e})}}});var $e={touchstart:Ce,touchmove:ke,touchend:Re,touchcancel:Me},et="touchstart touchmove touchend touchcancel";p(H,O,{handler:function(e){var t=$e[e.type],n=X.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:e})}});var tt=2500,nt=25;p(q,O,{handler:function(e,t,n){var r="touch"==n.pointerType,i="mouse"==n.pointerType;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)Y.call(this,t,n);else if(i&&K.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var rt=S(me.style,"touchAction"),it=rt!==s,ot="auto",at="manipulation",st="none",ut="pan-x",lt="pan-y",ct=function(){if(!it)return!1;var e={},t=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){e[n]=!t||i.CSS.supports("touch-action",n)}),e}();Q.prototype={set:function(e){"compute"==e&&(e=this.compute()),it&&this.manager.element.style&&ct[e]&&(this.manager.element.style[rt]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return c(this.manager.recognizers,function(t){d(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),J(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)return void t.preventDefault();var r=this.actions,i=_(r,st)&&!ct[st],o=_(r,lt)&&!ct[lt],a=_(r,ut)&&!ct[ut];if(i){var s=1===e.pointers.length,u=e.distance<2,l=e.deltaTime<250;if(s&&u&&l)return}return a&&o?void 0:i||o&&n&je||a&&n&Be?this.preventSrc(t):void 0},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var ft=1,pt=2,ht=4,dt=8,vt=dt,mt=16;$.prototype={defaults:{},set:function(e){return de(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(l(e,"recognizeWith",this))return this;var t=this.simultaneous;return e=ne(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return l(e,"dropRecognizeWith",this)?this:(e=ne(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(l(e,"requireFailure",this))return this;var t=this.requireFail;return e=ne(e,this),-1===x(t,e)&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(l(e,"dropRequireFailure",this))return this;e=ne(e,this);var t=x(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){function t(t){n.manager.emit(t,e)}var n=this,r=this.state;r<dt&&t(n.options.event+ee(r)),t(n.options.event),e.additionalEvent&&t(e.additionalEvent),r>=dt&&t(n.options.event+ee(r))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=32},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(32|ft)))return!1;e++}return!0},recognize:function(e){var t=de({},e);if(!d(this.options.enable,[this,t]))return this.reset(),void(this.state=32);this.state&(vt|mt|32)&&(this.state=ft),this.state=this.process(t),this.state&(pt|ht|dt|mt)&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},p(re,$,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,r=t&(pt|ht),i=this.attrTest(e);return r&&(n&Me||!i)?t|mt:r||i?n&Re?t|dt:t&pt?t|ht:pt:32}}),p(ie,re,{defaults:{event:"pan",threshold:10,pointers:1,direction:ze},getTouchAction:function(){var e=this.options.direction,t=[];return e&je&&t.push(lt),e&Be&&t.push(ut),t},directionTest:function(e){var t=this.options,n=!0,r=e.distance,i=e.direction,o=e.deltaX,a=e.deltaY;return i&t.direction||(t.direction&je?(i=0===o?Ie:o<0?Le:De,n=o!=this.pX,r=Math.abs(e.deltaX)):(i=0===a?Ie:a<0?Ne:Fe,n=a!=this.pY,r=Math.abs(e.deltaY))),e.direction=i,n&&r>t.threshold&&i&t.direction},attrTest:function(e){return re.prototype.attrTest.call(this,e)&&(this.state&pt||!(this.state&pt)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=te(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),p(oe,re,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[st]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&pt)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),p(ae,$,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ot]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime>t.time;if(this._input=e,!r||!n||e.eventType&(Re|Me)&&!i)this.reset();else if(e.eventType&Ce)this.reset(),this._timer=u(function(){this.state=vt,this.tryEmit()},t.time,this);else if(e.eventType&Re)return vt;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===vt&&(e&&e.eventType&Re?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=be(),this.manager.emit(this.options.event,this._input)))}}),p(se,re,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[st]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&pt)}}),p(ue,re,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:je|Be,pointers:1},getTouchAction:function(){return ie.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&(je|Be)?t=e.overallVelocity:n&je?t=e.overallVelocityX:n&Be&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&_e(t)>this.options.velocity&&e.eventType&Re},emit:function(e){var t=te(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),p(le,$,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[at]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime<t.time;if(this.reset(),e.eventType&Ce&&0===this.count)return this.failTimeout();if(r&&i&&n){if(e.eventType!=Re)return this.failTimeout();var o=!this.pTime||e.timeStamp-this.pTime<t.interval,a=!this.pCenter||F(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,a&&o?this.count+=1:this.count=1,this._input=e;if(0===this.count%t.taps)return this.hasRequireFailures()?(this._timer=u(function(){this.state=vt,this.tryEmit()},t.interval,this),pt):vt}return 32},failTimeout:function(){return this._timer=u(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==vt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ce.VERSION="2.0.7",ce.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[se,{enable:!1}],[oe,{enable:!1},["rotate"]],[ue,{direction:je}],[ie,{direction:je},["swipe"]],[le],[le,{event:"doubletap",taps:2},["tap"]],[ae]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};fe.prototype={set:function(e){return de(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var n,r=this.recognizers,i=t.curRecognizer;(!i||i&&i.state&vt)&&(i=t.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===t.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(e),!i&&n.state&(pt|ht|dt)&&(i=t.curRecognizer=n),o++}},get:function(e){if(e instanceof $)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(l(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(l(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=x(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==s&&t!==s){var n=this.handlers;return c(b(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this}},off:function(e,t){if(e!==s){var n=this.handlers;return c(b(e),function(e){t?n[e]&&n[e].splice(x(n[e],t),1):delete n[e]}),this}},emit:function(e,t){this.options.domEvents&&he(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](t),r++}},destroy:function(){this.element&&pe(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},de(ce,{INPUT_START:Ce,INPUT_MOVE:ke,INPUT_END:Re,INPUT_CANCEL:Me,STATE_POSSIBLE:ft,STATE_BEGAN:pt,STATE_CHANGED:ht,STATE_ENDED:dt,STATE_RECOGNIZED:vt,STATE_CANCELLED:mt,STATE_FAILED:32,DIRECTION_NONE:Ie,DIRECTION_LEFT:Le,DIRECTION_RIGHT:De,DIRECTION_UP:Ne,DIRECTION_DOWN:Fe,DIRECTION_HORIZONTAL:je,DIRECTION_VERTICAL:Be,DIRECTION_ALL:ze,Manager:fe,Input:O,TouchAction:Q,TouchInput:H,MouseInput:U,PointerEventInput:V,TouchMouseInput:q,SingleTouchInput:G,Recognizer:$,AttrRecognizer:re,Tap:le,Pan:ie,Swipe:ue,Pinch:oe,Rotate:se,Press:ae,on:m,off:y,each:c,merge:we,extend:xe,assign:de,inherit:p,bindFn:h,prefixed:S}),("undefined"!==typeof i?i:"undefined"!==typeof self?self:{}).Hammer=ce,(r=function(){return ce}.call(t,n,t,e))!==s&&(e.exports=r)}(window,document)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(75),o=n(178),a=(n.n(o),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),s=-1!==o.userAgent.indexOf("firefox"),u=i.d.WHEEL_EVENTS,l=function(){function e(t,n){var i=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r(this,e),this.element=t,this.callback=n,this.options=Object.assign({enable:!0},o),this.time=0,this.wheelPosition=null,this.type=null,this.timeout=null,this.lastValue=0,this.events=u.concat(o.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(function(e){return t.addEventListener(e,i.handleEvent)})}return a(e,[{key:"destroy",value:function(){var e=this;this.events.forEach(function(t){return e.element.removeEventListener(t,e.handleEvent)})}},{key:"enableEventType",value:function(e,t){"wheel"===e&&(this.options.enable=t)}},{key:"handleEvent",value:function(e){if(this.options.enable){e.preventDefault();var t=e.deltaY;o.window.WheelEvent&&(s&&e.deltaMode===o.window.WheelEvent.DOM_DELTA_PIXEL&&(t/=o.window.devicePixelRatio),e.deltaMode===o.window.WheelEvent.DOM_DELTA_LINE&&(t*=40));var n=this.type,r=this.timeout,i=this.lastValue,a=this.time,u=(o.window&&o.window.performance||Date).now(),l=u-(a||0);this.wheelPosition={x:e.clientX,y:e.clientY},a=u,0!==t&&t%4.000244140625===0?(n="wheel",t=Math.floor(t/4.000244140625)):0!==t&&Math.abs(t)<4?n="trackpad":l>400?(n=null,i=t,r=o.window.setTimeout(function(){this._onWheel(e,-i,this.wheelPosition),n="wheel"}.bind(this),40)):n||(n=Math.abs(l*t)<200?"trackpad":"wheel",r&&(o.window.clearTimeout(r),r=null,t+=i)),e.shiftKey&&t&&(t*=.25),n&&this._onWheel(e,-t,this.wheelPosition)}}},{key:"_onWheel",value:function(e,t,n){this.callback({type:"wheel",center:n,delta:t,srcEvent:e,pointerType:"mouse",target:e.target})}}]),e}();t.a=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(75),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=i.d.MOUSE_EVENTS,s=function(){function e(t,n){var i=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r(this,e),this.element=t,this.callback=n,this.pressed=!1,this.options=Object.assign({enable:!0},o),this.enableMoveEvent=this.options.enable,this.enableLeaveEvent=this.options.enable,this.events=a.concat(o.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(function(e){return t.addEventListener(e,i.handleEvent)})}return o(e,[{key:"destroy",value:function(){var e=this;this.events.forEach(function(t){return e.element.removeEventListener(t,e.handleEvent)})}},{key:"enableEventType",value:function(e,t){"pointermove"===e&&(this.enableMoveEvent=t),"pointerleave"===e&&(this.enableLeaveEvent=t)}},{key:"handleEvent",value:function(e){if(this.enableLeaveEvent&&"mouseleave"===e.type&&this.callback({type:"pointerleave",srcEvent:e,pointerType:"mouse",target:e.target}),this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":0===e.which&&(this.pressed=!1),this.pressed||this.callback({type:"pointermove",srcEvent:e,pointerType:"mouse",target:e.target});break;case"mouseup":this.pressed=!1}}}]),e}();t.a=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(75),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=i.d.KEY_EVENTS,s=function(){function e(t,n){var i=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r(this,e),this.element=t,this.callback=n,this.options=Object.assign({enable:!0},o),this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=a.concat(o.events||[]),this.handleEvent=this.handleEvent.bind(this),t.tabIndex=1,t.style.outline="none",this.events.forEach(function(e){return t.addEventListener(e,i.handleEvent)})}return o(e,[{key:"destroy",value:function(){var e=this;this.events.forEach(function(t){return e.element.removeEventListener(t,e.handleEvent)})}},{key:"enableEventType",value:function(e,t){"keydown"===e&&(this.enableDownEvent=t),"keyup"===e&&(this.enableUpEvent=t)}},{key:"handleEvent",value:function(e){var t=e.target||e.srcElement;"INPUT"===t.tagName&&"text"===t.type||"TEXTAREA"===t.tagName||(this.enableDownEvent&&"keydown"===e.type&&this.callback({type:"keydown",srcEvent:e,key:e.key,target:e.target}),this.enableUpEvent&&"keyup"===e.type&&this.callback({type:"keyup",srcEvent:e,key:e.key,target:e.target}))}}]),e}();t.a=s},function(e,t,n){"use strict";function r(e){var t=u[e.srcEvent.type];if(!t)return null;var n=e.srcEvent,r=n.buttons,i=n.button,g=n.which,_=!1,b=!1,x=!1;return t===s||t===a&&!Number.isFinite(r)?(_=g===l,b=g===c,x=g===f):t===a?(_=Boolean(r&v),b=Boolean(r&y),x=Boolean(r&m)):t===o&&(_=i===p,b=i===h,x=i===d),{leftButton:_,middleButton:b,rightButton:x}}function i(e,t){var n=e.srcEvent;if(!e.center&&!Number.isFinite(n.clientX))return null;var r=e.center||{x:n.clientX,y:n.clientY},i=t.getBoundingClientRect(),o=i.width/t.offsetWidth,a=i.height/t.offsetHeight;return{center:r,offsetCenter:{x:(r.x-i.left-t.clientLeft)/o,y:(r.y-i.top-t.clientTop)/a}}}t.b=r,t.a=i;var o=1,a=2,s=4,u={pointerdown:o,pointermove:a,pointerup:s,mousedown:o,mousemove:a,mouseup:s},l=1,c=2,f=3,p=0,h=1,d=2,v=1,m=2,y=4},function(e,t,n){"use strict";var r=n(389),i=n.n(r),o=i.a.webkit||i.a.blink?"-webkit-":i.a.gecko?"-moz-":"";t.a={DEFAULTS:{},CURSOR:{GRABBING:o+"grabbing",GRAB:o+"grab",POINTER:"pointer"}}},function(e,t,n){!function(t,r,i){"undefined"!=typeof e&&e.exports?e.exports=i():n(390)("bowser",i)}(0,0,function(){function e(e){function t(t){var n=e.match(t);return n&&n.length>1&&n[1]||""}function n(t){var n=e.match(t);return n&&n.length>1&&n[2]||""}var r,i=t(/(ipod|iphone|ipad)/i).toLowerCase(),o=/like android/i.test(e),s=!o&&/android/i.test(e),u=/nexus\s*[0-6]\s*/i.test(e),l=!u&&/nexus\s*[0-9]+/i.test(e),c=/CrOS/.test(e),f=/silk/i.test(e),p=/sailfish/i.test(e),h=/tizen/i.test(e),d=/(web|hpw)os/i.test(e),v=/windows phone/i.test(e),m=(/SamsungBrowser/i.test(e),!v&&/windows/i.test(e)),y=!i&&!f&&/macintosh/i.test(e),g=!s&&!p&&!h&&!d&&/linux/i.test(e),_=n(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),b=t(/version\/(\d+(\.\d+)?)/i),x=/tablet/i.test(e)&&!/tablet pc/i.test(e),w=!x&&/[^-]mobi/i.test(e),E=/xbox/i.test(e);/opera/i.test(e)?r={name:"Opera",opera:a,version:b||t(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(e)?r={name:"Opera",opera:a,version:t(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||b}:/SamsungBrowser/i.test(e)?r={name:"Samsung Internet for Android",samsungBrowser:a,version:b||t(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(e)?r={name:"Opera Coast",coast:a,version:b||t(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(e)?r={name:"Yandex Browser",yandexbrowser:a,version:b||t(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(e)?r={name:"UC Browser",ucbrowser:a,version:t(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(e)?r={name:"Maxthon",maxthon:a,version:t(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(e)?r={name:"Epiphany",epiphany:a,version:t(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(e)?r={name:"Puffin",puffin:a,version:t(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(e)?r={name:"Sleipnir",sleipnir:a,version:t(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(e)?r={name:"K-Meleon",kMeleon:a,version:t(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:v?(r={name:"Windows Phone",osname:"Windows Phone",windowsphone:a},_?(r.msedge=a,r.version=_):(r.msie=a,r.version=t(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?r={name:"Internet Explorer",msie:a,version:t(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:c?r={name:"Chrome",osname:"Chrome OS",chromeos:a,chromeBook:a,chrome:a,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/edg([ea]|ios)/i.test(e)?r={name:"Microsoft Edge",msedge:a,version:_}:/vivaldi/i.test(e)?r={name:"Vivaldi",vivaldi:a,version:t(/vivaldi\/(\d+(\.\d+)?)/i)||b}:p?r={name:"Sailfish",osname:"Sailfish OS",sailfish:a,version:t(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?r={name:"SeaMonkey",seamonkey:a,version:t(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(e)?(r={name:"Firefox",firefox:a,version:t(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(r.firefoxos=a,r.osname="Firefox OS")):f?r={name:"Amazon Silk",silk:a,version:t(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(e)?r={name:"PhantomJS",phantom:a,version:t(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(e)?r={name:"SlimerJS",slimer:a,version:t(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?r={name:"BlackBerry",osname:"BlackBerry OS",blackberry:a,version:b||t(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:d?(r={name:"WebOS",osname:"WebOS",webos:a,version:b||t(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(r.touchpad=a)):/bada/i.test(e)?r={name:"Bada",osname:"Bada",bada:a,version:t(/dolfin\/(\d+(\.\d+)?)/i)}:h?r={name:"Tizen",osname:"Tizen",tizen:a,version:t(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||b}:/qupzilla/i.test(e)?r={name:"QupZilla",qupzilla:a,version:t(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||b}:/chromium/i.test(e)?r={name:"Chromium",chromium:a,version:t(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||b}:/chrome|crios|crmo/i.test(e)?r={name:"Chrome",chrome:a,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:s?r={name:"Android",version:b}:/safari|applewebkit/i.test(e)?(r={name:"Safari",safari:a},b&&(r.version=b)):i?(r={name:"iphone"==i?"iPhone":"ipad"==i?"iPad":"iPod"},b&&(r.version=b)):r=/googlebot/i.test(e)?{name:"Googlebot",googlebot:a,version:t(/googlebot\/(\d+(\.\d+))/i)||b}:{name:t(/^(.*)\/(.*) /),version:n(/^(.*)\/(.*) /)},!r.msedge&&/(apple)?webkit/i.test(e)?(/(apple)?webkit\/537\.36/i.test(e)?(r.name=r.name||"Blink",r.blink=a):(r.name=r.name||"Webkit",r.webkit=a),!r.version&&b&&(r.version=b)):!r.opera&&/gecko\//i.test(e)&&(r.name=r.name||"Gecko",r.gecko=a,r.version=r.version||t(/gecko\/(\d+(\.\d+)?)/i)),r.windowsphone||!s&&!r.silk?!r.windowsphone&&i?(r[i]=a,r.ios=a,r.osname="iOS"):y?(r.mac=a,r.osname="macOS"):E?(r.xbox=a,r.osname="Xbox"):m?(r.windows=a,r.osname="Windows"):g&&(r.linux=a,r.osname="Linux"):(r.android=a,r.osname="Android");var S="";r.windows?S=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}(t(/Windows ((NT|XP)( \d\d?.\d)?)/i)):r.windowsphone?S=t(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):r.mac?(S=t(/Mac OS X (\d+([_\.\s]\d+)*)/i),S=S.replace(/[_\s]/g,".")):i?(S=t(/os (\d+([_\s]\d+)*) like mac os x/i),S=S.replace(/[_\s]/g,".")):s?S=t(/android[ \/-](\d+(\.\d+)*)/i):r.webos?S=t(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):r.blackberry?S=t(/rim\stablet\sos\s(\d+(\.\d+)*)/i):r.bada?S=t(/bada\/(\d+(\.\d+)*)/i):r.tizen&&(S=t(/tizen[\/\s](\d+(\.\d+)*)/i)),S&&(r.osversion=S);var T=!r.windows&&S.split(".")[0];return x||l||"ipad"==i||s&&(3==T||T>=4&&!w)||r.silk?r.tablet=a:(w||"iphone"==i||"ipod"==i||s||u||r.blackberry||r.webos||r.bada)&&(r.mobile=a),r.msedge||r.msie&&r.version>=10||r.yandexbrowser&&r.version>=15||r.vivaldi&&r.version>=1||r.chrome&&r.version>=20||r.samsungBrowser&&r.version>=4||r.firefox&&r.version>=20||r.safari&&r.version>=6||r.opera&&r.version>=10||r.ios&&r.osversion&&r.osversion.split(".")[0]>=6||r.blackberry&&r.version>=10.1||r.chromium&&r.version>=20?r.a=a:r.msie&&r.version<10||r.chrome&&r.version<20||r.firefox&&r.version<20||r.safari&&r.version<6||r.opera&&r.version<10||r.ios&&r.osversion&&r.osversion.split(".")[0]<6||r.chromium&&r.version<20?r.c=a:r.x=a,r}function t(e){return e.split(".").length}function n(e,t){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n++)r.push(t(e[n]));return r}function r(e){for(var r=Math.max(t(e[0]),t(e[1])),i=n(e,function(e){var i=r-t(e);return e+=new Array(i+1).join(".0"),n(e.split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});--r>=0;){if(i[0][r]>i[1][r])return 1;if(i[0][r]!==i[1][r])return-1;if(0===r)return 0}}function i(t,n,i){var o=s;"string"===typeof n&&(i=n,n=void 0),void 0===n&&(n=!1),i&&(o=e(i));var a=""+o.version;for(var u in t)if(t.hasOwnProperty(u)&&o[u]){if("string"!==typeof t[u])throw new Error("Browser version in the minVersion map should be a string: "+u+": "+String(t));return r([a,t[u]])<0}return n}function o(e,t,n){return!i(e,t,n)}var a=!0,s=e("undefined"!==typeof navigator?navigator.userAgent||"":"");return s.test=function(e){for(var t=0;t<e.length;++t){var n=e[t];if("string"===typeof n&&n in s)return!0}return!1},s.isUnsupportedBrowser=i,s.compareVersions=r,s.check=o,s._detect=e,s.detect=e,s})},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(0),s=(n.n(a),n(2)),u=n.n(s),l=n(36),c=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=Object.assign({},l.a.propTypes,{className:u.a.string,longitude:u.a.number.isRequired,latitude:u.a.number.isRequired,offsetLeft:u.a.number,offsetTop:u.a.number}),h=Object.assign({},l.a.defaultProps,{className:"",offsetLeft:0,offsetTop:0}),d=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),f(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.longitude,r=e.latitude,i=e.offsetLeft,o=e.offsetTop,s=this.context.viewport.project([n,r]),u=c(s,2),l=u[0],f=u[1],p={position:"absolute",left:l+i,top:f+o};return Object(a.createElement)("div",{className:"mapboxgl-marker "+t,ref:this._onContainerLoad,style:p,children:this.props.children})}}]),t}(l.a);d.displayName="Marker",d.propTypes=p,d.defaultProps=h},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(0),s=(n.n(a),n(2)),u=n.n(s),l=n(36),c=n(45),f=n(393),p=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=Object.assign({},l.a.propTypes,{className:u.a.string,longitude:u.a.number.isRequired,latitude:u.a.number.isRequired,offsetLeft:u.a.number,offsetTop:u.a.number,tipSize:u.a.number,closeButton:u.a.bool,closeOnClick:u.a.bool,anchor:u.a.oneOf(Object.keys(f.a)),dynamicPosition:u.a.bool,onClose:u.a.func}),v=Object.assign({},l.a.defaultProps,{className:"",offsetLeft:0,offsetTop:0,tipSize:10,anchor:"bottom",dynamicPosition:!0,closeButton:!0,closeOnClick:!0,onClose:function(){}}),m=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(c.a)(n),n}return o(t,e),h(t,[{key:"componentDidMount",value:function(){this.forceUpdate()}},{key:"_getPosition",value:function(e,t){var n=this.context.viewport,r=this.props,i=r.anchor,o=r.dynamicPosition,a=r.tipSize;return this._content&&o?Object(f.b)({x:e,y:t,anchor:i,padding:a,width:n.width,height:n.height,selfWidth:this._content.clientWidth,selfHeight:this._content.clientHeight}):i}},{key:"_onClose",value:function(){this.props.onClose()}},{key:"_contentLoaded",value:function(e){this._content=e}},{key:"_renderTip",value:function(){var e=this.props.tipSize;return Object(a.createElement)("div",{key:"tip",className:"mapboxgl-popup-tip",style:{borderWidth:e}})}},{key:"_renderContent",value:function(){var e=this.props,t=e.closeButton,n=e.children;return Object(a.createElement)("div",{key:"content",ref:this._contentLoaded,className:"mapboxgl-popup-content"},[t&&Object(a.createElement)("button",{key:"close-button",className:"mapboxgl-popup-close-button",type:"button",onClick:this._onClose},"\xd7"),n])}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.longitude,r=e.latitude,i=e.offsetLeft,o=e.offsetTop,s=e.closeOnClick,u=this.context.viewport.project([n,r]),l=p(u,2),c=l[0],h=l[1],d=this._getPosition(c,h),v=f.a[d],m={position:"absolute",left:c+i,top:h+o,transform:"translate("+100*-v.x+"%, "+100*-v.y+"%)"};return Object(a.createElement)("div",{className:"mapboxgl-popup mapboxgl-popup-anchor-"+d+" "+t,style:m,ref:this._onContainerLoad,onClick:s?this._onClose:null},[this._renderTip(),this._renderContent()])}}]),t}(l.a);m.displayName="Popup",m.propTypes=d,m.defaultProps=v},function(e,t,n){"use strict";function r(e){var t=e.x,n=e.y,r=e.width,o=e.height,a=e.selfWidth,s=e.selfHeight,u=e.anchor,l=e.padding,c=void 0===l?0:l,f=i[u],p=f.x,h=f.y,d=n-h*s,v=d+s;if(d<c)for(;d<c&&h>=.5;)h-=.5,d+=.5*s;else if(v>o-c)for(;v>o-c&&h<=.5;)h+=.5,v-=.5*s;var m=t-p*a,y=m+a,g=.5;if(.5===h&&(p=Math.floor(p),g=1),m<c)for(;m<c&&p>=g;)p-=g,m+=g*a;else if(y>r-c)for(;y>r-c&&p<=1-g;)p+=g,y-=g*a;return Object.keys(i).find(function(e){var t=i[e];return t.x===p&&t.y===h})}n.d(t,"a",function(){return i}),t.b=r;var i={top:{x:.5,y:0},"top-left":{x:0,y:0},"top-right":{x:1,y:0},bottom:{x:.5,y:1},"bottom-left":{x:0,y:1},"bottom-right":{x:1,y:1},left:{x:0,y:.5},right:{x:1,y:.5}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(0),s=(n.n(a),n(2)),u=n.n(s),l=n(36),c=n(45),f=n(73),p=n(74),h=n(180),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=Object.assign({},p.b.defaultProps,{transitionDuration:300}),m=Object.assign({},l.a.propTypes,{className:u.a.string,onViewportChange:u.a.func.isRequired,showCompass:u.a.bool,showZoom:u.a.bool}),y=Object.assign({},l.a.defaultProps,{className:"",onViewportChange:function(){},showCompass:!0,showZoom:!0}),g=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(c.a)(n),Object(h.a)(e),n}return o(t,e),d(t,[{key:"shouldComponentUpdate",value:function(e,t,n){return this.context.viewport.bearing!==n.viewport.bearing}},{key:"_updateViewport",value:function(e){var t=this.context.viewport,n=new f.b(Object.assign({},t,e));(this.props.onChangeViewport||this.props.onViewportChange)(Object.assign({},n.getViewportProps(),v))}},{key:"_onZoomIn",value:function(){this._updateViewport({zoom:this.context.viewport.zoom+1})}},{key:"_onZoomOut",value:function(){this._updateViewport({zoom:this.context.viewport.zoom-1})}},{key:"_onResetNorth",value:function(){this._updateViewport({bearing:0,pitch:0})}},{key:"_renderCompass",value:function(){var e=this.context.viewport.bearing;return Object(a.createElement)("span",{className:"mapboxgl-ctrl-compass-arrow",style:{transform:"rotate("+e+"deg)"}})}},{key:"_renderButton",value:function(e,t,n,r){return Object(a.createElement)("button",{key:e,className:"mapboxgl-ctrl-icon mapboxgl-ctrl-"+e,type:"button",title:t,onClick:n,children:r})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.showCompass,r=e.showZoom;return Object(a.createElement)("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-group "+t,ref:this._onContainerLoad},[r&&this._renderButton("zoom-in","Zoom In",this._onZoomIn),r&&this._renderButton("zoom-out","Zoom Out",this._onZoomOut),n&&this._renderButton("compass","Reset North",this._onResetNorth,this._renderCompass())])}}]),t}(l.a);g.displayName="NavigationControl",g.propTypes=m,g.defaultProps=y},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(0),s=(n.n(a),n(2)),u=n.n(s),l=n(36),c=n(396),f=(n.n(c),n(45)),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=Object.assign({},l.a.propTypes,{redraw:u.a.func.isRequired}),d={captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1},v=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(f.a)(n),n}return o(t,e),p(t,[{key:"componentDidMount",value:function(){this._redraw()}},{key:"componentDidUpdate",value:function(){this._redraw()}},{key:"_redraw",value:function(){var e=c.window.devicePixelRatio||1,t=this._canvas,n=t.getContext("2d");n.save(),n.scale(e,e);var r=this.context,i=r.viewport,o=r.isDragging;this.props.redraw({width:i.width,height:i.height,ctx:n,isDragging:o,project:i.project.bind(i),unproject:i.unproject.bind(i)}),n.restore()}},{key:"_canvasLoaded",value:function(e){this._canvas=e,this._onContainerLoad(e)}},{key:"render",value:function(){var e=c.window.devicePixelRatio||1,t=this.context.viewport,n=t.width,r=t.height;return Object(a.createElement)("canvas",{ref:this._canvasLoaded,width:n*e,height:r*e,style:{width:n+"px",height:r+"px",position:"absolute",pointerEvents:"none",left:0,top:0}})}}]),t}(l.a);v.displayName="CanvasOverlay",v.propTypes=h,v.defaultProps=d},function(e,t,n){(function(t){e.exports={window:"undefined"!==typeof window?window:t,global:"undefined"!==typeof t?t:window,document:"undefined"!==typeof document?document:{}}}).call(t,n(20))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(0),s=(n.n(a),n(2)),u=n.n(s),l=n(36),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=Object.assign({},l.a.propTypes,{redraw:u.a.func.isRequired,style:u.a.object}),p={captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1},h=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),c(t,[{key:"render",value:function(){var e=this.context,t=e.viewport,n=e.isDragging,r=Object.assign({position:"absolute",pointerEvents:"none",left:0,top:0,width:t.width,height:t.height},this.props.style);return Object(a.createElement)("div",{ref:this._onContainerLoad,style:r},this.props.redraw({width:t.width,height:t.height,isDragging:n,project:t.project.bind(t),unproject:t.unproject.bind(t)}))}}]),t}(l.a);h.displayName="HTMLOverlay",h.propTypes=f,h.defaultProps=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(0),s=(n.n(a),n(2)),u=n.n(s),l=n(36),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=Object.assign({},l.a.propTypes,{redraw:u.a.func.isRequired,style:u.a.object}),p={captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1},h=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),c(t,[{key:"render",value:function(){var e=this.context,t=e.viewport,n=e.isDragging,r=Object.assign({pointerEvents:"none",position:"absolute",left:0,top:0},this.props.style);return Object(a.createElement)("svg",{width:t.width,height:t.height,ref:this._onContainerLoad,style:r},this.props.redraw({width:t.width,height:t.height,isDragging:n,project:t.project.bind(t),unproject:t.unproject.bind(t)}))}}]),t}(l.a);h.displayName="SVGOverlay",h.propTypes=f,h.defaultProps=p},function(e,t,n){"use strict";var r=n(8),i=n(477);n.d(t,"a",function(){return i.a}),n.d(t,"b",function(){return i.b});var o=n(523),a=n(234);n.d(t,"c",function(){return a.d});var s={},u=r.d.View,l=r.d.MapView,c=r.d.FirstPersonView,f=r.d.ThirdPersonView,p=r.d.OrbitView,h=r.d.PerspectiveView,d=r.d.OrthographicView,v=r.d.ViewState,m=r.d.FirstPersonState,y=r.d.OrbitState,g=r.d.MapState,_=r.d.Controller,b=r.d.FirstPersonController,x=r.d.FirstPersonViewport,w=r.d.OrbitViewport,E=r.d.ThirdPersonViewport,S=r.d.TRANSITION_EVENTS,T=r.d.LinearInterpolator,A=r.d.ViewportFlyToInterpolator,O=r.d.Deck,P=r.d.MapControllerJS,C=r.d.EffectManager,k=r.d.Effect;Object.assign(s,{View:u,MapView:l,FirstPersonView:c,ThirdPersonView:f,OrbitView:p,PerspectiveView:h,OrthographicView:d,ViewState:v,FirstPersonState:m,OrbitState:y,MapState:g,Controller:_,FirstPersonController:b,FirstPersonViewport:x,OrbitViewport:w,ThirdPersonViewport:E,TRANSITION_EVENTS:S,LinearInterpolator:T,ViewportFlyToInterpolator:A,Deck:O,MapControllerJS:P,EffectManager:C,Effect:k});var R=r.d.TransitionManager,M=r.d.extractViewState,I=r.d.BinSorter,L=r.d.linearScale,D=r.d.getLinearScale,N=r.d.quantizeScale,F=r.d.getQuantizeScale,j=r.d.clamp,B=r.d.defaultColorRange,z=r.d.log,U=r.d.get,V=r.d.count,G=r.d.flatten,W=r.d.countVertices,H=r.d.flattenVertices,X=r.d.fillArray,q=r.d.enable64bitSupport,Y=r.d.fp64ify,Z=r.d.fp64LowPart;Object.assign(s,{TransitionManager:R,extractViewState:M,BinSorter:I,linearScale:L,getLinearScale:D,quantizeScale:N,getQuantizeScale:F,clamp:j,defaultColorRange:B,log:z,get:U,count:V,flatten:G,countVertices:W,flattenVertices:H,fillArray:X,enable64bitSupport:q,fp64ify:Y,fp64LowPart:Z}),Object.assign(s,{ReflectionEffect:o.a}),Object.assign(s,{MapController:a.a,OrbitController:a.b,ViewportController:a.c})},function(e,t,n){"use strict";var r=n(401),i=(n.n(r),n(10)),o="5.2.0-alpha.1";if(r.global.deck&&r.global.deck.VERSION!==o)throw new Error("deck.gl - multiple versions detected: "+r.global.deck.VERSION+" vs "+o);r.global.deck||(i.a.log(0,"deck.gl "+o+" - set deck.log.priority=1 (or higher) to trace attribute updates"),r.global.deck=r.global.deck||{VERSION:o,version:o,log:i.a}),console.table||(console.table=function(){}),n(181)},function(e,t,n){(function(t,n){var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i="object"!==("undefined"===typeof t?"undefined":r(t))||"[object process]"!==String(t)||t.browser;e.exports={window:"undefined"!==typeof window?window:n,global:"undefined"!==typeof n?n:window,document:"undefined"!==typeof document?document:{},isBrowser:i}}).call(t,n(27),n(20))},function(e,t,n){"use strict";function r(e,t){if("string"!==typeof t)return t;var n=Number(t);if(!isNaN(n))return n;t=t.replace(/^.*\./,"");var r=e[t];return s()(void 0!==r,"Accessing undefined constant GL."+t),r}function i(e,t){t=Number(t);for(var n in e)if(e[n]===t)return"gl."+n;return String(t)}function o(e,t){s()(void 0!==t,"undefined key"),t=Number(t);for(var n in e)if(e[n]===t)return"gl."+n;return String(t)}t.c=r,t.a=i,t.b=o;var a=n(1),s=n.n(a)},function(e,t,n){"use strict";function r(){return f}function i(e){var t=e.width,n=void 0===t?800:t,i=e.height,o=void 0===i?600:i,a=e.id,s=void 0===a?"gl-canvas":a,u=e.insert,l=void 0===u||u,c=document.createElement("canvas");return c.id=s,c.style.width=Number.isFinite(n)?n+"px":"100%",c.style.height=Number.isFinite(o)?o+"px":"100%",l&&r().then(function(e){var t=e.body;t.insertBefore(c,t.firstChild)}),c}function o(e){var t=e.id;if(!c)throw new Error("createGLContext called on canvas '"+t+"' before page was loaded");return document.getElementById(t)}function a(e){return{width:e.clientWidth,height:e.clientHeight}}function s(e,t){var n=t.useDevicePixels,r=void 0===n||n;"useDevicePixelRatio"in t&&(l.f.deprecated("useDevicePixelRatio","useDevicePixels"),r=t.useDevicePixels||t.useDevicePixelRatio);var i=r?window.devicePixelRatio||1:1,o=a(e);return{width:Math.floor(o.width*i),height:Math.floor(o.height*i),devicePixelRatio:i}}function u(e,t){var n=t.useDevicePixelRatio,r=void 0===n?null:n,i=t.useDevicePixels,o=void 0===i||i;null!==r&&(l.f.deprecated("useDevicePixelRatio","useDevicePixels"),o=r);var a=s(e,{useDevicePixels:o});a.width===e.width&&a.height===e.height||(e.width=a.width,e.height=a.height)}t.c=r,t.a=i,t.b=o,t.d=u;var l=n(5),c=l.c&&"complete"===document.readyState,f=l.c?new Promise(function(e,t){if(c)return void e(document);window.onload=function(){c=!0,e(document)}}):Promise.resolve({})},function(e,t,n){"use strict"},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";return u[e]=u[e]||1,e+"-"+u[e]++}function i(e){return s()("number"===typeof e,"Input must be a number"),e&&0===(e&e-1)}function o(e){var t=!0;for(var n in e){t=!1;break}return t}t.c=r,t.b=i,t.a=o;var a=n(1),s=n.n(a),u={}},function(e,t,n){"use strict";function r(e){function t(e){a("WebGL context: "+(e.statusMessage||"Unknown error"))}var n=e.canvas,r=e.opts,i=void 0===r?{}:r,o=e.onError,a=void 0===o?function(e){return null}:o;n.addEventListener("webglcontextcreationerror",t,!1);var s=i.webgl1,u=void 0===s||s,l=i.webgl2,c=void 0===l||l,f=null;return c&&(f=f||n.getContext("webgl2",i),f=f||n.getContext("experimental-webgl2",i)),u&&(f=f||n.getContext("webgl",i),f=f||n.getContext("experimental-webgl",i)),n.removeEventListener("webglcontextcreationerror",t,!1),f||a("Failed to create "+(c&&!u?"WebGL2":"WebGL")+" context")}t.a=r;var i=n(1);n.n(i)},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){return e&&32874===e.TEXTURE_BINDING_3D}function o(e,t,n){var r=l[n],i="function"===typeof r?r(e,t,n):r;return void 0!==i?i:t(n)}t.a=o;var a,s=n(28),u=function(e){return i(e)?void 0:0},l=(a={},r(a,s.a.READ_BUFFER,function(e){return i(e)?void 0:s.a.COLOR_ATTACHMENT0}),r(a,35723,function(e){return i(e)?void 0:4352}),r(a,s.a.RASTERIZER_DISCARD,u),r(a,s.a.SAMPLES,u),r(a,36795,function(e,t){var n=i(e)?e.getExtension("EXT_disjoint_timer_query_webgl2"):e.getExtension("EXT_disjoint_timer_query");return n&&n.GPU_DISJOINT_EXT?t(n.GPU_DISJOINT_EXT):0}),r(a,37445,function(e,t){var n=e.getExtension("WEBGL_debug_renderer_info");return t(n&&n.UNMASKED_VENDOR_WEBGL||s.a.VENDOR)}),r(a,37446,function(e,t){var n=e.getExtension("WEBGL_debug_renderer_info");return t(n&&n.UNMASKED_RENDERER_WEBGL||s.a.RENDERER)}),r(a,34047,function(e,t){var n=e.luma.extensions.EXT_texture_filter_anisotropic;return n?t(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1}),r(a,s.a.MAX_3D_TEXTURE_SIZE,u),r(a,s.a.MAX_ARRAY_TEXTURE_LAYERS,u),r(a,s.a.MAX_CLIENT_WAIT_TIMEOUT_WEBGL,u),r(a,s.a.MAX_COLOR_ATTACHMENTS,function(e,t){if(!i(e)){var n=e.getExtension("WEBGL_draw_buffers");return n?t(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}}),r(a,s.a.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS,u),r(a,s.a.MAX_COMBINED_UNIFORM_BLOCKS,u),r(a,s.a.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS,u),r(a,s.a.MAX_DRAW_BUFFERS,function(e){if(!i(e)){var t=e.getExtension("WEBGL_draw_buffers");return t?t.MAX_DRAW_BUFFERS_WEBGL:0}}),r(a,s.a.MAX_ELEMENT_INDEX,function(e){return e.getExtension("OES_element_index")?2147483647:65535}),r(a,s.a.MAX_ELEMENTS_INDICES,function(e){return e.getExtension("OES_element_index")?16777216:65535}),r(a,s.a.MAX_ELEMENTS_VERTICES,function(e){return 16777216}),r(a,s.a.MAX_FRAGMENT_INPUT_COMPONENTS,u),r(a,s.a.MAX_FRAGMENT_UNIFORM_BLOCKS,u),r(a,s.a.MAX_FRAGMENT_UNIFORM_COMPONENTS,u),r(a,s.a.MAX_SAMPLES,u),r(a,s.a.MAX_SERVER_WAIT_TIMEOUT,u),r(a,s.a.MAX_TEXTURE_LOD_BIAS,u),r(a,s.a.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS,u),r(a,s.a.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS,u),r(a,s.a.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS,u),r(a,s.a.MAX_UNIFORM_BLOCK_SIZE,u),r(a,s.a.MAX_UNIFORM_BUFFER_BINDINGS,u),r(a,s.a.MAX_VARYING_COMPONENTS,u),r(a,s.a.MAX_VERTEX_OUTPUT_COMPONENTS,u),r(a,s.a.MAX_VERTEX_UNIFORM_BLOCKS,u),r(a,s.a.MAX_VERTEX_UNIFORM_COMPONENTS,u),r(a,s.a.MIN_PROGRAM_TEXEL_OFFSET,u),r(a,s.a.MAX_PROGRAM_TEXEL_OFFSET,u),r(a,s.a.UNIFORM_BUFFER_OFFSET_ALIGNMENT,u),a)},function(e,t,n){(function(t){WebGLDebugUtils=function(){function e(e){if(null==v){v={},m={};for(var t in e)"number"==typeof e[t]&&(v[e[t]]=t,m[t]=e[t])}}function n(){if(null==v)throw"WebGLDebugUtils.init(ctx) not called"}function r(e){return n(),void 0!==v[e]}function i(e){n();var t=v[e];return void 0!==t?"gl."+t:"/*UNKNOWN WebGL ENUM*/ 0x"+e.toString(16)}function o(e,t,n,r){var o=d[e];if(void 0!==o){var o=o[t];if(void 0!==o&&o[n]){if("object"===typeof o[n]&&void 0!==o[n].enumBitwiseOr){for(var a=o[n].enumBitwiseOr,s=0,u=[],l=0;l<a.length;++l){var c=m[a[l]];0!==(r&c)&&(s|=c,u.push(i(c)))}return s===r?u.join(" | "):i(r)}return i(r)}}return null===r?"null":void 0===r?"undefined":r.toString()}function a(e,t){for(var n="",r=t.length,i=0;i<r;++i)n+=(0==i?"":", ")+o(e,r,i,t[i]);return n}function s(e,t,n){e.__defineGetter__(n,function(){return t[n]}),e.__defineSetter__(n,function(e){t[n]=e})}function u(t,n,r,a){function l(e,t){return function(){r&&r(t,arguments);var i=e[t].apply(e,arguments),o=a.getError();return 0!=o&&(c[o]=!0,n(o,t,arguments)),i}}a=a||t,e(t),n=n||function(e,t,n){for(var r="",a=n.length,s=0;s<a;++s)r+=(0==s?"":", ")+o(t,a,s,n[s]);h("WebGL error "+i(e)+" in "+t+"("+r+")")};var c={},f={};for(var p in t)if("function"==typeof t[p])if("getExtension"!=p)f[p]=l(t,p);else{var d=l(t,p);f[p]=function(){var e=d.apply(t,arguments);return e?u(e,n,r,a):null}}else s(f,t,p);return f.getError=function(){for(var e in c)if(c.hasOwnProperty(e)&&c[e])return c[e]=!1,e;return t.NO_ERROR},f}function l(e){var t=!!e.createTransformFeedback;t&&e.bindVertexArray(null);var n=e.getParameter(e.MAX_VERTEX_ATTRIBS),r=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,r);for(var i=0;i<n;++i)e.disableVertexAttribArray(i),e.vertexAttribPointer(i,4,e.FLOAT,!1,0,0),e.vertexAttrib1f(i,0),t&&e.vertexAttribDivisor(i,0);e.deleteBuffer(r);for(var o=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),i=0;i<o;++i)e.activeTexture(e.TEXTURE0+i),e.bindTexture(e.TEXTURE_CUBE_MAP,null),e.bindTexture(e.TEXTURE_2D,null),t&&(e.bindTexture(e.TEXTURE_2D_ARRAY,null),e.bindTexture(e.TEXTURE_3D,null),e.bindSampler(i,null));if(e.activeTexture(e.TEXTURE0),e.useProgram(null),e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.DITHER),e.disable(e.SCISSOR_TEST),e.blendColor(0,0,0,0),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.clearColor(0,0,0,0),e.clearDepth(1),e.clearStencil(-1),e.colorMask(!0,!0,!0,!0),e.cullFace(e.BACK),e.depthFunc(e.LESS),e.depthMask(!0),e.depthRange(0,1),e.frontFace(e.CCW),e.hint(e.GENERATE_MIPMAP_HINT,e.DONT_CARE),e.lineWidth(1),e.pixelStorei(e.PACK_ALIGNMENT,4),e.pixelStorei(e.UNPACK_ALIGNMENT,4),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.UNPACK_COLORSPACE_CONVERSION_WEBGL&&e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.BROWSER_DEFAULT_WEBGL),e.polygonOffset(0,0),e.sampleCoverage(1,!1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilMask(4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.viewport(0,0,e.canvas.width,e.canvas.height),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT),t){e.drawBuffers([e.BACK]),e.readBuffer(e.BACK),e.bindBuffer(e.COPY_READ_BUFFER,null),e.bindBuffer(e.COPY_WRITE_BUFFER,null),e.bindBuffer(e.PIXEL_PACK_BUFFER,null),e.bindBuffer(e.PIXEL_UNPACK_BUFFER,null);for(var a=e.getParameter(e.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS),i=0;i<a;++i)e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,i,null);for(var s=e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS),i=0;i<s;++i)e.bindBufferBase(e.UNIFORM_BUFFER,i,null);e.disable(e.RASTERIZER_DISCARD),e.pixelStorei(e.UNPACK_IMAGE_HEIGHT,0),e.pixelStorei(e.UNPACK_SKIP_IMAGES,0),e.pixelStorei(e.UNPACK_ROW_LENGTH,0),e.pixelStorei(e.UNPACK_SKIP_ROWS,0),e.pixelStorei(e.UNPACK_SKIP_PIXELS,0),e.pixelStorei(e.PACK_ROW_LENGTH,0),e.pixelStorei(e.PACK_SKIP_ROWS,0),e.pixelStorei(e.PACK_SKIP_PIXELS,0),e.hint(e.FRAGMENT_SHADER_DERIVATIVE_HINT,e.DONT_CARE)}for(;e.getError(););}function c(e){function t(e){return"function"==typeof e?e:function(t){e.handleEvent(t)}}function n(){for(var e=Object.keys(E),t=0;t<e.length;++t)delete E[e[t]]}function r(){++b,y||_==b&&e.loseContext()}function i(e,t){var n=e[t];return function(){if(r(),!y){return n.apply(e,arguments)}}}function o(){for(var e=0;e<g.length;++e){var t=g[e];t instanceof WebGLBuffer?c.deleteBuffer(t):t instanceof WebGLFramebuffer?c.deleteFramebuffer(t):t instanceof WebGLProgram?c.deleteProgram(t):t instanceof WebGLRenderbuffer?c.deleteRenderbuffer(t):t instanceof WebGLShader?c.deleteShader(t):t instanceof WebGLTexture?c.deleteTexture(t):h&&(t instanceof WebGLQuery?c.deleteQuery(t):t instanceof WebGLSampler?c.deleteSampler(t):t instanceof WebGLSync?c.deleteSync(t):t instanceof WebGLTransformFeedback?c.deleteTransformFeedback(t):t instanceof WebGLVertexArrayObject&&c.deleteVertexArray(t))}}function a(e){return{statusMessage:e,preventDefault:function(){x=!0}}}function u(e){for(var t in e)"function"==typeof e[t]?p[t]=i(e,t):s(p,e,t);p.getError=function(){if(r(),!y)for(var e;e=c.getError();)E[e]=!0;for(var e in E)if(E[e])return delete E[e],e;return p.NO_ERROR};var n=["createBuffer","createFramebuffer","createProgram","createRenderbuffer","createShader","createTexture"];h&&n.push("createQuery","createSampler","fenceSync","createTransformFeedback","createVertexArray");for(var o=0;o<n.length;++o){var a=n[o];p[a]=function(t){return function(){if(r(),y)return null;var n=t.apply(e,arguments);return n.__webglDebugContextLostId__=m,g.push(n),n}}(e[a])}var u=["getActiveAttrib","getActiveUniform","getBufferParameter","getContextAttributes","getAttachedShaders","getFramebufferAttachmentParameter","getParameter","getProgramParameter","getProgramInfoLog","getRenderbufferParameter","getShaderParameter","getShaderInfoLog","getShaderSource","getTexParameter","getUniform","getUniformLocation","getVertexAttrib"];h&&u.push("getInternalformatParameter","getQuery","getQueryParameter","getSamplerParameter","getSyncParameter","getTransformFeedbackVarying","getIndexedParameter","getUniformIndices","getActiveUniforms","getActiveUniformBlockParameter","getActiveUniformBlockName");for(var o=0;o<u.length;++o){var a=u[o];p[a]=function(t){return function(){return r(),y?null:t.apply(e,arguments)}}(p[a])}var l=["isBuffer","isEnabled","isFramebuffer","isProgram","isRenderbuffer","isShader","isTexture"];h&&l.push("isQuery","isSampler","isSync","isTransformFeedback","isVertexArray");for(var o=0;o<l.length;++o){var a=l[o];p[a]=function(t){return function(){return r(),!y&&t.apply(e,arguments)}}(p[a])}return p.checkFramebufferStatus=function(t){return function(){return r(),y?p.FRAMEBUFFER_UNSUPPORTED:t.apply(e,arguments)}}(p.checkFramebufferStatus),p.getAttribLocation=function(t){return function(){return r(),y?-1:t.apply(e,arguments)}}(p.getAttribLocation),p.getVertexAttribOffset=function(t){return function(){return r(),y?0:t.apply(e,arguments)}}(p.getVertexAttribOffset),p.isContextLost=function(){return y},h&&(p.getFragDataLocation=function(t){return function(){return r(),y?-1:t.apply(e,arguments)}}(p.getFragDataLocation),p.clientWaitSync=function(t){return function(){return r(),y?p.WAIT_FAILED:t.apply(e,arguments)}}(p.clientWaitSync),p.getUniformBlockIndex=function(t){return function(){return r(),y?p.INVALID_INDEX:t.apply(e,arguments)}}(p.getUniformBlockIndex)),p}var c,p,h,d=[],v=[],p={},m=1,y=!1,g=[],_=0,b=0,x=!1,w=0,E={};e.getContext=function(t){return function(){var n=t.apply(e,arguments);if(n instanceof WebGLRenderingContext||f.WebGL2RenderingContext&&n instanceof WebGL2RenderingContext){if(n!=c){if(c)throw"got different context";h=f.WebGL2RenderingContext&&n instanceof WebGL2RenderingContext,c=n,p=u(c)}return p}return n}}(e.getContext);var S=function(e){d.push(t(e))},T=function(e){v.push(t(e))};return function(e){var t=e.addEventListener;e.addEventListener=function(n,r,i){switch(n){case"webglcontextlost":S(r);break;case"webglcontextrestored":T(r);break;default:t.apply(e,arguments)}}}(e),e.loseContext=function(){if(!y){for(y=!0,_=0,++m;c.getError(););n(),E[c.CONTEXT_LOST_WEBGL]=!0;var t=a("context lost"),r=d.slice();setTimeout(function(){for(var n=0;n<r.length;++n)r[n](t);w>=0&&setTimeout(function(){e.restoreContext()},w)},0)}},e.restoreContext=function(){y&&v.length&&setTimeout(function(){if(!x)throw"can not restore. webglcontestlost listener did not call event.preventDefault";o(),l(c),y=!1,b=0,x=!1;for(var e=v.slice(),t=a("context restored"),n=0;n<e.length;++n)e[n](t)},0)},e.loseContextInNCalls=function(e){if(y)throw"You can not ask a lost contet to be lost";_=b+e},e.getNumCalls=function(){return b},e.setRestoreTimeout=function(e){w=e},e}var f;"undefined"==typeof f&&(f=t);var p=function(e){f.console&&f.console.log&&f.console.log(e)},h=function(e){f.console&&f.console.error?f.console.error(e):p(e)},d={enable:{1:{0:!0}},disable:{1:{0:!0}},getParameter:{1:{0:!0}},drawArrays:{3:{0:!0}},drawElements:{4:{0:!0,2:!0}},createShader:{1:{0:!0}},getShaderParameter:{2:{1:!0}},getProgramParameter:{2:{1:!0}},getShaderPrecisionFormat:{2:{0:!0,1:!0}},getVertexAttrib:{2:{1:!0}},vertexAttribPointer:{6:{2:!0}},bindTexture:{2:{0:!0}},activeTexture:{1:{0:!0}},getTexParameter:{2:{0:!0,1:!0}},texParameterf:{3:{0:!0,1:!0}},texParameteri:{3:{0:!0,1:!0,2:!0}},copyTexImage2D:{8:{0:!0,2:!0}},copyTexSubImage2D:{8:{0:!0}},generateMipmap:{1:{0:!0}},bindBuffer:{2:{0:!0}},getBufferParameter:{2:{0:!0,1:!0}},pixelStorei:{2:{0:!0,1:!0}},bindRenderbuffer:{2:{0:!0}},bindFramebuffer:{2:{0:!0}},checkFramebufferStatus:{1:{0:!0}},framebufferRenderbuffer:{4:{0:!0,1:!0,2:!0}},framebufferTexture2D:{5:{0:!0,1:!0,2:!0}},getFramebufferAttachmentParameter:{3:{0:!0,1:!0,2:!0}},getRenderbufferParameter:{2:{0:!0,1:!0}},renderbufferStorage:{4:{0:!0,1:!0}},clear:{1:{0:{enumBitwiseOr:["COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT"]}}},depthFunc:{1:{0:!0}},blendFunc:{2:{0:!0,1:!0}},blendFuncSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},blendEquation:{1:{0:!0}},blendEquationSeparate:{2:{0:!0,1:!0}},stencilFunc:{3:{0:!0}},stencilFuncSeparate:{4:{0:!0,1:!0}},stencilMaskSeparate:{2:{0:!0}},stencilOp:{3:{0:!0,1:!0,2:!0}},stencilOpSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},cullFace:{1:{0:!0}},frontFace:{1:{0:!0}},drawArraysInstancedANGLE:{4:{0:!0}},drawElementsInstancedANGLE:{5:{0:!0,2:!0}},blendEquationEXT:{1:{0:!0}},bufferData:{3:{0:!0,2:!0},4:{0:!0,2:!0},5:{0:!0,2:!0}},bufferSubData:{3:{0:!0},4:{0:!0},5:{0:!0}},copyBufferSubData:{5:{0:!0,1:!0}},getBufferSubData:{3:{0:!0},4:{0:!0},5:{0:!0}},blitFramebuffer:{10:{8:{enumBitwiseOr:["COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT"]},9:!0}},framebufferTextureLayer:{5:{0:!0,1:!0}},invalidateFramebuffer:{2:{0:!0}},invalidateSubFramebuffer:{6:{0:!0}},readBuffer:{1:{0:!0}},getInternalformatParameter:{3:{0:!0,1:!0,2:!0}},renderbufferStorageMultisample:{5:{0:!0,2:!0}},texStorage2D:{5:{0:!0,2:!0}},texStorage3D:{6:{0:!0,2:!0}},texImage2D:{9:{0:!0,2:!0,6:!0,7:!0},6:{0:!0,2:!0,3:!0,4:!0},10:{0:!0,2:!0,6:!0,7:!0}},texImage3D:{10:{0:!0,2:!0,7:!0,8:!0},11:{0:!0,2:!0,7:!0,8:!0}},texSubImage2D:{9:{0:!0,6:!0,7:!0},7:{0:!0,4:!0,5:!0},10:{0:!0,6:!0,7:!0}},texSubImage3D:{11:{0:!0,8:!0,9:!0},12:{0:!0,8:!0,9:!0}},copyTexSubImage3D:{9:{0:!0}},compressedTexImage2D:{7:{0:!0,2:!0},8:{0:!0,2:!0},9:{0:!0,2:!0}},compressedTexImage3D:{8:{0:!0,2:!0},9:{0:!0,2:!0},10:{0:!0,2:!0}},compressedTexSubImage2D:{8:{0:!0,6:!0},9:{0:!0,6:!0},10:{0:!0,6:!0}},compressedTexSubImage3D:{10:{0:!0,8:!0},11:{0:!0,8:!0},12:{0:!0,8:!0}},vertexAttribIPointer:{5:{2:!0}},drawArraysInstanced:{4:{0:!0}},drawElementsInstanced:{5:{0:!0,2:!0}},drawRangeElements:{6:{0:!0,4:!0}},readPixels:{7:{4:!0,5:!0},8:{4:!0,5:!0}},clearBufferfv:{3:{0:!0},4:{0:!0}},clearBufferiv:{3:{0:!0},4:{0:!0}},clearBufferuiv:{3:{0:!0},4:{0:!0}},clearBufferfi:{4:{0:!0}},beginQuery:{2:{0:!0}},endQuery:{1:{0:!0}},getQuery:{2:{0:!0,1:!0}},getQueryParameter:{2:{1:!0}},samplerParameteri:{3:{1:!0,2:!0}},samplerParameterf:{3:{1:!0}},getSamplerParameter:{2:{1:!0}},fenceSync:{2:{0:!0,1:{enumBitwiseOr:[]}}},clientWaitSync:{3:{1:{enumBitwiseOr:["SYNC_FLUSH_COMMANDS_BIT"]}}},waitSync:{3:{1:{enumBitwiseOr:[]}}},getSyncParameter:{2:{1:!0}},bindTransformFeedback:{2:{0:!0}},beginTransformFeedback:{1:{0:!0}},transformFeedbackVaryings:{3:{2:!0}},bindBufferBase:{3:{0:!0}},bindBufferRange:{5:{0:!0}},getIndexedParameter:{2:{0:!0}},getActiveUniforms:{3:{2:!0}},getActiveUniformBlockParameter:{3:{2:!0}}},v=null,m=null;return{init:e,mightBeEnum:r,glEnumToString:i,glFunctionArgToString:o,glFunctionArgsToString:a,makeDebugContext:u,makeLostContextSimulatingCanvas:c,resetToInitialState:l}}(),e.exports=WebGLDebugUtils}).call(t,n(20))},function(e,t,n){"use strict";function r(e,t,n){for(var r=e.split(/\r?\n/),a={},u={},l=Object(s.a)(t)||"(unnamed)",c=Object(s.b)(n)+" shader "+l,f=0;f<r.length;f++){var p=r[f];if(!(p.length<=1)){var h=p.split(":"),d=h[0],v=parseInt(h[2],10);if(isNaN(v))throw new Error("GLSL compilation error in "+c+": "+e);"WARNING"!==d?a[v]=p:u[v]=p}}var m=o(t);return{shaderName:c,errors:i(a,m),warnings:i(u,m)}}function i(e,t){for(var n="",r=0;r<t.length;r++){var i=t[r];if((e[r+3]||e[r+2]||e[r+1])&&(n+=i+"\n",e[r+1])){var o=e[r+1],s=o.split(":",3),u=s[0],l=parseInt(s[1],10)||0;n+=a("^^^ "+u+": "+o.substring(s.join(":").length+1).trim()+"\n\n",l)}}return n}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ",r=e.split(/\r?\n/),i=String(r.length+t-1).length;return r.map(function(e,r){var o=r+t,s=String(o).length;return a(o,i-s)+n+e})}function a(e,t){for(var n="",r=0;r<t;++r)n+=" ";return""+n+e}t.a=r;var s=n(193)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(22),s=n(4),u=n(50),l=n(38),c=n(48),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();l.a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(4),s=n(38),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();s.a},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i,o=n(1),a=(n.n(o),function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}}(),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}}(),5124),s=5126,u=5125;i={},r(i,s,[s,1]),r(i,35664,[s,2]),r(i,35665,[s,3]),r(i,35666,[s,4]),r(i,a,[a,1]),r(i,35667,[a,2]),r(i,35668,[a,3]),r(i,35669,[a,4]),r(i,u,[u,1]),r(i,36294,[u,2]),r(i,36295,[u,3]),r(i,36296,[u,4]),r(i,35670,[s,1]),r(i,35671,[s,2]),r(i,35672,[s,3]),r(i,35673,[s,4]),r(i,35674,[s,8]),r(i,35685,[s,8]),r(i,35686,[s,8]),r(i,35675,[s,12]),r(i,35687,[s,12]),r(i,35688,[s,12]),r(i,35676,[s,16]),r(i,35689,[s,16]),r(i,35690,[s,16])},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(414),i=n(415),o={vs:r.a,fs:i.a,defaultUniforms:{}}},function(e,t,n){"use strict";t.a="#define SHADER_NAME luma_modular_vertex\n\n// object attributes\nattribute vec3 positions;\nattribute vec3 normals;\nattribute vec4 colors;\nattribute vec2 texCoords;\nattribute vec3 pickingColors;\n\nvoid main(void) {\n\n  // Set up position\n#ifdef MODULE_GEOMETRY\n  geometry_setPosition(positions);\n  geometry_setNormal(normals);\n#endif\n\n#ifdef MODULE_PROJECT\n  project_setPositionAndNormal_Model(positions, normals);\n  gl_Position = project_model_to_clipspace(positions);\n#endif\n\n  // Set up depth\n#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n\n#ifdef MODULE_DIFFUSE\n  diffuse_setTextureCoordinate(texCoords);\n#endif\n\n  // Set up color calculations\n#ifdef MODULE_MATERIAL\n  material_setDiffuseColor(colors);\n  material_setDiffuseTextureCoordinates(texCoords);\n#endif\n\n#ifdef MODULE_LIGHTING\n  lighting_setPositionAndNormal(positions, normals);\n  lighting_apply_light(positions);\n  lighting_apply_reflection(positions);\n#endif\n\n#ifdef MODULE_PICKING\n  picking_setPickingColor(pickingColors);\n#endif\n\n}\n"},function(e,t,n){"use strict";t.a="#define SHADER_NAME luma-modular-fragment\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\n// varyings\nvarying vec4 vColor;\n\nvoid main(){\n  gl_FragColor = vec4(1., 0., 1., 1.);\n\n#ifdef MODULE_DIFFUSE\n  gl_FragColor = diffuse_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth(gl_Position);\n#endif\n}\n"},function(e,t,n){"use strict";var r=(n(115),n(199));n.d(t,"a",function(){return r.a});n(200)},function(e,t,n){"use strict";function r(e,t){var n=e.vendor,r=e.renderer,i=void 0;switch(t){case"nvidia":i=n.match(/NVIDIA/i)||r.match(/NVIDIA/i);break;case"intel":i=n.match(/INTEL/i)||r.match(/INTEL/i);break;case"amd":i=n.match(/AMD/i)||r.match(/AMD/i)||n.match(/ATI/i)||r.match(/ATI/i);break;default:i=!1}return i}function i(e){var t="",n=Object(a.getContextInfo)(e);return r(n,"nvidia")?t+="#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n":r(n,"intel")?t+="#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n":r(n,"amd")?t+="#define AMD_GPU\n":t+="#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n",t}function o(e){var t="// Defines for shader portability\n#if (__VERSION__ > 120)\n# define attribute in\n# define varying out\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n#else\n// # define in attribute\n// # define out varying\n#endif // __VERSION\n";return Object(s.c)(e,s.a.GLSL_FRAG_DEPTH)&&(t+="// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),Object(s.c)(e,s.a.GLSL_DERIVATIVES)&&(t+="// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define DERIVATIVES\n#endif\n"),Object(s.c)(e,s.a.GLSL_FRAG_DATA)&&(t+="// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define DRAW_BUFFERS\n#endif\n"),Object(s.c)(e,s.a.GLSL_TEXTURE_LOD)&&(t+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n# define TEXTURE_LOD\n#define texture2DLod texture2DLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define textureCubeLod textureCubeLodEXT\n#define texture2DGrad texture2DGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define textureCubeGrad textureCubeGradEXT\n#endif\n"),t}t.a=i,t.b=o;var a=n(39),s=n(77)},function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return i});var r="#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",i="#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"},function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"c",function(){return u}),n.d(t,"d",function(){return l}),n.d(t,"b",function(){return h});var r=n(116),i=n.n(r),o=n(183),a={},s=function(e){a[e.id]||(a[e.id]=e,i.a.listItem("luma.gl",e.id))},u=function(e,t){if(i.a.isReady()&&!i.a.throttle("luma.gl:"+e.id,1e3)){var n=Object.assign({},e.geometry.attributes,e.attributes),r=Object.assign({},e.uniforms,t);i.a.multiUpdate("luma.gl",e.id,[{path:"objects.uniforms",data:r},{path:"objects.attributes",data:n}])}},l=function(e){delete a[e],i.a.deleteItem("luma.gl",e)},c=function e(t,n,r){t&&(n.length>1?e(t[n[0]],n.slice(1),r):t[n[0]]=r)},f=new Map,p=function(e,t,n){if(o.b.__SEER_INITIALIZED__){f.has(e)||f.set(e,new Map);f.get(e).set(t,n)}},h=function(e,t){if(o.b.__SEER_INITIALIZED__&&e){var n=f.get(e);n&&n.forEach(function(e,n){c(t,n,e)})}};i.a.listenFor("luma.gl",function(e){var t=a[e.itemKey];if(t&&"edit"===e.type&&"uniforms"===e.valuePath[0]){var n=e.valuePath.slice(1);p(e.itemKey,n,e.value);var r=t.getUniforms();c(r,n,e.value),t.setUniforms(r)}})},function(e,t,n){"use strict";var r=(n(39),n(5),n(421),n(1));n.n(r),function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}}()},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(198),u=n(9),l=n(1),c=n.n(l),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var n=e.children,r=void 0===n?[]:n;r.every(function(e){return c()(e instanceof s.a)});var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.children=r,a}return a(t,e),f(t,[{key:"add",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=!0,o=!1,a=void 0;try{for(var s,u=t[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;Array.isArray(l)?this.add.apply(this,r(l)):this.children.push(l)}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}return this}},{key:"remove",value:function(e){var t=this.children,n=t.indexOf(e);return n>-1&&t.splice(n,1),this}},{key:"removeAll",value:function(){return this.children=[],this}},{key:"traverse",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.modelMatrix,i=void 0===r?new u.a:r,o=!0,a=!1,s=void 0;try{for(var l,c=this.children[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var f=l.value,p=f.matrix;i=i.multiplyRight(p);var h=void 0;if(h=f instanceof t?f.traverse(e,{modelMatrix:i}):e(f,{}))return h}}catch(e){a=!0,s=e}finally{try{!o&&c.return&&c.return()}finally{if(a)throw s}}return null}},{key:"traverseReverse",value:function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.modelMatrix,i=void 0===r?new u.a:r,o=this.children.length-1;o>=0;--o){var a=this.children[o],s=a.matrix;i=i.multiplyRight(s);var l=void 0;if(l=a instanceof t?a.traverseReverse(e,{modelMatrix:i}):e(a,{}))return l}return null}}]),t}(s.a);t.a=p},function(e,t,n){"use strict";(function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}})(),new Uint8Array([0,0,0])},function(e,t,n){"use strict";n(424)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return!0!==e&&e}function o(e){var t=e.getBoundingClientRect();return{x:t.left,y:t.top,bbox:t}}function a(e,t){return t=t||window,e||t.event}function s(e){return e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3}function u(e){var t=e.which||e.keyCode,n=p(t),r=t-111;return r>0&&r<13&&(n="f"+r),n=n||String.fromCharCode(t).toLowerCase(),{code:t,key:n,shift:e.shiftKey,control:e.ctrlKey,alt:e.altKey,meta:e.metaKey}}function l(e){return 3===e.which||2===e.button}function c(e,t){t=t||window,e=e||t.event;var n=t.document;if(n=n.documentElement||n.body,e.touches&&e.touches.length){for(var r=[],i=e.touches.length,o=void 0,a=0;a<i;++a)o=e.touches[a],r.push({x:o.pageX||o.clientX+n.scrollLeft,y:o.pageY||o.clientY+n.scrollTop});return r}return[{x:e.pageX||e.clientX+n.scrollLeft,y:e.pageY||e.clientY+n.scrollTop}]}function f(e){e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,e.preventDefault?e.preventDefault():e.returnValue=!1}function p(e){var t=m;for(var n in t)if(t[n]===e)return n;return null}var h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d={enter:13,up:38,down:40,left:37,right:39,esc:27,space:32,backspace:8,tab:9,delete:46},v=function(){function e(t,n){r(this,e),this.scene=n.scene,this.domElem=t,this.pos=o(t),this.opt=this.callbacks=n,this.size={width:t.width||t.offsetWidth,height:t.height||t.offsetHeight},this.attachEvents()}return h(e,[{key:"attachEvents",value:function(){var e=this,t=this.domElem,n=this.opt;if(n.disableContextMenu&&(t.oncontextmenu=function(){return!1}),n.enableMouse){["mouseup","mousedown","mousemove","mouseover","mouseout"].forEach(function(n){t.addEventListener(n,function(t,r){e[n](e.eventInfo(n,t,r))},!1)});var r="";r=document.getBoxObjectFor||null!==window.mozInnerScreenX?"DOMMouseScroll":"mousewheel",t.addEventListener(r,function(t,n){e.mousewheel(e.eventInfo("mousewheel",t,n))},!1)}n.enableTouch&&["touchstart","touchmove","touchend"].forEach(function(n){t.addEventListener(n,function(t,r){e[n](e.eventInfo(n,t,r))},!1)}),n.enableKeyboard&&["keydown","keyup"].forEach(function(t){document.addEventListener(t,function(n,r){e[t](e.eventInfo(t,n,r))},!1)})}},{key:"eventInfo",value:function(e,t,n){for(var r=this.domElem,i=this.scene,p=this.opt,h=this.getSize(),d=p.relative,v=p.centerOrigin,m=p.cachePosition&&this.pos||o(r),y=a(t,n),g=c(t,n),_={x:g[0].x,y:g[0].y},b={},x=void 0,w=void 0,E=0,S=g.length;E<S;++E)x=g[E].x,w=g[E].y,d&&(x-=m.x,w-=m.y,v&&(x-=h.width/2,w-=h.height/2,w*=-1)),g[E].x=x,g[E].y=w;switch(e){case"mousewheel":b.wheel=s(y);break;case"keydown":case"keyup":Object.assign(b,u(y));break;case"mouseup":b.isRightClick=l(y)}var T=void 0;return Object.assign(b,{x:g[0].x,y:g[0].y,posArray:g,cache:!1,stop:function(){f(y)},getTarget:function(){return T||(T=p.picking&&i.pick(_.x-m.x,_.y-m.y)||!0)}}),b.event=y,b}},{key:"getSize",value:function(){if(this.cacheSize)return this.size;var e=this.domElem;return{width:e.width||e.offsetWidth,height:e.height||e.offsetHeight}}},{key:"mouseup",value:function(e){this.moved||(e.isRightClick?this.callbacks.onRightClick(e,this.hovered):this.callbacks.onClick(e,i(this.pressed))),this.pressed&&(this.moved?this.callbacks.onDragEnd(e,i(this.pressed)):this.callbacks.onDragCancel(e,i(this.pressed)),this.pressed=this.moved=!1)}},{key:"mouseout",value:function(e){for(var t=e.relatedTarget,n=this.domElem;t&&t.parentNode;){if(n===t.parentNode)return;t=t.parentNode}this.hovered&&(this.callbacks.onMouseLeave(e,this.hovered),this.hovered=!1),this.pressed&&this.moved&&(this.callbacks.onDragEnd(e),this.pressed=this.moved=!1)}},{key:"mouseover",value:function(e){}},{key:"mousemove",value:function(e){if(this.pressed)return this.moved=!0,void this.callbacks.onDragMove(e,i(this.pressed));if(this.hovered){var t=i(e.getTarget());t&&t.hash===this.hash?this.callbacks.onMouseMove(e,this.hovered):(this.callbacks.onMouseLeave(e,this.hovered),this.hovered=t,this.hash=t,t&&(this.hash=t.hash,this.callbacks.onMouseEnter(e,this.hovered)))}else this.hovered=i(e.getTarget()),this.hash=this.hovered,this.hovered&&(this.hash=this.hovered.hash,this.callbacks.onMouseEnter(e,this.hovered));this.opt.picking||this.callbacks.onMouseMove(e)}},{key:"mousewheel",value:function(e){this.callbacks.onMouseWheel(e)}},{key:"mousedown",value:function(e){this.pressed=e.getTarget(),this.callbacks.onDragStart(e,i(this.pressed))}},{key:"touchstart",value:function(e){this.touched=e.getTarget(),this.touchedLastPosition={x:e.x,y:e.y},this.callbacks.onTouchStart(e,i(this.touched))}},{key:"touchmove",value:function(e){this.touched&&(this.touchMoved=!0,this.callbacks.onTouchMove(e,i(this.touched)))}},{key:"touchend",value:function(e){this.touched&&(this.touchMoved?this.callbacks.onTouchEnd(e,i(this.touched)):(e.x=isNaN(e.x)?this.touchedLastPosition.x:e.x,e.y=isNaN(e.y)?this.touchedLastPosition.y:e.y,this.callbacks.onTap(e,i(this.touched)),this.callbacks.onTouchCancel(e,i(this.touched))),this.touched=this.touchMoved=!1)}},{key:"keydown",value:function(e){this.callbacks.onKeyDown(e)}},{key:"keyup",value:function(e){this.callbacks.onKeyUp(e)}}]),e}();Object.assign(v.prototype,{hovered:!1,pressed:!1,touched:!1,touchedLastPosition:{x:0,y:0},touchMoved:!1,moved:!1});var m=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(24),s=n(40);s.Model},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(24),s=n(40),u=n(5);s.Model},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(24),s=n(82);s.a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(40),s=n(24);a.Model},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(24),s=n(82),u=n(5);s.a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(40),s=n(24),u=n(5);a.Model},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(24),s=n(40);s.Model},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(40),s=n(24),u=n(39),l="attribute vec2 aClipSpacePosition;\nattribute vec2 aTexCoord;\nattribute vec2 aCoordinate;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main(void) {\n  gl_Position = vec4(aClipSpacePosition, 0., 1.);\n  position = aClipSpacePosition;\n  coordinate = aCoordinate;\n  uv = aTexCoord;\n}\n",c=[-1,-1,1,-1,-1,1,1,1];a.Model},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(208);Object.defineProperty(t,"setPathPrefix",{enumerable:!0,get:function(){return r.setPathPrefix}}),Object.defineProperty(t,"loadFile",{enumerable:!0,get:function(){return r.loadFile}}),Object.defineProperty(t,"loadImage",{enumerable:!0,get:function(){return r.loadImage}});var i=n(435);Object.defineProperty(t,"loadFiles",{enumerable:!0,get:function(){return i.loadFiles}}),Object.defineProperty(t,"loadImages",{enumerable:!0,get:function(){return i.loadImages}}),Object.defineProperty(t,"loadTextures",{enumerable:!0,get:function(){return i.loadTextures}}),Object.defineProperty(t,"loadProgram",{enumerable:!0,get:function(){return i.loadProgram}}),Object.defineProperty(t,"loadModel",{enumerable:!0,get:function(){return i.loadModel}}),Object.defineProperty(t,"parseModel",{enumerable:!0,get:function(){return i.parseModel}})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){}function o(e){return new u(e).sendAsync()}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.requestFile=o;var s={UNINITIALIZED:0,LOADING:1,LOADED:2,INTERACTIVE:3,COMPLETED:4},u=function(){function e(t){var n=t.url,o=t.path,a=void 0===o?null:o,s=t.method,u=void 0===s?"GET":s,l=t.asynchronous,c=void 0===l||l,f=t.noCache,p=void 0!==f&&f,h=t.sendAsBinary,d=void 0!==h&&h,v=t.responseType,m=void 0!==v&&v,y=t.onProgress,g=void 0===y?i:y,_=t.onError,b=void 0===_?i:_,x=t.onAbort,w=void 0===x?i:x,E=t.onComplete,S=void 0===E?i:E;r(this,e),this.url=a?a.join(a,n):n,this.method=u,this.async=c,this.noCache=p,this.sendAsBinary=d,this.responseType=m,this.req=new XMLHttpRequest,this.req.onload=function(e){return S(e)},this.req.onerror=function(e){return b(e)},this.req.onabort=function(e){return w(e)},this.req.onprogress=function(e){e.lengthComputable?g(e,Math.round(e.loaded/e.total*100)):g(e,-1)}}return a(e,[{key:"setRequestHeader",value:function(e,t){return this.req.setRequestHeader(e,t),this}},{key:"sendAsync",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.body||null;return new Promise(function(n,r){try{var i=e.req,o=e.method,a=e.noCache,u=e.sendAsBinary,l=e.responseType,c=a?e.url+(e.url.indexOf("?")>=0?"&":"?")+Date.now():e.url;i.open(o,c,e.async),l&&(i.responseType=l),e.async&&(i.onreadystatechange=function(e){i.readyState===s.COMPLETED&&(200===i.status?n(i.responseType?i.response:i.responseText):r(new Error(i.status+": "+c)))}),u?i.sendAsBinary(t):i.send(t),e.async||(200===i.status?n(i.responseType?i.response:i.responseText):r(new Error(i.status+": "+c)))}catch(e){r(e)}})}}]),e}()},function(e,t,n){"use strict";function r(){}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.urls,o=n.onProgress,s=void 0===o?r:o;return(0,d.default)("string"===typeof t,"loadTexture: url must be string"),a(Object.assign({urls:i,onProgress:s},n)).then(function(t){return t.map(function(t,r){return new m.Texture2D(e,Object.assign({id:i[r]},n,{data:t}))})})}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.urls,n=e.onProgress,i=void 0===n?r:n;(0,d.default)(t.every(function(e){return"string"===typeof e}),"loadImages: {urls} must be array of strings");var o=0;return Promise.all(t.map(function(n){var r=(0,v.loadFile)(Object.assign({url:n},e));return r.then(function(e){return i({progress:++o/t.length,count:o,total:t.length,url:n})}),r}))}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.urls,n=e.onProgress,i=void 0===n?r:n;(0,d.default)(t.every(function(e){return"string"===typeof e}),"loadImages: {urls} must be array of strings");var o=0;return Promise.all(t.map(function(n){var r=(0,v.loadImage)(n,e);return r.then(function(e){return i({progress:++o/t.length,count:o,total:t.length,url:n})}),r}))}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.urls,i=t.onProgress,o=void 0===i?r:i;return(0,d.default)(n.every(function(e){return"string"===typeof e}),"loadTextures: {urls} must be array of strings"),a(Object.assign({urls:n,onProgress:o},t)).then(function(r){return r.map(function(r,i){var o=Array.isArray(t.parameters)?t.parameters[i]:t.parameters;return o=void 0===o?{}:o,new m.Texture2D(e,Object.assign({id:n[i]},o,{data:r}))})})}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.vs,i=t.fs,a=t.onProgress,s=void 0===a?r:a;return o(Object.assign({urls:[n,i],onProgress:s},t)).then(function(n){var r=p(n,2),i=r[0],o=r[1];return new m.Program(e,Object.assign({vs:i,fs:o},t))})}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.url,i=t.onProgress,a=void 0===i?r:i;return o(Object.assign({urls:[n],onProgress:a},t)).then(function(n){var r=p(n,1),i=r[0];return c(e,Object.assign({file:i},t))})}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.file,r=t.program,i=void 0===r?new m.Program(e):r,o="string"===typeof n?f(n):n,a={},s={};for(var u in o){var l=o[u];Array.isArray(l)?a[u]="indices"===u?new Uint16Array(l):new Float32Array(l):s[u]=l}return new y.Model(e,Object.assign({program:i,geometry:new g.Geometry({attributes:a})},s,t))}function f(e){try{return JSON.parse(e)}catch(e){throw new Error("Failed to parse JSON: "+e)}}Object.defineProperty(t,"__esModule",{value:!0});var p=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.loadTexture=i,t.loadFiles=o,t.loadImages=a,t.loadTextures=s,t.loadProgram=u,t.loadModel=l,t.parseModel=c;var h=n(1),d=function(e){return e&&e.__esModule?e:{default:e}}(h),v=n(208),m=n(39),y=n(40),g=n(24)},function(e,t,n){"use strict";t.a={name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n\n// All these functions are for substituting tan() function from Intel GPU only\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01; // 1/3!\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03; // 1/5!\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04; // 1/7!\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06; // 1/9!\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n\n    // 2pi range reduction\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 0.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 0.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null}},function(e,t,n){"use strict";var r=(n(438),n(439)),i=n(440),o=r.a+"\n"+i.a;t.a={name:"fp64",vs:o,fs:null};r.a},function(e,t,n){"use strict"},function(e,t,n){"use strict";t.a="uniform float ONE;\n\n/*\nAbout LUMA_FP64_CODE_ELIMINATION_WORKAROUND\n\nThe purpose of this workaround is to prevent shader compilers from\noptimizing away necessary arithmetic operations by swapping their sequences\nor transform the equation to some 'equivalent' from.\n\nThe method is to multiply an artifical variable, ONE, which will be known to\nthe compiler to be 1 only at runtime. The whole expression is then represented\nas a polynomial with respective to ONE. In the coefficients of all terms, only one a\nand one b should appear\n\nerr = (a + b) * ONE^6 - a * ONE^5 - (a + b) * ONE^4 + a * ONE^3 - b - (a + b) * ONE^2 + a * ONE\n*/\n\n// Divide float number to high and low floats to extend fraction bits\nvec2 split(float a) {\n  const float SPLIT = 4097.0;\n  float t = a * SPLIT;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float a_hi = t * ONE - (t - a);\n  float a_lo = a * ONE - a_hi;\n#else\n  float a_hi = t - (t - a);\n  float a_lo = a - a_hi;\n#endif\n  return vec2(a_hi, a_lo);\n}\n\n// Divide float number again when high float uses too many fraction bits\nvec2 split2(vec2 a) {\n  vec2 b = split(a.x);\n  b.y += a.y;\n  return b;\n}\n\n// Special sum operation when a > b\nvec2 quickTwoSum(float a, float b) {\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float sum = (a + b) * ONE;\n  float err = b - (sum - a) * ONE;\n#else\n  float sum = a + b;\n  float err = b - (sum - a);\n#endif\n  return vec2(sum, err);\n}\n\n// General sum operation\nvec2 twoSum(float a, float b) {\n  float s = (a + b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE + (b - v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) + (b - v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSub(float a, float b) {\n  float s = (a - b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE - (b + v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) - (b + v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSqr(float a) {\n  float prod = a * a;\n  vec2 a_fp64 = split(a);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float err = ((a_fp64.x * a_fp64.x - prod) * ONE + 2.0 * a_fp64.x *\n    a_fp64.y * ONE * ONE) + a_fp64.y * a_fp64.y * ONE * ONE * ONE;\n#else\n  float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;\n#endif\n  return vec2(prod, err);\n}\n\nvec2 twoProd(float a, float b) {\n  float prod = a * b;\n  vec2 a_fp64 = split(a);\n  vec2 b_fp64 = split(b);\n  float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +\n    a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;\n  return vec2(prod, err);\n}\n\nvec2 sum_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSum(a.x, b.x);\n  t = twoSum(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 sub_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSub(a.x, b.x);\n  t = twoSub(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 mul_fp64(vec2 a, vec2 b) {\n  vec2 prod = twoProd(a.x, b.x);\n  // y component is for the error\n  prod.y += a.x * b.y;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  prod.y += a.y * b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  return prod;\n}\n\nvec2 div_fp64(vec2 a, vec2 b) {\n  float xn = 1.0 / b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  vec2 yn = mul_fp64(a, vec2(xn, 0));\n#else\n  vec2 yn = a * xn;\n#endif\n  float diff = (sub_fp64(a, mul_fp64(b, yn))).x;\n  vec2 prod = twoProd(xn, diff);\n  return sum_fp64(yn, prod);\n}\n\nvec2 sqrt_fp64(vec2 a) {\n  if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n\n  float x = 1.0 / sqrt(a.x);\n  float yn = a.x * x;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  vec2 yn_sqr = twoSqr(yn) * ONE;\n#else\n  vec2 yn_sqr = twoSqr(yn);\n#endif\n  float diff = sub_fp64(a, yn_sqr).x;\n  vec2 prod = twoProd(x * 0.5, diff);\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  return sum_fp64(split(yn), prod);\n#else\n  return sum_fp64(vec2(yn, 0.0), prod);\n#endif\n}\n"},function(e,t,n){"use strict";t.a="const vec2 E_FP64 = vec2(2.7182817459106445e+00, 8.254840366817007e-08);\nconst vec2 LOG2_FP64 = vec2(0.6931471824645996e+00, -1.9046542121259336e-09);\nconst vec2 PI_FP64 = vec2(3.1415927410125732, -8.742278012618954e-8);\nconst vec2 TWO_PI_FP64 = vec2(6.2831854820251465, -1.7484556025237907e-7);\nconst vec2 PI_2_FP64 = vec2(1.5707963705062866, -4.371139006309477e-8);\nconst vec2 PI_4_FP64 = vec2(0.7853981852531433, -2.1855695031547384e-8);\nconst vec2 PI_16_FP64 = vec2(0.19634954631328583, -5.463923757886846e-9);\nconst vec2 PI_16_2_FP64 = vec2(0.39269909262657166, -1.0927847515773692e-8);\nconst vec2 PI_16_3_FP64 = vec2(0.5890486240386963, -1.4906100798128818e-9);\nconst vec2 PI_180_FP64 = vec2(0.01745329238474369, 1.3519960498364902e-10);\n\nconst vec2 SIN_TABLE_0_FP64 = vec2(0.19509032368659973, -1.6704714833615242e-9);\nconst vec2 SIN_TABLE_1_FP64 = vec2(0.3826834261417389, 6.22335089017767e-9);\nconst vec2 SIN_TABLE_2_FP64 = vec2(0.5555702447891235, -1.1769521357507529e-8);\nconst vec2 SIN_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617041793133e-8);\n\nconst vec2 COS_TABLE_0_FP64 = vec2(0.9807852506637573, 2.9739473106360492e-8);\nconst vec2 COS_TABLE_1_FP64 = vec2(0.9238795042037964, 2.8307490351764386e-8);\nconst vec2 COS_TABLE_2_FP64 = vec2(0.8314695954322815, 1.6870263741530778e-8);\nconst vec2 COS_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617152815436e-8);\n\nconst vec2 INVERSE_FACTORIAL_3_FP64 = vec2(1.666666716337204e-01, -4.967053879312289e-09); // 1/3!\nconst vec2 INVERSE_FACTORIAL_4_FP64 = vec2(4.16666679084301e-02, -1.2417634698280722e-09); // 1/4!\nconst vec2 INVERSE_FACTORIAL_5_FP64 = vec2(8.333333767950535e-03, -4.34617203337595e-10); // 1/5!\nconst vec2 INVERSE_FACTORIAL_6_FP64 = vec2(1.3888889225199819e-03, -3.3631094437103215e-11); // 1/6!\nconst vec2 INVERSE_FACTORIAL_7_FP64 = vec2(1.9841270113829523e-04,  -2.725596874933456e-12); // 1/7!\nconst vec2 INVERSE_FACTORIAL_8_FP64 = vec2(2.4801587642286904e-05, -3.406996025904184e-13); // 1/8!\nconst vec2 INVERSE_FACTORIAL_9_FP64 = vec2(2.75573188446287533e-06, 3.7935713937038186e-14); // 1/9!\nconst vec2 INVERSE_FACTORIAL_10_FP64 = vec2(2.755731998149713e-07, -7.575112367869873e-15); // 1/10!\n\nfloat nint(float d) {\n    if (d == floor(d)) return d;\n    return floor(d + 0.5);\n}\n\nvec2 nint_fp64(vec2 a) {\n    float hi = nint(a.x);\n    float lo;\n    vec2 tmp;\n    if (hi == a.x) {\n        lo = nint(a.y);\n        tmp = quickTwoSum(hi, lo);\n    } else {\n        lo = 0.0;\n        if (abs(hi - a.x) == 0.5 && a.y < 0.0) {\n            hi -= 1.0;\n        }\n        tmp = vec2(hi, lo);\n    }\n    return tmp;\n}\n\n/* k_power controls how much range reduction we would like to have\nRange reduction uses the following method:\nassume a = k_power * r + m * log(2), k and m being integers.\nSet k_power = 4 (we can choose other k to trade accuracy with performance.\nwe only need to calculate exp(r) and using exp(a) = 2^m * exp(r)^k_power;\n*/\n\nvec2 exp_fp64(vec2 a) {\n  // We need to make sure these two numbers match\n  // as bit-wise shift is not available in GLSL 1.0\n  const int k_power = 4;\n  const float k = 16.0;\n\n  const float inv_k = 1.0 / k;\n\n  if (a.x <= -88.0) return vec2(0.0, 0.0);\n  if (a.x >= 88.0) return vec2(1.0 / 0.0, 1.0 / 0.0);\n  if (a.x == 0.0 && a.y == 0.0) return vec2(1.0, 0.0);\n  if (a.x == 1.0 && a.y == 0.0) return E_FP64;\n\n  float m = floor(a.x / LOG2_FP64.x + 0.5);\n  vec2 r = sub_fp64(a, mul_fp64(LOG2_FP64, vec2(m, 0.0))) * inv_k;\n  vec2 s, t, p;\n\n  p = mul_fp64(r, r);\n  s = sum_fp64(r, p * 0.5);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_3_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_4_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_5_FP64);\n\n  // s = sum_fp64(s, t);\n  // p = mul_fp64(p, r);\n  // t = mul_fp64(p, INVERSE_FACTORIAL_6_FP64);\n\n  // s = sum_fp64(s, t);\n  // p = mul_fp64(p, r);\n  // t = mul_fp64(p, INVERSE_FACTORIAL_7_FP64);\n\n  s = sum_fp64(s, t);\n\n\n  // At this point, s = exp(r) - 1; but after following 4 recursions, we will get exp(r) ^ 512 - 1.\n  for (int i = 0; i < k_power; i++) {\n    s = sum_fp64(s * 2.0, mul_fp64(s, s));\n  }\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = sum_fp64(s, vec2(ONE, 0.0));\n#else\n  s = sum_fp64(s, vec2(1.0, 0.0));\n#endif\n\n  return s * pow(2.0, m);\n//   return r;\n}\n\nvec2 log_fp64(vec2 a)\n{\n  if (a.x == 1.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x <= 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n  vec2 x = vec2(log(a.x), 0.0);\n  vec2 s;\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = vec2(ONE, 0.0);\n#else\n  s = vec2(1.0, 0.0);\n#endif\n\n  x = sub_fp64(sum_fp64(x, mul_fp64(a, exp_fp64(-x))), s);\n  return x;\n}\n\nvec2 sin_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(0.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  s = a;\n  r = a;\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_3_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_5_FP64);\n  s = sum_fp64(s, t);\n\n  /* keep the following commented code in case we need them\n  for extra accuracy from the Taylor expansion*/\n\n  // r = mul_fp64(r, x);\n  // t = mul_fp64(r, INVERSE_FACTORIAL_7_FP64);\n  // s = sum_fp64(s, t);\n\n  // r = mul_fp64(r, x);\n  // t = mul_fp64(r, INVERSE_FACTORIAL_9_FP64);\n  // s = sum_fp64(s, t);\n\n  return s;\n}\n\nvec2 cos_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(1.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  r = x;\n  s = sum_fp64(vec2(1.0, 0.0), r * 0.5);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_4_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_6_FP64);\n  s = sum_fp64(s, t);\n\n  /* keep the following commented code in case we need them\n  for extra accuracy from the Taylor expansion*/\n\n  // r = mul_fp64(r, x);\n  // t = mul_fp64(r, INVERSE_FACTORIAL_8_FP64);\n  // s = sum_fp64(s, t);\n\n  // r = mul_fp64(r, x);\n  // t = mul_fp64(r, INVERSE_FACTORIAL_10_FP64);\n  // s = sum_fp64(s, t);\n\n  return s;\n}\n\nvoid sincos_taylor_fp64(vec2 a, out vec2 sin_t, out vec2 cos_t) {\n  if (a.x == 0.0 && a.y == 0.0) {\n    sin_t = vec2(0.0, 0.0);\n    cos_t = vec2(1.0, 0.0);\n  }\n\n  sin_t = sin_taylor_fp64(a);\n  cos_t = sqrt_fp64(sub_fp64(vec2(1.0, 0.0), mul_fp64(sin_t, sin_t)));\n}\n\nvec2 sin_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n\n    // 2pi range reduction\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return sin_taylor_fp64(t);\n        } else if (j == 1) {\n            return cos_taylor_fp64(t);\n        } else if (j == -1) {\n            return -cos_taylor_fp64(t);\n        } else {\n            return -sin_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 cos_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(1.0, 0.0);\n    }\n\n    // 2pi range reduction\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return cos_taylor_fp64(t);\n        } else if (j == 1) {\n            return -sin_taylor_fp64(t);\n        } else if (j == -1) {\n            return sin_taylor_fp64(t);\n        } else {\n            return -cos_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 tan_fp64(vec2 a) {\n    vec2 sin_a;\n    vec2 cos_a;\n\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n\n    // 2pi range reduction\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    // We just can't get PI/16 * 3.0 very accurately.\n    // so let's just store it\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n    vec2 sin_t, cos_t;\n    vec2 s, c;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#else\n        if (abs_k == 1) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs_k == 2) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs_k == 3) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs_k == 4) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#endif\n        if (k > 0) {\n            s = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            s = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return div_fp64(sin_a, cos_a);\n}\n\nvec2 radians_fp64(vec2 degree) {\n  return mul_fp64(degree, PI_180_FP64);\n}\n\nvec2 mix_fp64(vec2 a, vec2 b, float x) {\n  vec2 range = sub_fp64(b, a);\n  return sum_fp64(a, mul_fp64(range, vec2(x, 0.0)));\n}\n\n// Vector functions\n// vec2 functions\nvoid vec2_sum_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sum_fp64(a[0], b[0]);\n    out_val[1] = sum_fp64(a[1], b[1]);\n}\n\nvoid vec2_sub_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sub_fp64(a[0], b[0]);\n    out_val[1] = sub_fp64(a[1], b[1]);\n}\n\nvoid vec2_mul_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = mul_fp64(a[0], b[0]);\n    out_val[1] = mul_fp64(a[1], b[1]);\n}\n\nvoid vec2_div_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = div_fp64(a[0], b[0]);\n    out_val[1] = div_fp64(a[1], b[1]);\n}\n\nvoid vec2_mix_fp64(vec2 x[2], vec2 y[2], float a, out vec2 out_val[2]) {\n  vec2 range[2];\n  vec2_sub_fp64(y, x, range);\n  vec2 portion[2];\n  portion[0] = range[0] * a;\n  portion[1] = range[1] * a;\n  vec2_sum_fp64(x, portion, out_val);\n}\n\nvec2 vec2_length_fp64(vec2 x[2]) {\n  return sqrt_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])));\n}\n\nvoid vec2_normalize_fp64(vec2 x[2], out vec2 out_val[2]) {\n  vec2 length = vec2_length_fp64(x);\n  vec2 length_vec2[2];\n  length_vec2[0] = length;\n  length_vec2[1] = length;\n\n  vec2_div_fp64(x, length_vec2, out_val);\n}\n\nvec2 vec2_distance_fp64(vec2 x[2], vec2 y[2]) {\n  vec2 diff[2];\n  vec2_sub_fp64(x, y, diff);\n  return vec2_length_fp64(diff);\n}\n\nvec2 vec2_dot_fp64(vec2 a[2], vec2 b[2]) {\n  vec2 v[2];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n\n  return sum_fp64(v[0], v[1]);\n}\n\n// vec3 functions\nvoid vec3_sub_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec3_sum_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvec2 vec3_length_fp64(vec2 x[3]) {\n  return sqrt_fp64(sum_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])),\n    mul_fp64(x[2], x[2])));\n}\n\nvec2 vec3_distance_fp64(vec2 x[3], vec2 y[3]) {\n  vec2 diff[3];\n  vec3_sub_fp64(x, y, diff);\n  return vec3_length_fp64(diff);\n}\n\n// vec4 functions\nvoid vec4_fp64(vec4 a, out vec2 out_val[4]) {\n  out_val[0].x = a[0];\n  out_val[0].y = 0.0;\n\n  out_val[1].x = a[1];\n  out_val[1].y = 0.0;\n\n  out_val[2].x = a[2];\n  out_val[2].y = 0.0;\n\n  out_val[3].x = a[3];\n  out_val[3].y = 0.0;\n}\n\nvoid vec4_scalar_mul_fp64(vec2 a[4], vec2 b, out vec2 out_val[4]) {\n  out_val[0] = mul_fp64(a[0], b);\n  out_val[1] = mul_fp64(a[1], b);\n  out_val[2] = mul_fp64(a[2], b);\n  out_val[3] = mul_fp64(a[3], b);\n}\n\nvoid vec4_sum_fp64(vec2 a[4], vec2 b[4], out vec2 out_val[4]) {\n  for (int i = 0; i < 4; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec4_dot_fp64(vec2 a[4], vec2 b[4], out vec2 out_val) {\n  vec2 v[4];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n  v[2] = mul_fp64(a[2], b[2]);\n  v[3] = mul_fp64(a[3], b[3]);\n\n  out_val = sum_fp64(sum_fp64(v[0], v[1]), sum_fp64(v[2], v[3]));\n}\n\nvoid mat4_vec4_mul_fp64(vec2 b[16], vec2 a[4], out vec2 out_val[4]) {\n  vec2 tmp[4];\n\n  for (int i = 0; i < 4; i++)\n  {\n    for (int j = 0; j < 4; j++)\n    {\n      tmp[j] = b[j + i * 4];\n    }\n    vec4_dot_fp64(a, tmp, out_val[i]);\n  }\n}\n"},function(e,t,n){"use strict";var r=(n(9),n(442)),i=n(443),o=n(444);r.a,i.a,r.a,o.a},function(e,t,n){"use strict";t.a="  // empty\n"},function(e,t,n){"use strict";t.a="#define LIGHT_MAX 4\n\n/*\n// lighting configuration\nuniform bool enableLights;\nuniform vec3 ambientColor;\nuniform vec3 directionalColor;\nuniform vec3 lightingDirection;\n\n// point lights configuration\nuniform vec3 pointLocation[LIGHT_MAX];\nuniform vec3 pointColor[LIGHT_MAX];\nuniform int numberPoints;\n\n// reflection / refraction configuration\nuniform bool useReflection;\n*/\n\nuniform bool lighting_uEnableLights;\nuniform vec3 lighting_uAmbientColor;\nuniform vec3 lighting_uDirection;\nuniform vec3 lighting_uDirectionalColor;\n\n// point lights configuration\nuniform int  lighting_uPointCount;\nuniform vec3 lighting_uPointLocation[LIGHT_MAX];\nuniform vec3 lighting_uPointColor[LIGHT_MAX];\n\n// reflection / refraction configuration\nuniform bool lighting_uEnableReflections;\n\n// varyings\nvarying vec4 lighting_vPosition;\nvarying vec4 lighting_vNormal;\nvarying vec3 lighting_vColor;\nvarying vec3 lighting_vLightWeighting;\nvarying vec3 lighting_vReflection;\n\nvoid lighting_setPositionAndNormal(vec3 position, vec3 normal) {\n  lighting_vPosition = worldMatrix * vec4(position, 1.);\n  lighting_vNormal = worldInverseTransposeMatrix * vec4(normal, 1.);;\n}\n\nvoid lighting__getLightWeigting() {\n  float directionalLightWeighting = max(dot(lighting_vNormal.xyz, lighting_uDirection), 0.);\n  vec3 pointWeight = vec3(0., 0., 0.);\n  for (int i = 0; i < LIGHT_MAX; i++) {\n    if (i < numberPoints) {\n      vec4 mvLightPosition = viewMatrix * vec4(lighting_uPointLocation[i], 1.);\n      vec3 pointLightDirection = normalize(mvLightPosition.xyz - lighting_vPosition.xyz);\n      pointWeight += max(dot(lighting_vNormal.xyz, pointLightDirection), 0.) * pointColor[i];\n     } else {\n       break;\n     }\n   }\n   return ambientColor + (directionalColor * directionalLightWeighting) + pointWeight;\n}\n\nvoid lighting_apply(vec3 position, vec3 normal) {\n  lighting_setPositionAndNormal(position, normal);\n\n  // lighting code\n  if(!lighting_uEnableLights) {\n    lighting_vLightWeighting = vec3(1., 1., 1.);\n  } else {\n    lighting_vLightWeighting = lighting__getLightWeighting();\n  }\n}\n\nvoid lighting_set_reflection(vec3 position) {\n    // refraction / reflection code\n  if (lighting_uEnableReflections) {\n    lighting_vReflection = (viewInverseMatrix[3] - (worldMatrix * vec4(position, 1.))).xyz;\n  } else {\n    lighting_vReflection = vec3(1., 1., 1.);\n  }\n}\n"},function(e,t,n){"use strict";t.a="#ifdef GL_ES\nprecision highp float;\n#endif\n\n#define LIGHT_MAX 4\n\nvarying vec3 lighting_vLightWeighting;\n\nvec4 lighting_apply(vec4 color) {\n  // set color from texture\n  return vec4(color.rgb * lighting_vLightWeighting, color.a);\n}\n\n// spec-map.fs\n\nuniform mat4 viewMatrix;\n\n\nvarying vec4 lighting_vColor;\nvarying vec4 lighting_vTransformedNormal;\nvarying vec4 lighting_vPosition;\n\nuniform float shininess;\nuniform bool enableSpecularMap;\nuniform bool enableLights;\n\nuniform vec3 ambientColor;\nuniform vec3 directionalColor;\nuniform vec3 lightingDirection;\n\nuniform vec3 lighting_uPointLocation[LIGHT_MAX];\nuniform vec3 lighting_uPointColor[LIGHT_MAX];\nuniform float lighting_uPointSpecularEnable[LIGHT_MAX];\nuniform vec3 lighting_uPointSpecularColor[LIGHT_MAX];\nuniform int numberPoints;\n\n\nvec3 lighting__calculate_light_weighting() {\n\treturn lighting__calculate_light_weighting(shininess);\n}\n\nvec3 lighting__calculate_light_weighting(shininess) {\n  vec3 normal = vTransformedNormal.xyz;\n  vec3 eyeDirection = normalize(-vPosition.xyz);\n\n  vec3 specularLight = vec3(0., 0., 0.);\n  vec3 diffuseLight = vec3(0., 0., 0.);\n\n  for (int i = 0; i < LIGHT_MAX; i++) {\n    if (i < numberPoints) {\n      vec3 transformedPointLocation = (viewMatrix * vec4(lighting_uPointLocation[i], 1.0)).xyz;\n      vec3 lightDirection = normalize(transformedPointLocation - vPosition.xyz);\n\n      if (lighting_uPointSpecularEnable > 0.) {\n        vec3 reflectionDirection = reflect(-lightDirection, normal);\n        float specularLightWeighting =\n          pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininessVal);\n        specularLight += specularLightWeighting * lighting_uPointSpecularColor[i];\n      }\n\n      float diffuseLightWeighting = max(dot(normal, lightDirection), 0.0);\n      diffuseLight += diffuseLightWeighting * lighting_uPointColor[i];\n    } else {\n      break;\n    }\n  }\n\n  return ambientColor + diffuseLight + specularLight;\n}\n\nvoid lighting_filterColor(fragmentColor) {\n  if (!lighting_enable) {\n  \treturn fragmentColor;\n  } else {\n  \tvec3 lightWeighting = lighting__calculate_light_weighting();\n  \treturn vec4(fragmentColor.rgb * lightWeighting, fragmentColor.a);\n  }\n}\n\n// render-tex.fs\n\nuniform vec3 material_uAmbientColor;\nuniform vec3 material_uDiffuseColor;\nuniform vec3 material_uSpecularColor;\nuniform vec3 material_uEmissiveColor;\n\nuniform bool hasTexture1;\nuniform sampler2D sampler1;\n\nuniform mat4 viewMatrix;\n\nvoid apply_lighting(color) {\n  vec3 ambientLightWeighting = ambientColor;\n\n  vec3 normal = vTransformedNormal.xyz;\n  vec3 eyeDirection = normalize(-vPosition.xyz);\n\n  vec3 specularLight = vec3(0.0, 0.0, 0.0);\n  vec3 diffuseLight = vec3(0.0, 0.0, 0.0);\n\n  for (int i = 0; i < LIGHT_MAX; i++) {\n    if (i < numberPoints) {\n      vec3 transformedPointLocation = (viewMatrix * vec4(pointLocation[i], 1.0)).xyz;\n      vec3 lightDirection = normalize(transformedPointLocation - vPosition.xyz);\n\n      if (enableSpecularHighlights) {\n        vec3 reflectionDirection = reflect(-lightDirection, normal);\n        float specularLightWeighting =\n          pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininess);\n        specularLight += specularLightWeighting * pointSpecularColor[i];\n      }\n\n      float diffuseLightWeighting = max(dot(normal, lightDirection), 0.0);\n      diffuseLight += diffuseLightWeighting * pointColor[i];\n    } else {\n        break;\n    }\n  }\n\n  vec3 matAmbientColor = material_uAmbientColor * color.rgb;\n  vec3 matDiffuseColor = material_uDiffuseColor * color.rgb;\n  vec3 matSpecularColor = material_uSpecularColor * color.rgb;\n  vec3 matEmissiveColor = material_uEmissiveColor * color.rgb;\n  gl_FragColor = vec4(\n    matAmbientColor * ambientLightWeighting\n    + matDiffuseColor * diffuseLightWeighting\n    + matSpecularColor * specularLightWeighting\n    + matEmissiveColor,\n    color.a\n  );\n}\n\n/// frag-lighting\n\n  vec3 lightWeighting;\n  if (!enableLights) {\n    lightWeighting = vec3(1.0, 1.0, 1.0);\n  } else {\n    vec3 lightDirection;\n    float specularLightWeighting = 0.0;\n    float diffuseLightWeighting = 0.0;\n    vec3  specularLight = vec3(0.0, 0.0, 0.0);\n    vec3  diffuseLight = vec3(0.0, 0.0, 0.0);\n\n    vec3 transformedPointLocation;\n    vec3 normal = vTransformedNormal.xyz;\n\n    vec3 eyeDirection = normalize(-vPosition.xyz);\n    vec3 reflectionDirection;\n\n    vec3 pointWeight = vec3(0.0, 0.0, 0.0);\n\n    for (int i = 0; i < LIGHT_MAX; i++) {\n      if (i < numberPoints) {\n        transformedPointLocation = (viewMatrix * vec4(pointLocation[i], 1.0)).xyz;\n        lightDirection = normalize(transformedPointLocation - vPosition.xyz);\n\n        if (enableSpecular[i] > 0.0) {\n          reflectionDirection = reflect(-lightDirection, normal);\n          specularLightWeighting = pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininess);\n          specularLight += specularLightWeighting * pointSpecularColor[i];\n        }\n\n        diffuseLightWeighting = max(dot(normal, lightDirection), 0.0);\n        diffuseLight += diffuseLightWeighting * pointColor[i];\n      } else {\n        break;\n      }\n    }\n\n    lightWeighting = ambientColor + diffuseLight + specularLight;\n  }\n\n// reflection / refraction configs\nuniform float reflection;\nuniform float refraction;\n\n///\n  // has cube texture then apply reflection\n  // if (hasTextureCube1) {\n  //   vec3 nReflection = normalize(vReflection);\n  //   vec3 reflectionValue;\n  //   if (refraction > 0.0) {\n  //    reflectionValue = refract(nReflection, vNormal.xyz, refraction);\n  //   } else {\n  //    reflectionValue = -reflect(nReflection, vNormal.xyz);\n  //   }\n\n  //   // TODO(nico): check whether this is right.\n  //   vec4 cubeColor = textureCube(samplerCube1,\n  //       vec3(-reflectionValue.x, -reflectionValue.y, reflectionValue.z));\n  //   gl_FragColor = vec4(mix(gl_FragColor.xyz, cubeColor.xyz, reflection), 1.0);\n  // }\n"},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t={};return e.lightDirection&&(t.dirlight_uLightDirection=e.lightDirection),t}var i=n(209),o=new Float32Array([1,1,2]),a={lightDirection:o};i.a},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t={};if(void 0!==e.pickingSelectedColor)if(null===e.pickingSelectedColor)t.picking_uSelectedColorValid=0;else{var n=[e.pickingSelectedColor[0],e.pickingSelectedColor[1],e.pickingSelectedColor[2]];t.picking_uSelectedColorValid=1,t.picking_uSelectedColor=n}return void 0!==e.pickingHighlightColor&&(t.picking_uHighlightColor=e.pickingHighlightColor),void 0!==e.pickingThreshold&&(t.picking_uThreshold=e.pickingThreshold),void 0!==e.pickingActive&&(t.picking_uActive=e.pickingActive?1:0),t}var i=new Uint8Array([0,255,255,255]),o={pickingSelectedColor:null,pickingHighlightColor:i,pickingThreshold:1,pickingActive:!1};t.a={name:"picking",vs:"uniform vec3 picking_uSelectedColor;\nuniform float picking_uThreshold;\nuniform bool picking_uSelectedColorValid;\n\nvarying vec4 picking_vRGBcolor_Aselected;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    abs(vertexColor.r - picking_uSelectedColor.r) < picking_uThreshold &&\n    abs(vertexColor.g - picking_uSelectedColor.g) < picking_uThreshold &&\n    abs(vertexColor.b - picking_uSelectedColor.b) < picking_uThreshold;\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  // Do the comparison with selected item color in vertex shader as it should mean fewer compares\n  picking_vRGBcolor_Aselected.a =\n    float(isVertexPicked(pickingColor));\n\n  // Stores the picking color so that the fragment shader can render it during picking\n  picking_vRGBcolor_Aselected.rgb = pickingColor * COLOR_SCALE;\n}\n",fs:"uniform bool picking_uActive; // true during rendering to offscreen picking buffer\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nvarying vec4 picking_vRGBcolor_Aselected;\n\nconst float COLOR_SCALE = 1. / 255.;\n\n/*\n * Returns highlight color if this item is selected.\n */\nvec4 picking_filterHighlightColor(vec4 color) {\n  bool selected = bool(picking_vRGBcolor_Aselected.a);\n  return selected ? (picking_uHighlightColor * COLOR_SCALE) : color;\n}\n\n/*\n * Returns picking color if picking enabled else unmodified argument.\n */\nvec4 picking_filterPickingColor(vec4 color) {\n  vec3 pickingColor = picking_vRGBcolor_Aselected.rgb;\n  return picking_uActive ? vec4(pickingColor, 1.0) : color;\n}\n",getUniforms:r}},function(e,t,n){"use strict"},function(e,t,n){"use strict";t.a='// EXTERNAL CONSTANTS: these must match JavaScript constants in "src/core/lib/constants.js"\nconst float COORDINATE_SYSTEM_IDENTITY = 0.;\nconst float COORDINATE_SYSTEM_LNG_LAT = 1.;\nconst float COORDINATE_SYSTEM_METER_OFFSETS = 2.;\nconst float COORDINATE_SYSTEM_LNGLAT_OFFSETS = 3.;\n\nuniform float project_uCoordinateSystem;\nuniform float project_uScale;\nuniform vec3 project_uPixelsPerMeter;\nuniform vec3 project_uPixelsPerDegree;\nuniform vec3 project_uPixelsPerUnit;\nuniform vec3 project_uPixelsPerUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\n\n//\n// Scaling offsets - scales meters to "pixels"\n// Note the scalar version of project_scale is for scaling the z component only\n//\nfloat project_scale(float meters) {\n  return meters * project_uPixelsPerMeter.z;\n}\n\nvec2 project_scale(vec2 meters) {\n  return meters * project_uPixelsPerMeter.xy;\n}\n\nvec3 project_scale(vec3 meters) {\n  return meters * project_uPixelsPerMeter;\n}\n\nvec4 project_scale(vec4 meters) {\n  return vec4(meters.xyz * project_uPixelsPerMeter, meters.w);\n}\n\n//\n// Projecting normal - transform deltas from current coordinate system to\n// normals in the worldspace\n//\nvec3 project_normal(vec3 vector) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNG_LAT ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    return normalize(vector * project_uPixelsPerDegree);\n  }\n  // Apply model matrix\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  return normalize(normal_modelspace.xyz * project_uPixelsPerMeter);\n}\n\nvec4 project_offset_(vec4 offset) {\n  vec3 pixelsPerUnit = project_uPixelsPerUnit + project_uPixelsPerUnit2 * offset.y;\n  return vec4(offset.xyz * pixelsPerUnit, offset.w);\n}\n\n//\n// Projecting positions - non-linear projection: lnglats => unit tile [0-1, 0-1]\n//\nvec2 project_mercator_(vec2 lnglat) {\n  return vec2(\n    radians(lnglat.x) + PI,\n    PI - log(tan_fp32(PI * 0.25 + radians(lnglat.y) * 0.5))\n  );\n}\n\n//\n// Projects lnglats (or meter offsets, depending on mode) to pixels\n//\nvec4 project_position(vec4 position) {\n  // TODO - why not simply subtract center and fall through?\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNG_LAT) {\n    return project_uModelMatrix * vec4(\n      project_mercator_(position.xy) * WORLD_SCALE * project_uScale,\n      project_scale(position.z),\n      position.w\n    );\n  }\n\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    return project_offset_(position);\n  }\n\n  // METER_OFFSETS or IDENTITY\n  // Apply model matrix\n  vec4 position_modelspace = project_uModelMatrix * position;\n  return project_offset_(position_modelspace);\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0));\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0));\n  return projected_position.xy;\n}\n\n//\n// Projects from "world" coordinates to clip space.\n// Uses project_uViewProjectionMatrix\n//\nvec4 project_to_clipspace(vec4 position) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_METER_OFFSETS ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    // Needs to be divided with project_uPixelsPerMeter\n    position.w *= project_uPixelsPerMeter.z;\n  }\n  return project_uViewProjectionMatrix * position + project_uCenter;\n}\n\n// Returns a clip space offset that corresponds to a given number of **non-device** pixels\nvec4 project_pixel_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio;\n  return vec4(offset * project_uFocalDistance, 0.0, 0.0);\n}\n'},function(e,t,n){"use strict";t.a="float scale(float position) {\n  return project_scale(position);\n}\n\nvec2 scale(vec2 position) {\n  return project_scale(position);\n}\n\nvec3 scale(vec3 position) {\n  return project_scale(position);\n}\n\nvec4 scale(vec4 position) {\n  return project_scale(position);\n}\n\nvec2 preproject(vec2 position) {\n  return project_position(position);\n}\n\nvec3 preproject(vec3 position) {\n  return project_position(position);\n}\n\nvec4 preproject(vec4 position) {\n  return project_position(position);\n}\n\nvec4 project(vec4 position) {\n  return project_to_clipspace(position);\n}\n"},function(e,t,n){"use strict";function r(e){var t=e.viewport,n=e.coordinateSystem,r=e.coordinateOrigin,i=e.coordinateZoom,o=t.viewMatrixUncentered,a=t.viewMatrix,u=t.projectionMatrix,c=t.viewProjectionMatrix,f=void 0;switch(n){case h.a.IDENTITY:case h.a.LNGLAT:f=m;break;case h.a.LNGLAT_OFFSETS:case h.a.METER_OFFSETS:var p=Object(v.i)(r,Math.pow(2,i));f=l()([],[p[0],p[1],0,1],c),a=o||a,c=s()([],u,a),c=s()([],c,y);break;default:throw new Error("Unknown projection mode")}return{viewMatrix:a,viewProjectionMatrix:c,projectionCenter:f,cameraPos:t.cameraPosition}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.viewport,n=e.devicePixelRatio,r=void 0===n?1:n,i=e.modelMatrix,o=void 0===i?null:i,a=e.coordinateSystem,s=void 0===a?h.a.LNGLAT:a,u=e.coordinateOrigin,l=void 0===u?b:u,f=e.projectionMode,d=e.positionOrigin;return p()(t),void 0!==f&&c.a.removed("projectionMode","coordinateSystem"),void 0!==d&&c.a.removed("positionOrigin","coordinateOrigin"),Object.assign({project_uModelMatrix:o||g},x({viewport:t,devicePixelRatio:r,coordinateSystem:s,coordinateOrigin:l}))}function o(e){var t=e.viewport,n=e.devicePixelRatio,i=e.coordinateSystem,o=e.coordinateOrigin,a=t.zoom;p()(a>=0);var s=r({coordinateSystem:i,coordinateOrigin:o,coordinateZoom:a,viewport:t}),u=s.projectionCenter,l=s.viewProjectionMatrix,c=s.cameraPos;p()(l,"Viewport missing modelViewProjectionMatrix");var f=t.getDistanceScales(),d=[t.width*n,t.height*n],v={project_uCoordinateSystem:i,project_uCenter:u,project_uViewportSize:d,project_uDevicePixelRatio:n,project_uFocalDistance:t.focalDistance||1,project_uPixelsPerMeter:f.pixelsPerMeter,project_uPixelsPerDegree:f.pixelsPerDegree,project_uPixelsPerUnit:f.pixelsPerMeter,project_uPixelsPerUnit2:_,project_uScale:t.scale,project_uViewProjectionMatrix:l,project_uCameraPosition:c};if(i===h.a.METER_OFFSETS){var m=t.getDistanceScales(o);v.project_uPixelsPerUnit=m.pixelsPerMeter,v.project_uPixelsPerUnit2=m.pixelsPerMeter2}if(i===h.a.LNGLAT_OFFSETS){var y=t.getDistanceScales(o);v.project_uPixelsPerUnit=y.pixelsPerDegree,v.project_uPixelsPerUnit2=y.pixelsPerDegree2}return v}t.a=i;var a=n(56),s=n.n(a),u=n(59),l=n.n(u),c=n(10),f=n(1),p=n.n(f),h=n(51),d=n(117),v=n(21),m=[0,0,0,0],y=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],g=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],_=[0,0,0],b=[0,0,0],x=Object(d.a)(o)},function(e,t,n){"use strict";t.a="\nconst vec2 WORLD_SCALE_FP64 = vec2(81.4873275756836, 0.0000032873668232014097);\n\nuniform vec2 project64_uScale;\nuniform vec2 project_uViewProjectionMatrixFP64[16];\n\n// longitude: lnglat_fp64.xy; latitude: lnglat_fp64.zw\nvoid mercatorProject_fp64(vec4 lnglat_fp64, out vec2 out_val[2]) {\n\n#if defined(NVIDIA_FP64_WORKAROUND)\n  out_val[0] = sum_fp64(radians_fp64(lnglat_fp64.xy), PI_FP64 * ONE);\n#else\n  out_val[0] = sum_fp64(radians_fp64(lnglat_fp64.xy), PI_FP64);\n#endif\n  out_val[1] = sub_fp64(PI_FP64,\n    log_fp64(tan_fp64(sum_fp64(PI_4_FP64, radians_fp64(lnglat_fp64.zw) / 2.0))));\n  return;\n}\n\nvoid project_position_fp64(vec4 position_fp64, out vec2 out_val[2]) {\n  vec2 pos_fp64[2];\n  mercatorProject_fp64(position_fp64, pos_fp64);\n  vec2 x_fp64 = mul_fp64(pos_fp64[0], project64_uScale);\n  vec2 y_fp64 = mul_fp64(pos_fp64[1], project64_uScale);\n  out_val[0] = mul_fp64(x_fp64, WORLD_SCALE_FP64);\n  out_val[1] = mul_fp64(y_fp64, WORLD_SCALE_FP64);\n\n  return;\n}\n\nvec4 project_to_clipspace_fp64(vec2 vertex_pos_modelspace[4]) {\n  vec2 vertex_pos_clipspace[4];\n  mat4_vec4_mul_fp64(project_uViewProjectionMatrixFP64, vertex_pos_modelspace,\n    vertex_pos_clipspace);\n  return vec4(\n    vertex_pos_clipspace[0].x,\n    vertex_pos_clipspace[1].x,\n    vertex_pos_clipspace[2].x,\n    vertex_pos_clipspace[3].x\n    );\n}\n"},function(e,t,n){"use strict";t.a="#define NUM_OF_LIGHTS 2\n\n// TODO these should be using lighting_ prefix\nuniform vec3 lighting_lightPositions[16];\nuniform vec2 lighting_lightStrengths[16];\nuniform float lighting_ambientRatio;\nuniform float lighting_diffuseRatio;\nuniform float lighting_specularRatio;\n\nfloat lighting_getLightWeight(vec3 position_worldspace_vec3, vec3 normals_worldspace) {\n  float lightWeight = 0.0;\n\n  vec3 normals_worldspace_vec3 = normals_worldspace.xyz;\n\n  vec3 camera_pos_worldspace = project_uCameraPosition;\n  vec3 view_direction = normalize(camera_pos_worldspace - position_worldspace_vec3);\n\n  for (int i = 0; i < NUM_OF_LIGHTS; i++) {\n    vec3 light_position_worldspace = lighting_lightPositions[i];\n    vec3 light_direction = normalize(light_position_worldspace - position_worldspace_vec3);\n\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normals_worldspace_vec3);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normals_worldspace_vec3, halfway_direction), 0.0);\n      specular = pow(specular_angle, 32.0);\n    }\n    lambertian = max(lambertian, 0.0);\n    lightWeight += (lighting_ambientRatio + lambertian * lighting_diffuseRatio + specular * lighting_specularRatio) *\n      lighting_lightStrengths[i].x;\n  }\n\n  return lightWeight;\n}\n\n// DEPRECATED - Backwards compatibility\n\nfloat getLightWeight(vec3 position_worldspace_vec3, vec3 normals_worldspace) {\n  return lighting_getLightWeight(position_worldspace_vec3, normals_worldspace);\n}\n"},function(e,t,n){"use strict";function r(e,t){var n=t.projectFlat(e),r=c(n,2);return[r[0],r[1],(e[2]||0)*t.distanceScales.pixelsPerMeter[2]]}function i(e,t){var n=t.viewport,i=t.coordinateSystem,a=t.coordinateOrigin,u=t.modelMatrix,f=t.fromCoordinateSystem,p=t.fromCoordinateOrigin,h=c(e,3),d=h[0],v=h[1],m=h[2],y=void 0;if(u){var g=s()([],[d,v,m,1],u),_=c(g,3);d=_[0],v=_[1],m=_[2]}switch(void 0===f&&(f=i),void 0===p&&(p=a),f){case o.a.LNGLAT:y=r([d,v,m],n);break;case o.a.LNGLAT_OFFSETS:y=r([d+p[0],v+p[1],m+(p[2]||0)],n);break;case o.a.METER_OFFSETS:y=r(n.addMetersToLngLat(p,[d,v,m]),n);break;default:y=[d,v,m]}switch(i){case o.a.LNGLAT_OFFSETS:case o.a.METER_OFFSETS:var b=r(a,n);l()(y,y,b),y[1]=-y[1]}return y}t.a=i;var o=n(51),a=n(59),s=n.n(a),u=n(160),l=n.n(u),c=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(6),a=n(455),s=n(10),u=n(1),l=n.n(u),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f={NONE:0,PENDING:1,STARTED:2,ENDED:3},p=function(){},h=function(){function e(t,n){var r=n.id;i(this,e),this.id=r,this.gl=t,this.isSupported=o.k.isSupported(t),this.attributeTransitions={},this.needsRedraw=!1,this.model=null,this.isSupported?this.transformFeedback=new o.k(t):s.a.warn(0,"WebGL2 not supported by this browser. Transition animation is disabled.")}return c(e,[{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.opts=t,this.isSupported){var n=!1,r=this.attributeTransitions,i={};for(var o in e){var a=this._updateAttribute(o,e[o]);a&&(r[o]||(r[o]=a,n=!0),i[o]=a)}for(var s in r){var u=e[s];u&&u.transition||(delete r[s],n=!0)}n?this._createModel():this.model&&this.model.setTransitions(i)}}},{key:"hasAttribute",value:function(e){return e in this.attributeTransitions}},{key:"getAttributes",value:function(){var e={};for(var t in this.attributeTransitions){var n=this.attributeTransitions[t];n.buffer&&(e[t]=n.buffer)}return e}},{key:"setCurrentTime",value:function(e){if(!this.model)return!1;var t={},n={},r=this.needsRedraw;this.needsRedraw=!1;for(var i in this.attributeTransitions){var o=this.attributeTransitions[i];n[o.bufferIndex]=o.buffer;var a=1;o.state===f.PENDING&&(o.startTime=e,o.state=f.STARTED,o.onStart(o)),o.state===f.STARTED&&(a=(e-o.startTime)/o.duration,a>=1&&(a=1,o.state=f.ENDED,o.onEnd(o)),r=!0),t[o.name+"Time"]=o.easing(a)}return r&&this._runTransformFeedback({uniforms:t,buffers:n}),r}},{key:"_updateAttribute",value:function(e,t){var n=this._getTransitionSettings(t);if(n){var r=void 0,i=this.attributeTransitions[e];if(i?r=t.changed:(i={name:e,attribute:t},r=!0),r)return this._triggerTransition(i,n),i}return null}},{key:"_runTransformFeedback",value:function(e){var t=e.uniforms,n=e.buffers,i=this.model,a=this.transformFeedback;a.bindBuffers(n,{}),i.draw({uniforms:t,transformFeedback:a,parameters:r({},o.f.RASTERIZER_DISCARD,!0)})}},{key:"_createModel",value:function(){this.model&&this.model.destroy(),this.model=new a.a(this.gl,{id:this.id,transitions:this.attributeTransitions})}},{key:"_getCurrentAttributeState",value:function(e){var t=e.attribute,n=e.buffer,r=t.value,i=t.type,o=t.size;if(n){var a=new Float32Array(r);return n.getData({dstData:a}),r instanceof Float32Array||(a=new r.constructor(a)),{size:o,type:i,value:a}}return{size:o,type:i,value:r}}},{key:"_getTransitionSettings",value:function(e){var t=this.opts,n=e.transition,r=e.accessor;return n?Array.isArray(r)?r.map(function(e){return t[e]}).find(Boolean):t[r]:null}},{key:"_normalizeTransitionSettings",value:function(e){return Number.isFinite(e)&&(e={duration:e}),l()(e&&e.duration>0),{duration:e.duration,easing:e.easing||function(e){return e},onStart:e.onStart||p,onEnd:e.onEnd||p,onInterrupt:e.onInterrupt||p}}},{key:"_triggerTransition",value:function(e,t){this.needsRedraw=!0;var n=e.attribute,r=e.buffer,i=n.value,a=n.size,s=this._normalizeTransitionSettings(t),u=!r||e.bufferSize<i.length,l=this._getCurrentAttributeState(e),c=new o.b(this.gl,{size:a,data:i});u&&(r&&r.delete(),e.buffer=new o.b(this.gl,{size:a,instanced:n.instanced,data:new Float32Array(i.length),usage:o.f.DYNAMIC_COPY}),e.bufferSize=i.length),Object.assign(e,s),e.fromState=l,e.toState=c,e.state===f.STARTED&&e.onInterrupt(e),e.state=f.PENDING}}]),e}();t.a=h},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){var t=[],n=[],r=[],i=[],o=[];for(var a in e){var s=e[a],u=c[s.attribute.size];u&&(s.bufferIndex=t.length,t.push(a),n.push("attribute "+u+" "+a+"From;"),n.push("attribute "+u+" "+a+"To;"),r.push("uniform float "+a+"Time;"),i.push("varying "+u+" "+a+";"),o.push(a+" = mix("+a+"From, "+a+"To,\n        "+a+"Time);"))}return{vs:"\n#define SHADER_NAME feedback-vertex-shader\n"+n.join("\n")+"\n"+r.join("\n")+"\n"+i.join("\n")+"\n\nvoid main(void) {\n  "+o.join("\n")+"\n  gl_Position = vec4(0.0);\n}\n",fs:"#define SHADER_NAME feedback-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\n"+i.join("\n")+"\n\nvoid main(void) {\n  gl_FragColor = vec4(0.0);\n}\n",varyings:t}}var u=n(6),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c={1:"float",2:"vec2",3:"vec3",4:"vec4"},f=function(e){function t(e,n){var r=n.id,a=n.transitions;i(this,t);var l=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,Object.assign({id:r,geometry:new u.g({id:r,drawMode:u.f.POINTS}),vertexCount:0,isIndexed:!0},s(a))));return l.setTransitions(a),l}return a(t,e),l(t,[{key:"setTransitions",value:function(e){for(var t in e){var n,i=e[t],o=i.fromState,a=i.toState,s=i.attribute;this.setAttributes((n={},r(n,t+"From",o),r(n,t+"To",a),n)),this.setVertexCount(s.value.length/s.size)}}}]),t}(u.h);t.a=f},function(e,t,n){"use strict";function r(){for(var e=this,t=a(e.constructor),n=t.defaultProps,r=Object.create(n,{_layer:{enumerable:!1,value:e},_asyncProps:{enumerable:!1,value:{}}}),i=0;i<arguments.length;++i)Object.assign(r,arguments[i]);return r.data=r.data||p,Object(l.a)(r),Object.freeze(r),r}function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)&&e[t]}function o(e){var t=i(e,"layerName");return t||c.a.once(0,e.name+".layerName not specified"),t||e.name}function a(e){var t=i(e,"_mergedDefaultProps");return t?{defaultProps:t,propTypes:i(e,"_propTypes")}:s(e)}function s(e){var t=e.prototype;if(!t)return{defaultProps:{}};var n=Object.getPrototypeOf(e),r=t&&a(n)||null,o=i(e,"defaultProps")||{},s=Object(f.a)(o),l=Object.assign({},r&&r.propTypes,s.propTypes),c=u(s.defaultProps,r&&r.defaultProps,l,e);return e._mergedDefaultProps=c,e._propTypes=l,{propTypes:l,defaultProps:c}}function u(e,t,n,r){var i=Object.create(null);Object.assign(i,t,e);var a={},s=o(r);return delete e.id,Object.assign(a,{id:{configurable:!1,writable:!0,value:s}}),Object.defineProperties(i,a),i}t.a=r;var l=n(120),c=n(10),f=n(457),p=Object.freeze([])},function(e,t,n){"use strict";function r(e){var t={},n={},r=!0,o=!1,a=void 0;try{for(var s,u=Object.entries(e)[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var l=h(s.value,2),c=l[0],f=l[1],p=i(c,f);t[c]=p,n[c]=p.value}}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return{propTypes:t,defaultProps:n}}function i(e,t){switch(l(t)){case"object":return t=a(e,t),s(t);case"array":return o(e,t);case"boolean":return{name:e,type:"boolean",value:t};case"number":return u(e,t);case"function":return{name:e,type:"function",value:t};default:return{name:e,type:"unknown",value:t}}}function o(e,t){return!/color/i.test(e)||3!==t.length&&4!==t.length?{name:e,type:"array",value:t}:{name:e,type:"color",value:t}}function a(e,t){return"type"in t?Object.assign({name:e},t):"value"in t?Object.assign({name:e,type:l(t.value)},t):{name:e,type:"object",value:t}}function s(e){var t=e.type,n=d[t]||{},r=n.typeValidator;return r&&f()(r(e),"Illegal prop type"),e}function u(e,t){var n=/radius|scale|width|height|pixel|size|miter/i.test(e)&&/^((?!scale).)*$/.test(e),r=n?100:1;return{name:e,type:"number",max:Math.max(t,r),min:Math.min(t,0),value:t}}function l(e){return Array.isArray(e)||ArrayBuffer.isView(e)?"array":null===e?"null":"undefined"===typeof e?"undefined":p(e)}t.a=r;var c=n(1),f=n.n(c),p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d={boolean:{validate:function(e,t){return!0}},number:{validateType:function(e,t){return"value"in t&&(!("max"in t)||Number.isFinite(t.max))&&(!("min"in t)||Number.isFinite(t.min))},validate:function(e,t){return Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)}}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(214),o=n(1),a=n.n(o),s=function e(t){var n=t.attributeManager;r(this,e),a()(n),this.attributeManager=n,this.model=null,this.needsRedraw=!0,this.subLayers=null,this.stats=new i.a({id:"draw"})};t.a=s},function(e,t,n){"use strict";function r(e,t){var n=t.layers,r=t.viewports,i=t.x,a=t.y,l=t.radius,f=t.layerFilter,p=t.mode,d=t.onViewportActive,v=t.pickingFBO,m=t.lastPickedInfo,g=t.useDevicePixels,_=Object(h.c)({useDevicePixels:g}),b=Math.round(i*_),x=Math.round(e.canvas.height-a*_),w=Math.round(l*_),E=s({deviceX:b,deviceY:x,deviceRadius:w,deviceWidth:v.width,deviceHeight:v.height}),S=E&&o(e,{layers:n,viewports:r,onViewportActive:d,useDevicePixels:g,pickingFBO:v,deviceRect:E,layerFilter:f,redrawReason:p});return u({pickInfo:S&&c(e,{pickedColors:S,layers:n,deviceX:b,deviceY:x,deviceRadius:w,deviceRect:E})||y,lastPickedInfo:m,mode:p,layers:n,viewports:r,x:i,y:a,deviceX:b,deviceY:x,pixelRatio:_})}function i(e,t){var n=t.layers,r=t.viewports,i=t.x,a=t.y,s=t.width,u=t.height,l=t.mode,c=t.layerFilter,d=t.onViewportActive,v=t.pickingFBO,m=t.useDevicePixels,y=Object(h.c)({useDevicePixels:m}),g=Math.round(i*y),_=Math.round(e.canvas.height-a*y),b=Math.round((i+s)*y),x=Math.round(e.canvas.height-(a+u)*y),w={x:g,y:x,width:b-g,height:_-x},E=o(e,{layers:n,viewports:r,onViewportActive:d,pickingFBO:v,useDevicePixels:m,deviceRect:w,layerFilter:c,redrawReason:l}),S=f(e,{pickedColors:E,layers:n}),T=new Map;return S.forEach(function(e){var t={color:e.pickedColor,layer:null,index:e.pickedObjectIndex,picked:!0,x:i,y:a,width:s,height:u,pixelRatio:y};t=p({layer:e.pickedLayer,info:t,mode:l}),T.has(t.object)||T.set(t.object,t)}),Array.from(T.values())}function o(e,t){var n=t.layers,r=t.viewports,i=t.onViewportActive,o=t.useDevicePixels,a=t.pickingFBO,s=t.deviceRect,u=t.layerFilter,l=t.redrawReason;if(m()(s),m()(Number.isFinite(s.width)&&s.width>0,"`width` must be > 0"),m()(Number.isFinite(s.height)&&s.height>0,"`height` must be > 0"),n.filter(function(e){return e.isPickable()}).length<1)return null;Object(h.b)(e,{layers:n,viewports:r,onViewportActive:i,useDevicePixels:o,pickingFBO:a,deviceRect:s,layerFilter:u,redrawReason:l});var c=s.x,f=s.y,p=s.width,d=s.height,v=new Uint8Array(p*d*4);return a.readPixels({x:c,y:f,width:p,height:d,pixelArray:v}),v}function a(e){return e.viewports[0]}function s(e){var t=e.deviceX,n=e.deviceY,r=e.deviceRadius,i=e.deviceWidth,o=e.deviceHeight;if(!(t>=0&&n>=0&&t<i&&n<o))return null;var a=Math.max(0,t-r),s=Math.max(0,n-r);return{x:a,y:s,width:Math.min(i,t+r)-a+1,height:Math.min(o,n+r)-s+1}}function u(e){var t=e.pickInfo,n=e.lastPickedInfo,r=e.mode,i=e.layers,o=e.viewports,s=e.x,u=e.y,c=e.deviceX,f=e.deviceY,h=e.pixelRatio,d=t.pickedColor,v=t.pickedLayer,m=t.pickedObjectIndex,y=v?[v]:[];if("hover"===r){var g=n.index,_=n.layerId,b=v&&v.props.id;if(b!==_||m!==g){if(b!==_){var x=i.find(function(e){return e.props.id===_});x&&y.unshift(x)}n.layerId=b,n.index=m}}var w=a({viewports:o}),E={color:null,layer:null,index:-1,picked:!1,x:s,y:u,pixel:[s,u],lngLat:w.unproject([s,u]),devicePixel:[c,f],pixelRatio:h},S=new Map;return y.forEach(function(e){var t=Object.assign({},E);e===v&&(t.color=d,t.index=m,t.picked=!0),(t=p({layer:e,info:t,mode:r}))&&S.set(t.layer.id,t);var n=e.props.autoHighlight&&v===e?d:null,i={pickingSelectedColor:n},o=!0,a=!1,s=void 0;try{for(var u,l=e.getModels()[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){u.value.updateModuleSettings(i)}}catch(e){a=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(a)throw s}}}),l(S,r)}function l(e,t){var n=[];return e.forEach(function(e){var r=!1;switch(t){case"click":r=e.layer.props.onClick(e);break;case"hover":r=e.layer.props.onHover(e);break;case"query":break;default:throw new Error("unknown pick type")}r||n.push(e)}),n}function c(e,t){var n=t.pickedColors,r=t.layers,i=t.deviceX,o=t.deviceY,a=t.deviceRadius,s=t.deviceRect;m()(n);for(var u=s.x,l=s.y,c=s.width,f=s.height,p=a*a,h=-1,v=0,g=0;g<f;g++){var _=g+l-o,b=_*_;if(b>p)v+=4*c;else for(var x=0;x<c;x++){var w=n[v+3]-1;if(w>=0){var E=x+u-i,S=E*E+b;S<=p&&(p=S,h=v)}v+=4}}if(h>=0){var T=n[h+3]-1,A=n.slice(h,h+4),O=r[T];if(O){return{pickedColor:A,pickedLayer:O,pickedObjectIndex:O.decodePickingColor(A)}}d.a.error("Picked non-existent layer. Is picking buffer corrupt?")}return y}function f(e,t){var n=t.pickedColors,r=t.layers,i=new Map;if(n)for(var o=0;o<n.length;o+=4){var a=n[o+3]-1;if(a>=0){var s=n.slice(o,o+4),u=s.join(",");if(!i.has(u)){var l=r[a];l?i.set(u,{pickedColor:s,pickedLayer:l,pickedObjectIndex:l.decodePickingColor(s)}):d.a.error("Picked non-existent layer. Is picking buffer corrupt?")}}}return Array.from(i.values())}function p(e){for(var t=e.layer,n=e.info,r=e.mode;t&&n;){var i=n.layer||t;n.layer=t,n=t.pickLayer({info:n,mode:r,sourceLayer:i}),t=t.parentLayer}return n}t.a=r,t.b=i;var h=n(218),d=n(10),v=n(1),m=n.n(v),y={pickedColor:null,pickedLayer:null,pickedObjectIndex:-1}},function(e,t,n){"use strict";function r(e){switch("undefined"===typeof e?"undefined":o(e)){case"number":return{position:e,relative:!1};case"string":var t=e.match(a);if(t&&t.length>=3){var n="%"===t[2],r=parseFloat(t[1]);return{position:n?r/100:r,relative:n}}default:throw new Error("Could not parse position string "+e)}}function i(e,t){return e.relative?Math.round(e.position*t):e.position}t.b=r,t.a=i;var o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=/([0-9]+\.?[0-9]*)(%|px)/},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(119),s=n(10),u=n(123),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e){function t(e){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),l(t,[{key:"getSubLayers",value:function(){return this.internalState&&this.internalState.subLayers||[]}},{key:"initializeState",value:function(){}},{key:"getPickingInfo",value:function(e){return e.info}},{key:"renderLayers",value:function(){return null}},{key:"getSubLayerProps",value:function(e){var t=this.props,n=t.opacity,r=t.pickable,i=t.visible,o=t.parameters,a=t.getPolygonOffset,s=t.highlightedObjectIndex,u=t.autoHighlight,l=t.highlightColor,c=t.coordinateSystem,f=t.coordinateOrigin,p=t.modelMatrix,h={opacity:n,pickable:r,visible:i,parameters:o,getPolygonOffset:a,highlightedObjectIndex:s,autoHighlight:u,highlightColor:l,coordinateSystem:c,coordinateOrigin:f,modelMatrix:p};return e&&Object.assign(h,e,{id:this.props.id+"-"+e.id,updateTriggers:Object.assign({all:this.props.updateTriggers.all},e.updateTriggers)}),h}},{key:"_renderLayers",value:function(){var e=this.internalState.subLayers;e&&!this.needsUpdate()?s.a.log(3,"Composite layer reused subLayers "+this,this.internalState.subLayers):(e=this.renderLayers(),e=Object(u.c)(e,{filter:Boolean}),this.internalState.subLayers=e,s.a.log(2,"Composite layer rendered new subLayers "+this,e));var t=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){i.value.parentLayer=this}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}},{key:"isComposite",get:function(){return!0}}]),t}(a.a);t.a=c,c.layerName="CompositeLayer"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(15),s=n(10),u=n(46),l=n.n(u),c=n(47),f=n.n(c),p=Math.PI/180;!function(e){function t(e){var n=e.width,o=e.height,a=e.eye,u=e.lookAt,c=void 0===u?[0,0,0]:u,h=e.up,d=void 0===h?[0,1,0]:h,v=e.fovy,m=void 0===v?75:v,y=e.near,g=void 0===y?1:y,_=e.far,b=void 0===_?100:_,x=e.aspect,w=void 0===x?null:x;r(this,t),s.a.deprecated("PerspectiveViewport","PerspectiveView");var E=m*p;return w=Number.isFinite(w)?w:n/o,i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{viewMatrix:l()([],a,c,d),projectionMatrix:f()([],E,w,g,b),width:n,height:o}))}o(t,e)}(a.a)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(15),s=n(10),u=n(46),l=n.n(u),c=n(103),f=n.n(c);!function(e){function t(e){var n=e.width,o=e.height,a=e.eye,u=void 0===a?[0,0,1]:a,c=e.lookAt,p=void 0===c?[0,0,0]:c,h=e.up,d=void 0===h?[0,1,0]:h,v=e.near,m=void 0===v?1:v,y=e.far,g=void 0===y?100:y,_=e.left,b=e.top,x=e.right,w=void 0===x?null:x,E=e.bottom,S=void 0===E?null:E;return r(this,t),s.a.deprecated("OrthgraphicViewport","OrthgraphicView"),w=Number.isFinite(w)?w:_+n,S=Number.isFinite(S)?S:b+o,i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{viewMatrix:l()([],u,p,d),projectionMatrix:f()([],_,w,S,b,m,g),width:n,height:o}))}o(t,e)}(a.a)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=e.bearing,n=e.pitch;return new f({bearing:t,pitch:n}).toVector3().normalize()}var s=n(30),u=n(15),l=n(9),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=l.e.SphericalCoordinates,p=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),c(t,[{key:"_getViewport",value:function(e){var t=e.viewState,n=t.modelMatrix,r=void 0===n?null:n,i=t.bearing,o=t.up,s=void 0===o?[0,0,1]:o,c=a({bearing:i,pitch:89}),f=r?r.transformDirection(c):c,p=(new l.a).lookAt({eye:[0,0,0],center:f,up:s});return new u.a(Object.assign({},e,{zoom:null,viewMatrix:p}))}}]),t}(s.a);t.a=p,p.displayName="FirstPersonView"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=e.bearing,n=e.pitch;return new f({bearing:t,pitch:n}).toVector3().normalize()}var s=n(30),u=n(15),l=n(9),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=l.e.SphericalCoordinates,p=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),c(t,[{key:"_getViewport",value:function(e){var t=e.viewState,n=t.bearing,r=t.pitch,i=t.position,o=t.up,s=t.zoom,c=a({bearing:n,pitch:r}),f=50*s,p=c.scale(-f).multiply(new l.c(1,1,-1)),h=(new l.a).multiplyRight((new l.a).lookAt({eye:p,center:i,up:o}));return new u.a(Object.assign({},e,{zoom:null,viewMatrix:h}))}}]),t}(s.a);t.a=p,p.displayName="ThirdPersonView"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(30),s=n(62),u=function(e){function t(e){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Object.assign({},e,{type:s.a})))}return o(t,e),t}(a.a);t.a=u,u.displayName="OrbitView"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(30),s=n(15),u=n(46),l=n.n(u),c=n(47),f=n.n(c),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=Math.PI/180,d=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),p(t,[{key:"_getViewport",value:function(e){var t=e.x,n=e.y,r=e.width,i=e.height,o=e.viewState,a=o.eye,u=o.lookAt,c=void 0===u?[0,0,0]:u,p=o.up,d=void 0===p?[0,1,0]:p,v=o.fovy,m=void 0===v?75:v,y=o.near,g=void 0===y?1:y,_=o.far,b=void 0===_?100:_,x=o.aspect,w=void 0===x?null:x,E=m*h;return w=Number.isFinite(w)?w:r/i,new s.a({x:t,y:n,width:r,height:i,viewMatrix:l()([],a,c,d),projectionMatrix:f()([],E,w,g,b)})}}]),t}(a.a);t.a=d,d.displayName="PerspectiveView"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(30),s=n(15),u=n(46),l=n.n(u),c=n(103),f=n.n(c),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),p(t,[{key:"_getViewport",value:function(e){var t=e.x,n=e.y,r=e.width,i=e.height,o=e.viewState,a=o.eye,u=void 0===a?[0,0,1]:a,c=o.lookAt,p=void 0===c?[0,0,0]:c,h=o.up,d=void 0===h?[0,1,0]:h,v=o.left,m=o.top,y=o.right,g=void 0===y?null:y,_=o.bottom,b=void 0===_?null:_,x=this.props,w=x.near,E=void 0===w?1:w,S=x.far,T=void 0===S?100:S;return g=Number.isFinite(g)?g:v+r,b=Number.isFinite(b)?b:m+i,new s.a({x:t,y:n,width:r,height:i,viewMatrix:l()([],u,p,d),projectionMatrix:f()([],v,g,b,m,E,T)})}}]),t}(a.a);t.a=h,h.displayName="OrthographicView"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,n){return e<t?t:e>n?n:e}function s(e,t){return Number.isFinite(e)?e:t}var u=n(221),l=n(9),c=n(1),f=n.n(c),p=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function(e){function t(e){var n=e.width,o=e.height,a=e.position,s=e.bearing,u=e.pitch,l=e.longitude,c=e.latitude,f=e.zoom,p=(e.syncBearing,e.bounds,e.startPanEventPosition),h=e.startPanPosition,d=e.startRotateCenter,v=e.startRotateViewport,m=e.startZoomPos,y=e.startZoom;r(this,t);var g=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{width:n,height:o,position:a,bearing:s,pitch:u,longitude:l,latitude:c,zoom:f}));return g._interactiveState={startPanEventPosition:p,startPanPosition:h,startRotateCenter:d,startRotateViewport:v,startZoomPos:m,startZoom:y},g}return o(t,e),h(t,[{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"panStart",value:function(e){var t=e.pos,n=this._viewportProps,r=n.translationX,i=n.translationY;return this._getUpdatedState({startPanPosition:[r,i],startPanEventPosition:t})}},{key:"pan",value:function(e){var t=e.pos,n=e.startPos,r=this._interactiveState.startPanEventPosition||n;f()(r,"`startPanEventPosition` props is required");var i=this._interactiveState.startPanPosition||[],o=p(i,2),a=o[0],u=o[1];a=s(a,this._viewportProps.translationX),u=s(u,this._viewportProps.translationY);var l=t[0]-r[0],c=t[1]-r[1];return this._getUpdatedState({translationX:a+l,translationY:u-c})}},{key:"panEnd",value:function(){return this._getUpdatedState({startPanPosition:null,startPanPos:null})}},{key:"rotateStart",value:function(e){e.pos;return this._getUpdatedState({startRotateCenter:this._viewportProps.position,startRotateViewport:this._viewportProps})}},{key:"rotate",value:function(e){var t=e.deltaScaleX,n=e.deltaScaleY,r=this._viewportProps,i=r.bearing,o=r.pitch;return this._getUpdatedState({bearing:i+10*t,pitch:o-10*n})}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startRotateCenter:null,startRotateViewport:null})}},{key:"zoomStart",value:function(e){var t=e.pos;return this._getUpdatedState({startZoomPos:t,startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(e){var t=e.pos,n=e.startPos,r=e.scale,i=this._viewportProps,o=i.zoom,s=i.minZoom,u=i.maxZoom,l=i.width,c=i.height,f=(i.translationX,i.translationY,this._interactiveState.startZoomPos||n||t),p=a(o*r,s,u);t[0],f[0],t[1],f[1],f[0],f[1];return p/o<1?this.moveBackward():this.moveForward()}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomPos:null,startZoom:null})}},{key:"moveLeft",value:function(){var e=this._viewportProps.bearing,t=e-2;return this._getUpdatedState({bearing:t})}},{key:"moveRight",value:function(){var e=this._viewportProps.bearing,t=e+2;return this._getUpdatedState({bearing:t})}},{key:"moveForward",value:function(){var e=this._viewportProps.position,t=this.getDirection(),n=new l.c(t).normalize().scale(1);return this._getUpdatedState({position:new l.c(e).add(n)})}},{key:"moveBackward",value:function(){var e=this._viewportProps.position,t=this.getDirection(),n=new l.c(t).normalize().scale(-1);return this._getUpdatedState({position:new l.c(e).add(n)})}},{key:"moveUp",value:function(){var e=this._viewportProps.position,t=[0,0,1];return this._getUpdatedState({position:new l.c(e).add(t)})}},{key:"moveDown",value:function(){var e=this._viewportProps.position,t=e[2]>=1?[0,0,-1]:[0,0,0];return this._getUpdatedState({position:new l.c(e).add(t)})}},{key:"zoomIn",value:function(){return this._getUpdatedState({zoom:this._viewportProps.zoom+.2})}},{key:"zoomOut",value:function(){return this._getUpdatedState({zoom:this._viewportProps.zoom-.2})}},{key:"_getUpdatedState",value:function(e){return new t(Object.assign({},this._viewportProps,this._interactiveState,e))}}]),t}(u.a);t.a=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=e.bearing,n=e.pitch;return new c({bearing:t,pitch:n}).toVector3().normalize()}var s=n(15),u=n(10),l=n(9),c=l.e.SphericalCoordinates,f=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t),u.a.deprecated("FirstPersonViewport","FirstPersonView");var n=e.modelMatrix,o=void 0===n?null:n,s=e.bearing,c=e.up,f=void 0===c?[0,0,1]:c,p=a({bearing:s,pitch:89}),h=o?o.transformDirection(p):p,d=(new l.a).lookAt({eye:[0,0,0],center:h,up:f});return i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Object.assign({},e,{zoom:null,viewMatrix:d})))}return o(t,e),t}(s.a);t.a=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=e.bearing,n=e.pitch;return new c({bearing:t,pitch:n}).toVector3().normalize()}var s=n(15),u=n(10),l=n(9),c=l.e.SphericalCoordinates,f=function(e){function t(e){r(this,t),u.a.deprecated("ThirdPersonViewport","ThirdPersonView");var n=e.bearing,o=e.pitch,s=e.position,c=e.up,f=e.zoom,p=a({bearing:n,pitch:o}),h=50*f,d=p.scale(-h).multiply(new l.c(1,1,-1)),v=(new l.a).multiplyRight((new l.a).lookAt({eye:d,center:s,up:c}));return i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Object.assign({},e,{zoom:null,viewMatrix:v})))}return o(t,e),t}(s.a);t.a=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){}var o=n(212),a=n(225),s=n(127),u=n(61),l=n(6),c=n(2),f=n.n(c),p=n(1),h=n.n(p),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v={id:f.a.string,width:f.a.number.isRequired,height:f.a.number.isRequired,layers:f.a.array,views:f.a.array,viewState:f.a.object,effects:f.a.arrayOf(f.a.instanceOf(s.a)),layerFilter:f.a.func,glOptions:f.a.object,gl:f.a.object,pickingRadius:f.a.number,onWebGLInitialized:f.a.func,onBeforeRender:f.a.func,onAfterRender:f.a.func,onLayerClick:f.a.func,onLayerHover:f.a.func,useDevicePixels:f.a.bool,debug:f.a.bool,drawPickingColors:f.a.bool},m={id:"deckgl-overlay",pickingRadius:0,layerFilter:null,glOptions:{},gl:null,layers:[],effects:[],onWebGLInitialized:i,onBeforeRender:i,onAfterRender:i,onLayerClick:null,onLayerHover:null,useDevicePixels:!0,debug:!1,drawPickingColors:!1},y=function(){function e(t){r(this,e),t=Object.assign({},m,t),this.state={},this.needsRedraw=!0,this.layerManager=null,this.effectManager=null,this._onRendererInitialized=this._onRendererInitialized.bind(this),this._onRenderFrame=this._onRenderFrame.bind(this),this.canvas=this._createCanvas(t),this.animationLoop=this._createAnimationLoop(t),this.setProps(t),this.animationLoop.start()}return d(e,[{key:"setProps",value:function(e){e=Object.assign({},this.props,e),this.props=e,this._setLayerManagerProps(e);var t=e,n=t.useDevicePixels,r=t.autoResizeDrawingBuffer;this.animationLoop.setViewParameters({useDevicePixels:n,autoResizeDrawingBuffer:r})}},{key:"finalize",value:function(){this.animationLoop.stop(),this.animationLoop=null,this.layerManager&&(this.layerManager.finalize(),this.layerManager=null)}},{key:"pickObject",value:function(e){var t=e.x,n=e.y,r=e.radius,i=void 0===r?0:r,o=e.layerIds,a=void 0===o?null:o,s=this.layerManager.pickObject({x:t,y:n,radius:i,layerIds:a,mode:"query"});return s.length?s[0]:null}},{key:"pickObjects",value:function(e){var t=e.x,n=e.y,r=e.width,i=void 0===r?1:r,o=e.height,a=void 0===o?1:o,s=e.layerIds,u=void 0===s?null:s;return this.layerManager.pickObjects({x:t,y:n,width:i,height:a,layerIds:u})}},{key:"getViewports",value:function(){return this.layerManager?this.layerManager.getViewports():[]}},{key:"_createCanvas",value:function(e){var t=e.canvas;if("string"===typeof t&&(t=document.getElementById(t),h()(t)),!t){var n=e.id,r=e.width,i=e.height,o=e.style;t=document.createElement("canvas"),t.id=n,t.width=r,t.height=i,Object.assign(t.style,o);(e.parent||document.body).appendChild(t)}return t}},{key:"_createAnimationLoop",value:function(e){var t=this,n=e.width,r=e.height,i=e.gl,o=e.glOptions,a=e.debug,s=e.useDevicePixels,u=e.autoResizeDrawingBuffer;return new l.a({width:n,height:r,useDevicePixels:s,autoResizeDrawingBuffer:u,onCreateContext:function(e){return i||Object(l.l)(Object.assign({},o,{canvas:t.canvas,debug:a}))},onInitialize:this._onRendererInitialized,onRender:this._onRenderFrame,onBeforeRender:e.onBeforeRender,onAfterRender:e.onAfterRender})}},{key:"_setLayerManagerProps",value:function(e){if(this.layerManager){var t=e.width,n=e.height,r=e.views,i=e.viewState,o=e.layers,a=e.pickingRadius,s=e.onLayerClick,u=e.onLayerHover,l=e.useDevicePixels,c=e.drawPickingColors,f=e.layerFilter;this.layerManager.setParameters({width:t,height:n,views:r,viewState:i,layers:o,useDevicePixels:l,drawPickingColors:c,layerFilter:f,pickingRadius:a,onLayerClick:s,onLayerHover:u})}}},{key:"_onRendererInitialized",value:function(e){var t=e.gl,n=e.canvas;Object(l.s)(t,{blend:!0,blendFunc:[l.f.SRC_ALPHA,l.f.ONE_MINUS_SRC_ALPHA,l.f.ONE,l.f.ONE_MINUS_SRC_ALPHA],polygonOffsetFill:!0,depthTest:!0,depthFunc:l.f.LEQUAL}),this.props.onWebGLInitialized(t),this.layerManager=new o.a(t,{eventManager:new u.a(n)}),this.effectManager=new a.a({gl:t,layerManager:this.layerManager});var r=!0,i=!1,s=void 0;try{for(var c,f=this.props.effects[Symbol.iterator]();!(r=(c=f.next()).done);r=!0){var p=c.value;this.effectManager.addEffect(p)}}catch(e){i=!0,s=e}finally{try{!r&&f.return&&f.return()}finally{if(i)throw s}}this.setProps(this.props)}},{key:"_onRenderFrame",value:function(e){var t=e.gl;this.layerManager.updateLayers();var n=this.layerManager.needsRedraw({clearRedrawFlags:!0});n&&(this.props.onBeforeRender&&this.props.onBeforeRender({gl:t}),this.layerManager.drawLayers({pass:"screen",redrawReason:n,drawPickingColors:this.props.drawPickingColors}),this.props.onAfterRender&&this.props.onAfterRender({gl:t}))}}]),e}();t.a=y,y.propTypes=v,y.defaultProps=m},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(223),s=n(86),u=n(21),l=n(1),c=n.n(l),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=["longitude","latitude","zoom","bearing","pitch"],h=["latitude","longitude","zoom","width","height"],d=["bearing","pitch"],v=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.propNames=p,e}return o(t,e),f(t,[{key:"initializeProps",value:function(e,t){var n={},r={},i=!0,o=!1,a=void 0;try{for(var u,l=h[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var f=u.value,p=e[f],v=t[f];c()(Object(s.c)(p)&&Object(s.c)(v),f+" must be supplied for transition"),n[f]=p,r[f]=Object(s.b)(f,p,v)}}catch(e){o=!0,a=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw a}}var m=!0,y=!1,g=void 0;try{for(var _,b=d[Symbol.iterator]();!(m=(_=b.next()).done);m=!0){var x=_.value,w=e[x]||0,E=t[x]||0;n[x]=w,r[x]=Object(s.b)(x,w,E)}}catch(e){y=!0,g=e}finally{try{!m&&b.return&&b.return()}finally{if(y)throw g}}return{start:n,end:r}}},{key:"interpolateProps",value:function(e,t,n){var r=Object(u.c)(e,t,n),i=!0,o=!1,a=void 0;try{for(var l,c=d[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var f=l.value;r[f]=Object(s.d)(e[f],t[f],n)}}catch(e){o=!0,a=e}finally{try{!i&&c.return&&c.return()}finally{if(o)throw a}}return r}}]),t}(a.a);t.a=v},function(e,t,n){"use strict";function r(e,t){var n=a(t),r=e,s=!0,u=!1,l=void 0;try{for(var c,f=n[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var p=c.value;if(!i(r))return;r=o(r)(r,p)}}catch(e){u=!0,l=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw l}}return r}function i(e){return null!==e&&"object"===("undefined"===typeof e?"undefined":s(e))}function o(e){return Object.getPrototypeOf(e).get?l:u}function a(e){if("string"===typeof e){var t=c[e];return t||(t=e.split("."),c[e]=t),t}return Array.isArray(e)?e:[e]}t.a=r;var s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(e,t){return e[t]},l=function(e,t){return e.get(t)},c={}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e){return e.length},l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;o(this,e),this.sortedBins=this.getSortedBins(t,n),this.maxCount=this.getMaxCount(),this.binMap=this.getBinMap()}return s(e,[{key:"getSortedBins",value:function(e,t){return e.reduce(function(e,n,r){var i=t(n.points);return null!==i&&void 0!==i&&e.push({i:Number.isFinite(n.index)?n.index:r,value:i,counts:n.points.length}),e},[]).sort(function(e,t){return e.value-t.value})}},{key:"getValueRange",value:function(e){var t=a(e,2),n=t[0],r=t[1],i=this.sortedBins.length;if(!i)return[0,0];var o=Math.ceil(n/100*(i-1)),s=Math.floor(r/100*(i-1));return[this.sortedBins[o].value,this.sortedBins[s].value]}},{key:"getMaxCount",value:function(){return Math.max.apply(Math,i(this.sortedBins.map(function(e){return e.counts})))}},{key:"getBinMap",value:function(){return this.sortedBins.reduce(function(e,t){return Object.assign(e,r({},t.i,t))},{})}}]),e}();t.a=l},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=[[255,255,178],[254,217,118],[254,178,76],[253,141,60],[240,59,32],[189,0,38]]},function(e,t,n){"use strict";var r=(n(478),n(482));n.d(t,"a",function(){return r.a});var i=(n(486),n(490),n(229),n(497),n(500),n(230),n(505),n(231),n(128),n(515));n.d(t,"b",function(){return i.a});n(521)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(8),s=n(6),u=n(479),l=n(480),c=n(481),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},h=a.d.fp64LowPart,d=a.d.enable64bitSupport,v=[0,0,0,255],m={strokeWidth:1,fp64:!1,getSourcePosition:function(e){return e.sourcePosition},getTargetPosition:function(e){return e.targetPosition},getSourceColor:function(e){return e.color||v},getTargetColor:function(e){return e.color||v}},y=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),f(t,[{key:"getShaders",value:function(){return d(this.props)?{vs:l.a,fs:c.a,modules:["project64","picking"]}:{vs:u.a,fs:c.a,modules:["picking"]}}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:4,transition:!0,accessor:["getSourcePosition","getTargetPosition"],update:this.calculateInstancePositions},instanceSourceColors:{size:4,type:s.f.UNSIGNED_BYTE,transition:!0,accessor:"getSourceColor",update:this.calculateInstanceSourceColors},instanceTargetColors:{size:4,type:s.f.UNSIGNED_BYTE,transition:!0,accessor:"getTargetColor",update:this.calculateInstanceTargetColors}})}},{key:"updateAttribute",value:function(e){var t=e.props,n=e.oldProps;e.changeFlags;if(t.fp64!==n.fp64){var r=this.getAttributeManager();r.invalidateAll(),t.fp64&&t.coordinateSystem===a.a.LNGLAT?r.addInstanced({instancePositions64Low:{size:4,accessor:["getSourcePosition","getTargetPosition"],update:this.calculateInstancePositions64Low}}):r.remove(["instancePositions64Low"])}}},{key:"updateState",value:function(e){var n=e.props,r=e.oldProps,i=e.changeFlags;if(p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateState",this).call(this,{props:n,oldProps:r,changeFlags:i}),n.fp64!==r.fp64){var o=this.context.gl;this.setState({model:this._getModel(o)})}this.updateAttribute({props:n,oldProps:r,changeFlags:i})}},{key:"draw",value:function(e){var t=e.uniforms,n=this.props.strokeWidth;this.state.model.render(Object.assign({},t,{strokeWidth:n}))}},{key:"_getModel",value:function(e){for(var t=[],n=0;n<50;n++)t=t.concat([n,-1,0,n,1,0]);var r=new s.h(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new s.g({drawMode:s.f.TRIANGLE_STRIP,attributes:{positions:new Float32Array(t)}}),isInstanced:!0,shaderCache:this.context.shaderCache}));return r.setUniforms({numSegments:50}),r}},{key:"calculateInstancePositions",value:function(e){var t=this.props,n=t.data,r=t.getSourcePosition,i=t.getTargetPosition,o=e.value,a=e.size,s=0,u=!0,l=!1,c=void 0;try{for(var f,p=n[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var h=f.value,d=r(h),v=i(h);o[s+0]=d[0],o[s+1]=d[1],o[s+2]=v[0],o[s+3]=v[1],s+=a}}catch(e){l=!0,c=e}finally{try{!u&&p.return&&p.return()}finally{if(l)throw c}}}},{key:"calculateInstancePositions64Low",value:function(e){var t=this.props,n=t.data,r=t.getSourcePosition,i=t.getTargetPosition,o=e.value,a=e.size,s=0,u=!0,l=!1,c=void 0;try{for(var f,p=n[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var d=f.value,v=r(d),m=i(d);o[s+0]=h(v[0]),o[s+1]=h(v[1]),o[s+2]=h(m[0]),o[s+3]=h(m[1]),s+=a}}catch(e){l=!0,c=e}finally{try{!u&&p.return&&p.return()}finally{if(l)throw c}}}},{key:"calculateInstanceSourceColors",value:function(e){var t=this.props,n=t.data,r=t.getSourceColor,i=e.value,o=e.size,a=0,s=!0,u=!1,l=void 0;try{for(var c,f=n[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var p=c.value,h=r(p);i[a+0]=h[0],i[a+1]=h[1],i[a+2]=h[2],i[a+3]=isNaN(h[3])?255:h[3],a+=o}}catch(e){u=!0,l=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw l}}}},{key:"calculateInstanceTargetColors",value:function(e){var t=this.props,n=t.data,r=t.getTargetColor,i=e.value,o=e.size,a=0,s=!0,u=!1,l=void 0;try{for(var c,f=n[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var p=c.value,h=r(p);i[a+0]=h[0],i[a+1]=h[1],i[a+2]=h[2],i[a+3]=isNaN(h[3])?255:h[3],a+=o}}catch(e){u=!0,l=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw l}}}}]),t}(a.c);y.layerName="ArcLayer",y.defaultProps=m},function(e,t,n){"use strict";t.a="#define SHADER_NAME arc-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec4 instanceSourceColors;\nattribute vec4 instanceTargetColors;\nattribute vec4 instancePositions;\nattribute vec3 instancePickingColors;\n\nuniform float numSegments;\nuniform float strokeWidth;\nuniform float opacity;\n\nvarying vec4 vColor;\n\nfloat paraboloid(vec2 source, vec2 target, float ratio) {\n\n  vec2 x = mix(source, target, ratio);\n  vec2 center = mix(source, target, 0.5);\n\n  float dSourceCenter = distance(source, center);\n  float dXCenter = distance(x, center);\n  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);\n}\n\n// offset vector by strokeWidth pixels\n// offset_direction is -1 (left) or 1 (right)\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  vec2 offset_screenspace = dir_screenspace * offset_direction * strokeWidth / 2.0;\n  vec2 offset_clipspace = project_pixel_to_clipspace(offset_screenspace).xy;\n\n  return offset_clipspace;\n}\n\nfloat getSegmentRatio(float index) {\n  return smoothstep(0.0, 1.0, index / (numSegments - 1.0));\n}\n\nvec3 getPos(vec2 source, vec2 target, float segmentRatio) {\n  float vertex_height = paraboloid(source, target, segmentRatio);\n\n  return vec3(\n    mix(source, target, segmentRatio),\n    sqrt(max(0.0, vertex_height))\n  );\n}\n\nvoid main(void) {\n  vec2 source = project_position(instancePositions.xy);\n  vec2 target = project_position(instancePositions.zw);\n\n  float segmentIndex = positions.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n  // if it's the first point, use next - current as direction\n  // otherwise use current - prev\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n\n  vec3 currPos = getPos(source, target, segmentRatio);\n  vec3 nextPos = getPos(source, target, nextSegmentRatio);\n  vec4 curr = project_to_clipspace(vec4(currPos, 1.0));\n  vec4 next = project_to_clipspace(vec4(nextPos, 1.0));\n\n  // extrude\n  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, positions.y);\n  gl_Position = curr + vec4(offset, 0.0, 0.0);\n\n  vec4 color = mix(instanceSourceColors, instanceTargetColors, segmentRatio) / 255.;\n  vColor = vec4(color.rgb, color.a * opacity);\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n"},function(e,t,n){"use strict";t.a="#define SHADER_NAME arc-layer-vertex-shader-64\n\nattribute vec3 positions;\nattribute vec4 instanceSourceColors;\nattribute vec4 instanceTargetColors;\n\nattribute vec4 instancePositions;\nattribute vec4 instancePositions64Low;\n\nattribute vec3 instancePickingColors;\n\nuniform float numSegments;\nuniform float strokeWidth;\nuniform float opacity;\n\nvarying vec4 vColor;\n\nvec2 paraboloid_fp64(vec2 source[2], vec2 target[2], float ratio) {\n\n  vec2 x[2];\n  vec2_mix_fp64(source, target, ratio, x);\n  vec2 center[2];\n  vec2_mix_fp64(source, target, 0.5, center);\n\n  vec2 dSourceCenter = vec2_distance_fp64(source, center);\n  vec2 dXCenter = vec2_distance_fp64(x, center);\n  return mul_fp64(sum_fp64(dSourceCenter, dXCenter), sub_fp64(dSourceCenter, dXCenter));\n}\n\n// offset vector by strokeWidth pixels\n// offset_direction is -1 (left) or 1 (right)\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  vec2 offset_screenspace = dir_screenspace * offset_direction * strokeWidth / 2.0;\n  vec2 offset_clipspace = project_pixel_to_clipspace(offset_screenspace).xy;\n\n  return offset_clipspace;\n}\n\nfloat getSegmentRatio(float index) {\n  return smoothstep(0.0, 1.0, index / (numSegments - 1.0));\n}\n\nvoid get_pos_fp64(vec2 source[2], vec2 target[2], float segmentRatio, out vec2 position[4]) {\n\n  vec2 vertex_height = paraboloid_fp64(source, target, segmentRatio);\n\n  vec2 position_temp[2];\n\n  vec2_mix_fp64(source, target, segmentRatio, position_temp);\n\n  position[0] = position_temp[0];\n  position[1] = position_temp[1];\n\n  if (vertex_height.x < 0.0 || (vertex_height.x == 0.0 && vertex_height.y <= 0.0)) {\n    vertex_height = vec2(0.0, 0.0);\n  }\n\n  position[2] = sqrt_fp64(vertex_height);\n  position[3] = vec2(1.0, 0.0);\n}\n\nvoid main(void) {\n  vec4 instanceSourcePositions64 = vec4(instancePositions.x,\n    instancePositions64Low.x, instancePositions.y, instancePositions64Low.y);\n  vec4 instanceTargetPositions64 = vec4(instancePositions.z,\n    instancePositions64Low.z, instancePositions.w, instancePositions64Low.w);\n\n  vec2 projected_source_coord[2];\n  vec2 projected_target_coord[2];\n\n  project_position_fp64(instanceSourcePositions64, projected_source_coord);\n  project_position_fp64(instanceTargetPositions64, projected_target_coord);\n\n  float segmentIndex = positions.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n\n  // if it's the first point, use next - current as direction\n  // otherwise use current - prev\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n\n  vec2 curr_pos_modelspace[4];\n\n  get_pos_fp64(projected_source_coord, projected_target_coord, segmentRatio,\n    curr_pos_modelspace);\n\n  vec2 next_pos_modelspace[4];\n\n  get_pos_fp64(projected_source_coord, projected_target_coord, nextSegmentRatio,\n    next_pos_modelspace);\n\n  vec4 curr_pos_clipspace = project_to_clipspace_fp64(curr_pos_modelspace);\n  vec4 next_pos_clipspace = project_to_clipspace_fp64(next_pos_modelspace);\n\n  vec2 offset = getExtrusionOffset(next_pos_clipspace.xy - curr_pos_clipspace.xy, positions.y);\n\n  gl_Position = curr_pos_clipspace + vec4(offset, 0.0, 0.0);\n\n  vec4 color = mix(instanceSourceColors, instanceTargetColors, segmentRatio) / 255.;\n  vColor = vec4(color.rgb, color.a * opacity);\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n"},function(e,t,n){"use strict";t.a="#define SHADER_NAME arc-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n"},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(8),u=n(6),l=n(483),c=n(484),f=n(485),p=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},v=s.d.fp64LowPart,m=s.d.enable64bitSupport,y=[0,0,0,255],g=u.f.LINEAR_MIPMAP_LINEAR,_=u.f.LINEAR,b={iconAtlas:null,iconMapping:{},sizeScale:1,fp64:!1,getPosition:function(e){return e.position},getIcon:function(e){return e.icon},getColor:function(e){return e.color||y},getSize:function(e){return e.size||1},getAngle:function(e){return e.angle||0}},x=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),h(t,[{key:"getShaders",value:function(){return m(this.props)?{vs:c.a,fs:f.a,modules:["project64","picking"]}:{vs:l.a,fs:f.a,modules:["picking"]}}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,transition:!0,accessor:"getPosition",update:this.calculateInstancePositions},instanceSizes:{size:1,transition:!0,accessor:"getSize",update:this.calculateInstanceSizes},instanceOffsets:{size:2,accessor:"getIcon",update:this.calculateInstanceOffsets},instanceIconFrames:{size:4,accessor:"getIcon",update:this.calculateInstanceIconFrames},instanceColorModes:{size:1,type:u.f.UNSIGNED_BYTE,accessor:"getIcon",update:this.calculateInstanceColorMode},instanceColors:{size:4,type:u.f.UNSIGNED_BYTE,transition:!0,accessor:"getColor",update:this.calculateInstanceColors},instanceAngles:{size:1,transition:!0,accessor:"getAngle",update:this.calculateInstanceAngles}})}},{key:"updateAttribute",value:function(e){var t=e.props,n=e.oldProps;e.changeFlags;if(t.fp64!==n.fp64){var r=this.getAttributeManager();r.invalidateAll(),t.fp64&&t.coordinateSystem===s.a.LNGLAT?r.addInstanced({instancePositions64xyLow:{size:2,accessor:"getPosition",update:this.calculateInstancePositions64xyLow}}):r.remove(["instancePositions64xyLow"])}}},{key:"updateState",value:function(e){var n=this,i=e.oldProps,o=e.props,a=e.changeFlags;d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateState",this).call(this,{props:o,oldProps:i,changeFlags:a});var s=o.iconAtlas,l=o.iconMapping;if(i.iconMapping!==l){var c=this.getAttributeManager();c.invalidate("instanceOffsets"),c.invalidate("instanceIconFrames"),c.invalidate("instanceColorModes")}if(i.iconAtlas!==s)if(s instanceof u.j){var f;s.setParameters((f={},r(f,u.f.TEXTURE_MIN_FILTER,g),r(f,u.f.TEXTURE_MAG_FILTER,_),f)),this.setState({iconsTexture:s})}else"string"===typeof s&&Object(u.o)(this.context.gl,{urls:[s]}).then(function(e){var t,i=p(e,1),o=i[0];o.setParameters((t={},r(t,u.f.TEXTURE_MIN_FILTER,g),r(t,u.f.TEXTURE_MAG_FILTER,_),t)),n.setState({iconsTexture:o})});if(o.fp64!==i.fp64){var h=this.context.gl;this.setState({model:this._getModel(h)})}this.updateAttribute({props:o,oldProps:i,changeFlags:a})}},{key:"draw",value:function(e){var t=e.uniforms,n=this.props.sizeScale,r=this.state.iconsTexture;r&&this.state.model.render(Object.assign({},t,{iconsTexture:r,iconsTextureDim:[r.width,r.height],sizeScale:n}))}},{key:"_getModel",value:function(e){var t=[-1,-1,0,-1,1,0,1,1,0,1,-1,0];return new u.h(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new u.g({drawMode:u.f.TRIANGLE_FAN,attributes:{positions:new Float32Array(t)}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"calculateInstancePositions",value:function(e){var t=this.props,n=t.data,r=t.getPosition,i=e.value,o=0,a=!0,s=!1,u=void 0;try{for(var l,c=n[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value,p=r(f);i[o++]=p[0],i[o++]=p[1],i[o++]=p[2]||0}}catch(e){s=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw u}}}},{key:"calculateInstancePositions64xyLow",value:function(e){var t=this.props,n=t.data,r=t.getPosition,i=e.value,o=0,a=!0,s=!1,u=void 0;try{for(var l,c=n[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value,p=r(f);i[o++]=v(p[0]),i[o++]=v(p[1])}}catch(e){s=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw u}}}},{key:"calculateInstanceSizes",value:function(e){var t=this.props,n=t.data,r=t.getSize,i=e.value,o=0,a=!0,s=!1,u=void 0;try{for(var l,c=n[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value;i[o++]=r(f)}}catch(e){s=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw u}}}},{key:"calculateInstanceAngles",value:function(e){var t=this.props,n=t.data,r=t.getAngle,i=e.value,o=0,a=!0,s=!1,u=void 0;try{for(var l,c=n[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value;i[o++]=r(f)}}catch(e){s=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw u}}}},{key:"calculateInstanceColors",value:function(e){var t=this.props,n=t.data,r=t.getColor,i=e.value,o=0,a=!0,s=!1,u=void 0;try{for(var l,c=n[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value,p=r(f);i[o++]=p[0],i[o++]=p[1],i[o++]=p[2],i[o++]=isNaN(p[3])?255:p[3]}}catch(e){s=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw u}}}},{key:"calculateInstanceOffsets",value:function(e){var t=this.props,n=t.data,r=t.iconMapping,i=t.getIcon,o=e.value,a=0,s=!0,u=!1,l=void 0;try{for(var c,f=n[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var p=c.value,h=i(p),d=r[h]||{};o[a++]=d.width/2-d.anchorX||0,o[a++]=d.height/2-d.anchorY||0}}catch(e){u=!0,l=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw l}}}},{key:"calculateInstanceColorMode",value:function(e){var t=this.props,n=t.data,r=t.iconMapping,i=t.getIcon,o=e.value,a=0,s=!0,u=!1,l=void 0;try{for(var c,f=n[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var p=c.value,h=i(p),d=r[h]&&r[h].mask;o[a++]=d?1:0}}catch(e){u=!0,l=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw l}}}},{key:"calculateInstanceIconFrames",value:function(e){var t=this.props,n=t.data,r=t.iconMapping,i=t.getIcon,o=e.value,a=0,s=!0,u=!1,l=void 0;try{for(var c,f=n[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var p=c.value,h=i(p),d=r[h]||{};o[a++]=d.x||0,o[a++]=d.y||0,o[a++]=d.width||0,o[a++]=d.height||0}}catch(e){u=!0,l=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw l}}}}]),t}(s.c);t.a=x,x.layerName="IconLayer",x.defaultProps=b},function(e,t,n){"use strict";t.a='#define SHADER_NAME icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  vec2 iconSize = instanceIconFrames.zw;\n  // scale icon height to match instanceSize\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : instanceSizes / iconSize.y;\n\n  // scale and rotate vertex in "pixel" value and convert back to fraction in clipspace\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * sizeScale * instanceScale;\n  pixelOffset.y *= -1.0;\n\n  vec3 center = project_position(instancePositions);\n  gl_Position = project_to_clipspace(vec4(center, 1.0));\n  gl_Position += project_pixel_to_clipspace(pixelOffset);\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vTextureCoords.y = 1.0 - vTextureCoords.y;\n\n  vColor = instanceColors / 255.;\n\n  vColorMode = instanceColorModes;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n'},function(e,t,n){"use strict";t.a='#define SHADER_NAME icon-layer-vertex-shader-64\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  vec2 iconSize = instanceIconFrames.zw;\n  // scale icon height to match instanceSize\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : instanceSizes / iconSize.y;\n\n  // scale and rotate vertex in "pixel" value and convert back to fraction in clipspace\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * sizeScale * instanceScale;\n  pixelOffset.y *= -1.0;\n\n  vec4 instancePositions64xy = vec4(\n    instancePositions.x, instancePositions64xyLow.x,\n    instancePositions.y, instancePositions64xyLow.y);\n\n  vec2 projected_coord_xy[2];\n  project_position_fp64(instancePositions64xy, projected_coord_xy);\n\n  vec2 vertex_pos_modelspace[4];\n  vertex_pos_modelspace[0] = projected_coord_xy[0];\n  vertex_pos_modelspace[1] = projected_coord_xy[1];\n  vertex_pos_modelspace[2] = vec2(project_scale(instancePositions.z), 0.0);\n  vertex_pos_modelspace[3] = vec2(1.0, 0.0);\n\n  gl_Position = project_to_clipspace_fp64(vertex_pos_modelspace);\n  gl_Position += project_pixel_to_clipspace(pixelOffset);\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vTextureCoords.y = 1.0 - vTextureCoords.y;\n\n  vColor = instanceColors / 255.;\n\n  vColorMode = instanceColorModes;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n'},function(e,t,n){"use strict";t.a="#define SHADER_NAME icon-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\n\nconst float MIN_ALPHA = 0.05;\n\nvoid main(void) {\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n\n  // if colorMode == 0, use pixel color from the texture\n  // if colorMode == 1 or rendering picking buffer, use texture as transparency mask\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\n  float a = texColor.a * opacity * mix(1.0, vColor.a, vColorMode);\n\n  if (a < MIN_ALPHA) {\n    discard;\n  }\n\n  gl_FragColor = vec4(color, a);\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(8),s=n(6),u=n(487),l=n(488),c=n(489),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},h=a.d.fp64LowPart,d=a.d.enable64bitSupport,v=[0,0,0,255],m={strokeWidth:1,fp64:!1,getSourcePosition:function(e){return e.sourcePosition},getTargetPosition:function(e){return e.targetPosition},getColor:function(e){return e.color||v}},y=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),f(t,[{key:"getShaders",value:function(){return d(this.props)?{vs:l.a,fs:c.a,modules:["project64","picking"]}:{vs:u.a,fs:c.a,modules:["picking"]}}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,transition:!0,accessor:"getSourcePosition",update:this.calculateInstanceSourcePositions},instanceTargetPositions:{size:3,transition:!0,accessor:"getTargetPosition",update:this.calculateInstanceTargetPositions},instanceColors:{size:4,type:s.f.UNSIGNED_BYTE,transition:!0,accessor:"getColor",update:this.calculateInstanceColors}})}},{key:"updateAttribute",value:function(e){var t=e.props,n=e.oldProps;e.changeFlags;if(t.fp64!==n.fp64){var r=this.getAttributeManager();r.invalidateAll(),t.fp64&&t.coordinateSystem===a.a.LNGLAT?r.addInstanced({instanceSourceTargetPositions64xyLow:{size:4,accessor:["getSourcePosition","getTargetPosition"],update:this.calculateInstanceSourceTargetPositions64xyLow}}):r.remove(["instanceSourceTargetPositions64xyLow"])}}},{key:"updateState",value:function(e){var n=e.props,r=e.oldProps,i=e.changeFlags;if(p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateState",this).call(this,{props:n,oldProps:r,changeFlags:i}),n.fp64!==r.fp64){var o=this.context.gl;this.setState({model:this._getModel(o)})}this.updateAttribute({props:n,oldProps:r,changeFlags:i})}},{key:"draw",value:function(e){var t=e.uniforms,n=this.props.strokeWidth;this.state.model.render(Object.assign({},t,{strokeWidth:n}))}},{key:"_getModel",value:function(e){var t=[0,-1,0,0,1,0,1,-1,0,1,1,0];return new s.h(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new s.g({drawMode:s.f.TRIANGLE_STRIP,attributes:{positions:new Float32Array(t)}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"calculateInstanceSourcePositions",value:function(e){var t=this.props,n=t.data,r=t.getSourcePosition,i=e.value,o=e.size,a=0,s=!0,u=!1,l=void 0;try{for(var c,f=n[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var p=c.value,h=r(p);i[a+0]=h[0],i[a+1]=h[1],i[a+2]=isNaN(h[2])?0:h[2],a+=o}}catch(e){u=!0,l=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw l}}}},{key:"calculateInstanceTargetPositions",value:function(e){var t=this.props,n=t.data,r=t.getTargetPosition,i=e.value,o=e.size,a=0,s=!0,u=!1,l=void 0;try{for(var c,f=n[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var p=c.value,h=r(p);i[a+0]=h[0],i[a+1]=h[1],i[a+2]=isNaN(h[2])?0:h[2],a+=o}}catch(e){u=!0,l=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw l}}}},{key:"calculateInstanceSourceTargetPositions64xyLow",value:function(e){var t=this.props,n=t.data,r=t.getSourcePosition,i=t.getTargetPosition,o=e.value,a=e.size,s=0,u=!0,l=!1,c=void 0;try{for(var f,p=n[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var d=f.value,v=r(d),m=i(d);o[s+0]=h(v[0]),o[s+1]=h(v[1]),o[s+2]=h(m[0]),o[s+3]=h(m[1]),s+=a}}catch(e){l=!0,c=e}finally{try{!u&&p.return&&p.return()}finally{if(l)throw c}}}},{key:"calculateInstanceColors",value:function(e){var t=this.props,n=t.data,r=t.getColor,i=e.value,o=e.size,a=0,s=!0,u=!1,l=void 0;try{for(var c,f=n[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var p=c.value,h=r(p);i[a+0]=h[0],i[a+1]=h[1],i[a+2]=h[2],i[a+3]=isNaN(h[3])?255:h[3],a+=o}}catch(e){u=!0,l=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw l}}}}]),t}(a.c);y.layerName="LineLayer",y.defaultProps=m},function(e,t,n){"use strict";t.a="#define SHADER_NAME line-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 instanceSourcePositions;\nattribute vec3 instanceTargetPositions;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\nuniform float strokeWidth;\nuniform float opacity;\n\nvarying vec4 vColor;\n\n// offset vector by strokeWidth pixels\n// offset_direction is -1 (left) or 1 (right)\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  vec2 offset_screenspace = dir_screenspace * offset_direction * strokeWidth / 2.0;\n  vec2 offset_clipspace = project_pixel_to_clipspace(offset_screenspace).xy;\n\n  return offset_clipspace;\n}\n\nvoid main(void) {\n  // Position\n  vec3 sourcePos = project_position(instanceSourcePositions);\n  vec3 targetPos = project_position(instanceTargetPositions);\n  vec4 source = project_to_clipspace(vec4(sourcePos, 1.0));\n  vec4 target = project_to_clipspace(vec4(targetPos, 1.0));\n\n  // linear interpolation of source & target to pick right coord\n  float segmentIndex = positions.x;\n  vec4 p = mix(source, target, segmentIndex);\n\n  // extrude\n  vec2 offset = getExtrusionOffset(target.xy - source.xy, positions.y);\n  gl_Position = p + vec4(offset, 0.0, 0.0);\n\n  // Color\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n"},function(e,t,n){"use strict";t.a="#define SHADER_NAME line-layer-vertex-shader-64\n\nattribute vec3 positions;\nattribute vec3 instanceSourcePositions;\nattribute vec3 instanceTargetPositions;\nattribute vec4 instanceSourceTargetPositions64xyLow;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\nuniform float strokeWidth;\nuniform float opacity;\n\nvarying vec4 vColor;\n\n// offset vector by strokeWidth pixels\n// offset_direction is -1 (left) or 1 (right)\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  vec2 offset_screenspace = dir_screenspace * offset_direction * strokeWidth / 2.0;\n  vec2 offset_clipspace = project_pixel_to_clipspace(offset_screenspace).xy;\n\n  return offset_clipspace;\n}\n\nvoid main(void) {\n  // Position\n  vec4 instanceSourcePositions64 = vec4(\n    instanceSourcePositions.x, instanceSourceTargetPositions64xyLow.x,\n    instanceSourcePositions.y, instanceSourceTargetPositions64xyLow.y);\n\n  vec4 instanceTargetPositions64 = vec4(\n    instanceTargetPositions.x, instanceSourceTargetPositions64xyLow.z,\n    instanceTargetPositions.y, instanceSourceTargetPositions64xyLow.w);\n\n  vec2 projected_source_coord[2];\n  vec2 projected_target_coord[2];\n\n  project_position_fp64(instanceSourcePositions64, projected_source_coord);\n  project_position_fp64(instanceTargetPositions64, projected_target_coord);\n\n  vec2 source_pos_modelspace[4];\n  source_pos_modelspace[0] =  projected_source_coord[0];\n  source_pos_modelspace[1] =  projected_source_coord[1];\n  source_pos_modelspace[2] = vec2(project_scale(instanceSourcePositions.z), 0.0);\n  source_pos_modelspace[3] = vec2(1.0, 0.0);\n\n  vec4 source_pos_clipspace = project_to_clipspace_fp64(source_pos_modelspace);\n\n  vec2 target_pos_modelspace[4];\n  target_pos_modelspace[0] =  projected_target_coord[0];\n  target_pos_modelspace[1] =  projected_target_coord[1];\n  target_pos_modelspace[2] = vec2(project_scale(instanceTargetPositions.z), 0.0);\n  target_pos_modelspace[3] = vec2(1.0, 0.0);\n\n  vec4 target_pos_clipspace = project_to_clipspace_fp64(target_pos_modelspace);\n\n  float segmentIndex = positions.x;\n  vec4 p = mix(source_pos_clipspace, target_pos_clipspace, segmentIndex);\n\n  vec2 offset = getExtrusionOffset(target_pos_clipspace.xy - source_pos_clipspace.xy, positions.y);\n\n  gl_Position = p + vec4(offset, 0.0, 0.0);\n\n  // Color\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n"},function(e,t,n){"use strict";t.a="#define SHADER_NAME line-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(8),s=n(6),u=n(491),l=n(492),c=n(493),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},h=a.d.fp64LowPart,d=a.d.enable64bitSupport,v=[0,0,0,255],m={radiusPixels:10,fp64:!1,getPosition:function(e){return e.position},getNormal:function(e){return e.normal},getColor:function(e){return e.color||v},lightSettings:{}},y=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),f(t,[{key:"getShaders",value:function(e){var t=this.context.shaderCache;return d(this.props)?{vs:l.a,fs:c.a,modules:["project64","lighting","picking"],shaderCache:t}:{vs:u.a,fs:c.a,modules:["lighting","picking"],shaderCache:t}}},{key:"initializeState",value:function(){this.state.attributeManager.addInstanced({instancePositions:{size:3,transition:!0,accessor:"getPosition",update:this.calculateInstancePositions},instanceNormals:{size:3,transition:!0,accessor:"getNormal",defaultValue:1,update:this.calculateInstanceNormals},instanceColors:{size:4,type:s.f.UNSIGNED_BYTE,transition:!0,accessor:"getColor",update:this.calculateInstanceColors}})}},{key:"updateAttribute",value:function(e){var t=e.props,n=e.oldProps;e.changeFlags;if(t.fp64!==n.fp64){var r=this.getAttributeManager();r.invalidateAll(),t.fp64&&t.coordinateSystem===a.a.LNGLAT?r.addInstanced({instancePositions64xyLow:{size:2,accessor:"getPosition",update:this.calculateInstancePositions64xyLow}}):r.remove(["instancePositions64xyLow"])}}},{key:"updateState",value:function(e){var n=e.props,r=e.oldProps,i=e.changeFlags;if(p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateState",this).call(this,{props:n,oldProps:r,changeFlags:i}),n.fp64!==r.fp64){var o=this.context.gl;this.setState({model:this._getModel(o)})}this.updateAttribute({props:n,oldProps:r,changeFlags:i})}},{key:"draw",value:function(e){var t=e.uniforms,n=this.props.radiusPixels;this.state.model.render(Object.assign({},t,{radiusPixels:n}))}},{key:"_getModel",value:function(e){for(var t=[],n=0;n<3;n++){var r=n/3*Math.PI*2;t.push(2*Math.cos(r),2*Math.sin(r),0)}return new s.h(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new s.g({drawMode:s.f.TRIANGLES,attributes:{positions:new Float32Array(t)}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"calculateInstancePositions",value:function(e){var t=this.props,n=t.data,r=t.getPosition,i=e.value,o=0,a=!0,s=!1,u=void 0;try{for(var l,c=n[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value,p=r(f);i[o++]=p[0],i[o++]=p[1],i[o++]=p[2]||0}}catch(e){s=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw u}}}},{key:"calculateInstancePositions64xyLow",value:function(e){var t=this.props,n=t.data,r=t.getPosition,i=e.value,o=0,a=!0,s=!1,u=void 0;try{for(var l,c=n[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value,p=r(f);i[o++]=h(p[0]),i[o++]=h(p[1])}}catch(e){s=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw u}}}},{key:"calculateInstanceNormals",value:function(e){var t=this.props,n=t.data,r=t.getNormal,i=e.value,o=0,a=!0,s=!1,u=void 0;try{for(var l,c=n[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value,p=r(f);i[o++]=p[0],i[o++]=p[1],i[o++]=p[2]}}catch(e){s=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw u}}}},{key:"calculateInstanceColors",value:function(e){var t=this.props,n=t.data,r=t.getColor,i=e.value,o=0,a=!0,s=!1,u=void 0;try{for(var l,c=n[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value,p=r(f);i[o++]=p[0],i[o++]=p[1],i[o++]=p[2],i[o++]=isNaN(p[3])?255:p[3]}}catch(e){s=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw u}}}}]),t}(a.c);y.layerName="PointCloudLayer",y.defaultProps=m},function(e,t,n){"use strict";t.a="#define SHADER_NAME point-cloud-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instanceNormals;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusPixels;\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\n\nvoid main(void) {\n  // position on the containing square in [-1, 1] space\n  unitPosition = positions.xy;\n\n  // Find the center of the point and add the current vertex\n  vec4 position_worldspace = vec4(project_position(instancePositions), 1.0);\n  gl_Position = project_to_clipspace(position_worldspace) ;\n  gl_Position += project_pixel_to_clipspace(positions.xy * radiusPixels);\n\n  // Apply lighting\n  float lightWeight = getLightWeight(position_worldspace.xyz, // the w component is always 1.0\n    project_normal(instanceNormals));\n\n  // Apply opacity to instance color, or return instance picking color\n  vColor = vec4(lightWeight * instanceColors.rgb, instanceColors.a * opacity) / 255.;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n"},function(e,t,n){"use strict";t.a="#define SHADER_NAME point-cloud-layer-vertex-shader-64\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute vec3 instanceNormals;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusPixels;\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\n\nvoid main(void) {\n  // position on the containing square in [-1, 1] space\n  unitPosition = positions.xy;\n\n  vec4 instancePositions64xy = vec4(\n    instancePositions.x, instancePositions64xyLow.x,\n    instancePositions.y, instancePositions64xyLow.y);\n\n  vec2 projected_coord_xy[2];\n  project_position_fp64(instancePositions64xy, projected_coord_xy);\n\n  vec2 vertex_pos_modelspace[4];\n  vertex_pos_modelspace[0] = projected_coord_xy[0];\n  vertex_pos_modelspace[1] = projected_coord_xy[1];\n  vertex_pos_modelspace[2] = vec2(project_scale(instancePositions.z), 0.0);\n  vertex_pos_modelspace[3] = vec2(1.0, 0.0);\n\n  gl_Position = project_to_clipspace_fp64(vertex_pos_modelspace);\n  gl_Position += project_pixel_to_clipspace(positions.xy * radiusPixels);\n\n  vec4 position_worldspace = vec4(\n    projected_coord_xy[0].x, projected_coord_xy[1].x,\n    project_scale(instancePositions.z), 1.0);\n\n  // Apply lighting\n  float lightWeight = getLightWeight(position_worldspace.xyz, // the w component is always 1.0\n    project_normal(instanceNormals));\n\n  // Apply opacity to instance color, or return instance picking color\n  vColor = vec4(lightWeight * instanceColors.rgb, instanceColors.a * opacity) / 255.;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n"},function(e,t,n){"use strict";t.a="#define SHADER_NAME point-cloud-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\n\nvoid main(void) {\n\n  float distToCenter = length(unitPosition);\n\n  if (distToCenter > 1.0) {\n    discard;\n  }\n\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n"},function(e,t,n){"use strict";t.a="#define SHADER_NAME scatterplot-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute float instanceRadius;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusScale;\nuniform float radiusMinPixels;\nuniform float radiusMaxPixels;\nuniform float outline;\nuniform float strokeWidth;\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\n\nvoid main(void) {\n  // Multiply out radius and clamp to limits\n  float outerRadiusPixels = clamp(\n    project_scale(radiusScale * instanceRadius),\n    radiusMinPixels, radiusMaxPixels\n  );\n  // outline is centered at the radius\n  // outer radius needs to offset by half stroke width\n  outerRadiusPixels += outline * strokeWidth / 2.0;\n\n  // position on the containing square in [-1, 1] space\n  unitPosition = positions.xy;\n  // 0 - solid circle, 1 - stroke with lineWidth=0\n  innerUnitRadius = outline * (1.0 - strokeWidth / outerRadiusPixels);\n\n  // Find the center of the point and add the current vertex\n  vec3 center = project_position(instancePositions);\n  vec3 vertex = positions * outerRadiusPixels;\n  gl_Position = project_to_clipspace(vec4(center + vertex, 1.0));\n\n  // Apply opacity to instance color, or return instance picking color\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n"},function(e,t,n){"use strict";t.a="#define SHADER_NAME scatterplot-layer-vertex-shader-64\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute float instanceRadius;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\n// Only one-dimensional arrays may be declared in GLSL ES 1.0. specs p.24\nuniform float opacity;\nuniform float radiusScale;\nuniform float radiusMinPixels;\nuniform float radiusMaxPixels;\nuniform float outline;\nuniform float strokeWidth;\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\n\nvoid main(void) {\n  // Multiply out radius and clamp to limits\n  float outerRadiusPixels = clamp(\n    project_scale(radiusScale * instanceRadius),\n    radiusMinPixels, radiusMaxPixels\n  );\n\n  // outline is centered at the radius\n  // outer radius needs to offset by half stroke width\n  outerRadiusPixels += outline * strokeWidth / 2.0;\n\n  // position on the containing square in [-1, 1] space\n  unitPosition = positions.xy;\n  // 0 - solid circle, 1 - stroke with lineWidth=0\n  innerUnitRadius = outline * (1.0 - strokeWidth / outerRadiusPixels);\n\n  vec4 instancePositions64xy = vec4(\n    instancePositions.x, instancePositions64xyLow.x,\n    instancePositions.y, instancePositions64xyLow.y);\n\n  vec2 projected_coord_xy[2];\n  project_position_fp64(instancePositions64xy, projected_coord_xy);\n\n  vec2 vertex_pos_localspace[4];\n  vec4_fp64(vec4(positions * outerRadiusPixels, 0.0), vertex_pos_localspace);\n\n  vec2 vertex_pos_modelspace[4];\n  vertex_pos_modelspace[0] = sum_fp64(vertex_pos_localspace[0], projected_coord_xy[0]);\n  vertex_pos_modelspace[1] = sum_fp64(vertex_pos_localspace[1], projected_coord_xy[1]);\n  vertex_pos_modelspace[2] = sum_fp64(vertex_pos_localspace[2],\n    vec2(project_scale(instancePositions.z), 0.0));\n  vertex_pos_modelspace[3] = vec2(1.0, 0.0);\n\n  gl_Position = project_to_clipspace_fp64(vertex_pos_modelspace);\n\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n"},function(e,t,n){"use strict";t.a="#define SHADER_NAME scatterplot-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\n\nvoid main(void) {\n\n  float distToCenter = length(unitPosition);\n\n  if (distToCenter > 1.0 || distToCenter < innerUnitRadius) {\n    discard;\n  }\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(8),s=n(6),u=n(498),l=n(499),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},p={cellSizePixels:100,minColor:[0,0,0,255],maxColor:[0,255,0,255],getPosition:function(e){return e.position},getWeight:function(e){return 1}},h=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),c(t,[{key:"getShaders",value:function(){return{vs:u.a,fs:l.a,modules:["picking"]}}},{key:"initializeState",value:function(){var e=this.getAttributeManager(),t=this.context.gl;e.addInstanced({instancePositions:{size:3,update:this.calculateInstancePositions},instanceCount:{size:1,accessor:["getPosition","getWeight"],update:this.calculateInstanceCount}}),this.setState({model:this._getModel(t)})}},{key:"shouldUpdateState",value:function(e){return e.changeFlags.somethingChanged}},{key:"updateState",value:function(e){var n=e.oldProps,r=e.props,i=e.changeFlags;f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateState",this).call(this,{props:r,oldProps:n,changeFlags:i}),(r.cellSizePixels!==n.cellSizePixels||i.viewportChanged)&&this.updateCell()}},{key:"draw",value:function(e){var t=e.uniforms,n=this.props,r=n.minColor,i=n.maxColor,o=n.parameters,a=void 0===o?{}:o,s=this.state,u=s.model,l=s.cellScale,c=s.maxCount;t=Object.assign({},t,{minColor:r,maxColor:i,cellScale:l,maxCount:c}),u.draw({uniforms:t,parameters:Object.assign({depthTest:!1,depthMask:!1},a)})}},{key:"_getModel",value:function(e){return new s.h(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new s.g({drawMode:s.f.TRIANGLE_FAN,attributes:{vertices:new Float32Array([0,0,0,1,0,0,1,1,0,0,1,0])}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"updateCell",value:function(){var e=this.context.viewport,t=e.width,n=e.height,r=this.props.cellSizePixels,i=new Float32Array([(r-2)/t*2,-(r-2)/n*2,1]),o=Math.ceil(t/r),a=Math.ceil(n/r);this.setState({cellScale:i,numCol:o,numRow:a,numInstances:o*a}),this.getAttributeManager().invalidateAll()}},{key:"calculateInstancePositions",value:function(e,t){for(var n=t.numInstances,r=this.context.viewport,i=r.width,o=r.height,a=this.props.cellSizePixels,s=this.state.numCol,u=e.value,l=e.size,c=0;c<n;c++){var f=c%s,p=Math.floor(c/s);u[c*l+0]=f*a/i*2-1,u[c*l+1]=1-p*a/o*2,u[c*l+2]=0}}},{key:"calculateInstanceCount",value:function(e){var t=this.props,n=t.data,r=t.cellSizePixels,i=t.getPosition,o=t.getWeight,a=this.state,s=a.numCol,u=a.numRow,l=e.value,c=0;l.fill(0);var f=!0,p=!1,h=void 0;try{for(var d,v=n[Symbol.iterator]();!(f=(d=v.next()).done);f=!0){var m=d.value,y=this.project(i(m)),g=Math.floor(y[0]/r),_=Math.floor(y[1]/r);if(g>=0&&g<s&&_>=0&&_<u){var b=g+_*s;l[b]+=o(m),l[b]>c&&(c=l[b])}}}catch(e){p=!0,h=e}finally{try{!f&&v.return&&v.return()}finally{if(p)throw h}}this.setState({maxCount:c})}}]),t}(a.c);h.layerName="ScreenGridLayer",h.defaultProps=p},function(e,t,n){"use strict";t.a="#define SHADER_NAME screen-grid-layer-vertex-shader\n\nattribute vec3 vertices;\nattribute vec3 instancePositions;\nattribute float instanceCount;\nattribute vec3 instancePickingColors;\n\nuniform float maxCount;\nuniform float opacity;\nuniform vec4 minColor;\nuniform vec4 maxColor;\nuniform vec3 cellScale;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  vec4 color = mix(minColor, maxColor, instanceCount / maxCount) / 255.;\n\n  vColor = vec4(color.rgb, color.a * opacity);\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n\n  gl_Position = vec4(instancePositions + vertices * cellScale, 1.);\n}\n"},function(e,t,n){"use strict";t.a="#define SHADER_NAME screen-grid-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(){}var s=n(8),u=n(230),l=n(504),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},p=s.d.BinSorter,h=s.d.defaultColorRange,d=s.d.getQuantizeScale,v=s.d.getLinearScale,m={colorDomain:null,colorRange:h,getColorValue:function(e){return e.length},lowerPercentile:{type:"number",min:0,max:100,value:0},upperPercentile:{type:"number",min:0,max:100,value:100},onSetColorDomain:a,elevationDomain:null,elevationRange:[0,1e3],getElevationValue:function(e){return e.length},elevationLowerPercentile:{type:"number",min:0,max:100,value:0},elevationUpperPercentile:{type:"number",min:0,max:100,value:100},elevationScale:1,onSetElevationDomain:a,cellSize:{type:"number",min:0,max:1e3,value:1e3},coverage:{type:"number",min:0,max:1,value:1},getPosition:function(e){return e.position},extruded:!1,fp64:!1,lightSettings:{}},y=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),c(t,[{key:"initializeState",value:function(){this.state={layerData:[],sortedColorBins:null,sortedElevationBins:null,colorValueDomain:null,elevationValueDomain:null,colorScaleFunc:a,elevationScaleFunc:a,dimensionUpdaters:this.getDimensionUpdaters()}}},{key:"updateState",value:function(e){var t=this,n=e.oldProps,r=e.props,i=e.changeFlags,o=this.getDimensionChanges(n,r);i.dataChanged||this.needsReProjectPoints(n,r)?this.getLayerData():o&&o.forEach(function(e){return"function"===typeof e&&e.apply(t)})}},{key:"needsReProjectPoints",value:function(e,t){return e.cellSize!==t.cellSize}},{key:"getDimensionUpdaters",value:function(){return{getColor:[{id:"value",triggers:["getColorValue"],updater:this.getSortedColorBins},{id:"domain",triggers:["lowerPercentile","upperPercentile"],updater:this.getColorValueDomain},{id:"scaleFunc",triggers:["colorDomain","colorRange"],updater:this.getColorScale}],getElevation:[{id:"value",triggers:["getElevationValue"],updater:this.getSortedElevationBins},{id:"domain",triggers:["elevationLowerPercentile","elevationUpperPercentile"],updater:this.getElevationValueDomain},{id:"scaleFunc",triggers:["elevationDomain","elevationRange"],updater:this.getElevationScale}]}}},{key:"getDimensionChanges",value:function(e,t){var n=this.state.dimensionUpdaters,r=[];for(var i in n){var o=n[i].find(function(n){return n.triggers.some(function(n){return e[n]!==t[n]})});o&&r.push(o.updater)}return r.length?r:null}},{key:"getPickingInfo",value:function(e){var t=e.info,n=this.state,r=n.sortedColorBins,i=n.sortedElevationBins,o=t.picked&&t.index>-1,a=null;if(o){var s=this.state.layerData[t.index],u=r.binMap[s.index]&&r.binMap[s.index].value,l=i.binMap[s.index]&&i.binMap[s.index].value;a=Object.assign({colorValue:u,elevationValue:l},s)}return Object.assign(t,{picked:Boolean(a),object:a})}},{key:"getUpdateTriggers",value:function(){var e=this,t=this.state.dimensionUpdaters,n={};for(var r in t)!function(r){n[r]={};var i=!0,o=!1,a=void 0;try{for(var s,u=t[r][Symbol.iterator]();!(i=(s=u.next()).done);i=!0){s.value.triggers.forEach(function(t){n[r][t]=e.props[t]})}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}}(r);return n}},{key:"getLayerData",value:function(){var e=this.props,t=e.data,n=e.cellSize,r=e.getPosition,i=Object(l.a)(t,n,r),o=i.layerData;this.setState({layerData:o}),this.getSortedBins()}},{key:"getValueDomain",value:function(){this.getColorValueDomain(),this.getElevationValueDomain()}},{key:"getSortedBins",value:function(){this.getSortedColorBins(),this.getSortedElevationBins()}},{key:"getSortedColorBins",value:function(){var e=this.props.getColorValue,t=new p(this.state.layerData||[],e);this.setState({sortedColorBins:t}),this.getColorValueDomain()}},{key:"getSortedElevationBins",value:function(){var e=this.props.getElevationValue,t=new p(this.state.layerData||[],e);this.setState({sortedElevationBins:t}),this.getElevationValueDomain()}},{key:"getColorValueDomain",value:function(){var e=this.props,t=e.lowerPercentile,n=e.upperPercentile,r=e.onSetColorDomain;this.state.colorValueDomain=this.state.sortedColorBins.getValueRange([t,n]),"function"===typeof r&&r(this.state.colorValueDomain),this.getColorScale()}},{key:"getElevationValueDomain",value:function(){var e=this.props,t=e.elevationLowerPercentile,n=e.elevationUpperPercentile,r=e.onSetElevationDomain;this.state.elevationValueDomain=this.state.sortedElevationBins.getValueRange([t,n]),"function"===typeof r&&r(this.state.elevationValueDomain),this.getElevationScale()}},{key:"getColorScale",value:function(){var e=this.props.colorRange,t=this.props.colorDomain||this.state.colorValueDomain;this.state.colorScaleFunc=d(t,e)}},{key:"getElevationScale",value:function(){var e=this.props.elevationRange,t=this.props.elevationDomain||this.state.elevationValueDomain;this.state.elevationScaleFunc=v(t,e)}},{key:"_onGetSublayerColor",value:function(e){var t=this.state,n=t.sortedColorBins,r=t.colorScaleFunc,i=t.colorValueDomain,o=n.binMap[e.index]&&n.binMap[e.index].value,a=this.props.colorDomain||i,s=o>=a[0]&&o<=a[a.length-1],u=s?r(o):[0,0,0,0];return u[3]=Number.isFinite(u[3])?u[3]:255,u}},{key:"_onGetSublayerElevation",value:function(e){var t=this.state,n=t.sortedElevationBins,r=t.elevationScaleFunc,i=t.elevationValueDomain,o=n.binMap[e.index]&&n.binMap[e.index].value,a=this.props.elevationDomain||i;return o>=a[0]&&o<=a[a.length-1]?r(o):-1}},{key:"getSubLayerProps",value:function(){var e=this.props,n=e.elevationScale,r=e.fp64,i=e.extruded,o=e.cellSize,a=e.coverage,s=e.lightSettings;return f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getSubLayerProps",this).call(this,{id:"grid-cell",data:this.state.layerData,fp64:r,cellSize:o,coverage:a,lightSettings:s,elevationScale:n,extruded:i,getColor:this._onGetSublayerColor.bind(this),getElevation:this._onGetSublayerElevation.bind(this),updateTriggers:this.getUpdateTriggers()})}},{key:"getSubLayerClass",value:function(){return u.a}},{key:"renderLayers",value:function(){return new(this.getSubLayerClass())(this.getSubLayerProps())}}]),t}(s.b);y.layerName="GridLayer",y.defaultProps=m},function(e,t,n){"use strict";t.a="#define SHADER_NAME grid-cell-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 normals;\n\nattribute vec4 instancePositions;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\n// Custom uniforms\nuniform float extruded;\nuniform float cellSize;\nuniform float coverage;\nuniform float opacity;\nuniform float elevationScale;\n\n// A magic number to scale elevation so that 1 unit approximate to 1 meter\n#define ELEVATION_SCALE 0.8\n\n// Result\nvarying vec4 vColor;\n\nvoid main(void) {\n\n  vec2 topLeftPos = project_position(instancePositions.xy);\n\n  // if ahpha == 0.0 or z < 0.0, do not render element\n  float noRender = float(instanceColors.a == 0.0 || instancePositions.w < 0.0);\n  float finalCellSize = cellSize * mix(1.0, 0.0, noRender);\n\n  // cube gemoetry vertics are between -1 to 1, scale and transform it to between 0, 1\n  vec2 pos = topLeftPos + vec2(\n  (positions.x * coverage + 1.0) / 2.0 * finalCellSize,\n  (positions.y * coverage - 1.0) / 2.0 * finalCellSize);\n\n  float elevation = 0.0;\n\n  if (extruded > 0.5) {\n    elevation = project_scale(instancePositions.w  * (positions.z + 1.0) *\n      ELEVATION_SCALE * elevationScale);\n  }\n\n  // extrude positions\n  vec3 extrudedPosition = vec3(pos.xy, elevation + 1.0);\n  vec4 position_worldspace = vec4(extrudedPosition, 1.0);\n  gl_Position = project_to_clipspace(position_worldspace);\n\n  float lightWeight = 1.0;\n\n  if (extruded > 0.5) {\n    lightWeight = getLightWeight(\n      position_worldspace.xyz, // the w component is always 1.0\n      normals\n    );\n  }\n\n  vec3 lightWeightedColor = lightWeight * instanceColors.rgb;\n  vec4 color = vec4(lightWeightedColor, instanceColors.a * opacity) / 255.0;\n  vColor = color;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n"},function(e,t,n){"use strict";t.a="#define SHADER_NAME grid-cell-layer-vertex-shader-64\n\nattribute vec3 positions;\nattribute vec3 normals;\n\nattribute vec4 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\n// Custom uniforms\nuniform float extruded;\nuniform float cellSize;\nuniform float coverage;\nuniform float opacity;\nuniform float elevationScale;\n\n// A magic number to scale elevation so that 1 unit approximate to 1 meter\n#define ELEVATION_SCALE 0.8\n\n// Result\nvarying vec4 vColor;\n\nvoid main(void) {\n  vec4 instancePositions64xy = vec4(\n    instancePositions.x,\n    instancePositions64xyLow.x,\n    instancePositions.y,\n    instancePositions64xyLow.y);\n\n  vec2 projected_coord_xy[2];\n  project_position_fp64(instancePositions64xy, projected_coord_xy);\n\n  // if ahpha == 0.0 or z < 0.0, do not render element\n  float noRender = float(instanceColors.a == 0.0 || instancePositions.w < 0.0);\n  float finalCellSize = cellSize * mix(1.0, 0.0, noRender);\n\n  projected_coord_xy[0] = sum_fp64(projected_coord_xy[0],\n    vec2((positions.x * coverage + 1.0) * finalCellSize / 2.0, 0.0));\n  projected_coord_xy[1] = sum_fp64(projected_coord_xy[1],\n    vec2((positions.y * coverage - 1.0) * finalCellSize / 2.0, 0.0));\n\n  float elevation = 0.0;\n\n  if (extruded > 0.5) {\n    elevation = project_scale(instancePositions.w  * (positions.z + 1.0) *\n      ELEVATION_SCALE * elevationScale) + 1.0;\n  }\n\n  vec2 vertex_pos_modelspace[4];\n  vertex_pos_modelspace[0] = projected_coord_xy[0];\n  vertex_pos_modelspace[1] = projected_coord_xy[1];\n  vertex_pos_modelspace[2] = vec2(elevation, 0.0);\n  vertex_pos_modelspace[3] = vec2(1.0, 0.0);\n\n  vec4 position_worldspace = vec4(\n    vertex_pos_modelspace[0].x, vertex_pos_modelspace[1].x,\n    vertex_pos_modelspace[2].x, vertex_pos_modelspace[3].x);\n\n  gl_Position = project_to_clipspace_fp64(vertex_pos_modelspace);\n\n  float lightWeight = 1.0;\n\n  if (extruded > 0.5) {\n    lightWeight = getLightWeight(\n      position_worldspace.xyz, // the w component is always 1.0\n      normals\n    );\n  }\n\n  vec3 lightWeightedColor = lightWeight * instanceColors.rgb;\n  vec4 color = vec4(lightWeightedColor, instanceColors.a * opacity) / 255.0;\n  vColor = color;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n"},function(e,t,n){"use strict";t.a="#define SHADER_NAME grid-cell-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n"},function(e,t,n){"use strict";function r(e,t,n){var r=i(e,t,n),a=r.gridHash,s=r.gridOffset;return{gridOffset:s,layerData:o(a,s)}}function i(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],n=arguments[2],r=1/0,i=-1/0,o=void 0,s=0;s<e.length;s++)o=n(e[s])[1],Number.isFinite(o)&&(r=o<r?o:r,i=o>i?o:i);var u=(r+i)/2,l=a(t,u);return l.xOffset<=0||l.yOffset<=0?{gridHash:{},gridOffset:l}:{gridHash:e.reduce(function(e,t){var r=n(t)[1],i=n(t)[0];if(!Number.isFinite(r)||!Number.isFinite(i))return e;var o=Math.floor((r+90)/l.yOffset),a=Math.floor((i+180)/l.xOffset),s=o+"-"+a;return e[s]=e[s]||{count:0,points:[]},e[s].count+=1,e[s].points.push(t),e},{}),gridOffset:l}}function o(e,t){return Object.keys(e).reduce(function(n,r,i){var o=r.split("-"),a=parseInt(o[0],10),s=parseInt(o[1],10);return n.push(Object.assign({index:i,position:[t.xOffset*s-180,t.yOffset*a-90]},e[r])),n},[])}function a(e,t){return{yOffset:s(e),xOffset:u(t,e)}}function s(e){return e/l*(180/Math.PI)}function u(e,t){return t/l*(180/Math.PI)/Math.cos(e*Math.PI/180)}t.a=r;var l=6378e3},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(){}var s=n(8),u=n(231),l=n(509),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},p=s.d.log,h=s.d.BinSorter,d=s.d.getQuantizeScale,v=s.d.getLinearScale,m=s.d.defaultColorRange,y={colorDomain:null,colorRange:m,getColorValue:function(e){return e.length},lowerPercentile:0,upperPercentile:100,onSetColorDomain:a,elevationDomain:null,elevationRange:[0,1e3],getElevationValue:function(e){return e.length},elevationLowerPercentile:0,elevationUpperPercentile:100,elevationScale:{type:"number",min:0,value:1},onSetElevationDomain:a,radius:1e3,coverage:{type:"number",min:0,max:1,value:1},extruded:!1,hexagonAggregator:l.a,getPosition:function(e){return e.position},fp64:!1,lightSettings:{}},g=function(e){function t(e){return r(this,t),e.hexagonAggregator||e.radius||(p.once(0,"HexagonLayer: Default hexagonAggregator requires radius prop to be set, Now using 1000 meter as default"),e.radius=y.radius),Number.isFinite(e.upperPercentile)&&(e.upperPercentile>100||e.upperPercentile<0)&&(p.once(0,"HexagonLayer: upperPercentile should be between 0 and 100. Assign to 100 by default"),e.upperPercentile=y.upperPercentile),Number.isFinite(e.lowerPercentile)&&(e.lowerPercentile>100||e.lowerPercentile<0)&&(p.once(0,"HexagonLayer: lowerPercentile should be between 0 and 100. Assign to 0 by default"),e.lowerPercentile=y.upperPercentile),e.lowerPercentile>=e.upperPercentile&&(p.once(0,"HexagonLayer: lowerPercentile should not be bigger than upperPercentile. Assign to 0 by default"),e.lowerPercentile=y.lowerPercentile),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),c(t,[{key:"initializeState",value:function(){this.state={hexagons:[],hexagonVertices:null,sortedColorBins:null,sortedElevationBins:null,colorValueDomain:null,elevationValueDomain:null,colorScaleFunc:a,elevationScaleFunc:a,dimensionUpdaters:this.getDimensionUpdaters()}}},{key:"updateState",value:function(e){var t=this,n=e.oldProps,r=e.props,i=e.changeFlags,o=this.getDimensionChanges(n,r);i.dataChanged||this.needsReProjectPoints(n,r)?this.getHexagons():o&&o.forEach(function(e){return"function"===typeof e&&e.apply(t)})}},{key:"needsReProjectPoints",value:function(e,t){return e.radius!==t.radius||e.hexagonAggregator!==t.hexagonAggregator}},{key:"getDimensionUpdaters",value:function(){return{getColor:[{id:"value",triggers:["getColorValue"],updater:this.getSortedColorBins},{id:"domain",triggers:["lowerPercentile","upperPercentile"],updater:this.getColorValueDomain},{id:"scaleFunc",triggers:["colorDomain","colorRange"],updater:this.getColorScale}],getElevation:[{id:"value",triggers:["getElevationValue"],updater:this.getSortedElevationBins},{id:"domain",triggers:["elevationLowerPercentile","elevationUpperPercentile"],updater:this.getElevationValueDomain},{id:"scaleFunc",triggers:["elevationDomain","elevationRange"],updater:this.getElevationScale}]}}},{key:"getDimensionChanges",value:function(e,t){var n=this.state.dimensionUpdaters,r=[];for(var i in n){var o=n[i].find(function(n){return n.triggers.some(function(n){return e[n]!==t[n]})});o&&r.push(o.updater)}return r.length?r:null}},{key:"getHexagons",value:function(){var e=this.props.hexagonAggregator,t=this.context.viewport,n=e(this.props,t),r=n.hexagons,i=n.hexagonVertices;this.setState({hexagons:r,hexagonVertices:i}),this.getSortedBins()}},{key:"getPickingInfo",value:function(e){var t=e.info,n=this.state,r=n.sortedColorBins,i=n.sortedElevationBins,o=t.picked&&t.index>-1,a=null;if(o){var s=this.state.hexagons[t.index],u=r.binMap[s.index]&&r.binMap[s.index].value,l=i.binMap[s.index]&&i.binMap[s.index].value;a=Object.assign({colorValue:u,elevationValue:l},s)}return Object.assign(t,{picked:Boolean(a),object:a})}},{key:"getUpdateTriggers",value:function(){var e=this,t=this.state.dimensionUpdaters,n={};for(var r in t)!function(r){n[r]={};var i=!0,o=!1,a=void 0;try{for(var s,u=t[r][Symbol.iterator]();!(i=(s=u.next()).done);i=!0){s.value.triggers.forEach(function(t){n[r][t]=e.props[t]})}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}}(r);return n}},{key:"getValueDomain",value:function(){this.getColorValueDomain(),this.getElevationValueDomain()}},{key:"getSortedBins",value:function(){this.getSortedColorBins(),this.getSortedElevationBins()}},{key:"getSortedColorBins",value:function(){var e=this.props.getColorValue,t=new h(this.state.hexagons||[],e);this.setState({sortedColorBins:t}),this.getColorValueDomain()}},{key:"getSortedElevationBins",value:function(){var e=this.props.getElevationValue,t=new h(this.state.hexagons||[],e);this.setState({sortedElevationBins:t}),this.getElevationValueDomain()}},{key:"getColorValueDomain",value:function(){var e=this.props,t=e.lowerPercentile,n=e.upperPercentile,r=e.onSetColorDomain;this.state.colorValueDomain=this.state.sortedColorBins.getValueRange([t,n]),"function"===typeof r&&r(this.state.colorValueDomain),this.getColorScale()}},{key:"getElevationValueDomain",value:function(){var e=this.props,t=e.elevationLowerPercentile,n=e.elevationUpperPercentile,r=e.onSetElevationDomain;this.state.elevationValueDomain=this.state.sortedElevationBins.getValueRange([t,n]),"function"===typeof r&&r(this.state.elevationValueDomain),this.getElevationScale()}},{key:"getColorScale",value:function(){var e=this.props.colorRange,t=this.props.colorDomain||this.state.colorValueDomain;this.state.colorScaleFunc=d(t,e)}},{key:"getElevationScale",value:function(){var e=this.props.elevationRange,t=this.props.elevationDomain||this.state.elevationValueDomain;this.state.elevationScaleFunc=v(t,e)}},{key:"_onGetSublayerColor",value:function(e){var t=this.state,n=t.sortedColorBins,r=t.colorScaleFunc,i=t.colorValueDomain,o=n.binMap[e.index]&&n.binMap[e.index].value,a=this.props.colorDomain||i,s=o>=a[0]&&o<=a[a.length-1],u=s?r(o):[0,0,0,0];return u[3]=Number.isFinite(u[3])?u[3]:255,u}},{key:"_onGetSublayerElevation",value:function(e){var t=this.state,n=t.sortedElevationBins,r=t.elevationScaleFunc,i=t.elevationValueDomain,o=n.binMap[e.index]&&n.binMap[e.index].value,a=this.props.elevationDomain||i;return o>=a[0]&&o<=a[a.length-1]?r(o):-1}},{key:"getSubLayerProps",value:function(){var e=this.props,n=e.radius,r=e.elevationScale,i=e.extruded,o=e.coverage,a=e.lightSettings,s=e.fp64;return f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getSubLayerProps",this).call(this,{id:"hexagon-cell",data:this.state.hexagons,fp64:s,hexagonVertices:this.state.hexagonVertices,radius:n,elevationScale:r,angle:Math.PI,extruded:i,coverage:o,lightSettings:a,getColor:this._onGetSublayerColor.bind(this),getElevation:this._onGetSublayerElevation.bind(this),updateTriggers:this.getUpdateTriggers()})}},{key:"getSubLayerClass",value:function(){return u.a}},{key:"renderLayers",value:function(){return new(this.getSubLayerClass())(this.getSubLayerProps())}}]),t}(s.b);g.layerName="HexagonLayer",g.defaultProps=y},function(e,t,n){"use strict";t.a="\n#define SHADER_NAME hexagon-cell-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 normals;\n\nattribute vec3 instancePositions;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\n// Custom uniforms\nuniform float opacity;\nuniform float radius;\nuniform float angle;\nuniform float extruded;\nuniform float coverage;\nuniform float elevationScale;\n\n// Result\nvarying vec4 vColor;\n\n// A magic number to scale elevation so that 1 unit approximate to 1 meter.\n#define ELEVATION_SCALE 0.8\n\nvoid main(void) {\n\n  // rotate primitive position and normal\n  mat2 rotationMatrix = mat2(cos(angle), -sin(angle), sin(angle), cos(angle));\n\n  vec2 rPos = rotationMatrix * positions.xz;\n  vec2 rNorm = rotationMatrix * normals.xz; // the hexagon cells has y axis as the vertical axis\n\n  vec3 rotatedPositions = vec3(rPos.x, positions.y, rPos.y);\n  vec3 rotatedNormals = vec3(rNorm.x, rNorm.y, normals.y);\n\n  // calculate elevation, if 3d not enabled set to 0\n  // cylindar gemoetry height are between -0.5 to 0.5, transform it to between 0, 1\n  float elevation = 0.0;\n\n  if (extruded > 0.5) {\n    elevation = project_scale(instancePositions.z * (positions.y + 0.5) *\n      ELEVATION_SCALE * elevationScale);\n  }\n\n  // if ahpha == 0.0 or z < 0.0, do not render element\n  float noRender = float(instanceColors.a == 0.0 || instancePositions.z < 0.0);\n  float dotRadius = radius * mix(coverage, 0.0, noRender);\n\n  // project center of hexagon\n  vec4 centroidPosition = vec4(project_position(instancePositions.xy), elevation, 0.0);\n\n  vec4 position_worldspace = centroidPosition + vec4(vec2(rotatedPositions.xz * dotRadius), 0., 1.);\n\n  gl_Position = project_to_clipspace(position_worldspace);\n\n  // Light calculations\n  // Worldspace is the linear space after Mercator projection\n\n  vec3 normals_worldspace = rotatedNormals;\n\n  float lightWeight = 1.0;\n\n  if (extruded > 0.5) {\n    lightWeight = getLightWeight(\n      position_worldspace.xyz, // the w component is always 1.0\n      normals_worldspace\n    );\n  }\n\n  vec3 lightWeightedColor = lightWeight * instanceColors.rgb;\n\n  // opacity-multiplied instance color\n  vColor = vec4(lightWeightedColor, opacity * instanceColors.a) / 255.0;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n"},function(e,t,n){"use strict";t.a="#define SHADER_NAME hexagon-cell-layer-vertex-shader-64\n\nattribute vec3 positions;\nattribute vec3 normals;\n\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\n// Custom uniforms\nuniform float opacity;\nuniform float radius;\nuniform float angle;\nuniform float extruded;\nuniform float coverage;\nuniform float elevationScale;\n\n// Result\nvarying vec4 vColor;\n\n// A magic number to scale elevation so that 1 unit approximate to 1 meter.\n#define ELEVATION_SCALE 0.8\n\nvoid main(void) {\n\n  // rotate primitive position and normal\n  mat2 rotationMatrix = mat2(cos(angle), -sin(angle), sin(angle), cos(angle));\n\n  vec2 rPos = rotationMatrix * positions.xz;\n  vec2 rNorm = rotationMatrix * normals.xz; // the hexagon cells has y axis as the vertical axis\n\n  vec3 rotatedPositions = vec3(rPos.x, positions.y, rPos.y);\n  vec3 rotatedNormals = vec3(rNorm.x, rNorm.y, normals.y);\n\n  // calculate elevation, if 3d not enabled set to 0\n  // cylindar gemoetry height are between -0.5 to 0.5, transform it to between 0, 1\n  float elevation = 0.0;\n\n  if (extruded > 0.5) {\n    elevation = project_scale(instancePositions.z * (positions.y + 0.5) *\n      ELEVATION_SCALE * elevationScale);\n  }\n\n  // if alpha == 0.0 or z < 0.0, do not render element\n  float noRender = float(instanceColors.a == 0.0 || instancePositions.z < 0.0);\n  float dotRadius = radius * mix(coverage, 0.0, noRender);\n\n  // project center of hexagon\n\n  vec4 instancePositions64xy = vec4(\n    instancePositions.x, instancePositions64xyLow.x,\n    instancePositions.y, instancePositions64xyLow.y);\n\n  vec2 projected_coord_xy[2];\n  project_position_fp64(instancePositions64xy, projected_coord_xy);\n\n  vec2 vertex_pos_localspace[4];\n  vec4_fp64(vec4(rotatedPositions.xz * dotRadius, 0.0, 1.0), vertex_pos_localspace);\n\n  vec2 vertex_pos_modelspace[4];\n  vertex_pos_modelspace[0] = sum_fp64(vertex_pos_localspace[0], projected_coord_xy[0]);\n  vertex_pos_modelspace[1] = sum_fp64(vertex_pos_localspace[1], projected_coord_xy[1]);\n  vertex_pos_modelspace[2] = sum_fp64(vertex_pos_localspace[2], vec2(elevation, 0.0));\n  vertex_pos_modelspace[3] = vec2(1.0, 0.0);\n\n  vec4 position_worldspace = vec4(\n    vertex_pos_modelspace[0].x, vertex_pos_modelspace[1].x,\n    vertex_pos_modelspace[2].x, vertex_pos_modelspace[3].x);\n\n  gl_Position = project_to_clipspace_fp64(vertex_pos_modelspace);\n\n  // Light calculations\n  // Worldspace is the linear space after Mercator projection\n\n  vec3 normals_worldspace = rotatedNormals;\n\n  float lightWeight = 1.0;\n\n  if (extruded > 0.5) {\n    lightWeight = getLightWeight(\n      position_worldspace.xyz, // the w component is always 1.0\n      normals_worldspace\n    );\n  }\n\n  vec3 lightWeightedColor = lightWeight * instanceColors.rgb;\n\n  // Color: Either opacity-multiplied instance color, or picking color\n  vColor = vec4(lightWeightedColor, opacity * instanceColors.a) / 255.0;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n"},function(e,t,n){"use strict";t.a="#define SHADER_NAME hexagon-cell-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n"},function(e,t,n){"use strict";function r(e,t){var n=e.data,r=e.radius,a=e.getPosition,s=i(r,t),u=n.map(function(e){return Object.assign({screenCoord:t.projectFlat(a(e))},e)});return{hexagons:Object(o.a)().radius(s).x(function(e){return e.screenCoord[0]}).y(function(e){return e.screenCoord[1]})(u).map(function(e,n){return{centroid:t.unprojectFlat([e.x,e.y]),points:e,index:n}})}}function i(e,t){return e*t.getDistanceScales().pixelsPerMeter[0]}t.a=r;var o=n(510)},function(e,t,n){"use strict";var r=n(511);n.d(t,"a",function(){return r.a})},function(e,t,n){"use strict";function r(e){return e[0]}function i(e){return e[1]}var o=Math.PI/3,a=[0,o,2*o,3*o,4*o,5*o];t.a=function(){function e(e){var t,n={},r=[],i=e.length;for(t=0;t<i;++t)if(!isNaN(a=+h.call(null,o=e[t],t,e))&&!isNaN(l=+d.call(null,o,t,e))){var o,a,l,c=Math.round(l/=u),f=Math.round(a=a/s-(1&c)/2),p=l-c;if(3*Math.abs(p)>1){var v=a-f,m=f+(a<f?-1:1)/2,y=c+(l<c?-1:1),g=a-m,_=l-y;v*v+p*p>g*g+_*_&&(f=m+(1&c?1:-1)/2,c=y)}var b=f+"-"+c,x=n[b];x?x.push(o):(r.push(x=n[b]=[o]),x.x=(f+(1&c)/2)*s,x.y=c*u)}return r}function t(e){var t=0,n=0;return a.map(function(r){var i=Math.sin(r)*e,o=-Math.cos(r)*e,a=i-t,s=o-n;return t=i,n=o,[a,s]})}var n,s,u,l=0,c=0,f=1,p=1,h=r,d=i;return e.hexagon=function(e){return"m"+t(null==e?n:+e).join("l")+"z"},e.centers=function(){for(var e=[],t=Math.round(c/u),r=Math.round(l/s),i=t*u;i<p+n;i+=u,++t)for(var o=r*s+(1&t)*s/2;o<f+s/2;o+=s)e.push([o,i]);return e},e.mesh=function(){var r=t(n).slice(0,4).join("l");return e.centers().map(function(e){return"M"+e+"m"+r}).join("")},e.x=function(t){return arguments.length?(h=t,e):h},e.y=function(t){return arguments.length?(d=t,e):d},e.radius=function(t){return arguments.length?(n=+t,s=2*n*Math.sin(o),u=1.5*n,e):n},e.size=function(t){return arguments.length?(l=c=0,f=+t[0],p=+t[1],e):[f-l,p-c]},e.extent=function(t){return arguments.length?(l=+t[0][0],c=+t[0][1],f=+t[1][0],p=+t[1][1],e):[[l,c],[f,p]]},e.radius(1)}},function(e,t,n){"use strict";t.a="#define SHADER_NAME path-layer-vertex-shader-64\n\nattribute vec3 positions;\n\nattribute vec3 instanceStartPositions;\nattribute vec3 instanceEndPositions;\nattribute vec3 instanceLeftDeltas;\nattribute vec3 instanceRightDeltas;\nattribute float instanceStrokeWidths;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec2 instanceDashArrays;\n\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float jointType;\nuniform float miterLimit;\n\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vDashArray;\nvarying float vPathPosition;\nvarying float vPathLength;\n\nconst float EPSILON = 0.001;\nconst float PIXEL_EPSILON = 0.1;\n\nfloat flipIfTrue(bool flag) {\n  return -(float(flag) * 2. - 1.);\n}\n\n// calculate line join positions\nvec3 lineJoin(\n  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,\n  float relativePosition, bool isEnd, bool isJoint,\n  float width\n) {\n  vec2 deltaA = currPoint.xy - prevPoint.xy;\n  vec2 deltaB = nextPoint.xy - currPoint.xy;\n\n  float lenA = length(deltaA);\n  float lenB = length(deltaB);\n\n  // when two points are closer than PIXEL_EPSILON in pixels,\n  // assume they are the same point to avoid precision issue\n  lenA = lenA > PIXEL_EPSILON ? lenA : 0.0;\n  lenB = lenB > PIXEL_EPSILON ? lenB : 0.0;\n\n  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);\n  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);\n\n  vec2 perpA = vec2(-dirA.y, dirA.x);\n  vec2 perpB = vec2(-dirB.y, dirB.x);\n\n  // tangent of the corner\n  vec2 tangent = vec2(dirA + dirB);\n  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;\n  // direction of the corner\n  vec2 miterVec = vec2(-tangent.y, tangent.x);\n  // width offset from current position\n  vec2 perp = isEnd ? perpA : perpB;\n  float L = isEnd ? lenA : lenB;\n\n  // cap super sharp angles\n  float sinHalfA = abs(dot(miterVec, perp));\n  float cosHalfA = abs(dot(dirA, miterVec));\n\n  bool turnsRight = dirA.x * dirB.y > dirA.y * dirB.x;\n\n  float offsetScale = 1.0 / max(sinHalfA, EPSILON);\n\n  float cornerPosition = isJoint ?\n    0.0 :\n    flipIfTrue(turnsRight == (relativePosition > 0.0));\n\n  // do not bevel if line segment is too short\n  cornerPosition *=\n    float(cornerPosition <= 0.0 || sinHalfA < min(lenA, lenB) / width * cosHalfA);\n\n  // trim if inside corner extends further than the line segment\n  if (cornerPosition < 0.0) {\n    offsetScale = min(offsetScale, L / width / max(cosHalfA, EPSILON));\n  }\n\n  vMiterLength = cornerPosition >= 0.0 ?\n    mix(offsetScale, 0.0, cornerPosition) :\n    offsetScale * cornerPosition;\n  vMiterLength -= sinHalfA * jointType;\n\n  float offsetDirection = mix(\n    positions.y,\n    mix(\n      flipIfTrue(turnsRight),\n      positions.y * flipIfTrue(turnsRight == (positions.x == 1.)),\n      cornerPosition\n    ),\n    step(0.0, cornerPosition)\n  );\n\n  vec2 offsetVec = mix(miterVec, -tangent, step(0.5, cornerPosition));\n  offsetScale = mix(offsetScale, 1.0 / max(cosHalfA, 0.001), step(0.5, cornerPosition));\n\n  // special treatment for start cap and end cap\n  // TODO - This has an issue. len is always positive because it is length.\n  // Step returns zero if -lenA<0, so practically this is a comparison of\n  // lenA with zero, with lots of problems because of the -lenA. Can we use EPSILON?\n  bool isStartCap = step(0.0, -lenA) > 0.5;\n  bool isEndCap = step(0.0, -lenB) > 0.5;\n  bool isCap = isStartCap || isEndCap;\n\n  // 0: center, 1: side\n  cornerPosition = isCap ? (1.0 - positions.z) : 0.;\n\n  // start of path: use next - curr\n  if (isStartCap) {\n    offsetVec = mix(dirB, perpB, cornerPosition);\n  }\n\n  // end of path: use curr - prev\n  if (isEndCap) {\n    offsetVec = mix(dirA, perpA, cornerPosition);\n  }\n\n  // extend out a triangle to envelope the round cap\n  if (isCap) {\n    offsetScale = mix(4.0 * jointType, 1.0, cornerPosition);\n    vMiterLength = 1.0 - cornerPosition;\n    offsetDirection = mix(flipIfTrue(isStartCap), positions.y, cornerPosition);\n  }\n\n  vCornerOffset = offsetVec * offsetDirection * offsetScale;\n\n  // Generate variables for dash calculation\n  vDashArray = instanceDashArrays;\n  vPathLength = L / width;\n  // vec2 offsetFromStartOfPath = isEnd ? vCornerOffset + deltaA / width : vCornerOffset;\n  vec2 offsetFromStartOfPath = vCornerOffset;\n  if (isEnd) {\n    offsetFromStartOfPath += deltaA / width;\n  }\n  vec2 dir = isEnd ? dirA : dirB;\n  vPathPosition = dot(offsetFromStartOfPath, dir);\n\n  return currPoint + vec3(vCornerOffset * width, 0.0);\n}\n\n// calculate line join positions\n// extract params from attributes and uniforms\nvec3 lineJoin(vec3 prevPoint, vec3 currPoint, vec3 nextPoint) {\n\n  // relative position to the corner:\n  // -1: inside (smaller side of the angle)\n  // 0: center\n  // 1: outside (bigger side of the angle)\n\n  float relativePosition = positions.y;\n  bool isEnd = positions.x > EPSILON;\n  bool isJoint = positions.z > EPSILON;\n\n  float width = clamp(project_scale(instanceStrokeWidths * widthScale),\n    widthMinPixels, widthMaxPixels) / 2.0;\n\n  return lineJoin(\n    prevPoint, currPoint, nextPoint,\n    relativePosition, isEnd, isJoint,\n    width\n  );\n}\n\nvoid main() {\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n\n  float isEnd = positions.x;\n\n  vec3 prevPosition = mix(-instanceLeftDeltas, vec3(0.0), isEnd) + instanceStartPositions;\n  prevPosition = project_position(prevPosition);\n\n  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n  currPosition = project_position(currPosition);\n\n  vec3 nextPosition = mix(vec3(0.0), instanceRightDeltas, isEnd) + instanceEndPositions;\n  nextPosition = project_position(nextPosition);\n\n  vec3 pos = lineJoin(prevPosition, currPosition, nextPosition);\n\n  gl_Position = project_to_clipspace(vec4(pos, 1.0));\n}\n"},function(e,t,n){"use strict";t.a="\n#define SHADER_NAME path-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instanceStartPositions;\nattribute vec3 instanceEndPositions;\nattribute vec4 instanceStartEndPositions64xyLow;\nattribute vec3 instanceLeftDeltas;\nattribute vec3 instanceRightDeltas;\nattribute float instanceStrokeWidths;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec2 instanceDashArrays;\n\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float jointType;\nuniform float miterLimit;\n\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vDashArray;\nvarying float vPathPosition;\nvarying float vPathLength;\n\nconst float EPSILON = 0.001;\nconst float PIXEL_EPSILON = 0.1;\n\nfloat flipIfTrue(bool flag) {\n  return -(float(flag) * 2. - 1.);\n}\n\nvec3 lineJoin(vec2 prevPoint64[2], vec2 currPoint64[2], vec2 nextPoint64[2]) {\n\n  float width = clamp(project_scale(instanceStrokeWidths * widthScale),\n    widthMinPixels, widthMaxPixels) / 2.0;\n\n  vec2 deltaA64[2];\n  vec2 deltaB64[2];\n\n  vec2_sub_fp64(currPoint64, prevPoint64, deltaA64);\n  vec2_sub_fp64(nextPoint64, currPoint64, deltaB64);\n\n  vec2 lengthA64 = vec2_length_fp64(deltaA64);\n  vec2 lengthB64 = vec2_length_fp64(deltaB64);\n\n  vec2 deltaA = vec2(deltaA64[0].x, deltaA64[1].x);\n  vec2 deltaB = vec2(deltaB64[0].x, deltaB64[1].x);\n\n  float lenA = lengthA64.x;\n  float lenB = lengthB64.x;\n\n  vec2 offsetVec;\n  float offsetScale;\n  float offsetDirection;\n\n  // when two points are closer than PIXEL_EPSILON in pixels,\n  // assume they are the same point to avoid precision issue\n  lenA = lenA > PIXEL_EPSILON ? lenA : 0.0;\n  lenB = lenB > PIXEL_EPSILON ? lenB : 0.0;\n  vec2 dirA = lenA > 0. ? deltaA / lenA : vec2(0.0, 0.0);\n  vec2 dirB = lenB > 0. ? deltaB / lenB : vec2(0.0, 0.0);\n\n  vec2 perpA = vec2(-dirA.y, dirA.x);\n  vec2 perpB = vec2(-dirB.y, dirB.x);\n\n  // tangent of the corner\n  vec2 tangent = vec2(dirA + dirB);\n  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;\n  // direction of the corner\n  vec2 miterVec = vec2(-tangent.y, tangent.x);\n  // width offset from current position\n  vec2 perp = mix(perpB, perpA, positions.x);\n  float L = mix(lenB, lenA, positions.x);\n\n  // cap super sharp angles\n  float sinHalfA = abs(dot(miterVec, perp));\n  float cosHalfA = abs(dot(dirA, miterVec));\n  bool turnsRight = dirA.x * dirB.y > dirA.y * dirB.x;\n\n  // relative position to the corner:\n  // -1: inside (smaller side of the angle)\n  // 0: center\n  // 1: outside (bigger side of the angle)\n  float cornerPosition = mix(\n    flipIfTrue(turnsRight == (positions.y > 0.0)),\n    0.0,\n    positions.z\n  );\n\n  offsetScale = 1.0 / max(sinHalfA, EPSILON);\n\n  // do not bevel if line segment is too short\n  cornerPosition *= float(cornerPosition <= 0.0 || sinHalfA < min(lenA, lenB) / width * cosHalfA);\n  // trim if inside corner extends further than the line segment\n  offsetScale = mix(\n    offsetScale,\n    min(offsetScale, L / width / max(cosHalfA, EPSILON)),\n    float(cornerPosition < 0.0)\n  );\n\n  vMiterLength = mix(\n    offsetScale * cornerPosition,\n    mix(offsetScale, 0.0, cornerPosition),\n    step(0.0, cornerPosition)\n  ) - sinHalfA * jointType;\n  offsetDirection = mix(\n    positions.y,\n    mix(\n      flipIfTrue(turnsRight),\n      positions.y * flipIfTrue(turnsRight == (positions.x == 1.)),\n      cornerPosition\n    ),\n    step(0.0, cornerPosition)\n  );\n  offsetVec = mix(miterVec, -tangent, step(0.5, cornerPosition));\n  offsetScale = mix(offsetScale, 1.0 / max(cosHalfA, 0.001), step(0.5, cornerPosition));\n\n  // special treatment for start cap and end cap\n  // using a small number as the limit for determining if the lenA or lenB is 0\n  float isStartCap = step(lenA, 1.0e-5);\n  float isEndCap = step(lenB, 1.0e-5);\n  float isCap = max(isStartCap, isEndCap);\n\n  // 0: center, 1: side\n  cornerPosition = isCap * (1.0 - positions.z);\n\n  // start of path: use next - curr\n  offsetVec = mix(offsetVec, mix(dirB, perpB, cornerPosition), isStartCap);\n  // end of path: use curr - prev\n  offsetVec = mix(offsetVec, mix(dirA, perpA, cornerPosition), isEndCap);\n\n  // extend out a triangle to envelope the round cap\n  offsetScale = mix(\n    offsetScale,\n    mix(4.0 * jointType, 1.0, cornerPosition),\n    isCap\n  );\n  vMiterLength = mix(vMiterLength, 1.0 - cornerPosition, isCap);\n\n  offsetDirection = mix(\n    offsetDirection,\n    mix(flipIfTrue(isStartCap > 0.), positions.y, cornerPosition),\n    isCap\n  );\n\n  vCornerOffset = offsetVec * offsetDirection * offsetScale;\n\n  // Generate variables for dash calculation\n  vDashArray = instanceDashArrays;\n  vPathLength = L / width;\n  float isEnd = positions.x;\n  vec2 offsetFromStartOfPath = mix(vCornerOffset, vCornerOffset + deltaA / width, isEnd);\n  vec2 dir = mix(dirB, dirA, isEnd);\n  vPathPosition = dot(offsetFromStartOfPath, dir);\n\n  return vec3(vCornerOffset * width, 0.0);\n}\n\nvoid main() {\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n\n  float isEnd = positions.x;\n\n  // Calculate current position\n  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n  currPosition = project_position(currPosition);\n\n  // Calculate current position 64bit\n\n  vec2 instanceStartPositions64[2];\n  instanceStartPositions64[0] = vec2(instanceStartPositions.x, instanceStartEndPositions64xyLow.x);\n  instanceStartPositions64[1] = vec2(instanceStartPositions.y, instanceStartEndPositions64xyLow.y);\n\n  vec2 instanceEndPositions64[2];\n  instanceEndPositions64[0] = vec2(instanceEndPositions.x, instanceStartEndPositions64xyLow.z);\n  instanceEndPositions64[1] = vec2(instanceEndPositions.y, instanceStartEndPositions64xyLow.w);\n\n  vec2 tempCurrPosition64[2];\n  vec2_mix_fp64(instanceStartPositions64, instanceEndPositions64, isEnd, tempCurrPosition64);\n\n  vec4 currPosition64 = vec4(tempCurrPosition64[0].xy, tempCurrPosition64[1].xy);\n\n  vec2 projected_curr_position[2];\n  project_position_fp64(currPosition64, projected_curr_position);\n  float projected_curr_position_z = project_scale(currPosition.z);\n\n  // Calculate previous position\n\n  vec3 prevPosition = mix(-instanceLeftDeltas, vec3(0.0), isEnd);\n\n  // Calculate prev position 64bit\n\n  vec2 tempPrevPosition64[2];\n  tempPrevPosition64[0] = sum_fp64(vec2(prevPosition.x, 0.0), instanceStartPositions64[0]);\n  tempPrevPosition64[1] = sum_fp64(vec2(prevPosition.y, 0.0), instanceStartPositions64[1]);\n\n  vec4 prevPosition64 = vec4(tempPrevPosition64[0].xy, tempPrevPosition64[1].xy);\n\n  vec2 projected_prev_position[2];\n  project_position_fp64(prevPosition64, projected_prev_position);\n\n  // Calculate next positions\n  vec3 nextPosition = mix(vec3(0.0), instanceRightDeltas, isEnd);\n\n  // Calculate next position 64bit\n\n  vec2 tempNextPosition64[2];\n  tempNextPosition64[0] = sum_fp64(vec2(nextPosition.x, 0.0), instanceEndPositions64[0]);\n  tempNextPosition64[1] = sum_fp64(vec2(nextPosition.y, 0.0), instanceEndPositions64[1]);\n\n  vec4 nextPosition64 = vec4(tempNextPosition64[0].xy, tempNextPosition64[1].xy);\n\n  vec2 projected_next_position[2];\n  project_position_fp64(nextPosition64, projected_next_position);\n\n  vec3 pos = lineJoin(projected_prev_position, projected_curr_position, projected_next_position);\n  vec2 vertex_pos_modelspace[4];\n\n  vertex_pos_modelspace[0] = sum_fp64(vec2(pos.x, 0.0), projected_curr_position[0]);\n  vertex_pos_modelspace[1] = sum_fp64(vec2(pos.y, 0.0), projected_curr_position[1]);\n  vertex_pos_modelspace[2] = vec2(pos.z + projected_curr_position_z, 0.0);\n  vertex_pos_modelspace[3] = vec2(1.0, 0.0);\n\n  gl_Position = project_to_clipspace_fp64(vertex_pos_modelspace);\n}\n"},function(e,t,n){"use strict";t.a="#define SHADER_NAME path-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform float jointType;\nuniform float miterLimit;\nuniform float alignMode;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vDashArray;\nvarying float vPathPosition;\nvarying float vPathLength;\n\n// mod doesn't work correctly for negative numbers\nfloat mod2(float a, float b) {\n  return a - floor(a / b) * b;\n}\n\nfloat round(float x) {\n  return floor(x + 0.5);\n}\n\n// if given position is in the gap part of the dashed line\n// dashArray.x: solid stroke length, relative to width\n// dashArray.y: gap length, relative to width\n// alignMode:\n// 0 - no adjustment\n// o----     ----     ----     ---- o----     -o----     ----     o\n// 1 - stretch to fit, draw half dash at each end for nicer joints\n// o--    ----    ----    ----    --o--      --o--     ----     --o\nbool dash_isFragInGap() {\n  float solidLength = vDashArray.x;\n  float gapLength = vDashArray.y;\n\n  float unitLength = solidLength + gapLength;\n\n  if (unitLength == 0.0) {\n    return false;\n  }\n\n  unitLength = mix(\n    unitLength,\n    vPathLength / round(vPathLength / unitLength),\n    alignMode\n  );\n\n  float offset = alignMode * solidLength / 2.0;\n\n  return gapLength > 0.0 &&\n    vPathPosition >= 0.0 &&\n    vPathPosition <= vPathLength &&\n    mod2(vPathPosition + offset, unitLength) > solidLength;\n}\n\nvoid main(void) {\n  // if joint is rounded, test distance from the corner\n  if (jointType > 0.0 && vMiterLength > 0.0 && length(vCornerOffset) > 1.0) {\n    // Enable to debug joints\n    // gl_FragColor = vec4(0., 1., 0., 1.);\n    // return;\n    discard;\n  }\n  if (jointType == 0.0 && vMiterLength > miterLimit) {\n    // Enable to debug joints\n    // gl_FragColor = vec4(0., 0., 1., 1.);\n    // return;\n    discard;\n  }\n  if (vColor.a == 0.0 || dash_isFragInGap()) {\n    // Enable to debug joints\n    // gl_FragColor = vec4(0., 1., 1., 1.);\n    // return;\n    discard;\n  }\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(8),s=n(232),u=n(128),l=n(129),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=a.d.get,p=[0,0,0,255],h=[0,0,0,255],d={stroked:!0,filled:!0,extruded:!1,elevationScale:1,wireframe:!1,lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,lineDashJustified:!1,fp64:!1,getPolygon:function(e){return f(e,"polygon")},getFillColor:function(e){return f(e,"fillColor")||h},getLineColor:function(e){return f(e,"lineColor")||p},getLineWidth:function(e){return f(e,"lineWidth")||1},getLineDashArray:null,getElevation:function(e){return f(e,"elevation")||1e3},lightSettings:{}},v=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),c(t,[{key:"initializeState",value:function(){this.state={paths:[]}}},{key:"updateState",value:function(e){var t=this,n=(e.oldProps,e.props,e.changeFlags);if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPolygon)){var r=this.props,i=r.data,o=r.getPolygon;this.state.paths=[],i.forEach(function(e){l.d(o(e)).forEach(function(n){return t.state.paths.push({path:n,object:e})})})}}},{key:"getPickingInfo",value:function(e){var t=e.info;return Object.assign(t,{object:t.object&&t.object.object||t.object})}},{key:"renderLayers",value:function(){var e=this.props,t=e.data,n=e.stroked,r=e.filled,i=e.extruded,o=e.wireframe,a=e.elevationScale,l=this.props,c=l.lineWidthScale,f=l.lineWidthMinPixels,p=l.lineWidthMaxPixels,h=l.lineJointRounded,d=l.lineMiterLimit,v=l.lineDashJustified,m=l.fp64,y=this.props,g=y.getFillColor,_=y.getLineColor,b=y.getLineWidth,x=y.getLineDashArray,w=y.getElevation,E=y.getPolygon,S=y.updateTriggers,T=y.lightSettings,A=this.state.paths,O=t&&t.length>0,P=r&&O&&new s.a(this.getSubLayerProps({id:"fill",updateTriggers:{getElevation:S.getElevation,getColor:S.getFillColor}}),{data:t,extruded:i,elevationScale:a,fp64:m,wireframe:!1,getPolygon:E,getElevation:w,getColor:g,lightSettings:T}),C=i&&o&&O&&new s.a(this.getSubLayerProps({id:"wireframe",updateTriggers:{getElevation:S.getElevation,getColor:S.getLineColor}}),{data:t,fp64:m,extruded:!0,elevationScale:a,wireframe:!0,getPolygon:E,getElevation:w,getColor:_}),k=!i&&n&&O&&new u.a(this.getSubLayerProps({id:"stroke",updateTriggers:{getWidth:S.getLineWidth,getColor:S.getLineColor,getDashArray:S.getLineDashArray}}),{data:A,fp64:m,widthScale:c,widthMinPixels:f,widthMaxPixels:p,rounded:h,miterLimit:d,dashJustified:v,getPath:function(e){return e.path},getColor:function(e){return _(e.object)},getWidth:function(e){return b(e.object)},getDashArray:x&&function(e){return x(e.object)}});return[!i&&P,C,k,i&&P]}}]),t}(a.b);t.a=v,v.layerName="PolygonLayer",v.defaultProps=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return[(e+1)%256,Math.floor((e+1)/256)%256,Math.floor((e+1)/256/256)%256]}function o(e){return e.reduce(function(e,t){return e+v.c(t)},0)}function a(e){return e.reduce(function(e,t){return e+v.b(t)},0)}function s(e){var t=new Array(e.length+1);t[0]=0;var n=0;return e.forEach(function(e,r){n+=v.c(e),t[r+1]=n}),t}function u(e){var t=null;if(e.length>1){var n=0;t=[],e.forEach(function(e){n+=e.length,t.push(n)}),t.pop()}return t}function l(e){var t=e.polygons,n=e.IndexType,r=void 0===n?Uint32Array:n,i=3*a(t),o=s(t);if(r===Uint16Array&&i>65535)throw new Error("Vertex count exceeds browser's limit");var u=new r(i),l=0;return t.forEach(function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,s=c(e)[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var f=a.value;u[l++]=f+o[t]}}catch(e){r=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}}),u}function c(e){var t=u(e),n=x(e);return y()(n,t,3)}function f(e){var t=e.polygons,n=e.pointCount,r=e.fp64,i=new Float32Array(3*n),o=void 0;r&&(o=new Float32Array(2*n));var a=0,s=0,u=!0,l=!1,c=void 0;try{for(var f,p=t[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var h=f.value;v.a(h,function(e){var t=e[0],n=e[1],u=e[2]||0;i[a++]=t,i[a++]=n,i[a++]=u,r&&(o[s++]=b(t),o[s++]=b(n))})}}catch(e){l=!0,c=e}finally{try{!u&&p.return&&p.return()}finally{if(l)throw c}}return{positions:i,positions64xyLow:o}}function p(e){var t=(e.polygons,e.pointCount);return new Float32Array(3*t)}function h(e){var t=e.polygons,n=e.pointCount,r=e.getColor,i=new Uint8ClampedArray(4*n),o=0;return t.forEach(function(e,t){var n=r(t);n[3]=Number.isFinite(n[3])?n[3]:255;var a=v.c(e);w({target:i,source:n,start:o,count:a}),o+=n.length*a}),i}function d(e){var t=e.polygons,n=e.pointCount,r=new Uint8ClampedArray(3*n),o=0;return t.forEach(function(e,t){var n=i(t),a=v.c(e);w({target:r,source:n,start:o,count:a}),o+=n.length*a}),r}n.d(t,"a",function(){return S});var v=n(129),m=n(233),y=n.n(m),g=n(8),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),b=g.d.fp64LowPart,x=g.d.flattenVertices,w=g.d.fillArray,E=[0,0,0,255],S=function(){function e(t){var n=t.polygons,i=t.fp64,a=void 0!==i&&i;r(this,e),this.polygons=n.map(function(e){return v.d(e)}),this.pointCount=o(this.polygons),this.fp64=a}return _(e,[{key:"indices",value:function(){return l({polygons:this.polygons,indexCount:this.indexCount})}},{key:"positions",value:function(){return f({polygons:this.polygons,pointCount:this.pointCount,fp64:this.fp64})}},{key:"normals",value:function(){return p({polygons:this.polygons,pointCount:this.pointCount})}},{key:"colors",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getColor,n=void 0===t?function(e){return E}:t;return h({polygons:this.polygons,pointCount:this.pointCount,getColor:n})}},{key:"pickingColors",value:function(){return d({polygons:this.polygons,pointCount:this.pointCount})}}]),e}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return[e+1&255,e+1>>8&255,e+1>>8>>8&255]}function o(e,t){for(var n=t.length,r=e.length,i=0;i<n;i++)e[r++]=t[i];return e}function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return t>1?e.forEach(function(e){return a(e,t-1,n)}):o(n,e),n}function s(e){return e.reduce(function(e,t){return e+_.c(t)},0)}function u(e){var t=e.groupedVertices,n=e.wireframe,r=void 0!==n&&n,i=r?2:5,o=[];t.reduce(function(e,t){return o.push(e),e+_.c(t)*i},0);var s=t.map(function(e,t){return r?v(e,o[t]):y(e,o[t])});return new Uint32Array(a(s,2))}function l(e){var t=e.groupedVertices,n=e.pointCount,r=e.wireframe,i=void 0!==r&&r,o=i?2:5,s=new Float32Array(3*n*o),u=0;return t.forEach(function(e){for(var t=a(e,3),n=t.slice(0),r=t.length-1;r>0;)n[r]=0,r-=3;var l=t.length;i?(T({target:s,source:t,start:u}),T({target:s,source:n,start:u+l})):(T({target:s,source:t,start:u,count:3}),T({target:s,source:n,start:u+3*l,count:2})),u+=l*o}),s}function c(e,t){var n=void 0;if(t){var r=e.length/3;n=new Float32Array(2*r);for(var i=0;i<r;i++)n[2*i+0]=S(e[3*i+0]),n[2*i+1]=S(e[3*i+1])}return{positions:e,positions64xyLow:n}}function f(e){var t=e.groupedVertices,n=e.pointCount,r=e.wireframe,i=[0,0,1],a=r?2:5,s=new Float32Array(3*n*a),u=0;return r?T({target:s,source:i,count:n*a}):(t.map(function(e,t){var n=_.c(e);T({target:s,source:i,start:u,count:n}),u+=3*n;var r=[],a=[];e.forEach(function(e){var t=p(e),n=t.slice(0,3);o(r,t),o(r,n),o(a,n),o(a,t)}),T({target:s,start:u,count:2,source:r.concat(a)}),u+=3*n*4}),s)}function p(e){var t=[],n=null,r=!0,i=!1,a=void 0;try{for(var s,u=e[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var l=s.value;if(n){o(t,g(n,l))}n=l}}catch(e){i=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw a}}return t}function h(e){var t=e.groupedVertices,n=e.pointCount,r=e.getColor,i=e.wireframe,o=void 0!==i&&i,a=o?2:5,s=new Uint8ClampedArray(4*n*a),u=0;return t.forEach(function(e,t){var n=r(t);n[3]=Number.isFinite(n[3])?n[3]:255;var i=_.c(e);T({target:s,source:n,start:u,count:i*a}),u+=n.length*i*a}),s}function d(e){var t=e.groupedVertices,n=e.pointCount,r=e.wireframe,o=void 0!==r&&r,a=o?2:5,s=new Uint8ClampedArray(3*n*a),u=0;return t.forEach(function(e,t){var n=_.c(e),r=i(t);T({target:s,source:r,start:u,count:n*a}),u+=r.length*n*a}),s}function v(e,t){var n=_.c(e),r=[];return e.forEach(function(e){r.push(t);for(var i=e.length,o=1;o<i-1;o++)r.push(o+t,o+t);r.push(t);for(var a=0;a<i-1;a++)r.push(a+t,a+n+t);t+=i}),r}function m(e,t,n){e.push(t+n,t+3*n,t+2*n+1,t+2*n+1,t+3*n,t+4*n+1)}function y(e,t){var n=_.c(e),r=null,i=e.length-1;if(i){r=[];for(var o=0,s=0;s<i;s++)o+=e[s].length,r[s]=o}var u=w()(a(e,3),r,3).map(function(e){return e+t});return e.forEach(function(e){for(var r=e.length,i=0;i<r-1;i++)m(u,t+i,n);t+=r}),u}function g(e,t){return[e[1]-t[1],t[0]-e[0],0]}n.d(t,"a",function(){return O});var _=n(129),b=n(8),x=n(233),w=n.n(x),E=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),S=b.d.fp64LowPart,T=b.d.fillArray,A=[0,0,0,255],O=function(){function e(t){var n=t.polygons,i=t.getHeight,o=void 0===i?function(e){return 1e3}:i,a=(t.getColor,t.wireframe),p=void 0!==a&&a,h=t.fp64,v=void 0!==h&&h;r(this,e),this.fp64=v,n=n.map(function(e,t){var n=o(t)||0;return _.d(e).map(function(e){return e.map(function(e){return[e[0],e[1],n]})})});var m=n;this.groupedVertices=n;var y=s(n);this.pointCount=y,this.wireframe=p,this.attributes={};var g=l({groupedVertices:m,pointCount:y,wireframe:p});Object.assign(this.attributes,{positions:c(g,this.fp64),indices:u({groupedVertices:m,wireframe:p}),normals:f({groupedVertices:m,pointCount:y,wireframe:p}),pickingColors:d({groupedVertices:m,pointCount:y,wireframe:p})})}return E(e,[{key:"indices",value:function(){return this.attributes.indices}},{key:"positions",value:function(){return this.attributes.positions}},{key:"normals",value:function(){return this.attributes.normals}},{key:"colors",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getColor,n=void 0===t?function(e){return A}:t;return h({groupedVertices:this.groupedVertices,pointCount:this.pointCount,wireframe:this.wireframe,getColor:n})}},{key:"pickingColors",value:function(){return this.attributes.pickingColors}}]),e}()},function(e,t,n){"use strict";t.a="#define SHADER_NAME solid-polygon-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 normals;\nattribute vec4 colors;\nattribute vec3 pickingColors;\n\nuniform float extruded;\nuniform float wireframe;\nuniform float elevationScale;\nuniform float opacity;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  \n  vec4 position_worldspace = vec4(project_position(\n    vec3(positions.x, positions.y, positions.z * elevationScale)),\n    1.0\n  );\n  gl_Position = project_to_clipspace(position_worldspace);\n\n  float lightWeight = 1.0;\n  \n  if (extruded > 0.5 && wireframe < 0.5) {\n    // Here, the input parameters should be\n    // position_worldspace.xyz / position_worldspace.w.\n    // However, this calculation generates all zeros on\n    // MacBook Pro with Intel Iris Pro GPUs for unclear reasons.\n    // (see https://github.com/uber/deck.gl/issues/559)\n    // Since the w component is always 1.0 in our shaders,\n    // we decided to just provide xyz component of position_worldspace\n    // to the getLightWeight() function\n    lightWeight = getLightWeight(\n      position_worldspace.xyz,\n      project_normal(normals)\n    );\n  }\n\n  vec3 lightWeightedColor = lightWeight * colors.rgb;\n  vColor = vec4(lightWeightedColor, colors.a * opacity) / 255.0;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(pickingColors);\n}\n"},function(e,t,n){"use strict";t.a="#define SHADER_NAME solid-polygon-layer-vertex-shader-64\n\nattribute vec3 positions;\nattribute vec2 positions64xyLow;\nattribute vec3 normals;\nattribute vec4 colors;\nattribute vec3 pickingColors;\n\nuniform float extruded;\nuniform float wireframe;\nuniform float elevationScale;\nuniform float opacity;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  vec4 positions64xy = vec4(positions.x, positions64xyLow.x, positions.y, positions64xyLow.y);\n\n  vec2 projected_coord_xy[2];\n  project_position_fp64(positions64xy, projected_coord_xy);\n\n  vec2 vertex_pos_modelspace[4];\n  vertex_pos_modelspace[0] = projected_coord_xy[0];\n  vertex_pos_modelspace[1] = projected_coord_xy[1];\n  vertex_pos_modelspace[2] = vec2(project_scale(positions.z * elevationScale), 0.0);\n  vertex_pos_modelspace[3] = vec2(1.0, 0.0);\n\n  gl_Position = project_to_clipspace_fp64(vertex_pos_modelspace);\n\n  vec4 position_worldspace = vec4(\n    vertex_pos_modelspace[0].x, vertex_pos_modelspace[1].x,\n    vertex_pos_modelspace[2].x, vertex_pos_modelspace[3].x);\n\n  float lightWeight = 1.0;\n\n  if (extruded > 0.5 && wireframe < 0.5) {\n    lightWeight = getLightWeight(\n      position_worldspace.xyz, // the w component is always 1.0\n      project_normal(normals)\n    );\n  }\n\n  vec3 lightWeightedColor = lightWeight * colors.rgb;\n  vColor = vec4(lightWeightedColor, colors.a * opacity) / 255.0;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(pickingColors);\n}\n"},function(e,t,n){"use strict";t.a="#define SHADER_NAME solid-polygon-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(8),s=n(229),u=n(128),l=n(232),c=n(522),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=a.d.get,h=[0,0,0,255],d=[0,0,0,255],v={stroked:!0,filled:!0,extruded:!1,wireframe:!1,lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,elevationScale:1,pointRadiusScale:1,pointRadiusMinPixels:0,pointRadiusMaxPixels:Number.MAX_SAFE_INTEGER,fp64:!1,getLineColor:function(e){return p(e,"properties.lineColor")||h},getFillColor:function(e){return p(e,"properties.fillColor")||d},getRadius:function(e){return p(e,"properties.radius")||p(e,"properties.size")||1},getLineWidth:function(e){return p(e,"properties.lineWidth")||1},getElevation:function(e){return p(e,"properties.elevation")||1e3},subLayers:{PointLayer:s.a,LineLayer:u.a,PolygonLayer:l.a},lightSettings:{}},m=function(e){return e.geometry.coordinates},y=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),f(t,[{key:"initializeState",value:function(){this.state={features:{}}}},{key:"updateState",value:function(e){var t=(e.oldProps,e.props);if(e.changeFlags.dataChanged){var n=t.data,r=Object(c.a)(n);this.state.features=Object(c.b)(r)}}},{key:"getPickingInfo",value:function(e){var t=e.info;return Object.assign(t,{object:t.object&&t.object.feature||t.object})}},{key:"renderLayers",value:function(){var e=this.state.features,t=e.pointFeatures,n=e.lineFeatures,r=e.polygonFeatures,i=e.polygonOutlineFeatures,o=this.props,a=o.stroked,s=o.filled,u=o.extruded,l=o.wireframe,c=o.subLayers,f=o.lightSettings,p=this.props,h=p.lineWidthScale,d=p.lineWidthMinPixels,v=p.lineWidthMaxPixels,y=p.lineJointRounded,g=p.lineMiterLimit,_=p.pointRadiusScale,b=p.pointRadiusMinPixels,x=p.pointRadiusMaxPixels,w=p.elevationScale,E=p.fp64,S=this.props,T=S.getLineColor,A=S.getFillColor,O=S.getRadius,P=S.getLineWidth,C=S.getElevation,k=S.updateTriggers,R=t&&t.length>0,M=n&&n.length>0,I=i&&i.length>0,L=r&&r.length>0,D=s&&L&&new c.PolygonLayer(this.getSubLayerProps({id:"polygon-fill",updateTriggers:{getElevation:k.getElevation,getColor:k.getFillColor}}),{data:r,fp64:E,extruded:u,elevationScale:w,wireframe:!1,lightSettings:f,getPolygon:m,getElevation:C,getColor:A}),N=l&&u&&L&&new c.PolygonLayer(this.getSubLayerProps({id:"polygon-wireframe",updateTriggers:{getElevation:k.getElevation,getColor:k.getLineColor}}),{data:r,fp64:E,extruded:u,elevationScale:w,wireframe:!0,getPolygon:m,getElevation:C,getColor:T}),F=!u&&a&&I&&new c.LineLayer(this.getSubLayerProps({id:"polygon-outline",updateTriggers:{getColor:k.getLineColor,getWidth:k.getLineWidth}}),{data:i,fp64:E,widthScale:h,widthMinPixels:d,widthMaxPixels:v,rounded:y,miterLimit:g,getPath:m,getColor:T,getWidth:P}),j=M&&new c.LineLayer(this.getSubLayerProps({id:"line-paths",updateTriggers:{getColor:k.getLineColor,getWidth:k.getLineWidth}}),{data:n,fp64:E,widthScale:h,widthMinPixels:d,widthMaxPixels:v,rounded:y,miterLimit:g,getPath:m,getColor:T,getWidth:P}),B=R&&new c.PointLayer(this.getSubLayerProps({id:"points",updateTriggers:{getColor:k.getFillColor,getRadius:k.getRadius}}),{data:t,fp64:E,radiusScale:_,radiusMinPixels:b,radiusMaxPixels:x,getPosition:m,getColor:A,getRadius:O});return[!u&&D,N,F,j,B,u&&D]}}]),t}(a.b);y.layerName="GeoJsonLayer",y.defaultProps=v},function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e;switch(s()(e.type,"GeoJSON does not have type"),e.type){case"GeometryCollection":return s()(Array.isArray(e.geometries),"GeoJSON does not have geometries array"),e.geometries.map(function(e){return{geometry:e}});case"Feature":return[e];case"FeatureCollection":return s()(Array.isArray(e.features),"GeoJSON does not have features array"),e.features;default:return[{geometry:e}]}}function i(e){var t=[],n=[],r=[],i=[];return e.forEach(function(e){s()(e&&e.geometry,"GeoJSON does not have geometry");var a=e.geometry,u=a.type,l=a.coordinates,c=e.properties;switch(o(u,l),u){case"Point":t.push(e);break;case"MultiPoint":l.forEach(function(n){t.push({geometry:{coordinates:n},properties:c,feature:e})});break;case"LineString":n.push(e);break;case"MultiLineString":l.forEach(function(t){n.push({geometry:{coordinates:t},properties:c,feature:e})});break;case"Polygon":r.push(e),l.forEach(function(t){i.push({geometry:{coordinates:t},properties:c,feature:e})});break;case"MultiPolygon":l.forEach(function(t){r.push({geometry:{coordinates:t},properties:c,feature:e}),t.forEach(function(t){i.push({geometry:{coordinates:t},properties:c,feature:e})})})}}),{pointFeatures:t,lineFeatures:n,polygonFeatures:r,polygonOutlineFeatures:i}}function o(e,t){var n=u[e];for(s()(n,"Unknown GeoJSON type "+e);t&&--n>0;)t=t[0];s()(t&&Number.isFinite(t[0]),e+" coordinates are malformed")}t.a=r,t.b=i;var a=n(1),s=n.n(a),u={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(6),s=n(127),u=n(122),l=n(524),c=n(525),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.reflectivity=e,o.blur=n,o.framebuffer=null,o.setNeedsRedraw(),o}return o(t,e),f(t,[{key:"getShaders",value:function(){return{vs:l.a,fs:c.a,modules:[],shaderCache:this.context.shaderCache}}},{key:"initialize",value:function(e){var t=e.gl;e.layerManager;this.unitQuad=new a.h(t,Object.assign({},this.getShaders(),{id:"reflection-effect",geometry:new a.g({drawMode:a.f.TRIANGLE_FAN,vertices:new Float32Array([0,0,0,1,0,0,1,1,0,0,1,0])})})),this.framebuffer=new a.e(t,{depth:!0})}},{key:"preDraw",value:function(e){var t=e.gl,n=e.layerManager,r=n.context.viewport,i="undefined"!==typeof window&&window.devicePixelRatio||1;this.framebuffer.resize({width:i*r.width,height:i*r.height});var o=r.pitch;this.framebuffer.bind(),n.setViewport(new u.a(Object.assign({},r,{pitch:-180-o}))),t.clear(a.f.COLOR_BUFFER_BIT|a.f.DEPTH_BUFFER_BIT),n.drawLayers({pass:"reflection"}),n.setViewport(r),this.framebuffer.unbind()}},{key:"draw",value:function(e){e.gl,e.layerManager;this.unitQuad.render({reflectionTexture:this.framebuffer.texture,reflectionTextureWidth:this.framebuffer.width,reflectionTextureHeight:this.framebuffer.height,reflectivity:this.reflectivity,blur:this.blur})}},{key:"finalize",value:function(e){e.gl,e.layerManager}}]),t}(s.a);t.a=p},function(e,t,n){"use strict";t.a="#define SHADER_NAME reflection-effect-vs\n\nattribute vec3 vertices;\n\nvarying vec2 uv;\n\nvoid main(void) {\n  uv = vertices.xy;\n  gl_Position = vec4(2. * vertices.xy - vec2(1., 1.), 1., 1.);\n}\n"},function(e,t,n){"use strict";t.a='#define SHADER_NAME reflection-effect-fs\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D reflectionTexture;\nuniform int reflectionTextureWidth;\nuniform int reflectionTextureHeight;\n\nuniform float reflectivity;\nuniform float blur;\n\n\nvarying vec2 uv;\n\n#define KERNEL_SIZE 7\n\n/*\n * Samples from tex with a gaussian-shaped patch, centered at uv and\n * with standard deviation sigma.  The size of the texture in\n * pixels must be specified by dim\n */\nvec4 sample_gaussian(sampler2D tex, vec2 dim, vec2 uv, float sigma) {\n  if (sigma == 0.0) {\n    return texture2D(tex, uv);\n  }\n\n  vec2 delta = 1.0 / dim;\n  vec2 top_left = uv - delta * float(KERNEL_SIZE+1) / 2.0;\n\n  vec4 color = vec4(0);\n  float sum = 0.0;\n  for (int i = 0; i <  KERNEL_SIZE; ++i) {\n    for (int j = 0; j < KERNEL_SIZE; ++j) {\n      vec2 uv2 = top_left + vec2(i, j) * delta;\n      float d = length((uv2 - uv) * dim);\n      float f = exp(-(d*d) / (2.0*sigma * sigma));\n      color += f * texture2D(tex, uv2);\n      sum += f;\n    }\n  }\n  return color / sum;\n}\n\nvoid main(void) {\n  //map blur in [0, 1] to sigma in [0, inf]\n  //alpha will determine the "steepness" of our curve.\n  //this was picked just to make the scale feel "natural"\n  //if our image is 1000 pixels wide, a blur of 0.5 should correspond\n  //to a sigma of 1 pixels\n  float alpha = 1000.0;\n  float sigma = blur / (alpha * (1.0 - blur));\n  //let this be our standard deviation in terms of screen-widths.\n  //rewrite this in terms of pixels.\n  sigma *= float(reflectionTextureWidth);\n\n\n  gl_FragColor = sample_gaussian(reflectionTexture, vec2(reflectionTextureWidth,\n    reflectionTextureHeight), vec2(uv.x, 1. - uv.y), sigma);\n  //because our canvas expects alphas to be pre-multiplied, we multiply by whole\n  //color vector by reflectivity, not just the alpha channel\n  gl_FragColor *= reflectivity;\n}\n'},function(e,t,n){"use strict";function r(e,t){for(;e;){if(e===t)return!0;e=Object.getPrototypeOf(e)}return!1}t.a=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(0),s=(n.n(a),n(2)),u=n.n(s),l=n(61),c=n(8),f=n(528),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=c.d.ViewportControls,d=c.d.TransitionManager,v={viewportState:u.a.func,state:u.a.object,width:u.a.number.isRequired,height:u.a.number.isRequired,longitude:u.a.number.isRequired,latitude:u.a.number.isRequired,zoom:u.a.number.isRequired,bearing:u.a.number,pitch:u.a.number,altitude:u.a.number,position:u.a.array,maxZoom:u.a.number,minZoom:u.a.number,maxPitch:u.a.number,minPitch:u.a.number,onViewportChange:u.a.func,transitionDuration:u.a.number,transitionInterpolator:u.a.object,transitionInterruption:u.a.number,transitionEasing:u.a.func,onTransitionStart:u.a.func,onTransitionInterrupt:u.a.func,onTransitionEnd:u.a.func,scrollZoom:u.a.bool,dragPan:u.a.bool,dragRotate:u.a.bool,doubleClickZoom:u.a.bool,touchZoomRotate:u.a.bool,getCursor:u.a.func,controls:u.a.shape({events:u.a.arrayOf(u.a.string),handleEvent:u.a.func})},m=function(e){return e.isDragging?f.a.GRABBING:f.a.GRAB},y=Object.assign({},d.defaultProps,{onViewportChange:null,scrollZoom:!0,dragPan:!0,dragRotate:!0,doubleClickZoom:!0,touchZoomRotate:!0,getCursor:m}),g=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isDragging:!1},n}return o(t,e),p(t,[{key:"componentDidMount",value:function(){this._eventManager=new l.a(this.eventCanvas),this._controls=this.props.controls||new h(this.props.viewportState),this._controls.setOptions(Object.assign({},this.props,{onStateChange:this._onInteractiveStateChange.bind(this),eventManager:this._eventManager})),this._transitionManger=new d(this.props)}},{key:"shouldComponentUpdate",value:function(e,t){if(this._transitionManger){return!this._transitionManger.processViewportChange(e)}return!0}},{key:"componentWillUpdate",value:function(e){this._controls&&this._controls.setOptions(e)}},{key:"componentWillUnmount",value:function(){this._eventManager.destroy()}},{key:"_onInteractiveStateChange",value:function(e){var t=e.isDragging,n=void 0!==t&&t;n!==this.state.isDragging&&this.setState({isDragging:n})}},{key:"render",value:function(){var e=this,t=this.props,n=t.width,r=t.height,i=t.getCursor,o={width:n,height:r,position:"relative",cursor:i(this.state)};return Object(a.createElement)("div",{key:"map-controls",ref:function(t){return e.eventCanvas=t},style:o},this.props.children)}}]),t}(a.Component);t.a=g,g.displayName="ViewportController",g.propTypes=v,g.defaultProps=y},function(e,t,n){"use strict";t.a={GRABBING:"-webkit-grabbing",GRAB:"-webkit-grab",POINTER:"pointer"}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(0),s=(n.n(a),n(226)),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.controller=null,n}return o(t,e),u(t,[{key:"componentDidMount",value:function(){this.controller=new s.a(Object.assign({},this.props,{canvas:this.eventCanvas}))}},{key:"componentWillUpdate",value:function(e){this.controller.setProps(e)}},{key:"componentWillUnmount",value:function(){this.controller.finalize()}},{key:"render",value:function(){var e=this,t=this.props,n=t.width,r=t.height,i={width:n,height:r,position:"relative"};return Object(a.createElement)("div",{key:"map-controls",ref:function(t){return e.eventCanvas=t},style:i},this.props.children)}}]),t}(a.PureComponent);t.a=l,l.displayName="MapController",l.propTypes=s.a.propTypes,l.defaultProps=s.a.defaultProps},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(0),s=(n.n(a),n(227)),u=n(62),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.controller=null,n}return o(t,e),l(t,null,[{key:"getViewport",value:function(e){return new u.a(e)}}]),l(t,[{key:"componentDidMount",value:function(){this.controller=new s.a(Object.assign({},this.props,{canvas:this.eventCanvas}))}},{key:"componentWillUpdate",value:function(e){this.controller.setProps(e)}},{key:"componentWillUnmount",value:function(){this.controller.finalize()}},{key:"render",value:function(){var e=this,t=this.props,n=t.width,r=t.height,i={width:n,height:r,position:"relative"};return Object(a.createElement)("div",{key:"map-controls",ref:function(t){return e.eventCanvas=t},style:i},this.props.children)}}]),t}(a.PureComponent);t.a=c,c.displayName="OrbitController",c.propTypes=s.a.propTypes,c.defaultProps=s.a.defaultProps},function(e,t){e.exports={MAPBOX_ACCESS_TOKEN:"pk.eyJ1IjoiZWRkeWlvbmVzY3UiLCJhIjoiY2o5OWpuM3lxMHRudzMzczQwZnRmdHBldSJ9.JLZmr-FHAf0c7UT6JpNOWA",MAP_STYLE:"mapbox://styles/eddyionescu/cj9btlvm2423a2sprnbgpk9r5"}},function(e,t){},function(e,t){e.exports=[[-80.52945144,43.49813693],[-80.54321203,43.49721126],[-80.54515806,43.48162357],[-80.5411648,43.4732381],[-80.53440443,43.46885718],[-80.52298867,43.46414138],[-80.52336904,43.462144],[-80.51836079,43.45983591],[-80.49913146,43.45317562],[-80.48734599,43.44964771],[-80.49370802,43.4501848],[-80.4894232,43.448626],[-80.4753731,43.44240342],[-80.48359184,43.4462947],[-80.47787648,43.43358158],[-80.44180343,43.42232678],[-80.49080288,43.45192775],[-80.46308195,43.42282486],[-80.51205622,43.45728346]]},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAABGdBTUEAALGPC/xhBQAAGWtJREFUeAHtnXuwX1V1x8/NgyTkhRRQdFpSijwEO4BUW8vo3KBMRYapONLW8n6OaGtHp9LK9J+22JkyrS0UGFB5BKa02CLyaDpgEkZAQR6TgrQ8HBvqgEAkEB4JjyS3n+/lXr2X3CT3t/c+5+x9znfNrDm/3+/+1t5rfdbe6+zz+t2qspiACZiACZiACZiACZiACZiACZiACZiACZiACZiACZiACZiACZiACXSMwFDH4pkYjmJ7F7rfBH0HrxeO6QK2i9AR9CX05bGtXj+NPjpBn+S1vmcphADJGtpI/l8n/1tQBsN+fPbz/PN+Uv7528/zz9+e5v2jM9Cd0HlV9SSf8VH3hLg6I+Sq+k10GF2Kvg+dj6aQV2jkfnQlugq9G2VsWXIhwOzc6YUJ+ed90vwzUZR/5X7lLuSf953If+kFYDEJOQ79FPrb6M5oE7KBTu5E/w29Dl2PWhomsK6qFrOXPo7J/im00fwzce5Cv8nq4rpdC85/iQVgFuPsd9AT0GPQuWib8iqd34hejf4nugm11ESAiT7r+czyzyS6Cb+WvY3887qo/JdUALR3PwP9U1TH9jmKzhWcj34N1SrBkogAE2xnlvhnsM06/0yo8zlE+BrbIvJfQgHQibqz0S+guycaT3U3s5YO/h69GH2x7s663D4TfhF7/LMZqF/gdRH5x9e1+PpVVgQX8Trr/OdcADi8q85Cz0NhWaQwdqtz0UtRDhct0yXABJoBvLMYoOfxusj84/vz+H4uzl/K6yzzn2sBOIyBcgmqbRfkPoL4DKqtZQcEWOofxsS5BO1E/plk97E3O3txVd27g9Ab/7P2sjmJLttp2XwP2onkj8FVLIpJsSlGyxQEmPDzObN/Mdt7ujL5FaZiYfd/91hsWeU/pxXAe2GlS2r7C1qH5RFiOw59qMMxDhwak6NX+d81k/znsgI4nRGjPWTXJ78mhmJUrIrZAgGW/L3L/1jMree/7RWA7t77Oqpr+n0U3Tugwd+Ju8oGTSBLY92993W2vcw/k++aXarqNLat5b/NArCQAfMt9IhBB07Hvr+CeD6B6hmE3giTfiGT/1tse51/JuAKisAn2LaS/7YKwB6M9OXoob0Z8dsPVPeZH4U+u/2vdeOvjPQ9uF1uOZPf+SelTMIHZlXVx9gjNp7/NgrAXsT8HXSfBofzy/T1GKon/H6MrkdVccerrlYjUq7UVHujeoJwX1RPjDUlP6Kjj6BPNNVhG/1wbX80/0z+JvPfRqgD9clEHM0/9ww0mv+mC4Du5LoT1eSqU1RJV6KrxraCGyIapEvR4bGtVi51iorU4ejaOjtpq22q7e6byD+Tv+78txViVL9Mxsdn8VATe6LG8t9kAdDeVBOyruv7r9C2ziksQ3VcnfrOK10x0fHqiaiO2eu6nqubhVRwtGrpjDDpF3DMv4ptXfnvBCsm5H2cExhm20j+myoAs8nOLehHa8jSU7T5d+hlaCPQ6EfF7Ez0i+g70dRyGw1+HH0jdcNttMekn83kv4VtHflvI6Ra+2RS3kYROJrt67V2ROPaqzUhuq03dfKfps3PoHujevCmqclPV6N9qU/1LR/kS0oRKzHrhDD5dVtv6vx3gs1UQYiVmE31t9SfNbEC0DXeZQkd30xbF6F/gebypNUifPkr9LPoTDSV6HDj6lSNtdEOJ/1OYECnzH8bYbTSJ5PzRE4K1pr/uguA7nrTMW2q4+WHaet4dDWaoxyMU9egByZyTuc1dMys24eLE6rz/pz0S5n/4hhEOvwKJwUPY+9SW/5nRDq4PfN5/PE6NNXkv4K23o/mOvlxbdQ3+ShfU4jYiaFYFiXs9ecx+VPmv6j4Ezk7H4bfFMtE7W3VTJ0F4C/p7b1b9Tj4BzoRdgp6KrphcPPGLeSjfJXPKU7iiaFYFiUs/VPlv6i4a3D2IM4H6PCyFqnrEEBLYO2pWcFEiZbAx6K3RrXSnvGRdH09GrsKYkdQ6fBCh0DZC9f7D8Th1ey5YvOffaxNOMgk3QTIQ7g/4Iep+5uRusGx9i5mG5v8dbQxjJY6+YVCvisGxRIjYimmRQiTX8/0x+a/iFibcFIsxbSOvupYAejM9VWRzmrPfwR6T2Q7uZh/AEd0c1LsSuAk2liWS1BT+cHS/0QGbGz+p2o6+LPZn19Uzf48+8950xzuG0eqN/7xJTSXi0xvho73J3FVIGn+p0lk2uzn8s0fo3tO22LrL+q4+RhUP7HdJfkYwXwbnR0R1E+x/VX0tYg2ajNl4s+lAMTmP61/C2dUOz/2zqA2N+zLPWYvbQmyrcnopxSAvZm0r6ZqP/UhwKk4FjP5Fdfn0K5NfsW1fCw2vQ4VsT0t1LhuOyZ/ivwndXOIAhAqMbahfe7Abs8xxjv42vT/HE5n6z50zPelrT8e6JN/5tuXDWRR1pcVm2KMETHO7vhax6nsmWLzH8OlF7ZiDOuYVeQkTikLwPG0vNek1gd78xhf18+Ad10Uo2INFTEW66yES1XHMzBj8p9VPLk6I8Zincq/lAXgnAiniKs6GW3yfv4Id6NMFePJqGIOlRjWoX1u145gsvNpuw4X/MeUrFMVgA/CU7f9hsrlGH4/1LhAO8WqmENFrMU8C+FceWz+s4ijICf2G2Me7XKqAqAHfkJF18j7uPdQzDH3B8QwD83VlHZco87Glykd7OCHMD8xRVgpCsAcHPm9CGf+FtvnIuxLNVXMij1UxFzsWxWWo3M4MRWT/1b9L7VzmOvfokfnP0UBOBqIXJ4MEq5q1HOHU5A3zRvp7i4xCBExF/tWZT0+MBBD89+q7yV3LuZiHxtDigKge/VD5QIMx3+YM7SNku0UuxiESgz70D4n2XGbTOs+THKoR29SsE9RAIYDmXMY08yvngT615TZJXQkFiESyj6kr23Z5ODDtnzr+ufR7GMLwAEQDr3z71Zsn+l6hqYRnxiIRYiIvXLQirB8icl/Kz53rNM9x3IQHFZsAYipQMuCve6eYQyLmBxEkeShjdb6jnK8Q8bkYGlMOLEFILRzPcxwY4zjHbMVi9AHPEJzEI1wKHLwRTvgBvRfhaKKcGwBOCQwB3dhtzHQtotmYvG9wMBCcxDY3SSzNvue5EiP30TlIKYA6BrkkkDwqwLtumy2MjC4JdhFXw8etO+xa9Dq29IugSVjuQjyIqYA7EOPofYuAFunK5SJcqBcNCo80LAPAy80/4362uXOlAPlIjTGmATuF9opdg9G2HbV9KGIwGJyEdQt1y0b7zPI0R4YxeSijQLAz6z04qm/QYeebgoSmxBpfDKy52m8zxAwfbCJyUVMAdg9EO6jgXZ9MAtlE5qLYKacfW68z2BnO24Yk4uYAsCvLAbJmiCrfhiFsgnNRQzVNvqM8bfLtsG5aKMAvNjlTETGFsomeACE+suys/E+Q33tul1MLtooADrWtUxNIJRNG5OxjT6npuZPg3PhApDX4An9SbQFTYfBcWfwoGva1673Ry6C8x9TADYHgp0ZaNcHs9B8hOYihmkbfcb422Xb4FyEDjjBLGm5WkryQ/eqoSuHGC6h+Y/pc3DbzRwhh0qMbWifYXbB+XcBCANel1VoAWh8MjKtGu8zBPrIs1uqkccH/7kF2ci2BInJRcw/mAgdALuUALUlH0PZhOYiJsw2+hzc35GR6tXfXVvNPGoe/5mRo+XpyCsj1eb/4PksbAuR4Fy0UQB+rRCobbgZek938ACICLKNPoPcHVm3udp0TfAqOajPho2CcxFzCPBkYJC+hXTb4Pbd9p+2+5fQXGy30e39kX1p431uz58+/y0mFzEFIPS21V1Jlm8j3XrEionYhEhoLkL6GrVh4DTeZ7CzHTeMyUUbBUDpeF/HcxISXgyTxicjR8eN9xkCtQ82MbmIKQBrgPtaIODhQLsum4UyUQ7WNA1mMX2y9AzNf9PudrY/5UC5CA0wpgDoGsmPAjteGmjXZbNQJspB49erGHhb2POE5r/LeWw0NuVAuQjtNOYqgPr8AXpgQOeHYrMb+rMA2y6aiIWYhIhy0Iow8H7AAAzJf6P+Du06s5r58QEvA96ysdLVg9yFHNwT42NsAVhJ56cEOKCVx++j/xRg20UTsQhdjSkHrQiTPzT/zfk7NFTNvWH3aujdgw31kTMWVBs//Ez29wKQg1UxMEMH3XifMYPvhPFGvI36T68xOYhCP+fNAhDVRt3GQ3vMGHjyyycVDNnmLrE5iI1QP2EVejb4/dgekDvgBvwTg98I7EfsQ39GLLDLX5jNf7Pv0Pz/oqE6X81kkRwqMbahfQ5m9+hYDgazmvDt2AKgplZMaG/Ql18c1KCD349hEMM+CUoGUOs+JAmkwEZSsE9RAP41gt2J2P5yhH3ppopdDEIlhn1on5PsOAZt3YdJDvXoTQr2KQrAHTBfE8h9NnZfCrTtgpliF4MQWYOR2LcqPL10B4vsNa060cPOxVzsY0NPUQAoRNU1EY6cha2Og/smilmxh8rVGIp9q8JAjM1/q/4X3Pk1Y+yjQkhRAOTAsggvtAe8KMK+VFPFHLr3V8wqAFkIgygm/1nEUJoTqZjTThJ5nFZuj2hpGNs/jLAvzVSxKuZQuR1DMc9CuBX1cfZGt2fhTA+cEGsxTxFqqgIgX74S6ZBuCloS2UYJ5oox9gaoWNbJOTEos/MpeZCZNJiSdcoCcBt8Ym5L1a/h6IxyzLI4kxRt0w3Fdh0a+ss/aliMxTorIaDbGJgx+c8qnlydgfG9Yp3Kv5QFQD6dF+mYbg76amQbOZsrttCbfsbjimU83k4d25x9qyPeNtr865Sdpi4AN+Hc6kgHP4v9OZFt5Gj+Zzil2GJEbMU4S2HPdBN7qNj8J41t5LnNVbUx4GIJNqO2Sb2Jawy2/yXGca1MtqbN5HI4LX4XjW37VNq4Irl37TR4Ct1eHtm1RvGH0Dsj26nVfF1VHU7iv4uzsflP5ueMj8yrZp+5oBraeXoujWwYqd647OVqy3f4YdBMBM/1E6Uf4iejkuZ/ekQGh3ArJh8d3GySBaV79Dr5NyZ9Wt6b03D5UnRmpOtXYX9yZBuNmD9fVVcyWE9qpLOedMJEveptNeS/rgKwD3l5DE3R/rm0U+oZ5i/je4rjYuZUtR+6Fs1eXuI3HzfxkBhFgDFriSXAJHp+Fvnnn0Ykz3/qcwDjseqXYq4ffxO51QTSHnROZDtNmstX+Zxi8svvP0eTJ18N1yEaqAxa+WxJQACWX65j8su1FHvobYWo4vI0uvu2vjDg5zq5dBz6+IB2TX/93XSoS30HJ+r4Kdp5V6K2Gm2GZcu3WQUc02inHeuMCfoUy6ja8l/XCkBp2IJ+EGU1mEQ0oe5Hz0DrLFyhzsqnM1H5mGryi92H0SJlNudwgPKTIp3PwGnYbWKC1pr/OguAEOpQQJOCHUESYSVUXYZ+Hz0kSYtpGpEv8knLfvmYQsRM7MSwSOF/VmsF+DkG8htFBtCi0zBT/s9aXHP+6y4AQngF+i96kVA+QFv3oleh+ydsd9Cm1Ld8kC/yKaVcS2NiV7SwfL2RkRx7CbRoBiHOUwCuhV3t3OinMdFtorF3wU3lrA41/h39B/R7U32hhs90aPMn6CfROoqoCoruiuyMcH+AcvNbnQmoxkCYlPcy+RvJf5MFQBNlDapfwalLtFy+GtXeM/XJQp3c+wP0BFSXOesSHTMvQVXYOiOsAma8QP7Z1pn/4nkxIX+yC/ln20j+mywASs4i9P9QDm1qlyfoYSW6Cl2NqiC8ik5H5vIlTfiD0WF0KboXWresp4NfQV+su6M22mfyL+LKQFP5byPEqD6ZjOuZ/HtpG9XQAMb01bgsoceH0Z0b7lkV9Qn0f1EB5n6VUWUzeuJOJ+9UmPZGNQlnoE3KBjo7EF3TZKdN98XNtUvQNvLfdKiD9rdhXlUdhGp8NiZtFAAF9x70AXSO3lhG/8ee/jPQf/eBBZX3PVzffIAVgfNPwpmEr3Gn36HsgRrPf9N7ufHxrUCPQH156E0GYtF48seT0fRWA30m+Wfg9z7/YiAWbUx+5b2tAqC+70J1Fn2z3vRUFLsYiEWvhJNBd7EC+CQToLf5V+xiIBZtJb/NAqCYb0JPR+HQO1HMil0Meik82jqafyZC7/I/FvPpYwxay3/bBUCBX4meoxc9E8V8Zc9i3ipcrndfyWToXf4Vs2LfCkjDH+RQABTy+ejfNBx7m90pVsVsgQCXvs5nIPYm/4pVMeeQfApRVnIB3vxRVh6ld+ZCmvzj9M2W3yL3CFzAsUCn88+Eu5A9fzb5z60AyJ9voKeUP5ynjOAKPj0N7d0x75Q03vIhUIZeIP9sO5l/BvcV7PlPY5tN/vElO9FhybXocdl5FueQfvL806huSLJsgwAzYwYrgU7mnz3/p5lwWeU/xwKgoTEbvR49Wm86IDcTw7Fo7697TyeXFIHZrASuZ9uJ/DPJbmbPfyzb7PKfawHQONH9+Jo4ukmmZFmB8xrI030OoeRYk/nO5J9LEbiZbdH5Z4KtYPIfzTbL/OdcADSY5qO3onr8tkTRI7BHoq+U6HzbPjP553M4UHT+WfYfySTLNv+5XAbc1lgTuKPQe7f1hYw/l8/yPdvkZ8xu1LWxiXMU2+LyP+azfM86//hXhLCKqrSUPrQIb9980ElLV1axllgCrAJG88+KoIj8M6keIOYj2Ptnn/9SCoDG0K6oisDBepOxrMY3Tf51GftYnGvryT+nz1dQBLLOPxNqNcvqIxYXkv+SCoAG7S+hK9Ff15sM5UF8Woo+l6Fvxbv0IvnfTP4pAlnmn8n04Ezyv6ig/JdWADSId0NXoQfpTUbyQ3wZRn+WkU+dc4UisBu/JZBl/nmmf5jJX1T+SywAGtR7oBoE+mGRHETP8mvyP5uDM1334SXyzwX1rPLPjSvDPNNfXP5LLQAa4+9ANQja/Flw+fEIqsn/tN5YmiHwMvl/PZP870T+FxSa/9wvA25vNGnC6XhbE7AtUd/ywZO/4Qxows3JIP/yodTJr5SVvAIYH3JtrQS85x/PQIvbFlcCj5S85x9PWRcKgGJ5O6rDgQP0pgH5H/rQsv+ZBvpyFzsgQBF4+9jhQGP5H5v8xee/5EOAicNCidCEfHjihzW9Vh+e/DXBDWmWJfgzmpDYNpL/rkx+se5KAVAs40XgIb2pSdS2J39NcGOaVRHQmXjaqDX/6kN9xfiak22XCoC4rkU1CHQ3XmpRm2pbfVgyJMBluLW6Fj9UQ/7VptpWHxmGHuxS1wqAQOguPN2Ke7/eJBK1pTbVtiVjAroLj0Gt/zmQLP9qS22WdIffdFPUxQKg2NehmrB3602kqA21pTYtBRDQffgjCfOvtkq5t7+A9DTq4kJ6uwMlh0EqW7VhKZAASV9I1b4DHQnUO9RGgaHb5QkE5vNaTxEOWgRkI1tLwQRIun5UZMWgBUA2si04dLs+gcBcXi9Hp1sE9F3ZWDpAgKTPpQAsH6AILJdNB0J3CBMIcPm2ugHdURHQd/RdS4cIkPSd2KvfsKMioO/oux0K3aFMIMCVnNGfnN5WEdDPUes7lg4SIOmzKADXbqcIXKvvdDB0hzSBgK58XI6+tQjos65eFZkQfr9fknT934HL31oE9Jn+1m86/YmeS7vVheh4EdBrfWbpAQGSPsSEv3C8COi1PutB6A7xLQS+wnuppYcEXiD30h6G7pBNwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMwARMIDsC/w9qosUv21AdlAAAAABJRU5ErkJggg=="},function(e,t,n){"use strict";function r(e,t){return i.wrapJsForReason(o.default,{onSuggestSelect:e},t)}var i=n(44),o=n(536);n(543),t.make=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(0),p=r(f),h=n(3),d=r(h),v=n(537),m=r(v),y=n(538),g=r(y),_=n(539),b=r(_),x=n(237),w=r(x),E=n(540),S=r(E),T=n(541),A=r(T),O=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onInputChange=function(e){e||n.props.onSuggestSelect(),n.setState({userInput:e},n.onAfterInputChange)},n.onAfterInputChange=function(){n.showSuggests(),n.props.onChange(n.state.userInput)},n.onInputFocus=function(){n.props.onFocus(),n.showSuggests()},n.onInputBlur=function(){n.state.ignoreBlur||n.hideSuggests()},n.onNext=function(){return n.activateSuggest("next")},n.onPrev=function(){return n.activateSuggest("prev")},n.onSelect=function(){return n.selectSuggest(n.state.activeSuggest)},n.onSuggestMouseDown=function(){return n.setState({ignoreBlur:!0})},n.onSuggestMouseOut=function(){return n.setState({ignoreBlur:!1})},n.onSuggestNoResults=function(){n.props.onSuggestNoResults(n.state.userInput)},n.hideSuggests=function(){n.props.onBlur(n.state.userInput),n.timer=setTimeout(function(){n.setState({isSuggestsHidden:!0,activeSuggest:null})},100)},n.selectSuggest=function(e){if(e||(e={label:n.state.userInput}),n.setState({isSuggestsHidden:!0,userInput:"object"!==l(e.label)?e.label:e.description}),e.location)return n.setState({ignoreBlur:!1}),void n.props.onSuggestSelect(e);n.geocodeSuggest(e)},n.state={isSuggestsHidden:!0,isLoading:!1,userInput:e.initialValue,activeSuggest:null,suggests:[]},n.onInputChange=n.onInputChange.bind(n),n.onAfterInputChange=n.onAfterInputChange.bind(n),e.queryDelay&&(n.onAfterInputChange=(0,m.default)(n.onAfterInputChange,e.queryDelay)),n}return a(t,e),c(t,[{key:"componentWillReceiveProps",value:function(e){this.props.initialValue!==e.initialValue&&this.setState({userInput:e.initialValue})}},{key:"componentWillMount",value:function(){if("undefined"!==typeof window){var e=this.props.googleMaps||window.google&&window.google.maps||this.googleMaps;if(!e)return void(console&&console.error("Google map api was not found in the page."));this.googleMaps=e,this.autocompleteService=new e.places.AutocompleteService,this.geocoder=new e.Geocoder}}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer)}},{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"update",value:function(e){this.setState({userInput:e}),this.props.onChange(e)}},{key:"clear",value:function(){this.setState({userInput:""},this.hideSuggests)}},{key:"searchSuggests",value:function(){var e=this;if(!this.state.userInput)return void this.updateSuggests();var t={input:this.state.userInput};this.state.userInput.length<this.props.minLength||(["location","radius","bounds","types"].forEach(function(n){e.props[n]&&(t[n]=e.props[n])}),this.props.country&&(t.componentRestrictions={country:this.props.country}),this.setState({isLoading:!0},function(){e.autocompleteService.getPlacePredictions(t,function(t){e.setState({isLoading:!1}),e.updateSuggests(t||[],function(){e.props.autoActivateFirstSuggest&&!e.state.activeSuggest&&e.activateSuggest("next")})})}))}},{key:"updateSuggests",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments[1],r=[],i=this.state.userInput,o=new RegExp(s(i),"gim"),a=this.props.skipSuggest,u=this.props.maxFixtures,l=0,c=null;this.props.fixtures.forEach(function(e){l>=u||!a(e)&&e.label.match(o)&&(l++,e.placeId=e.label,e.isFixture=!0,e.matchedSubstrings={offset:e.label.indexOf(i),length:i.length},r.push(e))}),t.forEach(function(t){a(t)||r.push({description:t.description,label:e.props.getSuggestLabel(t),placeId:t.place_id,isFixture:!1,matchedSubstrings:t.matched_substrings[0]})}),c=this.updateActiveSuggest(r),this.props.onUpdateSuggests(r,c),this.setState({suggests:r,activeSuggest:c},n)}},{key:"updateActiveSuggest",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.state.activeSuggest;if(t){var n=e.filter(function(e){return t.placeId===e.placeId&&t.isFixture===e.isFixture})[0];t=n||null}return t}},{key:"showSuggests",value:function(){this.searchSuggests(),this.setState({isSuggestsHidden:!1})}},{key:"activateSuggest",value:function(e){if(this.state.isSuggestsHidden)return void this.showSuggests();var t=this.state.suggests.length-1,n="next"===e,r=null,i=0,o=0;for(o;o<=t;o++)this.state.suggests[o]===this.state.activeSuggest&&(i=n?o+1:o-1);this.state.activeSuggest||(i=n?0:t),i>=0&&i<=t&&(r=this.state.suggests[i]),this.props.onActivateSuggest(r),this.setState({activeSuggest:r})}},{key:"geocodeSuggest",value:function(e){var t=this,n=null;n=e.placeId&&!e.isFixture?{placeId:e.placeId}:{address:e.label,location:this.props.location,bounds:this.props.bounds,componentRestrictions:this.props.country?{country:this.props.country}:null},this.geocoder.geocode(n,function(n,r){if(r===t.googleMaps.GeocoderStatus.OK){var i=n[0],o=i.geometry.location;e.gmaps=i,e.location={lat:o.lat(),lng:o.lng()}}t.props.onSuggestSelect(e)})}},{key:"render",value:function(){var e=this,t=(0,w.default)(this.props),n=(0,d.default)("geosuggest",this.props.className,{"geosuggest--loading":this.state.isLoading}),r=this.props.label&&t.id,i=p.default.createElement(S.default,u({className:this.props.inputClassName,ref:function(t){return e.input=t},value:this.state.userInput,ignoreEnter:!this.state.isSuggestsHidden,ignoreTab:this.props.ignoreTab,style:this.props.style.input,onChange:this.onInputChange,onFocus:this.onInputFocus,onBlur:this.onInputBlur,onKeyDown:this.props.onKeyDown,onKeyPress:this.props.onKeyPress,onNext:this.onNext,onPrev:this.onPrev,onSelect:this.onSelect,onEscape:this.hideSuggests},t)),o=p.default.createElement(A.default,{isHidden:this.state.isSuggestsHidden,style:this.props.style.suggests,suggestItemStyle:this.props.style.suggestItem,userInput:this.state.userInput,isHighlightMatch:this.props.highlightMatch,suggestsClassName:this.props.suggestsClassName,suggestItemClassName:this.props.suggestItemClassName,suggests:this.state.suggests,hiddenClassName:this.props.suggestsHiddenClassName,suggestItemActiveClassName:this.props.suggestItemActiveClassName,activeSuggest:this.state.activeSuggest,onSuggestNoResults:this.onSuggestNoResults,onSuggestMouseDown:this.onSuggestMouseDown,onSuggestMouseOut:this.onSuggestMouseOut,onSuggestSelect:this.selectSuggest,renderSuggestItem:this.props.renderSuggestItem,minLength:this.props.minLength});return p.default.createElement("div",{className:n},p.default.createElement("div",{className:"geosuggest__input-wrapper"},r&&p.default.createElement("label",{className:"geosuggest__label",htmlFor:t.id},this.props.label),i),p.default.createElement("div",{className:"geosuggest__suggests-wrapper"},o))}}]),t}(p.default.Component);O.propTypes=b.default,O.defaultProps=g.default,t.default=O},function(e,t,n){(function(t){function n(e,t,n){function i(t){var n=v,r=m;return v=m=void 0,S=t,g=e.apply(r,n)}function o(e){return S=e,_=setTimeout(c,t),T?i(e):g}function u(e){var n=e-E,r=e-S,i=t-n;return A?x(i,y-r):i}function l(e){var n=e-E,r=e-S;return void 0===E||n>=t||n<0||A&&r>=y}function c(){var e=w();if(l(e))return f(e);_=setTimeout(c,u(e))}function f(e){return _=void 0,O&&v?i(e):(v=m=void 0,g)}function p(){void 0!==_&&clearTimeout(_),S=0,v=E=m=_=void 0}function h(){return void 0===_?g:f(w())}function d(){var e=w(),n=l(e);if(v=arguments,m=this,E=e,n){if(void 0===_)return o(E);if(A)return _=setTimeout(c,t),i(E)}return void 0===_&&(_=setTimeout(c,t)),g}var v,m,y,g,_,E,S=0,T=!1,A=!1,O=!0;if("function"!=typeof e)throw new TypeError(s);return t=a(t)||0,r(n)&&(T=!!n.leading,A="maxWait"in n,y=A?b(a(n.maxWait)||0,t):y,O="trailing"in n?!!n.trailing:O),d.cancel=p,d.flush=h,d}function r(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function i(e){return!!e&&"object"==typeof e}function o(e){return"symbol"==typeof e||i(e)&&_.call(e)==l}function a(e){if("number"==typeof e)return e;if(o(e))return u;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(c,"");var n=p.test(e);return n||h.test(e)?d(e.slice(2),n?2:8):f.test(e)?u:+e}var s="Expected a function",u=NaN,l="[object Symbol]",c=/^\s+|\s+$/g,f=/^[-+]0x[0-9a-f]+$/i,p=/^0b[01]+$/i,h=/^0o[0-7]+$/i,d=parseInt,v="object"==typeof t&&t&&t.Object===Object&&t,m="object"==typeof self&&self&&self.Object===Object&&self,y=v||m||Function("return this")(),g=Object.prototype,_=g.toString,b=Math.max,x=Math.min,w=function(){return y.Date.now()};e.exports=n}).call(t,n(20))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={fixtures:[],maxFixtures:10,initialValue:"",placeholder:"Search places",disabled:!1,className:"",inputClassName:"",location:null,radius:null,bounds:null,country:null,types:null,queryDelay:250,googleMaps:null,highlightMatch:!0,onActivateSuggest:function(){},onSuggestSelect:function(){},onSuggestNoResults:function(){},onUpdateSuggests:function(){},onFocus:function(){},onBlur:function(){},onChange:function(){},skipSuggest:function(){},getSuggestLabel:function(e){return e.description},renderSuggestItem:null,autoActivateFirstSuggest:!1,style:{input:{},suggests:{},suggestItem:{}},ignoreTab:!1,minLength:1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default={fixtures:i.default.array,maxFixtures:i.default.number,initialValue:i.default.string,placeholder:i.default.string,disabled:i.default.bool,className:i.default.string,inputClassName:i.default.string,suggestsClassName:i.default.string,suggestsHiddenClassName:i.default.string,suggestItemClassName:i.default.string,suggestItemActiveClassName:i.default.string,location:i.default.object,radius:i.default.oneOfType([i.default.string,i.default.number]),bounds:i.default.object,country:i.default.oneOfType([i.default.string,i.default.array]),types:i.default.array,queryDelay:i.default.number,googleMaps:i.default.object,highlightMatch:i.default.bool,onSuggestSelect:i.default.func,onFocus:i.default.func,onBlur:i.default.func,onChange:i.default.func,onKeyPress:i.default.func,onUpdateSuggests:i.default.func,skipSuggest:i.default.func,getSuggestLabel:i.default.func,renderSuggestItem:i.default.func,autoActivateFirstSuggest:i.default.bool,style:i.default.shape({input:i.default.object,suggests:i.default.object,suggestItem:i.default.object}),ignoreTab:i.default.bool,label:i.default.string,autoComplete:i.default.string,minLength:i.default.number}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=r(l),f=n(238),p=r(f),h=n(3),d=r(h),v=n(237),m=r(v),y=function(e){function t(){var e,n,r,a;i(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.onChange=function(){r.props.onChange(r.input.value)},r.onFocus=function(){r.props.onFocus()},r.onBlur=function(){r.props.onBlur()},r.onKeyPress=function(e){r.props.onKeyPress(e)},r.onInputKeyDown=function(e){switch(r.props.onKeyDown&&r.props.onKeyDown(e),e.which){case 40:e.shiftKey||(e.preventDefault(),r.props.onNext());break;case 38:e.shiftKey||(e.preventDefault(),r.props.onPrev());break;case 13:r.props.ignoreEnter&&e.preventDefault(),r.props.onSelect();break;case 9:r.props.ignoreTab||r.props.onSelect();break;case 27:r.props.onEscape()}},a=n,o(r,a)}return a(t,e),u(t,[{key:"shouldComponentUpdate",value:function(e,t){return(0,p.default)(this,e,t)}},{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"render",value:function(){var e=this,t=(0,m.default)(this.props),n=(0,d.default)("geosuggest__input",this.props.className);return c.default.createElement("input",s({className:n,ref:function(t){return e.input=t},type:"text"},t,{value:this.props.value,style:this.props.style,onKeyDown:this.onInputKeyDown,onChange:this.onChange,onKeyPress:this.onKeyPress,onFocus:this.onFocus,onBlur:this.onBlur}))}}]),t}(c.default.Component);y.defaultProps={className:"",value:"",ignoreTab:!1,onKeyDown:function(){},onKeyPress:function(){},autoComplete:"off"},t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=r(l),f=n(238),p=r(f),h=n(3),d=r(h),v=n(542),m=r(v),y=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),u(t,[{key:"shouldComponentUpdate",value:function(e,t){return(0,p.default)(this,e,t)}},{key:"isHidden",value:function(){return this.props.isHidden||0===this.props.suggests.length}},{key:"componentWillReceiveProps",value:function(e){e.suggests!==this.props.suggests&&0===e.suggests.length&&this.props.onSuggestNoResults()}},{key:"render",value:function(){var e=this,t=(0,d.default)("geosuggest__suggests",this.props.suggestsClassName,{"geosuggest__suggests--hidden":this.isHidden()},i({},this.props.hiddenClassName,this.props.hiddenClassName?this.isHidden():null));return c.default.createElement("ul",{className:t,style:this.props.style},this.props.suggests.map(function(t){var n=e.props.activeSuggest&&t.placeId===e.props.activeSuggest.placeId,r=t.key||t.placeId;return c.default.createElement(m.default,{key:r,className:t.className,userInput:e.props.userInput,isHighlightMatch:e.props.isHighlightMatch,suggest:t,style:e.props.suggestItemStyle,suggestItemClassName:e.props.suggestItemClassName,isActive:n,activeClassname:e.props.suggestItemActiveClassName,onMouseDown:e.props.onSuggestMouseDown,onMouseOut:e.props.onSuggestMouseOut,onSelect:e.props.onSuggestSelect,renderSuggestItem:e.props.renderSuggestItem})}))}}]),t}(c.default.Component);t.default=y,y.defaultProps={isHidden:!0,suggests:[]}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=r(l),f=n(3),p=r(f),h=function(e){function t(){var e,n,r,i;o(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.onClick=function(e){e.preventDefault(),r.props.onSelect(r.props.suggest)},i=n,a(r,i)}return s(t,e),u(t,[{key:"makeBold",value:function(e,t){return c.default.createElement("b",{className:"geosuggest__item__matched-text",key:t},e)}},{key:"formatMatchedText",value:function(e,t){if(!e||!t.matchedSubstrings)return t.label;var n=t.matchedSubstrings.offset,r=t.matchedSubstrings.length,i=n+r,o=this.makeBold(t.label.substring(n,i),t.label),a="",s="";return n>0&&(a=t.label.slice(0,n)),i<t.label.length&&(s=t.label.slice(i)),c.default.createElement("span",null,a,o,s)}},{key:"componentWillReceiveProps",value:function(e){e.isActive&&!this.props.isActive&&this.scrollIfNeeded()}},{key:"scrollIfNeeded",value:function(){var e=this.ref,t=e.parentElement,n=e.offsetTop-t.offsetTop<t.scrollTop,r=e.offsetTop-t.offsetTop+e.clientHeight>t.scrollTop+t.clientHeight;(n||r)&&(t.scrollTop=e.offsetTop-t.offsetTop-t.clientHeight/2+e.clientHeight/2)}},{key:"render",value:function(){var e=this,t=this.props.suggest,n=(0,p.default)("geosuggest__item",this.props.className,this.props.suggestItemClassName,{"geosuggest__item--active":this.props.isActive},i({},this.props.activeClassname,this.props.activeClassname?this.props.isActive:null)),r=t.label;return this.props.renderSuggestItem?r=this.props.renderSuggestItem(t):this.props.isHighlightMatch&&(r=this.formatMatchedText(this.props.userInput,t)),c.default.createElement("li",{className:n,ref:function(t){return e.ref=t},style:this.props.style,onMouseDown:this.props.onMouseDown,onMouseOut:this.props.onMouseOut,onClick:this.onClick},r)}}]),t}(c.default.Component);t.default=h,h.defaultProps={isActive:!1,className:"",suggest:{}}},function(e,t){},function(e,t,n){"use strict";function r(e,t,n,r,a){var s=e?e[0]:0;return i.wrapJsForReason(o.default,{disabled:s,onChange:t,options:n,value:r},a)}var i=n(44),o=n(545);n(556),t.make=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=n(546),h=r(p),d=n(3),v=r(d),m=n(2),y=r(m),g=n(0),_=r(g),b=n(12),x=n(547),w=r(x),E=n(548),S=r(E),T=n(549),A=r(T),O=n(552),P=r(O),C=n(553),k=r(C),R=n(555),M=r(R),I=function(e){return"string"===typeof e?e:null!==e&&JSON.stringify(e)||""},L=y.default.oneOfType([y.default.string,y.default.node]),D=y.default.oneOfType([y.default.string,y.default.number]),N=1,F=function(e,t){var n=e.inputValue,r=e.isPseudoFocused,i=e.isFocused,o=t.onSelectResetsInput;return!n||!o&&!(!i&&r||i&&!r)},j=function(e,t,n){var r=e.inputValue,i=e.isPseudoFocused,o=e.isFocused,a=t.onSelectResetsInput;return!r||!a&&!n&&!i&&!o},B=function(e,t){var n="undefined"===typeof e?"undefined":f(e);if("string"!==n&&"number"!==n&&"boolean"!==n)return e;var r=t.options,i=t.valueKey;if(r)for(var o=0;o<r.length;o++)if(String(r[o][i])===String(e))return r[o]},z=function(e,t){return!e||(t?0===e.length:0===Object.keys(e).length)},U=function(e){function t(e){a(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return["clearValue","focusOption","getOptionLabel","handleInputBlur","handleInputChange","handleInputFocus","handleInputValueChange","handleKeyDown","handleMenuScroll","handleMouseDown","handleMouseDownOnArrow","handleMouseDownOnMenu","handleTouchEnd","handleTouchEndClearValue","handleTouchMove","handleTouchOutside","handleTouchStart","handleValueClick","onOptionRef","removeValue","selectValue"].forEach(function(e){return n[e]=n[e].bind(n)}),n.state={inputValue:"",isFocused:!1,isOpen:!1,isPseudoFocused:!1,required:!1},n}return u(t,e),c(t,[{key:"componentWillMount",value:function(){this._instancePrefix="react-select-"+(this.props.instanceId||++N)+"-";var e=this.getValueArray(this.props.value);this.props.required&&this.setState({required:z(e[0],this.props.multi)})}},{key:"componentDidMount",value:function(){"undefined"!==typeof this.props.autofocus&&"undefined"!==typeof console&&console.warn("Warning: The autofocus prop has changed to autoFocus, support will be removed after react-select@1.0"),(this.props.autoFocus||this.props.autofocus)&&this.focus()}},{key:"componentWillReceiveProps",value:function(e){var t=this.getValueArray(e.value,e);e.required?this.setState({required:z(t[0],e.multi)}):this.props.required&&this.setState({required:!1}),this.state.inputValue&&this.props.value!==e.value&&e.onSelectResetsInput&&this.setState({inputValue:this.handleInputValueChange("")})}},{key:"componentDidUpdate",value:function(e,t){if(this.menu&&this.focused&&this.state.isOpen&&!this.hasScrolledToOption){var n=(0,b.findDOMNode)(this.focused),r=(0,b.findDOMNode)(this.menu),i=r.scrollTop,o=i+r.offsetHeight,a=n.offsetTop,s=a+n.offsetHeight;(i>a||o<s)&&(r.scrollTop=n.offsetTop),this.hasScrolledToOption=!0}else this.state.isOpen||(this.hasScrolledToOption=!1);if(this._scrollToFocusedOptionOnUpdate&&this.focused&&this.menu){this._scrollToFocusedOptionOnUpdate=!1;var u=(0,b.findDOMNode)(this.focused),l=(0,b.findDOMNode)(this.menu),c=u.getBoundingClientRect(),f=l.getBoundingClientRect();c.bottom>f.bottom?l.scrollTop=u.offsetTop+u.clientHeight-l.offsetHeight:c.top<f.top&&(l.scrollTop=u.offsetTop)}if(this.props.scrollMenuIntoView&&this.menuContainer){var p=this.menuContainer.getBoundingClientRect();window.innerHeight<p.bottom+this.props.menuBuffer&&window.scrollBy(0,p.bottom+this.props.menuBuffer-window.innerHeight)}if(e.disabled!==this.props.disabled&&(this.setState({isFocused:!1}),this.closeMenu()),t.isOpen!==this.state.isOpen){this.toggleTouchOutsideEvent(this.state.isOpen);var h=this.state.isOpen?this.props.onOpen:this.props.onClose;h&&h()}}},{key:"componentWillUnmount",value:function(){this.toggleTouchOutsideEvent(!1)}},{key:"toggleTouchOutsideEvent",value:function(e){e?!document.addEventListener&&document.attachEvent?document.attachEvent("ontouchstart",this.handleTouchOutside):document.addEventListener("touchstart",this.handleTouchOutside):!document.removeEventListener&&document.detachEvent?document.detachEvent("ontouchstart",this.handleTouchOutside):document.removeEventListener("touchstart",this.handleTouchOutside)}},{key:"handleTouchOutside",value:function(e){this.wrapper&&!this.wrapper.contains(e.target)&&this.closeMenu()}},{key:"focus",value:function(){this.input&&this.input.focus()}},{key:"blurInput",value:function(){this.input&&this.input.blur()}},{key:"handleTouchMove",value:function(){this.dragging=!0}},{key:"handleTouchStart",value:function(){this.dragging=!1}},{key:"handleTouchEnd",value:function(e){this.dragging||this.handleMouseDown(e)}},{key:"handleTouchEndClearValue",value:function(e){this.dragging||this.clearValue(e)}},{key:"handleMouseDown",value:function(e){if(!(this.props.disabled||"mousedown"===e.type&&0!==e.button)){if("INPUT"===e.target.tagName)return void(this.state.isFocused?this.state.isOpen||this.setState({isOpen:!0,isPseudoFocused:!1}):(this._openAfterFocus=this.props.openOnClick,this.focus()));if(e.preventDefault(),!this.props.searchable)return this.focus(),this.setState({isOpen:!this.state.isOpen});if(this.state.isFocused){this.focus();var t=this.input,n=!0;"function"===typeof t.getInput&&(t=t.getInput()),t.value="",this._focusAfterClear&&(n=!1,this._focusAfterClear=!1),this.setState({isOpen:n,isPseudoFocused:!1,focusedOption:null})}else this._openAfterFocus=this.props.openOnClick,this.focus(),this.setState({focusedOption:null})}}},{key:"handleMouseDownOnArrow",value:function(e){this.props.disabled||"mousedown"===e.type&&0!==e.button||(this.state.isOpen?(e.stopPropagation(),e.preventDefault(),this.closeMenu()):this.setState({isOpen:!0}))}},{key:"handleMouseDownOnMenu",value:function(e){this.props.disabled||"mousedown"===e.type&&0!==e.button||(e.stopPropagation(),e.preventDefault(),this._openAfterFocus=!0,this.focus())}},{key:"closeMenu",value:function(){this.props.onCloseResetsInput?this.setState({inputValue:this.handleInputValueChange(""),isOpen:!1,isPseudoFocused:this.state.isFocused&&!this.props.multi}):this.setState({isOpen:!1,isPseudoFocused:this.state.isFocused&&!this.props.multi}),this.hasScrolledToOption=!1}},{key:"handleInputFocus",value:function(e){if(!this.props.disabled){var t=this.state.isOpen||this._openAfterFocus||this.props.openOnFocus;t=!this._focusAfterClear&&t,this.props.onFocus&&this.props.onFocus(e),this.setState({isFocused:!0,isOpen:!!t}),this._focusAfterClear=!1,this._openAfterFocus=!1}}},{key:"handleInputBlur",value:function(e){if(this.menu&&(this.menu===document.activeElement||this.menu.contains(document.activeElement)))return void this.focus();this.props.onBlur&&this.props.onBlur(e);var t={isFocused:!1,isOpen:!1,isPseudoFocused:!1};this.props.onBlurResetsInput&&(t.inputValue=this.handleInputValueChange("")),this.setState(t)}},{key:"handleInputChange",value:function(e){var t=e.target.value;this.state.inputValue!==e.target.value&&(t=this.handleInputValueChange(t)),this.setState({inputValue:t,isOpen:!0,isPseudoFocused:!1})}},{key:"setInputValue",value:function(e){if(this.props.onInputChange){var t=this.props.onInputChange(e);null!=t&&"object"!==("undefined"===typeof t?"undefined":f(t))&&(e=""+t)}this.setState({inputValue:e})}},{key:"handleInputValueChange",value:function(e){if(this.props.onInputChange){var t=this.props.onInputChange(e);null!=t&&"object"!==("undefined"===typeof t?"undefined":f(t))&&(e=""+t)}return e}},{key:"handleKeyDown",value:function(e){if(!this.props.disabled&&("function"!==typeof this.props.onInputKeyDown||(this.props.onInputKeyDown(e),!e.defaultPrevented)))switch(e.keyCode){case 8:!this.state.inputValue&&this.props.backspaceRemoves&&(e.preventDefault(),this.popValue());break;case 9:if(e.shiftKey||!this.state.isOpen||!this.props.tabSelectsValue)break;e.preventDefault(),this.selectFocusedOption();break;case 13:e.preventDefault(),e.stopPropagation(),this.state.isOpen?this.selectFocusedOption():this.focusNextOption();break;case 27:e.preventDefault(),this.state.isOpen?(this.closeMenu(),e.stopPropagation()):this.props.clearable&&this.props.escapeClearsValue&&(this.clearValue(e),e.stopPropagation());break;case 32:if(this.props.searchable)break;if(e.preventDefault(),!this.state.isOpen){this.focusNextOption();break}e.stopPropagation(),this.selectFocusedOption();break;case 38:e.preventDefault(),this.focusPreviousOption();break;case 40:e.preventDefault(),this.focusNextOption();break;case 33:e.preventDefault(),this.focusPageUpOption();break;case 34:e.preventDefault(),this.focusPageDownOption();break;case 35:if(e.shiftKey)break;e.preventDefault(),this.focusEndOption();break;case 36:if(e.shiftKey)break;e.preventDefault(),this.focusStartOption();break;case 46:!this.state.inputValue&&this.props.deleteRemoves&&(e.preventDefault(),this.popValue())}}},{key:"handleValueClick",value:function(e,t){this.props.onValueClick&&this.props.onValueClick(e,t)}},{key:"handleMenuScroll",value:function(e){if(this.props.onMenuScrollToBottom){var t=e.target;t.scrollHeight>t.offsetHeight&&t.scrollHeight-t.offsetHeight-t.scrollTop<=0&&this.props.onMenuScrollToBottom()}}},{key:"getOptionLabel",value:function(e){return e[this.props.labelKey]}},{key:"getValueArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n="object"===("undefined"===typeof t?"undefined":f(t))?t:this.props;if(n.multi){if("string"===typeof e&&(e=e.split(n.delimiter)),!Array.isArray(e)){if(null===e||void 0===e)return[];e=[e]}return e.map(function(e){return B(e,n)}).filter(function(e){return e})}var r=B(e,n);return r?[r]:[]}},{key:"setValue",value:function(e){var t=this;if(this.props.autoBlur&&this.blurInput(),this.props.required){var n=z(e,this.props.multi);this.setState({required:n})}this.props.simpleValue&&e&&(e=this.props.multi?e.map(function(e){return e[t.props.valueKey]}).join(this.props.delimiter):e[this.props.valueKey]),this.props.onChange&&this.props.onChange(e)}},{key:"selectValue",value:function(e){var t=this;this.props.closeOnSelect&&(this.hasScrolledToOption=!1);var n=this.props.onSelectResetsInput?"":this.state.inputValue;this.props.multi?this.setState({focusedIndex:null,inputValue:this.handleInputValueChange(n),isOpen:!this.props.closeOnSelect},function(){t.getValueArray(t.props.value).some(function(n){return n[t.props.valueKey]===e[t.props.valueKey]})?t.removeValue(e):t.addValue(e)}):this.setState({inputValue:this.handleInputValueChange(n),isOpen:!this.props.closeOnSelect,isPseudoFocused:this.state.isFocused},function(){t.setValue(e)})}},{key:"addValue",value:function(e){var t=this.getValueArray(this.props.value),n=this._visibleOptions.filter(function(e){return!e.disabled}),r=n.indexOf(e);this.setValue(t.concat(e)),n.length-1===r?this.focusOption(n[r-1]):n.length>r&&this.focusOption(n[r+1])}},{key:"popValue",value:function(){var e=this.getValueArray(this.props.value);e.length&&!1!==e[e.length-1].clearableValue&&this.setValue(this.props.multi?e.slice(0,e.length-1):null)}},{key:"removeValue",value:function(e){var t=this,n=this.getValueArray(this.props.value);this.setValue(n.filter(function(n){return n[t.props.valueKey]!==e[t.props.valueKey]})),this.focus()}},{key:"clearValue",value:function(e){e&&"mousedown"===e.type&&0!==e.button||(e.preventDefault(),this.setValue(this.getResetValue()),this.setState({inputValue:this.handleInputValueChange(""),isOpen:!1},this.focus),this._focusAfterClear=!0)}},{key:"getResetValue",value:function(){return void 0!==this.props.resetValue?this.props.resetValue:this.props.multi?[]:null}},{key:"focusOption",value:function(e){this.setState({focusedOption:e})}},{key:"focusNextOption",value:function(){this.focusAdjacentOption("next")}},{key:"focusPreviousOption",value:function(){this.focusAdjacentOption("previous")}},{key:"focusPageUpOption",value:function(){this.focusAdjacentOption("page_up")}},{key:"focusPageDownOption",value:function(){this.focusAdjacentOption("page_down")}},{key:"focusStartOption",value:function(){this.focusAdjacentOption("start")}},{key:"focusEndOption",value:function(){this.focusAdjacentOption("end")}},{key:"focusAdjacentOption",value:function(e){var t=this._visibleOptions.map(function(e,t){return{option:e,index:t}}).filter(function(e){return!e.option.disabled});if(this._scrollToFocusedOptionOnUpdate=!0,!this.state.isOpen){var n={focusedOption:this._focusedOption||(t.length?t["next"===e?0:t.length-1].option:null),isOpen:!0};return this.props.onSelectResetsInput&&(n.inputValue=""),void this.setState(n)}if(t.length){for(var r=-1,i=0;i<t.length;i++)if(this._focusedOption===t[i].option){r=i;break}if("next"===e&&-1!==r)r=(r+1)%t.length;else if("previous"===e)r>0?r-=1:r=t.length-1;else if("start"===e)r=0;else if("end"===e)r=t.length-1;else if("page_up"===e){var o=r-this.props.pageSize;r=o<0?0:o}else if("page_down"===e){var a=r+this.props.pageSize;r=a>t.length-1?t.length-1:a}-1===r&&(r=0),this.setState({focusedIndex:t[r].index,focusedOption:t[r].option})}}},{key:"getFocusedOption",value:function(){return this._focusedOption}},{key:"selectFocusedOption",value:function(){if(this._focusedOption)return this.selectValue(this._focusedOption)}},{key:"renderLoading",value:function(){if(this.props.isLoading)return _.default.createElement("span",{className:"Select-loading-zone","aria-hidden":"true"},_.default.createElement("span",{className:"Select-loading"}))}},{key:"renderValue",value:function(e,t){var n=this,r=this.props.valueRenderer||this.getOptionLabel,i=this.props.valueComponent;if(!e.length){return j(this.state,this.props,t)?_.default.createElement("div",{className:"Select-placeholder"},this.props.placeholder):null}var o=this.props.onValueClick?this.handleValueClick:null;return this.props.multi?e.map(function(e,t){return _.default.createElement(i,{disabled:n.props.disabled||!1===e.clearableValue,id:n._instancePrefix+"-value-"+t,instancePrefix:n._instancePrefix,key:"value-"+t+"-"+e[n.props.valueKey],onClick:o,onRemove:n.removeValue,placeholder:n.props.placeholder,value:e},r(e,t),_.default.createElement("span",{className:"Select-aria-only"},"\xa0"))}):F(this.state,this.props)?(t&&(o=null),_.default.createElement(i,{disabled:this.props.disabled,id:this._instancePrefix+"-value-item",instancePrefix:this._instancePrefix,onClick:o,placeholder:this.props.placeholder,value:e[0]},r(e[0]))):void 0}},{key:"renderInput",value:function(e,t){var n,r=this,a=(0,v.default)("Select-input",this.props.inputProps.className),s=this.state.isOpen,u=(0,v.default)((n={},o(n,this._instancePrefix+"-list",s),o(n,this._instancePrefix+"-backspace-remove-message",this.props.multi&&!this.props.disabled&&this.state.isFocused&&!this.state.inputValue),n)),c=this.state.inputValue;!c||this.props.onSelectResetsInput||this.state.isFocused||(c="");var f=l({},this.props.inputProps,{"aria-activedescendant":s?this._instancePrefix+"-option-"+t:this._instancePrefix+"-value","aria-describedby":this.props["aria-describedby"],"aria-expanded":""+s,"aria-haspopup":""+s,"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-owns":u,className:a,onBlur:this.handleInputBlur,onChange:this.handleInputChange,onFocus:this.handleInputFocus,ref:function(e){return r.input=e},role:"combobox",required:this.state.required,tabIndex:this.props.tabIndex,value:c});if(this.props.inputRenderer)return this.props.inputRenderer(f);if(this.props.disabled||!this.props.searchable){var p=i(this.props.inputProps,[]),d=(0,v.default)(o({},this._instancePrefix+"-list",s));return _.default.createElement("div",l({},p,{"aria-expanded":s,"aria-owns":d,"aria-activedescendant":s?this._instancePrefix+"-option-"+t:this._instancePrefix+"-value","aria-disabled":""+this.props.disabled,"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],className:a,onBlur:this.handleInputBlur,onFocus:this.handleInputFocus,ref:function(e){return r.input=e},role:"combobox",style:{border:0,width:1,display:"inline-block"},tabIndex:this.props.tabIndex||0}))}return this.props.autosize?_.default.createElement(h.default,l({id:this.props.id},f,{minWidth:"5"})):_.default.createElement("div",{className:a,key:"input-wrap",style:{display:"inline-block"}},_.default.createElement("input",l({id:this.props.id},f)))}},{key:"renderClear",value:function(){var e=this.getValueArray(this.props.value);if(this.props.clearable&&e.length&&!this.props.disabled&&!this.props.isLoading){var t=this.props.multi?this.props.clearAllText:this.props.clearValueText,n=this.props.clearRenderer();return _.default.createElement("span",{"aria-label":t,className:"Select-clear-zone",onMouseDown:this.clearValue,onTouchEnd:this.handleTouchEndClearValue,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,title:t},n)}}},{key:"renderArrow",value:function(){if(this.props.arrowRenderer){var e=this.handleMouseDownOnArrow,t=this.state.isOpen,n=this.props.arrowRenderer({onMouseDown:e,isOpen:t});return n?_.default.createElement("span",{className:"Select-arrow-zone",onMouseDown:e},n):null}}},{key:"filterOptions",value:function(e){var t=this.state.inputValue,n=this.props.options||[];if(this.props.filterOptions){return("function"===typeof this.props.filterOptions?this.props.filterOptions:A.default)(n,t,e,{filterOption:this.props.filterOption,ignoreAccents:this.props.ignoreAccents,ignoreCase:this.props.ignoreCase,labelKey:this.props.labelKey,matchPos:this.props.matchPos,matchProp:this.props.matchProp,trimFilter:this.props.trimFilter,valueKey:this.props.valueKey})}return n}},{key:"onOptionRef",value:function(e,t){t&&(this.focused=e)}},{key:"renderMenu",value:function(e,t,n){return e&&e.length?this.props.menuRenderer({focusedOption:n,focusOption:this.focusOption,inputValue:this.state.inputValue,instancePrefix:this._instancePrefix,labelKey:this.props.labelKey,onFocus:this.focusOption,onOptionRef:this.onOptionRef,onSelect:this.selectValue,optionClassName:this.props.optionClassName,optionComponent:this.props.optionComponent,optionRenderer:this.props.optionRenderer||this.getOptionLabel,options:e,removeValue:this.removeValue,selectValue:this.selectValue,valueArray:t,valueKey:this.props.valueKey}):this.props.noResultsText?_.default.createElement("div",{className:"Select-noresults"},this.props.noResultsText):null}},{key:"renderHiddenField",value:function(e){var t=this;if(this.props.name){if(this.props.joinValues){var n=e.map(function(e){return I(e[t.props.valueKey])}).join(this.props.delimiter);return _.default.createElement("input",{disabled:this.props.disabled,name:this.props.name,ref:function(e){return t.value=e},type:"hidden",value:n})}return e.map(function(e,n){return _.default.createElement("input",{disabled:t.props.disabled,key:"hidden."+n,name:t.props.name,ref:"value"+n,type:"hidden",value:I(e[t.props.valueKey])})})}}},{key:"getFocusableOptionIndex",value:function(e){var t=this._visibleOptions;if(!t.length)return null;var n=this.props.valueKey,r=this.state.focusedOption||e;if(r&&!r.disabled){var i=-1;if(t.some(function(e,t){var o=e[n]===r[n];return o&&(i=t),o}),-1!==i)return i}for(var o=0;o<t.length;o++)if(!t[o].disabled)return o;return null}},{key:"renderOuter",value:function(e,t,n){var r=this,i=this.renderMenu(e,t,n);return i?_.default.createElement("div",{ref:function(e){return r.menuContainer=e},className:"Select-menu-outer",style:this.props.menuContainerStyle},_.default.createElement("div",{className:"Select-menu",id:this._instancePrefix+"-list",onMouseDown:this.handleMouseDownOnMenu,onScroll:this.handleMenuScroll,ref:function(e){return r.menu=e},role:"listbox",style:this.props.menuStyle,tabIndex:-1},i)):null}},{key:"render",value:function(){var e=this,t=this.getValueArray(this.props.value),n=this._visibleOptions=this.filterOptions(this.props.multi&&this.props.removeSelected?t:null),r=this.state.isOpen;this.props.multi&&!n.length&&t.length&&!this.state.inputValue&&(r=!1);var i=this.getFocusableOptionIndex(t[0]),o=null;o=this._focusedOption=null!==i?n[i]:null;var a=(0,v.default)("Select",this.props.className,{"has-value":t.length,"is-clearable":this.props.clearable,"is-disabled":this.props.disabled,"is-focused":this.state.isFocused,"is-loading":this.props.isLoading,"is-open":r,"is-pseudo-focused":this.state.isPseudoFocused,"is-searchable":this.props.searchable,"Select--multi":this.props.multi,"Select--rtl":this.props.rtl,"Select--single":!this.props.multi}),s=null;return this.props.multi&&!this.props.disabled&&t.length&&!this.state.inputValue&&this.state.isFocused&&this.props.backspaceRemoves&&(s=_.default.createElement("span",{id:this._instancePrefix+"-backspace-remove-message",className:"Select-aria-only","aria-live":"assertive"},this.props.backspaceToRemoveMessage.replace("{label}",t[t.length-1][this.props.labelKey]))),_.default.createElement("div",{ref:function(t){return e.wrapper=t},className:a,style:this.props.wrapperStyle},this.renderHiddenField(t),_.default.createElement("div",{ref:function(t){return e.control=t},className:"Select-control",onKeyDown:this.handleKeyDown,onMouseDown:this.handleMouseDown,onTouchEnd:this.handleTouchEnd,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,style:this.props.style},_.default.createElement("span",{className:"Select-multi-value-wrapper",id:this._instancePrefix+"-value"},this.renderValue(t,r),this.renderInput(t,i)),s,this.renderLoading(),this.renderClear(),this.renderArrow()),r?this.renderOuter(n,t,o):null)}}]),t}(_.default.Component);U.propTypes={"aria-describedby":y.default.string,"aria-label":y.default.string,"aria-labelledby":y.default.string,arrowRenderer:y.default.func,autoBlur:y.default.bool,autoFocus:y.default.bool,autofocus:y.default.bool,autosize:y.default.bool,backspaceRemoves:y.default.bool,backspaceToRemoveMessage:y.default.string,className:y.default.string,clearAllText:L,clearRenderer:y.default.func,clearValueText:L,clearable:y.default.bool,closeOnSelect:y.default.bool,deleteRemoves:y.default.bool,delimiter:y.default.string,disabled:y.default.bool,escapeClearsValue:y.default.bool,filterOption:y.default.func,filterOptions:y.default.any,id:y.default.string,ignoreAccents:y.default.bool,ignoreCase:y.default.bool,inputProps:y.default.object,inputRenderer:y.default.func,instanceId:y.default.string,isLoading:y.default.bool,joinValues:y.default.bool,labelKey:y.default.string,matchPos:y.default.string,matchProp:y.default.string,menuBuffer:y.default.number,menuContainerStyle:y.default.object,menuRenderer:y.default.func,menuStyle:y.default.object,multi:y.default.bool,name:y.default.string,noResultsText:L,onBlur:y.default.func,onBlurResetsInput:y.default.bool,onChange:y.default.func,onClose:y.default.func,onCloseResetsInput:y.default.bool,onFocus:y.default.func,onInputChange:y.default.func,onInputKeyDown:y.default.func,onMenuScrollToBottom:y.default.func,onOpen:y.default.func,onSelectResetsInput:y.default.bool,onValueClick:y.default.func,openOnClick:y.default.bool,openOnFocus:y.default.bool,optionClassName:y.default.string,optionComponent:y.default.func,optionRenderer:y.default.func,options:y.default.array,pageSize:y.default.number,placeholder:L,removeSelected:y.default.bool,required:y.default.bool,resetValue:y.default.any,rtl:y.default.bool,scrollMenuIntoView:y.default.bool,searchable:y.default.bool,simpleValue:y.default.bool,style:y.default.object,tabIndex:D,tabSelectsValue:y.default.bool,trimFilter:y.default.bool,value:y.default.any,valueComponent:y.default.func,valueKey:y.default.string,valueRenderer:y.default.func,wrapperStyle:y.default.object},U.defaultProps={arrowRenderer:w.default,autosize:!0,backspaceRemoves:!0,backspaceToRemoveMessage:"Press backspace to remove {label}",clearable:!0,clearAllText:"Clear all",clearRenderer:S.default,clearValueText:"Clear value",closeOnSelect:!0,deleteRemoves:!0,delimiter:",",disabled:!1,escapeClearsValue:!0,filterOptions:A.default,ignoreAccents:!0,ignoreCase:!0,inputProps:{},isLoading:!1,joinValues:!1,labelKey:"label",matchPos:"any",matchProp:"any",menuBuffer:0,menuRenderer:P.default,multi:!1,noResultsText:"No results found",onBlurResetsInput:!0,onCloseResetsInput:!0,onSelectResetsInput:!0,openOnClick:!0,optionComponent:k.default,pageSize:5,placeholder:"Select...",removeSelected:!0,required:!1,rtl:!1,scrollMenuIntoView:!0,searchable:!0,simpleValue:!1,tabSelectsValue:!0,trimFilter:!0,valueComponent:M.default,valueKey:"value"},t.default=U},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),f=r(c),p=n(2),h=r(p),d={position:"absolute",top:0,left:0,visibility:"hidden",height:0,overflow:"scroll",whiteSpace:"pre"},v=["extraWidth","injectStyles","inputClassName","inputRef","inputStyle","minWidth","onAutosize","placeholderIsMinWidth"],m=function(e){return v.forEach(function(t){return delete e[t]}),e},y=function(e,t){t.style.fontSize=e.fontSize,t.style.fontFamily=e.fontFamily,t.style.fontWeight=e.fontWeight,t.style.fontStyle=e.fontStyle,t.style.letterSpacing=e.letterSpacing,t.style.textTransform=e.textTransform},g=!("undefined"===typeof window||!window.navigator)&&/MSIE |Trident\/|Edge\//.test(window.navigator.userAgent),_=function(){return g?"_"+Math.random().toString(36).substr(2,12):void 0},b=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.inputRef=function(e){n.input=e,"function"===typeof n.props.inputRef&&n.props.inputRef(e)},n.placeHolderSizerRef=function(e){n.placeHolderSizer=e},n.sizerRef=function(e){n.sizer=e},n.state={inputWidth:e.minWidth,inputId:e.id||_()},n}return s(t,e),l(t,[{key:"componentDidMount",value:function(){this.mounted=!0,this.copyInputStyles(),this.updateInputWidth()}},{key:"componentWillReceiveProps",value:function(e){var t=e.id;t!==this.props.id&&this.setState({inputId:t||_()})}},{key:"componentDidUpdate",value:function(e,t){t.inputWidth!==this.state.inputWidth&&"function"===typeof this.props.onAutosize&&this.props.onAutosize(this.state.inputWidth),this.updateInputWidth()}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"copyInputStyles",value:function(){if(this.mounted&&window.getComputedStyle){var e=this.input&&window.getComputedStyle(this.input);e&&(y(e,this.sizer),this.placeHolderSizer&&y(e,this.placeHolderSizer))}}},{key:"updateInputWidth",value:function(){if(this.mounted&&this.sizer&&"undefined"!==typeof this.sizer.scrollWidth){var e=void 0;e=this.props.placeholder&&(!this.props.value||this.props.value&&this.props.placeholderIsMinWidth)?Math.max(this.sizer.scrollWidth,this.placeHolderSizer.scrollWidth)+2:this.sizer.scrollWidth+2;e+="number"===this.props.type&&void 0===this.props.extraWidth?16:parseInt(this.props.extraWidth)||0,e<this.props.minWidth&&(e=this.props.minWidth),e!==this.state.inputWidth&&this.setState({inputWidth:e})}}},{key:"getInput",value:function(){return this.input}},{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"select",value:function(){this.input.select()}},{key:"renderStyles",value:function(){var e=this.props.injectStyles;return g&&e?f.default.createElement("style",{dangerouslySetInnerHTML:{__html:"input#"+this.state.inputId+"::-ms-clear {display: none;}"}}):null}},{key:"render",value:function(){var e=[this.props.defaultValue,this.props.value,""].reduce(function(e,t){return null!==e&&void 0!==e?e:t}),t=u({},this.props.style);t.display||(t.display="inline-block");var n=u({boxSizing:"content-box",width:this.state.inputWidth+"px"},this.props.inputStyle),r=i(this.props,[]);return m(r),r.className=this.props.inputClassName,r.id=this.state.inputId,r.style=n,f.default.createElement("div",{className:this.props.className,style:t},this.renderStyles(),f.default.createElement("input",u({},r,{ref:this.inputRef})),f.default.createElement("div",{ref:this.sizerRef,style:d},e),this.props.placeholder?f.default.createElement("div",{ref:this.placeHolderSizerRef,style:d},this.props.placeholder):null)}}]),t}(c.Component);b.propTypes={className:h.default.string,defaultValue:h.default.any,extraWidth:h.default.oneOfType([h.default.number,h.default.string]),id:h.default.string,injectStyles:h.default.bool,inputClassName:h.default.string,inputRef:h.default.func,inputStyle:h.default.object,minWidth:h.default.oneOfType([h.default.number,h.default.string]),onAutosize:h.default.func,onChange:h.default.func,placeholder:h.default.string,placeholderIsMinWidth:h.default.bool,style:h.default.object,value:h.default.any},b.defaultProps={minWidth:1,injectStyles:!0},t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=r(i),a=n(2),s=r(a),u=function(e){var t=e.onMouseDown;return o.default.createElement("span",{className:"Select-arrow",onMouseDown:t})};u.propTypes={onMouseDown:s.default.func},t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=function(){return i.default.createElement("span",{className:"Select-clear",dangerouslySetInnerHTML:{__html:"&times;"}})};t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(550),o=r(i),a=n(551),s=r(a),u=function(e){return"undefined"!==typeof e&&null!==e&&""!==e},l=function(e,t,n,r){return r.ignoreAccents&&(t=(0,o.default)(t)),r.ignoreCase&&(t=t.toLowerCase()),r.trimFilter&&(t=(0,s.default)(t)),n&&(n=n.map(function(e){return e[r.valueKey]})),e.filter(function(e){if(n&&n.indexOf(e[r.valueKey])>-1)return!1;if(r.filterOption)return r.filterOption.call(void 0,e,t);if(!t)return!0;var i=e[r.valueKey],a=e[r.labelKey],s=u(i),l=u(a);if(!s&&!l)return!1;var c=s?String(i):null,f=l?String(a):null;return r.ignoreAccents&&(c&&"label"!==r.matchProp&&(c=(0,o.default)(c)),f&&"value"!==r.matchProp&&(f=(0,o.default)(f))),r.ignoreCase&&(c&&"label"!==r.matchProp&&(c=c.toLowerCase()),f&&"value"!==r.matchProp&&(f=f.toLowerCase())),"start"===r.matchPos?c&&"label"!==r.matchProp&&c.substr(0,t.length)===t||f&&"value"!==r.matchProp&&f.substr(0,t.length)===t:c&&"label"!==r.matchProp&&c.indexOf(t)>=0||f&&"value"!==r.matchProp&&f.indexOf(t)>=0})};t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}],i=function(e){for(var t=0;t<r.length;t++)e=e.replace(r[t].letters,r[t].base);return e};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e.replace(/^\s+|\s+$/g,"")};t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),o=r(i),a=n(2),s=r(a),u=n(0),l=r(u),c=function(e){var t=e.focusedOption,n=e.focusOption,r=e.inputValue,i=e.instancePrefix,a=e.onFocus,s=e.onOptionRef,u=e.onSelect,c=e.optionClassName,f=e.optionComponent,p=e.optionRenderer,h=e.options,d=e.removeValue,v=e.selectValue,m=e.valueArray,y=e.valueKey,g=f;return h.map(function(e,f){var h=m&&m.some(function(t){return t[y]===e[y]}),_=e===t,b=(0,o.default)(c,{"Select-option":!0,"is-selected":h,"is-focused":_,"is-disabled":e.disabled});return l.default.createElement(g,{className:b,focusOption:n,inputValue:r,instancePrefix:i,isDisabled:e.disabled,isFocused:_,isSelected:h,key:"option-"+f+"-"+e[y],onFocus:a,onSelect:u,option:e,optionIndex:f,ref:function(e){s(e,_)},removeValue:d,selectValue:v},p(e,f,r))})};c.propTypes={focusOption:s.default.func,focusedOption:s.default.object,inputValue:s.default.string,instancePrefix:s.default.string,onFocus:s.default.func,onOptionRef:s.default.func,onSelect:s.default.func,optionClassName:s.default.string,optionComponent:s.default.func,optionRenderer:s.default.func,options:s.default.array,removeValue:s.default.func,selectValue:s.default.func,valueArray:s.default.array,valueKey:s.default.string},t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(3),l=r(u),c=n(2),f=r(c),p=n(0),h=r(p),d=n(554),v=r(d),m=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleMouseDown=n.handleMouseDown.bind(n),n.handleMouseEnter=n.handleMouseEnter.bind(n),n.handleMouseMove=n.handleMouseMove.bind(n),n.handleTouchStart=n.handleTouchStart.bind(n),n.handleTouchEnd=n.handleTouchEnd.bind(n),n.handleTouchMove=n.handleTouchMove.bind(n),n.onFocus=n.onFocus.bind(n),n}return a(t,e),s(t,[{key:"handleMouseDown",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.onSelect(this.props.option,e)}},{key:"handleMouseEnter",value:function(e){this.onFocus(e)}},{key:"handleMouseMove",value:function(e){this.onFocus(e)}},{key:"handleTouchEnd",value:function(e){this.dragging||this.handleMouseDown(e)}},{key:"handleTouchMove",value:function(){this.dragging=!0}},{key:"handleTouchStart",value:function(){this.dragging=!1}},{key:"onFocus",value:function(e){this.props.isFocused||this.props.onFocus(this.props.option,e)}},{key:"render",value:function(){var e=this.props,t=e.option,n=e.instancePrefix,r=e.optionIndex,i=(0,l.default)(this.props.className,t.className);return t.disabled?h.default.createElement("div",{className:i,onMouseDown:v.default,onClick:v.default},this.props.children):h.default.createElement("div",{className:i,style:t.style,role:"option","aria-label":t.label,onMouseDown:this.handleMouseDown,onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEnd,id:n+"-option-"+r,title:t.title},this.props.children)}}]),t}(h.default.Component);m.propTypes={children:f.default.node,className:f.default.string,instancePrefix:f.default.string.isRequired,isDisabled:f.default.bool,isFocused:f.default.bool,isSelected:f.default.bool,onFocus:f.default.func,onSelect:f.default.func,onUnfocus:f.default.func,option:f.default.object.isRequired,optionIndex:f.default.number},t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.preventDefault(),e.stopPropagation(),"A"===e.target.tagName&&"href"in e.target&&(e.target.target?window.open(e.target.href,e.target.target):window.location.href=e.target.href)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(3),l=r(u),c=n(2),f=r(c),p=n(0),h=r(p),d=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleMouseDown=n.handleMouseDown.bind(n),n.onRemove=n.onRemove.bind(n),n.handleTouchEndRemove=n.handleTouchEndRemove.bind(n),n.handleTouchMove=n.handleTouchMove.bind(n),n.handleTouchStart=n.handleTouchStart.bind(n),n}return a(t,e),s(t,[{key:"handleMouseDown",value:function(e){if("mousedown"!==e.type||0===e.button)return this.props.onClick?(e.stopPropagation(),void this.props.onClick(this.props.value,e)):void(this.props.value.href&&e.stopPropagation())}},{key:"onRemove",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.onRemove(this.props.value)}},{key:"handleTouchEndRemove",value:function(e){this.dragging||this.onRemove(e)}},{key:"handleTouchMove",value:function(){this.dragging=!0}},{key:"handleTouchStart",value:function(){this.dragging=!1}},{key:"renderRemoveIcon",value:function(){if(!this.props.disabled&&this.props.onRemove)return h.default.createElement("span",{className:"Select-value-icon","aria-hidden":"true",onMouseDown:this.onRemove,onTouchEnd:this.handleTouchEndRemove,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove},"\xd7")}},{key:"renderLabel",value:function(){return this.props.onClick||this.props.value.href?h.default.createElement("a",{className:"Select-value-label",href:this.props.value.href,target:this.props.value.target,onMouseDown:this.handleMouseDown,onTouchEnd:this.handleMouseDown},this.props.children):h.default.createElement("span",{className:"Select-value-label",role:"option","aria-selected":"true",id:this.props.id},this.props.children)}},{key:"render",value:function(){return h.default.createElement("div",{className:(0,l.default)("Select-value",this.props.value.className),style:this.props.value.style,title:this.props.value.title},this.renderRemoveIcon(),this.renderLabel())}}]),t}(h.default.Component);d.propTypes={children:f.default.node,disabled:f.default.bool,id:f.default.string,onClick:f.default.func,onRemove:f.default.func,value:f.default.object.isRequired},t.default=d},function(e,t){},function(e,t,n){"use strict";function r(e,t,n){return i.wrapJsForReason(o.default,{selectedTime:e,onChange:t},n)}var i=n(44),o=n(558);t.make=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(559),i=(n.n(r),n(239)),o=n.n(i),a=n(560),s=n.n(a),u=n(561),l=(n.n(u),n(0)),c=n.n(l);o.a.locale("en"),s()(),t.default=function(e){var t=e.selectedTime,n=e.onChange;return c.a.createElement(u.DateTimePicker,{value:new Date(t),onChange:function(e){return n(Number(e))}})}},function(e,t){},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return e?(0,u.default)(t,n,!0)[c](e):(0,u.default)(t,n,!0)}function o(e){return(0,u.default)(e).add(10,"year").add(-1,"millisecond").toDate()}function a(e){return(0,u.default)(e).add(100,"year").add(-1,"millisecond").toDate()}function s(){var e={formats:{date:"L",time:"LT",default:"lll",header:"MMMM YYYY",footer:"LL",weekday:"dd",dayOfMonth:"DD",month:"MMM",year:"YYYY",decade:function(e,t,n){return n.format(e,"YYYY",t)+" - "+n.format(o(e),"YYYY",t)},century:function(e,t,n){return n.format(e,"YYYY",t)+" - "+n.format(a(e),"YYYY",t)}},firstOfWeek:function(e){return u.default.localeData(e).firstDayOfWeek()},parse:function(e,t,n){if(!e)return null;var r=i(n,e,t);return r.isValid()?r.toDate():null},format:function(e,t,n){return i(n,e).format(t)}};l.default.setDateLocalizer(e)}t.__esModule=!0,t.default=s;var u=r(n(239)),l=r(n(240));if("function"!==typeof u.default)throw new TypeError("You must provide a valid moment object");var c="function"===typeof(0,u.default)().locale?"locale":"lang";if(!u.default.localeData)throw new TypeError("The Moment localizer depends on the `localeData` api, please provide a moment object v2.2.0 or higher");e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.setNumberLocalizer=t.setDateLocalizer=t.setLocalizers=t.utils=void 0;var i=r(n(240)),o=r(n(562));t.DropdownList=o.default;var a=r(n(586));t.Combobox=a.default;var s=r(n(257));t.Calendar=s.default;var u=r(n(597));t.DatePicker=u.default;var l=r(n(601));t.TimePicker=l.default;var c=r(n(135));t.DateTimePicker=c.default;var f=r(n(602));t.NumberPicker=f.default;var p=r(n(604));t.Multiselect=p.default;var h=r(n(609));t.SelectList=h.default;var d=r(n(258)),v=r(n(244)),m=i.default.setLocalizers,y=i.default.setDateLocalizer,g=i.default.setNumberLocalizer;t.setNumberLocalizer=g,t.setDateLocalizer=y,t.setLocalizers=m;var _={SlideTransitionGroup:d.default,SlideDownTransition:v.default};t.utils=_},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}function a(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function s(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t,n,r,i){var o={};return Object.keys(r).forEach(function(e){o[e]=r[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}t.__esModule=!0,t.default=void 0;var c,f,p,h,d,v,m,y,g=i(n(0)),_=n(12),b=i(n(2)),x=i(n(88)),w=i(n(3)),E=n(25),S=i(n(41)),T=i(n(42)),A=i(n(63)),O=i(n(64)),P=i(n(90)),C=i(n(65)),k=i(n(255)),R=i(n(581)),M=n(32),I=r(n(11)),L=r(n(93)),D=i(n(43)),N=i(n(53)),F=r(n(7)),j=i(n(66)),B=i(n(67)),z=n(33),U=n(26),V="src/DropdownList.js",G={},W=(y=m=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=e.call.apply(e,[this].concat(r))||this,t.handleFocusChanged=function(e){e||t.close()},a(t,"handleSelect",f,u(t)),a(t,"handleCreate",p,u(t)),a(t,"handleClick",h,u(t)),a(t,"handleKeyDown",d,u(t)),a(t,"handleKeyPress",v,u(t)),t.handleInputChange=function(e){t.search(e.target.value,e,"input")},t.attachInputRef=function(e){return t.inputRef=e},t.attachFilterRef=function(e){return t.filterRef=e},t.attachListRef=function(e){return t.listRef=e},t.focus=function(e){var n=t.props,r=n.filter,i=n.open,o=e||(r&&i?t.filterRef:t.inputRef);(o=(0,_.findDOMNode)(o))&&(0,x.default)()!==o&&o.focus()},(0,E.autoFocus)(u(t)),t.messages=(0,M.getMessages)(t.props.messages),t.inputId=(0,U.instanceId)(u(t),"_input"),t.listId=(0,U.instanceId)(u(t),"_listbox"),t.activeId=(0,U.instanceId)(u(t),"_listbox_active_option"),t.list=(0,N.default)(u(t)),t.mounted=(0,E.mountManager)(u(t)),t.timeouts=(0,E.timeoutManager)(u(t)),t.accessors=(0,j.default)(u(t)),t.handleScroll=(0,B.default)(u(t)),t.focusManager=(0,D.default)(u(t),{didHandle:t.handleFocusChanged}),t.state=t.getStateFromProps(t.props),t}s(t,e);var n=t.prototype;return n.componentWillReceiveProps=function(e){this.messages=(0,M.getMessages)(e.messages),this.setState(this.getStateFromProps(e))},n.getStateFromProps=function(e){var t=e.open,n=e.value,r=e.data,i=e.searchTerm,o=e.filter,a=e.minLength,s=e.caseSensitive,u=this.accessors,l=this.list,c=u.indexOf(r,n);t&&(r=L.filter(r,{filter:o,searchTerm:i,minLength:a,caseSensitive:s,textField:this.accessors.text})),l.setData(r);var f=r[c];return{data:r,selectedItem:l.nextEnabled(f),focusedItem:l.nextEnabled(f||r[0])}},n.change=function(e,t){var n=this.props,r=n.onChange,i=n.searchTerm,o=n.value;this.accessors.matches(e,o)||((0,U.notify)(r,[e,{originalEvent:t,lastValue:o,searchTerm:i}]),this.clearSearch(t),this.close())},n.renderList=function(e){var t=this.props,n=t.open,r=t.filter,i=t.data,a=t.searchTerm,s=this.state,u=s.selectedItem,l=s.focusedItem,c=this.accessors,f=c.value,p=c.text,h=this.props.listComponent,d=this.list.defaultProps();return g.default.createElement("div",{__source:{fileName:V,lineNumber:342},__self:this},r&&g.default.createElement(A.default,{className:"rw-filter-input rw-input",__source:{fileName:V,lineNumber:344},__self:this},g.default.createElement("input",{value:a,className:"rw-input-reset",onChange:this.handleInputChange,placeholder:e.filterPlaceholder(this.props),ref:this.attachFilterRef,__source:{fileName:V,lineNumber:347},__self:this}),g.default.createElement(O.default,{icon:"search",role:"presentation","aria-hidden":"true",__source:{fileName:V,lineNumber:354},__self:this})),g.default.createElement(h,o({},d,{id:this.listId,activeId:this.activeId,valueAccessor:f,textAccessor:p,selectedItem:u,focusedItem:n?l:null,onSelect:this.handleSelect,onMove:this.handleScroll,"aria-live":n&&"polite","aria-labelledby":this.inputId,"aria-hidden":!this.props.open,ref:this.attachListRef,messages:{emptyList:i.length?e.emptyFilter:e.emptyList},__source:{fileName:V,lineNumber:357},__self:this})),this.allowCreate()&&g.default.createElement(k.default,{id:this.createId,searchTerm:a,onSelect:this.handleCreate,focused:!l||l===G,__source:{fileName:V,lineNumber:376},__self:this},e.createOption(this.props)))},n.render=function(){var e=this,t=this.props,n=t.className,r=t.tabIndex,i=t.popupTransition,a=t.textField,s=t.data,u=t.busy,l=t.dropUp,c=t.placeholder,f=t.value,p=t.open,h=t.filter,d=t.inputProps,v=t.valueComponent,m=this.state.focused,y=!0===this.props.disabled,_=!0===this.props.readOnly,b=this.accessors.findOrSelf(s,f),x=p||(0,U.isFirstFocusedRender)(this),E=o(I.pickElementProps(this),{name:void 0,role:"combobox",id:this.inputId,tabIndex:p&&h?-1:r||0,"aria-owns":this.listId,"aria-activedescendant":p?this.activeId:null,"aria-expanded":!!p,"aria-haspopup":!0,"aria-busy":!!u,"aria-live":!p&&"polite","aria-autocomplete":"list","aria-disabled":y,"aria-readonly":_}),S=this.messages;return g.default.createElement(T.default,o({},E,{open:p,dropUp:l,focused:m,disabled:y,readOnly:_,onBlur:this.focusManager.handleBlur,onFocus:this.focusManager.handleFocus,onKeyDown:this.handleKeyDown,onKeyPress:this.handleKeyPress,className:(0,w.default)(n,"rw-dropdown-list"),ref:this.attachInputRef,__source:{fileName:V,lineNumber:433},__self:this}),g.default.createElement(A.default,{onClick:this.handleClick,className:"rw-widget-input",__source:{fileName:V,lineNumber:447},__self:this},g.default.createElement(R.default,o({},d,{value:b,textField:a,placeholder:c,valueComponent:v,__source:{fileName:V,lineNumber:448},__self:this})),g.default.createElement(O.default,{busy:u,icon:"caret-down",role:"presentational","aria-hidden":"true",disabled:y||_,label:S.openDropdown(this.props),__source:{fileName:V,lineNumber:455},__self:this})),x&&g.default.createElement(P.default,{open:p,dropUp:l,transition:i,onEntered:function(){return e.focus()},onEntering:function(){return e.listRef.forceUpdate()},__source:{fileName:V,lineNumber:465},__self:this},this.renderList(S)))},n.findOption=function(e,t){var n=this,r=((this._currentWord||"")+e).toLowerCase();e&&(this._currentWord=r,this.timeouts.set("search",function(){var e=n.list,i=n.props.open?"focusedItem":"selectedItem",o=e.next(n.state[i],r);o===n.state[i]&&(o=e.next(null,r)),n._currentWord="",o&&t(o)},this.props.delay))},n.clearSearch=function(e){this.search("",e,"clear")},n.search=function(e,t,n){void 0===n&&(n="input");var r=this.props,i=r.onSearch,o=r.searchTerm;e!==o&&(0,U.notify)(i,[e,{action:n,lastSearchTerm:o,originalEvent:t}])},n.open=function(){this.props.open||(0,U.notify)(this.props.onToggle,!0)},n.close=function(){this.props.open&&(0,U.notify)(this.props.onToggle,!1)},n.toggle=function(){this.props.open?this.close():this.open()},n.allowCreate=function(){var e=this.props,t=e.searchTerm,n=e.onCreate,r=e.allowCreate;return!(!n||!(!0===r||"onFilter"===r&&t)||this.hasExtactMatch())},n.hasExtactMatch=function(){var e=this.props,t=e.searchTerm,n=e.caseSensitive,r=e.filter,i=this.state.data,o=this.accessors.text,a=function(e){return n?e:e.toLowerCase()};return r&&i.some(function(e){return a(o(e))===a(t)})},t}(g.default.Component),m.propTypes=o({},L.propTypes,{value:b.default.any,onChange:b.default.func,open:b.default.bool,onToggle:b.default.func,data:b.default.array,valueField:F.accessor,textField:F.accessor,allowCreate:b.default.oneOf([!0,!1,"onFilter"]),valueComponent:F.elementType,itemComponent:F.elementType,listComponent:F.elementType,groupComponent:F.elementType,groupBy:F.accessor,onSelect:b.default.func,onCreate:b.default.func,onSearch:b.default.func,searchTerm:b.default.string,busy:b.default.bool,placeholder:b.default.string,dropUp:b.default.bool,popupTransition:F.elementType,disabled:F.disabled.acceptsArray,readOnly:F.disabled,inputProps:b.default.object,listProps:b.default.object,isRtl:b.default.bool,messages:b.default.shape({open:b.default.string,emptyList:F.message,emptyFilter:F.message,filterPlaceholder:b.default.string,createOption:F.message})}),m.defaultProps={data:[],delay:500,searchTerm:"",allowCreate:!1,listComponent:C.default},c=y,f=l(c.prototype,"handleSelect",[z.widgetEditable],{enumerable:!0,initializer:function(){var e=this;return function(t,n){if(void 0===t||t===G)return void e.handleCreate(e.props.searchTerm);(0,U.notify)(e.props.onSelect,[t,{originalEvent:n}]),e.change(t,n),e.close(),e.focus(e)}}}),p=l(c.prototype,"handleCreate",[z.widgetEditable],{enumerable:!0,initializer:function(){var e=this;return function(t,n){void 0===t&&(t=""),(0,U.notify)(e.props.onCreate,t),e.clearSearch(n),e.close(),e.focus(e)}}}),h=l(c.prototype,"handleClick",[z.widgetEditable],{enumerable:!0,initializer:function(){var e=this;return function(t){e.focus(),e.toggle(),(0,U.notify)(e.props.onClick,t)}}}),d=l(c.prototype,"handleKeyDown",[z.widgetEditable],{enumerable:!0,initializer:function(){var e=this;return function(t){var n=t.key,r=t.altKey,i=t.ctrlKey,o=e.list,a=e.props,s=a.open,u=a.onKeyDown,l=a.filter,c=a.searchTerm,f=e.state,p=f.focusedItem,h=f.selectedItem,d=p===G,v=e.allowCreate();(0,U.notify)(u,[t]);var m=function(){e.close(),(0,_.findDOMNode)(e).focus()},y=function(n){return null!=n&&e.change(n,t)},g=function(t){return e.setState({focusedItem:t})};if(!t.defaultPrevented)if("End"===n)t.preventDefault(),s?g(o.last()):y(o.last());else if("Home"===n)t.preventDefault(),s?g(o.first()):y(o.first());else if("Escape"===n&&s)t.preventDefault(),m();else if("Enter"===n&&s&&i&&v)t.preventDefault(),e.handleCreate(c,t);else if(("Enter"===n||" "===n&&!l)&&s)t.preventDefault(),e.handleSelect(p,t);else if(" "!==n||s){if("ArrowDown"===n){if(t.preventDefault(),r)return e.open();s||y(o.next(h));var b=o.next(p),x=d||v&&p===b;g(x?G:b)}else if("ArrowUp"===n){if(t.preventDefault(),r)return m();if(!s)return y(o.prev(h));g(d?o.last():o.prev(p))}}else t.preventDefault(),e.open()}}}),v=l(c.prototype,"handleKeyPress",[z.widgetEditable],{enumerable:!0,initializer:function(){var e=this;return function(t){(0,U.notify)(e.props.onKeyPress,[t]),t.defaultPrevented||e.props.filter&&e.props.open||e.findOption(String.fromCharCode(t.which),function(n){e.mounted()&&e.props.open?e.setState({focusedItem:n}):n&&e.change(n,t)})}}}),c),H=(0,S.default)(W,{open:"onToggle",value:"onChange",searchTerm:"onSearch"},["focus"]);t.default=H,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){(0,s.default)(e,{componentDidMount:function(){this.props.autoFocus&&(this.focus?this.focus():(0,a.findDOMNode)(this).focus())}})}t.__esModule=!0,t.default=i,t.PropTypes=void 0;var o=n(564),a=(r(n(0)),n(12)),s=r(n(89)),u={autoFocus:o.bool};t.PropTypes=u},function(e,t,n){e.exports=n(565)()},function(e,t,n){"use strict";var r=n(54),i=n(153),o=n(566);e.exports=function(){function e(e,t,n,r,a,s){s!==o&&i(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){var r=e.props[t?"onFocus":"onBlur"];r&&r(n)}function o(e,t){function n(t,n){n&&n.persist&&n.persist(),i&&!1===i(t,n)||p.set("focus",function(){(0,a.unstable_batchedUpdates)(function(){t!==r&&(o&&o.call(e,t,n),!h()&&t||(r=t,l&&l(t,n)))})})}var r,i=t.willHandle,o=t.didHandle,l=t.onChange,c=t.isDisabled,f=void 0===c?function(){return!!e.props.disabled}:c,p=(0,s.default)(e),h=(0,u.default)(e);return{handleBlur:function(e){f()||n(!1,e)},handleFocus:function(e){f()||n(!0,e)}}}t.__esModule=!0,t.callFocusEventHandler=i,t.default=o;var a=n(12),s=r(n(243)),u=r(n(130))},function(e,t,n){"use strict";function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}function i(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function o(e,t){var n=t.propTypes,o=t.contextTypes,a=t.childContextTypes,s=t.getChildContext,u=i(t,["propTypes","contextTypes","childContextTypes","getChildContext"]);if(n&&(e.propTypes=r({},e.propTypes,n)),o&&(e.contextTypes=r({},e.contextTypes,o)),a&&(e.childContextTypes=r({},e.childContextTypes,a)),s){var l=e.prototype.getChildContext;e.prototype.getChildContext=function(){return r({},l&&l.call(this),s.call(this))}}return r(e.prototype,u),e}function a(e){return function(t){return o(t,e)}}t.__esModule=!0,t.mixin=o,t.default=a},function(e,t,n){"use strict";function r(e,t){var n={};return Object.keys(e).forEach(function(e){n[o(e)]=s}),n}function i(e,t){return void 0!==e[t]}function o(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function a(e){return!!(e&&e.prototype&&e.prototype.isReactComponent)}t.__esModule=!0,t.uncontrolledPropTypes=r,t.isProp=i,t.defaultKey=o,t.isReactComponent=a;var s=(function(e){e&&e.__esModule}(n(87)),function(){})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return function(n){var r=n.currentTarget,i=n.target;(0,u.default)(r,e).some(function(e){return(0,a.default)(e,i)})&&t.call(this,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(248),a=r(o),s=n(249),u=r(s);e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(31),o=r(i),a=n(246),s=r(a),u=n(247),l=r(u),c=function(){};o.default&&(c=function(e,t,n,r){return(0,s.default)(e,t,n,r),function(){(0,l.default)(e,t,n,r)}}),t.default=c,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e.replace(i,function(e,t){return t.toUpperCase()})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=/-(.)/g;e.exports=t.default},function(e,t,n){"use strict";function r(e){return(0,o.default)(e).replace(a,"-ms-")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(574),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a=/^ms-/;e.exports=t.default},function(e,t,n){"use strict";function r(e){return e.replace(i,"-$1").toLowerCase()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=/([A-Z])/g;e.exports=t.default},function(e,t,n){"use strict";function r(e){if(!e)throw new TypeError("No Element passed to `getComputedStyle()`");var t=e.ownerDocument;return"defaultView"in t?t.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):window.getComputedStyle(e,null):{getPropertyValue:function(t){var n=e.style;"float"==(t=(0,o.default)(t))&&(t="styleFloat");var r=e.currentStyle[t]||null;if(null==r&&n&&n[t]&&(r=n[t]),s.test(r)&&!a.test(t)){var i=n.left,u=e.runtimeStyle,l=u&&u.left;l&&(u.left=e.currentStyle.left),n.left="fontSize"===t?"1em":r,r=n.pixelLeft+"px",n.left=i,l&&(u.left=l)}return r}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(250),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a=/^(top|right|bottom|left)$/,s=/^([+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|))(?!px)[a-z%]+$/i;e.exports=t.default},function(e,t,n){"use strict";function r(e,t){return"removeProperty"in e.style?e.style.removeProperty(t):e.style.removeAttribute(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,e.exports=t.default},function(e,t,n){"use strict";function r(e){return!(!e||!i.test(e))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;e.exports=t.default},function(e,t,n){"use strict";function r(e){var t="transition"+e+"Timeout",n="transition"+e;return function(e){if(e[n]){if(null==e[t])return new Error(t+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!==typeof e[t])return new Error(t+" must be a number (in milliseconds)")}return null}}t.__esModule=!0,t.classNamesShape=t.timeoutsShape=void 0,t.transitionTimeout=r;var i=n(2),o=function(e){return e&&e.__esModule?e:{default:e}}(i);t.timeoutsShape=o.default.oneOfType([o.default.number,o.default.shape({enter:o.default.number,exit:o.default.number}).isRequired]),t.classNamesShape=o.default.oneOfType([o.default.string,o.default.shape({enter:o.default.string,exit:o.default.string,active:o.default.string}),o.default.shape({enter:o.default.string,enterActive:o.default.string,exit:o.default.string,exitActive:o.default.string})])},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n,r,i){var a=e[t],u="undefined"===typeof a?"undefined":o(a);return s.default.isValidElement(a)?new Error("Invalid "+r+" `"+i+"` of type ReactElement supplied to `"+n+"`, expected an element type (a string or a ReactClass)."):"function"!==u&&"string"!==u?new Error("Invalid "+r+" `"+i+"` of value `"+a+"` supplied to `"+n+"`, expected an element type (a string or a ReactClass)."):null}Object.defineProperty(t,"__esModule",{value:!0});var o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=n(0),s=r(a),u=n(253),l=r(u);t.default=(0,l.default)(i),e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.children,n=e.className,r=e.component,i=void 0===r?"li":r,s=i;return a.default.createElement(s,{tabIndex:"-1",role:"separator",className:(0,o.default)(n,"rw-list-optgroup"),__source:{fileName:u,lineNumber:14},__self:this},t)}t.__esModule=!0,t.default=void 0;var o=r(n(3)),a=r(n(0)),s=r(n(2)),u="src/ListOptionGroup.js",l={className:s.default.string,component:s.default.string};i.propTypes=l;var c=i;t.default=c,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}t.__esModule=!0,t.default=void 0;var o=r(n(0)),a=r(n(2)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(7)),u=n(94),l="src/DropdownListInput.js",c=function(e){function t(){return e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){var e=this.props,t=e.placeholder,n=e.value,r=e.textField,i=e.valueComponent;return o.default.createElement("div",{className:"rw-input rw-dropdown-list-input",__source:{fileName:l,lineNumber:24},__self:this},!n&&t?o.default.createElement("span",{className:"rw-placeholder",__source:{fileName:l,lineNumber:26},__self:this},t):i?o.default.createElement(i,{item:n,__source:{fileName:l,lineNumber:28},__self:this}):(0,u.dataText)(n,r))},t}(o.default.Component);c.propTypes={value:a.default.any,placeholder:a.default.string,textField:s.accessor,valueComponent:s.elementType};var f=c;t.default=f,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=(0,a.default)(e),r={top:0,left:0},i=void 0,o=void 0,s=void 0,l=void 0,f=void 0,h=void 0,v=void 0;if(e){i=t||(0,c.default)(e),l=(0,m.default)(i),o=(0,p.default)(i),h=(0,u.default)(i,!0),l=(0,m.default)(i),l||(r=(0,a.default)(i)),n={top:n.top-r.top,left:n.left-r.left,height:n.height,width:n.width},f=n.height,s=n.top+(l?0:o),v=s+f,o=o>s?s:v>o+h?v-h:o;var y=(0,d.default)(function(){return(0,p.default)(i,o)});return function(){return d.default.cancel(y)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(251),a=r(o),s=n(91),u=r(s),l=n(583),c=r(l),f=n(584),p=r(f),h=n(585),d=r(h),v=n(92),m=r(v);e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=(0,a.default)(e,"position"),n="absolute"===t,r=e.ownerDocument;if("fixed"===t)return r||document;for(;(e=e.parentNode)&&9!==e.nodeType;){var i=n&&"static"===(0,a.default)(e,"position"),o=(0,a.default)(e,"overflow")+(0,a.default)(e,"overflow-y")+(0,a.default)(e,"overflow-x");if(!i&&(/(auto|scroll)/.test(o)&&(0,u.default)(e)<e.scrollHeight))return e}return document}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(131),a=r(o),s=n(91),u=r(s);e.exports=t.default},function(e,t,n){"use strict";function r(e,t){var n=(0,o.default)(e);if(void 0===t)return n?"pageYOffset"in n?n.pageYOffset:n.document.documentElement.scrollTop:e.scrollTop;n?n.scrollTo("pageXOffset"in n?n.pageXOffset:n.document.documentElement.scrollLeft,t):e.scrollTop=t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(92),o=function(e){return e&&e.__esModule?e:{default:e}}(i);e.exports=t.default},function(e,t,n){"use strict";function r(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-f)),r=setTimeout(e,n);return f=t,r}Object.defineProperty(t,"__esModule",{value:!0});var i=n(31),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a=["","webkit","moz","o","ms"],s="clearTimeout",u=r,l=void 0,c=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};o.default&&a.some(function(e){var t=c(e,"request");if(t in window)return s=c(e,"cancel"),u=function(e){return window[t](e)}});var f=(new Date).getTime();l=function(e){return u(e)},l.cancel=function(e){window[s]&&"function"===typeof window[s]&&window[s](e)},t.default=l,e.exports=t.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t,n,r,i){var o={};return Object.keys(r).forEach(function(e){o[e]=r[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}t.__esModule=!0,t.default=void 0;var c,f,p,h,d,v,m=i(n(0)),y=i(n(2)),g=i(n(3)),_=i(n(41)),b=i(n(42)),x=i(n(63)),w=i(n(65)),E=i(n(90)),S=i(n(64)),T=i(n(587)),A=n(32),O=i(n(43)),P=i(n(53)),C=r(n(7)),k=i(n(66)),R=i(n(67)),M=n(23),I=r(n(11)),L=r(n(93)),D=n(33),N=n(26),F="src/Combobox.js",j=l({},L.propTypes,{value:y.default.any,onChange:y.default.func,open:y.default.bool,onToggle:y.default.func,itemComponent:C.elementType,listComponent:C.elementType,groupComponent:C.elementType,groupBy:C.accessor,data:y.default.array,valueField:C.accessor,textField:C.accessor,name:y.default.string,onSelect:y.default.func,autoFocus:y.default.bool,disabled:C.disabled.acceptsArray,readOnly:C.disabled,suggest:L.propTypes.filter,busy:y.default.bool,delay:y.default.number,dropUp:y.default.bool,popupTransition:C.elementType,placeholder:y.default.string,inputProps:y.default.object,listProps:y.default.object,isRtl:y.default.bool,messages:y.default.shape({openCombobox:C.message,emptyList:C.message,emptyFilter:C.message})}),B=(v=d=function(e){function t(t,n){var r;return r=e.call(this,t,n)||this,r.handleFocusWillChange=function(e){!e&&r.inputRef&&r.inputRef.accept(),e&&r.focus()},r.handleFocusChanged=function(e){e||r.close()},o(r,"handleSelect",f,s(r)),r.handleInputKeyDown=function(e){var t=e.key;r._deleting="Backspace"===t||"Delete"===t,r._isTyping=!0},r.handleInputChange=function(e){var t=r.suggest(e.target.value);r.change(t,!0,e),r.open()},o(r,"handleKeyDown",p,s(r)),r.attachListRef=function(e){r.listRef=e},r.attachInputRef=function(e){r.inputRef=e},o(r,"toggle",h,s(r)),r.messages=(0,A.getMessages)(t.messages),r.inputId=(0,N.instanceId)(s(r),"_input"),r.listId=(0,N.instanceId)(s(r),"_listbox"),r.activeId=(0,N.instanceId)(s(r),"_listbox_active_option"),r.list=(0,P.default)(s(r)),r.accessors=(0,k.default)(s(r)),r.handleScroll=(0,R.default)(s(r)),r.focusManager=(0,O.default)(s(r),{willHandle:r.handleFocusWillChange,didHandle:r.handleFocusChanged}),r.state=l({},r.getStateFromProps(t),{open:!1}),r}a(t,e);var n=t.prototype;return n.shouldComponentUpdate=function(e,t){var n=this.inputRef&&this.inputRef.isSuggesting(),r=!(0,M.isShallowEqual)(t,this.state),i=!(0,M.isShallowEqual)(e,this.props);return n||r||i},n.componentWillReceiveProps=function(e){this.messages=(0,A.getMessages)(e.messages),this.setState(this.getStateFromProps(e))},n.getStateFromProps=function(e){var t,n=this.accessors,r=this.list,i=e.value,o=e.data,a=e.filter,s=n.indexOf(o,i),u=-1===s?i:o[s],c=n.text(u);(-1===s||this.inputRef&&this.inputRef.isSuggesting())&&(t=c),o=L.filter(o,l({searchTerm:t},e));var f=s;return-1!==s?(s=n.indexOf(o,i),f=s):f=L.indexOf(o,{searchTerm:t,textField:n.text,filter:a||!0}),r.setData(o),{data:o,selectedItem:r.nextEnabled(o[s]),focusedItem:r.nextEnabled(~f?o[f]:o[0])}},n.renderInput=function(){var e=this.props,t=e.suggest,n=e.filter,r=e.busy,i=e.name,o=e.data,a=e.value,s=e.autoFocus,u=e.tabIndex,c=e.placeholder,f=e.inputProps,p=e.disabled,h=e.readOnly,d=e.open,v=this.accessors.findOrSelf(o,a),y=t?n?"both":"inline":n?"list":"";return m.default.createElement(T.default,l({},f,{role:"combobox",name:i,id:this.inputId,autoFocus:s,tabIndex:u,suggest:t,disabled:!0===p,readOnly:!0===h,"aria-busy":!!r,"aria-owns":this.listId,"aria-autocomplete":y,"aria-activedescendant":d?this.activeId:null,"aria-expanded":d,"aria-haspopup":!0,placeholder:c,value:this.accessors.text(v),onChange:this.handleInputChange,onKeyDown:this.handleInputKeyDown,ref:this.attachInputRef,__source:{fileName:F,lineNumber:293},__self:this}))},n.renderList=function(e){var t=this.activeId,n=this.inputId,r=this.listId,i=this.accessors,o=this.props,a=o.open,s=o.data,u=this.state,c=u.selectedItem,f=u.focusedItem,p=this.props.listComponent,h=this.list.defaultProps();return m.default.createElement(p,l({},h,{id:r,activeId:t,valueAccessor:i.value,textAccessor:i.text,selectedItem:c,focusedItem:a?f:null,"aria-hidden":!a,"aria-labelledby":n,"aria-live":a&&"polite",onSelect:this.handleSelect,onMove:this.handleScroll,ref:this.attachListRef,messages:{emptyList:s.length?e.emptyFilter:e.emptyList},__source:{fileName:F,lineNumber:328},__self:this}))},n.render=function(){var e=this,t=this.props,n=t.className,r=t.popupTransition,i=t.busy,o=t.dropUp,a=t.open,s=this.state.focused,u=!0===this.props.disabled,c=!0===this.props.readOnly,f=I.pickElementProps(this),p=a||(0,N.isFirstFocusedRender)(this),h=this.messages;return m.default.createElement(b.default,l({},f,{open:a,dropUp:o,focused:s,disabled:u,readOnly:c,onBlur:this.focusManager.handleBlur,onFocus:this.focusManager.handleFocus,onKeyDown:this.handleKeyDown,className:(0,g.default)(n,"rw-combobox"),__source:{fileName:F,lineNumber:363},__self:this}),m.default.createElement(x.default,{__source:{fileName:F,lineNumber:375},__self:this},this.renderInput(),m.default.createElement(S.default,{bordered:!0,busy:i,icon:"caret-down",onClick:this.toggle,disabled:u||c,label:h.openCombobox(this.props),__source:{fileName:F,lineNumber:377},__self:this})),p&&m.default.createElement(E.default,{open:a,dropUp:o,transition:r,onEntering:function(){return e.listRef.forceUpdate()},__source:{fileName:F,lineNumber:388},__self:this},m.default.createElement("div",{__source:{fileName:F,lineNumber:394},__self:this},this.renderList(h))))},n.focus=function(){this.inputRef&&this.inputRef.focus()},n.change=function(e,t,n){var r=this.props,i=r.onChange,o=r.value;this._typedChange=!!t,(0,N.notify)(i,[e,{lastValue:o,originalEvent:n}])},n.open=function(){this.props.open||(0,N.notify)(this.props.onToggle,!0)},n.close=function(){this.props.open&&(0,N.notify)(this.props.onToggle,!1)},n.suggest=function(e){var t=this.props,n=t.textField,r=t.suggest,i=t.minLength,o=this.state.data;return this._deleting?e:L.suggest(o,{minLength:i,textField:n,searchTerm:e,filter:r,caseSensitive:!1})},t}(m.default.Component),d.propTypes=j,d.defaultProps={data:[],value:"",open:!1,suggest:!1,filter:!1,delay:500,listComponent:w.default},c=v,f=u(c.prototype,"handleSelect",[D.widgetEditable],{enumerable:!0,initializer:function(){var e=this;return function(t,n){e.close(),(0,N.notify)(e.props.onSelect,[t,{originalEvent:n}]),e.change(t,!1,n),e.focus()}}}),p=u(c.prototype,"handleKeyDown",[D.widgetEditable],{enumerable:!0,initializer:function(){var e=this;return function(t){var n=t.key,r=t.altKey,i=e.list,o=e.props,a=o.open,s=o.onKeyDown,u=e.state,l=u.focusedItem,c=u.selectedItem;if((0,N.notify)(s,[t]),!t.defaultPrevented){var f=function(n){return null!=n&&e.handleSelect(n,t)},p=function(t){return e.setState({focusedItem:t})};if("End"===n&&a)t.preventDefault(),p(i.last());else if("Home"===n&&a)t.preventDefault(),p(i.first());else if("Escape"===n&&a)t.preventDefault(),e.close();else if("Enter"===n&&a)t.preventDefault(),f(e.state.focusedItem);else if("Tab"===n)e.inputRef.accept();else if("ArrowDown"===n){if(t.preventDefault(),r)return e.open();a?p(i.next(l)):f(i.next(c))}else if("ArrowUp"===n){if(t.preventDefault(),r)return e.close();a?p(i.prev(l)):f(i.prev(c))}}}}}),h=u(c.prototype,"toggle",[D.widgetEditable],{enumerable:!0,initializer:function(){var e=this;return function(){e.focus(),e.props.open?e.close():e.open()}}}),c),z=(0,_.default)(B,{open:"onToggle",value:"onChange"},["focus"]);t.default=z,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}t.__esModule=!0,t.default=t.caretSet=void 0;var u=r(n(0)),l=r(n(2)),c=n(12),f=r(n(134)),p=function(e,t,n){try{e.setSelectionRange(t,n)}catch(e){}};t.caretSet=p;var h=function(e){function t(){for(var t,n,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n=e.call.apply(e,[this].concat(i))||this,n.handleChange=function(e){var t=n.props,r=t.placeholder,i=t.value,o=t.onChange,a=e.target.value;!!r&&!a&&a===(i||"")||(n._last=a,o(e,a))},t||a(n)}s(t,e);var n=t.prototype;return n.componentDidUpdate=function(){var e=(0,c.findDOMNode)(this),t=this.props.value;if(this.isSuggesting()){var n=t.toLowerCase().indexOf(this._last.toLowerCase())+this._last.length,r=t.length-n;n>=0&&0!==r&&p(e,n,n+r)}},n.accept=function(){this._last=null},n.focus=function(){(0,c.findDOMNode)(this).focus()},n.isSuggesting=function(){var e=this.props,t=e.value;return!!e.suggest&&null!=this._last&&-1!==t.toLowerCase().indexOf(this._last.toLowerCase())},n.render=function(){var e=this.props,t=e.onKeyDown,n=o(e,["onKeyDown"]);return delete n.suggest,u.default.createElement(f.default,i({},n,{className:"rw-widget-input",onKeyDown:t,onChange:this.handleChange,__source:{fileName:"src/ComboboxInput.js",lineNumber:83},__self:this}))},t}(u.default.Component);h.defaultProps={value:""},h.propTypes={value:l.default.string,placeholder:l.default.string,suggest:l.default.bool,onChange:l.default.func.isRequired,onKeyDown:l.default.func};var d=h;t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}t.__esModule=!0,t.default=void 0;var o=r(n(0)),a=r(n(2)),s=r(n(52)),u=function(e){function t(){return e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){var e=this.props,t=e.messages,n=e.label,r=e.labelId,i=e.onMoveRight,a=e.onMoveLeft,u=e.onViewChange,l=e.prevDisabled,c=e.upDisabled,f=e.nextDisabled,p=e.isRtl;return o.default.createElement("div",{className:"rw-calendar-header",__source:{fileName:"src/Header.js",lineNumber:41},__self:this},o.default.createElement(s.default,{className:"rw-calendar-btn-left",onClick:a,disabled:l,label:t.moveBack(),icon:"chevron-"+(p?"right":"left"),__source:{fileName:"src/Header.js",lineNumber:42},__self:this}),o.default.createElement(s.default,{id:r,onClick:u,className:"rw-calendar-btn-view",disabled:c,"aria-live":"polite","aria-atomic":"true",__source:{fileName:"src/Header.js",lineNumber:49},__self:this},n),o.default.createElement(s.default,{className:"rw-calendar-btn-right",onClick:i,disabled:f,label:t.moveForward(),icon:"chevron-"+(p?"left":"right"),__source:{fileName:"src/Header.js",lineNumber:59},__self:this}))},t}(o.default.Component);u.contextTypes={},u.propTypes={label:a.default.string.isRequired,labelId:a.default.string,upDisabled:a.default.bool.isRequired,prevDisabled:a.default.bool.isRequired,nextDisabled:a.default.bool.isRequired,onViewChange:a.default.func.isRequired,onMoveLeft:a.default.func.isRequired,onMoveRight:a.default.func.isRequired,messages:a.default.shape({moveBack:a.default.func.isRequired,moveForward:a.default.func.isRequired}),isRtl:a.default.bool};var l=u;t.default=l,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.disabled,n=e.readOnly,r=e.value,i=e.onClick,a=e.culture,l=e.format;return o.default.createElement("div",{className:"rw-calendar-footer",__source:{fileName:c,lineNumber:25},__self:this},o.default.createElement(s.default,{disabled:!(!t&&!n),onClick:i.bind(null,r),__source:{fileName:c,lineNumber:26},__self:this},u.date.format(r,u.date.getFormat("footer",l),a)))}t.__esModule=!0,t.default=i;var o=r(n(0)),a=r(n(2)),s=r(n(52)),u=n(13),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(7)),c="src/Footer.js",f={disabled:a.default.bool,readOnly:a.default.bool,value:a.default.instanceOf(Date),onClick:a.default.func.isRequired,culture:a.default.string,format:l.dateFormat};i.propTypes=f,e.exports=t.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}t.__esModule=!0,t.default=void 0;var u=i(n(3)),l=i(n(2)),c=i(n(0)),f=i(n(95)),p=i(n(34)),h=n(13),d=r(n(7)),v=n(23),m=r(n(11)),y="src/Month.js",g=function(e,t){return p.default.eq(e,t,"day")},_=function(e){function t(){for(var t,n,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n=e.call.apply(e,[this].concat(i))||this,n.renderRow=function(e,t){var r=n.props,i=r.focused,o=r.today,a=r.activeId,s=r.disabled,u=r.onChange,l=r.value,p=r.culture,d=r.min,v=r.max,m=r.footerFormat,g=r.dateFormat,_=r.dayComponent;return m=h.date.getFormat("footer",m),g=h.date.getFormat("dayOfMonth",g),c.default.createElement(f.default.Row,{key:t,__source:{fileName:y,lineNumber:68},__self:this},e.map(function(e,t){var n=h.date.format(e,g,p),r=h.date.format(e,m,p);return c.default.createElement(f.default.Cell,{key:t,activeId:a,label:r,date:e,now:o,min:d,max:v,unit:"day",viewUnit:"month",onChange:u,focused:i,selected:l,disabled:s,__source:{fileName:y,lineNumber:74},__self:this},_?c.default.createElement(_,{date:e,label:n,__source:{fileName:y,lineNumber:89},__self:this}):n)}))},t||a(n)}s(t,e);var n=t.prototype;return n.renderHeaders=function(e,t,n){var r=h.date.firstOfWeek(n);return e.map(function(e){return c.default.createElement("th",{className:"rw-head-cell",key:"header_"+p.default.weekday(e,void 0,r),__source:{fileName:y,lineNumber:38},__self:this},h.date.format(e,t,n))})},n.render=function(){var e=this.props,t=e.className,n=e.focused,r=e.culture,i=e.activeId,a=e.dayFormat,s=p.default.visibleDays(n,r),l=(0,v.chunk)(s,7);return a=h.date.getFormat("weekday",a),c.default.createElement(f.default,o({},m.omitOwn(this),{activeId:i,className:(0,u.default)(t,"rw-calendar-month"),__source:{fileName:y,lineNumber:105},__self:this}),c.default.createElement("thead",{className:"rw-calendar-head",__source:{fileName:y,lineNumber:110},__self:this},c.default.createElement("tr",{className:"rw-calendar-row",__source:{fileName:y,lineNumber:111},__self:this},this.renderHeaders(l[0],a,r))),c.default.createElement(f.default.Body,{__source:{fileName:y,lineNumber:115},__self:this},l.map(this.renderRow)))},t}(c.default.Component);_.isEqual=g,_.propTypes={activeId:l.default.string,culture:l.default.string,today:l.default.instanceOf(Date),value:l.default.instanceOf(Date),focused:l.default.instanceOf(Date),min:l.default.instanceOf(Date),max:l.default.instanceOf(Date),onChange:l.default.func.isRequired,dayComponent:d.elementType,dayFormat:d.dateFormat,dateFormat:d.dateFormat,footerFormat:d.dateFormat,disabled:l.default.bool};var b=_;t.default=b,e.exports=t.default},function(e,t){function n(e){return e<0?Math.ceil(e):Math.floor(e)}function r(e,t){var n=s.month(e),r=n+t;for(e=s.month(e,r);r<0;)r=12+r;return s.month(e)!==r%12&&(e=s.date(e,0)),e}function i(e){return function(t,n){return void 0===n?t["get"+e]():(t=new Date(t),t["set"+e](n),t)}}function o(e){return function(t,n,r){return e(+s.startOf(t,r),+s.startOf(n,r))}}var a="milliseconds",s=e.exports={add:function(e,t,n){switch(e=new Date(e),n){case a:case"seconds":case"minutes":case"hours":case"year":return s[n](e,s[n](e)+t);case"day":return s.date(e,s.date(e)+t);case"week":return s.date(e,s.date(e)+7*t);case"month":return r(e,t);case"decade":return s.year(e,s.year(e)+10*t);case"century":return s.year(e,s.year(e)+100*t)}throw new TypeError('Invalid units: "'+n+'"')},subtract:function(e,t,n){return s.add(e,-t,n)},startOf:function(e,t,n){switch(e=new Date(e),t){case"century":case"decade":case"year":e=s.month(e,0);case"month":e=s.date(e,1);case"week":case"day":e=s.hours(e,0);case"hours":e=s.minutes(e,0);case"minutes":e=s.seconds(e,0);case"seconds":e=s.milliseconds(e,0)}return"decade"===t&&(e=s.subtract(e,s.year(e)%10,"year")),"century"===t&&(e=s.subtract(e,s.year(e)%100,"year")),"week"===t&&(e=s.weekday(e,0,n)),e},endOf:function(e,t,n){return e=new Date(e),e=s.startOf(e,t,n),e=s.add(e,1,t),e=s.subtract(e,1,a)},eq:o(function(e,t){return e===t}),neq:o(function(e,t){return e!==t}),gt:o(function(e,t){return e>t}),gte:o(function(e,t){return e>=t}),lt:o(function(e,t){return e<t}),lte:o(function(e,t){return e<=t}),min:function(){return new Date(Math.min.apply(Math,arguments))},max:function(){return new Date(Math.max.apply(Math,arguments))},inRange:function(e,t,n,r){return r=r||"day",(!t||s.gte(e,t,r))&&(!n||s.lte(e,n,r))},milliseconds:i("Milliseconds"),seconds:i("Seconds"),minutes:i("Minutes"),hours:i("Hours"),day:i("Day"),date:i("Date"),month:i("Month"),year:i("FullYear"),decade:function(e,t){return void 0===t?s.year(s.startOf(e,"decade")):s.add(e,t+10,"year")},century:function(e,t){return void 0===t?s.year(s.startOf(e,"century")):s.add(e,t+100,"year")},weekday:function(e,t,n){var r=(s.day(e)+7-(n||0))%7;return void 0===t?r:s.add(e,t-r,"day")},diff:function(e,t,r,i){var o,u,l;switch(r){case a:case"seconds":case"minutes":case"hours":case"day":case"week":o=t.getTime()-e.getTime();break;case"month":case"year":case"decade":case"century":o=12*(s.year(t)-s.year(e))+s.month(t)-s.month(e);break;default:throw new TypeError('Invalid units: "'+r+'"')}switch(r){case a:u=1;break;case"seconds":u=1e3;break;case"minutes":u=6e4;break;case"hours":u=36e5;break;case"day":u=864e5;break;case"week":u=6048e5;break;case"month":u=1;break;case"year":u=12;break;case"decade":u=120;break;case"century":u=1200;break;default:throw new TypeError('Invalid units: "'+r+'"')}return l=o/u,i?l:n(l)}}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}t.__esModule=!0,t.default=void 0;var u=i(n(0)),l=i(n(2)),c=i(n(95)),f=i(n(34)),p=n(13),h=n(23),d=r(n(11)),v=r(n(7)),m="src/Year.js",y=function(e){function t(){for(var t,n,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n=e.call.apply(e,[this].concat(i))||this,n.renderRow=function(e,t){var r=n.props,i=r.focused,o=r.activeId,a=r.disabled,s=r.onChange,l=r.value,f=r.today,h=r.culture,d=r.headerFormat,v=r.monthFormat,y=r.min,g=r.max;return d=p.date.getFormat("header",d),v=p.date.getFormat("month",v),u.default.createElement(c.default.Row,{key:t,__source:{fileName:m,lineNumber:46},__self:this},e.map(function(e,t){var n=p.date.format(e,d,h);return u.default.createElement(c.default.Cell,{key:t,activeId:o,label:n,date:e,now:f,min:y,max:g,unit:"month",onChange:s,focused:i,selected:l,disabled:a,__source:{fileName:m,lineNumber:51},__self:this},p.date.format(e,v,h))}))},t||a(n)}return s(t,e),t.prototype.render=function(){var e=this.props,t=e.focused,n=e.activeId,r=f.default.monthsInYear(f.default.year(t));return u.default.createElement(c.default,o({},d.omitOwn(this),{activeId:n,__source:{fileName:m,lineNumber:78},__self:this}),u.default.createElement(c.default.Body,{__source:{fileName:m,lineNumber:82},__self:this},(0,h.chunk)(r,4).map(this.renderRow)))},t}(u.default.Component);y.propTypes={activeId:l.default.string,culture:l.default.string,today:l.default.instanceOf(Date),value:l.default.instanceOf(Date),focused:l.default.instanceOf(Date),min:l.default.instanceOf(Date),max:l.default.instanceOf(Date),onChange:l.default.func.isRequired,headerFormat:v.dateFormat,monthFormat:v.dateFormat,disabled:l.default.bool};var g=y;t.default=g,e.exports=t.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function u(e){var t=[1,2,3,4,5,6,7,8,9,10,11,12],n=p.default.add(p.default.startOf(e,"decade"),-2,"year");return t.map(function(){return n=p.default.add(n,1,"year")})}t.__esModule=!0,t.default=void 0;var l=i(n(0)),c=i(n(2)),f=i(n(95)),p=i(n(34)),h=n(13),d=n(23),v=r(n(11)),m=r(n(7)),y="src/Decade.js",g=function(e){function t(){for(var t,n,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n=e.call.apply(e,[this].concat(i))||this,n.renderRow=function(e,t){var r=n.props,i=r.focused,o=r.activeId,a=r.disabled,s=r.onChange,u=r.yearFormat,c=r.value,p=r.today,d=r.culture,v=r.min,m=r.max;return l.default.createElement(f.default.Row,{key:t,__source:{fileName:y,lineNumber:41},__self:this},e.map(function(e,t){var n=h.date.format(e,h.date.getFormat("year",u),d);return l.default.createElement(f.default.Cell,{key:t,unit:"year",activeId:o,label:n,date:e,now:p,min:v,max:m,onChange:s,focused:i,selected:c,disabled:a,__source:{fileName:y,lineNumber:50},__self:this},n)}))},t||a(n)}return s(t,e),t.prototype.render=function(){var e=this.props,t=e.focused,n=e.activeId;return l.default.createElement(f.default,o({},v.omitOwn(this),{activeId:n,__source:{fileName:y,lineNumber:76},__self:this}),l.default.createElement(f.default.Body,{__source:{fileName:y,lineNumber:80},__self:this},(0,d.chunk)(u(t),4).map(this.renderRow)))},t}(l.default.Component);g.propTypes={activeId:c.default.string,culture:c.default.string,today:c.default.instanceOf(Date),value:c.default.instanceOf(Date),focused:c.default.instanceOf(Date),min:c.default.instanceOf(Date),max:c.default.instanceOf(Date),onChange:c.default.func.isRequired,yearFormat:m.dateFormat,disabled:c.default.bool};var _=g;t.default=_,e.exports=t.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function u(e){var t=[1,2,3,4,5,6,7,8,9,10,11,12],n=p.default.add(p.default.startOf(e,"century"),-20,"year");return t.map(function(){return n=p.default.add(n,10,"year")})}t.__esModule=!0,t.default=void 0;var l=i(n(0)),c=i(n(2)),f=i(n(95)),p=i(n(34)),h=n(13),d=n(23),v=r(n(11)),m=r(n(7)),y="src/Century.js",g=function(e){function t(){for(var t,n,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n=e.call.apply(e,[this].concat(i))||this,n.renderRow=function(e,t){var r=n.props,i=r.focused,o=r.activeId,a=r.disabled,s=r.onChange,u=r.value,c=r.today,d=r.culture,v=r.min,m=r.decadeFormat,g=r.max;return m=h.date.getFormat("decade",m),l.default.createElement(f.default.Row,{key:t,__source:{fileName:y,lineNumber:42},__self:this},e.map(function(e,t){var n=h.date.format(p.default.startOf(e,"decade"),m,d);return l.default.createElement(f.default.Cell,{key:t,unit:"decade",activeId:o,label:n,date:e,now:c,min:v,max:g,onChange:s,focused:i,selected:u,disabled:a,__source:{fileName:y,lineNumber:51},__self:this},n)}))},t||a(n)}return s(t,e),t.prototype.render=function(){var e=this.props,t=e.focused,n=e.activeId;return l.default.createElement(f.default,o({},v.omitOwn(this),{activeId:n,__source:{fileName:y,lineNumber:77},__self:this}),l.default.createElement(f.default.Body,{__source:{fileName:y,lineNumber:81},__self:this},(0,d.chunk)(u(t),4).map(this.renderRow)))},t}(l.default.Component);g.propTypes={activeId:c.default.string,culture:c.default.string,today:c.default.instanceOf(Date),value:c.default.instanceOf(Date),focused:c.default.instanceOf(Date),min:c.default.instanceOf(Date),max:c.default.instanceOf(Date),onChange:c.default.func.isRequired,decadeFormat:m.dateFormat,disabled:c.default.bool};var _=g;t.default=_,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=n(2),c=r(l),f=n(0),p=r(f),h=n(596),d=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},v=(c.default.any,c.default.node,c.default.bool,c.default.bool,c.default.bool,c.default.func,{component:"div",childFactory:function(e){return e}}),m=function(e){function t(n,r){o(this,t);var i=a(this,e.call(this,n,r));return i.handleExited=function(e,t,n){var r=(0,h.getChildMapping)(i.props.children);e in r||(n&&n(t),i.setState(function(t){var n=u({},t.children);return delete n[e],{children:n}}))},i.state={children:(0,h.getChildMapping)(n.children,function(e){var t=function(t){i.handleExited(e.key,t,e.props.onExited)};return(0,f.cloneElement)(e,{onExited:t,in:!0,appear:i.getProp(e,"appear"),enter:i.getProp(e,"enter"),exit:i.getProp(e,"exit")})})},i}return s(t,e),t.prototype.getChildContext=function(){return{transitionGroup:{isMounting:!this.appeared}}},t.prototype.getProp=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props;return null!=n[t]?n[t]:e.props[t]},t.prototype.componentDidMount=function(){this.appeared=!0},t.prototype.componentWillReceiveProps=function(e){var t=this,n=this.state.children,r=(0,h.getChildMapping)(e.children),i=(0,h.mergeChildMappings)(n,r);Object.keys(i).forEach(function(o){var a=i[o];if((0,f.isValidElement)(a)){var s=function(e){t.handleExited(a.key,e,a.props.onExited)},u=o in n,l=o in r,c=n[o],p=(0,f.isValidElement)(c)&&!c.props.in;!l||u&&!p?l||!u||p?l&&u&&(0,f.isValidElement)(c)&&(i[o]=(0,f.cloneElement)(a,{onExited:s,in:c.props.in,exit:t.getProp(a,"exit",e),enter:t.getProp(a,"enter",e)})):i[o]=(0,f.cloneElement)(a,{in:!1}):i[o]=(0,f.cloneElement)(a,{onExited:s,in:!0,exit:t.getProp(a,"exit",e),enter:t.getProp(a,"enter",e)})}}),this.setState({children:i})},t.prototype.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=i(e,["component","childFactory"]),o=this.state.children;return delete r.appear,delete r.enter,delete r.exit,p.default.createElement(t,r,d(o).map(n))},t}(p.default.Component);m.childContextTypes={transitionGroup:c.default.object.isRequired},m.propTypes={},m.defaultProps=v,t.default=m,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){var n=function(e){return t&&(0,o.isValidElement)(e)?t(e):e},r=Object.create(null);return e&&o.Children.map(e,function(e){return e}).forEach(function(e){r[e.key]=n(e)}),r}function i(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r=Object.create(null),i=[];for(var o in e)o in t?i.length&&(r[o]=i,i=[]):i.push(o);var a=void 0,s={};for(var u in t){if(r[u])for(a=0;a<r[u].length;a++){var l=r[u][a];s[r[u][a]]=n(l)}s[u]=n(u)}for(a=0;a<i.length;a++)s[i[a]]=n(i[a]);return s}t.__esModule=!0,t.getChildMapping=r,t.mergeChildMappings=i;var o=n(0)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}t.__esModule=!0,t.default=void 0;var a=r(n(0)),s=r(n(2)),u=r(n(135)),l={open:s.default.bool,defaultOpen:s.default.bool,onToggle:s.default.func},c=function(e){function t(t,n){var r;return r=e.call(this,t,n)||this,r.handleToggle=function(e){r.toggleState=!!e,r.props.onToggle?r.props.onToggle(r.toggleState):r.forceUpdate()},r.toggleState=t.defaultOpen,r}return o(t,e),t.prototype.render=function(){var e=this.props.open;return e=void 0===e?this.toggleState:e,a.default.createElement(u.default,i({},this.props,{time:!1,open:e?"date":e,onToggle:this.handleToggle,__source:{fileName:"src/DatePicker.js",lineNumber:34},__self:this}))},t}(a.default.Component);c.propTypes=l;var f=c;t.default=f,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){return function(n,r,i,o,u){var l=i||"<<anonymous>>",c=u||r;if(null!=n[r]){var f=i+"."+r;(0,a.default)(s[f],"The "+o+" `"+c+"` of `"+l+"` is deprecated. "+t+"."),s[f]=!0}for(var p=arguments.length,h=Array(p>5?p-5:0),d=5;d<p;d++)h[d-5]=arguments[d];return e.apply(void 0,[n,r,i,o,u].concat(h))}}function i(){s={}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(241),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s={};r._resetWarned=i,e.exports=t.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return!isNaN(e.getTime())}function l(e,t,n){var r="";return e instanceof Date&&u(e)&&(r=d.date.format(e,t,n)),r}t.__esModule=!0,t.default=void 0;var c=i(n(2)),f=i(n(0)),p=n(12),h=i(n(134)),d=n(13),v=r(n(7)),m=r(n(11)),y=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t=e.call.apply(e,[this].concat(r))||this,g.call(s(t));var o=t.props,a=o.value,u=o.editing,c=o.editFormat,f=o.format,p=o.culture;return t.state={textValue:l(a,u&&c?c:f,p)},t}a(t,e);var n=t.prototype;return n.componentWillReceiveProps=function(e){var t=e.value,n=e.editing,r=e.editFormat,i=e.format,o=e.culture;this.setState({textValue:l(t,n&&r?r:i,o)})},n.focus=function(){(0,p.findDOMNode)(this).focus()},n.render=function(){var e=this.props,t=e.disabled,n=e.readOnly,r=this.state.textValue,i=m.omitOwn(this);return f.default.createElement(h.default,o({},i,{type:"text",className:"rw-widget-input",value:r,disabled:t,readOnly:n,onChange:this.handleChange,onBlur:this.handleBlur,__source:{fileName:"src/DateTimePickerInput.js",lineNumber:81},__self:this}))},t}(f.default.Component);y.propTypes={format:v.dateFormat.isRequired,editing:c.default.bool,editFormat:v.dateFormat,parse:c.default.func.isRequired,value:c.default.instanceOf(Date),onChange:c.default.func.isRequired,onBlur:c.default.func,culture:c.default.string,disabled:v.disabled,readOnly:v.disabled};var g=function(){var e=this;this.handleBlur=function(t){var n=e.props,r=n.format,i=n.culture,o=n.parse,a=n.onChange,s=n.onBlur;if(s&&s(t),e._needsFlush){var u=o(t.target.value);e._needsFlush=!1,a(u,l(u,r,i))}},this.handleChange=function(t){var n=t.target.value;e._needsFlush=!0,e.setState({textValue:n})}},_=y;t.default=_,e.exports=t.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}t.__esModule=!0,t.default=void 0;var u=i(n(0)),l=i(n(2)),c=n(25),f=i(n(65)),p=i(n(34)),h=i(n(53)),d=n(13),v=r(n(7)),m=r(n(11)),y=function(e){return d.date.getFormat("time",e.format)},g=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n];return null},_=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=e.call.apply(e,[this].concat(r))||this,t.handleKeyDown=function(e){var n=e.key,r=t.state.focusedItem,i=t.list;"End"===n?(e.preventDefault(),t.setState({focusedItem:i.last()})):"Home"===n?(e.preventDefault(),t.setState({focusedItem:i.first()})):"Enter"===n?t.props.onSelect(r):"ArrowDown"===n?(e.preventDefault(),t.setState({focusedItem:i.next(r)})):"ArrowUp"===n&&(e.preventDefault(),t.setState({focusedItem:i.prev(r)}))},t.scrollTo=function(){t.listRef.move&&t.listRef.move()},t.attachListRef=function(e){return t.listRef=e},t.accessors={text:function(e){return e.label},value:function(e){return e.date}},t.timeouts=(0,c.timeoutManager)(s(t)),t.list=(0,h.default)(s(t),{getListDataState:f.default.getListDataState,accessors:t.accessors}),t.state=t.getStateFromProps(t.props),t}a(t,e);var n=t.prototype;return n.componentWillReceiveProps=function(e){this.setState(this.getStateFromProps(e))},n.componentWillUnmount=function(){this.unmounted=!0},n.getBounds=function(e){var t,n,r=e.value||e.currentDate||p.default.today(),i=e.preserveDate,o=e.min,a=e.max;return i?(t=p.default.today(),n=p.default.tomorrow(),{min:p.default.eq(r,o,"day")?p.default.merge(t,o,e.currentDate):t,max:p.default.eq(r,a,"day")?p.default.merge(t,a,e.currentDate):n}):(t=p.default.startOf(p.default.merge(new Date,o,e.currentDate),"minutes"),n=p.default.startOf(p.default.merge(new Date,a,e.currentDate),"minutes"),p.default.lte(n,t)&&p.default.gt(a,o,"day")&&(n=p.default.tomorrow()),{min:t,max:n})},n.getDates=function(e){void 0===e&&(e=this.props);for(var t=[],n=this.getBounds(e),r=n.min,i=p.default.date(r);p.default.date(r)===i&&p.default.lte(r,n.max);)t.push({date:r,label:d.date.format(r,y(e),e.culture)}),r=p.default.add(r,e.step||30,"minutes");return t},n.getStateFromProps=function(e){void 0===e&&(e=this.props);var t=e,n=t.value,r=t.currentDate,i=t.step,o=this.getDates(e),a=n||r,s=g(o,function(e){return p.default.eq(e.date,a,"minutes")}),u=g(o,function(e){return Math.abs(p.default.diff(e.date,a,"minutes"))<i});return this.list.setData(o),{dates:o,selectedItem:this.list.nextEnabled(s),focusedItem:this.list.nextEnabled(s||u||o[0])}},n.render=function(){var e=this.props.onSelect,t=this.state,n=t.selectedItem,r=t.focusedItem,i=m.omitOwn(this),a=this.list.defaultProps();return u.default.createElement(f.default,o({},i,a,{onSelect:e,textAccessor:this.accessors.text,valueAccessor:this.accessors.value,selectedItem:n,focusedItem:r,ref:this.attachListRef,__source:{fileName:"src/TimeList.js",lineNumber:185},__self:this}))},t}(u.default.Component);_.defaultProps={step:30,onSelect:function(){},currentDate:new Date,min:new Date(1900,0,1),max:new Date(2099,11,31),preserveDate:!0,delay:300},_.propTypes={value:l.default.instanceOf(Date),step:l.default.number,min:l.default.instanceOf(Date),max:l.default.instanceOf(Date),currentDate:l.default.instanceOf(Date),itemComponent:v.elementType,format:v.dateFormat,onSelect:l.default.func,preserveDate:l.default.bool,culture:l.default.string,delay:l.default.number};var b=_;t.default=b,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}t.__esModule=!0,t.default=void 0;var a=r(n(0)),s=r(n(2)),u=r(n(135)),l={open:s.default.bool,defaultOpen:s.default.bool,onToggle:s.default.func},c=function(e){function t(t,n){var r;return r=e.call(this,t,n)||this,r.handleToggle=function(e){r.toggleState=!!e,r.props.onToggle?r.props.onToggle(r.toggleState):r.forceUpdate()},r.toggleState=t.defaultOpen,r}return o(t,e),t.prototype.render=function(){var e=this.props.open;return e=void 0===e?this.toggleState:e,a.default.createElement(u.default,i({},this.props,{date:!1,open:e?"time":e,onToggle:this.handleToggle,__source:{fileName:"src/TimePicker.js",lineNumber:34},__self:this}))},t}(a.default.Component);c.propTypes=l;var f=c;t.default=f,e.exports=t.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}function a(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function s(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t,n,r,i){var o={};return Object.keys(r).forEach(function(e){o[e]=r[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function c(e){var t,n,r=function(){return clearTimeout(n)};return n=setTimeout(t=function(){n=setTimeout(t,35),e()},500),r}function f(e,t,n){return n=null==n?1/0:n,t=null==t?-1/0:t,null==e||""===e?null:Math.max(Math.min(e,n),t)}function p(e,t){return t=t||0,e=(""+e).split("e"),e=Math.round(+(e[0]+"e"+(e[1]?+e[1]+t:t))),e=(""+e).split("e"),e=+(e[0]+"e"+(e[1]?+e[1]-t:-t)),e.toFixed(t)}t.__esModule=!0,t.default=void 0;var h,d,v,m,y,g,_=i(n(3)),b=i(n(2)),x=i(n(0)),w=i(n(41)),E=i(n(42)),S=i(n(63)),T=i(n(64)),A=i(n(603)),O=i(n(52)),P=n(32),C=r(n(11)),k=i(n(43)),R=n(33),M=n(26),I=r(n(7)),L=n(13),D="src/NumberPicker.js",N=function(e){return L.number.getFormat("default",e.format)},F=(g=y=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=e.call.apply(e,[this].concat(r))||this,a(t,"handleMouseDown",d,u(t)),a(t,"handleMouseUp",v,u(t)),a(t,"handleKeyDown",m,u(t)),t.handleChange=function(e,n){void 0===n&&(n=null);var r=t.props,i=r.onChange,o=r.value,a=r.min,s=r.max,u=f(e,a,s);o!==u&&(0,M.notify)(i,[u,{rawValue:e,lastValue:o,originalEvent:n}])},t.attachInputRef=function(e){t.inputRef=e},t.messages=(0,P.getMessages)(t.props.messages),t.focusManager=(0,k.default)(u(t),{willHandle:function(e){e&&t.focus()}}),t.state={focused:!1},t}s(t,e);var n=t.prototype;return n.componentWillReceiveProps=function(e){var t=e.messages;this.messages=(0,P.getMessages)(t)},n.renderInput=function(e){var t=this.props,n=t.placeholder,r=t.autoFocus,i=t.tabIndex,a=t.parse,s=t.name,u=t.onKeyPress,l=t.onKeyUp,c=t.min,f=t.max,p=t.disabled,h=t.readOnly,d=t.inputProps,v=t.format,m=t.culture;return x.default.createElement(A.default,o({},d,{role:"spinbutton",tabIndex:i,value:e,placeholder:n,autoFocus:r,editing:this.state.focused,format:v,culture:m,parse:a,name:s,min:c,max:f,disabled:p,readOnly:h,onChange:this.handleChange,onKeyPress:u,onKeyUp:l,nodeRef:this.attachInputRef,__source:{fileName:D,lineNumber:242},__self:this}))},n.render=function(){var e=this,t=this.props,n=t.className,r=t.disabled,i=t.readOnly,a=t.value,s=t.min,u=t.max,l=this.state.focused,c=C.pickElementProps(this);return a=f(a,s,u),x.default.createElement(E.default,o({},c,{focused:l,disabled:r,readOnly:i,onKeyDown:this.handleKeyDown,onBlur:this.focusManager.handleBlur,onFocus:this.focusManager.handleFocus,className:(0,_.default)(n,"rw-number-picker"),__source:{fileName:D,lineNumber:275},__self:this}),x.default.createElement(S.default,{__source:{fileName:D,lineNumber:285},__self:this},this.renderInput(a),x.default.createElement(T.default,{bordered:!0,__source:{fileName:D,lineNumber:287},__self:this},x.default.createElement(O.default,{icon:"caret-up",onClick:this.handleFocus,disabled:a===u||r,label:this.messages.increment({value:a,min:s,max:u}),onMouseUp:function(t){return e.handleMouseUp("UP",t)},onMouseDown:function(t){return e.handleMouseDown("UP",t)},onMouseLeave:function(t){return e.handleMouseUp("UP",t)},__source:{fileName:D,lineNumber:288},__self:this}),x.default.createElement(O.default,{icon:"caret-down",onClick:this.handleFocus,disabled:a===s||r,label:this.messages.decrement({value:a,min:s,max:u}),onMouseUp:function(t){return e.handleMouseUp("DOWN",t)},onMouseDown:function(t){return e.handleMouseDown("DOWN",t)},onMouseLeave:function(t){return e.handleMouseUp("DOWN",t)},__source:{fileName:D,lineNumber:297},__self:this}))))},n.focus=function(){this.inputRef.focus()},n.increment=function(e){return this.step(this.props.step,e)},n.decrement=function(e){return this.step(-this.props.step,e)},n.step=function(e,t){var n=(this.props.value||0)+e,r=null!=this.props.precision?this.props.precision:L.number.precision(N(this.props));return this.handleChange(null!=r?p(n,r):n,t),n},t}(x.default.Component),y.propTypes={value:b.default.number,onChange:b.default.func,min:b.default.number,max:b.default.number,step:b.default.number,precision:b.default.number,culture:b.default.string,format:I.numberFormat,parse:b.default.func,tabIndex:b.default.any,name:b.default.string,placeholder:b.default.string,onKeyDown:b.default.func,onKeyPress:b.default.func,onKeyUp:b.default.func,autoFocus:b.default.bool,disabled:I.disabled,readOnly:I.disabled,inputProps:b.default.object,isRtl:b.default.bool,messages:b.default.shape({increment:b.default.string,decrement:b.default.string})},y.defaultProps={value:null,open:!1,min:-1/0,max:1/0,step:1},h=g,d=l(h.prototype,"handleMouseDown",[R.widgetEditable],{enumerable:!0,initializer:function(){var e=this;return function(t,n){var r=e.props,i=r.min,o=r.max;n&&n.persist();var a="UP"===t?e.increment:e.decrement,s=a.call(e,n),u="UP"===t&&s===o,l="DOWN"===t&&s===i;u||l?e.handleMouseUp():e._cancelRepeater||(e._cancelRepeater=c(function(){e.handleMouseDown(t,n)}))}}}),v=l(h.prototype,"handleMouseUp",[R.widgetEditable],{enumerable:!0,initializer:function(){var e=this;return function(){e._cancelRepeater&&e._cancelRepeater(),e._cancelRepeater=null}}}),m=l(h.prototype,"handleKeyDown",[R.widgetEditable],{enumerable:!0,initializer:function(){var e=this;return function(t){var n=e.props,r=n.min,i=n.max,o=n.onKeyDown,a=t.key;(0,M.notify)(o,[t]),t.defaultPrevented||("End"===a&&isFinite(i)?e.handleChange(i,t):"Home"===a&&isFinite(r)?e.handleChange(r,t):"ArrowDown"===a?(t.preventDefault(),e.decrement(t)):"ArrowUp"===a&&(t.preventDefault(),e.increment(t)))}}}),h),j=(0,w.default)(F,{value:"onChange"},["focus"]);t.default=j,e.exports=t.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function s(e,t){var n=y.number.decimalChar(null,t),r=e.split(n),i=(r[0],r[1]);return!(!i||!i.match(/0+$/))}function u(e,t,n){var r,i=y.number.decimalChar(null,n),o=t.length-1;return!(t.length<1)&&!((r=t[o])!==i||t.indexOf(r)!==o)}t.__esModule=!0,t.default=void 0;var l=i(n(31)),c=i(n(88)),f=i(n(2)),p=i(n(0)),h=n(12),d=i(n(134)),v=r(n(11)),m=r(n(7)),y=n(13),g=function(e){return y.number.getFormat("default",e.format)},_=function(e){return"-"===(e||"").trim()},b=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=e.call.apply(e,[this].concat(r))||this,t.handleBlur=function(e){var n=t.state.stringValue,r=t.parseNumber(n);t.isIntermediateValue(r,n)&&(isNaN(r)&&(r=null),t.props.onChange(r,e))},t.handleChange=function(e){var n=t.props,r=n.value,i=n.onChange,o=e.target.value,a=t.parseNumber(o),s=t.isIntermediateValue(a,o);if(null==o||""===o.trim())return t.setStringValue(""),void i(null,e);s?t.setStringValue(o):a!==r?i(a,e):o!=t.state.stringValue&&t.setStringValue(o)},t.state=t.getDefaultState(),t}a(t,e);var n=t.prototype;return n.componentWillReceiveProps=function(e){l.default&&(this.tabbedSelection=this.isSelectingAllText()),this.setState(this.getDefaultState(e))},n.componentDidUpdate=function(e){this.tabbedSelection&&!e.editing&&this.props.editing&&(0,h.findDOMNode)(this).select()},n.getDefaultState=function(e){void 0===e&&(e=this.props);var t=e,n=t.value,r=t.culture,i=t.editing,o=y.number.decimalChar(null,r),a=g(e);return n=null==n||isNaN(n)?"":i?(""+n).replace(".",o):y.number.format(n,a,r),{stringValue:""+n}},n.setStringValue=function(e){this.setState({stringValue:e})},n.isIntermediateValue=function(e,t){var n=this.props,r=n.culture;return!!(e<n.min||_(t)||u(e,t,r)||s(t,r))},n.isSelectingAllText=function(){var e=(0,h.findDOMNode)(this);return(0,c.default)()===e&&0===e.selectionStart&&e.selectionEnd===e.value.length},n.parseNumber=function(e){var t=this.props,n=t.culture,r=t.parse,i=y.number.decimalChar(null,n);return r?r(e,n):(e=e.replace(i,"."),e=parseFloat(e))},n.render=function(){var e=this.props,t=e.disabled,n=e.readOnly,r=e.placeholder,i=e.min,a=e.max,s=this.state.stringValue,u=v.omitOwn(this);return p.default.createElement(d.default,o({},u,{className:"rw-widget-input",onChange:this.handleChange,onBlur:this.handleBlur,"aria-valuenow":s,"aria-valuemin":isFinite(i)?i:null,"aria-valuemax":isFinite(a)?a:null,disabled:t,readOnly:n,placeholder:r,value:s,__source:{fileName:"src/NumberInput.js",lineNumber:193},__self:this}))},t}(p.default.Component);b.defaultProps={value:null,editing:!1},b.propTypes={value:f.default.number,editing:f.default.bool,placeholder:f.default.string,format:m.numberFormat,parse:f.default.func,culture:f.default.string,min:f.default.number,max:f.default.number,disabled:m.disabled,readOnly:m.disabled,onChange:f.default.func.isRequired};var x=b;t.default=x,e.exports=t.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t,n,r,i){var o={};return Object.keys(r).forEach(function(e){o[e]=r[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}t.__esModule=!0,t.default=void 0;var c,f,p,h,d,v,m,y,g=i(n(3)),_=i(n(605)),b=i(n(2)),x=i(n(0)),w=i(n(41)),E=i(n(42)),S=i(n(63)),T=i(n(64)),A=i(n(90)),O=i(n(606)),P=i(n(607)),C=i(n(65)),k=i(n(255)),R=n(23),M=r(n(93)),I=r(n(11)),L=n(32),D=r(n(7)),N=i(n(66)),F=i(n(43)),j=i(n(53)),B=i(n(67)),z=n(33),U=n(26),V="src/Multiselect.js",G={},W="remove",H=l({},M.propTypes,{data:b.default.array,value:b.default.array,onChange:b.default.func,searchTerm:b.default.string,onSearch:b.default.func,open:b.default.bool,onToggle:b.default.func,valueField:D.accessor,textField:D.accessor,tagComponent:D.elementType,itemComponent:D.elementType,listComponent:D.elementType,groupComponent:D.elementType,groupBy:D.accessor,allowCreate:b.default.oneOf([!0,!1,"onFilter"]),onSelect:b.default.func,onCreate:b.default.func,busy:b.default.bool,dropUp:b.default.bool,popupTransition:D.elementType,inputProps:b.default.object,listProps:b.default.object,autoFocus:b.default.bool,placeholder:b.default.string,disabled:D.disabled.acceptsArray,readOnly:D.disabled,isRtl:b.default.bool,messages:b.default.shape({open:D.message,emptyList:D.message,emptyFilter:D.message,createOption:D.message,tagsLabel:D.message,selectedItems:D.message,noneSelected:D.message,removeLabel:D.message})}),X=(y=m=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=e.call.apply(e,[this].concat(r))||this,t.handleFocusDidChange=function(e){if(e)return t.focus();t.close(),t.clearSearch(),t.tagsRef&&t.setState({focusedTag:null})},t.handleDelete=function(e,n){var r=t.props,i=r.disabled,o=r.readOnly;1==i||o||(t.focus(),t.change(e,n,W))},t.handleSearchKeyDown=function(e){"Backspace"===e.key&&e.target.value&&!t._deletingText&&(t._deletingText=!0)},t.handleSearchKeyUp=function(e){"Backspace"===e.key&&t._deletingText&&(t._deletingText=!1)},t.handleInputChange=function(e){t.search(e.target.value,e,"input"),t.open()},o(t,"handleClick",f,s(t)),o(t,"handleDoubleClick",p,s(t)),o(t,"handleSelect",h,s(t)),o(t,"handleCreate",d,s(t)),o(t,"handleKeyDown",v,s(t)),t.attachListRef=function(e){return t.listRef=e},t.attachTagsRef=function(e){return t.tagsRef=e},t.attachInputRef=function(e){return t.inputRef=e},t.messages=(0,L.getMessages)(t.props.messages),t.inputId=(0,U.instanceId)(s(t),"_input"),t.tagsId=(0,U.instanceId)(s(t),"_taglist"),t.notifyId=(0,U.instanceId)(s(t),"_notify_area"),t.listId=(0,U.instanceId)(s(t),"_listbox"),t.createId=(0,U.instanceId)(s(t),"_createlist_option"),t.activeTagId=(0,U.instanceId)(s(t),"_taglist_active_tag"),t.activeOptionId=(0,U.instanceId)(s(t),"_listbox_active_option"),t.list=(0,j.default)(s(t)),t.tagList=(0,j.default)(s(t),{getStateGetterFromProps:null}),t.accessors=(0,N.default)(s(t)),t.handleScroll=(0,B.default)(s(t)),t.focusManager=(0,F.default)(s(t),{didHandle:t.handleFocusDidChange}),t.isDisabled=(0,z.disabledManager)(s(t)),t.state=l({focusedTag:null},t.getStateFromProps(t.props)),t}a(t,e);var n=t.prototype;return n.componentWillReceiveProps=function(e){this.messages=(0,L.getMessages)(e.messages),this.setState(this.getStateFromProps(e))},n.getStateFromProps=function(e){var t=this.accessors,n=this.list,r=this.tagList,i=e.data,o=e.searchTerm,a=e.minLength,s=e.caseSensitive,u=e.filter,l=(0,R.makeArray)(e.value),c=l.map(function(e){return t.findOrSelf(i,e)});i=i.filter(function(e){return!l.some(function(n){return t.matches(e,n)})}),this._lengthWithoutValues=i.length,i=M.filter(i,{filter:u,searchTerm:o,minLength:a,caseSensitive:s,textField:t.text}),n.setData(i),r.setData(c);var f=this.state||{},p=f.focusedItem,h=f.focusedTag;return{data:i,dataItems:c,focusedTag:n.nextEnabled(~c.indexOf(h)?h:null),focusedItem:n.nextEnabled(~i.indexOf(p)?p:i[0])}},n.renderInput=function(e){var t,n=this.props,r=n.searchTerm,i=n.maxLength,o=n.tabIndex,a=n.busy,s=n.autoFocus,u=n.inputProps,c=n.open,f=this.state,p=f.focusedItem,h=f.focusedTag,d=!0===this.props.disabled,v=!0===this.props.readOnly;return c?(p||this.allowCreate())&&(t=this.activeOptionId):t=h?this.activeTagId:"",x.default.createElement(O.default,l({},u,{autoFocus:s,tabIndex:o||0,role:"listbox","aria-expanded":!!c,"aria-busy":!!a,"aria-owns":e,"aria-haspopup":!0,"aria-activedescendant":t||null,value:r,maxLength:i,disabled:d,readOnly:v,placeholder:this.getPlaceholder(),onKeyDown:this.handleSearchKeyDown,onKeyUp:this.handleSearchKeyUp,onChange:this.handleInputChange,ref:this.attachInputRef,__source:{fileName:V,lineNumber:390},__self:this}))},n.renderList=function(e){var t=this.inputId,n=this.activeOptionId,r=this.listId,i=this.accessors,o=this.props.open,a=this.state.focusedItem,s=this.props.listComponent,u=this.list.defaultProps();return x.default.createElement(s,l({},u,{id:r,activeId:n,valueAccessor:i.value,textAccessor:i.text,focusedItem:a,onSelect:this.handleSelect,onMove:this.handleScroll,"aria-live":"polite","aria-labelledby":t,"aria-hidden":!o,ref:this.attachListRef,messages:{emptyList:this._lengthWithoutValues?e.emptyFilter:e.emptyList},__source:{fileName:V,lineNumber:422},__self:this}))},n.renderNotificationArea=function(e){var t=this,n=this.state,r=n.focused,i=n.dataItems,o=i.map(function(e){return t.accessors.text(e)});return x.default.createElement("span",{id:this.notifyId,role:"status",className:"rw-sr","aria-live":"assertive","aria-atomic":"true","aria-relevant":"additions removals text",__source:{fileName:V,lineNumber:450},__self:this},r&&(i.length?e.selectedItems(o):e.noneSelected()))},n.renderTags=function(e){var t=this.props.readOnly,n=this.state,r=n.focusedTag,i=n.dataItems,o=this.props.tagComponent;return x.default.createElement(P.default,{id:this.tagsId,activeId:this.activeTagId,textAccessor:this.accessors.text,valueAccessor:this.accessors.value,label:e.tagsLabel(),value:i,readOnly:t,disabled:this.isDisabled(),focusedItem:r,onDelete:this.handleDelete,valueComponent:o,ref:this.attachTagsRef,__source:{fileName:V,lineNumber:473},__self:this})},n.render=function(){var e=this,t=this.props,n=t.className,r=t.busy,i=t.dropUp,o=t.open,a=t.searchTerm,s=t.popupTransition,u=this.state,c=u.focused,f=u.focusedItem,p=u.dataItems,h=I.pickElementProps(this),d=!!p.length,v=(0,U.isFirstFocusedRender)(this)||o,m=this.allowCreate(),y=this.listId+" "+this.notifyId+" "+(d?this.tagsId:"")+(m?this.createId:""),_=!0===this.isDisabled(),b=!0===this.props.readOnly,w=this.messages;return x.default.createElement(E.default,l({},h,{open:o,dropUp:i,focused:c,disabled:_,readOnly:b,onKeyDown:this.handleKeyDown,onBlur:this.focusManager.handleBlur,onFocus:this.focusManager.handleFocus,className:(0,g.default)(n,"rw-multiselect"),__source:{fileName:V,lineNumber:519},__self:this}),this.renderNotificationArea(w),x.default.createElement(S.default,{className:"rw-widget-input",onClick:this.handleClick,onDoubleClick:this.handleDoubleClick,onTouchEnd:this.handleClick,__source:{fileName:V,lineNumber:532},__self:this},x.default.createElement("div",{__source:{fileName:V,lineNumber:538},__self:this},d&&this.renderTags(w),this.renderInput(y)),x.default.createElement(T.default,{busy:r,icon:c?"caret-down":"","aria-hidden":"true",role:"presentational",disabled:_||b,__source:{fileName:V,lineNumber:543},__self:this})),v&&x.default.createElement(A.default,{dropUp:i,open:o,transition:s,onEntering:function(){return e.listRef.forceUpdate()},__source:{fileName:V,lineNumber:553},__self:this},x.default.createElement("div",{__source:{fileName:V,lineNumber:559},__self:this},this.renderList(w),m&&x.default.createElement(k.default,{id:this.createId,searchTerm:a,onSelect:this.handleCreate,focused:!f||f===G,__source:{fileName:V,lineNumber:563},__self:this},w.createOption(this.props)))))},n.change=function(e,t,n){var r=this.props,i=r.onChange,o=r.searchTerm,a=r.value,s=this.state.dataItems;switch(n){case"insert":s=s.concat(e);break;case W:s=s.filter(function(t){return t!==e})}(0,U.notify)(i,[s,{action:n,dataItem:e,originalEvent:t,lastValue:a,searchTerm:o}]),this.clearSearch(t)},n.clearSearch=function(e){this.search("",e,"clear")},n.search=function(e,t,n){void 0===n&&(n="input");var r=this.props,i=r.onSearch,o=r.searchTerm;e!==o&&(0,U.notify)(i,[e,{action:n,lastSearchTerm:o,originalEvent:t}])},n.focus=function(){this.inputRef&&this.inputRef.focus()},n.toggle=function(){this.props.open?this.close():this.open()},n.open=function(){this.props.open||(0,U.notify)(this.props.onToggle,!0)},n.close=function(){this.props.open&&(0,U.notify)(this.props.onToggle,!1)},n.allowCreate=function(){var e=this.props,t=e.searchTerm,n=e.onCreate,r=e.allowCreate;return!(!n||!(!0===r||"onFilter"===r&&t)||this.hasExtactMatch())},n.hasExtactMatch=function(){var e=this.props,t=e.searchTerm,n=e.caseSensitive,r=this.state,i=r.data,o=r.dataItems,a=this.accessors.text,s=function(e){return n?e:e.toLowerCase()},u=function(e){return s(a(e))===s(t)};return o.some(u)||i.some(u)},n.getPlaceholder=function(){var e=this.props,t=e.value,n=e.placeholder;return(t&&t.length?"":n)||""},t}(x.default.Component),m.propTypes=H,m.defaultProps={data:[],allowCreate:"onFilter",filter:"startsWith",value:[],searchTerm:"",listComponent:C.default},c=y,f=u(c.prototype,"handleClick",[z.widgetEditable],{enumerable:!0,initializer:function(){var e=this;return function(t){var n=t.target;e.focus(),(0,_.default)(n,".rw-select")?e.toggle():e.open()}}}),p=u(c.prototype,"handleDoubleClick",[z.widgetEditable],{enumerable:!0,initializer:function(){var e=this;return function(){e.inputRef&&(e.focus(),e.inputRef.select())}}}),h=u(c.prototype,"handleSelect",[z.widgetEditable],{enumerable:!0,initializer:function(){var e=this;return function(t,n){if(void 0===t||t===G)return void e.handleCreate(e.props.searchTerm,n);(0,U.notify)(e.props.onSelect,[t,{originalEvent:n}]),e.change(t,n,"insert"),e.focus()}}}),d=u(c.prototype,"handleCreate",[z.widgetEditable],{enumerable:!0,initializer:function(){var e=this;return function(t,n){void 0===t&&(t=""),(0,U.notify)(e.props.onCreate,t),e.clearSearch(n),e.focus()}}}),v=u(c.prototype,"handleKeyDown",[z.widgetEditable],{enumerable:!0,initializer:function(){var e=this;return function(t){var n=e.props,r=n.open,i=n.searchTerm,o=n.onKeyDown,a=t.key,s=t.keyCode,u=t.altKey,l=t.ctrlKey,c=e.state,f=c.focusedTag,p=c.focusedItem,h=e.list,d=e.tagList,v=p===G,m=e.allowCreate(),y=function(t){return e.setState({focusedTag:t})},g=function(t){return e.setState({focusedItem:t,focusedTag:null})};if((0,U.notify)(o,[t]),!t.defaultPrevented)if("ArrowDown"===a){if(t.preventDefault(),!r)return e.open();var _=h.next(p),b=v||m&&p===_;g(b?G:_)}else if("ArrowUp"===a&&(r||u)){if(t.preventDefault(),u)return e.close();g(v?h.last():h.prev(p))}else if("End"===a)t.preventDefault(),r?g(h.last()):y(d.last());else if("Home"===a)t.preventDefault(),r?g(h.first()):y(d.first());else if(r&&13===s){if(t.preventDefault(),l&&m)return e.handleCreate(i,t);e.handleSelect(p,t)}else if("Escape"===a)r?e.close():d&&y(null);else if(!i&&!e._deletingText)if("ArrowLeft"===a)y(d.prev(f)||d.last());else if("ArrowRight"===a&&f){var x=d.next(f);y(x===f?null:x)}else"Delete"!==a||d.isDisabled(f)?"Backspace"===a?e.handleDelete(d.last(),t):" "!==a||r||(t.preventDefault(),e.open()):e.handleDelete(f,t)}}}),c),q=(0,w.default)(X,{open:"onToggle",value:"onChange",searchTerm:"onSearch"},["focus"]);t.default=q,e.exports=t.default},function(e,t,n){"use strict";function r(e,t,n){for(;e&&(a(e)||!(0,o.default)(e,t));)e=e===n||a(e)?void 0:e.parentNode;return e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(256),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a=function(e){return null!=e&&e.nodeType===e.DOCUMENT_NODE};e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}t.__esModule=!0,t.default=void 0;var s=r(n(88)),u=r(n(2)),l=r(n(0)),c=n(12),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(7)),p=function(e){function t(){return e.apply(this,arguments)||this}a(t,e);var n=t.prototype;return n.focus=function(){var e=(0,c.findDOMNode)(this);(0,s.default)()!==e&&e.focus()},n.select=function(){(0,c.findDOMNode)(this).select()},n.render=function(){var e=this.props,t=e.disabled,n=e.readOnly,r=o(e,["disabled","readOnly"]),a=Math.max((r.value||r.placeholder).length,1)+1;return l.default.createElement("input",i({},r,{size:a,className:"rw-input-reset",autoComplete:"off","aria-disabled":t,"aria-readonly":n,disabled:t,readOnly:n,__source:{fileName:"src/MultiselectInput.js",lineNumber:36},__self:this}))},t}(l.default.Component);p.propTypes={value:u.default.string,placeholder:u.default.string,maxLength:u.default.number,onChange:u.default.func.isRequired,disabled:f.disabled,readOnly:f.disabled};var h=p;t.default=h,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}t.__esModule=!0,t.default=void 0;var a=r(n(0)),s=r(n(2)),u=r(n(608)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(7)),c=n(94),f="src/MultiselectTagList.js",p=function(e,t,n){return!!(Array.isArray(t)?~(0,c.dataIndexOf)(t,e,n):t)},h=function(e){function t(){for(var t,n,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=n=e.call.apply(e,[this].concat(o))||this,n.handleDelete=function(e,t){!0!==n.props.disabled&&n.props.onDelete(e,t)},t||i(n)}return o(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.id,r=t.value,i=t.activeId,o=t.valueAccessor,s=t.textAccessor,l=t.label,c=t.disabled,h=t.focusedItem,d=t.valueComponent;return a.default.createElement("ul",{id:n,tabIndex:"-1",role:"listbox","aria-label":l,className:"rw-multiselect-taglist",__source:{fileName:f,lineNumber:50},__self:this},r.map(function(t,n){var r=h===t;return a.default.createElement(u.default,{key:n,id:r?i:null,value:t,focused:r,onClick:e.handleDelete,disabled:p(t,c,o),__source:{fileName:f,lineNumber:61},__self:this},d?a.default.createElement(d,{item:t,__source:{fileName:f,lineNumber:70},__self:this}):a.default.createElement("span",{__source:{fileName:f,lineNumber:71},__self:this},s(t)))}))},t}(a.default.Component);h.propTypes={id:s.default.string.isRequired,activeId:s.default.string.isRequired,label:s.default.string,value:s.default.array,focusedItem:s.default.any,valueAccessor:s.default.func.isRequired,textAccessor:s.default.func.isRequired,onDelete:s.default.func.isRequired,valueComponent:s.default.func,disabled:l.disabled.acceptsArray};var d=h;t.default=d,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}t.__esModule=!0,t.default=void 0;var a=r(n(3)),s=r(n(0)),u=r(n(2)),l=r(n(52)),c="src/MultiselectTag.js",f=function(e){function t(){for(var t,n,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=n=e.call.apply(e,[this].concat(o))||this,n.onClick=function(e){var t=n.props,r=t.value,i=t.disabled,o=t.onClick;i||o(r,e)},t||i(n)}o(t,e);var n=t.prototype;return n.renderDelete=function(){var e=this.props,t=e.label,n=e.disabled,r=e.readOnly;return s.default.createElement(l.default,{variant:"select",onClick:this.onClick,className:"rw-multiselect-tag-btn",disabled:n||r,"aria-label":t||"Remove item",__source:{fileName:c,lineNumber:28},__self:this},s.default.createElement("span",{"aria-hidden":"true",__source:{fileName:c,lineNumber:35},__self:this},"\xd7"))},n.render=function(){var e=this.props,t=e.id,n=e.children,r=e.focused,i=e.disabled,o=i?void 0:"-1";return s.default.createElement("li",{id:t,role:"option",tabIndex:o,className:(0,a.default)("rw-multiselect-tag",i&&"rw-state-disabled",r&&!i&&"rw-state-focus"),__source:{fileName:c,lineNumber:45},__self:this},n,s.default.createElement("div",{__source:{fileName:c,lineNumber:56},__self:this},this.renderDelete()))},t}(s.default.Component);f.propTypes={id:u.default.string,onClick:u.default.func.isRequired,focused:u.default.bool,disabled:u.default.bool,readOnly:u.default.bool,label:u.default.string,value:u.default.any};var p=f;t.default=p,e.exports=t.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}function a(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function s(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t,n,r,i){var o={};return Object.keys(r).forEach(function(e){o[e]=r[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function c(e,t){if(!t.length)return null;for(var n=0;n<e.length;n++)if(~t.indexOf(e[n]))return e[n];return null}t.__esModule=!0,t.default=void 0;var f,p,h,d,v,m=i(n(0)),y=n(12),g=i(n(2)),_=i(n(3)),b=n(25),x=i(n(41)),w=i(n(65)),E=i(n(42)),S=i(n(610)),T=n(32),A=n(23),O=r(n(11)),P=r(n(7)),C=i(n(53)),k=i(n(66)),R=i(n(43)),M=i(n(67)),I=n(33),L=n(26),D="src/SelectList.js",N=(v=d=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=e.call.apply(e,[this].concat(r))||this,t.handleMouseDown=function(){t._clicking=!0},t.handleFocusChanged=function(e){var n=t.props,r=n.data,i=n.disabled,o=t.state.dataItems;if(e!==t.state.focused){if(e){if(e&&!t._clicking){var a=Array.isArray(i)?o.filter(function(e){return!t.accessors.find(i,e)}):o;t.setState({focusedItem:c(r,a)||t.list.nextEnabled(r[0])})}}else t.setState({focusedItem:null});t._clicking=!1}},a(t,"handleKeyDown",p,u(t)),a(t,"handleKeyPress",h,u(t)),t.handleChange=function(e,n,r){var i=t.props,o=i.multiple,a=i.onChange,s=t.state.dataItems;if(t.setState({focusedItem:e}),!o)return(0,L.notify)(a,[n?e:null,{originalEvent:r,lastValue:s,checked:n}]);var u=n?s.concat(e):s.filter(function(t){return t!==e});(0,L.notify)(a,[u||[],{checked:n,lastValue:s,originalEvent:r,dataItem:e}])},t.attachListRef=function(e){return t.listRef=e},t.renderListItem=function(e){var n=t.props,r=n.name,i=n.multiple,a=n.disabled,s=n.readOnly,u=t.state.dataItems;return m.default.createElement(S.default,o({},e,{name:r||t.itemName,type:i?"checkbox":"radio",readOnly:!0===a||s,onChange:t.handleChange,onMouseDown:t.handleMouseDown,checked:!!t.accessors.find(u,e.dataItem),__source:{fileName:D,lineNumber:271},__self:this}))},(0,b.autoFocus)(u(t)),t.messages=(0,T.getMessages)(t.props.messages),t.widgetId=(0,L.instanceId)(u(t),"_widget"),t.listId=(0,L.instanceId)(u(t),"_listbox"),t.activeId=(0,L.instanceId)(u(t),"_listbox_active_option"),t.itemName=(0,L.instanceId)(u(t),"_name"),t.list=(0,C.default)(u(t)),t.accessors=(0,k.default)(u(t)),t.timeouts=(0,b.timeoutManager)(u(t)),t.handleScroll=(0,M.default)(u(t),!1),t.focusManager=(0,R.default)(u(t),{didHandle:t.handleFocusChanged}),t.state=t.getStateFromProps(t.props),t}s(t,e);var n=t.prototype;return n.getStateFromProps=function(e){var t=this.accessors,n=this.list,r=e.data,i=e.value;return n.setData(r),{dataItems:(0,A.makeArray)(i).map(function(e){return t.findOrSelf(r,e)})}},n.componentWillReceiveProps=function(e){return this.messages=(0,T.getMessages)(e.messages),this.setState(this.getStateFromProps(e))},n.render=function(){var e=this.props,t=e.className,n=e.tabIndex,r=e.busy,i=O.pickElementProps(this),a=this.state,s=a.focusedItem,u=a.focused,l=this.accessors,c=l.value,f=l.text,p=this.props.listComponent,h=this.list.defaultProps(),d=!0===this.props.disabled,v=!0===this.props.readOnly;return s=u&&!d&&!v&&s,m.default.createElement(E.default,o({},i,{id:this.widgetId,onBlur:this.focusManager.handleBlur,onFocus:this.focusManager.handleFocus,onKeyDown:this.handleKeyDown,onKeyPress:this.handleKeyPress,focused:u,disabled:d,readOnly:v,role:"radiogroup","aria-busy":!!r,"aria-activedescendant":this.activeId,className:(0,_.default)(t,"rw-select-list","rw-widget-input","rw-widget-container",r&&"rw-loading-mask"),__source:{fileName:D,lineNumber:300},__self:this}),m.default.createElement(p,o({},h,{role:"radiogroup",tabIndex:n||"0",id:this.listId,activeId:this.activeId,valueAccessor:c,textAccessor:f,focusedItem:s,onMove:this.handleScroll,optionComponent:this.renderListItem,messages:{emptyList:this.messages.emptyList},ref:this.attachListRef,__source:{fileName:D,lineNumber:321},__self:this})))},n.focus=function(){(0,y.findDOMNode)(this.refs.list).focus()},n.selectAll=function(){var e=this.accessors,t=this.props,n=t.data,r=t.disabled,i=t.onChange,o=this.state.dataItems;r=Array.isArray(r)?r:[];var a,s=n;r.length&&(a=o.filter(function(t){return e.find(r,t)}),s=n.filter(function(t){return!e.find(r,t)}));var u=o.length>=s.length?o.filter(function(t){return e.find(r,t)}):s.concat(a);(0,L.notify)(i,[u])},n.search=function(e,t){var n=this,r=this._searchTerm,i=this.list,o=((r||"")+e).toLowerCase(),a=this.props.multiple;a||t.persist(),e&&(this._searchTerm=o,this.timeouts.set("search",function(){var e=i.next(n.state.focusedItem,o);n._searchTerm="",e&&(a?n.setState({focusedItem:e}):n.handleChange(e,!0,t))},this.props.delay))},t}(m.default.Component),d.propTypes={data:g.default.array,value:g.default.oneOfType([g.default.any,g.default.array]),onChange:g.default.func,onMove:g.default.func,multiple:g.default.bool,onKeyDown:g.default.func,onKeyPress:g.default.func,itemComponent:P.elementType,listComponent:P.elementType,valueField:P.accessor,textField:P.accessor,busy:g.default.bool,delay:g.default.number,autoFocus:g.default.bool,disabled:P.disabled.acceptsArray,readOnly:P.disabled,listProps:g.default.object,tabIndex:g.default.any,name:g.default.string,isRtl:g.default.bool,messages:g.default.shape({emptyList:P.message})},d.defaultProps={delay:250,value:[],data:[],listComponent:w.default},f=v,p=l(f.prototype,"handleKeyDown",[I.widgetEditable],{enumerable:!0,initializer:function(){var e=this;return function(t){var n=e.list,r=e.accessors,i=e.props.multiple,o=e.state,a=o.dataItems,s=o.focusedItem,u=t.keyCode,l=t.key,c=t.ctrlKey,f=function(n){if(n){var o=!i||!r.find(a,n);e.handleChange(n,o,t)}};(0,L.notify)(e.props.onKeyDown,[t]),t.defaultPrevented||("End"===l?(t.preventDefault(),s=n.last(),e.setState({focusedItem:s}),i||f(s)):"Home"===l?(t.preventDefault(),s=n.first(),e.setState({focusedItem:s}),i||f(s)):"Enter"===l||" "===l?(t.preventDefault(),f(s)):"ArrowDown"===l||"ArrowRight"===l?(t.preventDefault(),s=n.next(s),e.setState({focusedItem:s}),i||f(s)):"ArrowUp"===l||"ArrowLeft"===l?(t.preventDefault(),s=n.prev(s),e.setState({focusedItem:s}),i||f(s)):i&&65===u&&c&&(t.preventDefault(),e.selectAll()))}}}),h=l(f.prototype,"handleKeyPress",[I.widgetEditable],{enumerable:!0,initializer:function(){var e=this;return function(t){(0,L.notify)(e.props.onKeyPress,[t]),t.defaultPrevented||e.search(String.fromCharCode(t.which),t)}}}),f),F=(0,x.default)(N,{value:"onChange"},["selectAll","focus"]);t.default=F,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}t.__esModule=!0,t.default=void 0;var u=r(n(0)),l=r(n(2)),c=r(n(133)),f=function(e){function t(){for(var t,n,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n=e.call.apply(e,[this].concat(i))||this,n.handleChange=function(e){var t=n.props,r=t.onChange,i=t.disabled,o=t.dataItem;i||r(o,e.target.checked)},t||a(n)}return s(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.disabled,r=e.readOnly,a=e.name,s=e.type,l=e.checked,f=e.onMouseDown,p=o(e,["children","disabled","readOnly","name","type","checked","onMouseDown"]);return delete p.onChange,u.default.createElement(c.default,i({},p,{role:s,disabled:n,"aria-checked":!!l,__source:{fileName:"src/SelectListItem.js",lineNumber:40},__self:this}),u.default.createElement("label",{onMouseDown:f,className:"rw-select-list-label",__source:{fileName:"src/SelectListItem.js",lineNumber:46},__self:this},u.default.createElement("input",{name:a,type:s,tabIndex:"-1",checked:l,disabled:n||!!r,role:"presentation",className:"rw-select-list-input",onChange:this.handleChange,__source:{fileName:"src/SelectListItem.js",lineNumber:50},__self:this}),t))},t}(u.default.Component);f.propTypes={type:l.default.string.isRequired,name:l.default.string.isRequired,disabled:l.default.bool,readOnly:l.default.bool,dataItem:l.default.any,checked:l.default.bool.isRequired,onChange:l.default.func.isRequired,onMouseDown:l.default.func.isRequired};var p=f;t.default=p,e.exports=t.default},function(e,t){},function(e,t){}]);
//# sourceMappingURL=main.20cbc533.js.map